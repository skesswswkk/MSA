{"version":3,"file":"explore.b496d7ef0dc6bf242b8e.js","mappings":"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","sources":["webpack://grafana/./public/app/core/utils/types.ts","webpack://grafana/./public/app/features/correlations/useCorrelations.ts","webpack://grafana/./public/app/features/explore/ExploreActions.tsx","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useUpdate.js","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/hookState.js","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useGetSet.js","webpack://grafana/./public/app/features/explore/ExploreGraph.tsx","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useCounter.js","webpack://grafana/./public/app/features/explore/exploreGraphStyleUtils.ts","webpack://grafana/./public/app/features/explore/ExploreGraphLabel.tsx","webpack://grafana/./.yarn/__virtual__/re-resizable-virtual-3cca0dab2b/3/opt/drone/yarncache/re-resizable-npm-6.9.9-2a772ae568-a2c8bfe866.zip/node_modules/re-resizable/lib/resizer.js","webpack://grafana/./.yarn/__virtual__/re-resizable-virtual-3cca0dab2b/3/opt/drone/yarncache/re-resizable-npm-6.9.9-2a772ae568-a2c8bfe866.zip/node_modules/re-resizable/lib/index.js","webpack://grafana/./public/app/features/explore/ExploreDrawer.tsx","webpack://grafana/./public/app/features/explore/ExploreQueryInspector.tsx","webpack://grafana/./public/app/features/explore/TimeSyncButton.tsx","webpack://grafana/./public/app/features/explore/ExploreTimeControls.tsx","webpack://grafana/./public/app/features/explore/LiveTailButton.tsx","webpack://grafana/./public/app/features/explore/useLiveTailControls.ts","webpack://grafana/./public/app/features/explore/ExploreToolbar.tsx","webpack://grafana/./public/app/features/explore/FlameGraphExploreContainer.tsx","webpack://grafana/./public/app/features/explore/Time.tsx","webpack://grafana/./public/app/features/explore/ElapsedTime.tsx","webpack://grafana/./public/app/features/explore/LiveLogs.tsx","webpack://grafana/./public/app/features/explore/MetaInfoText.tsx","webpack://grafana/./public/app/features/explore/LogsMetaRow.tsx","webpack://grafana/./public/app/features/explore/LogsNavigationPages.tsx","webpack://grafana/./public/app/features/explore/LogsNavigation.tsx","webpack://grafana/./public/app/features/explore/LogsVolumePanel.tsx","webpack://grafana/./public/app/features/explore/Logs.tsx","webpack://grafana/./public/app/features/explore/utils/LogsCrossFadeTransition.tsx","webpack://grafana/./public/app/features/explore/LogsContainer.tsx","webpack://grafana/./public/app/features/explore/NoData.tsx","webpack://grafana/./public/app/features/explore/NoDataSourceCallToAction.tsx","webpack://grafana/./public/app/features/explore/NodeGraphContainer.tsx","webpack://grafana/./public/app/features/explore/QueryRows.tsx","webpack://grafana/./public/app/core/components/Animations/FadeIn.tsx","webpack://grafana/./public/app/features/explore/ErrorContainer.tsx","webpack://grafana/./public/app/features/explore/ResponseErrorContainer.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistoryCard.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistoryQueriesTab.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistorySettingsTab.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistoryStarredTab.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistory.tsx","webpack://grafana/./public/app/features/explore/RichHistory/RichHistoryContainer.tsx","webpack://grafana/./public/app/features/explore/SecondaryActions.tsx","webpack://grafana/./public/app/features/explore/TableContainer.tsx","webpack://grafana/./public/app/features/explore/TraceView/TraceViewContainer.tsx","webpack://grafana/./public/app/features/explore/Explore.tsx","webpack://grafana/./public/app/features/explore/ExplorePaneContainer.tsx","webpack://grafana/./public/app/features/explore/Wrapper.tsx","webpack://grafana/./public/app/features/explore/state/selectors.ts","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useInterval.js","webpack://grafana/../../opt/drone/yarncache/immer-npm-9.0.16-426ac657bc-e9a5ca65c9.zip/node_modules/immer/dist/immer.esm.mjs"],"sourcesContent":["type Truthy<T> = T extends false | '' | 0 | null | undefined ? never : T;\n\nexport const isTruthy = <T>(value: T): value is Truthy<T> => Boolean(value);\n","import { useAsyncFn } from 'react-use';\nimport { lastValueFrom } from 'rxjs';\n\nimport { DataSourceInstanceSettings } from '@grafana/data';\nimport { getDataSourceSrv, FetchResponse } from '@grafana/runtime';\nimport { useGrafana } from 'app/core/context/GrafanaContext';\n\nimport { Correlation, CreateCorrelationParams, RemoveCorrelationParams, UpdateCorrelationParams } from './types';\n\nexport interface CorrelationData extends Omit<Correlation, 'sourceUID' | 'targetUID'> {\n  source: DataSourceInstanceSettings;\n  target: DataSourceInstanceSettings;\n}\n\nconst toEnrichedCorrelationData = ({ sourceUID, targetUID, ...correlation }: Correlation): CorrelationData => ({\n  ...correlation,\n  source: getDataSourceSrv().getInstanceSettings(sourceUID)!,\n  target: getDataSourceSrv().getInstanceSettings(targetUID)!,\n});\n\nconst toEnrichedCorrelationsData = (correlations: Correlation[]) => correlations.map(toEnrichedCorrelationData);\nfunction getData<T>(response: FetchResponse<T>) {\n  return response.data;\n}\n\n/**\n * hook for managing correlations data.\n * TODO: ideally this hook shouldn't have any side effect like showing notifications on error\n * and let consumers handle them. It works nicely with the correlations settings page, but when we'll\n * expose this we'll have to remove those side effects.\n */\nexport const useCorrelations = () => {\n  const { backend } = useGrafana();\n\n  const [getInfo, get] = useAsyncFn<() => Promise<CorrelationData[]>>(\n    () =>\n      lastValueFrom(\n        backend.fetch<Correlation[]>({ url: '/api/datasources/correlations', method: 'GET', showErrorAlert: false })\n      )\n        .then(getData)\n        .then(toEnrichedCorrelationsData),\n    [backend]\n  );\n\n  const [createInfo, create] = useAsyncFn<(params: CreateCorrelationParams) => Promise<CorrelationData>>(\n    ({ sourceUID, ...correlation }) =>\n      backend.post(`/api/datasources/uid/${sourceUID}/correlations`, correlation).then(toEnrichedCorrelationData),\n    [backend]\n  );\n\n  const [removeInfo, remove] = useAsyncFn<(params: RemoveCorrelationParams) => Promise<{ message: string }>>(\n    ({ sourceUID, uid }) => backend.delete(`/api/datasources/uid/${sourceUID}/correlations/${uid}`),\n    [backend]\n  );\n\n  const [updateInfo, update] = useAsyncFn<(params: UpdateCorrelationParams) => Promise<CorrelationData>>(\n    ({ sourceUID, uid, ...correlation }) =>\n      backend\n        .patch(`/api/datasources/uid/${sourceUID}/correlations/${uid}`, correlation)\n        .then(toEnrichedCorrelationData),\n    [backend]\n  );\n\n  return {\n    create: {\n      execute: create,\n      ...createInfo,\n    },\n    update: {\n      execute: update,\n      ...updateInfo,\n    },\n    get: {\n      execute: get,\n      ...getInfo,\n    },\n    remove: {\n      execute: remove,\n      ...removeInfo,\n    },\n  };\n};\n","import { useRegisterActions, useKBar, Action, Priority } from 'kbar';\nimport { FC, useEffect, useState } from 'react';\n\nimport { ExploreId, useDispatch, useSelector } from 'app/types';\n\nimport { splitOpen, splitClose } from './state/main';\nimport { runQueries } from './state/query';\nimport { isSplit } from './state/selectors';\n\ninterface Props {\n  exploreIdLeft: ExploreId;\n  exploreIdRight?: ExploreId;\n}\n\nexport const ExploreActions: FC<Props> = ({ exploreIdLeft, exploreIdRight }: Props) => {\n  const [actions, setActions] = useState<Action[]>([]);\n  const { query } = useKBar();\n  const dispatch = useDispatch();\n  const splitted = useSelector(isSplit);\n\n  useEffect(() => {\n    const exploreSection = {\n      name: 'Explore',\n      priority: Priority.HIGH + 1,\n    };\n\n    const actionsArr: Action[] = [];\n\n    if (splitted) {\n      actionsArr.push({\n        id: 'explore/run-query-left',\n        name: 'Run query (left)',\n        keywords: 'query left',\n        perform: () => {\n          dispatch(runQueries(exploreIdLeft));\n        },\n        section: exploreSection,\n      });\n      if (exploreIdRight) {\n        // we should always have the right exploreId if split\n        actionsArr.push({\n          id: 'explore/run-query-right',\n          name: 'Run query (right)',\n          keywords: 'query right',\n          perform: () => {\n            dispatch(runQueries(exploreIdRight));\n          },\n          section: exploreSection,\n        });\n        actionsArr.push({\n          id: 'explore/split-view-close-left',\n          name: 'Close split view left',\n          keywords: 'split',\n          perform: () => {\n            dispatch(splitClose(exploreIdLeft));\n          },\n          section: exploreSection,\n        });\n        actionsArr.push({\n          id: 'explore/split-view-close-right',\n          name: 'Close split view right',\n          keywords: 'split',\n          perform: () => {\n            dispatch(splitClose(exploreIdRight));\n          },\n          section: exploreSection,\n        });\n      }\n    } else {\n      actionsArr.push({\n        id: 'explore/run-query',\n        name: 'Run query',\n        keywords: 'query',\n        perform: () => {\n          dispatch(runQueries(exploreIdLeft));\n        },\n        section: exploreSection,\n      });\n      actionsArr.push({\n        id: 'explore/split-view-open',\n        name: 'Open split view',\n        keywords: 'split',\n        perform: () => {\n          dispatch(splitOpen());\n        },\n        section: exploreSection,\n      });\n    }\n    setActions(actionsArr);\n  }, [exploreIdLeft, exploreIdRight, splitted, query, dispatch]);\n\n  useRegisterActions(!query ? [] : actions, [actions, query]);\n\n  return null;\n};\n","import { useReducer } from 'react';\nvar updateReducer = function (num) { return (num + 1) % 1000000; };\nexport default function useUpdate() {\n    var _a = useReducer(updateReducer, 0), update = _a[1];\n    return update;\n}\n","export function resolveHookState(nextState, currentState) {\n    if (typeof nextState === 'function') {\n        return nextState.length ? nextState(currentState) : nextState();\n    }\n    return nextState;\n}\n","import { useMemo, useRef } from 'react';\nimport useUpdate from './useUpdate';\nimport { resolveHookState } from './misc/hookState';\nexport default function useGetSet(initialState) {\n    var state = useRef(resolveHookState(initialState));\n    var update = useUpdate();\n    return useMemo(function () { return [\n        function () { return state.current; },\n        function (newState) {\n            state.current = resolveHookState(newState, state.current);\n            update();\n        },\n    ]; }, []);\n}\n","import { css, cx } from '@emotion/css';\nimport { identity } from 'lodash';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useCounter } from 'react-use';\n\nimport {\n  AbsoluteTimeRange,\n  applyFieldOverrides,\n  createFieldConfigRegistry,\n  DataFrame,\n  dateTime,\n  FieldColorModeId,\n  FieldConfigSource,\n  getFrameDisplayName,\n  GrafanaTheme2,\n  LoadingState,\n  SplitOpen,\n  TimeZone,\n  DashboardCursorSync,\n  EventBus,\n} from '@grafana/data';\nimport { PanelRenderer } from '@grafana/runtime';\nimport { GraphDrawStyle, LegendDisplayMode, TooltipDisplayMode, SortOrder } from '@grafana/schema';\nimport {\n  Icon,\n  PanelContext,\n  PanelContextProvider,\n  SeriesVisibilityChangeMode,\n  useStyles2,\n  useTheme2,\n} from '@grafana/ui';\nimport { defaultGraphConfig, getGraphFieldConfig } from 'app/plugins/panel/timeseries/config';\nimport { TimeSeriesOptions } from 'app/plugins/panel/timeseries/types';\n\nimport { ExploreGraphStyle } from '../../types';\nimport { seriesVisibilityConfigFactory } from '../dashboard/dashgrid/SeriesVisibilityConfigFactory';\n\nimport { applyGraphStyle } from './exploreGraphStyleUtils';\n\nconst MAX_NUMBER_OF_TIME_SERIES = 20;\n\ninterface Props {\n  data: DataFrame[];\n  height: number;\n  width: number;\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  loadingState: LoadingState;\n  annotations?: DataFrame[];\n  onHiddenSeriesChanged?: (hiddenSeries: string[]) => void;\n  tooltipDisplayMode?: TooltipDisplayMode;\n  splitOpenFn: SplitOpen;\n  onChangeTime: (timeRange: AbsoluteTimeRange) => void;\n  graphStyle: ExploreGraphStyle;\n  anchorToZero: boolean;\n  eventBus: EventBus;\n}\n\nexport function ExploreGraph({\n  data,\n  height,\n  width,\n  timeZone,\n  absoluteRange,\n  onChangeTime,\n  loadingState,\n  annotations,\n  onHiddenSeriesChanged,\n  splitOpenFn,\n  graphStyle,\n  tooltipDisplayMode = TooltipDisplayMode.Single,\n  anchorToZero,\n  eventBus,\n}: Props) {\n  const theme = useTheme2();\n  const style = useStyles2(getStyles);\n  const [showAllTimeSeries, setShowAllTimeSeries] = useState(false);\n  const [structureRev, { inc: incrementStructureRev }] = useCounter(1);\n  const fieldConfigRegistry = useMemo(\n    () => createFieldConfigRegistry(getGraphFieldConfig(defaultGraphConfig), 'Explore'),\n    []\n  );\n\n  const [fieldConfig, setFieldConfig] = useState<FieldConfigSource>({\n    defaults: {\n      min: anchorToZero ? 0 : undefined,\n      color: {\n        mode: FieldColorModeId.PaletteClassic,\n      },\n      custom: {\n        drawStyle: GraphDrawStyle.Line,\n        fillOpacity: 0,\n        pointSize: 5,\n      },\n    },\n    overrides: [],\n  });\n\n  const timeRange = {\n    from: dateTime(absoluteRange.from),\n    to: dateTime(absoluteRange.to),\n    raw: {\n      from: dateTime(absoluteRange.from),\n      to: dateTime(absoluteRange.to),\n    },\n  };\n\n  const styledFieldConfig = useMemo(() => applyGraphStyle(fieldConfig, graphStyle), [fieldConfig, graphStyle]);\n\n  const dataWithConfig = useMemo(() => {\n    return applyFieldOverrides({\n      fieldConfig: styledFieldConfig,\n      data,\n      timeZone,\n      replaceVariables: (value) => value, // We don't need proper replace here as it is only used in getLinks and we use getFieldLinks\n      theme,\n      fieldConfigRegistry,\n    });\n  }, [fieldConfigRegistry, data, timeZone, theme, styledFieldConfig]);\n\n  // structureRev should be incremented when either the number of series or the config changes.\n  // like useEffect, but runs before rendering.\n  // TODO: while this works as it is supposed to, we are forced to do this now because of the way\n  // ExploreGraph is implemented. We should refactor it to a single component that handles structureRev increments\n  // when a user changes the viz style and not react to the value change itself.\n  useMemo(incrementStructureRev, [dataWithConfig.length, styledFieldConfig, incrementStructureRev]);\n\n  useEffect(() => {\n    if (onHiddenSeriesChanged) {\n      const hiddenFrames: string[] = [];\n      dataWithConfig.forEach((frame) => {\n        const allFieldsHidden = frame.fields.map((field) => field.config?.custom?.hideFrom?.viz).every(identity);\n        if (allFieldsHidden) {\n          hiddenFrames.push(getFrameDisplayName(frame));\n        }\n      });\n      onHiddenSeriesChanged(hiddenFrames);\n    }\n  }, [dataWithConfig, onHiddenSeriesChanged]);\n\n  const seriesToShow = showAllTimeSeries ? dataWithConfig : dataWithConfig.slice(0, MAX_NUMBER_OF_TIME_SERIES);\n\n  const panelContext: PanelContext = {\n    eventBus,\n    sync: () => DashboardCursorSync.Crosshair,\n    onSplitOpen: splitOpenFn,\n    onToggleSeriesVisibility(label: string, mode: SeriesVisibilityChangeMode) {\n      setFieldConfig(seriesVisibilityConfigFactory(label, mode, fieldConfig, data));\n    },\n  };\n\n  const panelOptions: TimeSeriesOptions = useMemo(\n    () => ({\n      tooltip: { mode: tooltipDisplayMode, sort: SortOrder.None },\n      legend: {\n        displayMode: LegendDisplayMode.List,\n        showLegend: true,\n        placement: 'bottom',\n        calcs: [],\n      },\n    }),\n    [tooltipDisplayMode]\n  );\n\n  return (\n    <PanelContextProvider value={panelContext}>\n      {dataWithConfig.length > MAX_NUMBER_OF_TIME_SERIES && !showAllTimeSeries && (\n        <div className={cx([style.timeSeriesDisclaimer])}>\n          <Icon className={style.disclaimerIcon} name=\"exclamation-triangle\" />\n          {`Showing only ${MAX_NUMBER_OF_TIME_SERIES} time series. `}\n          <span\n            className={cx([style.showAllTimeSeries])}\n            onClick={() => {\n              setShowAllTimeSeries(true);\n            }}\n          >{`Show all ${dataWithConfig.length}`}</span>\n        </div>\n      )}\n      <PanelRenderer\n        data={{ series: seriesToShow, timeRange, state: loadingState, annotations, structureRev }}\n        pluginId=\"timeseries\"\n        title=\"\"\n        width={width}\n        height={height}\n        onChangeTimeRange={onChangeTime}\n        timeZone={timeZone}\n        options={panelOptions}\n      />\n    </PanelContextProvider>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  timeSeriesDisclaimer: css`\n    label: time-series-disclaimer;\n    width: 300px;\n    margin: ${theme.spacing(1)} auto;\n    padding: 10px 0;\n    border-radius: ${theme.spacing(2)};\n    text-align: center;\n    background-color: ${theme.colors.background.primary};\n  `,\n  disclaimerIcon: css`\n    label: disclaimer-icon;\n    color: ${theme.colors.warning.main};\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  showAllTimeSeries: css`\n    label: show-all-time-series;\n    cursor: pointer;\n    color: ${theme.colors.text.link};\n  `,\n});\n","import { useMemo } from 'react';\nimport useGetSet from './useGetSet';\nimport { resolveHookState } from './misc/hookState';\nexport default function useCounter(initialValue, max, min) {\n    if (initialValue === void 0) { initialValue = 0; }\n    if (max === void 0) { max = null; }\n    if (min === void 0) { min = null; }\n    var init = resolveHookState(initialValue);\n    typeof init !== 'number' &&\n        console.error('initialValue has to be a number, got ' + typeof initialValue);\n    if (typeof min === 'number') {\n        init = Math.max(init, min);\n    }\n    else if (min !== null) {\n        console.error('min has to be a number, got ' + typeof min);\n    }\n    if (typeof max === 'number') {\n        init = Math.min(init, max);\n    }\n    else if (max !== null) {\n        console.error('max has to be a number, got ' + typeof max);\n    }\n    var _a = useGetSet(init), get = _a[0], setInternal = _a[1];\n    return [\n        get(),\n        useMemo(function () {\n            var set = function (newState) {\n                var prevState = get();\n                var rState = resolveHookState(newState, prevState);\n                if (prevState !== rState) {\n                    if (typeof min === 'number') {\n                        rState = Math.max(rState, min);\n                    }\n                    if (typeof max === 'number') {\n                        rState = Math.min(rState, max);\n                    }\n                    prevState !== rState && setInternal(rState);\n                }\n            };\n            return {\n                get: get,\n                set: set,\n                inc: function (delta) {\n                    if (delta === void 0) { delta = 1; }\n                    var rDelta = resolveHookState(delta, get());\n                    if (typeof rDelta !== 'number') {\n                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);\n                    }\n                    set(function (num) { return num + rDelta; });\n                },\n                dec: function (delta) {\n                    if (delta === void 0) { delta = 1; }\n                    var rDelta = resolveHookState(delta, get());\n                    if (typeof rDelta !== 'number') {\n                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);\n                    }\n                    set(function (num) { return num - rDelta; });\n                },\n                reset: function (value) {\n                    if (value === void 0) { value = init; }\n                    var rValue = resolveHookState(value, get());\n                    if (typeof rValue !== 'number') {\n                        console.error('value has to be a number or function returning a number, got ' + typeof rValue);\n                    }\n                    // eslint-disable-next-line react-hooks/exhaustive-deps\n                    init = rValue;\n                    set(rValue);\n                },\n            };\n        }, [init, min, max]),\n    ];\n}\n","import produce from 'immer';\n\nimport { FieldConfigSource } from '@grafana/data';\nimport { GraphDrawStyle, GraphFieldConfig, StackingMode } from '@grafana/schema';\n\nimport { ExploreGraphStyle } from '../../types';\n\nexport type FieldConfig = FieldConfigSource<GraphFieldConfig>;\n\nexport function applyGraphStyle(config: FieldConfig, style: ExploreGraphStyle): FieldConfig {\n  return produce(config, (draft) => {\n    if (draft.defaults.custom === undefined) {\n      draft.defaults.custom = {};\n    }\n\n    const { custom } = draft.defaults;\n\n    if (custom.stacking === undefined) {\n      custom.stacking = { group: 'A' };\n    }\n\n    switch (style) {\n      case 'lines':\n        custom.drawStyle = GraphDrawStyle.Line;\n        custom.stacking.mode = StackingMode.None;\n        custom.fillOpacity = 0;\n        break;\n      case 'bars':\n        custom.drawStyle = GraphDrawStyle.Bars;\n        custom.stacking.mode = StackingMode.None;\n        custom.fillOpacity = 100;\n        break;\n      case 'points':\n        custom.drawStyle = GraphDrawStyle.Points;\n        custom.stacking.mode = StackingMode.None;\n        custom.fillOpacity = 0;\n        break;\n      case 'stacked_lines':\n        custom.drawStyle = GraphDrawStyle.Line;\n        custom.stacking.mode = StackingMode.Normal;\n        custom.fillOpacity = 100;\n        break;\n      case 'stacked_bars':\n        custom.drawStyle = GraphDrawStyle.Bars;\n        custom.stacking.mode = StackingMode.Normal;\n        custom.fillOpacity = 100;\n        break;\n      default: {\n        // should never happen\n        // NOTE: casting to `never` will cause typescript\n        // to verify that the switch statement checks every possible\n        // enum-value\n        const invalidValue: never = style;\n        throw new Error(`Invalid graph-style: ${invalidValue}`);\n      }\n    }\n  });\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { RadioButtonGroup } from '@grafana/ui';\n\nimport { EXPLORE_GRAPH_STYLES, ExploreGraphStyle } from '../../types';\n\nconst ALL_GRAPH_STYLE_OPTIONS: Array<SelectableValue<ExploreGraphStyle>> = EXPLORE_GRAPH_STYLES.map((style) => ({\n  value: style,\n  // capital-case it and switch `_` to ` `\n  label: style[0].toUpperCase() + style.slice(1).replace(/_/, ' '),\n}));\n\nconst spacing = css({\n  display: 'flex',\n  justifyContent: 'space-between',\n});\n\ntype Props = {\n  graphStyle: ExploreGraphStyle;\n  onChangeGraphStyle: (style: ExploreGraphStyle) => void;\n};\n\nexport function ExploreGraphLabel(props: Props) {\n  const { graphStyle, onChangeGraphStyle } = props;\n  return (\n    <div className={spacing}>\n      Graph\n      <RadioButtonGroup size=\"sm\" options={ALL_GRAPH_STYLE_OPTIONS} value={graphStyle} onChange={onChangeGraphStyle} />\n    </div>\n  );\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nvar rowSizeBase = {\n    width: '100%',\n    height: '10px',\n    top: '0px',\n    left: '0px',\n    cursor: 'row-resize',\n};\nvar colSizeBase = {\n    width: '10px',\n    height: '100%',\n    top: '0px',\n    left: '0px',\n    cursor: 'col-resize',\n};\nvar edgeBase = {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n};\nvar styles = {\n    top: __assign(__assign({}, rowSizeBase), { top: '-5px' }),\n    right: __assign(__assign({}, colSizeBase), { left: undefined, right: '-5px' }),\n    bottom: __assign(__assign({}, rowSizeBase), { top: undefined, bottom: '-5px' }),\n    left: __assign(__assign({}, colSizeBase), { left: '-5px' }),\n    topRight: __assign(__assign({}, edgeBase), { right: '-10px', top: '-10px', cursor: 'ne-resize' }),\n    bottomRight: __assign(__assign({}, edgeBase), { right: '-10px', bottom: '-10px', cursor: 'se-resize' }),\n    bottomLeft: __assign(__assign({}, edgeBase), { left: '-10px', bottom: '-10px', cursor: 'sw-resize' }),\n    topLeft: __assign(__assign({}, edgeBase), { left: '-10px', top: '-10px', cursor: 'nw-resize' }),\n};\nvar Resizer = /** @class */ (function (_super) {\n    __extends(Resizer, _super);\n    function Resizer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMouseDown = function (e) {\n            _this.props.onResizeStart(e, _this.props.direction);\n        };\n        _this.onTouchStart = function (e) {\n            _this.props.onResizeStart(e, _this.props.direction);\n        };\n        return _this;\n    }\n    Resizer.prototype.render = function () {\n        return (React.createElement(\"div\", { className: this.props.className || '', style: __assign(__assign({ position: 'absolute', userSelect: 'none' }, styles[this.props.direction]), (this.props.replaceStyles || {})), onMouseDown: this.onMouseDown, onTouchStart: this.onTouchStart }, this.props.children));\n    };\n    return Resizer;\n}(React.PureComponent));\nexport { Resizer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { flushSync } from 'react-dom';\nimport { Resizer } from './resizer';\nvar DEFAULT_SIZE = {\n    width: 'auto',\n    height: 'auto',\n};\nvar clamp = function (n, min, max) { return Math.max(Math.min(n, max), min); };\nvar snap = function (n, size) { return Math.round(n / size) * size; };\nvar hasDirection = function (dir, target) {\n    return new RegExp(dir, 'i').test(target);\n};\n// INFO: In case of window is a Proxy and does not porxy Events correctly, use isTouchEvent & isMouseEvent to distinguish event type instead of `instanceof`.\nvar isTouchEvent = function (event) {\n    return Boolean(event.touches && event.touches.length);\n};\nvar isMouseEvent = function (event) {\n    return Boolean((event.clientX || event.clientX === 0) &&\n        (event.clientY || event.clientY === 0));\n};\nvar findClosestSnap = function (n, snapArray, snapGap) {\n    if (snapGap === void 0) { snapGap = 0; }\n    var closestGapIndex = snapArray.reduce(function (prev, curr, index) { return (Math.abs(curr - n) < Math.abs(snapArray[prev] - n) ? index : prev); }, 0);\n    var gap = Math.abs(snapArray[closestGapIndex] - n);\n    return snapGap === 0 || gap < snapGap ? snapArray[closestGapIndex] : n;\n};\nvar getStringSize = function (n) {\n    n = n.toString();\n    if (n === 'auto') {\n        return n;\n    }\n    if (n.endsWith('px')) {\n        return n;\n    }\n    if (n.endsWith('%')) {\n        return n;\n    }\n    if (n.endsWith('vh')) {\n        return n;\n    }\n    if (n.endsWith('vw')) {\n        return n;\n    }\n    if (n.endsWith('vmax')) {\n        return n;\n    }\n    if (n.endsWith('vmin')) {\n        return n;\n    }\n    return n + \"px\";\n};\nvar getPixelSize = function (size, parentSize, innerWidth, innerHeight) {\n    if (size && typeof size === 'string') {\n        if (size.endsWith('px')) {\n            return Number(size.replace('px', ''));\n        }\n        if (size.endsWith('%')) {\n            var ratio = Number(size.replace('%', '')) / 100;\n            return parentSize * ratio;\n        }\n        if (size.endsWith('vw')) {\n            var ratio = Number(size.replace('vw', '')) / 100;\n            return innerWidth * ratio;\n        }\n        if (size.endsWith('vh')) {\n            var ratio = Number(size.replace('vh', '')) / 100;\n            return innerHeight * ratio;\n        }\n    }\n    return size;\n};\nvar calculateNewMax = function (parentSize, innerWidth, innerHeight, maxWidth, maxHeight, minWidth, minHeight) {\n    maxWidth = getPixelSize(maxWidth, parentSize.width, innerWidth, innerHeight);\n    maxHeight = getPixelSize(maxHeight, parentSize.height, innerWidth, innerHeight);\n    minWidth = getPixelSize(minWidth, parentSize.width, innerWidth, innerHeight);\n    minHeight = getPixelSize(minHeight, parentSize.height, innerWidth, innerHeight);\n    return {\n        maxWidth: typeof maxWidth === 'undefined' ? undefined : Number(maxWidth),\n        maxHeight: typeof maxHeight === 'undefined' ? undefined : Number(maxHeight),\n        minWidth: typeof minWidth === 'undefined' ? undefined : Number(minWidth),\n        minHeight: typeof minHeight === 'undefined' ? undefined : Number(minHeight),\n    };\n};\nvar definedProps = [\n    'as',\n    'style',\n    'className',\n    'grid',\n    'snap',\n    'bounds',\n    'boundsByDirection',\n    'size',\n    'defaultSize',\n    'minWidth',\n    'minHeight',\n    'maxWidth',\n    'maxHeight',\n    'lockAspectRatio',\n    'lockAspectRatioExtraWidth',\n    'lockAspectRatioExtraHeight',\n    'enable',\n    'handleStyles',\n    'handleClasses',\n    'handleWrapperStyle',\n    'handleWrapperClass',\n    'children',\n    'onResizeStart',\n    'onResize',\n    'onResizeStop',\n    'handleComponent',\n    'scale',\n    'resizeRatio',\n    'snapGap',\n];\n// HACK: This class is used to calculate % size.\nvar baseClassName = '__resizable_base__';\nvar Resizable = /** @class */ (function (_super) {\n    __extends(Resizable, _super);\n    function Resizable(props) {\n        var _this = _super.call(this, props) || this;\n        _this.ratio = 1;\n        _this.resizable = null;\n        // For parent boundary\n        _this.parentLeft = 0;\n        _this.parentTop = 0;\n        // For boundary\n        _this.resizableLeft = 0;\n        _this.resizableRight = 0;\n        _this.resizableTop = 0;\n        _this.resizableBottom = 0;\n        // For target boundary\n        _this.targetLeft = 0;\n        _this.targetTop = 0;\n        _this.appendBase = function () {\n            if (!_this.resizable || !_this.window) {\n                return null;\n            }\n            var parent = _this.parentNode;\n            if (!parent) {\n                return null;\n            }\n            var element = _this.window.document.createElement('div');\n            element.style.width = '100%';\n            element.style.height = '100%';\n            element.style.position = 'absolute';\n            element.style.transform = 'scale(0, 0)';\n            element.style.left = '0';\n            element.style.flex = '0 0 100%';\n            if (element.classList) {\n                element.classList.add(baseClassName);\n            }\n            else {\n                element.className += baseClassName;\n            }\n            parent.appendChild(element);\n            return element;\n        };\n        _this.removeBase = function (base) {\n            var parent = _this.parentNode;\n            if (!parent) {\n                return;\n            }\n            parent.removeChild(base);\n        };\n        _this.ref = function (c) {\n            if (c) {\n                _this.resizable = c;\n            }\n        };\n        _this.state = {\n            isResizing: false,\n            width: typeof (_this.propsSize && _this.propsSize.width) === 'undefined'\n                ? 'auto'\n                : _this.propsSize && _this.propsSize.width,\n            height: typeof (_this.propsSize && _this.propsSize.height) === 'undefined'\n                ? 'auto'\n                : _this.propsSize && _this.propsSize.height,\n            direction: 'right',\n            original: {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            },\n            backgroundStyle: {\n                height: '100%',\n                width: '100%',\n                backgroundColor: 'rgba(0,0,0,0)',\n                cursor: 'auto',\n                opacity: 0,\n                position: 'fixed',\n                zIndex: 9999,\n                top: '0',\n                left: '0',\n                bottom: '0',\n                right: '0',\n            },\n            flexBasis: undefined,\n        };\n        _this.onResizeStart = _this.onResizeStart.bind(_this);\n        _this.onMouseMove = _this.onMouseMove.bind(_this);\n        _this.onMouseUp = _this.onMouseUp.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(Resizable.prototype, \"parentNode\", {\n        get: function () {\n            if (!this.resizable) {\n                return null;\n            }\n            return this.resizable.parentNode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"window\", {\n        get: function () {\n            if (!this.resizable) {\n                return null;\n            }\n            if (!this.resizable.ownerDocument) {\n                return null;\n            }\n            return this.resizable.ownerDocument.defaultView;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"propsSize\", {\n        get: function () {\n            return this.props.size || this.props.defaultSize || DEFAULT_SIZE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"size\", {\n        get: function () {\n            var width = 0;\n            var height = 0;\n            if (this.resizable && this.window) {\n                var orgWidth = this.resizable.offsetWidth;\n                var orgHeight = this.resizable.offsetHeight;\n                // HACK: Set position `relative` to get parent size.\n                //       This is because when re-resizable set `absolute`, I can not get base width correctly.\n                var orgPosition = this.resizable.style.position;\n                if (orgPosition !== 'relative') {\n                    this.resizable.style.position = 'relative';\n                }\n                // INFO: Use original width or height if set auto.\n                width = this.resizable.style.width !== 'auto' ? this.resizable.offsetWidth : orgWidth;\n                height = this.resizable.style.height !== 'auto' ? this.resizable.offsetHeight : orgHeight;\n                // Restore original position\n                this.resizable.style.position = orgPosition;\n            }\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"sizeStyle\", {\n        get: function () {\n            var _this = this;\n            var size = this.props.size;\n            var getSize = function (key) {\n                if (typeof _this.state[key] === 'undefined' || _this.state[key] === 'auto') {\n                    return 'auto';\n                }\n                if (_this.propsSize && _this.propsSize[key] && _this.propsSize[key].toString().endsWith('%')) {\n                    if (_this.state[key].toString().endsWith('%')) {\n                        return _this.state[key].toString();\n                    }\n                    var parentSize = _this.getParentSize();\n                    var value = Number(_this.state[key].toString().replace('px', ''));\n                    var percent = (value / parentSize[key]) * 100;\n                    return percent + \"%\";\n                }\n                return getStringSize(_this.state[key]);\n            };\n            var width = size && typeof size.width !== 'undefined' && !this.state.isResizing\n                ? getStringSize(size.width)\n                : getSize('width');\n            var height = size && typeof size.height !== 'undefined' && !this.state.isResizing\n                ? getStringSize(size.height)\n                : getSize('height');\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Resizable.prototype.getParentSize = function () {\n        if (!this.parentNode) {\n            if (!this.window) {\n                return { width: 0, height: 0 };\n            }\n            return { width: this.window.innerWidth, height: this.window.innerHeight };\n        }\n        var base = this.appendBase();\n        if (!base) {\n            return { width: 0, height: 0 };\n        }\n        // INFO: To calculate parent width with flex layout\n        var wrapChanged = false;\n        var wrap = this.parentNode.style.flexWrap;\n        if (wrap !== 'wrap') {\n            wrapChanged = true;\n            this.parentNode.style.flexWrap = 'wrap';\n            // HACK: Use relative to get parent padding size\n        }\n        base.style.position = 'relative';\n        base.style.minWidth = '100%';\n        base.style.minHeight = '100%';\n        var size = {\n            width: base.offsetWidth,\n            height: base.offsetHeight,\n        };\n        if (wrapChanged) {\n            this.parentNode.style.flexWrap = wrap;\n        }\n        this.removeBase(base);\n        return size;\n    };\n    Resizable.prototype.bindEvents = function () {\n        if (this.window) {\n            this.window.addEventListener('mouseup', this.onMouseUp);\n            this.window.addEventListener('mousemove', this.onMouseMove);\n            this.window.addEventListener('mouseleave', this.onMouseUp);\n            this.window.addEventListener('touchmove', this.onMouseMove, {\n                capture: true,\n                passive: false,\n            });\n            this.window.addEventListener('touchend', this.onMouseUp);\n        }\n    };\n    Resizable.prototype.unbindEvents = function () {\n        if (this.window) {\n            this.window.removeEventListener('mouseup', this.onMouseUp);\n            this.window.removeEventListener('mousemove', this.onMouseMove);\n            this.window.removeEventListener('mouseleave', this.onMouseUp);\n            this.window.removeEventListener('touchmove', this.onMouseMove, true);\n            this.window.removeEventListener('touchend', this.onMouseUp);\n        }\n    };\n    Resizable.prototype.componentDidMount = function () {\n        if (!this.resizable || !this.window) {\n            return;\n        }\n        var computedStyle = this.window.getComputedStyle(this.resizable);\n        this.setState({\n            width: this.state.width || this.size.width,\n            height: this.state.height || this.size.height,\n            flexBasis: computedStyle.flexBasis !== 'auto' ? computedStyle.flexBasis : undefined,\n        });\n    };\n    Resizable.prototype.componentWillUnmount = function () {\n        if (this.window) {\n            this.unbindEvents();\n        }\n    };\n    Resizable.prototype.createSizeForCssProperty = function (newSize, kind) {\n        var propsSize = this.propsSize && this.propsSize[kind];\n        return this.state[kind] === 'auto' &&\n            this.state.original[kind] === newSize &&\n            (typeof propsSize === 'undefined' || propsSize === 'auto')\n            ? 'auto'\n            : newSize;\n    };\n    Resizable.prototype.calculateNewMaxFromBoundary = function (maxWidth, maxHeight) {\n        var boundsByDirection = this.props.boundsByDirection;\n        var direction = this.state.direction;\n        var widthByDirection = boundsByDirection && hasDirection('left', direction);\n        var heightByDirection = boundsByDirection && hasDirection('top', direction);\n        var boundWidth;\n        var boundHeight;\n        if (this.props.bounds === 'parent') {\n            var parent_1 = this.parentNode;\n            if (parent_1) {\n                boundWidth = widthByDirection\n                    ? this.resizableRight - this.parentLeft\n                    : parent_1.offsetWidth + (this.parentLeft - this.resizableLeft);\n                boundHeight = heightByDirection\n                    ? this.resizableBottom - this.parentTop\n                    : parent_1.offsetHeight + (this.parentTop - this.resizableTop);\n            }\n        }\n        else if (this.props.bounds === 'window') {\n            if (this.window) {\n                boundWidth = widthByDirection ? this.resizableRight : this.window.innerWidth - this.resizableLeft;\n                boundHeight = heightByDirection ? this.resizableBottom : this.window.innerHeight - this.resizableTop;\n            }\n        }\n        else if (this.props.bounds) {\n            boundWidth = widthByDirection\n                ? this.resizableRight - this.targetLeft\n                : this.props.bounds.offsetWidth + (this.targetLeft - this.resizableLeft);\n            boundHeight = heightByDirection\n                ? this.resizableBottom - this.targetTop\n                : this.props.bounds.offsetHeight + (this.targetTop - this.resizableTop);\n        }\n        if (boundWidth && Number.isFinite(boundWidth)) {\n            maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n        }\n        if (boundHeight && Number.isFinite(boundHeight)) {\n            maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n        }\n        return { maxWidth: maxWidth, maxHeight: maxHeight };\n    };\n    Resizable.prototype.calculateNewSizeFromDirection = function (clientX, clientY) {\n        var scale = this.props.scale || 1;\n        var resizeRatio = this.props.resizeRatio || 1;\n        var _a = this.state, direction = _a.direction, original = _a.original;\n        var _b = this.props, lockAspectRatio = _b.lockAspectRatio, lockAspectRatioExtraHeight = _b.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _b.lockAspectRatioExtraWidth;\n        var newWidth = original.width;\n        var newHeight = original.height;\n        var extraHeight = lockAspectRatioExtraHeight || 0;\n        var extraWidth = lockAspectRatioExtraWidth || 0;\n        if (hasDirection('right', direction)) {\n            newWidth = original.width + ((clientX - original.x) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\n            }\n        }\n        if (hasDirection('left', direction)) {\n            newWidth = original.width - ((clientX - original.x) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\n            }\n        }\n        if (hasDirection('bottom', direction)) {\n            newHeight = original.height + ((clientY - original.y) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\n            }\n        }\n        if (hasDirection('top', direction)) {\n            newHeight = original.height - ((clientY - original.y) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\n            }\n        }\n        return { newWidth: newWidth, newHeight: newHeight };\n    };\n    Resizable.prototype.calculateNewSizeFromAspectRatio = function (newWidth, newHeight, max, min) {\n        var _a = this.props, lockAspectRatio = _a.lockAspectRatio, lockAspectRatioExtraHeight = _a.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _a.lockAspectRatioExtraWidth;\n        var computedMinWidth = typeof min.width === 'undefined' ? 10 : min.width;\n        var computedMaxWidth = typeof max.width === 'undefined' || max.width < 0 ? newWidth : max.width;\n        var computedMinHeight = typeof min.height === 'undefined' ? 10 : min.height;\n        var computedMaxHeight = typeof max.height === 'undefined' || max.height < 0 ? newHeight : max.height;\n        var extraHeight = lockAspectRatioExtraHeight || 0;\n        var extraWidth = lockAspectRatioExtraWidth || 0;\n        if (lockAspectRatio) {\n            var extraMinWidth = (computedMinHeight - extraHeight) * this.ratio + extraWidth;\n            var extraMaxWidth = (computedMaxHeight - extraHeight) * this.ratio + extraWidth;\n            var extraMinHeight = (computedMinWidth - extraWidth) / this.ratio + extraHeight;\n            var extraMaxHeight = (computedMaxWidth - extraWidth) / this.ratio + extraHeight;\n            var lockedMinWidth = Math.max(computedMinWidth, extraMinWidth);\n            var lockedMaxWidth = Math.min(computedMaxWidth, extraMaxWidth);\n            var lockedMinHeight = Math.max(computedMinHeight, extraMinHeight);\n            var lockedMaxHeight = Math.min(computedMaxHeight, extraMaxHeight);\n            newWidth = clamp(newWidth, lockedMinWidth, lockedMaxWidth);\n            newHeight = clamp(newHeight, lockedMinHeight, lockedMaxHeight);\n        }\n        else {\n            newWidth = clamp(newWidth, computedMinWidth, computedMaxWidth);\n            newHeight = clamp(newHeight, computedMinHeight, computedMaxHeight);\n        }\n        return { newWidth: newWidth, newHeight: newHeight };\n    };\n    Resizable.prototype.setBoundingClientRect = function () {\n        // For parent boundary\n        if (this.props.bounds === 'parent') {\n            var parent_2 = this.parentNode;\n            if (parent_2) {\n                var parentRect = parent_2.getBoundingClientRect();\n                this.parentLeft = parentRect.left;\n                this.parentTop = parentRect.top;\n            }\n        }\n        // For target(html element) boundary\n        if (this.props.bounds && typeof this.props.bounds !== 'string') {\n            var targetRect = this.props.bounds.getBoundingClientRect();\n            this.targetLeft = targetRect.left;\n            this.targetTop = targetRect.top;\n        }\n        // For boundary\n        if (this.resizable) {\n            var _a = this.resizable.getBoundingClientRect(), left = _a.left, top_1 = _a.top, right = _a.right, bottom = _a.bottom;\n            this.resizableLeft = left;\n            this.resizableRight = right;\n            this.resizableTop = top_1;\n            this.resizableBottom = bottom;\n        }\n    };\n    Resizable.prototype.onResizeStart = function (event, direction) {\n        if (!this.resizable || !this.window) {\n            return;\n        }\n        var clientX = 0;\n        var clientY = 0;\n        if (event.nativeEvent && isMouseEvent(event.nativeEvent)) {\n            clientX = event.nativeEvent.clientX;\n            clientY = event.nativeEvent.clientY;\n        }\n        else if (event.nativeEvent && isTouchEvent(event.nativeEvent)) {\n            clientX = event.nativeEvent.touches[0].clientX;\n            clientY = event.nativeEvent.touches[0].clientY;\n        }\n        if (this.props.onResizeStart) {\n            if (this.resizable) {\n                var startResize = this.props.onResizeStart(event, direction, this.resizable);\n                if (startResize === false) {\n                    return;\n                }\n            }\n        }\n        // Fix #168\n        if (this.props.size) {\n            if (typeof this.props.size.height !== 'undefined' && this.props.size.height !== this.state.height) {\n                this.setState({ height: this.props.size.height });\n            }\n            if (typeof this.props.size.width !== 'undefined' && this.props.size.width !== this.state.width) {\n                this.setState({ width: this.props.size.width });\n            }\n        }\n        // For lockAspectRatio case\n        this.ratio =\n            typeof this.props.lockAspectRatio === 'number' ? this.props.lockAspectRatio : this.size.width / this.size.height;\n        var flexBasis;\n        var computedStyle = this.window.getComputedStyle(this.resizable);\n        if (computedStyle.flexBasis !== 'auto') {\n            var parent_3 = this.parentNode;\n            if (parent_3) {\n                var dir = this.window.getComputedStyle(parent_3).flexDirection;\n                this.flexDir = dir.startsWith('row') ? 'row' : 'column';\n                flexBasis = computedStyle.flexBasis;\n            }\n        }\n        // For boundary\n        this.setBoundingClientRect();\n        this.bindEvents();\n        var state = {\n            original: {\n                x: clientX,\n                y: clientY,\n                width: this.size.width,\n                height: this.size.height,\n            },\n            isResizing: true,\n            backgroundStyle: __assign(__assign({}, this.state.backgroundStyle), { cursor: this.window.getComputedStyle(event.target).cursor || 'auto' }),\n            direction: direction,\n            flexBasis: flexBasis,\n        };\n        this.setState(state);\n    };\n    Resizable.prototype.onMouseMove = function (event) {\n        var _this = this;\n        if (!this.state.isResizing || !this.resizable || !this.window) {\n            return;\n        }\n        if (this.window.TouchEvent && isTouchEvent(event)) {\n            try {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            catch (e) {\n                // Ignore on fail\n            }\n        }\n        var _a = this.props, maxWidth = _a.maxWidth, maxHeight = _a.maxHeight, minWidth = _a.minWidth, minHeight = _a.minHeight;\n        var clientX = isTouchEvent(event) ? event.touches[0].clientX : event.clientX;\n        var clientY = isTouchEvent(event) ? event.touches[0].clientY : event.clientY;\n        var _b = this.state, direction = _b.direction, original = _b.original, width = _b.width, height = _b.height;\n        var parentSize = this.getParentSize();\n        var max = calculateNewMax(parentSize, this.window.innerWidth, this.window.innerHeight, maxWidth, maxHeight, minWidth, minHeight);\n        maxWidth = max.maxWidth;\n        maxHeight = max.maxHeight;\n        minWidth = max.minWidth;\n        minHeight = max.minHeight;\n        // Calculate new size\n        var _c = this.calculateNewSizeFromDirection(clientX, clientY), newHeight = _c.newHeight, newWidth = _c.newWidth;\n        // Calculate max size from boundary settings\n        var boundaryMax = this.calculateNewMaxFromBoundary(maxWidth, maxHeight);\n        if (this.props.snap && this.props.snap.x) {\n            newWidth = findClosestSnap(newWidth, this.props.snap.x, this.props.snapGap);\n        }\n        if (this.props.snap && this.props.snap.y) {\n            newHeight = findClosestSnap(newHeight, this.props.snap.y, this.props.snapGap);\n        }\n        // Calculate new size from aspect ratio\n        var newSize = this.calculateNewSizeFromAspectRatio(newWidth, newHeight, { width: boundaryMax.maxWidth, height: boundaryMax.maxHeight }, { width: minWidth, height: minHeight });\n        newWidth = newSize.newWidth;\n        newHeight = newSize.newHeight;\n        if (this.props.grid) {\n            var newGridWidth = snap(newWidth, this.props.grid[0]);\n            var newGridHeight = snap(newHeight, this.props.grid[1]);\n            var gap = this.props.snapGap || 0;\n            newWidth = gap === 0 || Math.abs(newGridWidth - newWidth) <= gap ? newGridWidth : newWidth;\n            newHeight = gap === 0 || Math.abs(newGridHeight - newHeight) <= gap ? newGridHeight : newHeight;\n        }\n        var delta = {\n            width: newWidth - original.width,\n            height: newHeight - original.height,\n        };\n        if (width && typeof width === 'string') {\n            if (width.endsWith('%')) {\n                var percent = (newWidth / parentSize.width) * 100;\n                newWidth = percent + \"%\";\n            }\n            else if (width.endsWith('vw')) {\n                var vw = (newWidth / this.window.innerWidth) * 100;\n                newWidth = vw + \"vw\";\n            }\n            else if (width.endsWith('vh')) {\n                var vh = (newWidth / this.window.innerHeight) * 100;\n                newWidth = vh + \"vh\";\n            }\n        }\n        if (height && typeof height === 'string') {\n            if (height.endsWith('%')) {\n                var percent = (newHeight / parentSize.height) * 100;\n                newHeight = percent + \"%\";\n            }\n            else if (height.endsWith('vw')) {\n                var vw = (newHeight / this.window.innerWidth) * 100;\n                newHeight = vw + \"vw\";\n            }\n            else if (height.endsWith('vh')) {\n                var vh = (newHeight / this.window.innerHeight) * 100;\n                newHeight = vh + \"vh\";\n            }\n        }\n        var newState = {\n            width: this.createSizeForCssProperty(newWidth, 'width'),\n            height: this.createSizeForCssProperty(newHeight, 'height'),\n        };\n        if (this.flexDir === 'row') {\n            newState.flexBasis = newState.width;\n        }\n        else if (this.flexDir === 'column') {\n            newState.flexBasis = newState.height;\n        }\n        // For v18, update state sync\n        flushSync(function () {\n            _this.setState(newState);\n        });\n        if (this.props.onResize) {\n            this.props.onResize(event, direction, this.resizable, delta);\n        }\n    };\n    Resizable.prototype.onMouseUp = function (event) {\n        var _a = this.state, isResizing = _a.isResizing, direction = _a.direction, original = _a.original;\n        if (!isResizing || !this.resizable) {\n            return;\n        }\n        var delta = {\n            width: this.size.width - original.width,\n            height: this.size.height - original.height,\n        };\n        if (this.props.onResizeStop) {\n            this.props.onResizeStop(event, direction, this.resizable, delta);\n        }\n        if (this.props.size) {\n            this.setState(this.props.size);\n        }\n        this.unbindEvents();\n        this.setState({\n            isResizing: false,\n            backgroundStyle: __assign(__assign({}, this.state.backgroundStyle), { cursor: 'auto' }),\n        });\n    };\n    Resizable.prototype.updateSize = function (size) {\n        this.setState({ width: size.width, height: size.height });\n    };\n    Resizable.prototype.renderResizer = function () {\n        var _this = this;\n        var _a = this.props, enable = _a.enable, handleStyles = _a.handleStyles, handleClasses = _a.handleClasses, handleWrapperStyle = _a.handleWrapperStyle, handleWrapperClass = _a.handleWrapperClass, handleComponent = _a.handleComponent;\n        if (!enable) {\n            return null;\n        }\n        var resizers = Object.keys(enable).map(function (dir) {\n            if (enable[dir] !== false) {\n                return (React.createElement(Resizer, { key: dir, direction: dir, onResizeStart: _this.onResizeStart, replaceStyles: handleStyles && handleStyles[dir], className: handleClasses && handleClasses[dir] }, handleComponent && handleComponent[dir] ? handleComponent[dir] : null));\n            }\n            return null;\n        });\n        // #93 Wrap the resize box in span (will not break 100% width/height)\n        return (React.createElement(\"div\", { className: handleWrapperClass, style: handleWrapperStyle }, resizers));\n    };\n    Resizable.prototype.render = function () {\n        var _this = this;\n        var extendsProps = Object.keys(this.props).reduce(function (acc, key) {\n            if (definedProps.indexOf(key) !== -1) {\n                return acc;\n            }\n            acc[key] = _this.props[key];\n            return acc;\n        }, {});\n        var style = __assign(__assign(__assign({ position: 'relative', userSelect: this.state.isResizing ? 'none' : 'auto' }, this.props.style), this.sizeStyle), { maxWidth: this.props.maxWidth, maxHeight: this.props.maxHeight, minWidth: this.props.minWidth, minHeight: this.props.minHeight, boxSizing: 'border-box', flexShrink: 0 });\n        if (this.state.flexBasis) {\n            style.flexBasis = this.state.flexBasis;\n        }\n        var Wrapper = this.props.as || 'div';\n        return (React.createElement(Wrapper, __assign({ ref: this.ref, style: style, className: this.props.className }, extendsProps),\n            this.state.isResizing && React.createElement(\"div\", { style: this.state.backgroundStyle }),\n            this.props.children,\n            this.renderResizer()));\n    };\n    Resizable.defaultProps = {\n        as: 'div',\n        onResizeStart: function () { },\n        onResize: function () { },\n        onResizeStop: function () { },\n        enable: {\n            top: true,\n            right: true,\n            bottom: true,\n            left: true,\n            topRight: true,\n            bottomRight: true,\n            bottomLeft: true,\n            topLeft: true,\n        },\n        style: {},\n        grid: [1, 1],\n        lockAspectRatio: false,\n        lockAspectRatioExtraWidth: 0,\n        lockAspectRatioExtraHeight: 0,\n        scale: 1,\n        resizeRatio: 1,\n        snapGap: 0,\n    };\n    return Resizable;\n}(React.PureComponent));\nexport { Resizable };\n","// Libraries\nimport { css, cx, keyframes } from '@emotion/css';\nimport { Resizable, ResizeCallback } from 're-resizable';\nimport React from 'react';\n\n// Services & Utils\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2 } from '@grafana/ui';\n\n// Types\n\nconst drawerSlide = (theme: GrafanaTheme2) => keyframes`\n  0% {\n    transform: translateY(${theme.components.horizontalDrawer.defaultHeight}px);\n  }\n\n  100% {\n    transform: translateY(0px);\n  }\n`;\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      position: fixed !important;\n      bottom: 0;\n      background: ${theme.colors.background.primary};\n      border-top: 1px solid ${theme.colors.border.weak};\n      margin: ${theme.spacing(0, -2, 0, -2)};\n      box-shadow: ${theme.shadows.z3};\n      z-index: ${theme.zIndex.navbarFixed};\n    `,\n    drawerActive: css`\n      opacity: 1;\n      animation: 0.5s ease-out ${drawerSlide(theme)};\n    `,\n    rzHandle: css`\n      background: ${theme.colors.secondary.main};\n      transition: 0.3s background ease-in-out;\n      position: relative;\n      width: 200px !important;\n      height: 7px !important;\n      left: calc(50% - 100px) !important;\n      top: -4px !important;\n      cursor: grab;\n      border-radius: 4px;\n      &:hover {\n        background: ${theme.colors.secondary.shade};\n      }\n    `,\n  };\n});\n\nexport interface Props {\n  width: number;\n  children: React.ReactNode;\n  onResize?: ResizeCallback;\n}\n\nexport function ExploreDrawer(props: Props) {\n  const { width, children, onResize } = props;\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const drawerWidth = `${width + 31.5}px`;\n\n  return (\n    <Resizable\n      className={cx(styles.container, styles.drawerActive)}\n      defaultSize={{ width: drawerWidth, height: `${theme.components.horizontalDrawer.defaultHeight}px` }}\n      handleClasses={{ top: styles.rzHandle }}\n      enable={{\n        top: true,\n        right: false,\n        bottom: false,\n        left: false,\n        topRight: false,\n        bottomRight: false,\n        bottomLeft: false,\n        topLeft: false,\n      }}\n      maxHeight=\"100vh\"\n      maxWidth={drawerWidth}\n      minWidth={drawerWidth}\n      onResize={onResize}\n    >\n      {children}\n    </Resizable>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { CoreApp, TimeZone } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime/src';\nimport { TabbedContainer, TabConfig } from '@grafana/ui';\nimport { ExploreDrawer } from 'app/features/explore/ExploreDrawer';\nimport { InspectDataTab } from 'app/features/inspector/InspectDataTab';\nimport { InspectErrorTab } from 'app/features/inspector/InspectErrorTab';\nimport { InspectJSONTab } from 'app/features/inspector/InspectJSONTab';\nimport { InspectStatsTab } from 'app/features/inspector/InspectStatsTab';\nimport { QueryInspector } from 'app/features/inspector/QueryInspector';\nimport { StoreState, ExploreItemState, ExploreId } from 'app/types';\n\nimport { runQueries } from './state/query';\n\ninterface DispatchProps {\n  width: number;\n  exploreId: ExploreId;\n  timeZone: TimeZone;\n  onClose: () => void;\n}\n\ntype Props = DispatchProps & ConnectedProps<typeof connector>;\n\nexport function ExploreQueryInspector(props: Props) {\n  const { loading, width, onClose, queryResponse, timeZone } = props;\n  const dataFrames = queryResponse?.series || [];\n  const error = queryResponse?.error;\n\n  useEffect(() => {\n    reportInteraction('grafana_explore_query_inspector_opened');\n  }, []);\n\n  const statsTab: TabConfig = {\n    label: 'Stats',\n    value: 'stats',\n    icon: 'chart-line',\n    content: <InspectStatsTab data={queryResponse!} timeZone={queryResponse?.request?.timezone as TimeZone} />,\n  };\n\n  const jsonTab: TabConfig = {\n    label: 'JSON',\n    value: 'json',\n    icon: 'brackets-curly',\n    content: <InspectJSONTab data={queryResponse} onClose={onClose} />,\n  };\n\n  const dataTab: TabConfig = {\n    label: 'Data',\n    value: 'data',\n    icon: 'database',\n    content: (\n      <InspectDataTab\n        data={dataFrames}\n        isLoading={loading}\n        options={{ withTransforms: false, withFieldConfig: false }}\n        timeZone={timeZone}\n        app={CoreApp.Explore}\n      />\n    ),\n  };\n\n  const queryTab: TabConfig = {\n    label: 'Query',\n    value: 'query',\n    icon: 'info-circle',\n    content: <QueryInspector data={dataFrames} onRefreshQuery={() => props.runQueries(props.exploreId)} />,\n  };\n\n  const tabs = [statsTab, queryTab, jsonTab, dataTab];\n  if (error) {\n    const errorTab: TabConfig = {\n      label: 'Error',\n      value: 'error',\n      icon: 'exclamation-triangle',\n      content: <InspectErrorTab error={error} />,\n    };\n    tabs.push(errorTab);\n  }\n  return (\n    <ExploreDrawer width={width}>\n      <TabbedContainer tabs={tabs} onClose={onClose} closeIconTooltip=\"Close query inspector\" />\n    </ExploreDrawer>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  const item: ExploreItemState = explore[exploreId]!;\n  const { loading, queryResponse } = item;\n\n  return {\n    loading,\n    queryResponse,\n  };\n}\n\nconst mapDispatchToProps = {\n  runQueries,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport default connector(ExploreQueryInspector);\n","import React from 'react';\n\nimport { Tooltip, ToolbarButton } from '@grafana/ui';\n\ninterface TimeSyncButtonProps {\n  isSynced: boolean;\n  onClick: () => void;\n}\n\nexport function TimeSyncButton(props: TimeSyncButtonProps) {\n  const { onClick, isSynced } = props;\n\n  const syncTimesTooltip = () => {\n    const { isSynced } = props;\n    const tooltip = isSynced ? 'Unsync all views' : 'Sync all views to this time range';\n    return <>{tooltip}</>;\n  };\n\n  return (\n    <Tooltip content={syncTimesTooltip} placement=\"bottom\">\n      <ToolbarButton\n        icon=\"link\"\n        variant={isSynced ? 'active' : 'default'}\n        aria-label={isSynced ? 'Synced times' : 'Unsynced times'}\n        onClick={onClick}\n      />\n    </Tooltip>\n  );\n}\n","import React, { Component } from 'react';\n\nimport { TimeRange, TimeZone, RawTimeRange, dateTimeForTimeZone, dateMath } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { TimePickerWithHistory } from 'app/core/components/TimePicker/TimePickerWithHistory';\nimport { getShiftedTimeRange, getZoomedTimeRange } from 'app/core/utils/timePicker';\nimport { ExploreId } from 'app/types';\n\nimport { TimeSyncButton } from './TimeSyncButton';\n\nexport interface Props {\n  exploreId: ExploreId;\n  hideText?: boolean;\n  range: TimeRange;\n  timeZone: TimeZone;\n  fiscalYearStartMonth: number;\n  splitted: boolean;\n  syncedTimes: boolean;\n  onChangeTimeSync: () => void;\n  onChangeTime: (range: RawTimeRange) => void;\n  onChangeTimeZone: (timeZone: TimeZone) => void;\n  onChangeFiscalYearStartMonth: (fiscalYearStartMonth: number) => void;\n}\n\nexport class ExploreTimeControls extends Component<Props> {\n  onMoveTimePicker = (direction: number) => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getShiftedTimeRange(direction, range);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  onMoveForward = () => this.onMoveTimePicker(1);\n  onMoveBack = () => this.onMoveTimePicker(-1);\n\n  onChangeTimePicker = (timeRange: TimeRange) => {\n    const adjustedFrom = dateMath.isMathString(timeRange.raw.from) ? timeRange.raw.from : timeRange.from;\n    const adjustedTo = dateMath.isMathString(timeRange.raw.to) ? timeRange.raw.to : timeRange.to;\n\n    this.props.onChangeTime({\n      from: adjustedFrom,\n      to: adjustedTo,\n    });\n\n    reportInteraction('grafana_explore_time_picker_time_range_changed', {\n      timeRangeFrom: adjustedFrom,\n      timeRangeTo: adjustedTo,\n    });\n  };\n\n  onZoom = () => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getZoomedTimeRange(range, 2);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  render() {\n    const {\n      range,\n      timeZone,\n      fiscalYearStartMonth,\n      splitted,\n      syncedTimes,\n      onChangeTimeSync,\n      hideText,\n      onChangeTimeZone,\n      onChangeFiscalYearStartMonth,\n    } = this.props;\n    const timeSyncButton = splitted ? <TimeSyncButton onClick={onChangeTimeSync} isSynced={syncedTimes} /> : undefined;\n    const timePickerCommonProps = {\n      value: range,\n      timeZone,\n      fiscalYearStartMonth,\n      onMoveBackward: this.onMoveBack,\n      onMoveForward: this.onMoveForward,\n      onZoom: this.onZoom,\n      hideText,\n    };\n\n    return (\n      <TimePickerWithHistory\n        {...timePickerCommonProps}\n        timeSyncButton={timeSyncButton}\n        isSynced={syncedTimes}\n        widthOverride={splitted ? window.innerWidth / 2 : undefined}\n        onChange={this.onChangeTimePicker}\n        onChangeTimeZone={onChangeTimeZone}\n        onChangeFiscalYearStartMonth={onChangeFiscalYearStartMonth}\n      />\n    );\n  }\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport { Tooltip, ButtonGroup, ToolbarButton } from '@grafana/ui';\n\ntype LiveTailButtonProps = {\n  splitted: boolean;\n  start: () => void;\n  stop: () => void;\n  pause: () => void;\n  resume: () => void;\n  isLive: boolean;\n  isPaused: boolean;\n};\n\nexport function LiveTailButton(props: LiveTailButtonProps) {\n  const { start, pause, resume, isLive, isPaused, stop, splitted } = props;\n  const buttonVariant = isLive && !isPaused ? 'active' : 'default';\n  const onClickMain = isLive ? (isPaused ? resume : pause) : start;\n\n  return (\n    <ButtonGroup>\n      <Tooltip\n        content={isLive && !isPaused ? <>Pause the live stream</> : <>Start live stream your logs</>}\n        placement=\"bottom\"\n      >\n        <ToolbarButton\n          iconOnly={splitted}\n          variant={buttonVariant}\n          icon={!isLive || isPaused ? 'play' : 'pause'}\n          onClick={onClickMain}\n        >\n          {isLive && isPaused ? 'Paused' : 'Live'}\n        </ToolbarButton>\n      </Tooltip>\n\n      <CSSTransition\n        mountOnEnter={true}\n        unmountOnExit={true}\n        timeout={100}\n        in={isLive}\n        classNames={{\n          enter: styles.stopButtonEnter,\n          enterActive: styles.stopButtonEnterActive,\n          exit: styles.stopButtonExit,\n          exitActive: styles.stopButtonExitActive,\n        }}\n      >\n        <Tooltip content={<>Stop and exit the live stream</>} placement=\"bottom\">\n          <ToolbarButton variant={buttonVariant} onClick={stop} icon=\"square-shape\" />\n        </Tooltip>\n      </CSSTransition>\n    </ButtonGroup>\n  );\n}\n\nconst styles = {\n  stopButtonEnter: css`\n    label: stopButtonEnter;\n    width: 0;\n    opacity: 0;\n    overflow: hidden;\n  `,\n  stopButtonEnterActive: css`\n    label: stopButtonEnterActive;\n    opacity: 1;\n    width: 32px;\n  `,\n  stopButtonExit: css`\n    label: stopButtonExit;\n    width: 32px;\n    opacity: 1;\n    overflow: hidden;\n  `,\n  stopButtonExitActive: css`\n    label: stopButtonExitActive;\n    opacity: 0;\n    width: 0;\n  `,\n};\n","import React, { useCallback } from 'react';\n\nimport { RefreshPicker } from '@grafana/ui';\nimport { useDispatch } from 'app/types';\n\nimport { ExploreId } from '../../types';\n\nimport { setPausedStateAction, runQueries } from './state/query';\nimport { changeRefreshInterval } from './state/time';\n\n/**\n * Hook that gives you all the functions needed to control the live tailing.\n */\nexport function useLiveTailControls(exploreId: ExploreId) {\n  const dispatch = useDispatch();\n\n  const pause = useCallback(() => {\n    dispatch(setPausedStateAction({ exploreId, isPaused: true }));\n  }, [exploreId, dispatch]);\n\n  const resume = useCallback(() => {\n    dispatch(setPausedStateAction({ exploreId, isPaused: false }));\n  }, [exploreId, dispatch]);\n\n  const stop = useCallback(() => {\n    // We need to pause here first because there is transition where we are not live but live logs are still shown\n    // to cross fade with the normal view. This will prevent reordering of the logs in the live view during the\n    // transition.\n    pause();\n\n    // TODO referencing this from perspective of refresh picker when there is designated button for it now is not\n    //  great. Needs a bit of refactoring.\n    dispatch(changeRefreshInterval(exploreId, RefreshPicker.offOption.value));\n    dispatch(runQueries(exploreId));\n  }, [exploreId, dispatch, pause]);\n\n  const start = useCallback(() => {\n    dispatch(changeRefreshInterval(exploreId, RefreshPicker.liveOption.value));\n  }, [exploreId, dispatch]);\n\n  return {\n    pause,\n    resume,\n    stop,\n    start,\n  };\n}\n\ntype Props = {\n  exploreId: ExploreId;\n  children: (controls: ReturnType<typeof useLiveTailControls>) => React.ReactElement;\n};\n\n/**\n * If you can't use the hook you can use this as a render prop pattern.\n */\nexport function LiveTailControls(props: Props) {\n  const controls = useLiveTailControls(props.exploreId);\n  return props.children(controls);\n}\n","import React, { lazy, PureComponent, RefObject, Suspense } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { DataSourceInstanceSettings, RawTimeRange } from '@grafana/data';\nimport { config, DataSourcePicker, reportInteraction } from '@grafana/runtime';\nimport {\n  defaultIntervals,\n  PageToolbar,\n  RefreshPicker,\n  SetInterval,\n  ToolbarButton,\n  ToolbarButtonRow,\n} from '@grafana/ui';\nimport { AppChromeUpdate } from 'app/core/components/AppChrome/AppChromeUpdate';\nimport { contextSrv } from 'app/core/core';\nimport { createAndCopyShortLink } from 'app/core/utils/shortLinks';\nimport { AccessControlAction } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\nimport { StoreState } from 'app/types/store';\n\nimport { DashNavButton } from '../dashboard/components/DashNav/DashNavButton';\nimport { getTimeSrv } from '../dashboard/services/TimeSrv';\nimport { updateFiscalYearStartMonthForSession, updateTimeZoneForSession } from '../profile/state/reducers';\nimport { getFiscalYearStartMonth, getTimeZone } from '../profile/state/selectors';\n\nimport { ExploreTimeControls } from './ExploreTimeControls';\nimport { LiveTailButton } from './LiveTailButton';\nimport { changeDatasource } from './state/datasource';\nimport { splitClose, splitOpen } from './state/main';\nimport { cancelQueries, runQueries } from './state/query';\nimport { isSplit } from './state/selectors';\nimport { syncTimes, changeRefreshInterval } from './state/time';\nimport { LiveTailControls } from './useLiveTailControls';\n\nconst AddToDashboard = lazy(() =>\n  import('./AddToDashboard').then(({ AddToDashboard }) => ({ default: AddToDashboard }))\n);\n\ninterface OwnProps {\n  exploreId: ExploreId;\n  onChangeTime: (range: RawTimeRange, changedByScanner?: boolean) => void;\n  topOfViewRef: RefObject<HTMLDivElement>;\n}\n\ntype Props = OwnProps & ConnectedProps<typeof connector>;\n\nclass UnConnectedExploreToolbar extends PureComponent<Props> {\n  onChangeDatasource = async (dsSettings: DataSourceInstanceSettings) => {\n    const { changeDatasource, exploreId } = this.props;\n    changeDatasource(exploreId, dsSettings.uid, { importQueries: true });\n  };\n\n  onRunQuery = (loading = false) => {\n    const { runQueries, cancelQueries, exploreId } = this.props;\n    if (loading) {\n      return cancelQueries(exploreId);\n    } else {\n      return runQueries(exploreId);\n    }\n  };\n\n  onChangeRefreshInterval = (item: string) => {\n    const { changeRefreshInterval, exploreId } = this.props;\n    changeRefreshInterval(exploreId, item);\n  };\n\n  onChangeTimeSync = () => {\n    const { syncTimes, exploreId } = this.props;\n    syncTimes(exploreId);\n  };\n\n  onCopyShortLink = async () => {\n    await createAndCopyShortLink(window.location.href);\n    reportInteraction('grafana_explore_shortened_link_clicked');\n  };\n\n  onOpenSplitView = () => {\n    const { split } = this.props;\n    split();\n    reportInteraction('grafana_explore_split_view_opened', { origin: 'menu' });\n  };\n\n  onCloseSplitView = () => {\n    const { closeSplit, exploreId } = this.props;\n    closeSplit(exploreId);\n    reportInteraction('grafana_explore_split_view_closed');\n  };\n\n  renderRefreshPicker = (showSmallTimePicker: boolean) => {\n    const { loading, refreshInterval, isLive } = this.props;\n\n    let refreshPickerText: string | undefined = loading ? 'Cancel' : 'Run query';\n    let refreshPickerTooltip = undefined;\n    let refreshPickerWidth = '108px';\n    if (showSmallTimePicker) {\n      refreshPickerTooltip = refreshPickerText;\n      refreshPickerText = undefined;\n      refreshPickerWidth = '35px';\n    }\n\n    return (\n      <RefreshPicker\n        key=\"refreshPicker\"\n        onIntervalChanged={this.onChangeRefreshInterval}\n        value={refreshInterval}\n        isLoading={loading}\n        text={refreshPickerText}\n        tooltip={refreshPickerTooltip}\n        intervals={getTimeSrv().getValidIntervals(defaultIntervals)}\n        isLive={isLive}\n        onRefresh={() => this.onRunQuery(loading)}\n        noIntervalPicker={isLive}\n        primary={true}\n        width={refreshPickerWidth}\n      />\n    );\n  };\n\n  renderActions = () => {\n    const {\n      splitted,\n      isLive,\n      exploreId,\n      range,\n      timeZone,\n      fiscalYearStartMonth,\n      onChangeTime,\n      syncedTimes,\n      onChangeTimeZone,\n      onChangeFiscalYearStartMonth,\n      refreshInterval,\n      loading,\n      isPaused,\n      hasLiveOption,\n      containerWidth,\n    } = this.props;\n    const showSmallTimePicker = splitted || containerWidth < 1210;\n\n    const showExploreToDashboard =\n      contextSrv.hasAccess(AccessControlAction.DashboardsCreate, contextSrv.isEditor) ||\n      contextSrv.hasAccess(AccessControlAction.DashboardsWrite, contextSrv.isEditor);\n\n    return [\n      !splitted ? (\n        <ToolbarButton\n          key=\"split\"\n          tooltip=\"Split the pane\"\n          onClick={this.onOpenSplitView}\n          icon=\"columns\"\n          disabled={isLive}\n        >\n          Split\n        </ToolbarButton>\n      ) : (\n        <ToolbarButton key=\"split\" tooltip=\"Close split pane\" onClick={this.onCloseSplitView} icon=\"times\">\n          Close\n        </ToolbarButton>\n      ),\n\n      showExploreToDashboard && (\n        <Suspense key=\"addToDashboard\" fallback={null}>\n          <AddToDashboard exploreId={exploreId} />\n        </Suspense>\n      ),\n\n      !isLive && (\n        <ExploreTimeControls\n          key=\"timeControls\"\n          exploreId={exploreId}\n          range={range}\n          timeZone={timeZone}\n          fiscalYearStartMonth={fiscalYearStartMonth}\n          onChangeTime={onChangeTime}\n          splitted={splitted}\n          syncedTimes={syncedTimes}\n          onChangeTimeSync={this.onChangeTimeSync}\n          hideText={showSmallTimePicker}\n          onChangeTimeZone={onChangeTimeZone}\n          onChangeFiscalYearStartMonth={onChangeFiscalYearStartMonth}\n        />\n      ),\n\n      this.renderRefreshPicker(showSmallTimePicker),\n\n      refreshInterval && (\n        <SetInterval key=\"setInterval\" func={this.onRunQuery} interval={refreshInterval} loading={loading} />\n      ),\n\n      hasLiveOption && (\n        <LiveTailControls key=\"liveControls\" exploreId={exploreId}>\n          {(c) => {\n            const controls = {\n              ...c,\n              start: () => {\n                reportInteraction('grafana_explore_logs_live_tailing_clicked', {\n                  datasourceType: this.props.datasourceType,\n                });\n                c.start();\n              },\n            };\n            return (\n              <LiveTailButton\n                splitted={splitted}\n                isLive={isLive}\n                isPaused={isPaused}\n                start={controls.start}\n                pause={controls.pause}\n                resume={controls.resume}\n                stop={controls.stop}\n              />\n            );\n          }}\n        </LiveTailControls>\n      ),\n    ].filter(Boolean);\n  };\n\n  render() {\n    const { datasourceMissing, exploreId, splitted, containerWidth, topOfViewRef } = this.props;\n\n    const showSmallDataSourcePicker = (splitted ? containerWidth < 700 : containerWidth < 800) || false;\n    const isTopnav = config.featureToggles.topnav;\n\n    const getDashNav = () => (\n      <DashNavButton\n        key=\"share\"\n        tooltip=\"Copy shortened link\"\n        icon=\"share-alt\"\n        onClick={this.onCopyShortLink}\n        aria-label=\"Copy shortened link\"\n      />\n    );\n\n    const getDataSourcePicker = () =>\n      !datasourceMissing && (\n        <DataSourcePicker\n          key={`${exploreId}-ds-picker`}\n          mixed={config.featureToggles.exploreMixedDatasource === true}\n          onChange={this.onChangeDatasource}\n          current={this.props.datasourceRef}\n          hideTextValue={showSmallDataSourcePicker}\n          width={showSmallDataSourcePicker ? 8 : undefined}\n        />\n      );\n\n    const topNavActions = [\n      getDashNav(),\n      !splitted && getDataSourcePicker(),\n      <div style={{ flex: 1 }} key=\"spacer\" />,\n      <ToolbarButtonRow key=\"actions\" alignment=\"right\">\n        {this.renderActions()}\n      </ToolbarButtonRow>,\n    ].filter(Boolean);\n\n    const toolbarLeftItems = [exploreId === ExploreId.left && getDashNav(), getDataSourcePicker()].filter(Boolean);\n\n    const toolbarLeftItemsTopNav = [\n      exploreId === ExploreId.left && (\n        <AppChromeUpdate\n          actions={[getDashNav(), !splitted && getDataSourcePicker(), <div style={{ flex: 1 }} key=\"spacer\" />].filter(\n            Boolean\n          )}\n        />\n      ),\n      getDataSourcePicker(),\n    ].filter(Boolean);\n\n    return isTopnav && !splitted ? (\n      <div ref={topOfViewRef}>\n        <AppChromeUpdate actions={topNavActions} />\n      </div>\n    ) : (\n      <div ref={topOfViewRef}>\n        <PageToolbar\n          aria-label=\"Explore toolbar\"\n          title={exploreId === ExploreId.left && !isTopnav ? 'Explore' : undefined}\n          pageIcon={exploreId === ExploreId.left && !isTopnav ? 'compass' : undefined}\n          leftItems={isTopnav ? toolbarLeftItemsTopNav : toolbarLeftItems}\n        >\n          {this.renderActions()}\n        </PageToolbar>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StoreState, { exploreId }: OwnProps) => {\n  const { syncedTimes } = state.explore;\n  const exploreItem = state.explore[exploreId]!;\n  const { datasourceInstance, datasourceMissing, range, refreshInterval, loading, isLive, isPaused, containerWidth } =\n    exploreItem;\n\n  const hasLiveOption = !!datasourceInstance?.meta?.streaming;\n\n  return {\n    datasourceMissing,\n    datasourceRef: datasourceInstance?.getRef(),\n    datasourceType: datasourceInstance?.type,\n    loading,\n    range,\n    timeZone: getTimeZone(state.user),\n    fiscalYearStartMonth: getFiscalYearStartMonth(state.user),\n    splitted: isSplit(state),\n    refreshInterval,\n    hasLiveOption,\n    isLive,\n    isPaused,\n    syncedTimes,\n    containerWidth,\n  };\n};\n\nconst mapDispatchToProps = {\n  changeDatasource,\n  changeRefreshInterval,\n  cancelQueries,\n  runQueries,\n  closeSplit: splitClose,\n  split: splitOpen,\n  syncTimes,\n  onChangeTimeZone: updateTimeZoneForSession,\n  onChangeFiscalYearStartMonth: updateFiscalYearStartMonthForSession,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport const ExploreToolbar = connector(UnConnectedExploreToolbar);\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { DataFrame, GrafanaTheme2, CoreApp } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport FlameGraphContainer from '../../plugins/panel/flamegraph/components/FlameGraphContainer';\n\ninterface Props {\n  dataFrames: DataFrame[];\n}\n\nexport const FlameGraphExploreContainer = (props: Props) => {\n  const styles = useStyles2((theme) => getStyles(theme));\n\n  return (\n    <div className={styles.container}>\n      <FlameGraphContainer data={props.dataFrames[0]} app={CoreApp.Explore} />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    background: ${theme.colors.background.primary};\n    display: flow-root;\n    padding: 0 ${theme.spacing(1)} ${theme.spacing(1)} ${theme.spacing(1)};\n    border: 1px solid ${theme.components.panel.borderColor};\n    border-radius: ${theme.shape.borderRadius(1)};\n  `,\n});\n","import React, { FC } from 'react';\n\nimport { toDuration } from '@grafana/data';\n\nexport interface TimeProps {\n  timeInMs: number;\n  className?: string;\n  humanize?: boolean;\n}\n\nexport const Time: FC<TimeProps> = ({ timeInMs, className, humanize }) => {\n  return <span className={className}>{formatTime(timeInMs, humanize)}</span>;\n};\n\nconst formatTime = (timeInMs: number, humanize = false): string => {\n  const inSeconds = timeInMs / 1000;\n\n  if (!humanize) {\n    return `${inSeconds.toFixed(1)}s`;\n  }\n\n  const duration = toDuration(inSeconds, 'seconds');\n  const hours = duration.hours();\n  const minutes = duration.minutes();\n  const seconds = duration.seconds();\n\n  if (hours) {\n    return `${hours}h ${minutes}m ${seconds}s`;\n  }\n\n  if (minutes) {\n    return `${minutes}m ${seconds}s`;\n  }\n\n  return `${seconds}s`;\n};\n","import React, { FC, useState, useEffect } from 'react';\nimport { useInterval } from 'react-use';\n\nimport { Time, TimeProps } from './Time';\n\nconst INTERVAL = 150;\n\nexport interface ElapsedTimeProps extends Omit<TimeProps, 'timeInMs'> {\n  // Use this to reset the timer. Any value is allowed just need to be !== from the previous.\n  // Keep in mind things like [] !== [] or {} !== {}.\n  resetKey?: any;\n}\n\nexport const ElapsedTime: FC<ElapsedTimeProps> = ({ resetKey, humanize, className }) => {\n  const [elapsed, setElapsed] = useState(0); // the current value of elapsed\n\n  // hook that will schedule a interval and then update the elapsed value on every tick.\n  useInterval(() => setElapsed(elapsed + INTERVAL), INTERVAL);\n  // this effect will only be run when resetKey changes. This will reset the elapsed to 0.\n  useEffect(() => setElapsed(0), [resetKey]);\n\n  return <Time timeInMs={elapsed} className={className} humanize={humanize} />;\n};\n","import { css, cx } from '@emotion/css';\nimport React, { PureComponent } from 'react';\nimport tinycolor from 'tinycolor2';\n\nimport { LogRowModel, TimeZone, dateTimeFormat, GrafanaTheme2 } from '@grafana/data';\nimport { Icon, Button, Themeable2, withTheme2 } from '@grafana/ui';\n\nimport { LogMessageAnsi } from '../logs/components/LogMessageAnsi';\nimport { getLogRowStyles } from '../logs/components/getLogRowStyles';\n\nimport { ElapsedTime } from './ElapsedTime';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  logsRowsLive: css`\n    label: logs-rows-live;\n    font-family: ${theme.typography.fontFamilyMonospace};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    display: flex;\n    flex-flow: column nowrap;\n    height: 60vh;\n    overflow-y: scroll;\n    :first-child {\n      margin-top: auto !important;\n    }\n  `,\n  logsRowFade: css`\n    label: logs-row-fresh;\n    color: ${theme.colors.text};\n    background-color: ${tinycolor(theme.colors.info.transparent).setAlpha(0.25).toString()};\n    animation: fade 1s ease-out 1s 1 normal forwards;\n    @keyframes fade {\n      from {\n        background-color: ${tinycolor(theme.colors.info.transparent).setAlpha(0.25).toString()};\n      }\n      to {\n        background-color: transparent;\n      }\n    }\n  `,\n  logsRowsIndicator: css`\n    font-size: ${theme.typography.h6.fontSize};\n    padding-top: ${theme.spacing(1)};\n    display: flex;\n    align-items: center;\n  `,\n  button: css`\n    margin-right: ${theme.spacing(1)};\n  `,\n  fullWidth: css`\n    width: 100%;\n  `,\n});\n\nexport interface Props extends Themeable2 {\n  logRows?: LogRowModel[];\n  timeZone: TimeZone;\n  stopLive: () => void;\n  onPause: () => void;\n  onResume: () => void;\n  isPaused: boolean;\n}\n\ninterface State {\n  logRowsToRender?: LogRowModel[];\n}\n\nclass LiveLogs extends PureComponent<Props, State> {\n  private liveEndDiv: HTMLDivElement | null = null;\n  private scrollContainerRef = React.createRef<HTMLTableSectionElement>();\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      logRowsToRender: props.logRows,\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps: Props, state: State) {\n    if (!nextProps.isPaused) {\n      return {\n        // We update what we show only if not paused. We keep any background subscriptions running and keep updating\n        // our state, but we do not show the updates, this allows us start again showing correct result after resuming\n        // without creating a gap in the log results.\n        logRowsToRender: nextProps.logRows,\n      };\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Handle pausing when user scrolls up so that we stop resetting his position to the bottom when new row arrives.\n   * We do not need to throttle it here much, adding new rows should be throttled/buffered itself in the query epics\n   * and after you pause we remove the handler and add it after you manually resume, so this should not be fired often.\n   */\n  onScroll = (event: React.SyntheticEvent) => {\n    const { isPaused, onPause } = this.props;\n    const { scrollTop, clientHeight, scrollHeight } = event.currentTarget;\n    const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);\n    if (distanceFromBottom >= 5 && !isPaused) {\n      onPause();\n    }\n  };\n\n  rowsToRender = () => {\n    const { isPaused } = this.props;\n    let { logRowsToRender: rowsToRender = [] } = this.state;\n    if (!isPaused) {\n      // A perf optimisation here. Show just 100 rows when streaming and full length when the streaming is paused.\n      rowsToRender = rowsToRender.slice(-100);\n    }\n    return rowsToRender;\n  };\n\n  render() {\n    const { theme, timeZone, onPause, onResume, isPaused } = this.props;\n    const styles = getStyles(theme);\n    const { logsRow, logsRowLocalTime, logsRowMessage } = getLogRowStyles(theme);\n\n    return (\n      <div>\n        <table className={styles.fullWidth}>\n          <tbody\n            onScroll={isPaused ? undefined : this.onScroll}\n            className={styles.logsRowsLive}\n            ref={this.scrollContainerRef}\n          >\n            {this.rowsToRender().map((row: LogRowModel) => {\n              return (\n                <tr className={cx(logsRow, styles.logsRowFade)} key={row.uid}>\n                  <td className={logsRowLocalTime}>{dateTimeFormat(row.timeEpochMs, { timeZone })}</td>\n                  <td className={logsRowMessage}>{row.hasAnsi ? <LogMessageAnsi value={row.raw} /> : row.entry}</td>\n                </tr>\n              );\n            })}\n            <tr\n              ref={(element) => {\n                this.liveEndDiv = element;\n                // This is triggered on every update so on every new row. It keeps the view scrolled at the bottom by\n                // default.\n                // As scrollTo is not implemented in JSDOM it needs to be part of the condition\n                if (this.liveEndDiv && this.scrollContainerRef.current?.scrollTo && !isPaused) {\n                  this.scrollContainerRef.current?.scrollTo(0, this.scrollContainerRef.current.scrollHeight);\n                }\n              }}\n            />\n          </tbody>\n        </table>\n        <div className={styles.logsRowsIndicator}>\n          <Button variant=\"secondary\" onClick={isPaused ? onResume : onPause} className={styles.button}>\n            <Icon name={isPaused ? 'play' : 'pause'} />\n            &nbsp;\n            {isPaused ? 'Resume' : 'Pause'}\n          </Button>\n          <Button variant=\"secondary\" onClick={this.props.stopLive} className={styles.button}>\n            <Icon name=\"square-shape\" size=\"lg\" type=\"mono\" />\n            &nbsp; Exit live mode\n          </Button>\n          {isPaused || (\n            <span>\n              Last line received: <ElapsedTime resetKey={this.props.logRows} humanize={true} /> ago\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const LiveLogsWithTheme = withTheme2(LiveLogs);\n","import { css } from '@emotion/css';\nimport React, { memo } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  metaContainer: css`\n    flex: 1;\n    color: ${theme.colors.text.secondary};\n    margin-bottom: ${theme.spacing(2)};\n    min-width: 30%;\n    display: flex;\n    flex-wrap: wrap;\n  `,\n  metaItem: css`\n    margin-right: ${theme.spacing(2)};\n    margin-top: ${theme.spacing(0.5)};\n    display: flex;\n    align-items: baseline;\n\n    .logs-meta-item__error {\n      color: ${theme.colors.error.text};\n    }\n  `,\n  metaLabel: css`\n    margin-right: calc(${theme.spacing(2)} / 2);\n    font-size: ${theme.typography.bodySmall.fontSize};\n    font-weight: ${theme.typography.fontWeightMedium};\n  `,\n  metaValue: css`\n    font-family: ${theme.typography.fontFamilyMonospace};\n    font-size: ${theme.typography.bodySmall.fontSize};\n  `,\n});\n\nexport interface MetaItemProps {\n  label?: string;\n  value: string | JSX.Element;\n}\n\nconst MetaInfoItem = memo(function MetaInfoItem(props: MetaItemProps) {\n  const style = useStyles2(getStyles);\n  const { label, value } = props;\n\n  return (\n    <div data-testid=\"meta-info-text-item\" className={style.metaItem}>\n      {label && <span className={style.metaLabel}>{label}:</span>}\n      <span className={style.metaValue}>{value}</span>\n    </div>\n  );\n});\n\ninterface MetaInfoTextProps {\n  metaItems: MetaItemProps[];\n}\n\nexport const MetaInfoText = memo(function MetaInfoText(props: MetaInfoTextProps) {\n  const style = useStyles2(getStyles);\n  const { metaItems } = props;\n\n  return (\n    <div className={style.metaContainer} data-testid=\"meta-info-text\">\n      {metaItems.map((item, index) => (\n        <MetaInfoItem key={`${index}-${item.label}`} label={item.label} value={item.value} />\n      ))}\n    </div>\n  );\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { LogsDedupStrategy, LogsMetaItem, LogsMetaKind, LogRowModel } from '@grafana/data';\nimport { Button, ToolbarButton, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { downloadLogsModelAsTxt } from '../inspector/utils/download';\nimport { LogLabels } from '../logs/components/LogLabels';\nimport { MAX_CHARACTERS } from '../logs/components/LogRowMessage';\n\nimport { MetaInfoText, MetaItemProps } from './MetaInfoText';\n\nconst getStyles = () => ({\n  metaContainer: css`\n    flex: 1;\n    display: flex;\n    flex-wrap: wrap;\n  `,\n});\n\nexport type Props = {\n  meta: LogsMetaItem[];\n  dedupStrategy: LogsDedupStrategy;\n  dedupCount: number;\n  showDetectedFields: string[];\n  hasUnescapedContent: boolean;\n  forceEscape: boolean;\n  logRows: LogRowModel[];\n  onEscapeNewlines: () => void;\n  clearDetectedFields: () => void;\n};\n\nexport const LogsMetaRow = React.memo(\n  ({\n    meta,\n    dedupStrategy,\n    dedupCount,\n    showDetectedFields,\n    clearDetectedFields,\n    hasUnescapedContent,\n    forceEscape,\n    onEscapeNewlines,\n    logRows,\n  }: Props) => {\n    const style = useStyles2(getStyles);\n\n    const downloadLogs = () => {\n      downloadLogsModelAsTxt({ meta, rows: logRows }, 'Explore');\n    };\n\n    const logsMetaItem: Array<LogsMetaItem | MetaItemProps> = [...meta];\n\n    // Add deduplication info\n    if (dedupStrategy !== LogsDedupStrategy.none) {\n      logsMetaItem.push({\n        label: 'Dedup count',\n        value: dedupCount,\n        kind: LogsMetaKind.Number,\n      });\n    }\n    // Add info about limit for highlighting\n    if (logRows.some((r) => r.entry.length > MAX_CHARACTERS)) {\n      logsMetaItem.push({\n        label: 'Info',\n        value: 'Logs with more than 100,000 characters could not be parsed and highlighted',\n        kind: LogsMetaKind.String,\n      });\n    }\n\n    // Add detected fields info\n    if (showDetectedFields?.length > 0) {\n      logsMetaItem.push(\n        {\n          label: 'Showing only detected fields',\n          value: renderMetaItem(showDetectedFields, LogsMetaKind.LabelsMap),\n        },\n        {\n          label: '',\n          value: (\n            <Button variant=\"secondary\" size=\"sm\" onClick={clearDetectedFields}>\n              Show original line\n            </Button>\n          ),\n        }\n      );\n    }\n\n    // Add unescaped content info\n    if (hasUnescapedContent) {\n      logsMetaItem.push({\n        label: 'Your logs might have incorrectly escaped content',\n        value: (\n          <Tooltip\n            content=\"Fix incorrectly escaped newline and tab sequences in log lines. Manually review the results to confirm that the replacements are correct.\"\n            placement=\"right\"\n          >\n            <Button variant=\"secondary\" size=\"sm\" onClick={onEscapeNewlines}>\n              {forceEscape ? 'Remove escaping' : 'Escape newlines'}\n            </Button>\n          </Tooltip>\n        ),\n      });\n    }\n    return (\n      <>\n        {logsMetaItem && (\n          <div className={style.metaContainer}>\n            <MetaInfoText\n              metaItems={logsMetaItem.map((item) => {\n                return {\n                  label: item.label,\n                  value: 'kind' in item ? renderMetaItem(item.value, item.kind) : item.value,\n                };\n              })}\n            />\n            <ToolbarButton onClick={downloadLogs} variant=\"default\" icon=\"download-alt\">\n              Download logs\n            </ToolbarButton>\n          </div>\n        )}\n      </>\n    );\n  }\n);\n\nLogsMetaRow.displayName = 'LogsMetaRow';\n\nfunction renderMetaItem(value: any, kind: LogsMetaKind) {\n  if (kind === LogsMetaKind.LabelsMap) {\n    return <LogLabels labels={value} />;\n  } else if (kind === LogsMetaKind.Error) {\n    return <span className=\"logs-meta-item__error\">{value}</span>;\n  }\n  return value;\n}\n","import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { dateTimeFormat, systemDateFormats, TimeZone, AbsoluteTimeRange, GrafanaTheme2 } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { CustomScrollbar, Spinner, useTheme2, clearButtonStyles } from '@grafana/ui';\n\nimport { LogsPage } from './LogsNavigation';\n\ntype Props = {\n  pages: LogsPage[];\n  currentPageIndex: number;\n  oldestLogsFirst: boolean;\n  timeZone: TimeZone;\n  loading: boolean;\n  changeTime: (range: AbsoluteTimeRange) => void;\n};\n\nexport function LogsNavigationPages({\n  pages,\n  currentPageIndex,\n  oldestLogsFirst,\n  timeZone,\n  loading,\n  changeTime,\n}: Props) {\n  const formatTime = (time: number) => {\n    return `${dateTimeFormat(time, {\n      format: systemDateFormats.interval.second,\n      timeZone: timeZone,\n    })}`;\n  };\n\n  const createPageContent = (page: LogsPage, index: number) => {\n    if (currentPageIndex === index && loading) {\n      return <Spinner />;\n    }\n    const topContent = formatTime(oldestLogsFirst ? page.logsRange.from : page.logsRange.to);\n    const bottomContent = formatTime(oldestLogsFirst ? page.logsRange.to : page.logsRange.from);\n    return `${topContent}  ${bottomContent}`;\n  };\n\n  const theme = useTheme2();\n  const styles = getStyles(theme, loading);\n\n  return (\n    <CustomScrollbar autoHide>\n      <div className={styles.pagesWrapper} data-testid=\"logsNavigationPages\">\n        <div className={styles.pagesContainer}>\n          {pages.map((page: LogsPage, index: number) => (\n            <button\n              type=\"button\"\n              data-testid={`page${index + 1}`}\n              className={styles.page}\n              key={page.queryRange.to}\n              onClick={() => {\n                reportInteraction('grafana_explore_logs_pagination_clicked', {\n                  pageType: 'page',\n                  pageNumber: index + 1,\n                });\n                !loading && changeTime({ from: page.queryRange.from, to: page.queryRange.to });\n              }}\n            >\n              <div className={cx(styles.line, { selectedBg: currentPageIndex === index })} />\n              <div className={cx(styles.time, { selectedText: currentPageIndex === index })}>\n                {createPageContent(page, index)}\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n    </CustomScrollbar>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2, loading: boolean) => {\n  return {\n    pagesWrapper: css`\n      height: 100%;\n      padding-left: ${theme.spacing(0.5)};\n      display: flex;\n      flex-direction: column;\n      overflow-y: scroll;\n      &::after {\n        content: '';\n        display: block;\n        background: repeating-linear-gradient(\n          135deg,\n          ${theme.colors.background.primary},\n          ${theme.colors.background.primary} 5px,\n          ${theme.colors.background.secondary} 5px,\n          ${theme.colors.background.secondary} 15px\n        );\n        width: 3px;\n        height: inherit;\n        margin-bottom: 8px;\n      }\n    `,\n    pagesContainer: css`\n      display: flex;\n      padding: 0;\n      flex-direction: column;\n    `,\n    page: css`\n      ${clearButtonStyles(theme)}\n      display: flex;\n      margin: ${theme.spacing(2)} 0;\n      cursor: ${loading ? 'auto' : 'pointer'};\n      white-space: normal;\n      .selectedBg {\n        background: ${theme.colors.primary.main};\n      }\n      .selectedText {\n        color: ${theme.colors.primary.main};\n      }\n    `,\n    line: css`\n      width: 3px;\n      height: 100%;\n      align-items: center;\n      background: ${theme.colors.text.secondary};\n    `,\n    time: css`\n      width: 60px;\n      min-height: 80px;\n      font-size: ${theme.v1.typography.size.sm};\n      padding-left: ${theme.spacing(0.5)};\n      display: flex;\n      align-items: center;\n    `,\n  };\n};\n","import { css } from '@emotion/css';\nimport { isEqual } from 'lodash';\nimport React, { memo, useState, useEffect, useRef } from 'react';\n\nimport { LogsSortOrder, AbsoluteTimeRange, TimeZone, DataQuery, GrafanaTheme2 } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, Icon, Spinner, useTheme2 } from '@grafana/ui';\n\nimport { LogsNavigationPages } from './LogsNavigationPages';\n\ntype Props = {\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  queries: DataQuery[];\n  loading: boolean;\n  visibleRange: AbsoluteTimeRange;\n  logsSortOrder?: LogsSortOrder | null;\n  onChangeTime: (range: AbsoluteTimeRange) => void;\n  scrollToTopLogs: () => void;\n  addResultsToCache: () => void;\n  clearCache: () => void;\n};\n\nexport type LogsPage = {\n  logsRange: AbsoluteTimeRange;\n  queryRange: AbsoluteTimeRange;\n};\n\nfunction LogsNavigation({\n  absoluteRange,\n  logsSortOrder,\n  timeZone,\n  loading,\n  onChangeTime,\n  scrollToTopLogs,\n  visibleRange,\n  queries,\n  clearCache,\n  addResultsToCache,\n}: Props) {\n  const [pages, setPages] = useState<LogsPage[]>([]);\n  const [currentPageIndex, setCurrentPageIndex] = useState(0);\n\n  // These refs are to determine, if we want to clear up logs navigation when totally new query is run\n  const expectedQueriesRef = useRef<DataQuery[]>();\n  const expectedRangeRef = useRef<AbsoluteTimeRange>();\n  // This ref is to store range span for future queres based on firstly selected time range\n  // e.g. if last 5 min selected, always run 5 min range\n  const rangeSpanRef = useRef(0);\n\n  const oldestLogsFirst = logsSortOrder === LogsSortOrder.Ascending;\n  const onFirstPage = oldestLogsFirst ? currentPageIndex === pages.length - 1 : currentPageIndex === 0;\n  const onLastPage = oldestLogsFirst ? currentPageIndex === 0 : currentPageIndex === pages.length - 1;\n  const theme = useTheme2();\n  const styles = getStyles(theme, oldestLogsFirst, loading);\n\n  // Main effect to set pages and index\n  useEffect(() => {\n    const newPage = { logsRange: visibleRange, queryRange: absoluteRange };\n    let newPages: LogsPage[] = [];\n    // We want to start new pagination if queries change or if absolute range is different than expected\n    if (!isEqual(expectedRangeRef.current, absoluteRange) || !isEqual(expectedQueriesRef.current, queries)) {\n      clearCache();\n      setPages([newPage]);\n      setCurrentPageIndex(0);\n      expectedQueriesRef.current = queries;\n      rangeSpanRef.current = absoluteRange.to - absoluteRange.from;\n    } else {\n      setPages((pages) => {\n        // Remove duplicates with new query\n        newPages = pages.filter((page) => !isEqual(newPage.queryRange, page.queryRange));\n        // Sort pages based on logsOrder so they visually align with displayed logs\n        newPages = [...newPages, newPage].sort((a, b) => sortPages(a, b, logsSortOrder));\n        // Set new pages\n\n        return newPages;\n      });\n\n      // Set current page index\n      const index = newPages.findIndex((page) => page.queryRange.to === absoluteRange.to);\n      setCurrentPageIndex(index);\n    }\n    addResultsToCache();\n  }, [visibleRange, absoluteRange, logsSortOrder, queries, clearCache, addResultsToCache]);\n\n  useEffect(() => {\n    clearCache();\n    // We can't enforce the eslint rule here because we only want to run when component is mounted.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const changeTime = ({ from, to }: AbsoluteTimeRange) => {\n    expectedRangeRef.current = { from, to };\n    onChangeTime({ from, to });\n  };\n\n  const sortPages = (a: LogsPage, b: LogsPage, logsSortOrder?: LogsSortOrder | null) => {\n    if (logsSortOrder === LogsSortOrder.Ascending) {\n      return a.queryRange.to > b.queryRange.to ? 1 : -1;\n    }\n    return a.queryRange.to > b.queryRange.to ? -1 : 1;\n  };\n\n  const olderLogsButton = (\n    <Button\n      data-testid=\"olderLogsButton\"\n      className={styles.navButton}\n      variant=\"secondary\"\n      onClick={() => {\n        //If we are not on the last page, use next page's range\n        reportInteraction('grafana_explore_logs_pagination_clicked', {\n          pageType: 'olderLogsButton',\n        });\n        if (!onLastPage) {\n          const indexChange = oldestLogsFirst ? -1 : 1;\n          changeTime({\n            from: pages[currentPageIndex + indexChange].queryRange.from,\n            to: pages[currentPageIndex + indexChange].queryRange.to,\n          });\n        } else {\n          //If we are on the last page, create new range\n          changeTime({ from: visibleRange.from - rangeSpanRef.current, to: visibleRange.from });\n        }\n      }}\n      disabled={loading}\n    >\n      <div className={styles.navButtonContent}>\n        {loading ? <Spinner /> : <Icon name={oldestLogsFirst ? 'angle-up' : 'angle-down'} size=\"lg\" />}\n        Older logs\n      </div>\n    </Button>\n  );\n\n  const newerLogsButton = (\n    <Button\n      data-testid=\"newerLogsButton\"\n      className={styles.navButton}\n      variant=\"secondary\"\n      onClick={() => {\n        reportInteraction('grafana_explore_logs_pagination_clicked', {\n          pageType: 'newerLogsButton',\n        });\n        //If we are not on the first page, use previous page's range\n        if (!onFirstPage) {\n          const indexChange = oldestLogsFirst ? 1 : -1;\n          changeTime({\n            from: pages[currentPageIndex + indexChange].queryRange.from,\n            to: pages[currentPageIndex + indexChange].queryRange.to,\n          });\n        }\n        //If we are on the first page, button is disabled and we do nothing\n      }}\n      disabled={loading || onFirstPage}\n    >\n      <div className={styles.navButtonContent}>\n        {loading && <Spinner />}\n        {onFirstPage || loading ? null : <Icon name={oldestLogsFirst ? 'angle-down' : 'angle-up'} size=\"lg\" />}\n        {onFirstPage ? 'Start of range' : 'Newer logs'}\n      </div>\n    </Button>\n  );\n\n  return (\n    <div className={styles.navContainer}>\n      {oldestLogsFirst ? olderLogsButton : newerLogsButton}\n      <LogsNavigationPages\n        pages={pages}\n        currentPageIndex={currentPageIndex}\n        oldestLogsFirst={oldestLogsFirst}\n        timeZone={timeZone}\n        loading={loading}\n        changeTime={changeTime}\n      />\n      {oldestLogsFirst ? newerLogsButton : olderLogsButton}\n      <Button\n        data-testid=\"scrollToTop\"\n        className={styles.scrollToTopButton}\n        variant=\"secondary\"\n        onClick={scrollToTopLogs}\n        title=\"Scroll to top\"\n      >\n        <Icon name=\"arrow-up\" size=\"lg\" />\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(LogsNavigation);\n\nconst getStyles = (theme: GrafanaTheme2, oldestLogsFirst: boolean, loading: boolean) => {\n  return {\n    navContainer: css`\n      max-height: 95vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: ${oldestLogsFirst ? 'flex-start' : 'space-between'};\n      position: sticky;\n      top: ${theme.spacing(2)};\n      right: 0;\n    `,\n    navButton: css`\n      width: 58px;\n      height: 68px;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      line-height: 1;\n    `,\n    navButtonContent: css`\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      white-space: normal;\n    `,\n    scrollToTopButton: css`\n      width: 40px;\n      height: 40px;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      margin-top: ${theme.spacing(1)};\n    `,\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport {\n  AbsoluteTimeRange,\n  DataQueryError,\n  DataQueryResponse,\n  GrafanaTheme2,\n  LoadingState,\n  SplitOpen,\n  TimeZone,\n  EventBus,\n} from '@grafana/data';\nimport { Alert, Button, Collapse, InlineField, TooltipDisplayMode, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport { ExploreGraph } from './ExploreGraph';\n\ntype Props = {\n  logsVolumeData: DataQueryResponse | undefined;\n  absoluteRange: AbsoluteTimeRange;\n  logLinesBasedData: DataQueryResponse | undefined;\n  logLinesBasedDataVisibleRange: AbsoluteTimeRange | undefined;\n  timeZone: TimeZone;\n  splitOpen: SplitOpen;\n  width: number;\n  onUpdateTimeRange: (timeRange: AbsoluteTimeRange) => void;\n  onLoadLogsVolume: () => void;\n  onHiddenSeriesChanged: (hiddenSeries: string[]) => void;\n  eventBus: EventBus;\n};\n\nconst SHORT_ERROR_MESSAGE_LIMIT = 100;\n\nfunction ErrorAlert(props: { error: DataQueryError }) {\n  const [isOpen, setIsOpen] = useState(false);\n  // generic get-error-message-logic, taken from\n  // /public/app/features/explore/ErrorContainer.tsx\n  const message = props.error.message || props.error.data?.message || '';\n\n  const showButton = !isOpen && message.length > SHORT_ERROR_MESSAGE_LIMIT;\n\n  return (\n    <Alert title=\"Failed to load log volume for this query\" severity=\"warning\">\n      {showButton ? (\n        <Button\n          variant=\"secondary\"\n          size=\"xs\"\n          onClick={() => {\n            setIsOpen(true);\n          }}\n        >\n          Show details\n        </Button>\n      ) : (\n        message\n      )}\n    </Alert>\n  );\n}\n\nfunction createVisualisationData(\n  logLinesBased: DataQueryResponse | undefined,\n  logLinesBasedVisibleRange: AbsoluteTimeRange | undefined,\n  fullRangeData: DataQueryResponse | undefined,\n  absoluteRange: AbsoluteTimeRange\n):\n  | {\n      logsVolumeData: DataQueryResponse;\n      fullRangeData: boolean;\n      range: AbsoluteTimeRange;\n    }\n  | undefined {\n  if (fullRangeData !== undefined) {\n    return {\n      logsVolumeData: fullRangeData,\n      fullRangeData: true,\n      range: absoluteRange,\n    };\n  }\n\n  if (logLinesBased !== undefined) {\n    return {\n      logsVolumeData: logLinesBased,\n      fullRangeData: false,\n      range: logLinesBasedVisibleRange || absoluteRange,\n    };\n  }\n\n  return undefined;\n}\n\nexport function LogsVolumePanel(props: Props) {\n  const { width, timeZone, splitOpen, onUpdateTimeRange, onLoadLogsVolume, onHiddenSeriesChanged } = props;\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n  const spacing = parseInt(theme.spacing(2).slice(0, -2), 10);\n  const height = 150;\n\n  const data = createVisualisationData(\n    props.logLinesBasedData,\n    props.logLinesBasedDataVisibleRange,\n    props.logsVolumeData,\n    props.absoluteRange\n  );\n\n  if (data === undefined) {\n    return null;\n  }\n\n  const { logsVolumeData, fullRangeData, range } = data;\n\n  if (logsVolumeData.error !== undefined) {\n    return <ErrorAlert error={logsVolumeData.error} />;\n  }\n\n  let LogsVolumePanelContent;\n\n  if (logsVolumeData?.state === LoadingState.Loading) {\n    LogsVolumePanelContent = <span>Log volume is loading...</span>;\n  } else if (logsVolumeData?.data) {\n    if (logsVolumeData.data.length > 0) {\n      LogsVolumePanelContent = (\n        <ExploreGraph\n          graphStyle=\"lines\"\n          loadingState={LoadingState.Done}\n          data={logsVolumeData.data}\n          height={height}\n          width={width - spacing}\n          absoluteRange={range}\n          onChangeTime={onUpdateTimeRange}\n          timeZone={timeZone}\n          splitOpenFn={splitOpen}\n          tooltipDisplayMode={TooltipDisplayMode.Multi}\n          onHiddenSeriesChanged={onHiddenSeriesChanged}\n          anchorToZero\n          eventBus={props.eventBus}\n        />\n      );\n    } else {\n      LogsVolumePanelContent = <span>No volume data.</span>;\n    }\n  }\n\n  let extraInfo;\n  if (fullRangeData) {\n    const zoomRatio = logsLevelZoomRatio(logsVolumeData, range);\n\n    if (zoomRatio !== undefined && zoomRatio < 1) {\n      extraInfo = (\n        <InlineField label=\"Reload log volume\" transparent>\n          <Button size=\"xs\" icon=\"sync\" variant=\"secondary\" onClick={onLoadLogsVolume} id=\"reload-volume\" />\n        </InlineField>\n      );\n    }\n  } else {\n    extraInfo = (\n      <div className={styles.oldInfoText}>\n        This datasource does not support full-range histograms. The graph is based on the logs seen in the response.\n      </div>\n    );\n  }\n  return (\n    <Collapse label=\"\" isOpen={true}>\n      <div style={{ height }} className={styles.contentContainer}>\n        {LogsVolumePanelContent}\n      </div>\n      <div className={styles.extraInfoContainer}>{extraInfo}</div>\n    </Collapse>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    extraInfoContainer: css`\n      display: flex;\n      justify-content: end;\n      position: absolute;\n      right: 5px;\n      top: 5px;\n    `,\n    contentContainer: css`\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `,\n    oldInfoText: css`\n      font-size: ${theme.typography.size.sm};\n      color: ${theme.colors.text.secondary};\n    `,\n  };\n};\n\nfunction logsLevelZoomRatio(\n  logsVolumeData: DataQueryResponse | undefined,\n  selectedTimeRange: AbsoluteTimeRange\n): number | undefined {\n  const dataRange = logsVolumeData && logsVolumeData.data[0] && logsVolumeData.data[0].meta?.custom?.absoluteRange;\n  return dataRange ? (selectedTimeRange.from - selectedTimeRange.to) / (dataRange.from - dataRange.to) : undefined;\n}\n","import { css } from '@emotion/css';\nimport { capitalize } from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport React, { PureComponent, createRef } from 'react';\n\nimport {\n  rangeUtil,\n  RawTimeRange,\n  LogLevel,\n  TimeZone,\n  AbsoluteTimeRange,\n  LogsDedupStrategy,\n  LogRowModel,\n  LogsDedupDescription,\n  LogsMetaItem,\n  LogsSortOrder,\n  LinkModel,\n  Field,\n  DataQuery,\n  DataFrame,\n  GrafanaTheme2,\n  LoadingState,\n  SplitOpen,\n  DataQueryResponse,\n  CoreApp,\n  DataHoverEvent,\n  DataHoverClearEvent,\n  EventBus,\n} from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport {\n  RadioButtonGroup,\n  Button,\n  InlineField,\n  InlineFieldRow,\n  InlineSwitch,\n  withTheme2,\n  Themeable2,\n  Collapse,\n} from '@grafana/ui';\nimport { dedupLogRows, filterLogLevels } from 'app/core/logsModel';\nimport store from 'app/core/store';\nimport { ExploreId } from 'app/types/explore';\n\nimport { RowContextOptions } from '../logs/components/LogRowContextProvider';\nimport { LogRows } from '../logs/components/LogRows';\n\nimport { LogsMetaRow } from './LogsMetaRow';\nimport LogsNavigation from './LogsNavigation';\nimport { LogsVolumePanel } from './LogsVolumePanel';\nimport { SETTINGS_KEYS } from './utils/logs';\n\ninterface Props extends Themeable2 {\n  width: number;\n  splitOpen: SplitOpen;\n  logRows: LogRowModel[];\n  logsMeta?: LogsMetaItem[];\n  logsSeries?: DataFrame[];\n  logsQueries?: DataQuery[];\n  visibleRange?: AbsoluteTimeRange;\n  theme: GrafanaTheme2;\n  loading: boolean;\n  loadingState: LoadingState;\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  scanning?: boolean;\n  scanRange?: RawTimeRange;\n  exploreId: ExploreId;\n  datasourceType?: string;\n  logsVolumeEnabled: boolean;\n  logsVolumeData: DataQueryResponse | undefined;\n  scrollElement?: HTMLDivElement;\n  onSetLogsVolumeEnabled: (enabled: boolean) => void;\n  loadLogsVolumeData: (exploreId: ExploreId) => void;\n  showContextToggle?: (row?: LogRowModel) => boolean;\n  onChangeTime: (range: AbsoluteTimeRange) => void;\n  onClickFilterLabel?: (key: string, value: string) => void;\n  onClickFilterOutLabel?: (key: string, value: string) => void;\n  onStartScanning?: () => void;\n  onStopScanning?: () => void;\n  getRowContext?: (row: LogRowModel, options?: RowContextOptions) => Promise<any>;\n  getFieldLinks: (field: Field, rowIndex: number, dataFrame: DataFrame) => Array<LinkModel<Field>>;\n  addResultsToCache: () => void;\n  clearCache: () => void;\n  eventBus: EventBus;\n}\n\ninterface State {\n  showLabels: boolean;\n  showTime: boolean;\n  wrapLogMessage: boolean;\n  prettifyLogMessage: boolean;\n  dedupStrategy: LogsDedupStrategy;\n  hiddenLogLevels: LogLevel[];\n  logsSortOrder: LogsSortOrder | null;\n  isFlipping: boolean;\n  showDetectedFields: string[];\n  forceEscape: boolean;\n}\n\n// We need to override css overflow of divs in Collapse element to enable sticky Logs navigation\nconst styleOverridesForStickyNavigation = css`\n  & > div {\n    overflow: visible;\n    & > div {\n      overflow: visible;\n    }\n  }\n`;\n\nclass UnthemedLogs extends PureComponent<Props, State> {\n  flipOrderTimer?: number;\n  cancelFlippingTimer?: number;\n  topLogsRef = createRef<HTMLDivElement>();\n  logsVolumeEventBus: EventBus;\n\n  state: State = {\n    showLabels: store.getBool(SETTINGS_KEYS.showLabels, false),\n    showTime: store.getBool(SETTINGS_KEYS.showTime, true),\n    wrapLogMessage: store.getBool(SETTINGS_KEYS.wrapLogMessage, true),\n    prettifyLogMessage: store.getBool(SETTINGS_KEYS.prettifyLogMessage, false),\n    dedupStrategy: LogsDedupStrategy.none,\n    hiddenLogLevels: [],\n    logsSortOrder: store.get(SETTINGS_KEYS.logsSortOrder) || LogsSortOrder.Descending,\n    isFlipping: false,\n    showDetectedFields: [],\n    forceEscape: false,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.logsVolumeEventBus = props.eventBus.newScopedBus('logsvolume', { onlyLocal: false });\n  }\n\n  componentWillUnmount() {\n    if (this.flipOrderTimer) {\n      window.clearTimeout(this.flipOrderTimer);\n    }\n\n    if (this.cancelFlippingTimer) {\n      window.clearTimeout(this.cancelFlippingTimer);\n    }\n  }\n\n  onLogRowHover = (row?: LogRowModel) => {\n    if (!row) {\n      this.props.eventBus.publish(new DataHoverClearEvent());\n    } else {\n      this.props.eventBus.publish(\n        new DataHoverEvent({\n          point: {\n            time: row.timeEpochMs,\n          },\n        })\n      );\n    }\n  };\n\n  onChangeLogsSortOrder = () => {\n    this.setState({ isFlipping: true });\n    // we are using setTimeout here to make sure that disabled button is rendered before the rendering of reordered logs\n    this.flipOrderTimer = window.setTimeout(() => {\n      this.setState((prevState) => {\n        const newSortOrder =\n          prevState.logsSortOrder === LogsSortOrder.Descending ? LogsSortOrder.Ascending : LogsSortOrder.Descending;\n        store.set(SETTINGS_KEYS.logsSortOrder, newSortOrder);\n        return { logsSortOrder: newSortOrder };\n      });\n    }, 0);\n    this.cancelFlippingTimer = window.setTimeout(() => this.setState({ isFlipping: false }), 1000);\n  };\n\n  onEscapeNewlines = () => {\n    this.setState((prevState) => ({\n      forceEscape: !prevState.forceEscape,\n    }));\n  };\n\n  onChangeDedup = (dedupStrategy: LogsDedupStrategy) => {\n    reportInteraction('grafana_explore_logs_deduplication_clicked', {\n      deduplicationType: dedupStrategy,\n      datasourceType: this.props.datasourceType,\n    });\n    this.setState({ dedupStrategy });\n  };\n\n  onChangeLabels = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n    if (target) {\n      const showLabels = target.checked;\n      this.setState({\n        showLabels,\n      });\n      store.set(SETTINGS_KEYS.showLabels, showLabels);\n    }\n  };\n\n  onChangeTime = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n    if (target) {\n      const showTime = target.checked;\n      this.setState({\n        showTime,\n      });\n      store.set(SETTINGS_KEYS.showTime, showTime);\n    }\n  };\n\n  onChangeWrapLogMessage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n    if (target) {\n      const wrapLogMessage = target.checked;\n      this.setState({\n        wrapLogMessage,\n      });\n      store.set(SETTINGS_KEYS.wrapLogMessage, wrapLogMessage);\n    }\n  };\n\n  onChangePrettifyLogMessage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n    if (target) {\n      const prettifyLogMessage = target.checked;\n      this.setState({\n        prettifyLogMessage,\n      });\n      store.set(SETTINGS_KEYS.prettifyLogMessage, prettifyLogMessage);\n    }\n  };\n\n  onToggleLogLevel = (hiddenRawLevels: string[]) => {\n    const hiddenLogLevels = hiddenRawLevels.map((level) => LogLevel[level as LogLevel]);\n    this.setState({ hiddenLogLevels });\n  };\n\n  onToggleLogsVolumeCollapse = (isOpen: boolean) => {\n    this.props.onSetLogsVolumeEnabled(isOpen);\n    reportInteraction('grafana_explore_logs_histogram_toggle_clicked', {\n      datasourceType: this.props.datasourceType,\n      type: isOpen ? 'open' : 'close',\n    });\n  };\n\n  onClickScan = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    if (this.props.onStartScanning) {\n      this.props.onStartScanning();\n    }\n  };\n\n  onClickStopScan = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    if (this.props.onStopScanning) {\n      this.props.onStopScanning();\n    }\n  };\n\n  showDetectedField = (key: string) => {\n    const index = this.state.showDetectedFields.indexOf(key);\n\n    if (index === -1) {\n      this.setState((state) => {\n        return {\n          showDetectedFields: state.showDetectedFields.concat(key),\n        };\n      });\n    }\n  };\n\n  hideDetectedField = (key: string) => {\n    const index = this.state.showDetectedFields.indexOf(key);\n    if (index > -1) {\n      this.setState((state) => {\n        return {\n          showDetectedFields: state.showDetectedFields.filter((k) => key !== k),\n        };\n      });\n    }\n  };\n\n  clearDetectedFields = () => {\n    this.setState((state) => {\n      return {\n        showDetectedFields: [],\n      };\n    });\n  };\n\n  checkUnescapedContent = memoizeOne((logRows: LogRowModel[]) => {\n    return !!logRows.some((r) => r.hasUnescapedContent);\n  });\n\n  dedupRows = memoizeOne((logRows: LogRowModel[], dedupStrategy: LogsDedupStrategy) => {\n    const dedupedRows = dedupLogRows(logRows, dedupStrategy);\n    const dedupCount = dedupedRows.reduce((sum, row) => (row.duplicates ? sum + row.duplicates : sum), 0);\n    return { dedupedRows, dedupCount };\n  });\n\n  filterRows = memoizeOne((logRows: LogRowModel[], hiddenLogLevels: LogLevel[]) => {\n    return filterLogLevels(logRows, new Set(hiddenLogLevels));\n  });\n\n  createNavigationRange = memoizeOne((logRows: LogRowModel[]): { from: number; to: number } | undefined => {\n    if (!logRows || logRows.length === 0) {\n      return undefined;\n    }\n    const firstTimeStamp = logRows[0].timeEpochMs;\n    const lastTimeStamp = logRows[logRows.length - 1].timeEpochMs;\n\n    if (lastTimeStamp < firstTimeStamp) {\n      return { from: lastTimeStamp, to: firstTimeStamp };\n    }\n\n    return { from: firstTimeStamp, to: lastTimeStamp };\n  });\n\n  scrollToTopLogs = () => this.topLogsRef.current?.scrollIntoView();\n\n  render() {\n    const {\n      width,\n      splitOpen,\n      logRows,\n      logsMeta,\n      logsSeries,\n      visibleRange,\n      logsVolumeEnabled,\n      logsVolumeData,\n      loadLogsVolumeData,\n      loading = false,\n      loadingState,\n      onClickFilterLabel,\n      onClickFilterOutLabel,\n      timeZone,\n      scanning,\n      scanRange,\n      showContextToggle,\n      absoluteRange,\n      onChangeTime,\n      getFieldLinks,\n      theme,\n      logsQueries,\n      clearCache,\n      addResultsToCache,\n      exploreId,\n      scrollElement,\n    } = this.props;\n\n    const {\n      showLabels,\n      showTime,\n      wrapLogMessage,\n      prettifyLogMessage,\n      dedupStrategy,\n      hiddenLogLevels,\n      logsSortOrder,\n      isFlipping,\n      showDetectedFields,\n      forceEscape,\n    } = this.state;\n\n    const styles = getStyles(theme, wrapLogMessage);\n    const hasData = logRows && logRows.length > 0;\n    const hasUnescapedContent = this.checkUnescapedContent(logRows);\n\n    const filteredLogs = this.filterRows(logRows, hiddenLogLevels);\n    const { dedupedRows, dedupCount } = this.dedupRows(filteredLogs, dedupStrategy);\n    const navigationRange = this.createNavigationRange(logRows);\n\n    const scanText = scanRange ? `Scanning ${rangeUtil.describeTimeRange(scanRange)}` : 'Scanning...';\n\n    return (\n      <>\n        <Collapse label=\"Logs volume\" collapsible isOpen={logsVolumeEnabled} onToggle={this.onToggleLogsVolumeCollapse}>\n          {logsVolumeEnabled && (\n            <LogsVolumePanel\n              absoluteRange={absoluteRange}\n              width={width}\n              logsVolumeData={logsVolumeData}\n              logLinesBasedData={\n                logsSeries\n                  ? {\n                      data: logsSeries,\n                      state: loadingState,\n                    }\n                  : undefined\n              }\n              logLinesBasedDataVisibleRange={visibleRange}\n              onUpdateTimeRange={onChangeTime}\n              timeZone={timeZone}\n              splitOpen={splitOpen}\n              onLoadLogsVolume={() => loadLogsVolumeData(exploreId)}\n              onHiddenSeriesChanged={this.onToggleLogLevel}\n              eventBus={this.logsVolumeEventBus}\n            />\n          )}\n        </Collapse>\n        <Collapse label=\"Logs\" loading={loading} isOpen className={styleOverridesForStickyNavigation}>\n          <div className={styles.logOptions} ref={this.topLogsRef}>\n            <InlineFieldRow>\n              <InlineField label=\"Time\" className={styles.horizontalInlineLabel} transparent>\n                <InlineSwitch\n                  value={showTime}\n                  onChange={this.onChangeTime}\n                  className={styles.horizontalInlineSwitch}\n                  transparent\n                  id={`show-time_${exploreId}`}\n                />\n              </InlineField>\n              <InlineField label=\"Unique labels\" className={styles.horizontalInlineLabel} transparent>\n                <InlineSwitch\n                  value={showLabels}\n                  onChange={this.onChangeLabels}\n                  className={styles.horizontalInlineSwitch}\n                  transparent\n                  id={`unique-labels_${exploreId}`}\n                />\n              </InlineField>\n              <InlineField label=\"Wrap lines\" className={styles.horizontalInlineLabel} transparent>\n                <InlineSwitch\n                  value={wrapLogMessage}\n                  onChange={this.onChangeWrapLogMessage}\n                  className={styles.horizontalInlineSwitch}\n                  transparent\n                  id={`wrap-lines_${exploreId}`}\n                />\n              </InlineField>\n              <InlineField label=\"Prettify JSON\" className={styles.horizontalInlineLabel} transparent>\n                <InlineSwitch\n                  value={prettifyLogMessage}\n                  onChange={this.onChangePrettifyLogMessage}\n                  className={styles.horizontalInlineSwitch}\n                  transparent\n                  id={`prettify_${exploreId}`}\n                />\n              </InlineField>\n              <InlineField label=\"Dedup\" className={styles.horizontalInlineLabel} transparent>\n                <RadioButtonGroup\n                  options={Object.values(LogsDedupStrategy).map((dedupType) => ({\n                    label: capitalize(dedupType),\n                    value: dedupType,\n                    description: LogsDedupDescription[dedupType],\n                  }))}\n                  value={dedupStrategy}\n                  onChange={this.onChangeDedup}\n                  className={styles.radioButtons}\n                />\n              </InlineField>\n            </InlineFieldRow>\n            <div>\n              <InlineField label=\"Display results\" className={styles.horizontalInlineLabel} transparent>\n                <RadioButtonGroup\n                  disabled={isFlipping}\n                  options={[\n                    {\n                      label: 'Newest first',\n                      value: LogsSortOrder.Descending,\n                      description: 'Show results newest to oldest',\n                    },\n                    {\n                      label: 'Oldest first',\n                      value: LogsSortOrder.Ascending,\n                      description: 'Show results oldest to newest',\n                    },\n                  ]}\n                  value={logsSortOrder}\n                  onChange={this.onChangeLogsSortOrder}\n                  className={styles.radioButtons}\n                />\n              </InlineField>\n            </div>\n          </div>\n          <LogsMetaRow\n            logRows={logRows}\n            meta={logsMeta || []}\n            dedupStrategy={dedupStrategy}\n            dedupCount={dedupCount}\n            hasUnescapedContent={hasUnescapedContent}\n            forceEscape={forceEscape}\n            showDetectedFields={showDetectedFields}\n            onEscapeNewlines={this.onEscapeNewlines}\n            clearDetectedFields={this.clearDetectedFields}\n          />\n          <div className={styles.logsSection}>\n            <div className={styles.logRows} data-testid=\"logRows\">\n              <LogRows\n                logRows={logRows}\n                deduplicatedRows={dedupedRows}\n                dedupStrategy={dedupStrategy}\n                getRowContext={this.props.getRowContext}\n                onClickFilterLabel={onClickFilterLabel}\n                onClickFilterOutLabel={onClickFilterOutLabel}\n                showContextToggle={showContextToggle}\n                showLabels={showLabels}\n                showTime={showTime}\n                enableLogDetails={true}\n                forceEscape={forceEscape}\n                wrapLogMessage={wrapLogMessage}\n                prettifyLogMessage={prettifyLogMessage}\n                timeZone={timeZone}\n                getFieldLinks={getFieldLinks}\n                logsSortOrder={logsSortOrder}\n                showDetectedFields={showDetectedFields}\n                onClickShowDetectedField={this.showDetectedField}\n                onClickHideDetectedField={this.hideDetectedField}\n                app={CoreApp.Explore}\n                scrollElement={scrollElement}\n                onLogRowHover={this.onLogRowHover}\n              />\n            </div>\n            <LogsNavigation\n              logsSortOrder={logsSortOrder}\n              visibleRange={navigationRange ?? absoluteRange}\n              absoluteRange={absoluteRange}\n              timeZone={timeZone}\n              onChangeTime={onChangeTime}\n              loading={loading}\n              queries={logsQueries ?? []}\n              scrollToTopLogs={this.scrollToTopLogs}\n              addResultsToCache={addResultsToCache}\n              clearCache={clearCache}\n            />\n          </div>\n          {!loading && !hasData && !scanning && (\n            <div className={styles.noData}>\n              No logs found.\n              <Button size=\"xs\" fill=\"text\" onClick={this.onClickScan}>\n                Scan for older logs\n              </Button>\n            </div>\n          )}\n          {scanning && (\n            <div className={styles.noData}>\n              <span>{scanText}</span>\n              <Button size=\"xs\" fill=\"text\" onClick={this.onClickStopScan}>\n                Stop scan\n              </Button>\n            </div>\n          )}\n        </Collapse>\n      </>\n    );\n  }\n}\n\nexport const Logs = withTheme2(UnthemedLogs);\n\nconst getStyles = (theme: GrafanaTheme2, wrapLogMessage: boolean) => {\n  return {\n    noData: css`\n      > * {\n        margin-left: 0.5em;\n      }\n    `,\n    logOptions: css`\n      display: flex;\n      justify-content: space-between;\n      align-items: baseline;\n      flex-wrap: wrap;\n      background-color: ${theme.colors.background.primary};\n      padding: ${theme.spacing(1, 2)};\n      border-radius: ${theme.shape.borderRadius()};\n      margin: ${theme.spacing(0, 0, 1)};\n      border: 1px solid ${theme.colors.border.medium};\n    `,\n    headerButton: css`\n      margin: ${theme.spacing(0.5, 0, 0, 1)};\n    `,\n    horizontalInlineLabel: css`\n      > label {\n        margin-right: 0;\n      }\n    `,\n    horizontalInlineSwitch: css`\n      padding: 0 ${theme.spacing(1)} 0 0;\n    `,\n    radioButtons: css`\n      margin: 0;\n    `,\n    logsSection: css`\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n    `,\n    logRows: css`\n      overflow-x: ${wrapLogMessage ? 'unset' : 'scroll'};\n      overflow-y: visible;\n      width: 100%;\n    `,\n  };\n};\n","import { css } from '@emotion/css';\nimport memoizeOne from 'memoize-one';\nimport React from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nconst transitionDuration = 500;\n// We add a bit of delay to the transition as another perf optimisation. As at the start we need to render\n// quite a bit of new rows, if we start transition at the same time there can be frame rate drop. This gives time\n// for react to first render them and then do the animation.\nconst transitionDelay = 100;\n\nconst getStyles = memoizeOne(() => {\n  return {\n    logsEnter: css`\n      label: logsEnter;\n      position: absolute;\n      opacity: 0;\n      height: auto;\n      width: 100%;\n    `,\n    logsEnterActive: css`\n      label: logsEnterActive;\n      opacity: 1;\n      transition: opacity ${transitionDuration}ms ease-out ${transitionDelay}ms;\n    `,\n    logsExit: css`\n      label: logsExit;\n      position: absolute;\n      opacity: 1;\n      height: auto;\n      width: 100%;\n    `,\n    logsExitActive: css`\n      label: logsExitActive;\n      opacity: 0;\n      transition: opacity ${transitionDuration}ms ease-out ${transitionDelay}ms;\n    `,\n  };\n});\n\ntype Props = {\n  children: React.ReactNode;\n  visible: boolean;\n};\n\n/**\n * Cross fade transition component that is tied a bit too much to the logs containers so not very useful elsewhere\n * right now.\n */\nexport function LogsCrossFadeTransition(props: Props) {\n  const { visible, children } = props;\n  const styles = getStyles();\n  return (\n    <CSSTransition\n      in={visible}\n      mountOnEnter={true}\n      unmountOnExit={true}\n      timeout={transitionDuration + transitionDelay}\n      classNames={{\n        enter: styles.logsEnter,\n        enterActive: styles.logsEnterActive,\n        exit: styles.logsExit,\n        exitActive: styles.logsExitActive,\n      }}\n    >\n      {children}\n    </CSSTransition>\n  );\n}\n","import React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport {\n  AbsoluteTimeRange,\n  Field,\n  hasLogsContextSupport,\n  LoadingState,\n  LogRowModel,\n  RawTimeRange,\n  EventBus,\n  SplitOpen,\n  DataFrame,\n} from '@grafana/data';\nimport { Collapse } from '@grafana/ui';\nimport { StoreState } from 'app/types';\nimport { ExploreId, ExploreItemState } from 'app/types/explore';\n\nimport { getTimeZone } from '../profile/state/selectors';\n\nimport { LiveLogsWithTheme } from './LiveLogs';\nimport { Logs } from './Logs';\nimport { addResultsToCache, clearCache, loadLogsVolumeData, setLogsVolumeEnabled } from './state/query';\nimport { updateTimeRange } from './state/time';\nimport { LiveTailControls } from './useLiveTailControls';\nimport { LogsCrossFadeTransition } from './utils/LogsCrossFadeTransition';\nimport { getFieldLinksForExplore } from './utils/links';\n\ninterface LogsContainerProps extends PropsFromRedux {\n  width: number;\n  exploreId: ExploreId;\n  scanRange?: RawTimeRange;\n  syncedTimes: boolean;\n  loadingState: LoadingState;\n  scrollElement?: HTMLDivElement;\n  onClickFilterLabel?: (key: string, value: string) => void;\n  onClickFilterOutLabel?: (key: string, value: string) => void;\n  onStartScanning: () => void;\n  onStopScanning: () => void;\n  eventBus: EventBus;\n  splitOpenFn: SplitOpen;\n}\n\nclass LogsContainer extends PureComponent<LogsContainerProps> {\n  onChangeTime = (absoluteRange: AbsoluteTimeRange) => {\n    const { exploreId, updateTimeRange } = this.props;\n    updateTimeRange({ exploreId, absoluteRange });\n  };\n\n  getLogRowContext = async (row: LogRowModel, options?: any): Promise<any> => {\n    const { datasourceInstance, logsQueries } = this.props;\n\n    if (hasLogsContextSupport(datasourceInstance)) {\n      // we need to find the query, and we need to be very sure that\n      // it's a query from this datasource\n      const query = (logsQueries ?? []).find(\n        (q) => q.refId === row.dataFrame.refId && q.datasource != null && q.datasource.type === datasourceInstance.type\n      );\n      return datasourceInstance.getLogRowContext(row, options, query);\n    }\n\n    return [];\n  };\n\n  showContextToggle = (row?: LogRowModel): boolean => {\n    const { datasourceInstance } = this.props;\n\n    if (hasLogsContextSupport(datasourceInstance)) {\n      return datasourceInstance.showContextToggle(row);\n    }\n\n    return false;\n  };\n\n  getFieldLinks = (field: Field, rowIndex: number, dataFrame: DataFrame) => {\n    const { splitOpenFn, range } = this.props;\n    return getFieldLinksForExplore({ field, rowIndex, splitOpenFn, range, dataFrame });\n  };\n\n  render() {\n    const {\n      loading,\n      loadingState,\n      logRows,\n      logsMeta,\n      logsSeries,\n      logsQueries,\n      logsVolumeData,\n      loadLogsVolumeData,\n      onClickFilterLabel,\n      onClickFilterOutLabel,\n      onStartScanning,\n      onStopScanning,\n      absoluteRange,\n      timeZone,\n      visibleRange,\n      scanning,\n      range,\n      width,\n      splitOpenFn,\n      isLive,\n      exploreId,\n      addResultsToCache,\n      clearCache,\n      scrollElement,\n    } = this.props;\n\n    if (!logRows) {\n      return null;\n    }\n\n    return (\n      <>\n        <LogsCrossFadeTransition visible={isLive}>\n          <Collapse label=\"Logs\" loading={false} isOpen>\n            <LiveTailControls exploreId={exploreId}>\n              {(controls) => (\n                <LiveLogsWithTheme\n                  logRows={logRows}\n                  timeZone={timeZone}\n                  stopLive={controls.stop}\n                  isPaused={this.props.isPaused}\n                  onPause={controls.pause}\n                  onResume={controls.resume}\n                />\n              )}\n            </LiveTailControls>\n          </Collapse>\n        </LogsCrossFadeTransition>\n        <LogsCrossFadeTransition visible={!isLive}>\n          <Logs\n            exploreId={exploreId}\n            datasourceType={this.props.datasourceInstance?.type}\n            logRows={logRows}\n            logsMeta={logsMeta}\n            logsSeries={logsSeries}\n            logsVolumeEnabled={this.props.logsVolumeEnabled}\n            onSetLogsVolumeEnabled={(enabled) => this.props.setLogsVolumeEnabled(exploreId, enabled)}\n            logsVolumeData={logsVolumeData}\n            logsQueries={logsQueries}\n            width={width}\n            splitOpen={splitOpenFn}\n            loading={loading}\n            loadingState={loadingState}\n            loadLogsVolumeData={loadLogsVolumeData}\n            onChangeTime={this.onChangeTime}\n            onClickFilterLabel={onClickFilterLabel}\n            onClickFilterOutLabel={onClickFilterOutLabel}\n            onStartScanning={onStartScanning}\n            onStopScanning={onStopScanning}\n            absoluteRange={absoluteRange}\n            visibleRange={visibleRange}\n            timeZone={timeZone}\n            scanning={scanning}\n            scanRange={range.raw}\n            showContextToggle={this.showContextToggle}\n            getRowContext={this.getLogRowContext}\n            getFieldLinks={this.getFieldLinks}\n            addResultsToCache={() => addResultsToCache(exploreId)}\n            clearCache={() => clearCache(exploreId)}\n            scrollElement={scrollElement}\n            eventBus={this.props.eventBus}\n          />\n        </LogsCrossFadeTransition>\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: string }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const {\n    logsResult,\n    loading,\n    scanning,\n    datasourceInstance,\n    isLive,\n    isPaused,\n    range,\n    absoluteRange,\n    logsVolumeEnabled,\n    logsVolumeDataProvider,\n    logsVolumeData,\n  } = item;\n  const timeZone = getTimeZone(state.user);\n\n  return {\n    loading,\n    logRows: logsResult?.rows,\n    logsMeta: logsResult?.meta,\n    logsSeries: logsResult?.series,\n    logsQueries: logsResult?.queries,\n    visibleRange: logsResult?.visibleRange,\n    scanning,\n    timeZone,\n    datasourceInstance,\n    isLive,\n    isPaused,\n    range,\n    absoluteRange,\n    logsVolumeEnabled,\n    logsVolumeDataProvider,\n    logsVolumeData,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateTimeRange,\n  addResultsToCache,\n  clearCache,\n  loadLogsVolumeData,\n  setLogsVolumeEnabled,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(LogsContainer);\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data/src';\nimport { useStyles2, PanelContainer } from '@grafana/ui';\n\nexport const NoData = () => {\n  const css = useStyles2(getStyles);\n  return (\n    <>\n      <PanelContainer data-testid=\"explore-no-data\" className={css.wrapper}>\n        <span className={css.message}>{'No data'}</span>\n      </PanelContainer>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css`\n    label: no-data-card;\n    padding: ${theme.spacing(3)};\n    background: ${theme.colors.background.primary};\n    border-radius: ${theme.shape.borderRadius(2)};\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    flex-grow: 1;\n  `,\n  message: css`\n    font-size: ${theme.typography.h2.fontSize};\n    padding: ${theme.spacing(4)};\n    color: ${theme.colors.text.disabled};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { LinkButton, CallToActionCard, Icon, useTheme2 } from '@grafana/ui';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types';\n\nexport const NoDataSourceCallToAction = () => {\n  const theme = useTheme2();\n\n  const canCreateDataSource =\n    contextSrv.hasPermission(AccessControlAction.DataSourcesCreate) &&\n    contextSrv.hasPermission(AccessControlAction.DataSourcesWrite);\n\n  const message =\n    'Explore requires at least one data source. Once you have added a data source, you can query it here.';\n  const footer = (\n    <>\n      <Icon name=\"rocket\" />\n      <> ProTip: You can also define data sources through configuration files. </>\n      <a\n        href=\"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=explore\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className=\"text-link\"\n      >\n        Learn more\n      </a>\n    </>\n  );\n\n  const ctaElement = (\n    <LinkButton size=\"lg\" href=\"datasources/new\" icon=\"database\" disabled={!canCreateDataSource}>\n      Add data source\n    </LinkButton>\n  );\n\n  const cardClassName = css`\n    max-width: ${theme.breakpoints.values.lg}px;\n    margin-top: ${theme.spacing(2)};\n    align-self: center;\n  `;\n\n  return (\n    <CallToActionCard callToActionElement={ctaElement} className={cardClassName} footer={footer} message={message} />\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport { useToggle, useWindowSize } from 'react-use';\n\nimport { applyFieldOverrides, DataFrame, GrafanaTheme2, SplitOpen } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Badge, Collapse, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport { NodeGraph } from '../../plugins/panel/nodeGraph';\nimport { useCategorizeFrames } from '../../plugins/panel/nodeGraph/useCategorizeFrames';\nimport { ExploreId, StoreState } from '../../types';\n\nimport { useLinks } from './utils/links';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  warningText: css`\n    label: warningText;\n    font-size: ${theme.typography.bodySmall.fontSize};\n    color: ${theme.colors.text.secondary};\n  `,\n});\n\ninterface OwnProps {\n  // Edges and Nodes are separate frames\n  dataFrames: DataFrame[];\n  exploreId: ExploreId;\n  // When showing the node graph together with trace view we do some changes so it works better.\n  withTraceView?: boolean;\n  datasourceType: string;\n  splitOpenFn: SplitOpen;\n}\n\ntype Props = OwnProps & ConnectedProps<typeof connector>;\n\nexport function UnconnectedNodeGraphContainer(props: Props) {\n  const { dataFrames, range, splitOpenFn, withTraceView, datasourceType } = props;\n  const getLinks = useLinks(range, splitOpenFn);\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n\n  // This is implicit dependency that is needed for links to work. At some point when replacing variables in the link\n  // it requires field to have a display property which is added by the overrides even though we don't add any field\n  // overrides in explore.\n  const frames = applyFieldOverrides({\n    fieldConfig: {\n      defaults: {},\n      overrides: [],\n    },\n    data: dataFrames,\n    // We don't need proper replace here as it is only used in getLinks and we use getFieldLinks\n    replaceVariables: (value) => value,\n    theme,\n  });\n\n  const { nodes } = useCategorizeFrames(frames);\n  const [open, toggleOpen] = useToggle(false);\n  const toggled = () => {\n    toggleOpen();\n    reportInteraction('grafana_traces_node_graph_panel_clicked', {\n      datasourceType: datasourceType,\n      expanded: !open,\n    });\n  };\n\n  // Calculate node graph height based on window and top position, with some padding\n  const { height: windowHeight } = useWindowSize();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [top, setTop] = useState(250);\n  useEffect(() => {\n    if (containerRef.current) {\n      const { top } = containerRef.current.getBoundingClientRect();\n      setTop(top);\n    }\n  }, [containerRef]);\n  const height = windowHeight - top - 32;\n\n  const countWarning =\n    withTraceView && nodes[0]?.length > 1000 ? (\n      <span className={styles.warningText}> ({nodes[0].length} nodes, can be slow to load)</span>\n    ) : null;\n\n  return (\n    <Collapse\n      label={\n        <span>\n          Node graph{countWarning}{' '}\n          <Badge text={'Beta'} color={'blue'} icon={'rocket'} tooltip={'This visualization is in beta'} />\n        </span>\n      }\n      collapsible={withTraceView}\n      // We allow collapsing this only when it is shown together with trace view.\n      isOpen={withTraceView ? open : true}\n      onToggle={withTraceView ? () => toggled() : undefined}\n    >\n      <div\n        ref={containerRef}\n        style={\n          withTraceView\n            ? { height: 500 }\n            : {\n                minHeight: 600,\n                height,\n              }\n        }\n      >\n        <NodeGraph dataFrames={frames} getLinks={getLinks} />\n      </div>\n    </Collapse>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: OwnProps) {\n  return {\n    range: state.explore[exploreId]!.range,\n  };\n}\n\nconst connector = connect(mapStateToProps, {});\nexport const NodeGraphContainer = connector(UnconnectedNodeGraphContainer);\n","import { createSelector } from '@reduxjs/toolkit';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { CoreApp, DataQuery, DataSourceInstanceSettings } from '@grafana/data';\nimport { getDataSourceSrv, reportInteraction } from '@grafana/runtime';\nimport { getNextRefIdChar } from 'app/core/utils/query';\nimport { useDispatch, useSelector } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\nimport { getDatasourceSrv } from '../plugins/datasource_srv';\nimport { QueryEditorRows } from '../query/components/QueryEditorRows';\n\nimport { runQueries, changeQueriesAction, importQueries } from './state/query';\nimport { getExploreItemSelector } from './state/selectors';\n\ninterface Props {\n  exploreId: ExploreId;\n}\n\nconst makeSelectors = (exploreId: ExploreId) => {\n  const exploreItemSelector = getExploreItemSelector(exploreId);\n  return {\n    getQueries: createSelector(exploreItemSelector, (s) => s!.queries),\n    getQueryResponse: createSelector(exploreItemSelector, (s) => s!.queryResponse),\n    getHistory: createSelector(exploreItemSelector, (s) => s!.history),\n    getEventBridge: createSelector(exploreItemSelector, (s) => s!.eventBridge),\n    getDatasourceInstanceSettings: createSelector(\n      exploreItemSelector,\n      (s) => getDatasourceSrv().getInstanceSettings(s!.datasourceInstance?.uid)!\n    ),\n  };\n};\n\nexport const QueryRows = ({ exploreId }: Props) => {\n  const dispatch = useDispatch();\n  const { getQueries, getDatasourceInstanceSettings, getQueryResponse, getHistory, getEventBridge } = useMemo(\n    () => makeSelectors(exploreId),\n    [exploreId]\n  );\n\n  const queries = useSelector(getQueries)!;\n  const dsSettings = useSelector(getDatasourceInstanceSettings)!;\n  const queryResponse = useSelector(getQueryResponse)!;\n  const history = useSelector(getHistory);\n  const eventBridge = useSelector(getEventBridge);\n\n  const onRunQueries = useCallback(() => {\n    dispatch(runQueries(exploreId));\n  }, [dispatch, exploreId]);\n\n  const onChange = useCallback(\n    (newQueries: DataQuery[]) => {\n      dispatch(changeQueriesAction({ queries: newQueries, exploreId }));\n\n      // if we are removing a query we want to run the remaining ones\n      if (newQueries.length < queries.length) {\n        onRunQueries();\n      }\n    },\n    [dispatch, exploreId, onRunQueries, queries]\n  );\n\n  const onAddQuery = useCallback(\n    (query: DataQuery) => {\n      onChange([...queries, { ...query, refId: getNextRefIdChar(queries) }]);\n    },\n    [onChange, queries]\n  );\n\n  const onMixedDataSourceChange = async (ds: DataSourceInstanceSettings, query: DataQuery) => {\n    const queryDatasource = await getDataSourceSrv().get(query.datasource);\n    const targetDS = await getDataSourceSrv().get({ uid: ds.uid });\n    dispatch(importQueries(exploreId, queries, queryDatasource, targetDS, query.refId));\n  };\n\n  const onQueryCopied = () => {\n    reportInteraction('grafana_explore_query_row_copy');\n  };\n\n  const onQueryRemoved = () => {\n    reportInteraction('grafana_explore_query_row_remove');\n  };\n\n  const onQueryToggled = (queryStatus?: boolean) => {\n    reportInteraction('grafana_query_row_toggle', queryStatus === undefined ? {} : { queryEnabled: queryStatus });\n  };\n\n  return (\n    <QueryEditorRows\n      dsSettings={dsSettings}\n      onDatasourceChange={(ds: DataSourceInstanceSettings, query: DataQuery) => onMixedDataSourceChange(ds, query)}\n      queries={queries}\n      onQueriesChange={onChange}\n      onAddQuery={onAddQuery}\n      onRunQueries={onRunQueries}\n      onQueryCopied={onQueryCopied}\n      onQueryRemoved={onQueryRemoved}\n      onQueryToggled={onQueryToggled}\n      data={queryResponse}\n      app={CoreApp.Explore}\n      history={history}\n      eventBus={eventBridge}\n    />\n  );\n};\n","import React, { FC, CSSProperties } from 'react';\nimport Transition, { ExitHandler } from 'react-transition-group/Transition';\n\ninterface Props {\n  duration: number;\n  children: JSX.Element;\n  in: boolean;\n  unmountOnExit?: boolean;\n  onExited?: ExitHandler<HTMLDivElement>;\n}\n\nexport const FadeIn: FC<Props> = (props) => {\n  const defaultStyle: CSSProperties = {\n    transition: `opacity ${props.duration}ms linear`,\n    opacity: 0,\n  };\n\n  const transitionStyles: { [str: string]: CSSProperties } = {\n    exited: { opacity: 0, display: 'none' },\n    entering: { opacity: 0 },\n    entered: { opacity: 1 },\n    exiting: { opacity: 0 },\n  };\n\n  return (\n    <Transition\n      in={props.in}\n      timeout={props.duration}\n      unmountOnExit={props.unmountOnExit || false}\n      onExited={props.onExited}\n    >\n      {(state) => (\n        <div\n          style={{\n            ...defaultStyle,\n            ...transitionStyles[state],\n          }}\n        >\n          {props.children}\n        </div>\n      )}\n    </Transition>\n  );\n};\n","import React, { FunctionComponent } from 'react';\n\nimport { DataQueryError } from '@grafana/data';\nimport { Alert } from '@grafana/ui';\nimport { FadeIn } from 'app/core/components/Animations/FadeIn';\n\nexport interface ErrorContainerProps {\n  queryError?: DataQueryError;\n}\n\nexport const ErrorContainer: FunctionComponent<ErrorContainerProps> = (props) => {\n  const { queryError } = props;\n  const showError = queryError ? true : false;\n  const duration = showError ? 100 : 10;\n  const title = queryError ? 'Query error' : 'Unknown error';\n  const message = queryError?.message || queryError?.data?.message || null;\n\n  return (\n    <FadeIn in={showError} duration={duration}>\n      <Alert severity=\"error\" title={title} topSpacing={2}>\n        {message}\n      </Alert>\n    </FadeIn>\n  );\n};\n","import React from 'react';\n\nimport { LoadingState } from '@grafana/data';\nimport { useSelector } from 'app/types';\n\nimport { ExploreId } from '../../types';\n\nimport { ErrorContainer } from './ErrorContainer';\n\ninterface Props {\n  exploreId: ExploreId;\n}\nexport function ResponseErrorContainer(props: Props) {\n  const queryResponse = useSelector((state) => state.explore[props.exploreId]?.queryResponse);\n  const queryError = queryResponse?.state === LoadingState.Error ? queryResponse?.error : undefined;\n\n  // Errors with ref ids are shown below the corresponding query\n  if (queryError?.refId) {\n    return null;\n  }\n\n  return <ErrorContainer queryError={queryError} />;\n}\n","import { css, cx } from '@emotion/css';\nimport React, { useState, useEffect } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { DataSourceApi, DataQuery, GrafanaTheme2 } from '@grafana/data';\nimport { config, getDataSourceSrv, reportInteraction } from '@grafana/runtime';\nimport { TextArea, Button, IconButton, useStyles2 } from '@grafana/ui';\nimport { notifyApp } from 'app/core/actions';\nimport appEvents from 'app/core/app_events';\nimport { createSuccessNotification } from 'app/core/copy/appNotification';\nimport { copyStringToClipboard } from 'app/core/utils/explore';\nimport { createUrlFromRichHistory, createQueryText } from 'app/core/utils/richHistory';\nimport { createAndCopyShortLink } from 'app/core/utils/shortLinks';\nimport { dispatch } from 'app/store/store';\nimport { StoreState } from 'app/types';\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\n\nimport { ShowConfirmModalEvent } from '../../../types/events';\nimport { changeDatasource } from '../state/datasource';\nimport { starHistoryItem, commentHistoryItem, deleteHistoryItem } from '../state/history';\nimport { setQueries } from '../state/query';\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  const { datasourceInstance } = explore[exploreId]!;\n  return {\n    exploreId,\n    datasourceInstance,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeDatasource,\n  deleteHistoryItem,\n  commentHistoryItem,\n  starHistoryItem,\n  setQueries,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ninterface OwnProps<T extends DataQuery = DataQuery> {\n  query: RichHistoryQuery<T>;\n  dsImg: string;\n  isRemoved: boolean;\n}\n\nexport type Props<T extends DataQuery = DataQuery> = ConnectedProps<typeof connector> & OwnProps<T>;\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  /* Hard-coded value so all buttons and icons on right side of card are aligned */\n  const rightColumnWidth = '240px';\n  const rightColumnContentWidth = '170px';\n\n  /* If datasource was removed, card will have inactive color */\n  const cardColor = theme.colors.background.secondary;\n\n  return {\n    queryCard: css`\n      display: flex;\n      flex-direction: column;\n      border: 1px solid ${theme.colors.border.weak};\n      margin: ${theme.spacing(1)} 0;\n      background-color: ${cardColor};\n      border-radius: ${theme.shape.borderRadius(1)};\n      .starred {\n        color: ${theme.v1.palette.orange};\n      }\n    `,\n    cardRow: css`\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: ${theme.spacing(1)};\n      border-bottom: none;\n      :first-of-type {\n        border-bottom: 1px solid ${theme.colors.border.weak};\n        padding: ${theme.spacing(0.5, 1)};\n      }\n      img {\n        height: ${theme.typography.fontSize}px;\n        max-width: ${theme.typography.fontSize}px;\n        margin-right: ${theme.spacing(1)};\n      }\n    `,\n    datasourceContainer: css`\n      display: flex;\n      align-items: center;\n      font-size: ${theme.typography.bodySmall.fontSize};\n      font-weight: ${theme.typography.fontWeightMedium};\n    `,\n    queryActionButtons: css`\n      max-width: ${rightColumnContentWidth};\n      display: flex;\n      justify-content: flex-end;\n      font-size: ${theme.typography.size.base};\n      button {\n        margin-left: ${theme.spacing(1)};\n      }\n    `,\n    queryContainer: css`\n      font-weight: ${theme.typography.fontWeightMedium};\n      width: calc(100% - ${rightColumnWidth});\n    `,\n    queryRow: css`\n      border-top: 1px solid ${theme.colors.border.weak};\n      word-break: break-all;\n      padding: 4px 2px;\n      :first-child {\n        border-top: none;\n        padding: 0 0 4px 0;\n      }\n    `,\n    updateCommentContainer: css`\n      width: calc(100% + ${rightColumnWidth});\n      margin-top: ${theme.spacing(1)};\n    `,\n    comment: css`\n      overflow-wrap: break-word;\n      font-size: ${theme.typography.bodySmall.fontSize};\n      font-weight: ${theme.typography.fontWeightRegular};\n      margin-top: ${theme.spacing(0.5)};\n    `,\n    commentButtonRow: css`\n      > * {\n        margin-right: ${theme.spacing(1)};\n      }\n    `,\n    textArea: css`\n      width: 100%;\n    `,\n    runButton: css`\n      max-width: ${rightColumnContentWidth};\n      display: flex;\n      justify-content: flex-end;\n      button {\n        height: auto;\n        padding: ${theme.spacing(0.5, 2)};\n        line-height: 1.4;\n        span {\n          white-space: normal !important;\n        }\n      }\n    `,\n  };\n};\n\nexport function RichHistoryCard(props: Props) {\n  const {\n    query,\n    dsImg,\n    isRemoved,\n    commentHistoryItem,\n    starHistoryItem,\n    deleteHistoryItem,\n    changeDatasource,\n    exploreId,\n    datasourceInstance,\n    setQueries,\n  } = props;\n  const [activeUpdateComment, setActiveUpdateComment] = useState(false);\n  const [comment, setComment] = useState<string | undefined>(query.comment);\n  const [queryDsInstance, setQueryDsInstance] = useState<DataSourceApi | undefined>(undefined);\n\n  useEffect(() => {\n    const getQueryDsInstance = async () => {\n      const ds = await getDataSourceSrv().get(query.datasourceUid);\n      setQueryDsInstance(ds);\n    };\n\n    getQueryDsInstance();\n  }, [query.datasourceUid]);\n\n  const styles = useStyles2(getStyles);\n\n  const onRunQuery = async () => {\n    const queriesToRun = query.queries;\n    const differentDataSource = query.datasourceUid !== datasourceInstance?.uid;\n    if (differentDataSource) {\n      await changeDatasource(exploreId, query.datasourceUid, { importQueries: true });\n      setQueries(exploreId, queriesToRun);\n    } else {\n      setQueries(exploreId, queriesToRun);\n    }\n    reportInteraction('grafana_explore_query_history_run', {\n      queryHistoryEnabled: config.queryHistoryEnabled,\n      differentDataSource,\n    });\n  };\n\n  const onCopyQuery = () => {\n    const queriesToCopy = query.queries.map((q) => createQueryText(q, queryDsInstance)).join('\\n');\n    copyStringToClipboard(queriesToCopy);\n    dispatch(notifyApp(createSuccessNotification('Query copied to clipboard')));\n  };\n\n  const onCreateShortLink = async () => {\n    const link = createUrlFromRichHistory(query);\n    await createAndCopyShortLink(link);\n  };\n\n  const onDeleteQuery = () => {\n    const performDelete = (queryId: string) => {\n      deleteHistoryItem(queryId);\n      dispatch(notifyApp(createSuccessNotification('Query deleted')));\n      reportInteraction('grafana_explore_query_history_deleted', {\n        queryHistoryEnabled: config.queryHistoryEnabled,\n      });\n    };\n\n    // For starred queries, we want confirmation. For non-starred, we don't.\n    if (query.starred) {\n      appEvents.publish(\n        new ShowConfirmModalEvent({\n          title: 'Delete',\n          text: 'Are you sure you want to permanently delete your starred query?',\n          yesText: 'Delete',\n          icon: 'trash-alt',\n          onConfirm: () => performDelete(query.id),\n        })\n      );\n    } else {\n      performDelete(query.id);\n    }\n  };\n\n  const onStarrQuery = () => {\n    starHistoryItem(query.id, !query.starred);\n    reportInteraction('grafana_explore_query_history_starred', {\n      queryHistoryEnabled: config.queryHistoryEnabled,\n      newValue: !query.starred,\n    });\n  };\n\n  const toggleActiveUpdateComment = () => setActiveUpdateComment(!activeUpdateComment);\n\n  const onUpdateComment = () => {\n    commentHistoryItem(query.id, comment);\n    setActiveUpdateComment(false);\n    reportInteraction('grafana_explore_query_history_commented', {\n      queryHistoryEnabled: config.queryHistoryEnabled,\n    });\n  };\n\n  const onCancelUpdateComment = () => {\n    setActiveUpdateComment(false);\n    setComment(query.comment);\n  };\n\n  const onKeyDown = (keyEvent: React.KeyboardEvent) => {\n    if (keyEvent.key === 'Enter' && (keyEvent.shiftKey || keyEvent.ctrlKey)) {\n      onUpdateComment();\n    }\n\n    if (keyEvent.key === 'Escape') {\n      onCancelUpdateComment();\n    }\n  };\n\n  const updateComment = (\n    <div className={styles.updateCommentContainer} aria-label={comment ? 'Update comment form' : 'Add comment form'}>\n      <TextArea\n        value={comment}\n        placeholder={comment ? undefined : 'An optional description of what the query does.'}\n        onChange={(e) => setComment(e.currentTarget.value)}\n        className={styles.textArea}\n      />\n      <div className={styles.commentButtonRow}>\n        <Button onClick={onUpdateComment} aria-label=\"Submit button\">\n          Save comment\n        </Button>\n        <Button variant=\"secondary\" onClick={onCancelUpdateComment}>\n          Cancel\n        </Button>\n      </div>\n    </div>\n  );\n\n  const queryActionButtons = (\n    <div className={styles.queryActionButtons}>\n      <IconButton\n        name=\"comment-alt\"\n        onClick={toggleActiveUpdateComment}\n        title={query.comment?.length > 0 ? 'Edit comment' : 'Add comment'}\n      />\n      <IconButton name=\"copy\" onClick={onCopyQuery} title=\"Copy query to clipboard\" />\n      {!isRemoved && (\n        <IconButton name=\"share-alt\" onClick={onCreateShortLink} title=\"Copy shortened link to clipboard\" />\n      )}\n      <IconButton name=\"trash-alt\" title={'Delete query'} onClick={onDeleteQuery} />\n      <IconButton\n        name={query.starred ? 'favorite' : 'star'}\n        iconType={query.starred ? 'mono' : 'default'}\n        onClick={onStarrQuery}\n        title={query.starred ? 'Unstar query' : 'Star query'}\n      />\n    </div>\n  );\n\n  return (\n    <div className={styles.queryCard} onKeyDown={onKeyDown}>\n      <div className={styles.cardRow}>\n        <div className={styles.datasourceContainer}>\n          <img src={dsImg} aria-label=\"Data source icon\" />\n          <div aria-label=\"Data source name\">\n            {isRemoved ? 'Data source does not exist anymore' : query.datasourceName}\n          </div>\n        </div>\n        {queryActionButtons}\n      </div>\n      <div className={cx(styles.cardRow)}>\n        <div className={styles.queryContainer}>\n          {query.queries.map((q, i) => {\n            const queryText = createQueryText(q, queryDsInstance);\n            return (\n              <div aria-label=\"Query text\" key={`${q}-${i}`} className={styles.queryRow}>\n                {queryText}\n              </div>\n            );\n          })}\n          {!activeUpdateComment && query.comment && (\n            <div aria-label=\"Query comment\" className={styles.comment}>\n              {query.comment}\n            </div>\n          )}\n          {activeUpdateComment && updateComment}\n        </div>\n        {!activeUpdateComment && (\n          <div className={styles.runButton}>\n            <Button variant=\"secondary\" onClick={onRunQuery} disabled={isRemoved}>\n              {datasourceInstance?.uid === query.datasourceUid ? 'Run query' : 'Switch data source and run query'}\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default connector(RichHistoryCard);\n","import { css } from '@emotion/css';\nimport React, { useEffect, useCallback } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, FilterInput, MultiSelect, RangeSlider, Select, useStyles2 } from '@grafana/ui';\nimport {\n  createDatasourcesList,\n  mapNumbertoTimeInSlider,\n  mapQueriesToHeadings,\n  SortOrder,\n  RichHistorySearchFilters,\n  RichHistorySettings,\n} from 'app/core/utils/richHistory';\nimport { ExploreId, RichHistoryQuery } from 'app/types/explore';\n\nimport { getSortOrderOptions } from './RichHistory';\nimport RichHistoryCard from './RichHistoryCard';\n\nexport interface Props {\n  queries: RichHistoryQuery[];\n  totalQueries: number;\n  loading: boolean;\n  activeDatasourceInstance: string;\n  updateFilters: (filtersToUpdate?: Partial<RichHistorySearchFilters>) => void;\n  clearRichHistoryResults: () => void;\n  loadMoreRichHistory: () => void;\n  richHistorySettings: RichHistorySettings;\n  richHistorySearchFilters?: RichHistorySearchFilters;\n  exploreId: ExploreId;\n  height: number;\n}\n\nconst getStyles = (theme: GrafanaTheme2, height: number) => {\n  const bgColor = theme.isLight ? theme.v1.palette.gray5 : theme.v1.palette.dark4;\n\n  return {\n    container: css`\n      display: flex;\n    `,\n    labelSlider: css`\n      font-size: ${theme.typography.bodySmall.fontSize};\n      &:last-of-type {\n        margin-top: ${theme.spacing(3)};\n      }\n      &:first-of-type {\n        font-weight: ${theme.typography.fontWeightMedium};\n        margin-bottom: ${theme.spacing(2)};\n      }\n    `,\n    containerContent: css`\n      /* 134px is based on the width of the Query history tabs bar, so the content is aligned to right side of the tab */\n      width: calc(100% - 134px);\n    `,\n    containerSlider: css`\n      width: 129px;\n      margin-right: ${theme.spacing(1)};\n    `,\n    fixedSlider: css`\n      position: fixed;\n    `,\n    slider: css`\n      bottom: 10px;\n      height: ${height - 180}px;\n      width: 129px;\n      padding: ${theme.spacing(1)} 0;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing(1)};\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing(1)};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing(0.25, 0.5, 0.25, 1)};\n        border-radius: ${theme.shape.borderRadius(1)};\n      }\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    sessionName: css`\n      display: flex;\n      align-items: flex-start;\n      justify-content: flex-start;\n      margin-top: ${theme.spacing(3)};\n      h4 {\n        margin: 0 10px 0 0;\n      }\n    `,\n    heading: css`\n      font-size: ${theme.typography.h4.fontSize};\n      margin: ${theme.spacing(2, 0.25, 1, 0.25)};\n    `,\n    footer: css`\n      height: 60px;\n      margin: ${theme.spacing(3)} auto;\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.fontWeightLight};\n      font-size: ${theme.typography.bodySmall.fontSize};\n      a {\n        font-weight: ${theme.typography.fontWeightMedium};\n        margin-left: ${theme.spacing(0.25)};\n      }\n    `,\n    queries: css`\n      font-size: ${theme.typography.bodySmall.fontSize};\n      font-weight: ${theme.typography.fontWeightRegular};\n      margin-left: ${theme.spacing(0.5)};\n    `,\n  };\n};\n\nexport function RichHistoryQueriesTab(props: Props) {\n  const {\n    queries,\n    totalQueries,\n    loading,\n    richHistorySearchFilters,\n    updateFilters,\n    clearRichHistoryResults,\n    loadMoreRichHistory,\n    richHistorySettings,\n    exploreId,\n    height,\n    activeDatasourceInstance,\n  } = props;\n\n  const styles = useStyles2(useCallback((theme: GrafanaTheme2) => getStyles(theme, height), [height]));\n\n  const listOfDatasources = createDatasourcesList();\n\n  useEffect(() => {\n    const datasourceFilters =\n      !richHistorySettings.activeDatasourceOnly && richHistorySettings.lastUsedDatasourceFilters\n        ? richHistorySettings.lastUsedDatasourceFilters\n        : [activeDatasourceInstance];\n    const filters: RichHistorySearchFilters = {\n      search: '',\n      sortOrder: SortOrder.Descending,\n      datasourceFilters,\n      from: 0,\n      to: richHistorySettings.retentionPeriod,\n      starred: false,\n    };\n    updateFilters(filters);\n\n    return () => {\n      clearRichHistoryResults();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!richHistorySearchFilters) {\n    return <span>Loading...</span>;\n  }\n\n  /* mappedQueriesToHeadings is an object where query headings (stringified dates/data sources)\n   * are keys and arrays with queries that belong to that headings are values.\n   */\n  const mappedQueriesToHeadings = mapQueriesToHeadings(queries, richHistorySearchFilters.sortOrder);\n  const sortOrderOptions = getSortOrderOptions();\n  const partialResults = queries.length && queries.length !== totalQueries;\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.containerSlider}>\n        <div className={styles.fixedSlider}>\n          <div className={styles.labelSlider}>Filter history</div>\n          <div className={styles.labelSlider}>{mapNumbertoTimeInSlider(richHistorySearchFilters.from)}</div>\n          <div className={styles.slider}>\n            <RangeSlider\n              tooltipAlwaysVisible={false}\n              min={0}\n              max={richHistorySettings.retentionPeriod}\n              value={[richHistorySearchFilters.from, richHistorySearchFilters.to]}\n              orientation=\"vertical\"\n              formatTooltipResult={mapNumbertoTimeInSlider}\n              reverse={true}\n              onAfterChange={(value) => {\n                updateFilters({ from: value![0], to: value![1] });\n              }}\n            />\n          </div>\n          <div className={styles.labelSlider}>{mapNumbertoTimeInSlider(richHistorySearchFilters.to)}</div>\n        </div>\n      </div>\n\n      <div className={styles.containerContent}>\n        <div className={styles.selectors}>\n          {!richHistorySettings.activeDatasourceOnly && (\n            <MultiSelect\n              className={styles.multiselect}\n              options={listOfDatasources.map((ds) => {\n                return { value: ds.name, label: ds.name };\n              })}\n              value={richHistorySearchFilters.datasourceFilters}\n              placeholder=\"Filter queries for data sources(s)\"\n              aria-label=\"Filter queries for data sources(s)\"\n              onChange={(options: SelectableValue[]) => {\n                updateFilters({ datasourceFilters: options.map((option) => option.value) });\n              }}\n            />\n          )}\n          <div className={styles.filterInput}>\n            <FilterInput\n              placeholder=\"Search queries\"\n              value={richHistorySearchFilters.search}\n              onChange={(search: string) => updateFilters({ search })}\n            />\n          </div>\n          <div aria-label=\"Sort queries\" className={styles.sort}>\n            <Select\n              value={sortOrderOptions.filter((order) => order.value === richHistorySearchFilters.sortOrder)}\n              options={sortOrderOptions}\n              placeholder=\"Sort queries by\"\n              onChange={(e: SelectableValue<SortOrder>) => updateFilters({ sortOrder: e.value })}\n            />\n          </div>\n        </div>\n\n        {loading && <span>Loading results...</span>}\n\n        {!loading &&\n          Object.keys(mappedQueriesToHeadings).map((heading) => {\n            return (\n              <div key={heading}>\n                <div className={styles.heading}>\n                  {heading}{' '}\n                  <span className={styles.queries}>\n                    {partialResults ? 'Displaying ' : ''}\n                    {mappedQueriesToHeadings[heading].length} queries\n                  </span>\n                </div>\n                {mappedQueriesToHeadings[heading].map((q: RichHistoryQuery) => {\n                  const idx = listOfDatasources.findIndex((d) => d.uid === q.datasourceUid);\n                  return (\n                    <RichHistoryCard\n                      query={q}\n                      key={q.id}\n                      exploreId={exploreId}\n                      dsImg={idx === -1 ? 'public/img/icn-datasource.svg' : listOfDatasources[idx].imgUrl}\n                      isRemoved={idx === -1}\n                    />\n                  );\n                })}\n              </div>\n            );\n          })}\n        {partialResults ? (\n          <div>\n            Showing {queries.length} of {totalQueries} <Button onClick={loadMoreRichHistory}>Load more</Button>\n          </div>\n        ) : null}\n        <div className={styles.footer}>\n          {!config.queryHistoryEnabled ? 'The history is local to your browser and is not shared with others.' : ''}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { useStyles2, Select, Button, Field, InlineField, InlineSwitch, Alert } from '@grafana/ui';\nimport { notifyApp } from 'app/core/actions';\nimport appEvents from 'app/core/app_events';\nimport { createSuccessNotification } from 'app/core/copy/appNotification';\nimport { MAX_HISTORY_ITEMS } from 'app/core/history/RichHistoryLocalStorage';\nimport { dispatch } from 'app/store/store';\n\nimport { supportedFeatures } from '../../../core/history/richHistoryStorageProvider';\nimport { ShowConfirmModalEvent } from '../../../types/events';\n\nexport interface RichHistorySettingsProps {\n  retentionPeriod: number;\n  starredTabAsFirstTab: boolean;\n  activeDatasourceOnly: boolean;\n  onChangeRetentionPeriod: (option: SelectableValue<number>) => void;\n  toggleStarredTabAsFirstTab: () => void;\n  toggleactiveDatasourceOnly: () => void;\n  deleteRichHistory: () => void;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      font-size: ${theme.typography.bodySmall.fontSize};\n    `,\n    spaceBetween: css`\n      margin-bottom: ${theme.spacing(3)};\n    `,\n    input: css`\n      max-width: 200px;\n    `,\n    bold: css`\n      font-weight: ${theme.typography.fontWeightBold};\n    `,\n    bottomMargin: css`\n      margin-bottom: ${theme.spacing(1)};\n    `,\n  };\n};\n\nconst retentionPeriodOptions = [\n  { value: 2, label: '2 days' },\n  { value: 5, label: '5 days' },\n  { value: 7, label: '1 week' },\n  { value: 14, label: '2 weeks' },\n];\n\nexport function RichHistorySettingsTab(props: RichHistorySettingsProps) {\n  const {\n    retentionPeriod,\n    starredTabAsFirstTab,\n    activeDatasourceOnly,\n    onChangeRetentionPeriod,\n    toggleStarredTabAsFirstTab,\n    toggleactiveDatasourceOnly,\n    deleteRichHistory,\n  } = props;\n  const styles = useStyles2(getStyles);\n  const selectedOption = retentionPeriodOptions.find((v) => v.value === retentionPeriod);\n\n  const onDelete = () => {\n    appEvents.publish(\n      new ShowConfirmModalEvent({\n        title: 'Delete',\n        text: 'Are you sure you want to permanently delete your query history?',\n        yesText: 'Delete',\n        icon: 'trash-alt',\n        onConfirm: () => {\n          deleteRichHistory();\n          dispatch(notifyApp(createSuccessNotification('Query history deleted')));\n        },\n      })\n    );\n  };\n\n  return (\n    <div className={styles.container}>\n      {supportedFeatures().changeRetention ? (\n        <Field\n          label=\"History time span\"\n          description={`Select the period of time for which Grafana will save your query history. Up to ${MAX_HISTORY_ITEMS} entries will be stored.`}\n        >\n          <div className={styles.input}>\n            <Select value={selectedOption} options={retentionPeriodOptions} onChange={onChangeRetentionPeriod}></Select>\n          </div>\n        </Field>\n      ) : (\n        <Alert severity=\"info\" title=\"History time span\">\n          Grafana will keep entries up to {selectedOption?.label}.\n        </Alert>\n      )}\n      <InlineField\n        label=\"Change the default active tab from Query history to Starred\"\n        className={styles.spaceBetween}\n      >\n        <InlineSwitch\n          id=\"explore-query-history-settings-default-active-tab\"\n          value={starredTabAsFirstTab}\n          onChange={toggleStarredTabAsFirstTab}\n        />\n      </InlineField>\n      {supportedFeatures().onlyActiveDataSource && (\n        <InlineField\n          label=\"Only show queries for data source currently active in Explore\"\n          className={styles.spaceBetween}\n        >\n          <InlineSwitch\n            id=\"explore-query-history-settings-data-source-behavior\"\n            value={activeDatasourceOnly}\n            onChange={toggleactiveDatasourceOnly}\n          />\n        </InlineField>\n      )}\n      {supportedFeatures().clearHistory && (\n        <div>\n          <div className={styles.bold}>Clear query history</div>\n          <div className={styles.bottomMargin}>Delete all of your query history, permanently.</div>\n          <Button variant=\"destructive\" onClick={onDelete}>\n            Clear query history\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { useStyles2, Select, MultiSelect, FilterInput, Button } from '@grafana/ui';\nimport {\n  createDatasourcesList,\n  SortOrder,\n  RichHistorySearchFilters,\n  RichHistorySettings,\n} from 'app/core/utils/richHistory';\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\n\nimport { getSortOrderOptions } from './RichHistory';\nimport RichHistoryCard from './RichHistoryCard';\n\nexport interface Props {\n  queries: RichHistoryQuery[];\n  totalQueries: number;\n  loading: boolean;\n  activeDatasourceInstance: string;\n  updateFilters: (filtersToUpdate: Partial<RichHistorySearchFilters>) => void;\n  clearRichHistoryResults: () => void;\n  loadMoreRichHistory: () => void;\n  richHistorySearchFilters?: RichHistorySearchFilters;\n  richHistorySettings: RichHistorySettings;\n  exploreId: ExploreId;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const bgColor = theme.isLight ? theme.v1.palette.gray5 : theme.v1.palette.dark4;\n  return {\n    container: css`\n      display: flex;\n    `,\n    containerContent: css`\n      width: 100%;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing(1)};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing(0.25, 0.5, 0.25, 1)};\n        border-radius: ${theme.shape.borderRadius(1)};\n      }\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing(1)};\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    footer: css`\n      height: 60px;\n      margin-top: ${theme.spacing(3)};\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.fontWeightLight};\n      font-size: ${theme.typography.bodySmall.fontSize};\n      a {\n        font-weight: ${theme.typography.fontWeightMedium};\n        margin-left: ${theme.spacing(0.25)};\n      }\n    `,\n  };\n};\n\nexport function RichHistoryStarredTab(props: Props) {\n  const {\n    updateFilters,\n    clearRichHistoryResults,\n    loadMoreRichHistory,\n    activeDatasourceInstance,\n    richHistorySettings,\n    queries,\n    totalQueries,\n    loading,\n    richHistorySearchFilters,\n    exploreId,\n  } = props;\n\n  const styles = useStyles2(getStyles);\n\n  const listOfDatasources = createDatasourcesList();\n\n  useEffect(() => {\n    const datasourceFilters =\n      richHistorySettings.activeDatasourceOnly && richHistorySettings.lastUsedDatasourceFilters\n        ? richHistorySettings.lastUsedDatasourceFilters\n        : [activeDatasourceInstance];\n    const filters: RichHistorySearchFilters = {\n      search: '',\n      sortOrder: SortOrder.Descending,\n      datasourceFilters,\n      from: 0,\n      to: richHistorySettings.retentionPeriod,\n      starred: true,\n    };\n    updateFilters(filters);\n    return () => {\n      clearRichHistoryResults();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!richHistorySearchFilters) {\n    return <span>Loading...</span>;\n  }\n\n  const sortOrderOptions = getSortOrderOptions();\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.containerContent}>\n        <div className={styles.selectors}>\n          {!richHistorySettings.activeDatasourceOnly && (\n            <MultiSelect\n              className={styles.multiselect}\n              options={listOfDatasources.map((ds) => {\n                return { value: ds.name, label: ds.name };\n              })}\n              value={richHistorySearchFilters.datasourceFilters}\n              placeholder=\"Filter queries for data sources(s)\"\n              aria-label=\"Filter queries for data sources(s)\"\n              onChange={(options: SelectableValue[]) => {\n                updateFilters({ datasourceFilters: options.map((option) => option.value) });\n              }}\n            />\n          )}\n          <div className={styles.filterInput}>\n            <FilterInput\n              placeholder=\"Search queries\"\n              value={richHistorySearchFilters.search}\n              onChange={(search: string) => updateFilters({ search })}\n            />\n          </div>\n          <div aria-label=\"Sort queries\" className={styles.sort}>\n            <Select\n              value={sortOrderOptions.filter((order) => order.value === richHistorySearchFilters.sortOrder)}\n              options={sortOrderOptions}\n              placeholder=\"Sort queries by\"\n              onChange={(e: SelectableValue<SortOrder>) => updateFilters({ sortOrder: e.value })}\n            />\n          </div>\n        </div>\n        {loading && <span>Loading results...</span>}\n        {!loading &&\n          queries.map((q) => {\n            const idx = listOfDatasources.findIndex((d) => d.uid === q.datasourceUid);\n            return (\n              <RichHistoryCard\n                query={q}\n                key={q.id}\n                exploreId={exploreId}\n                dsImg={idx === -1 ? 'public/img/icn-datasource.svg' : listOfDatasources[idx].imgUrl}\n                isRemoved={idx === -1}\n              />\n            );\n          })}\n        {queries.length && queries.length !== totalQueries ? (\n          <div>\n            Showing {queries.length} of {totalQueries} <Button onClick={loadMoreRichHistory}>Load more</Button>\n          </div>\n        ) : null}\n        <div className={styles.footer}>\n          {!config.queryHistoryEnabled ? 'The history is local to your browser and is not shared with others.' : ''}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { debounce } from 'lodash';\nimport React, { PureComponent } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Themeable2, TabbedContainer, TabConfig, withTheme2 } from '@grafana/ui';\nimport { SortOrder, RichHistorySearchFilters, RichHistorySettings } from 'app/core/utils/richHistory';\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\n\nimport { supportedFeatures } from '../../../core/history/richHistoryStorageProvider';\n\nimport { RichHistoryQueriesTab } from './RichHistoryQueriesTab';\nimport { RichHistorySettingsTab } from './RichHistorySettingsTab';\nimport { RichHistoryStarredTab } from './RichHistoryStarredTab';\n\nexport enum Tabs {\n  RichHistory = 'Query history',\n  Starred = 'Starred',\n  Settings = 'Settings',\n}\n\nexport const getSortOrderOptions = () =>\n  [\n    { label: 'Newest first', value: SortOrder.Descending },\n    { label: 'Oldest first', value: SortOrder.Ascending },\n    { label: 'Data source A-Z', value: SortOrder.DatasourceAZ },\n    { label: 'Data source Z-A', value: SortOrder.DatasourceZA },\n  ].filter((option) => supportedFeatures().availableFilters.includes(option.value));\n\nexport interface RichHistoryProps extends Themeable2 {\n  richHistory: RichHistoryQuery[];\n  richHistoryTotal?: number;\n  richHistorySettings: RichHistorySettings;\n  richHistorySearchFilters?: RichHistorySearchFilters;\n  updateHistorySettings: (settings: RichHistorySettings) => void;\n  updateHistorySearchFilters: (exploreId: ExploreId, filters: RichHistorySearchFilters) => void;\n  loadRichHistory: (exploreId: ExploreId) => void;\n  loadMoreRichHistory: (exploreId: ExploreId) => void;\n  clearRichHistoryResults: (exploreId: ExploreId) => void;\n  deleteRichHistory: () => void;\n  activeDatasourceInstance: string;\n  firstTab: Tabs;\n  exploreId: ExploreId;\n  height: number;\n  onClose: () => void;\n}\n\ntype RichHistoryState = {\n  loading: boolean;\n};\n\nclass UnThemedRichHistory extends PureComponent<RichHistoryProps> {\n  state: RichHistoryState = {\n    loading: false,\n  };\n\n  updateSettings = (settingsToUpdate: Partial<RichHistorySettings>) => {\n    this.props.updateHistorySettings({ ...this.props.richHistorySettings, ...settingsToUpdate });\n  };\n\n  updateFilters = (filtersToUpdate?: Partial<RichHistorySearchFilters>) => {\n    const filters = {\n      ...this.props.richHistorySearchFilters!,\n      ...filtersToUpdate,\n      page: 1, // always load fresh results when updating filters\n    };\n    this.props.updateHistorySearchFilters(this.props.exploreId, filters);\n    this.loadRichHistory();\n  };\n\n  clearResults = () => {\n    this.props.clearRichHistoryResults(this.props.exploreId);\n  };\n\n  loadRichHistory = debounce(() => {\n    this.props.loadRichHistory(this.props.exploreId);\n    this.setState({\n      loading: true,\n    });\n  }, 300);\n\n  onChangeRetentionPeriod = (retentionPeriod: SelectableValue<number>) => {\n    if (retentionPeriod.value !== undefined) {\n      this.updateSettings({ retentionPeriod: retentionPeriod.value });\n    }\n  };\n\n  toggleStarredTabAsFirstTab = () =>\n    this.updateSettings({ starredTabAsFirstTab: !this.props.richHistorySettings.starredTabAsFirstTab });\n\n  toggleActiveDatasourceOnly = () =>\n    this.updateSettings({ activeDatasourceOnly: !this.props.richHistorySettings.activeDatasourceOnly });\n\n  componentDidUpdate(prevProps: Readonly<RichHistoryProps>, prevState: Readonly<{}>, snapshot?: any) {\n    if (prevProps.richHistory !== this.props.richHistory) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    const {\n      richHistory,\n      richHistoryTotal,\n      height,\n      exploreId,\n      deleteRichHistory,\n      onClose,\n      firstTab,\n      activeDatasourceInstance,\n    } = this.props;\n    const { loading } = this.state;\n\n    const QueriesTab: TabConfig = {\n      label: 'Query history',\n      value: Tabs.RichHistory,\n      content: (\n        <RichHistoryQueriesTab\n          queries={richHistory}\n          totalQueries={richHistoryTotal || 0}\n          loading={loading}\n          updateFilters={this.updateFilters}\n          clearRichHistoryResults={() => this.props.clearRichHistoryResults(this.props.exploreId)}\n          loadMoreRichHistory={() => this.props.loadMoreRichHistory(this.props.exploreId)}\n          activeDatasourceInstance={activeDatasourceInstance}\n          richHistorySettings={this.props.richHistorySettings}\n          richHistorySearchFilters={this.props.richHistorySearchFilters}\n          exploreId={exploreId}\n          height={height}\n        />\n      ),\n      icon: 'history',\n    };\n\n    const StarredTab: TabConfig = {\n      label: 'Starred',\n      value: Tabs.Starred,\n      content: (\n        <RichHistoryStarredTab\n          queries={richHistory}\n          totalQueries={richHistoryTotal || 0}\n          loading={loading}\n          activeDatasourceInstance={activeDatasourceInstance}\n          updateFilters={this.updateFilters}\n          clearRichHistoryResults={() => this.props.clearRichHistoryResults(this.props.exploreId)}\n          loadMoreRichHistory={() => this.props.loadMoreRichHistory(this.props.exploreId)}\n          richHistorySettings={this.props.richHistorySettings}\n          richHistorySearchFilters={this.props.richHistorySearchFilters}\n          exploreId={exploreId}\n        />\n      ),\n      icon: 'star',\n    };\n\n    const SettingsTab: TabConfig = {\n      label: 'Settings',\n      value: Tabs.Settings,\n      content: (\n        <RichHistorySettingsTab\n          retentionPeriod={this.props.richHistorySettings.retentionPeriod}\n          starredTabAsFirstTab={this.props.richHistorySettings.starredTabAsFirstTab}\n          activeDatasourceOnly={this.props.richHistorySettings.activeDatasourceOnly}\n          onChangeRetentionPeriod={this.onChangeRetentionPeriod}\n          toggleStarredTabAsFirstTab={this.toggleStarredTabAsFirstTab}\n          toggleactiveDatasourceOnly={this.toggleActiveDatasourceOnly}\n          deleteRichHistory={deleteRichHistory}\n        />\n      ),\n      icon: 'sliders-v-alt',\n    };\n\n    let tabs = [QueriesTab, StarredTab, SettingsTab];\n    return (\n      <TabbedContainer tabs={tabs} onClose={onClose} defaultTab={firstTab} closeIconTooltip=\"Close query history\" />\n    );\n  }\n}\n\nexport const RichHistory = withTheme2(UnThemedRichHistory);\n","// Libraries\nimport React, { useEffect, useState } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { useTheme2 } from '@grafana/ui';\n// Types\nimport { ExploreItemState, StoreState } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\n// Components, enums\nimport { ExploreDrawer } from '../ExploreDrawer';\nimport {\n  deleteRichHistory,\n  initRichHistory,\n  loadRichHistory,\n  loadMoreRichHistory,\n  clearRichHistoryResults,\n  updateHistorySettings,\n  updateHistorySearchFilters,\n} from '../state/history';\n\nimport { RichHistory, Tabs } from './RichHistory';\n\n//Actions\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const richHistorySearchFilters = item.richHistorySearchFilters;\n  const richHistorySettings = explore.richHistorySettings;\n  const { datasourceInstance } = item;\n  const firstTab = richHistorySettings?.starredTabAsFirstTab ? Tabs.Starred : Tabs.RichHistory;\n  const { richHistory, richHistoryTotal } = item;\n  return {\n    richHistory,\n    richHistoryTotal,\n    firstTab,\n    activeDatasourceInstance: datasourceInstance!.name,\n    richHistorySettings,\n    richHistorySearchFilters,\n  };\n}\n\nconst mapDispatchToProps = {\n  initRichHistory,\n  loadRichHistory,\n  loadMoreRichHistory,\n  clearRichHistoryResults,\n  updateHistorySettings,\n  updateHistorySearchFilters,\n  deleteRichHistory,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ninterface OwnProps {\n  width: number;\n  exploreId: ExploreId;\n  onClose: () => void;\n}\nexport type Props = ConnectedProps<typeof connector> & OwnProps;\n\nexport function RichHistoryContainer(props: Props) {\n  const theme = useTheme2();\n  const [height, setHeight] = useState(theme.components.horizontalDrawer.defaultHeight);\n\n  const {\n    richHistory,\n    richHistoryTotal,\n    width,\n    firstTab,\n    activeDatasourceInstance,\n    exploreId,\n    deleteRichHistory,\n    initRichHistory,\n    loadRichHistory,\n    loadMoreRichHistory,\n    clearRichHistoryResults,\n    richHistorySettings,\n    updateHistorySettings,\n    richHistorySearchFilters,\n    updateHistorySearchFilters,\n    onClose,\n  } = props;\n\n  useEffect(() => {\n    initRichHistory();\n    reportInteraction('grafana_explore_query_history_opened', {\n      queryHistoryEnabled: config.queryHistoryEnabled,\n    });\n  }, [initRichHistory]);\n\n  if (!richHistorySettings) {\n    return <span>Loading...</span>;\n  }\n\n  return (\n    <ExploreDrawer\n      width={width}\n      onResize={(_e, _dir, ref) => {\n        setHeight(Number(ref.style.height.slice(0, -2)));\n      }}\n    >\n      <RichHistory\n        richHistory={richHistory}\n        richHistoryTotal={richHistoryTotal}\n        firstTab={firstTab}\n        activeDatasourceInstance={activeDatasourceInstance}\n        exploreId={exploreId}\n        onClose={onClose}\n        height={height}\n        deleteRichHistory={deleteRichHistory}\n        richHistorySettings={richHistorySettings}\n        richHistorySearchFilters={richHistorySearchFilters}\n        updateHistorySettings={updateHistorySettings}\n        updateHistorySearchFilters={updateHistorySearchFilters}\n        loadRichHistory={loadRichHistory}\n        loadMoreRichHistory={loadMoreRichHistory}\n        clearRichHistoryResults={clearRichHistoryResults}\n      />\n    </ExploreDrawer>\n  );\n}\n\nexport default connector(RichHistoryContainer);\n","import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, HorizontalGroup, useTheme2 } from '@grafana/ui';\n\ntype Props = {\n  addQueryRowButtonDisabled?: boolean;\n  addQueryRowButtonHidden?: boolean;\n  richHistoryRowButtonHidden?: boolean;\n  richHistoryButtonActive?: boolean;\n  queryInspectorButtonActive?: boolean;\n\n  onClickAddQueryRowButton: () => void;\n  onClickRichHistoryButton: () => void;\n  onClickQueryInspectorButton: () => void;\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    containerMargin: css`\n      margin-top: ${theme.spacing(2)};\n    `,\n  };\n};\nexport function SecondaryActions(props: Props) {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  return (\n    <div className={styles.containerMargin}>\n      <HorizontalGroup>\n        {!props.addQueryRowButtonHidden && (\n          <Button\n            variant=\"secondary\"\n            aria-label=\"Add row button\"\n            onClick={props.onClickAddQueryRowButton}\n            disabled={props.addQueryRowButtonDisabled}\n            icon=\"plus\"\n          >\n            Add query\n          </Button>\n        )}\n        {!props.richHistoryRowButtonHidden && (\n          <Button\n            variant=\"secondary\"\n            aria-label=\"Rich history button\"\n            className={cx({ ['explore-active-button']: props.richHistoryButtonActive })}\n            onClick={props.onClickRichHistoryButton}\n            icon=\"history\"\n          >\n            Query history\n          </Button>\n        )}\n        <Button\n          variant=\"secondary\"\n          aria-label=\"Query inspector button\"\n          className={cx({ ['explore-active-button']: props.queryInspectorButtonActive })}\n          onClick={props.onClickQueryInspectorButton}\n          icon=\"info-circle\"\n        >\n          Inspector\n        </Button>\n      </HorizontalGroup>\n    </div>\n  );\n}\n","import React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { ValueLinkConfig, applyFieldOverrides, TimeZone, SplitOpen, DataFrame } from '@grafana/data';\nimport { Collapse, Table } from '@grafana/ui';\nimport { FilterItem } from '@grafana/ui/src/components/Table/types';\nimport { config } from 'app/core/config';\nimport { PANEL_BORDER } from 'app/core/constants';\nimport { StoreState } from 'app/types';\nimport { ExploreId, ExploreItemState } from 'app/types/explore';\n\nimport { MetaInfoText } from './MetaInfoText';\nimport { getFieldLinksForExplore } from './utils/links';\n\ninterface TableContainerProps {\n  ariaLabel?: string;\n  exploreId: ExploreId;\n  width: number;\n  timeZone: TimeZone;\n  onCellFilterAdded?: (filter: FilterItem) => void;\n  splitOpenFn: SplitOpen;\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: TableContainerProps) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const { loading: loadingInState, tableResult, range } = item;\n  const loading = tableResult && tableResult.length > 0 ? false : loadingInState;\n  return { loading, tableResult, range };\n}\n\nconst connector = connect(mapStateToProps, {});\n\ntype Props = TableContainerProps & ConnectedProps<typeof connector>;\n\nexport class TableContainer extends PureComponent<Props> {\n  getMainFrame(frames: DataFrame[] | null) {\n    return frames?.find((df) => df.meta?.custom?.parentRowIndex === undefined) || frames?.[0];\n  }\n\n  getTableHeight() {\n    const { tableResult } = this.props;\n    const mainFrame = this.getMainFrame(tableResult);\n\n    if (!mainFrame || mainFrame.length === 0) {\n      return 200;\n    }\n\n    // tries to estimate table height\n    return Math.max(Math.min(600, mainFrame.length * 35) + 35);\n  }\n\n  render() {\n    const { loading, onCellFilterAdded, tableResult, width, splitOpenFn, range, ariaLabel, timeZone } = this.props;\n    const height = this.getTableHeight();\n    const tableWidth = width - config.theme.panelPadding * 2 - PANEL_BORDER;\n\n    let dataFrames = tableResult;\n\n    if (dataFrames?.length) {\n      dataFrames = applyFieldOverrides({\n        data: dataFrames,\n        timeZone,\n        theme: config.theme2,\n        replaceVariables: (v: string) => v,\n        fieldConfig: {\n          defaults: {},\n          overrides: [],\n        },\n      });\n      // Bit of code smell here. We need to add links here to the frame modifying the frame on every render.\n      // Should work fine in essence but still not the ideal way to pass props. In logs container we do this\n      // differently and sidestep this getLinks API on a dataframe\n      for (const frame of dataFrames) {\n        for (const field of frame.fields) {\n          field.getLinks = (config: ValueLinkConfig) => {\n            return getFieldLinksForExplore({\n              field,\n              rowIndex: config.valueRowIndex!,\n              splitOpenFn,\n              range,\n              dataFrame: frame!,\n            });\n          };\n        }\n      }\n    }\n\n    const mainFrame = this.getMainFrame(dataFrames);\n    const subFrames = dataFrames?.filter((df) => df.meta?.custom?.parentRowIndex !== undefined);\n\n    return (\n      <Collapse label=\"Table\" loading={loading} isOpen>\n        {mainFrame?.length ? (\n          <Table\n            ariaLabel={ariaLabel}\n            data={mainFrame}\n            subData={subFrames}\n            width={tableWidth}\n            height={height}\n            onCellFilterAdded={onCellFilterAdded}\n          />\n        ) : (\n          <MetaInfoText metaItems={[{ value: '0 series returned' }]} />\n        )}\n      </Collapse>\n    );\n  }\n}\n\nexport default connector(TableContainer);\n","import TracePageSearchBar from '@jaegertracing/jaeger-ui-components/src/TracePageHeader/TracePageSearchBar';\nimport { TopOfViewRefType } from '@jaegertracing/jaeger-ui-components/src/TraceTimelineViewer/VirtualizedTraceView';\nimport React, { RefObject, useMemo, useState } from 'react';\n\nimport { DataFrame, SplitOpen, PanelData } from '@grafana/data';\nimport { Collapse } from '@grafana/ui';\nimport { StoreState, useSelector } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\nimport { TraceView } from './TraceView';\nimport { useSearch } from './useSearch';\nimport { transformDataFrames } from './utils/transform';\ninterface Props {\n  dataFrames: DataFrame[];\n  splitOpenFn: SplitOpen;\n  exploreId: ExploreId;\n  scrollElement?: Element;\n  queryResponse: PanelData;\n  topOfViewRef: RefObject<HTMLDivElement>;\n}\nexport function TraceViewContainer(props: Props) {\n  // At this point we only show single trace\n  const frame = props.dataFrames[0];\n  const { dataFrames, splitOpenFn, exploreId, scrollElement, topOfViewRef, queryResponse } = props;\n  const traceProp = useMemo(() => transformDataFrames(frame), [frame]);\n  const { search, setSearch, spanFindMatches } = useSearch(traceProp?.spans);\n  const [focusedSpanIdForSearch, setFocusedSpanIdForSearch] = useState('');\n  const [searchBarSuffix, setSearchBarSuffix] = useState('');\n  const datasource = useSelector(\n    (state: StoreState) => state.explore[props.exploreId!]?.datasourceInstance ?? undefined\n  );\n\n  if (!traceProp) {\n    return null;\n  }\n\n  return (\n    <>\n      <TracePageSearchBar\n        navigable={true}\n        searchValue={search}\n        setSearch={setSearch}\n        spanFindMatches={spanFindMatches}\n        searchBarSuffix={searchBarSuffix}\n        setSearchBarSuffix={setSearchBarSuffix}\n        focusedSpanIdForSearch={focusedSpanIdForSearch}\n        setFocusedSpanIdForSearch={setFocusedSpanIdForSearch}\n      />\n\n      <Collapse label=\"Trace View\" isOpen>\n        <TraceView\n          exploreId={exploreId}\n          dataFrames={dataFrames}\n          splitOpenFn={splitOpenFn}\n          scrollElement={scrollElement}\n          traceProp={traceProp}\n          spanFindMatches={spanFindMatches}\n          search={search}\n          focusedSpanIdForSearch={focusedSpanIdForSearch}\n          queryResponse={queryResponse}\n          datasource={datasource}\n          topOfViewRef={topOfViewRef}\n          topOfViewRefType={TopOfViewRefType.Explore}\n        />\n      </Collapse>\n    </>\n  );\n}\n","import { css, cx } from '@emotion/css';\nimport { get } from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport React, { createRef } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { Unsubscribable } from 'rxjs';\n\nimport {\n  AbsoluteTimeRange,\n  DataQuery,\n  GrafanaTheme2,\n  LoadingState,\n  QueryFixAction,\n  RawTimeRange,\n  EventBus,\n  SplitOpenOptions,\n} from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { config, getDataSourceSrv, reportInteraction } from '@grafana/runtime';\nimport { Collapse, CustomScrollbar, ErrorBoundaryAlert, Themeable2, withTheme2, PanelContainer } from '@grafana/ui';\nimport { FILTER_FOR_OPERATOR, FILTER_OUT_OPERATOR, FilterItem } from '@grafana/ui/src/components/Table/types';\nimport appEvents from 'app/core/app_events';\nimport { supportedFeatures } from 'app/core/history/richHistoryStorageProvider';\nimport { MIXED_DATASOURCE_NAME } from 'app/plugins/datasource/mixed/MixedDataSource';\nimport { getNodeGraphDataFrames } from 'app/plugins/panel/nodeGraph/utils';\nimport { StoreState } from 'app/types';\nimport { AbsoluteTimeEvent } from 'app/types/events';\nimport { ExploreGraphStyle, ExploreId, ExploreItemState } from 'app/types/explore';\n\nimport { getTimeZone } from '../profile/state/selectors';\n\nimport { ExploreGraph } from './ExploreGraph';\nimport { ExploreGraphLabel } from './ExploreGraphLabel';\nimport ExploreQueryInspector from './ExploreQueryInspector';\nimport { ExploreToolbar } from './ExploreToolbar';\nimport { FlameGraphExploreContainer } from './FlameGraphExploreContainer';\nimport LogsContainer from './LogsContainer';\nimport { NoData } from './NoData';\nimport { NoDataSourceCallToAction } from './NoDataSourceCallToAction';\nimport { NodeGraphContainer } from './NodeGraphContainer';\nimport { QueryRows } from './QueryRows';\nimport { ResponseErrorContainer } from './ResponseErrorContainer';\nimport RichHistoryContainer from './RichHistory/RichHistoryContainer';\nimport { SecondaryActions } from './SecondaryActions';\nimport TableContainer from './TableContainer';\nimport { TraceViewContainer } from './TraceView/TraceViewContainer';\nimport { changeSize, changeGraphStyle } from './state/explorePane';\nimport { splitOpen } from './state/main';\nimport { addQueryRow, modifyQueries, scanStart, scanStopAction, setQueries } from './state/query';\nimport { isSplit } from './state/selectors';\nimport { makeAbsoluteTime, updateTimeRange } from './state/time';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    exploreMain: css`\n      label: exploreMain;\n      // Is needed for some transition animations to work.\n      position: relative;\n      margin-top: 21px;\n    `,\n    button: css`\n      label: button;\n      margin: 1em 4px 0 0;\n    `,\n    queryContainer: css`\n      label: queryContainer;\n      // Need to override normal css class and don't want to count on ordering of the classes in html.\n      height: auto !important;\n      flex: unset !important;\n      display: unset !important;\n      padding: ${theme.spacing(1)};\n    `,\n    exploreContainer: css`\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n      padding: ${theme.spacing(2)};\n      padding-top: 0;\n    `,\n    exploreContainerTopnav: css`\n      padding-top: ${theme.spacing(2)};\n    `,\n  };\n};\n\nexport interface ExploreProps extends Themeable2 {\n  exploreId: ExploreId;\n  theme: GrafanaTheme2;\n  eventBus: EventBus;\n}\n\nenum ExploreDrawer {\n  RichHistory,\n  QueryInspector,\n}\n\ninterface ExploreState {\n  openDrawer?: ExploreDrawer;\n}\n\nexport type Props = ExploreProps & ConnectedProps<typeof connector>;\n\n/**\n * Explore provides an area for quick query iteration for a given datasource.\n * Once a datasource is selected it populates the query section at the top.\n * When queries are run, their results are being displayed in the main section.\n * The datasource determines what kind of query editor it brings, and what kind\n * of results viewers it supports. The state is managed entirely in Redux.\n *\n * SPLIT VIEW\n *\n * Explore can have two Explore areas side-by-side. This is handled in `Wrapper.tsx`.\n * Since there can be multiple Explores (e.g., left and right) each action needs\n * the `exploreId` as first parameter so that the reducer knows which Explore state\n * is affected.\n *\n * DATASOURCE REQUESTS\n *\n * A click on Run Query creates transactions for all DataQueries for all expanded\n * result viewers. New runs are discarding previous runs. Upon completion a transaction\n * saves the result. The result viewers construct their data from the currently existing\n * transactions.\n *\n * The result viewers determine some of the query options sent to the datasource, e.g.,\n * `format`, to indicate eventual transformations by the datasources' result transformers.\n */\nexport class Explore extends React.PureComponent<Props, ExploreState> {\n  scrollElement: HTMLDivElement | undefined;\n  absoluteTimeUnsubsciber: Unsubscribable | undefined;\n  topOfViewRef = createRef<HTMLDivElement>();\n  graphEventBus: EventBus;\n  logsEventBus: EventBus;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      openDrawer: undefined,\n    };\n    this.graphEventBus = props.eventBus.newScopedBus('graph', { onlyLocal: false });\n    this.logsEventBus = props.eventBus.newScopedBus('logs', { onlyLocal: false });\n  }\n\n  componentDidMount() {\n    this.absoluteTimeUnsubsciber = appEvents.subscribe(AbsoluteTimeEvent, this.onMakeAbsoluteTime);\n  }\n\n  componentWillUnmount() {\n    this.absoluteTimeUnsubsciber?.unsubscribe();\n  }\n\n  onChangeTime = (rawRange: RawTimeRange) => {\n    const { updateTimeRange, exploreId } = this.props;\n    updateTimeRange({ exploreId, rawRange });\n  };\n\n  // Use this in help pages to set page to a single query\n  onClickExample = (query: DataQuery) => {\n    this.props.setQueries(this.props.exploreId, [query]);\n  };\n\n  onCellFilterAdded = (filter: FilterItem) => {\n    const { value, key, operator } = filter;\n    if (operator === FILTER_FOR_OPERATOR) {\n      this.onClickFilterLabel(key, value);\n    }\n\n    if (operator === FILTER_OUT_OPERATOR) {\n      this.onClickFilterOutLabel(key, value);\n    }\n  };\n\n  onClickFilterLabel = (key: string, value: string) => {\n    this.onModifyQueries({ type: 'ADD_FILTER', options: { key, value } });\n  };\n\n  onClickFilterOutLabel = (key: string, value: string) => {\n    this.onModifyQueries({ type: 'ADD_FILTER_OUT', options: { key, value } });\n  };\n\n  onClickAddQueryRowButton = () => {\n    const { exploreId, queryKeys } = this.props;\n    this.props.addQueryRow(exploreId, queryKeys.length);\n  };\n\n  onMakeAbsoluteTime = () => {\n    const { makeAbsoluteTime } = this.props;\n    makeAbsoluteTime();\n  };\n\n  onModifyQueries = (action: QueryFixAction) => {\n    const modifier = async (query: DataQuery, modification: QueryFixAction) => {\n      const { datasource } = query;\n      if (datasource == null) {\n        return query;\n      }\n      const ds = await getDataSourceSrv().get(datasource);\n      if (ds.modifyQuery) {\n        return ds.modifyQuery(query, modification);\n      } else {\n        return query;\n      }\n    };\n    this.props.modifyQueries(this.props.exploreId, action, modifier);\n  };\n\n  onResize = (size: { height: number; width: number }) => {\n    this.props.changeSize(this.props.exploreId, size);\n  };\n\n  onStartScanning = () => {\n    // Scanner will trigger a query\n    this.props.scanStart(this.props.exploreId);\n  };\n\n  onStopScanning = () => {\n    this.props.scanStopAction({ exploreId: this.props.exploreId });\n  };\n\n  onUpdateTimeRange = (absoluteRange: AbsoluteTimeRange) => {\n    const { exploreId, updateTimeRange } = this.props;\n    updateTimeRange({ exploreId, absoluteRange });\n  };\n\n  onChangeGraphStyle = (graphStyle: ExploreGraphStyle) => {\n    const { exploreId, changeGraphStyle } = this.props;\n    changeGraphStyle(exploreId, graphStyle);\n  };\n\n  toggleShowRichHistory = () => {\n    this.setState((state) => {\n      return {\n        openDrawer: state.openDrawer === ExploreDrawer.RichHistory ? undefined : ExploreDrawer.RichHistory,\n      };\n    });\n  };\n\n  toggleShowQueryInspector = () => {\n    this.setState((state) => {\n      return {\n        openDrawer: state.openDrawer === ExploreDrawer.QueryInspector ? undefined : ExploreDrawer.QueryInspector,\n      };\n    });\n  };\n\n  onSplitOpen = (panelType: string) => {\n    return async (options?: SplitOpenOptions<DataQuery>) => {\n      this.props.splitOpen(options);\n      if (options && this.props.datasourceInstance) {\n        const target = (await getDataSourceSrv().get(options.datasourceUid)).type;\n        const source =\n          this.props.datasourceInstance.uid === MIXED_DATASOURCE_NAME\n            ? get(this.props.queries, '0.datasource.type')\n            : this.props.datasourceInstance.type;\n        const tracking = {\n          origin: 'panel',\n          panelType,\n          source,\n          target,\n          exploreId: this.props.exploreId,\n        };\n        reportInteraction('grafana_explore_split_view_opened', tracking);\n      }\n    };\n  };\n\n  renderEmptyState(exploreContainerStyles: string) {\n    return (\n      <div className={cx(exploreContainerStyles)}>\n        <NoDataSourceCallToAction />\n      </div>\n    );\n  }\n\n  renderNoData() {\n    return <NoData />;\n  }\n\n  renderGraphPanel(width: number) {\n    const { graphResult, absoluteRange, timeZone, queryResponse, loading, theme, graphStyle, showFlameGraph } =\n      this.props;\n    const spacing = parseInt(theme.spacing(2).slice(0, -2), 10);\n    const label = <ExploreGraphLabel graphStyle={graphStyle} onChangeGraphStyle={this.onChangeGraphStyle} />;\n\n    return (\n      <Collapse label={label} loading={loading} isOpen>\n        <ExploreGraph\n          graphStyle={graphStyle}\n          data={graphResult!}\n          height={showFlameGraph ? 180 : 400}\n          width={width - spacing}\n          absoluteRange={absoluteRange}\n          onChangeTime={this.onUpdateTimeRange}\n          timeZone={timeZone}\n          annotations={queryResponse.annotations}\n          splitOpenFn={this.onSplitOpen('graph')}\n          loadingState={queryResponse.state}\n          anchorToZero={false}\n          eventBus={this.graphEventBus}\n        />\n      </Collapse>\n    );\n  }\n\n  renderTablePanel(width: number) {\n    const { exploreId, timeZone } = this.props;\n    return (\n      <TableContainer\n        ariaLabel={selectors.pages.Explore.General.table}\n        width={width}\n        exploreId={exploreId}\n        onCellFilterAdded={this.onCellFilterAdded}\n        timeZone={timeZone}\n        splitOpenFn={this.onSplitOpen('table')}\n      />\n    );\n  }\n\n  renderLogsPanel(width: number) {\n    const { exploreId, syncedTimes, theme, queryResponse } = this.props;\n    const spacing = parseInt(theme.spacing(2).slice(0, -2), 10);\n    return (\n      <LogsContainer\n        exploreId={exploreId}\n        loadingState={queryResponse.state}\n        syncedTimes={syncedTimes}\n        width={width - spacing}\n        onClickFilterLabel={this.onClickFilterLabel}\n        onClickFilterOutLabel={this.onClickFilterOutLabel}\n        onStartScanning={this.onStartScanning}\n        onStopScanning={this.onStopScanning}\n        scrollElement={this.scrollElement}\n        eventBus={this.logsEventBus}\n        splitOpenFn={this.onSplitOpen('logs')}\n      />\n    );\n  }\n\n  renderNodeGraphPanel() {\n    const { exploreId, showTrace, queryResponse, datasourceInstance } = this.props;\n    const datasourceType = datasourceInstance ? datasourceInstance?.type : 'unknown';\n\n    return (\n      <NodeGraphContainer\n        dataFrames={this.memoizedGetNodeGraphDataFrames(queryResponse.series)}\n        exploreId={exploreId}\n        withTraceView={showTrace}\n        datasourceType={datasourceType}\n        splitOpenFn={this.onSplitOpen('nodeGraph')}\n      />\n    );\n  }\n\n  memoizedGetNodeGraphDataFrames = memoizeOne(getNodeGraphDataFrames);\n\n  renderFlameGraphPanel() {\n    const { queryResponse } = this.props;\n    return <FlameGraphExploreContainer dataFrames={queryResponse.flameGraphFrames} />;\n  }\n\n  renderTraceViewPanel() {\n    const { queryResponse, exploreId } = this.props;\n    const dataFrames = queryResponse.series.filter((series) => series.meta?.preferredVisualisationType === 'trace');\n\n    return (\n      // If there is no data (like 404) we show a separate error so no need to show anything here\n      dataFrames.length && (\n        <TraceViewContainer\n          exploreId={exploreId}\n          dataFrames={dataFrames}\n          splitOpenFn={this.onSplitOpen('traceView')}\n          scrollElement={this.scrollElement}\n          queryResponse={queryResponse}\n          topOfViewRef={this.topOfViewRef}\n        />\n      )\n    );\n  }\n\n  render() {\n    const {\n      datasourceInstance,\n      datasourceMissing,\n      exploreId,\n      graphResult,\n      queryResponse,\n      isLive,\n      theme,\n      showMetrics,\n      showTable,\n      showLogs,\n      showTrace,\n      showNodeGraph,\n      showFlameGraph,\n      splitted,\n      timeZone,\n    } = this.props;\n    const { openDrawer } = this.state;\n    const styles = getStyles(theme);\n    const showPanels = queryResponse && queryResponse.state !== LoadingState.NotStarted;\n    const showRichHistory = openDrawer === ExploreDrawer.RichHistory;\n    const richHistoryRowButtonHidden = !supportedFeatures().queryHistoryAvailable;\n    const showQueryInspector = openDrawer === ExploreDrawer.QueryInspector;\n    const showNoData =\n      queryResponse.state === LoadingState.Done &&\n      [\n        queryResponse.logsFrames,\n        queryResponse.graphFrames,\n        queryResponse.nodeGraphFrames,\n        queryResponse.flameGraphFrames,\n        queryResponse.tableFrames,\n        queryResponse.traceFrames,\n      ].every((e) => e.length === 0);\n\n    return (\n      <CustomScrollbar\n        testId={selectors.pages.Explore.General.scrollView}\n        autoHeightMin={'100%'}\n        scrollRefCallback={(scrollElement) => (this.scrollElement = scrollElement || undefined)}\n      >\n        <ExploreToolbar exploreId={exploreId} onChangeTime={this.onChangeTime} topOfViewRef={this.topOfViewRef} />\n        {datasourceMissing ? this.renderEmptyState(styles.exploreContainer) : null}\n        {datasourceInstance && (\n          <div\n            className={cx(styles.exploreContainer, {\n              [styles.exploreContainerTopnav]: Boolean(config.featureToggles.topnav && !splitted),\n            })}\n          >\n            <PanelContainer className={styles.queryContainer}>\n              <QueryRows exploreId={exploreId} />\n              <SecondaryActions\n                addQueryRowButtonDisabled={isLive}\n                // We cannot show multiple traces at the same time right now so we do not show add query button.\n                //TODO:unification\n                addQueryRowButtonHidden={false}\n                richHistoryRowButtonHidden={richHistoryRowButtonHidden}\n                richHistoryButtonActive={showRichHistory}\n                queryInspectorButtonActive={showQueryInspector}\n                onClickAddQueryRowButton={this.onClickAddQueryRowButton}\n                onClickRichHistoryButton={this.toggleShowRichHistory}\n                onClickQueryInspectorButton={this.toggleShowQueryInspector}\n              />\n              <ResponseErrorContainer exploreId={exploreId} />\n            </PanelContainer>\n            <AutoSizer onResize={this.onResize} disableHeight>\n              {({ width }) => {\n                if (width === 0) {\n                  return null;\n                }\n\n                return (\n                  <main className={cx(styles.exploreMain)} style={{ width }}>\n                    <ErrorBoundaryAlert>\n                      {showPanels && (\n                        <>\n                          {showMetrics && graphResult && (\n                            <ErrorBoundaryAlert>{this.renderGraphPanel(width)}</ErrorBoundaryAlert>\n                          )}\n                          {showTable && <ErrorBoundaryAlert>{this.renderTablePanel(width)}</ErrorBoundaryAlert>}\n                          {showLogs && <ErrorBoundaryAlert>{this.renderLogsPanel(width)}</ErrorBoundaryAlert>}\n                          {showNodeGraph && <ErrorBoundaryAlert>{this.renderNodeGraphPanel()}</ErrorBoundaryAlert>}\n                          {showFlameGraph && config.featureToggles.flameGraph && (\n                            <ErrorBoundaryAlert>{this.renderFlameGraphPanel()}</ErrorBoundaryAlert>\n                          )}\n                          {showTrace && <ErrorBoundaryAlert>{this.renderTraceViewPanel()}</ErrorBoundaryAlert>}\n                          {showNoData && <ErrorBoundaryAlert>{this.renderNoData()}</ErrorBoundaryAlert>}\n                        </>\n                      )}\n                      {showRichHistory && (\n                        <RichHistoryContainer\n                          width={width}\n                          exploreId={exploreId}\n                          onClose={this.toggleShowRichHistory}\n                        />\n                      )}\n                      {showQueryInspector && (\n                        <ExploreQueryInspector\n                          exploreId={exploreId}\n                          width={width}\n                          onClose={this.toggleShowQueryInspector}\n                          timeZone={timeZone}\n                        />\n                      )}\n                    </ErrorBoundaryAlert>\n                  </main>\n                );\n              }}\n            </AutoSizer>\n          </div>\n        )}\n      </CustomScrollbar>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: ExploreProps) {\n  const explore = state.explore;\n  const { syncedTimes } = explore;\n  const item: ExploreItemState = explore[exploreId]!;\n  const timeZone = getTimeZone(state.user);\n  const {\n    datasourceInstance,\n    datasourceMissing,\n    queryKeys,\n    queries,\n    isLive,\n    graphResult,\n    logsResult,\n    showLogs,\n    showMetrics,\n    showTable,\n    showTrace,\n    absoluteRange,\n    queryResponse,\n    showNodeGraph,\n    showFlameGraph,\n    loading,\n    graphStyle,\n  } = item;\n\n  return {\n    datasourceInstance,\n    datasourceMissing,\n    queryKeys,\n    queries,\n    isLive,\n    graphResult,\n    logsResult: logsResult ?? undefined,\n    absoluteRange,\n    queryResponse,\n    syncedTimes,\n    timeZone,\n    showLogs,\n    showMetrics,\n    showTable,\n    showTrace,\n    showNodeGraph,\n    showFlameGraph,\n    splitted: isSplit(state),\n    loading,\n    graphStyle,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeSize,\n  changeGraphStyle,\n  modifyQueries,\n  scanStart,\n  scanStopAction,\n  setQueries,\n  updateTimeRange,\n  makeAbsoluteTime,\n  addQueryRow,\n  splitOpen,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport default withTheme2(connector(Explore));\n","import { css, cx } from '@emotion/css';\nimport memoizeOne from 'memoize-one';\nimport React from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { ExploreUrlState, EventBusExtended, EventBusSrv, GrafanaTheme2, EventBus } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Themeable2, withTheme2 } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport store from 'app/core/store';\nimport {\n  DEFAULT_RANGE,\n  ensureQueries,\n  queryDatasourceDetails,\n  getTimeRange,\n  getTimeRangeFromUrl,\n  lastUsedDatasourceKeyForOrgId,\n  parseUrlState,\n} from 'app/core/utils/explore';\nimport { MIXED_DATASOURCE_NAME } from 'app/plugins/datasource/mixed/MixedDataSource';\nimport { StoreState } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\nimport { getDatasourceSrv } from '../plugins/datasource_srv';\nimport { getFiscalYearStartMonth, getTimeZone } from '../profile/state/selectors';\n\nimport Explore from './Explore';\nimport { initializeExplore, refreshExplore } from './state/explorePane';\nimport { lastSavedUrl, stateSave } from './state/main';\nimport { importQueries } from './state/query';\nimport { loadAndInitDatasource } from './state/utils';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    explore: css`\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n      & + & {\n        border-left: 1px dotted ${theme.colors.border.medium};\n      }\n    `,\n    exploreSplit: css`\n      width: 50%;\n    `,\n  };\n};\n\ninterface OwnProps extends Themeable2 {\n  exploreId: ExploreId;\n  urlQuery: string;\n  split: boolean;\n  eventBus: EventBus;\n}\n\ninterface Props extends OwnProps, ConnectedProps<typeof connector> {}\n\n/**\n * This component is responsible for handling initialization of an Explore pane and triggering synchronization\n * of state based on URL changes and preventing any infinite loops.\n */\nclass ExplorePaneContainerUnconnected extends React.PureComponent<Props> {\n  el: HTMLDivElement | null = null;\n  exploreEvents: EventBusExtended;\n\n  constructor(props: Props) {\n    super(props);\n    this.exploreEvents = new EventBusSrv();\n    this.state = {\n      openDrawer: undefined,\n    };\n  }\n\n  async componentDidMount() {\n    const { initialized, exploreId, initialDatasource, initialQueries, initialRange, panelsState, orgId } = this.props;\n    const width = this.el?.offsetWidth ?? 0;\n    // initialize the whole explore first time we mount and if browser history contains a change in datasource\n    if (!initialized) {\n      let queriesDatasourceOverride = undefined;\n      let rootDatasourceOverride = undefined;\n      // if this is starting with no queries and an initial datasource exists (but is not mixed), look up the ref to use it (initial datasource can be a UID or name here)\n      if ((!initialQueries || initialQueries.length === 0) && initialDatasource) {\n        const isDSMixed =\n          initialDatasource === MIXED_DATASOURCE_NAME || initialDatasource.uid === MIXED_DATASOURCE_NAME;\n        if (!isDSMixed) {\n          const { instance } = await loadAndInitDatasource(orgId, initialDatasource);\n          queriesDatasourceOverride = instance.getRef();\n        }\n      }\n\n      let queries = await ensureQueries(initialQueries, queriesDatasourceOverride); // this will return an empty array if there are no datasources\n\n      const queriesDatasourceDetails = queryDatasourceDetails(queries);\n      if (!queriesDatasourceDetails.noneHaveDatasource) {\n        if (!queryDatasourceDetails(queries).allDatasourceSame) {\n          if (config.featureToggles.exploreMixedDatasource) {\n            rootDatasourceOverride = await getDatasourceSrv().get(MIXED_DATASOURCE_NAME);\n          } else {\n            // if we have mixed queries but the mixed datasource feature is not on, change the datasource to the first query that has one\n            const changeDatasourceUid = queries.find((query) => query.datasource?.uid)!.datasource!.uid;\n            if (changeDatasourceUid) {\n              rootDatasourceOverride = changeDatasourceUid;\n              const datasource = await getDatasourceSrv().get(changeDatasourceUid);\n              const datasourceInit = await getDatasourceSrv().get(initialDatasource);\n              await this.props.importQueries(exploreId, queries, datasourceInit, datasource);\n              await this.props.stateSave({ replace: true });\n              queries = this.props.initialQueries;\n            }\n          }\n        }\n      }\n\n      this.props.initializeExplore(\n        exploreId,\n        rootDatasourceOverride || queries[0]?.datasource || initialDatasource,\n        queries,\n        initialRange,\n        width,\n        this.exploreEvents,\n        panelsState\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.exploreEvents.removeAllListeners();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.refreshExplore(prevProps.urlQuery);\n  }\n\n  refreshExplore = (prevUrlQuery: string) => {\n    const { exploreId, urlQuery } = this.props;\n\n    // Update state from url only if it changed and only if the change wasn't initialised by redux to prevent any loops\n    if (urlQuery !== prevUrlQuery && urlQuery !== lastSavedUrl[exploreId]) {\n      this.props.refreshExplore(exploreId, urlQuery);\n    }\n  };\n\n  getRef = (el: HTMLDivElement) => {\n    this.el = el;\n  };\n\n  render() {\n    const { theme, split, exploreId, initialized, eventBus } = this.props;\n    const styles = getStyles(theme);\n    const exploreClass = cx(styles.explore, split && styles.exploreSplit);\n    return (\n      <div className={exploreClass} ref={this.getRef} data-testid={selectors.pages.Explore.General.container}>\n        {initialized && <Explore exploreId={exploreId} eventBus={eventBus} />}\n      </div>\n    );\n  }\n}\n\nconst getTimeRangeFromUrlMemoized = memoizeOne(getTimeRangeFromUrl);\n\nfunction mapStateToProps(state: StoreState, props: OwnProps) {\n  const urlState = parseUrlState(props.urlQuery);\n  const timeZone = getTimeZone(state.user);\n  const fiscalYearStartMonth = getFiscalYearStartMonth(state.user);\n\n  const { datasource, queries, range: urlRange, panelsState } = (urlState || {}) as ExploreUrlState;\n  const initialDatasource = datasource || store.get(lastUsedDatasourceKeyForOrgId(state.user.orgId));\n  const initialRange = urlRange\n    ? getTimeRangeFromUrlMemoized(urlRange, timeZone, fiscalYearStartMonth)\n    : getTimeRange(timeZone, DEFAULT_RANGE, fiscalYearStartMonth);\n\n  return {\n    initialized: state.explore[props.exploreId]?.initialized,\n    initialDatasource,\n    initialQueries: queries,\n    initialRange,\n    panelsState,\n    orgId: state.user.orgId,\n  };\n}\n\nconst mapDispatchToProps = {\n  initializeExplore,\n  refreshExplore,\n  importQueries,\n  stateSave,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport const ExplorePaneContainer = withTheme2(connector(ExplorePaneContainerUnconnected));\n","import { css } from '@emotion/css';\nimport React, { useEffect, useRef } from 'react';\n\nimport { locationService } from '@grafana/runtime';\nimport { ErrorBoundaryAlert, usePanelContext } from '@grafana/ui';\nimport { useGrafana } from 'app/core/context/GrafanaContext';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { useNavModel } from 'app/core/hooks/useNavModel';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\nimport { isTruthy } from 'app/core/utils/types';\nimport { useDispatch, useSelector } from 'app/types';\nimport { ExploreId, ExploreQueryParams } from 'app/types/explore';\n\nimport { Branding } from '../../core/components/Branding/Branding';\nimport { useCorrelations } from '../correlations/useCorrelations';\n\nimport { ExploreActions } from './ExploreActions';\nimport { ExplorePaneContainer } from './ExplorePaneContainer';\nimport { lastSavedUrl, resetExploreAction, saveCorrelationsAction } from './state/main';\n\nconst styles = {\n  pageScrollbarWrapper: css`\n    width: 100%;\n    flex-grow: 1;\n    min-height: 0;\n  `,\n  exploreWrapper: css`\n    display: flex;\n    height: 100%;\n  `,\n};\n\nfunction Wrapper(props: GrafanaRouteComponentProps<{}, ExploreQueryParams>) {\n  useExplorePageTitle();\n  const dispatch = useDispatch();\n  const queryParams = props.queryParams;\n  const { keybindings, chrome, config } = useGrafana();\n  const navModel = useNavModel('explore');\n  const { get } = useCorrelations();\n  const { warning } = useAppNotification();\n  const panelCtx = usePanelContext();\n  const eventBus = useRef(panelCtx.eventBus.newScopedBus('explore', { onlyLocal: false }));\n\n  useEffect(() => {\n    //This is needed for breadcrumbs and topnav.\n    //We should probably abstract this out at some point\n    chrome.update({ sectionNav: navModel.node });\n  }, [chrome, navModel]);\n\n  useEffect(() => {\n    keybindings.setupTimeRangeBindings(false);\n  }, [keybindings]);\n\n  useEffect(() => {\n    if (!config.featureToggles.correlations) {\n      dispatch(saveCorrelationsAction([]));\n    } else {\n      get.execute();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (get.value) {\n      dispatch(saveCorrelationsAction(get.value));\n    } else if (get.error) {\n      dispatch(saveCorrelationsAction([]));\n      warning(\n        'Could not load correlations.',\n        'Correlations data could not be loaded, DataLinks may have partial data.'\n      );\n    }\n  }, [get.value, get.error, dispatch, warning]);\n\n  useEffect(() => {\n    lastSavedUrl.left = undefined;\n    lastSavedUrl.right = undefined;\n\n    // timeSrv (which is used internally) on init reads `from` and `to` param from the URL and updates itself\n    // using those value regardless of what is passed to the init method.\n    // The updated value is then used by Explore to get the range for each pane.\n    // This means that if `from` and `to` parameters are present in the URL,\n    // it would be impossible to change the time range in Explore.\n    // We are only doing this on mount for 2 reasons:\n    // 1: Doing it on update means we'll enter a render loop.\n    // 2: when parsing time in Explore (before feeding it to timeSrv) we make sure `from` is before `to` inside\n    //    each pane state in order to not trigger un URL update from timeSrv.\n    const searchParams = locationService.getSearchObject();\n    if (searchParams.from || searchParams.to) {\n      locationService.partial({ from: undefined, to: undefined }, true);\n    }\n\n    return () => {\n      // Cleaning up Explore state so that when navigating back to Explore it starts from a blank state\n      dispatch(resetExploreAction());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- dispatch is stable, doesn't need to be in the deps array\n  }, []);\n\n  const hasSplit = Boolean(queryParams.left) && Boolean(queryParams.right);\n\n  return (\n    <div className={styles.pageScrollbarWrapper}>\n      <ExploreActions exploreIdLeft={ExploreId.left} exploreIdRight={ExploreId.right} />\n      <div className={styles.exploreWrapper}>\n        <ErrorBoundaryAlert style=\"page\">\n          <ExplorePaneContainer\n            split={hasSplit}\n            exploreId={ExploreId.left}\n            urlQuery={queryParams.left}\n            eventBus={eventBus.current}\n          />\n        </ErrorBoundaryAlert>\n        {hasSplit && (\n          <ErrorBoundaryAlert style=\"page\">\n            <ExplorePaneContainer\n              split={hasSplit}\n              exploreId={ExploreId.right}\n              urlQuery={queryParams.right}\n              eventBus={eventBus.current}\n            />\n          </ErrorBoundaryAlert>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst useExplorePageTitle = () => {\n  const navModel = useNavModel('explore');\n  const datasources = useSelector((state) =>\n    [state.explore.left.datasourceInstance?.name, state.explore.right?.datasourceInstance?.name].filter(isTruthy)\n  );\n\n  document.title = `${navModel.main.text} - ${datasources.join(' | ')} - ${Branding.AppTitle}`;\n};\n\nexport default Wrapper;\n","import { ExploreId, StoreState } from 'app/types';\n\nexport const isSplit = (state: StoreState) => Boolean(state.explore[ExploreId.left] && state.explore[ExploreId.right]);\n\nexport const getExploreItemSelector = (exploreId: ExploreId) => (state: StoreState) => state.explore[exploreId];\n","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){var r;return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!(null===(r=n.constructor)||void 0===r?void 0:r[L])||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n"],"names":["isTruthy","value","Boolean","toEnrichedCorrelationData","sourceUID","targetUID","correlation","source","getDataSourceSrv","getInstanceSettings","target","toEnrichedCorrelationsData","correlations","map","getData","response","data","useCorrelations","backend","useGrafana","getInfo","get","useAsyncFn","lastValueFrom","fetch","url","method","showErrorAlert","then","createInfo","create","post","removeInfo","remove","uid","delete","updateInfo","update","patch","execute","ExploreActions","exploreIdLeft","exploreIdRight","actions","setActions","useState","query","useKBar","dispatch","useDispatch","splitted","useSelector","isSplit","useEffect","exploreSection","name","priority","Priority","actionsArr","push","id","keywords","perform","runQueries","section","splitClose","splitOpen","useRegisterActions","updateReducer","num","resolveHookState","nextState","currentState","length","useGetSet","initialState","state","useRef","useReducer","useMemo","current","newState","ExploreGraph","height","width","timeZone","absoluteRange","onChangeTime","loadingState","annotations","onHiddenSeriesChanged","splitOpenFn","graphStyle","tooltipDisplayMode","TooltipDisplayMode","anchorToZero","eventBus","theme","useTheme2","style","useStyles2","getStyles","showAllTimeSeries","setShowAllTimeSeries","structureRev","inc","incrementStructureRev","initialValue","max","min","init","console","error","Math","_a","setInternal","set","prevState","rState","delta","rDelta","dec","reset","rValue","useCounter","fieldConfigRegistry","createFieldConfigRegistry","getGraphFieldConfig","defaultGraphConfig","fieldConfig","setFieldConfig","defaults","undefined","color","mode","FieldColorModeId","custom","drawStyle","GraphDrawStyle","fillOpacity","pointSize","overrides","timeRange","from","dateTime","to","raw","styledFieldConfig","config","produce","draft","stacking","group","StackingMode","Error","applyGraphStyle","dataWithConfig","applyFieldOverrides","replaceVariables","hiddenFrames","forEach","frame","fields","field","hideFrom","viz","every","identity","getFrameDisplayName","seriesToShow","slice","panelContext","sync","DashboardCursorSync","onSplitOpen","onToggleSeriesVisibility","label","seriesVisibilityConfigFactory","panelOptions","tooltip","sort","SortOrder","legend","displayMode","LegendDisplayMode","showLegend","placement","calcs","PanelContext","className","cx","timeSeriesDisclaimer","Icon","disclaimerIcon","onClick","PanelRenderer","series","pluginId","title","onChangeTimeRange","options","css","spacing","colors","background","primary","warning","main","text","link","ALL_GRAPH_STYLE_OPTIONS","EXPLORE_GRAPH_STYLES","toUpperCase","replace","display","justifyContent","ExploreGraphLabel","props","onChangeGraphStyle","RadioButtonGroup","size","onChange","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","this","constructor","__assign","assign","t","s","i","n","arguments","apply","rowSizeBase","top","left","cursor","colSizeBase","edgeBase","position","styles","right","bottom","topRight","bottomRight","bottomLeft","topLeft","Resizer","_super","_this","onMouseDown","e","onResizeStart","direction","onTouchStart","render","userSelect","replaceStyles","children","DEFAULT_SIZE","clamp","snap","round","hasDirection","dir","RegExp","test","isTouchEvent","event","touches","findClosestSnap","snapArray","snapGap","closestGapIndex","reduce","prev","curr","index","abs","gap","getStringSize","toString","endsWith","getPixelSize","parentSize","innerWidth","innerHeight","Number","definedProps","baseClassName","Resizable","ratio","resizable","parentLeft","parentTop","resizableLeft","resizableRight","resizableTop","resizableBottom","targetLeft","targetTop","appendBase","window","parent","parentNode","element","document","createElement","transform","flex","classList","add","appendChild","removeBase","base","removeChild","ref","c","isResizing","propsSize","original","x","y","backgroundStyle","backgroundColor","opacity","zIndex","flexBasis","bind","onMouseMove","onMouseUp","defineProperty","enumerable","configurable","ownerDocument","defaultView","defaultSize","orgWidth","offsetWidth","orgHeight","offsetHeight","orgPosition","getSize","key","getParentSize","wrapChanged","wrap","flexWrap","minWidth","minHeight","bindEvents","addEventListener","capture","passive","unbindEvents","removeEventListener","componentDidMount","computedStyle","getComputedStyle","setState","componentWillUnmount","createSizeForCssProperty","newSize","kind","calculateNewMaxFromBoundary","maxWidth","maxHeight","boundWidth","boundHeight","boundsByDirection","widthByDirection","heightByDirection","bounds","parent_1","isFinite","calculateNewSizeFromDirection","clientX","clientY","scale","resizeRatio","_b","lockAspectRatio","lockAspectRatioExtraHeight","lockAspectRatioExtraWidth","newWidth","newHeight","extraHeight","extraWidth","calculateNewSizeFromAspectRatio","computedMinWidth","computedMaxWidth","computedMinHeight","computedMaxHeight","extraMinWidth","extraMaxWidth","extraMinHeight","extraMaxHeight","lockedMinWidth","lockedMaxWidth","lockedMinHeight","lockedMaxHeight","setBoundingClientRect","parent_2","parentRect","getBoundingClientRect","targetRect","top_1","nativeEvent","isMouseEvent","parent_3","flexDirection","flexDir","startsWith","TouchEvent","preventDefault","stopPropagation","calculateNewMax","_c","boundaryMax","grid","newGridWidth","newGridHeight","flushSync","onResize","onResizeStop","updateSize","renderResizer","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","handleComponent","resizers","keys","extendsProps","acc","indexOf","sizeStyle","boxSizing","flexShrink","Wrapper","as","defaultProps","drawerSlide","keyframes","components","horizontalDrawer","defaultHeight","stylesFactory","container","border","weak","shadows","z3","navbarFixed","drawerActive","rzHandle","secondary","shade","ExploreDrawer","drawerWidth","mapDispatchToProps","connect","exploreId","item","explore","loading","queryResponse","onClose","dataFrames","reportInteraction","statsTab","icon","content","InspectStatsTab","request","timezone","jsonTab","InspectJSONTab","dataTab","InspectDataTab","isLoading","withTransforms","withFieldConfig","app","CoreApp","tabs","QueryInspector","onRefreshQuery","errorTab","InspectErrorTab","TabbedContainer","closeIconTooltip","TimeSyncButton","isSynced","Tooltip","ToolbarButton","variant","ExploreTimeControls","Component","range","getShiftedTimeRange","dateTimeForTimeZone","onMoveTimePicker","adjustedFrom","dateMath","adjustedTo","timeRangeFrom","timeRangeTo","getZoomedTimeRange","fiscalYearStartMonth","syncedTimes","onChangeTimeSync","hideText","onChangeTimeZone","onChangeFiscalYearStartMonth","timeSyncButton","timePickerCommonProps","onMoveBackward","onMoveBack","onMoveForward","onZoom","TimePickerWithHistory","widthOverride","onChangeTimePicker","LiveTailButton","start","pause","resume","isLive","isPaused","stop","buttonVariant","onClickMain","ButtonGroup","iconOnly","CSSTransition","mountOnEnter","unmountOnExit","timeout","in","classNames","enter","stopButtonEnter","enterActive","stopButtonEnterActive","exit","stopButtonExit","exitActive","stopButtonExitActive","LiveTailControls","controls","useCallback","setPausedStateAction","changeRefreshInterval","RefreshPicker","useLiveTailControls","AddToDashboard","lazy","default","UnConnectedExploreToolbar","PureComponent","async","changeDatasource","dsSettings","importQueries","cancelQueries","syncTimes","createAndCopyShortLink","location","href","split","origin","closeSplit","showSmallTimePicker","refreshInterval","refreshPickerTooltip","refreshPickerText","refreshPickerWidth","onIntervalChanged","onChangeRefreshInterval","intervals","getTimeSrv","getValidIntervals","defaultIntervals","onRefresh","onRunQuery","noIntervalPicker","hasLiveOption","containerWidth","showExploreToDashboard","contextSrv","AccessControlAction","onCloseSplitView","onOpenSplitView","disabled","Suspense","fallback","renderRefreshPicker","SetInterval","func","interval","datasourceType","filter","datasourceMissing","topOfViewRef","showSmallDataSourcePicker","isTopnav","getDashNav","DashNavButton","onCopyShortLink","getDataSourcePicker","DataSourcePicker","mixed","onChangeDatasource","datasourceRef","hideTextValue","topNavActions","ToolbarButtonRow","alignment","renderActions","toolbarLeftItems","ExploreId","toolbarLeftItemsTopNav","AppChromeUpdate","A","PageToolbar","pageIcon","leftItems","updateTimeZoneForSession","updateFiscalYearStartMonthForSession","ExploreToolbar","exploreItem","datasourceInstance","meta","streaming","getRef","type","getTimeZone","user","getFiscalYearStartMonth","connector","FlameGraphExploreContainer","FlameGraphContainer","panel","borderColor","shape","borderRadius","Time","timeInMs","humanize","formatTime","inSeconds","toFixed","duration","toDuration","hours","minutes","seconds","ElapsedTime","resetKey","elapsed","setElapsed","useInterval","LiveLogs","super","React","onPause","scrollTop","clientHeight","scrollHeight","currentTarget","logRowsToRender","rowsToRender","logRows","static","nextProps","onResume","logsRowsLive","typography","fontFamilyMonospace","bodySmall","fontSize","logsRowFade","tinycolor","info","transparent","setAlpha","logsRowsIndicator","h6","button","fullWidth","logsRow","logsRowLocalTime","logsRowMessage","getLogRowStyles","onScroll","scrollContainerRef","row","dateTimeFormat","timeEpochMs","hasAnsi","LogMessageAnsi","entry","liveEndDiv","scrollTo","Button","stopLive","LiveLogsWithTheme","withTheme2","metaContainer","metaItem","metaLabel","fontWeightMedium","metaValue","MetaInfoItem","memo","MetaInfoText","metaItems","LogsMetaRow","dedupStrategy","dedupCount","showDetectedFields","clearDetectedFields","hasUnescapedContent","forceEscape","onEscapeNewlines","logsMetaItem","LogsDedupStrategy","LogsMetaKind","some","r","MAX_CHARACTERS","renderMetaItem","downloadLogsModelAsTxt","rows","LogLabels","labels","displayName","LogsNavigationPages","pages","currentPageIndex","oldestLogsFirst","changeTime","time","format","systemDateFormats","createPageContent","page","Spinner","logsRange","CustomScrollbar","autoHide","pagesWrapper","pagesContainer","pageType","pageNumber","queryRange","line","selectedBg","selectedText","clearButtonStyles","v1","sm","LogsNavigation","logsSortOrder","scrollToTopLogs","visibleRange","queries","clearCache","addResultsToCache","setPages","setCurrentPageIndex","expectedQueriesRef","expectedRangeRef","rangeSpanRef","LogsSortOrder","onFirstPage","onLastPage","newPage","newPages","isEqual","a","sortPages","findIndex","olderLogsButton","navButton","indexChange","navButtonContent","newerLogsButton","navContainer","scrollToTopButton","ErrorAlert","isOpen","setIsOpen","message","showButton","Alert","severity","LogsVolumePanel","onUpdateTimeRange","onLoadLogsVolume","parseInt","logLinesBased","logLinesBasedVisibleRange","fullRangeData","logsVolumeData","createVisualisationData","logLinesBasedData","logLinesBasedDataVisibleRange","LogsVolumePanelContent","extraInfo","LoadingState","zoomRatio","selectedTimeRange","dataRange","logsLevelZoomRatio","InlineField","oldInfoText","Collapse","contentContainer","extraInfoContainer","styleOverridesForStickyNavigation","UnthemedLogs","createRef","showLabels","store","SETTINGS_KEYS","showTime","wrapLogMessage","prettifyLogMessage","hiddenLogLevels","isFlipping","publish","DataHoverEvent","point","DataHoverClearEvent","flipOrderTimer","setTimeout","newSortOrder","cancelFlippingTimer","deduplicationType","checked","hiddenRawLevels","level","LogLevel","onSetLogsVolumeEnabled","onStartScanning","onStopScanning","concat","k","memoizeOne","dedupedRows","dedupLogRows","sum","duplicates","filterLogLevels","Set","firstTimeStamp","lastTimeStamp","topLogsRef","scrollIntoView","logsVolumeEventBus","newScopedBus","onlyLocal","clearTimeout","logsMeta","logsSeries","logsVolumeEnabled","loadLogsVolumeData","onClickFilterLabel","onClickFilterOutLabel","scanning","scanRange","showContextToggle","getFieldLinks","logsQueries","scrollElement","hasData","checkUnescapedContent","filteredLogs","filterRows","dedupRows","navigationRange","createNavigationRange","scanText","rangeUtil","collapsible","onToggle","onToggleLogsVolumeCollapse","onToggleLogLevel","logOptions","InlineFieldRow","horizontalInlineLabel","horizontalInlineSwitch","onChangeLabels","onChangeWrapLogMessage","onChangePrettifyLogMessage","values","dedupType","capitalize","description","LogsDedupDescription","onChangeDedup","radioButtons","onChangeLogsSortOrder","logsSection","LogRows","deduplicatedRows","getRowContext","enableLogDetails","onClickShowDetectedField","showDetectedField","onClickHideDetectedField","hideDetectedField","onLogRowHover","noData","fill","onClickScan","onClickStopScan","Logs","medium","headerButton","logsEnter","logsEnterActive","logsExit","logsExitActive","LogsCrossFadeTransition","visible","transitionDuration","LogsContainer","updateTimeRange","hasLogsContextSupport","find","q","refId","dataFrame","datasource","getLogRowContext","rowIndex","getFieldLinksForExplore","enabled","setLogsVolumeEnabled","logsResult","logsVolumeDataProvider","NoData","PanelContainer","wrapper","h2","NoDataSourceCallToAction","canCreateDataSource","footer","rel","ctaElement","cardClassName","breakpoints","lg","CallToActionCard","callToActionElement","warningText","NodeGraphContainer","withTraceView","getLinks","useLinks","frames","nodes","useCategorizeFrames","open","toggleOpen","useToggle","windowHeight","useWindowSize","containerRef","setTop","countWarning","Badge","expanded","NodeGraph","QueryRows","getQueries","getDatasourceInstanceSettings","getQueryResponse","getHistory","getEventBridge","exploreItemSelector","getExploreItemSelector","createSelector","history","eventBridge","getDatasourceSrv","makeSelectors","onRunQueries","newQueries","changeQueriesAction","onAddQuery","getNextRefIdChar","QueryEditorRows","onDatasourceChange","ds","queryDatasource","targetDS","onMixedDataSourceChange","onQueriesChange","onQueryCopied","onQueryRemoved","onQueryToggled","queryStatus","queryEnabled","FadeIn","defaultStyle","transition","transitionStyles","exited","entering","entered","exiting","Transition","onExited","ErrorContainer","queryError","showError","topSpacing","ResponseErrorContainer","deleteHistoryItem","commentHistoryItem","starHistoryItem","setQueries","rightColumnWidth","rightColumnContentWidth","cardColor","queryCard","palette","orange","cardRow","datasourceContainer","queryActionButtons","queryContainer","queryRow","updateCommentContainer","comment","fontWeightRegular","commentButtonRow","textArea","runButton","dsImg","isRemoved","activeUpdateComment","setActiveUpdateComment","setComment","queryDsInstance","setQueryDsInstance","datasourceUid","getQueryDsInstance","onUpdateComment","queryHistoryEnabled","onCancelUpdateComment","updateComment","TextArea","placeholder","IconButton","queriesToCopy","createQueryText","join","copyStringToClipboard","notifyApp","createSuccessNotification","createUrlFromRichHistory","performDelete","queryId","starred","appEvents","ShowConfirmModalEvent","yesText","onConfirm","iconType","newValue","onKeyDown","keyEvent","shiftKey","ctrlKey","src","datasourceName","queryText","queriesToRun","differentDataSource","RichHistoryQueriesTab","totalQueries","richHistorySearchFilters","updateFilters","clearRichHistoryResults","loadMoreRichHistory","richHistorySettings","activeDatasourceInstance","bgColor","isLight","gray5","dark4","labelSlider","containerContent","containerSlider","fixedSlider","slider","selectors","filterInput","multiselect","sessionName","heading","h4","fontWeightLight","listOfDatasources","createDatasourcesList","datasourceFilters","activeDatasourceOnly","lastUsedDatasourceFilters","filters","search","sortOrder","retentionPeriod","mappedQueriesToHeadings","mapQueriesToHeadings","sortOrderOptions","getSortOrderOptions","partialResults","mapNumbertoTimeInSlider","RangeSlider","tooltipAlwaysVisible","orientation","formatTooltipResult","reverse","onAfterChange","option","FilterInput","Select","order","idx","imgUrl","spaceBetween","input","bold","fontWeightBold","bottomMargin","retentionPeriodOptions","RichHistorySettingsTab","starredTabAsFirstTab","onChangeRetentionPeriod","toggleStarredTabAsFirstTab","toggleactiveDatasourceOnly","deleteRichHistory","selectedOption","v","supportedFeatures","changeRetention","Field","MAX_HISTORY_ITEMS","onlyActiveDataSource","clearHistory","RichHistoryStarredTab","Tabs","availableFilters","includes","UnThemedRichHistory","settingsToUpdate","updateHistorySettings","filtersToUpdate","updateHistorySearchFilters","loadRichHistory","debounce","updateSettings","componentDidUpdate","prevProps","snapshot","richHistory","richHistoryTotal","firstTab","RichHistory","Starred","Settings","toggleActiveDatasourceOnly","defaultTab","initRichHistory","setHeight","_e","_dir","SecondaryActions","containerMargin","addQueryRowButtonHidden","onClickAddQueryRowButton","addQueryRowButtonDisabled","richHistoryRowButtonHidden","richHistoryButtonActive","onClickRichHistoryButton","queryInspectorButtonActive","onClickQueryInspectorButton","loadingInState","tableResult","TableContainer","getMainFrame","df","parentRowIndex","getTableHeight","mainFrame","onCellFilterAdded","ariaLabel","tableWidth","PANEL_BORDER","valueRowIndex","subFrames","Table","subData","TraceViewContainer","traceProp","transformDataFrames","setSearch","spanFindMatches","useSearch","spans","focusedSpanIdForSearch","setFocusedSpanIdForSearch","searchBarSuffix","setSearchBarSuffix","TracePageSearchBar","navigable","searchValue","TraceView","topOfViewRefType","TopOfViewRefType","Explore","rawRange","operator","FILTER_FOR_OPERATOR","FILTER_OUT_OPERATOR","onModifyQueries","queryKeys","addQueryRow","makeAbsoluteTime","action","modifyQueries","modification","modifyQuery","changeSize","scanStart","scanStopAction","changeGraphStyle","openDrawer","panelType","MIXED_DATASOURCE_NAME","tracking","getNodeGraphDataFrames","graphEventBus","logsEventBus","absoluteTimeUnsubsciber","AbsoluteTimeEvent","onMakeAbsoluteTime","unsubscribe","renderEmptyState","exploreContainerStyles","renderNoData","renderGraphPanel","graphResult","showFlameGraph","renderTablePanel","renderLogsPanel","renderNodeGraphPanel","showTrace","memoizedGetNodeGraphDataFrames","renderFlameGraphPanel","flameGraphFrames","renderTraceViewPanel","preferredVisualisationType","showMetrics","showTable","showLogs","showNodeGraph","exploreMain","exploreContainer","exploreContainerTopnav","showPanels","showRichHistory","queryHistoryAvailable","showQueryInspector","showNoData","logsFrames","graphFrames","nodeGraphFrames","tableFrames","traceFrames","testId","autoHeightMin","scrollRefCallback","toggleShowRichHistory","toggleShowQueryInspector","disableHeight","ErrorBoundary","ExplorePaneContainerUnconnected","prevUrlQuery","urlQuery","lastSavedUrl","refreshExplore","el","exploreEvents","EventBusSrv","initialized","initialDatasource","initialQueries","initialRange","panelsState","orgId","queriesDatasourceOverride","rootDatasourceOverride","instance","loadAndInitDatasource","ensureQueries","queryDatasourceDetails","noneHaveDatasource","allDatasourceSame","changeDatasourceUid","datasourceInit","stateSave","initializeExplore","removeAllListeners","exploreSplit","exploreClass","getTimeRangeFromUrlMemoized","getTimeRangeFromUrl","urlState","parseUrlState","urlRange","lastUsedDatasourceKeyForOrgId","getTimeRange","DEFAULT_RANGE","ExplorePaneContainer","pageScrollbarWrapper","exploreWrapper","useExplorePageTitle","navModel","useNavModel","datasources","Branding","queryParams","keybindings","chrome","useAppNotification","panelCtx","usePanelContext","sectionNav","node","setupTimeRangeBindings","featureToggles","saveCorrelationsAction","searchParams","locationService","resetExploreAction","hasSplit","callback","delay","savedCallback","interval_1","setInterval","clearInterval","Q","getPrototypeOf","Function","Z","isArray","L","o","nn","u","has","f","X","Map","l","rn","writable","clear","h","freeze","isFrozen","tn","_","U","j","O","g","S","w","m","P","M","H","I","R","D","F","z","getOwnPropertyDescriptor","E","N","T","C","en","on","Proxy","revocable","revoke","proxy","J","K","G","W","Symbol","B","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","un","Promise","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","path","op","$","an","fn"],"sourceRoot":""}