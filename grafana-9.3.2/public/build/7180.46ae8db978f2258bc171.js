/*! For license information please see 7180.46ae8db978f2258bc171.js.LICENSE.txt */
(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7180],{39498:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var s=n(68404),a=n(72124),i=n(45916);function r(e){const{children:t,instanceSettings:n}=e,r=(0,s.useMemo)((()=>({instanceSettings:n,meta:n.meta})),[n]);return(0,i.jsx)(a._.Provider,{value:r,children:t})}},72124:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});const s=(0,n(68404).createContext)(void 0)},7213:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});n(68404);var s=n(72124),a=n(45916);const i=["children"];function r(e){const{children:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,i);return(0,a.jsx)(s._.Provider,{value:n,children:t})}},77777:(e,t,n)=>{"use strict";function s(e){return"instanceSettings"in e&&"meta"in e}n.d(t,{v:()=>s})},9888:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var s=n(68404),a=n(72124);function i(){const e=(0,s.useContext)(a._);if(!e)throw new Error("usePluginContext must be used within a PluginContextProvider");return e}},22458:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var s=n(7716),a=n(83126),i=n(68633);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=e=>e;class l{constructor(e,t){r(this,"converter",o),this.source=e,this.prop=t}get length(){return this.source.length}get(e){return this.converter(this.source[e][this.prop])}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}class d extends s.G{constructor(e,t){super(),r(this,"name",void 0),r(this,"refId",void 0),r(this,"meta",void 0),r(this,"fields",[]),r(this,"length",0),this.source=e,this.length=e.length;const n=e.length?e[0]:{};t?this.fields=t.map((t=>({name:t,type:(0,i._m)(t,n[t]),config:{},values:new l(e,t)}))):this.setFieldsFromObject(n)}setFieldsFromObject(e){this.fields=Object.keys(e).map((t=>({name:t,type:(0,i._m)(t,e[t]),config:{},values:new l(this.source,t)})))}setFieldType(e,t,n){let s=this.fields.find((t=>t.name===e));return s?s.type=t:(s={name:e,type:t,config:{},values:new l(this.source,e)},this.fields.push(s)),s.values.converter=null!=n?n:o,s}get(e){return this.source[e]}toJSON(){return(0,i.og)(this)}}},10187:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var s=n(35315),a=n(57171);class i extends a.v{constructor(e){super(void 0,(t=>new s.d(Object.assign({},e,{buffer:t}))))}}},99511:(e,t,n)=>{"use strict";n.d(t,{Ib:()=>d,Jy:()=>l,Y:()=>h,vP:()=>u});var s=n(27843),a=n(94582),i=n(68633);const r=["values","state","display"];const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function l(e,t){for(const n in e){const s=o[n];for(const a of e[n])a<t.length&&(t[a]=s)}}function d(e,t){for(let n=0;n<t.length;n++)t[n]=e[t[n]]}function c(e,t){for(const n of t)if(null!=n)return(0,i._m)(e,n);return s.fS.other}function u(e){const{schema:t,data:n}=e;if(!t||!t.fields)throw new Error("JSON needs a fields definition");const i=n?n.values.reduce(((e,t)=>Math.max(e,t.length)),0):0,r=t.fields.map(((e,t)=>{var r,o,u,h;let p=n?n.values[t]:[],g=p.length,m=e.type;g!==i&&(p.length=i,p.fill(void 0,g));let f=null==n||null===(r=n.entities)||void 0===r?void 0:r[t];f&&l(f,p);let v=null==n||null===(o=n.enums)||void 0===o?void 0:o[t];return v&&(d(v,p),m=s.fS.string),Object.assign({},e,{type:null!==(u=m)&&void 0!==u?u:c(e.name,p),config:null!==(h=e.config)&&void 0!==h?h:{},values:new a.G(p),entities:null!=f?f:{}})}));return Object.assign({},t,{fields:r,length:i})}function h(e){const t={values:[]};return{schema:{refId:e.refId,meta:e.meta,name:e.name,fields:e.fields.map((e=>{const{values:n}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);return delete s.entities,t.values.push(n.toArray()),s}))},data:t}}},32898:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var s=n(7716);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends s.G{constructor(e){super(),a(this,"index",0),a(this,"obj",void 0),a(this,"fields",void 0),this.data=e;const t={},n={};for(let s=0;s<e.fields.length;s++){const a=e.fields[s];if(!a.name)continue;n[a.name]=a;const i=()=>a.values.get(this.index);t.hasOwnProperty(a.name)||Object.defineProperty(t,a.name,{enumerable:!0,get:i}),t.hasOwnProperty(s.toString())||Object.defineProperty(t,s,{enumerable:!1,get:i})}this.obj=t,this.fields=n}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(e){if(!this.dataFrame||!this.dataFrame.fields)return;const t=this.dataFrame.fields[e];return t&&t.display?t.display:void 0}get(e){return this.index=e,this.obj}toArray(){return new Array(this.data.length).fill(0).map(((e,t)=>Object.assign({},this.get(t))))}}},26222:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var s=n(27843),a=n(68633);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"fields",[]),i(this,"fieldByName",{}),i(this,"fieldByType",{}),this.fields=e.fields.map(((e,t)=>Object.assign({},e,{index:t})));for(let t=0;t<e.fields.length;t++){const n=e.fields[t];if(n.type===s.fS.other){const e=(0,a.fu)(n);e&&(n.type=e)}this.fieldByType[n.type]||(this.fieldByType[n.type]=[]),this.fieldByType[n.type].push(Object.assign({},n,{index:t})),this.fieldByName[n.name]?console.warn("Duplicate field names in DataFrame: ",n.name):this.fieldByName[n.name]=Object.assign({},n,{index:t})}}getFields(e){if(!e)return[...this.fields];const t=this.fieldByType[e];return t?[...t]:[]}hasFieldOfType(e){const t=this.fieldByType[e];return t&&t.length>0}getFirstFieldOfType(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fieldByType[e].find((e=>{var n;return t||!(null!==(n=e.config.custom)&&void 0!==n&&n.hidden)}))}hasFieldNamed(e){return!!this.fieldByName[e]}hasFieldWithNameAndType(e,t){return!!this.fieldByName[e]&&this.fieldByType[t].filter((t=>t.name===e)).length>0}getFieldByName(e){return this.fieldByName[e]}getFieldsByLabel(e,t){return Object.values(this.fieldByName).filter((n=>n.labels&&n.labels[e]===t))}}},57171:(e,t,n)=>{"use strict";n.d(t,{Y:()=>d,v:()=>c});var s=n(82897),a=n(27843),i=n(68633);var r=n(94582),o=n(7716);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=void 0;class c extends o.G{constructor(e,t){if(super(),l(this,"name",void 0),l(this,"refId",void 0),l(this,"meta",void 0),l(this,"fields",[]),l(this,"first",new r.G),l(this,"creator",void 0),l(this,"parsers",void 0),this.creator=t||(e=>new r.G(e)),e){const{name:t,refId:n,meta:s,fields:a}=e;if(t&&(this.name=t),n&&(this.refId=n),s&&(this.meta=s),a)for(const e of a)this.addField(e)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(e,t){return this.addField({name:t||"",type:(0,i.LI)(e)})}addField(e,t){let n;e.values&&(n=Array.isArray(e.values)?e.values:e.values.toArray());let s=e.type;s||"time"!==e.name&&"Time"!==e.name?(!s&&n&&n.length&&(s=(0,i.LI)(n[0])),s||(s=a.fS.other)):s=a.fS.time;let r=e.name;r||(r=`Field ${this.fields.length+1}`);const o=Object.assign({},e,{name:r,type:s,config:e.config||{},values:this.creator(n)});if(s===a.fS.other&&(s=(0,i.fu)(o),s&&(o.type=s)),this.fields.push(o),this.first=this.fields[0].values,t)for(;o.values.length<t;)o.values.add(d);else this.validate();return o}validate(){const e=this.fields.reduce(((e,t)=>Math.max(e,t.values.length)),0);for(const t of this.fields)for(;t.values.length!==e;)t.values.add(d)}reverse(){for(const e of this.fields)e.values.reverse()}setParser(e,t){return this.parsers||(this.parsers=new Map),this.parsers.set(e,t),t}parseValue(e,t){var n;let s=null===(n=this.parsers)||void 0===n?void 0:n.get(e);return s||(s=this.setParser(e,function(e,t){return t.type||("time"===t.name||"Time"===t.name?t.type=a.fS.time:t.type=(0,i.LI)(e)),t.type===a.fS.number?e=>parseFloat(e):t.type===a.fS.boolean?e=>!("F"===e[0]||"f"===e[0]||"0"===e[0]):e=>e}(t,e))),s(t)}appendRow(e){for(let t=this.fields.length;t<e.length;t++)this.addField({name:`Field ${t+1}`,type:(0,i.LI)(e[t])});if(this.length<1)for(let t=0;t<this.fields.length;t++){const n=this.fields[t];n.type&&n.type!==a.fS.other||(n.type=(0,i.LI)(e[t]))}for(let t=0;t<this.fields.length;t++){const n=this.fields[t];let i=e[t];n.type!==a.fS.string&&(0,s.isString)(i)&&(i=this.parseValue(n,i)),n.values.add(i)}}add(e){const t=e;for(const e of this.fields){let n=t[e.name];e.type!==a.fS.string&&(0,s.isString)(n)&&(n=this.parseValue(e,n)),void 0===n&&(n=d),e.values.add(n)}}set(e,t){if(e>this.length)throw new Error("Unable ot set value beyond current length");const n=t||{};for(const t of this.fields)t.values.set(e,n[t.name])}get(e){const t={};for(const n of this.fields)t[n.name]=n.values.get(e);return t}toJSON(){return(0,i.og)(this)}}},9841:(e,t,n)=>{"use strict";n.d(t,{$q:()=>i,GV:()=>a,YP:()=>l,jC:()=>r,q2:()=>s,r7:()=>o});const s=(e,t)=>({name:e,columns:t}),a=e=>e.columns,i=(e,t)=>e.columns[t],r=(e,t,n)=>e.columns[t].values.get(n),o=(e,t,n)=>e.columns.map((e=>e.values.get(n))),l=(e,t)=>e[t]},3448:(e,t,n)=>{"use strict";n.d(t,{Ch:()=>a,Vv:()=>o,nl:()=>i});var s=n(82897);function a(e,t,n){var a,i;if(e===t)return!0;if((null==e||null===(a=e.fields)||void 0===a?void 0:a.length)!==(null==t||null===(i=t.fields)||void 0===i?void 0:i.length))return!1;if(e.name!==t.name)return!1;for(let a=0;a<e.fields.length;a++){const i=e.fields[a],r=t.fields[a];if(i.type!==r.type||i.name!==r.name)return!1;if(n)continue;if(i.labels&&r.labels&&!o(i.labels,r.labels))return!1;const l=i.config,d=r.config;let c=Object.keys(l),u=Object.keys(d);if(c.length!==u.length)return!1;for(const e of c){if(!(e in d))return!1;if("interval"!==e&&!(0,s.isEqual)(l[e],d[e]))return!1}}return!0}function i(e,t,n){if(e===t)return!0;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(let s=0;s<e.length;s++)if(!n(e[s],t[s]))return!1;return!0}const r=(e,t)=>e===t;function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(e===t)return!0;const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(let a of s)if(!n(e[a],t[a]))return!1;return!0}},68633:(e,t,n)=>{"use strict";n.d(t,{Aw:()=>$,DP:()=>b,Ji:()=>j,LI:()=>x,SX:()=>w,Y6:()=>O,Zr:()=>k,_m:()=>v,aK:()=>N,aY:()=>S,fh:()=>I,fu:()=>y,g0:()=>C,og:()=>T,sV:()=>R});var s=n(82897),a=n(88246),i=n(19794),r=n(32934),o=n(27843),l=n(94582),d=n(21131),c=n(83126),u=n(22458),h=n(99511),p=n(57171);const g=["text","type"];function m(e){const t=e.columns.map((e=>{const t=e,{text:n,type:s}=t,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,g);return{name:null!=n&&n.length?n:e,config:a||{},values:new l.G,type:s&&Object.values(o.fS).includes(s)?s:o.fS.other}}));if(!(0,s.isArray)(e.rows))throw new Error(`Expected table rows to be array, got ${typeof e.rows}.`);for(const n of e.rows)for(let e=0;e<t.length;e++)t[e].values.buffer.push(n[e]);for(const e of t)if(e.type===o.fS.other){const t=y(e);t&&(e.type=t)}return{fields:t,refId:e.refId,meta:e.meta,name:e.name,length:e.rows.length}}const f=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function v(e,t){return!e||"date"!==(e=e.toLowerCase())&&"time"!==e?x(t):o.fS.time}function b(e){return e instanceof Date||(0,a.v9)(e)?o.fS.time:(0,s.isNumber)(e)?o.fS.number:(0,s.isString)(e)?o.fS.string:(0,s.isBoolean)(e)?o.fS.boolean:o.fS.other}function x(e){return e instanceof Date||(0,a.v9)(e)?o.fS.time:(0,s.isNumber)(e)?o.fS.number:(0,s.isString)(e)?f.test(e)?o.fS.number:"true"===e||"TRUE"===e||"True"===e||"false"===e||"FALSE"===e||"False"===e?o.fS.boolean:o.fS.string:(0,s.isBoolean)(e)?o.fS.boolean:o.fS.other}function y(e){if(e.name){const t=e.name.toLowerCase();if("date"===t||"time"===t)return o.fS.time}for(let t=0;t<e.values.length;t++){const n=e.values.get(t);if(null!=n)return x(n)}}const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n of e.fields)if(!n.type||n.type===o.fS.other||t)return Object.assign({},e,{fields:e.fields.map((e=>e.type&&e.type!==o.fS.other&&!t?e:Object.assign({},e,{type:y(e)||o.fS.other})))});return e},j=e=>e&&e.hasOwnProperty("columns"),S=e=>e&&e.hasOwnProperty("fields");function C(e){var t,n;if("fields"in e)return"length"in e&&null!==(t=e.fields[0])&&void 0!==t&&null!==(n=t.values)&&void 0!==n&&n.get?e:new p.v(e);if(e.hasOwnProperty("type")&&"docs"===e.type)return function(e){const t=[{name:e.target,type:o.fS.other,labels:e.tags,config:{unit:e.unit,filterable:e.filterable},values:new l.G}];for(const n of e.datapoints)t[0].values.buffer.push(n);return{name:e.target,refId:e.target,meta:{json:!0},fields:t,length:e.datapoints.length}}(e);if(e.hasOwnProperty("datapoints")||e.hasOwnProperty("points"))return function(e){const t=[],n=[],s=e.datapoints||e.points;for(const e of s)n.push(e[0]),t.push(e[1]);const a=[{name:o.Ls,type:o.fS.time,config:{},values:new l.G(t)},{name:o.M5,type:o.fS.number,config:{unit:e.unit},values:new l.G(n),labels:e.tags}];return e.title&&(a[1].config.displayNameFromDS=e.title),{name:e.target||e.name,refId:e.refId,meta:e.meta,fields:a,length:n.length}}(e);if(e.hasOwnProperty("data"))return e.hasOwnProperty("schema")?(0,h.vP)(e):function(e){const t=new l.G,n=new l.G;for(let s=0;s<e.data.length;s++){const a=e.data[s];t.buffer.push(a[1]),n.buffer.push(a[0])}return{name:e.label,fields:[{name:e.label||o.M5,type:o.fS.number,config:{},values:t},{name:o.Ls,type:o.fS.time,config:{unit:"dateTimeAsIso"},values:n}],length:t.buffer.length}}(e);if(e.hasOwnProperty("columns"))return m(e);if(Array.isArray(e))return new u.i(e);throw console.warn("Can not convert",e),new Error("Unsupported data format")}const k=e=>{const{fields:t}=e,n=e.length,s=[];if(2===t.length){const{timeField:a,timeIndex:i}=R(e);if(a){const a=t[0===i?1:0],o=t[i];for(let e=0;e<n;e++)s.push([a.values.get(e),o.values.get(e)]);return{alias:e.name,target:(0,r.C)(a,e),datapoints:s,unit:t[0].config?t[0].config.unit:void 0,refId:e.refId,meta:e.meta}}}for(let e=0;e<n;e++){const n=[];for(let s=0;s<t.length;s++)n.push(t[s].values.get(e));s.push(n)}return e.meta&&e.meta.json?{alias:t[0].name||e.name,target:t[0].name||e.name,datapoints:t[0].values.toArray(),filterable:t[0].config?t[0].config.filterable:void 0,type:"docs"}:{columns:t.map((e=>{const{name:t,config:n}=e;if(n){const e=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(n),n));return e.text=t,e}return{text:t}})),type:"table",refId:e.refId,meta:e.meta,rows:s}};function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.fields[t];if(!s)return e;const a=[];for(let t=0;t<e.length;t++)a.push(t);const r=(0,i.Mo)(s,n);return a.sort(r),Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{values:new d.o(e.values,a)})))})}function O(e){return Object.assign({},e,{fields:e.fields.map((e=>{const t=[...e.values.toArray()];return t.reverse(),Object.assign({},e,{values:new l.G(t)})}))})}function I(e,t){const n=[];for(const s of e.fields)n.push(s.values.get(t));return n}function T(e){return $(e)}function $(e,t){return{fields:(t?e.fields.filter(t):e.fields).map((e=>{let t=e.values.toArray();return t instanceof Float64Array&&(t=(0,c.n)(e.values)),{name:e.name,type:e.type,config:e.config,values:t,labels:e.labels}})),refId:e.refId,meta:e.meta,name:e.name}}const R=e=>{for(let t=0;t<e.fields.length;t++)if(e.fields[t].type===o.fS.time)return{timeField:e.fields[t],timeIndex:t};return{}}},72026:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>i,m$:()=>r});var s=n(27843),a=n(68633);function i(e){return!e.find((e=>!function(e){return!(e.fields.length>2)&&Boolean(e.fields.find((e=>e.type===s.fS.time)))}(e)))}function r(e){for(let t=0;t<e.length;t++){const n=(0,a.sV)(e[t]);if(void 0!==n.timeField&&void 0!==n.timeIndex)return!0}return!1}},97254:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,Z:()=>r});var s=n(12717);let a=()=>s.Ys;const i=e=>{a=null!=e?e:a},r=e=>{var t,n;return null!==(t=null!==(n=null==e?void 0:e.timeZone)&&void 0!==n?n:a())&&void 0!==t?t:s.Ys}},42914:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isMathString:()=>r,isValid:()=>l,parse:()=>o,parseDateMath:()=>d,roundToFiscal:()=>c});var s=n(82897),a=n(88246);const i=["y","M","w","d","h","m","s","Q"];function r(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function o(e,t,n,i){if(e){if("string"!=typeof e)return(0,a.v9)(e)?e:(0,s.isDate)(e)?(0,a.CQ)(e):void 0;{let s,r,o,l="";return"now"===e.substring(0,3)?(s=(0,a.GY)(n),l=e.substring("now".length)):(r=e.indexOf("||"),-1===r?(o=e,l=""):(o=e.substring(0,r),l=e.substring(r+2)),s=(0,a.CQ)(o,a.VJ)),l.length?d(l,s,t,i):s}}}function l(e){const t=o(e);return!!t&&(!!(0,a.v9)(t)&&t.isValid())}function d(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.replace(/\s/g,""),o=t;let l=0;const d=r.length;for(;l<d;){const e=r.charAt(l++);let t,d,u,h=!1;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(r.charAt(l),10)))d=1;else if(2===r.length)d=parseInt(r.charAt(l),10);else{const e=l;for(;!isNaN(parseInt(r.charAt(l),10));)if(l++,l>10)return;d=parseInt(r.substring(e,l),10)}if(0===t&&1!==d)return;if(u=r.charAt(l++),"f"===u&&(u=r.charAt(l++),h=!0),!(0,s.includes)(i,u))return;0===t?n?h?c(a,o,u,n):o.endOf(u):h?c(a,o,u,n):o.startOf(u):1===t?o.add(d,u):2===t&&o.subtract(d,u)}return o}function c(e,t,n,s){switch(n){case"y":return s?c(e,t,n,!1).add(11,"M").endOf("M"):t.subtract((t.month()-e+12)%12,"M").startOf("M"),t;case"Q":return s?c(e,t,n,!1).add(2,"M").endOf("M"):t.subtract((t.month()-e+3)%3,"M").startOf("M"),t;default:return}}},13960:(e,t,n)=>{"use strict";n.d(t,{IA:()=>h,Ks:()=>l,RA:()=>o,iX:()=>d,jO:()=>u,qb:()=>c,vT:()=>r});var s=n(81396),a=n(17454);const i={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,a.Z)(e);return Object.entries(n).reduce(((e,n)=>{let[s,a]=n;if(a&&0!==a&&("seconds"!==s||t||!e)){return e+`${""!==e?" ":""}${a}${i[s][0]}`}return e}),"")}function o(e){return e.split(" ").reduce(((e,t)=>{const n=t.match(/(\d+)(.+)/),s=null==n?void 0:n[1],a=null==n?void 0:n[2];if(!s||!a)return e;const r=Object.entries(i).find((e=>{let[t,s]=e;return null==s?void 0:s.includes(n[2])})),o=parseInt(s,10);return r?Object.assign({},e,{[r[0]]:o}):e}),{})}function l(e,t){return(0,s.Z)(e,t)}function d(e){const t=new Date;return l(t,e).getTime()-t.getTime()}function c(e){return!isNaN(Date.parse(e))}function u(e){for(const n of e.trim().split(" ")){var t;const e=n.match(/(\d+)(.+)/);if(null===e||3!==e.length)return!1;if(!(null===(t=Object.entries(i).find((t=>{let[n,s]=t;return null==s?void 0:s.includes(e[2])})))||void 0===t?void 0:t[0]))return!1}return!0}function h(e){const t=["h","m","s","ms","us","µs","ns"];for(const n of e.trim().split(" ")){const e=n.match(/([0-9]*[.]?[0-9]+)(.+)/);if(null===e||3!==e.length)return!1;if(!t.includes(e[2]))return!1}return!0}},74333:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Ji:()=>r,U6:()=>o,zf:()=>i});const a="YYYY-MM-DD HH:mm:ss";class i{constructor(){s(this,"fullDate",a),s(this,"fullDateMS","YYYY-MM-DD HH:mm:ss.SSS"),s(this,"interval",{millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"})}update(e){this.fullDate=e.fullDate,this.interval=e.interval,e.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(e){return`time:${e?this.fullDateMS:this.fullDate}`}}function r(e,t,n){if(l())return null!=n?n:a;!t&&navigator&&(t=[...navigator.languages]);const s=new Intl.DateTimeFormat(t||void 0,e),i=s.formatToParts(new Date),r={year:"YYYY",month:"MM",day:"DD",hour:s.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return i.map((e=>r[e.type]||e.value)).join("")}const o=new i,l=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},6432:(e,t,n)=>{"use strict";n.d(t,{E8:()=>d,Fm:()=>c,Hk:()=>u,dq:()=>o,lf:()=>l});var s=n(92467),a=n.n(s),i=n(97254),r=n(74333);const o=(e,t)=>p(e,(0,i.Z)(t)).format(h(t)),l=(e,t)=>p(e,(0,i.Z)(t)).format(),d=(e,t)=>p(e,(0,i.Z)(t)).fromNow(),c=(e,t)=>p(e,(0,i.Z)(t)).format(`${r.U6.fullDate} z`),u=(e,t)=>p(e,(0,i.Z)(t)).format("z"),h=e=>{var t,n;return null!=e&&e.defaultWithMS?null!==(n=null==e?void 0:e.format)&&void 0!==n?n:r.U6.fullDateMS:null!==(t=null==e?void 0:e.format)&&void 0!==t?t:r.U6.fullDate},p=(e,t)=>{const n=e,s=a().tz.zone(t);return s&&s.name?a().utc(n).tz(s.name):"utc"===t?a().utc(n):a().utc(n).local()}},88246:(e,t,n)=>{"use strict";n.d(t,{CQ:()=>h,C_:()=>p,GY:()=>g,Kd:()=>o,Ks:()=>u,Ls:()=>v,VJ:()=>i,i_:()=>r,ig:()=>m,jN:()=>f,k4:()=>l,v9:()=>d,zh:()=>c});var s=n(36365),a=n.n(s);const i=a().ISO_8601,r=e=>{a().locale(e)},o=()=>a().locale(),l=()=>a().localeData(),d=e=>a().isMoment(e),c=(e,t)=>a().utc(e,t),u=(e,t)=>a().duration(e,t),h=(e,t)=>a()(e,t),p=e=>h(e),g=(e,t,n)=>"utc"===e?c(t,n):h(t,n),m=e=>a().weekdays().findIndex((t=>t.toLowerCase()===e.toLowerCase())),f=e=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex((t=>t.toLowerCase()===e.toLowerCase())),v=e=>{const t="-weekStart",n=o().replace(t,""),s=e?f(e):-1;-1!==s?a().locale(n+t,{parentLocale:n,week:{dow:s}}):r(n)}},12482:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var s=n(82897),a=n(92467),i=n.n(a),r=n(97254),o=n(42914),l=n(74333),d=n(88246);const c=(e,t)=>(0,d.v9)(e)?e:"string"==typeof e?u(e,t):h(e,t),u=(e,t)=>{var n;if(-1!==e.indexOf("now")){if(!(0,o.isValid)(e))return i()();return(0,o.parse)(e,null==t?void 0:t.roundUp,null==t?void 0:t.timeZone,null==t?void 0:t.fiscalYearStartMonth)||i()()}const a=(0,r.Z)(t),d=i().tz.zone(a),c=null!==(n=null==t?void 0:t.format)&&void 0!==n?n:l.U6.fullDate;return d&&d.name?i().tz(e,c,d.name):"utc"===(0,s.lowerCase)(a)?i().utc(e,c):i()(e,c)},h=(e,t)=>{const n=e,a=(0,r.Z)(t),o=i().tz.zone(a);return o&&o.name?i().tz(n,o.name):"utc"===(0,s.lowerCase)(a)?i().utc(n):i()(n)}},85699:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calculateInterval:()=>y,convertRawToRange:()=>g,describeInterval:()=>S,describeTextRange:()=>c,describeTimeRange:()=>u,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>k,intervalToSeconds:()=>C,isFiscal:()=>f,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>h,msRangeToTimeString:()=>x,relativeToTimeRange:()=>I,roundInterval:()=>N,secondsToHms:()=>b,timeRangeToRelative:()=>O});var s=n(82897),a=n(42914),i=n(6432),r=n(88246),o=n(12482);const l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},d={};function c(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let n=d[e+" to now"];if(n)return n;n=t?{from:e,to:"now"}:{from:"now",to:e};const s=/^now([-+])(\d+)(\w)/.exec(e);if(s){const e=s[3],a=parseInt(s[2],10),i=l[e];i&&(n.display=t?"Last ":"Next ",n.display+=a+" "+i.display,n.section=i.section,a>1&&(n.display+="s"))}else n.display=n.from+" to "+n.to,n.invalid=!0;return n}function u(e,t){const n=d[e.from.toString()+" to "+e.to.toString()];if(n)return n.display;const s={timeZone:t};if((0,r.v9)(e.from)&&(0,r.v9)(e.to))return(0,i.dq)(e.from,s)+" to "+(0,i.dq)(e.to,s);if((0,r.v9)(e.from)){const t=a.parse(e.to,!0,"utc");return t?(0,i.dq)(e.from,s)+" to "+(0,i.E8)(t,s):""}if((0,r.v9)(e.to)){const t=a.parse(e.from,!1,"utc");return t?(0,i.E8)(t,s)+" to "+(0,i.dq)(e.to,s):""}if("now"===e.to.toString()){return c(e.from).display}return e.from.toString()+" to "+e.to.toString()}(0,s.each)([{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],(e=>{d[e.from+" to "+e.to]=e})),(0,s.each)([{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],(e=>{d[e.from+" to "+e.to]=e}));const h=e=>{if(0===e.indexOf("$")||0===e.indexOf("+$"))return!0;return!0!==c(e).invalid},p=(e,t)=>{if((0,r.v9)(e.from))return(0,i.Hk)(e.from,{timeZone:t});const n=a.parse(e.from,!0);return n?(0,i.Hk)(n,{timeZone:t}):""},g=(e,t,n)=>{const s=(0,o.J)(e.from,{roundUp:!1,timeZone:t,fiscalYearStartMonth:n}),i=(0,o.J)(e.to,{roundUp:!0,timeZone:t,fiscalYearStartMonth:n});return a.isMathString(e.from)||a.isMathString(e.to)?{from:s,to:i,raw:e}:{from:s,to:i,raw:{from:s,to:i}}};function m(e){return"string"==typeof e&&e.indexOf("now")>=0}function f(e){return"string"==typeof e.raw.from&&e.raw.from.indexOf("f")>0||"string"==typeof e.raw.to&&e.raw.to.indexOf("f")>0}function v(e){return m(e.from)||m(e.to)}function b(e){const t=Math.floor(e/31536e3);if(t)return t+"y";const n=Math.floor(e%31536e3/86400);if(n)return n+"d";const s=Math.floor(e%31536e3%86400/3600);if(s)return s+"h";const a=Math.floor(e%31536e3%86400%3600/60);if(a)return a+"m";const i=Math.floor(e%31536e3%86400%3600%60);if(i)return i+"s";const r=Math.floor(1e3*e);return r?r+"ms":"less than a millisecond"}function x(e){const t=Number((e/1e3).toFixed()),n=Math.floor(t/60/60),s=Math.floor(t/60)-60*n,a=Number((t%60).toFixed());let i=n?n+"h":"",r=s?s+"min":"",o=a?a+"sec":"";return i&&r&&(i+=" "),(r||i)&&o&&(r+=" "),i+r+o||"less than 1sec"}function y(e,t,n){let s=1;n&&(s=k(n));let a=N((e.to.valueOf()-e.from.valueOf())/t);return s>a&&(a=s),{intervalMs:a,interval:b(a/1e3)}}const w=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,j={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function S(e){if(Number(e))return{sec:j.s,type:"s",count:parseInt(e,10)};const t=e.match(w);if(!t||!(0,s.has)(j,t[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(j).join(", ")}"`);return{sec:j[t[2]],type:t[2],count:parseInt(t[1],10)}}function C(e){const t=S(e);return t.sec*t.count}function k(e){const t=S(e);return 1e3*t.sec*t.count}function N(e){switch(!0){case e<10:return 1;case e<15:return 10;case e<35:return 20;case e<75:return 50;case e<150:return 100;case e<350:return 200;case e<750:return 500;case e<1500:return 1e3;case e<3500:return 2e3;case e<7500:return 5e3;case e<12500:return 1e4;case e<17500:return 15e3;case e<25e3:return 2e4;case e<45e3:return 3e4;case e<9e4:return 6e4;case e<21e4:return 12e4;case e<45e4:return 3e5;case e<75e4:return 6e5;case e<105e4:return 9e5;case e<15e5:return 12e5;case e<27e5:return 18e5;case e<54e5:return 36e5;case e<9e6:return 72e5;case e<162e5:return 108e5;case e<324e5:return 216e5;case e<864e5:return 432e5;case e<6048e5:return 864e5;case e<18144e5:return 6048e5;case e<36288e5:return 2592e6;default:return 31536e6}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const n=t.unix()-e.from.unix(),s=t.unix()-e.to.unix();return{from:n,to:s}}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const n=(0,r.CQ)(t).subtract(e.from,"s"),s=0===e.to?(0,r.CQ)(t):(0,r.CQ)(t).subtract(e.to,"s");return{from:n,to:s,raw:{from:n,to:s}}}},25214:(e,t,n)=>{"use strict";n.d(t,{$8:()=>u,Pr:()=>d,RQ:()=>o,Vs:()=>l,ZV:()=>c});var s=n(82897),a=n(92467),i=n.n(a),r=n(97254);let o;!function(e){e.default="",e.localBrowserTime="browser",e.utc="utc"}(o||(o={}));const l=e=>{switch((0,r.Z)({timeZone:e})){case"browser":return"Local browser time";case"utc":return"UTC";default:return e}},d=(e,t)=>{const n=h(e,t);return n||p(e,t)},c=(0,s.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return!0===e?t.push(o.default,o.localBrowserTime,o.utc):e&&t.push(...e),i().tz.names().reduce(((e,t)=>{const n=m[t];return Array.isArray(n)&&0!==n.length?(e.push(t),e):e}),t)})),u=(0,s.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=c(e),n=t.reduce(((e,t)=>{var n;const s=t.indexOf("/");if(-1===s){var a;const n="";return e[n]=null!==(a=e[n])&&void 0!==a?a:[],e[n].push(t),e}const i=t.slice(0,s);return e[i]=null!==(n=e[i])&&void 0!==n?n:[],e[i].push(t),e}),{});return Object.keys(n).map((e=>({name:e,zones:n[e]})))})),h=(e,t)=>{switch(e){case o.utc:return{name:"Coordinated Universal Time",ianaName:"UTC",zone:e,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case o.default:{var n,s;const a=(0,r.Z)(),i=null!==(n="browser"===a||"utc"===a?h(a,t):p(a,t))&&void 0!==n?n:{};return Object.assign({countries:null!==(s=m[a])&&void 0!==s?s:[],abbreviation:"",offsetInMins:0},i,{ianaName:i.ianaName,name:"Default",zone:e})}case o.localBrowserTime:{var a,l;const n=i().tz.guess(!0),s=null!==(a=p(n,t))&&void 0!==a?a:{};return Object.assign({countries:null!==(l=m[n])&&void 0!==l?l:[],abbreviation:"Your local time",offsetInMins:(new Date).getTimezoneOffset()},s,{name:"Browser Time",ianaName:s.ianaName,zone:e})}default:return}},p=(e,t)=>{var n;const s=i().tz.zone(e);var a;if(s)return{name:e,ianaName:s.name,zone:e,countries:null!==(n=m[e])&&void 0!==n?n:[],abbreviation:(a=s.abbr(t),/^(\+|\-).+/.test(a)?"":a),offsetInMins:s.utcOffset(t)}},g={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},m=i().tz.countries().reduce(((e,t)=>i().tz.zonesForCountry(t).reduce(((e,n)=>{e[n]||(e[n]=[]);const s=g[t];return s?(e[n].push({code:t,name:s}),e):e}),e)),{})},25317:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var s=n(51125),a=n.n(s),i=n(46060),r=n(14542);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(){o(this,"emitter",void 0),o(this,"subscribers",new Map),this.emitter=new(a())}publish(e){this.emitter.emit(e.type,e)}subscribe(e,t){return this.getStream(e).subscribe({next:t})}getStream(e){return new i.y((t=>{const n=e=>{t.next(e)};return this.emitter.on(e.type,n),this.subscribers.set(n,t),()=>{this.emitter.off(e.type,n),this.subscribers.delete(n)}}))}newScopedBus(e,t){return new d([e],this,t)}emit(e,t){"string"==typeof e?this.emitter.emit(e,{type:e,payload:t}):this.emitter.emit(e.name,{type:e.name,payload:t})}on(e,t,n){if(t.wrapper=e=>{t(e.payload)},"string"==typeof e?this.emitter.on(e,t.wrapper):this.emitter.on(e.name,t.wrapper),n){const s=n.$on("$destroy",(()=>{this.off(e,t),s()}))}}off(e,t){"string"!=typeof e?this.emitter.off(e.name,t.wrapper):this.emitter.off(e,t.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[e,t]of this.subscribers)t.complete(),this.subscribers.delete(e)}}class d{constructor(e,t,n){o(this,"filterConfig",void 0),o(this,"filter",(e=>!this.filterConfig.onlyLocal||e.origin===this)),this.path=e,this.eventBus=t,this.filterConfig=null!=n?n:{onlyLocal:!1}}publish(e){e.origin||(e.origin=this),this.eventBus.publish(e)}getStream(e){return this.eventBus.getStream(e).pipe((0,r.h)(this.filter))}subscribe(e,t){return this.getStream(e).subscribe({next:t})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(e,t){return new d([...this.path,e],this,t)}}},92721:(e,t,n)=>{"use strict";n.d(t,{Pl:()=>d,es:()=>i,n1:()=>l,v9:()=>o,xH:()=>r});var s=n(54209);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends s.R{}a(i,"type","data-hover");class r extends s.m{}a(r,"type","data-hover-clear");class o extends s.R{}a(o,"type","data-select");class l extends s.R{}a(l,"type","annotation-event");class d extends s.R{}a(d,"type","dashboard-loaded")},71390:(e,t,n)=>{"use strict";n.d(t,{X:()=>a});const s=new Set;function a(e){if(s.has(e))throw new Error(`There is already an event defined with type '${e}'`);return s.add(e),{name:e}}},54209:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{R:()=>i,m:()=>a});class a{constructor(){s(this,"type",void 0),s(this,"payload",void 0),s(this,"origin",void 0),this.type=this.__proto__.constructor.type}}class i extends a{constructor(e){super(),s(this,"payload",void 0),this.payload=e}}},97701:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(2238);class a extends s.B{}},43917:(e,t,n)=>{"use strict";n.d(t,{U:()=>p,g:()=>m});var s=n(82897),a=n(68633),i=n(12482),r=n(88246),o=n(27843),l=n(57897),d=n(231),c=n(55343),u=n(23564);const h={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function p(e){var t,n;if(!e||(0,s.isEmpty)(e)||!e.field)return g;const a=e.field,p=null!==(t=a.config)&&void 0!==t?t:{};let m=p.unit,f=m&&(h[m]||m.startsWith("time:")),v=!1;if(a.type!==o.fS.time||f)a.type===o.fS.boolean?(0,c.br)(m)||(m="bool"):m||a.type!==o.fS.string||(m="string");else if(m="dateTimeAsSystem",f=!0,a.values&&a.values.length>1){let e=a.values.get(0),t=a.values.get(a.values.length-1);"string"==typeof e?(e=(0,i.J)(e).unix(),t=(0,i.J)(t).unix()):(e/=1e3,t/=1e3),v=Math.abs(t-e)<60}const b=null===(n=m)||void 0===n?void 0:n.startsWith("currency"),x="bool"===m,y=a.type===o.fS.number,w=!f&&!b&&!x&&!("locale"===m)&&y&&null==p.decimals,j=(0,c.Cf)(m||"none"),S=(0,u.NI)(a,e.theme);return(t,n)=>{const{mappings:a}=p,i="string"===m;f&&"string"==typeof t&&(t=(0,r.zh)(t).valueOf());let o,c,u,h,g,b,x=i?NaN:(0,l.I)(t);if(a&&a.length>0){const n=(0,d.vh)(a,t);n&&(null!=n.text&&(o=n.text),null!=n.color&&(h=e.theme.visualization.getColorByName(n.color)),null!=n.icon&&(g=n.icon))}if(!Number.isNaN(x)){if(null==o&&!(0,s.isBoolean)(t)){let t;w&&null!=n?(t=j(x,n,null,e.timeZone,v),t.text=+t.text+""):t=j(x,p.decimals,null,e.timeZone,v),o=t.text,u=t.suffix,c=t.prefix}if(null==h){const e=S(x);h=e.color,b=e.percent}}if(null==o&&(0,s.isArray)(t)&&(o=(0,s.join)(t,", ")),null==o&&(o=(0,s.toString)(t),o||(o=p.noValue?p.noValue:"")),!h){const e=S(-1/0);h=e.color,b=e.percent}const y={text:o,numeric:x,prefix:c,suffix:u,color:h};return null!=g&&(y.icon=g),null!=b&&(y.percent=b),y}}function g(e){return{text:(0,s.toString)(e),numeric:(0,l.I)(e)}}function m(){return e=>({text:"other"===(0,a.DP)(e)?`${JSON.stringify(e,f())}`:`${e}`,numeric:null})}const f=()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}}},31319:(e,t,n)=>{"use strict";n.d(t,{QY:()=>p,WO:()=>c,YO:()=>g,fD:()=>h});var s=n(25996),a=n(34784),i=n(663),r=n(2238),o=n(23564),l=n(84542);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=new r.B((()=>[{id:i.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:m},{id:i.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(e,t)=>(e,n,s)=>{const a=null!=s?s:l.yM;return t.visualization.getColorByName(a.color)}},new u({id:i.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:e=>e.visualization.palette}),new u({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["green","yellow","red"]}),new u({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:e=>["red","yellow","green"]}),new u({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-red"]}),new u({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:e=>["blue","purple"]}),new u({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-blue"]}),new u({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-blue"]}),new u({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-red"]}),new u({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-green"]}),new u({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-purple"]})]));class u{constructor(e){d(this,"id",void 0),d(this,"name",void 0),d(this,"description",void 0),d(this,"isContinuous",void 0),d(this,"isByValue",void 0),d(this,"colorCache",void 0),d(this,"colorCacheTheme",void 0),d(this,"interpolator",void 0),d(this,"getNamedColors",void 0),this.id=e.id,this.name=e.name,this.description=e.description,this.getNamedColors=e.getColors,this.isContinuous=e.isContinuous,this.isByValue=e.isByValue}getColors(e){return this.getNamedColors?(this.colorCache&&this.colorCacheTheme===e||(this.colorCache=this.getNamedColors(e).map(e.visualization.getColorByName),this.colorCacheTheme=e),this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,s.hD)(this.colorCache)),this.interpolator}getCalculator(e,t){const n=this.getColors(t);return this.isByValue?this.isContinuous?(e,t,n)=>this.getInterpolator()(t):(e,t,s)=>n[t*(n.length-1)]:(t,s,a)=>{var i,r;const o=null!==(i=null===(r=e.state)||void 0===r?void 0:r.seriesIndex)&&void 0!==i?i:0;return n[o%n.length]}}}function h(e){var t,n;return c.get(null!==(t=null===(n=e.config.color)||void 0===n?void 0:n.mode)&&void 0!==t?t:i.S.Thresholds)}function p(e){return c.get(null!=e?e:i.S.Thresholds)}function g(e,t){var n,s,i;const r=h(e);if(!r.isByValue)return{color:r.getCalculator(e,t)(0,0),threshold:l.yM,percent:1};const d=(0,o.NI)(e,t),c=null!==(n=null===(s=e.config.color)||void 0===s?void 0:s.seriesBy)&&void 0!==n?n:"last";return d(null!==(i=(0,a.Kx)({field:e,reducers:[c]})[c])&&void 0!==i?i:0)}function m(e,t){return()=>{var n,s;return t.visualization.getColorByName(null!==(n=null===(s=e.config.color)||void 0===s?void 0:s.fixedColor)&&void 0!==n?n:i.R)}}},39949:(e,t,n)=>{"use strict";n.d(t,{E1:()=>g,HU:()=>h,cB:()=>v,dE:()=>f,gG:()=>j,nG:()=>b,n_:()=>p,pZ:()=>m,sg:()=>S});var s=n(82897),a=n(32898),i=n(68633),r=n(77401),o=n(34784),l=n(31919),d=n(27843),c=n(43917),u=n(32934);const h="__series.name",p="__field.displayName",g="__field.labels",m="__calc",f="__cell_",v=25,b=e=>{var t;const{replaceVariables:n,reduceOptions:h,timeZone:p,theme:g}=e,b=h.calcs.length?h.calcs:[o.gz.last],S=[],C=(0,r.sq)(h.fields?{id:l.mi.byRegexp,options:h.fields}:{id:l.mi.numeric}),k=null!==(t=e.data)&&void 0!==t?t:[],N=h.limit?h.limit:v,O={};let I=!1;for(let t=0;t<k.length&&!I;t++){const r=k[t],{timeField:l}=(0,i.sV)(r),d=new a.U(r);for(let t=0;t<r.fields.length&&!I;t++){var T,$,R;const a=r.fields[t],i=a.getLinks;if(!C(a,r,k))continue;let v=a.config;var P;if(null!==(T=a.state)&&void 0!==T&&T.range)v=Object.assign({},v,null===(P=a.state)||void 0===P?void 0:P.range);const A=null!==($=a.config.displayName)&&void 0!==$?$:"",M=null!==(R=a.display)&&void 0!==R?R:(0,c.U)({field:a,theme:e.theme,timeZone:p});if(h.values){const o=A.indexOf(f)>=0;for(let l=0;l<a.values.length;l++){if(o)for(let e=0;e<r.fields.length;e++){const t=r.fields[e].values.get(l);O[f+e]={value:t,text:(0,s.toString)(t)}}a.state=y(a,S.length);const c=M(a.values.get(l)),u=x(r,a,l,n,O),h=w(u,e.fieldConfig,g);if(S.push({name:"",field:v,display:Object.assign({},c,{title:u,color:null!=h?h:c.color}),view:d,colIndex:t,rowIndex:l,getLinks:i?()=>i({valueRowIndex:l}):()=>[],hasLinks:j(a)}),S.length>=N){I=!0;break}}}else{const s=(0,o.Kx)({field:a,reducers:b});for(const c of b){O[m]={value:c,text:c};const h=M(s[c]);var D;if(""!==A)h.title=n(A,Object.assign({},null===(D=a.state)||void 0===D?void 0:D.scopedVars,O));else h.title=(0,u.C)(a,r,k);let p;e.sparkline&&(p={y:r.fields[t],x:l},c===o.gz.last?p.highlightIndex=p.y.values.length-1:c===o.gz.first&&(p.highlightIndex=0)),S.push({name:c,field:v,display:h,sparkline:p,view:d,colIndex:t,getLinks:i?()=>i({calculatedValue:h}):()=>[],hasLinks:j(a)})}}}}return 0===S.length&&S.push(function(e){var t,n;const a="No data",{fieldConfig:i,timeZone:r}=e,{defaults:o}=i,l=(0,c.U)({field:{type:d.fS.other,config:o},theme:e.theme,timeZone:r})(null),u=function(e,t){if(!e||(0,s.isEmpty)(e.text))return t;return e.text}(l,a);return{name:a,field:Object.assign({},o,{max:null!==(t=o.max)&&void 0!==t?t:0,min:null!==(n=o.min)&&void 0!==n?n:0}),display:{text:u,numeric:0,color:l.color},hasLinks:!1}}(e)),S};function x(e,t,n,s,a){let i=[],r=0;var o;if(t.config.displayName)return s(t.config.displayName,Object.assign({},null===(o=t.state)||void 0===o?void 0:o.scopedVars,a));for(const s of e.fields)if(s!==t)if(s.type===d.fS.string){var l;const e=null!==(l=s.values.get(n))&&void 0!==l?l:"",t=s.display?s.display(e).text:e;t.length>0&&i.push(t)}else s.type===d.fS.number&&r++;return(r||0===i.length)&&i.push((0,u.C)(t,e)),i.join(" ")}function y(e,t){return Object.assign({},e.state,{seriesIndex:t})}function w(e,t,n){for(const s of t.overrides)if("byName"===s.matcher.id&&s.matcher.options===e)for(const e of s.properties)if("color"===e.id&&e.value)return n.visualization.getColorByName(e.value.fixedColor);return null}function j(e){var t,n;return!(null===(t=e.config)||void 0===t||null===(n=t.links)||void 0===n||!n.length)&&e.config.links.length>0}function S(e){const t={title:"",text:""};let n=0,s=0;for(let a=0;a<e.length;a++){const i=e[a].display;i.text&&i.text.length>t.text.length&&(t.text=i.text),i.title&&i.title.length>t.title.length&&(t.title=i.title),i.prefix&&i.prefix.length>n&&(t.prefix=i.prefix,n=i.prefix.length),i.suffix&&i.suffix.length>s&&(t.suffix=i.suffix,s=i.suffix.length)}return t}},71855:(e,t,n)=>{"use strict";n.d(t,{SM:()=>y,Of:()=>O,Xu:()=>x,oB:()=>N,gb:()=>k});var s=n(82897),a=n(68633),i=n(66876),r=n(34784),o=n(77401),l=n(27843),d=n(663),c=n(36298),u=n(66827),h=n(55343),p=n(43917),g=n(32934),m=n(79869),f=n(68959),v=n(41785);function b(e,t,n){return new Proxy({},{get:(s,a,i)=>"name"===a?e.name:"displayName"===a?(0,g.C)(e,t,n):"labels"===a||"formattedLabels"===a?e.labels?Object.assign({},e.labels,{__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,v.aA)(e.labels,"",!0)}):"":void 0})}function x(e){var t,n;let s=null,a=null;const i=[r.gz.min,r.gz.max];for(const t of e)for(const e of t.fields)if(e.type===l.fS.number){const t=(0,r.Kx)({field:e,reducers:i}),n=t[r.gz.min],o=t[r.gz.max];(null===s||n<s)&&(s=n),(null===a||o>a)&&(a=o)}return{min:s,max:a,delta:(null!==(t=a)&&void 0!==t?t:0)-(null!==(n=s)&&void 0!==n?n:0)}}function y(e){var t;if(!e.data)return[];const n=e.fieldConfig;if(!n)return e.data;const i=null!==(t=e.fieldConfigRegistry)&&void 0!==t?t:f.N;let r,d=0;const c=[];if(n.overrides)for(const e of n.overrides){const t=o.Ls.get(e.matcher.id);t&&c.push({match:t.get(e.matcher.options),properties:e.properties})}return e.data.map(((t,o)=>{const u=Object.assign({},t);u.fields=u.fields.map((e=>Object.assign({},e,{config:(0,s.cloneDeep)(e.config),state:Object.assign({},e.state)})));const h={__series:{text:"Series",value:{name:(0,g.n)(u,o)}}};for(const t of u.fields){const g=t.config;t.state.scopedVars=Object.assign({},h,{__field:{text:"Field",value:b(t,u,e.data)}});const v={field:t,data:e.data,dataFrameIndex:o,replaceVariables:e.replaceVariables,fieldConfigRegistry:i};S(g,n.defaults,v);for(const n of c)if(n.match(t,u,e.data))for(const e of n.properties)j(g,e,v);let y,C=t.type;if(!C||C===l.fS.other){const e=(0,a.fu)(t);e&&(C=e)}if(t.type===l.fS.number){var m,f;r||(0,s.isNumber)(g.min)&&(0,s.isNumber)(g.max)||(r=x(e.data));const t=null!==(m=g.min)&&void 0!==m?m:r.min,n=null!==(f=g.max)&&void 0!==f?f:r.max;y={min:t,max:n,delta:n-t}}t.state.seriesIndex=d,t.state.range=y,t.type=C,t.type!==l.fS.time&&d++,t.display=(0,p.U)({field:t,theme:e.theme,timeZone:e.timeZone}),"dateTimeFromNow"!==t.config.unit&&(t.display=w(t.display,2500)),t.getLinks=N(u,t,t.state.scopedVars,v.replaceVariables,e.timeZone)}return u}))}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const n=new Map;for(let e=-1;e<=15;e++)n.set(e,new Map);return(s,a)=>{let r=n.get(null!=a?a:-1),o=r.get(s);return o||(r.size===t&&r.clear(),o=e(s,a),o.color&&(o.color=(0,i.asHexString)(o.color)),r.set(s,o)),o}}function j(e,t,n){const a=n.fieldConfigRegistry.getIfExists(t.id);if(!a)return;const i=a.process(t.value,n,a.settings);null==i?a.isCustom&&e.custom?(0,s.unset)(e.custom,a.path):(0,s.unset)(e,a.path):a.isCustom?(e.custom||(e.custom={}),(0,s.set)(e.custom,a.path,i)):(0,s.set)(e,a.path,i)}function S(e,t,n){for(const s of n.fieldConfigRegistry.list())s.isCustom&&!e.custom&&(e.custom={}),C(s.isCustom?e.custom:e,s.isCustom?t.custom:t,s,n);k(e)}function C(e,t,n,a){const i=(0,s.get)(e,n.path);if(null==i){const i=a.fieldConfigRegistry.getIfExists(n.id);if(!i)return;if(i&&i.shouldApply(a.field)){const n=i.process((0,s.get)(t,i.path),a,i.settings);null!=n&&(0,s.set)(e,i.path,n)}}}function k(e){const{thresholds:t}=e;if(e.color?e.color.mode||delete e.color:t&&(e.color={mode:d.S.Thresholds}),e.hasOwnProperty("min")&&e.hasOwnProperty("max")&&e.min>e.max){const t=e.max;e.max=e.min,e.min=t}}const N=(e,t,n,s,i)=>r=>{if(!t.config.links||0===t.config.links.length)return[];const o=c.u.getTimeRangeUrlParams(),{timeField:l}=(0,a.sV)(e);return t.config.links.map((a=>{const d=c.u.getVariablesUrlParams();let p={},g={};if(void 0===r.valueRowIndex||isNaN(r.valueRowIndex))r.calculatedValue&&(g={raw:r.calculatedValue.numeric,numeric:r.calculatedValue.numeric,text:(0,h.zc)(r.calculatedValue)});else{const n=(0,m.z)({frame:e,rowIndex:r.valueRowIndex,timeZone:i});g={raw:t.values.get(r.valueRowIndex),numeric:n[t.name].numeric,text:n[t.name].text,time:l?l.values.get(r.valueRowIndex):void 0},p={__data:{value:{name:e.name,refId:e.refId,fields:n},text:"Data"}}}const f=Object.assign({},n,{__value:{text:"Value",value:g}},p,{[u.W.keepTime]:{text:o,value:o},[u.W.includeVars]:{text:d,value:d}});if(a.onClick)return{href:a.url,title:s(a.title||"",f),target:a.targetBlank?"_blank":void 0,onClick:(e,n)=>{a.onClick({origin:null!=n?n:t,e,replaceVariables:e=>s(e,f)})},origin:t};if(a.internal)return(0,u._)({link:a,internalLink:a.internal,scopedVars:f,field:t,range:{},replaceVariables:s});let v=c.u.assureBaseUrl(a.url.replace(/\n/g,""));v=s(v,f),v=c.u.processUrl(v);return{href:v,title:s(a.title||"",f),target:a.targetBlank?"_blank":void 0,origin:t}}))};function O(e){if(!e||0===e.length)return[];const t=[...e],n=(0,p.g)();for(let e=0;e<t.length;e++){const s=Object.assign({},t[e]),a=[...s.fields];for(let e=0;e<a.length;e++)a[e]=Object.assign({},a[e],{display:n});t[e]=Object.assign({},s,{fields:a})}return t}},32934:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,n:()=>i});var s=n(27843),a=n(41785);function i(e,t){if(e.name)return e.name;const n=[];for(const t of e.fields)t.labels&&Object.keys(t.labels).length>0&&n.push(t);return 1===n.length?(0,a.aA)(n[0].labels):void 0===t?e.fields.filter((e=>e.type!==s.fS.time)).map((t=>r(t,e))).join(", "):e.refId?`Series (${e.refId})`:`Series (${t})`}function r(e,t,n){var i,r;const o=null===(i=e.state)||void 0===i?void 0:i.displayName,l=Boolean(n&&n.length>1);if(o&&l===(null===(r=e.state)||void 0===r?void 0:r.multipleFrames))return o;const d=function(e,t,n){var i,r,o;const l=(null===(i=e.config)||void 0===i?void 0:i.displayName)&&(null===(r=e.config)||void 0===r?void 0:r.displayName.length);let d=l?e.config.displayName:e.name;if(l)return d;if(t&&null!==(o=e.config)&&void 0!==o&&o.displayNameFromDS)return e.config.displayNameFromDS;var c;if(e.type===s.fS.time&&!e.labels)return null!==(c=d)&&void 0!==c?c:s.Ls;let u=[],h=!1;if(n&&n.length>1)for(let e=1;e<n.length;e++){if(n[e].name!==n[e-1].name){h=!0;break}}let p=!1,g=!1;h&&null!=t&&t.name&&(u.push(t.name),p=!0);e.name&&e.name!==s.M5&&u.push(e.name);if(e.labels&&t){let s=function(e){let t=null;for(let n=0;n<e.length;n++){const s=e[n];for(const e of s.fields)if(e.labels)for(const n in e.labels)if(null===t)t=n;else if(n!==t)return null}return t}(null!=n?n:[t]);if(s)e.labels[s]&&(u.push(e.labels[s]),g=!0);else{let t=(0,a.aA)(e.labels);t&&(u.push(t),g=!0)}}!t||p||g||e.name!==s.M5||t.name&&t.name.length>0&&(u.push(t.name),p=!0);d=u.length?u.join(" "):e.name?e.name:s.M5;d===e.name&&(d=function(e,t){let n=0,s=!1;if(t)for(let a=0;a<t.fields.length;a++){const i=t.fields[a];if(e===i){if(s=!0,n>0){n++;break}}else if(e.name===i.name&&(n++,s))break}if(n)return`${e.name} ${n}`;return e.name}(e,t));return d}(e,t,n);return e.state=e.state||{},e.state.displayName=d,e.state.multipleFrames=l,d}},79869:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var s=n(82897),a=n(55343),i=n(43917);function r(e){return new Proxy({},{get:(t,n)=>{var r;let o=e.frame.fields.find((e=>n===e.name));if(!o){const t=(0,s.toNumber)(n);o=e.frame.fields[t]}if(o||(o=e.frame.fields.find((e=>n===e.config.displayName))),o||(o=e.frame.fields.find((e=>!!e.labels&&n===e.labels.name))),!o)return;const l=(null!==(r=o.display)&&void 0!==r?r:(0,i.U)())(o.values.get(e.rowIndex));return l.toString=()=>(0,a.zc)(l),l}})}},97859:(e,t,n)=>{"use strict";n.d(t,{AE:()=>l,NN:()=>r,Oh:()=>a,VB:()=>u,W0:()=>i,W4:()=>h,ZN:()=>c,kG:()=>s,op:()=>d,uj:()=>o});const s=(e,t,n)=>e,a=(e,t,n)=>{if(null!=e)return parseFloat(e)},i=(e,t,n)=>{var s,a;return null===(s=t.field)||void 0===s||(null===(a=s.state)||void 0===a||delete a.displayName),d(e,t,n)},r=(e,t,n)=>e,o=(e,t,n)=>e,l=(e,t,n)=>e,d=(e,t,n)=>null==e?e:n&&n.expandTemplateVars&&t.replaceVariables?t.replaceVariables(e,t.field.state.scopedVars):`${e}`,c=(e,t,n)=>e,u=(e,t,n)=>e,h=(e,t,n)=>e},23564:(e,t,n)=>{"use strict";n.d(t,{NI:()=>l,dz:()=>d,xD:()=>c});var s=n(82897),a=n(34784),i=n(27843),r=n(31319),o=n(84542);function l(e,t){var n,s;if(e.type===i.fS.boolean)return function(e,t){const n={color:t.visualization.getColorByName("green"),percent:1,threshold:void 0},s={color:t.visualization.getColorByName("red"),percent:0,threshold:void 0},a=(0,r.fD)(e);if(a.isContinuous&&a.getColors){const e=a.getColors(t);n.color=e[e.length-1],s.color=e[0]}return e=>Boolean(e)?n:s}(e,t);const a=(0,r.fD)(e).getCalculator(e,t),l=null!==(n=null===(s=e.state)||void 0===s?void 0:s.range)&&void 0!==n?n:d(e);return t=>{let n=0;t!==-1/0&&(n=(t-l.min)/l.delta,Number.isNaN(n)&&(n=0));const s=(0,o.pD)(e,t,n);return{percent:n,threshold:s,color:a(t,n,s)}}}function d(e){if(e.type!==i.fS.number)return{min:0,max:100,delta:100};let t=e.config.min,n=e.config.max;if(!(0,s.isNumber)(t)||!(0,s.isNumber)(n))if(e.values&&e.values.length){const i=(0,a.Kx)({field:e,reducers:[a.gz.min,a.gz.max]});(0,s.isNumber)(t)||(t=i[a.gz.min]),(0,s.isNumber)(n)||(n=i[a.gz.max])}else t=0,n=100;return{min:t,max:n,delta:n-t}}function c(e,t){var n;const{config:a}=e;let{min:i,max:r}=a;return(0,s.isNumber)(i)&&(0,s.isNumber)(r)?a:t||null===(n=e.state)||void 0===n||!n.range?Object.assign({},a,d(e)):Object.assign({},a,e.state.range)}},68959:(e,t,n)=>{"use strict";n.d(t,{N:()=>a,S:()=>i});var s=n(2238);const a=new(n(97701).Z),i=new s.B},84542:(e,t,n)=>{"use strict";n.d(t,{bP:()=>l,m1:()=>r,pD:()=>o,yM:()=>i});var s=n(663),a=n(87602);const i={value:0,color:s.R};function r(e,t){if(!t||0===t.length)return i;let n=t[0];for(const s of t){if(!(e>=s.value))break;n=s}return n}function o(e,t,n){const{thresholds:s}=e.config;return(null==s?void 0:s.mode)===a.H.Percentage?r(100*n,null==s?void 0:s.steps):r(t,null==s?void 0:s.steps)}function l(e){return e.sort(((e,t)=>e.value-t.value))}},80622:(e,t,n)=>{"use strict";let s;n.d(t,{q:()=>s}),function(e){e.Auto="auto",e.Geohash="geohash",e.Coords="coords",e.Lookup="lookup"}(s||(s={}))},68089:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractLabelOperator:()=>D.K2,AlertState:()=>ee.Z,AnnotationChangeEvent:()=>rt.n1,AnnotationEventFieldSource:()=>A.L,AppEvents:()=>K.SI,AppPlugin:()=>_.k8,AppendedVectors:()=>ae,ArrayDataFrame:()=>we.i,ArrayVector:()=>ie.G,AsNumberVector:()=>ge.s,BinaryOperationID:()=>g.L,BinaryOperationVector:()=>le.r,BusEventBase:()=>at.m,BusEventWithPayload:()=>at.R,ByNamesMatcherMode:()=>Pe.Ys,CSVHeaderStyle:()=>o.x5,CSVReader:()=>o.QM,CircularDataFrame:()=>ve.a,CircularVector:()=>re.d,ConstantVector:()=>oe.u,CoreApp:()=>_.zj,CustomVariableSupport:()=>Y.Mg,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>qe.cB,DEFAULT_SAML_NAME:()=>O.bm,DashboardCursorSync:()=>P.m,DashboardLoadedEvent:()=>rt.Pl,DataFrameType:()=>$.P,DataFrameView:()=>me.U,DataHoverClearEvent:()=>rt.xH,DataHoverEvent:()=>rt.es,DataLinkBuiltInVars:()=>w.W,DataQueryErrorType:()=>W.eA,DataSelectEvent:()=>rt.v9,DataSourceApi:()=>W.MF,DataSourcePlugin:()=>W.hf,DataSourcePluginContextProvider:()=>mt.n,DataSourceVariableSupport:()=>Y.gv,DataTopic:()=>D.w5,DataTransformerID:()=>Ne.W,DefaultTimeZone:()=>E.Ys,DocsId:()=>j.x,EventBusSrv:()=>it.F,ExploreMode:()=>W.Ru,FALLBACK_COLOR:()=>Z.R,FeatureState:()=>_.CQ,FieldCache:()=>fe.N,FieldColorModeId:()=>Z.S,FieldConfigEditorBuilder:()=>v.vo,FieldConfigOptionsRegistry:()=>Je.Z,FieldConfigProperty:()=>B.qb,FieldMatcherID:()=>ke.mi,FieldType:()=>T.fS,FormattedVector:()=>he,FrameGeometrySourceMode:()=>ct.q,FrameMatcherID:()=>ke.E4,GAUGE_DEFAULT_MAXIMUM:()=>O.Z3,GAUGE_DEFAULT_MINIMUM:()=>O.Hx,GrafanaPlugin:()=>H.Sg,GrafanaThemeType:()=>G.Q,ISO_8601:()=>Ee.VJ,IndexVector:()=>pe.r,InternalTimeZones:()=>Ve.RQ,LanguageProvider:()=>W.iL,LayoutModes:()=>ut.l,LegacyGraphHoverClearEvent:()=>K.oi,LegacyGraphHoverEvent:()=>K.IA,LegacyMappingType:()=>N.HU,LiveChannelConnectionState:()=>J.yS,LiveChannelEventType:()=>J.FU,LiveChannelScope:()=>J.z,LiveChannelType:()=>J.SK,LoadingState:()=>I.Gu,LogLevel:()=>M.in,LogsDedupDescription:()=>M.Uv,LogsDedupStrategy:()=>M.Y4,LogsMetaKind:()=>M.Ku,LogsParsers:()=>l.bA,LogsSortOrder:()=>M.UV,MISSING_VALUE:()=>be.Y,MappingType:()=>z.H,MatcherID:()=>ke.Ff,MutableDataFrame:()=>be.v,NavMenuItemType:()=>F.VO,NavSection:()=>F.yV,NodeGraphDataFrameFieldNames:()=>m.z,NullValueMode:()=>I.Gl,OrgRole:()=>Q.B,PageLayoutType:()=>F.Qz,PanelEvents:()=>K.Kh,PanelOptionsEditorBuilder:()=>v.rt,PanelPlugin:()=>ht.c,PluginContextProvider:()=>gt.b,PluginErrorCode:()=>H.w2,PluginIncludeType:()=>H.$_,PluginSignatureStatus:()=>H.Xy,PluginSignatureType:()=>H._Z,PluginState:()=>H.BV,PluginType:()=>H.zV,ReducerID:()=>Te.gz,Registry:()=>a.B,SortedVector:()=>de.o,SpecialValueMatch:()=>z.e,StandardVariableSupport:()=>Y.v6,SystemDateFormatsState:()=>ze.zf,TIME_FORMAT:()=>E.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>T.rN,TIME_SERIES_TIME_FIELD_NAME:()=>T.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>T.M5,ThresholdsMode:()=>V.H,VAR_CALC:()=>qe.pZ,VAR_CELL_PREFIX:()=>qe.dE,VAR_FIELD_LABELS:()=>qe.E1,VAR_FIELD_NAME:()=>qe.n_,VAR_SERIES_NAME:()=>qe.HU,ValueMatcherID:()=>ke.mE,VariableHide:()=>q.bU,VariableOrigin:()=>R.L,VariableRefresh:()=>q.Bd,VariableSort:()=>q.$U,VariableSuggestionsScope:()=>R.o,VariableSupportBase:()=>Y.Tq,VariableSupportType:()=>Y.j2,VisualizationSuggestionScore:()=>U._,VisualizationSuggestionsBuilder:()=>U.mi,VisualizationSuggestionsListAppender:()=>U.sf,VizOrientation:()=>U.wm,addDurationToDate:()=>We.Ks,addLogLevelToSeries:()=>l.Ar,anySeriesWithTimeField:()=>Ce.m$,anyToNumber:()=>C.I,applyFieldOverrides:()=>Xe.SM,applyRawFieldOverrides:()=>Xe.Of,arrayUtils:()=>s,availableIconsIndex:()=>te._S,binaryOperators:()=>g.n,booleanOverrideProcessor:()=>Qe.W4,booleanValueFormatter:()=>ce.IR,buildHistogram:()=>Ae.gY,calculateFieldStats:()=>l.zd,calculateLogsLabelStats:()=>l.lL,calculateStats:()=>l.i6,checkLogsError:()=>l.Mi,classicColors:()=>h,colorManipulator:()=>lt,compareArrayValues:()=>Se.nl,compareDataFrameStructures:()=>Se.Ch,convertOldAngularValueMappings:()=>N.Jb,createDimension:()=>ye.q2,createFieldConfigRegistry:()=>pt.j,createTheme:()=>ot.j,dataFrameFromJSON:()=>je.vP,dataFrameToJSON:()=>je.Y,dataLinksOverrideProcessor:()=>Qe.NN,dateMath:()=>Le,dateTime:()=>Ee.CQ,dateTimeAsMoment:()=>Ee.C_,dateTimeForTimeZone:()=>Ee.GY,dateTimeFormat:()=>Be.dq,dateTimeFormatISO:()=>Be.lf,dateTimeFormatTimeAgo:()=>Be.E8,dateTimeFormatWithAbbrevation:()=>Be.Fm,dateTimeParse:()=>_e.J,decodeFieldValueEntities:()=>je.Jy,decodeFieldValueEnums:()=>je.Ib,deprecationWarning:()=>r.d,displayNameOverrideProcessor:()=>Qe.W0,doStandardCalcs:()=>Te.uP,durationToMilliseconds:()=>We.iX,ensureTimeField:()=>Me.J_,escapeStringForRegex:()=>He.GE,escapeUnescapedString:()=>l.l3,eventFactory:()=>st.X,fieldColorModeRegistry:()=>Ke.WO,fieldMatchers:()=>Oe.Ls,fieldReducers:()=>Te.TB,findCommonLabels:()=>d.FT,findHighlightChunksInText:()=>He.Xt,findMatchesInText:()=>He.lu,findUniqueLabels:()=>d.IU,formatLabels:()=>d.aA,formattedValueToString:()=>ce.zc,frameMatchers:()=>Oe.Ac,getActiveThreshold:()=>Ye.m1,getAllValuesFromDimension:()=>ye.r7,getColumnFromDimension:()=>ye.$q,getColumnsFromDimension:()=>ye.GV,getDataFrameRow:()=>xe.fh,getDataSourceRef:()=>i.iU,getDataSourceUID:()=>i.BT,getDefaultRelativeTimeRange:()=>E.Rr,getDefaultTimeRange:()=>E.JK,getDimensionByName:()=>ye.YP,getDisplayProcessor:()=>Ze.U,getDisplayValueAlignmentFactors:()=>qe.sg,getFieldColorMode:()=>Ke.QY,getFieldColorModeForField:()=>Ke.fD,getFieldConfigWithMinMax:()=>nt.xD,getFieldDisplayName:()=>tt.C,getFieldDisplayValues:()=>qe.nG,getFieldDisplayValuesProxy:()=>et.z,getFieldMatcher:()=>Oe.sq,getFieldSeriesColor:()=>Ke.YO,getFieldTypeFromValue:()=>xe.DP,getFlotPairs:()=>b.k,getFlotPairsConstant:()=>b.H,getFrameDisplayName:()=>tt.n,getFrameMatchers:()=>Oe.b9,getHistogramFields:()=>Ae.qr,getLinksSupplier:()=>Xe.oB,getLocale:()=>Ee.Kd,getLocaleData:()=>Ee.k4,getLogLevel:()=>l.ZO,getLogLevelFromKey:()=>l.jx,getParser:()=>l.MT,getRawDisplayProcessor:()=>Ze.g,getScaleCalculator:()=>nt.NI,getSeriesTimeStep:()=>p.e,getTimeField:()=>xe.sV,getTimeZone:()=>Ue.Z,getTimeZoneGroups:()=>Ve.$8,getTimeZoneInfo:()=>Ve.Pr,getTimeZones:()=>Ve.ZV,getValueFormat:()=>ce.Cf,getValueFormats:()=>ce.QW,getValueFormatterIndex:()=>ce.Td,getValueFromDimension:()=>ye.jC,getValueMatcher:()=>Oe.IG,getWeekdayIndex:()=>Ee.ig,getWeekdayIndexByEnglishName:()=>Ee.jN,guessDecimals:()=>c.d,guessFieldTypeForField:()=>xe.fu,guessFieldTypeFromNameAndValue:()=>xe._m,guessFieldTypeFromValue:()=>xe.LI,guessFieldTypes:()=>xe.SX,hasLinks:()=>qe.gG,hasLogsContextSupport:()=>M.Q4,hasLogsVolumeSupport:()=>L.O,hasMsResolution:()=>p.f,hasQueryExportSupport:()=>D.p,hasQueryImportSupport:()=>D.CZ,histogramBucketSizes:()=>Ae.Zi,histogramFieldInfo:()=>Ae.py,histogramFieldsToFrame:()=>Ae.zM,histogramFrameBucketMaxFieldName:()=>Ae.cO,histogramFrameBucketMinFieldName:()=>Ae.wL,histogramTransformer:()=>Ae.Op,identityOverrideProcessor:()=>Qe.kG,incrRound:()=>Ae.Jz,incrRoundDn:()=>Ae.mB,incrRoundUp:()=>Ae.UO,intervalToAbbreviatedDurationString:()=>We.vT,isBooleanUnit:()=>ce.br,isDataFrame:()=>xe.aY,isDataSourcePluginContext:()=>vt.v,isDataSourceRef:()=>i.cv,isDateTime:()=>Ee.v9,isIconName:()=>te.Mo,isLiveChannelJoinEvent:()=>J.mx,isLiveChannelLeaveEvent:()=>J.gH,isLiveChannelMessageEvent:()=>J.RL,isLiveChannelStatusEvent:()=>J.se,isSystemOverride:()=>B.v3,isSystemOverrideWithRef:()=>B.Y4,isTableData:()=>xe.Ji,isUnsignedPluginSignature:()=>X.x,isValidDate:()=>We.qb,isValidDuration:()=>We.jO,isValidGoDuration:()=>We.IA,isValidLiveChannelAddress:()=>J.nU,localTimeFormat:()=>ze.Ji,locale:()=>ce.SP,locationUtil:()=>x.u,makeClassES5Compatible:()=>S.s,mapInternalLinkToExplore:()=>w._,matchAllLabels:()=>d.VS,monacoLanguageRegistry:()=>dt.F,numberOverrideProcessor:()=>Qe.Oh,objRemoveUndefined:()=>u,onUpdateDatasourceJsonDataOption:()=>i._R,onUpdateDatasourceJsonDataOptionChecked:()=>i.hz,onUpdateDatasourceJsonDataOptionSelect:()=>i.nx,onUpdateDatasourceOption:()=>i.z_,onUpdateDatasourceResetOption:()=>i.HD,onUpdateDatasourceSecureJsonDataOption:()=>i.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>i.TX,outerJoinDataFrames:()=>De._9,parseDuration:()=>We.RA,parseFlags:()=>He.TL,parseLabels:()=>d.J8,parseLiveChannelAddress:()=>J.H7,preferredVisualizationTypes:()=>I.dC,rangeUtil:()=>Fe,readCSV:()=>o.uP,reduceField:()=>Te.Kx,renderMarkdown:()=>He.ap,renderTextPanelMarkdown:()=>He.xH,reverseDataFrame:()=>xe.Y6,roundDecimals:()=>c.O,scaledUnits:()=>ce.Qj,selectOverrideProcessor:()=>Qe.AE,serializeStateToUrlParam:()=>y.S,setLocale:()=>Ee.i_,setTimeZoneResolver:()=>Ue.K,setWeekStart:()=>Ee.Ls,shallowCompare:()=>Se.Vv,simpleCountUnit:()=>ce.SR,sortDataFrame:()=>xe.aK,sortInAscendingOrder:()=>l.DA,sortInDescendingOrder:()=>l.$8,sortLogRows:()=>l.$u,sortLogsResult:()=>l.j0,sortThresholds:()=>Ye.bP,standardEditorsRegistry:()=>Ge.S,standardFieldConfigEditorRegistry:()=>Ge.N,standardTransformers:()=>Ie.Y,standardTransformersRegistry:()=>Re.Z,stringFormater:()=>ce.vb,stringOverrideProcessor:()=>Qe.op,stringStartsAsRegEx:()=>He.oH,stringToJsRegex:()=>He.jO,stringToMs:()=>He.e0,systemDateFormats:()=>ze.U6,textUtil:()=>He.QX,thresholdsOverrideProcessor:()=>Qe.ZN,timeZoneAbbrevation:()=>Be.Hk,timeZoneFormatUserFriendly:()=>Ve.Vs,toCSV:()=>o.MJ,toDataFrame:()=>xe.g0,toDataFrameDTO:()=>xe.og,toDuration:()=>Ee.Ks,toFilteredDataFrameDTO:()=>xe.Aw,toFixed:()=>ce.FH,toFixedScaled:()=>ce.bn,toFixedUnit:()=>ce.q2,toFloatOrUndefined:()=>He.dz,toIconName:()=>te.iJ,toIntegerOrUndefined:()=>He.By,toLegacyResponseData:()=>xe.Zr,toLiveChannelId:()=>J.Aj,toNumberString:()=>He.PF,toOption:()=>f.E,toPascalCase:()=>He.Mh,toUtc:()=>Ee.zh,transformDataFrame:()=>$e.H,unEscapeStringFromRegex:()=>He.x6,unitOverrideProcessor:()=>Qe.VB,updateDatasourcePluginJsonDataOption:()=>i.tp,updateDatasourcePluginOption:()=>i.fd,updateDatasourcePluginResetOption:()=>i.Mf,updateDatasourcePluginSecureJsonDataOption:()=>i.uw,urlUtil:()=>y.Cj,usePluginContext:()=>ft.g,validateFieldConfig:()=>Xe.gb,valueMappingsOverrideProcessor:()=>Qe.uj,valueMatchers:()=>Oe.U8,vectorator:()=>ue.s,withLoadingIndicator:()=>k.x});var s=n(12925),a=n(2238),i=n(70332),r=n(61069),o=n(14790),l=n(49688),d=n(41785),c=n(95369);const u=e=>Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{}),h=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];var p=n(20729),g=n(81960),m=n(25803),f=n(86351),v=n(54251),b=n(85449),x=n(36298),y=n(274),w=n(66827),j=n(40791),S=n(87289),C=n(57897),k=n(6003),N=n(231),O=n(52410),I=n(28173),T=n(27843),$=n(74658),R=n(66358),P=n(60053),D=n(84403),A=n(53581),M=n(93246),L=n(94575),F=n(97370),E=n(12717),V=n(87602),z=n(12812),B=n(15399),_=n(54316),W=n(23214),U=n(40389),H=n(15546),q=n(51389),Z=n(663),G=n(14150),Q=n(59337),K=n(94025),J=n(22543),Y=n(58193),X=n(39266),ee=n(39003),te=n(42454),ne=n(83126);function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ae{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;se(this,"length",0),se(this,"source",[]),this.length=e}setLength(e){if(e>this.length)this.length=e;else if(e<this.length){const t=[];for(const n of this.source)if(t.push(n),n.end>e){n.end=e;break}this.source=t,this.length=e}}append(e){const t={start:this.length,end:this.length+e.length,values:e};return this.length=t.end,this.source.push(t),t}get(e){for(let t=0;t<this.source.length;t++){const n=this.source[t];if(e>=n.start&&e<n.end)return n.values.get(e-n.start)}}toArray(){return(0,ne.n)(this)}toJSON(){return(0,ne.n)(this)}}var ie=n(94582),re=n(35315),oe=n(76545),le=n(21620),de=n(21131),ce=n(55343),ue=n(7716);class he extends ue.G{constructor(e,t){super(),this.source=e,this.formatter=t}get length(){return this.source.length}get(e){const t=this.source.get(e);return(0,ce.zc)(this.formatter(t))}}var pe=n(16618),ge=n(75558),me=n(32898),fe=n(26222),ve=n(10187),be=n(57171),xe=n(68633),ye=n(9841),we=n(22458),je=n(99511),Se=n(3448),Ce=n(72026),ke=n(31919),Ne=n(20410),Oe=n(77401),Ie=n(64517),Te=n(34784),$e=n(55998),Re=n(99612),Pe=n(15696),De=n(52902),Ae=n(37800),Me=n(66247),Le=n(42914),Fe=n(85699),Ee=n(88246),Ve=n(25214),ze=n(74333),Be=n(6432),_e=n(12482),We=n(13960),Ue=n(97254),He=n(76093),qe=n(39949),Ze=n(43917),Ge=n(68959),Qe=n(97859),Ke=n(31319),Je=n(97701),Ye=n(84542),Xe=n(71855),et=n(79869),tt=n(32934),nt=n(23564),st=n(71390),at=n(54209),it=n(25317),rt=n(92721),ot=n(35765),lt=n(66876),dt=n(27105),ct=n(80622),ut=n(89905),ht=n(18151),pt=n(78453),gt=n(7213),mt=n(39498),ft=n(9888),vt=n(77777)},27105:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});const s=new(n(2238).B)},18151:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var s=n(82897),a=n(97701),i=n(15546),r=n(61069),o=n(54251),l=n(78453);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Sg{constructor(e){super(),d(this,"_defaults",void 0),d(this,"_fieldConfigDefaults",{defaults:{},overrides:[]}),d(this,"_fieldConfigRegistry",void 0),d(this,"_initConfigRegistry",(()=>new a.Z)),d(this,"optionsSupplier",void 0),d(this,"suggestionsSupplier",void 0),d(this,"panel",void 0),d(this,"editor",void 0),d(this,"onPanelMigration",void 0),d(this,"onPanelTypeChanged",void 0),d(this,"noPadding",void 0),d(this,"dataSupport",{annotations:!1,alertStates:!1}),d(this,"angularPanelCtrl",void 0),this.panel=e}get defaults(){let e=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const t=new o.rt;this.optionsSupplier(t,{data:[]});for(const n of t.getItems())null!=n.defaultValue&&(0,s.set)(e,n.path,n.defaultValue)}return e}get fieldConfigDefaults(){const e=this._fieldConfigDefaults.defaults;e.custom={};for(const t of this.fieldConfigRegistry.list())void 0!==t.defaultValue&&(0,s.set)(e,t.id,t.defaultValue);return{defaults:Object.assign({},e),overrides:this._fieldConfigDefaults.overrides}}setDefaults(e){return(0,r.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=e,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(e){return(0,r.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=e,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(e){return this.onPanelMigration=e,this}setPanelChangeHandler(e){return this.onPanelTypeChanged=e,this}setPanelOptions(e){return this.optionsSupplier=e,this}getPanelOptionsSupplier(){var e;return null!==(e=this.optionsSupplier)&&void 0!==e?e:()=>{}}setDataSupport(e){return this.dataSupport=Object.assign({},this.dataSupport,e),this}useFieldConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._initConfigRegistry=()=>(0,l.j)(e,this.meta.name),this}setSuggestionsSupplier(e){return this.suggestionsSupplier=e,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(e){return this.meta.id===e}}},78453:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var s=n(97701),a=n(68959),i=n(54251);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=new s.Z,r=a.N.list(),l={};if(e.useCustomConfig){const t=new i.vo;e.useCustomConfig(t);for(const e of t.getRegistry().list())if(e.isCustom=!0,e.id="custom."+e.id,o(e,r)){var d;const t=null!==(d=l[e.category[0]])&&void 0!==d?d:[];t.push(e),l[e.category[0]]=t}else n.register(e)}for(let t of r){if(e.disableStandardOptions){if(e.disableStandardOptions.indexOf(t.id)>-1)continue}if(e.standardOptions){var c,u;const n=null===(c=e.standardOptions[t.id])||void 0===c?void 0:c.defaultValue,s=null===(u=e.standardOptions[t.id])||void 0===u?void 0:u.settings;n&&(t=Object.assign({},t,{defaultValue:n})),s&&(t=Object.assign({},t,{settings:t.settings?Object.assign({},t.settings,s):s}))}if(n.register(t),t.category&&l[t.category[0]])for(let e of l[t.category[0]])n.register(e)}for(const e of n.list())if(e.path.indexOf("[")>0)throw new Error(`[${t}] Field config paths do not support arrays: ${e.id}`);return n}function o(e,t){return Boolean(t.find((t=>e.category&&t.category&&e.category[0]===t.category[0])))}},76093:(e,t,n)=>{"use strict";n.d(t,{By:()=>s.By,GE:()=>s.GE,Mh:()=>s.Mh,PF:()=>s.PF,QX:()=>o,TL:()=>i.TL,Xt:()=>i.Xt,ap:()=>a.a,dz:()=>s.dz,e0:()=>s.e0,jO:()=>s.jO,lu:()=>i.lu,oH:()=>s.oH,x6:()=>s.x6,xH:()=>a.x});var s=n(56949),a=n(42870),i=n(30420),r=n(91024);const o={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeTextPanelContent:r.he,sanitizeUrl:r.Nm}},42870:(e,t,n)=>{"use strict";n.d(t,{a:()=>o,x:()=>l});var s=n(99675),a=n(91024);let i=!1;const r={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function o(e,t){let n;i||(s.TU.setOptions(Object.assign({},r)),i=!0),null!=t&&t.breaks&&(n=Object.assign({},r,{breaks:!0}));const o=(0,s.TU)(e||"",n);return null!=t&&t.noSanitize?o:(0,a.Nw)(o)}function l(e,t){i||(s.TU.setOptions(Object.assign({},r)),i=!0);const n=(0,s.TU)(e||"");return null!=t&&t.noSanitize?n:(0,a.he)(n)}},91024:(e,t,n)=>{"use strict";n.d(t,{Nm:()=>c,Nw:()=>l,Xv:()=>h,he:()=>d,oT:()=>u});var s=n(13624),a=n(99731);const i=Object.keys(a.whiteList).reduce(((e,t)=>{var n;return e[t]=null===(n=a.whiteList[t])||void 0===n?void 0:n.concat(["class","style"]),e}),{}),r=new a.FilterXSS({whiteList:i}),o=new a.FilterXSS({whiteList:i,css:{whiteList:Object.assign({},a.getDefaultCSSWhiteList(),{"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0})}});function l(e){try{return r.process(e)}catch(t){return console.error("String could not be sanitized",e),e}}function d(e){try{return o.process(e)}catch(t){return console.error("String could not be sanitized",e),"Text string could not be sanitized"}}function c(e){return(0,s.N)(e)}function u(e){return/\u001b\[\d{1,2}m/.test(e)}function h(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},56949:(e,t,n)=>{"use strict";n.d(t,{By:()=>p,GE:()=>o,Mh:()=>m,PF:()=>h,dz:()=>g,e0:()=>u,jO:()=>c,oH:()=>d,x6:()=>l});var s=n(82897);const a="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(a,"g"),r=new RegExp("(\\\\)"+a,"g"),o=e=>e?e.replace(i,"\\$1"):e,l=e=>e?e.replace(r,"$2"):e;function d(e){return!!e&&"/"===e[0]}function c(e){if(!d(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!t)throw new Error(`'${e}' is not a valid regular expression.`);return new RegExp(t[1],t[2])}function u(e){if(!e)return 0;const t=parseInt(e,10),n=e.slice(String(t).length),s=36e5;switch(n){case"s":return 1e3*t;case"m":return 6e4*t;case"h":return t*s;case"d":return 864e5*t;default:if(!n)return isNaN(t)?0:t;throw new Error("Not supported unit: "+n)}}function h(e){return null!=e&&Number.isFinite(e)?e.toString():""}function p(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function g(e){if(!e)return;const t=parseFloat(e);return isNaN(t)?void 0:t}const m=e=>{const t=(0,s.camelCase)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},30420:(e,t,n)=>{"use strict";function s(e){let{searchWords:t,textToHighlight:n}=e;const s=[];for(const e of t)s.push(...a(n,e));return s}n.d(t,{TL:()=>r,Xt:()=>s,lu:()=>a});function a(e,t){if(!e||!t)return[];const n=[],{cleaned:s,flags:a}=r((e=>e.replace(/[[{(][\w,.-?:*+]+$/,""))(t));let i;try{i=new RegExp(`(?:${s})`,a)}catch(e){return n}return e.replace(i,(function(e){if(e){var t;const s=(t=(arguments.length<=1?0:arguments.length-1)-2+1)<1||arguments.length<=t?void 0:arguments[t];n.push({text:e,start:s,length:e.length,end:s+e.length})}return""})),n}const i=/\(\?([ims-]+)\)/g;function r(e){const t=new Set(["g"]);return{cleaned:e.replace(i,((e,n)=>{const s=n.startsWith("-");for(let e=0;e<n.length;++e){const a=n.charAt(e);s||"-"===n.charAt(e-1)?t.delete(a):"-"!==a&&t.add(a)}return""})),flags:Array.from(t).join("")}}},66876:(e,t,n)=>{"use strict";n.r(t),n.d(t,{alpha:()=>f,asHexString:()=>l,asRgbString:()=>d,darken:()=>v,decomposeColor:()=>u,emphasize:()=>m,getContrastRatio:()=>p,getLuminance:()=>g,hexToRgb:()=>r,hslToRgb:()=>c,lighten:()=>b,recomposeColor:()=>h,rgbToHex:()=>o});var s=n(35008),a=n.n(s);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function r(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function o(e){if(0===e.indexOf("#"))return e;const{values:t}=u(e);return`#${t.map((e=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(e))).join("")}`}function l(e){if("#"===e[0])return e;const t=a()(e);return 1===t.getAlpha()?t.toHexString():t.toHex8String()}function d(e){return e.startsWith("rgb")?e:a()(e).toRgbString()}function c(e){const t=u(e),{values:n}=t,s=n[0],a=n[1]/100,i=n[2]/100,r=a*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+s/30)%12;return i-r*Math.max(Math.min(t-3,9-t,1),-1)};let l="rgb";const d=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===t.type&&(l+="a",d.push(n[3])),h({type:l,values:d})}function u(e){if("string"!=typeof e)return e;if("#"===e.charAt(0))return u(r(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(`Unsupported '${e}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let s,a=e.substring(t+1,e.length-1);if("color"===n){if(a=a.split(" "),s=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s))throw new Error(`Unsupported ${s} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else a=a.split(",");return a=a.map((e=>parseFloat(e))),{type:n,values:a,colorSpace:s}}function h(e){const{type:t,colorSpace:n}=e;let s=e.values;return-1!==t.indexOf("rgb")?s=s.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),s=-1!==t.indexOf("color")?`${n} ${s.join(" ")}`:`${s.join(", ")}`,`${t}(${s})`}function p(e,t,n){const s=g(e),a=g(t,n);return(Math.max(s,a)+.05)/(Math.min(s,a)+.05)}function g(e,t){const n=u(e);let s="hsl"===n.type?u(c(e)).values:n.values;if(t&&"rgba"===n.type){const e=u(t),n=s[3];s[0]=s[0]*n+e.values[0]*(1-n),s[1]=s[1]*n+e.values[1]*(1-n),s[2]=s[2]*n+e.values[2]*(1-n)}const a=s.map((e=>("color"!==n.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)));return Number((.2126*a[0]+.7152*a[1]+.0722*a[2]).toFixed(3))}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return g(e)>.5?v(e,t):b(e,t)}function f(e,t){if(""===e)return"#000000";if(t=i(t),"#"===e[0]){if(9===e.length)e=e.substring(0,7);else if(e.length<=5){let t="#";for(let n=1;n<4;n++)t+=e[n]+e[n];e=t}return e+Math.round(255*t).toString(16).padStart(2,"0")}if("("===e[3])return e.replace(")",`, ${t})`);if("("===e[4])return e.substring(0,e.lastIndexOf(","))+`, ${t})`;const n=u(e);return"color"===n.type?n.values[3]=`/${t}`:n.values[3]=t,h(n)}function v(e,t){const n=u(e);if(t=i(t),-1!==n.type.indexOf("hsl"))n.values[2]*=1-t;else if(-1!==n.type.indexOf("rgb")||-1!==n.type.indexOf("color"))for(let e=0;e<3;e+=1)n.values[e]*=1-t;return h(n)}function b(e,t){const n=u(e);if(t=i(t),-1!==n.type.indexOf("hsl"))n.values[2]+=(100-n.values[2])*t;else if(-1!==n.type.indexOf("rgb"))for(let e=0;e<3;e+=1)n.values[e]+=(255-n.values[e])*t;else if(-1!==n.type.indexOf("color"))for(let e=0;e<3;e+=1)n.values[e]+=(1-n.values[e])*t;return h(n)}},35765:(e,t,n)=>{"use strict";function s(){const e="px",t={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};return{values:t,up:function(e){return`@media (min-width:${"number"==typeof e?e:t[e]}px)`},down:function(e){return`@media (max-width:${("number"==typeof e?e:t[e])-.05}px)`},keys:["xs","sm","md","lg","xl","xxl"],unit:e}}n.d(t,{j:()=>te});var a=n(82897),i=n(66876);const r="#FFFFFF",o="#000000",l="#22252b",d="#181b1f",c="#111217",u="#F4F5F5",h="#F4F5F5",p="#3D71D9",g="#6E9FFF",m="#D10E5C",f="#FF5286",v="#1A7F4B",b="#6CCF8E",x="#F5B73D",y="#F8D06B",w="#3871DC",j="#1F62E0",S="#E0226E",C="#CF0E5B",k="#1B855E",N="#0A764E",O="#FAD34A",I="#8A6C00",T=["primary","secondary","info","warning","success","error","tonalOffset","hoverFactor","contrastThreshold"];function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(){$(this,"mode","dark"),$(this,"whiteBase","204, 204, 220"),$(this,"border",{weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`}),$(this,"text",{primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:g,maxContrast:r}),$(this,"primary",{main:p,text:g,border:g}),$(this,"secondary",{main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong}),$(this,"info",this.primary),$(this,"error",{main:m,text:f}),$(this,"success",{main:v,text:b}),$(this,"warning",{main:x,text:y}),$(this,"background",{canvas:c,primary:d,secondary:l}),$(this,"action",{hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38}),$(this,"gradients",{brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"}),$(this,"contrastThreshold",3),$(this,"hoverFactor",.03),$(this,"tonalOffset",.15)}}class P{constructor(){$(this,"mode","light"),$(this,"blackBase","36, 41, 46"),$(this,"primary",{main:w,border:j,text:j}),$(this,"text",{primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:o}),$(this,"border",{weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`}),$(this,"secondary",{main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong}),$(this,"info",{main:w,text:j}),$(this,"error",{main:S,text:C,border:C}),$(this,"success",{main:k,text:N}),$(this,"warning",{main:O,text:I}),$(this,"background",{canvas:u,primary:r,secondary:h}),$(this,"action",{hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38}),$(this,"gradients",{brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"}),$(this,"contrastThreshold",3),$(this,"hoverFactor",.03),$(this,"tonalOffset",.2)}}function D(e){var t;const n=new R,s=new P,r="dark"===(null!==(t=e.mode)&&void 0!==t?t:"dark")?n:s,{primary:o=r.primary,secondary:l=r.secondary,info:d=r.info,warning:c=r.warning,success:u=r.success,error:h=r.error,tonalOffset:p=r.tonalOffset,hoverFactor:g=r.hoverFactor,contrastThreshold:m=r.contrastThreshold}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,T);function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;const a=(0,i.getContrastRatio)(n.text.maxContrast,e,r.background.primary)>=t?n.text.maxContrast:s.text.maxContrast;return a}const b=e=>{let{color:t,name:n}=e;if(t=Object.assign({},t,{name:n}),!t.main)throw new Error(`Missing main color for ${n}`);return t.text||(t.text=t.main),t.border||(t.border=t.text),t.shade||(t.shade="light"===r.mode?(0,i.darken)(t.main,p):(0,i.lighten)(t.main,p)),t.transparent||(t.transparent="light"===r.mode?(0,i.alpha)(t.main,.08):(0,i.alpha)(t.main,.15)),t.contrastText||(t.contrastText=v(t.main)),t};return(0,a.merge)(Object.assign({},r,{primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary"}),info:b({color:d,name:"info"}),error:b({color:h,name:"error"}),success:b({color:u,name:"success"}),warning:b({color:c,name:"warning"}),getContrastText:v,emphasize:(e,t)=>(0,i.emphasize)(e,null!=t?t:g)}),f)}function A(e,t){const n={padding:1,headerHeight:4,background:e.background.primary,borderColor:e.border.weak,boxShadow:"none"},s={borderColor:e.border.medium,borderHover:e.border.strong,text:e.text.primary,background:"dark"===e.mode?e.background.canvas:e.background.primary};return{height:{sm:3,md:4,lg:6},input:s,panel:n,dropdown:{background:s.background},tooltip:{background:e.background.secondary,text:e.text.primary},dashboard:{background:e.background.canvas,padding:1},overlay:{background:"dark"===e.mode?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:e.warning.contrastText,background:e.warning.main},horizontalDrawer:{defaultHeight:400}}}function M(e){return"dark"===e.mode?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function L(e){var t;const n=null!==(t=e.borderRadius)&&void 0!==t?t:2;return{borderRadius:e=>`${(null!=e?e:1)*n}px`}}function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gridSize:t=8}=e,n=e=>"string"==typeof e?e:e*t,s=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return 0===t.length&&(t[0]=1),t.map((e=>{const t=n(e);return"number"==typeof t?`${t}px`:t})).join(" ")};return s.gridSize=t,s}const E={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},V={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=V.standard,easing:s=E.easeInOut,delay:a=0}=t;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof n?n:_(n)} ${s} ${"string"==typeof a?a:_(a)}`)).join(",")}function B(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function _(e){return`${Math.round(e)}ms`}function W(){return{create:z,duration:V,easing:E,getAutoHeightDuration:B}}const U='"Roboto", "Helvetica", "Arial", sans-serif',H="'Roboto Mono', monospace";function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fontFamily:n=U,fontFamilyMonospace:s=H,fontSize:a=14,fontWeightLight:i=300,fontWeightRegular:r=400,fontWeightMedium:o=500,fontWeightBold:l=500,htmlFontSize:d=14}=t;const c=a/14,u=e=>e/d*c+"rem",h=(e,t,s,a,i)=>{if(s%2!=0||t%2!=0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return Object.assign({fontFamily:n,fontWeight:e,fontSize:u(t),lineHeight:s/t},n===U?{letterSpacing:`${Z(a/t)}em`}:{},i)},p={h1:h(r,28,32,-.25),h2:h(r,24,28,0),h3:h(r,22,24,0),h4:h(r,18,22,.25),h5:h(r,16,22,0),h6:h(o,14,22,.15),body:h(r,a,22,.15),bodySmall:h(r,12,18,.15)},g={base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"};return Object.assign({htmlFontSize:d,pxToRem:u,fontFamily:n,fontFamilyMonospace:s,fontSize:a,fontWeightLight:i,fontWeightRegular:r,fontWeightMedium:o,fontWeightBold:l,size:g},p)}function Z(e){return Math.round(1e5*e)/1e5}var G=n(14150);function Q(e){const t={name:"Grafana Default",typography:{fontFamily:{sansSerif:e.typography.fontFamily,monospace:e.typography.fontFamilyMonospace},size:{base:`${e.typography.fontSize}px`,xs:e.typography.size.xs,sm:e.typography.size.sm,md:e.typography.size.md,lg:e.typography.size.lg},heading:{h1:e.typography.h1.fontSize,h2:e.typography.h2.fontSize,h3:e.typography.h3.fontSize,h4:e.typography.h4.fontSize,h5:e.typography.h5.fontSize,h6:e.typography.h6.fontSize},weight:{light:e.typography.fontWeightLight,regular:e.typography.fontWeightRegular,semibold:e.typography.fontWeightMedium,bold:e.typography.fontWeightBold},lineHeight:{xs:e.typography.bodySmall.lineHeight,sm:e.typography.bodySmall.lineHeight,md:e.typography.body.lineHeight,lg:e.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${e.breakpoints.values.xs}px`,sm:`${e.breakpoints.values.sm}px`,md:`${e.breakpoints.values.md}px`,lg:`${e.breakpoints.values.lg}px`,xl:`${e.breakpoints.values.xl}px`,xxl:`${e.breakpoints.values.xxl}px`},spacing:{base:e.spacing.gridSize,insetSquishMd:e.spacing(.5,1),d:e.spacing(2),xxs:e.spacing(.25),xs:e.spacing(.5),sm:e.spacing(1),md:e.spacing(2),lg:e.spacing(3),xl:e.spacing(4),gutter:e.spacing(4),formSpacingBase:e.spacing.gridSize,formMargin:4*e.spacing.gridSize+"px",formFieldsetMargin:2*e.spacing.gridSize+"px",formInputHeight:4*e.spacing.gridSize,formButtonHeight:4*e.spacing.gridSize,formInputPaddingHorizontal:`${e.spacing.gridSize}px`,formInputAffixPaddingHorizontal:e.spacing.gridSize/2+"px",formInputMargin:2*e.spacing.gridSize+"px",formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${e.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:e.shape.borderRadius(1),md:e.shape.borderRadius(2),lg:e.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:e.spacing.gridSize*e.components.height.sm,md:e.spacing.gridSize*e.components.height.md,lg:e.spacing.gridSize*e.components.height.lg},panelPadding:e.components.panel.padding*e.spacing.gridSize,panelHeaderHeight:e.spacing.gridSize*e.components.panel.headerHeight,zIndex:e.zIndex},n=Object.assign({},K,{black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"}),s={bg1:e.colors.background.primary,bg2:e.colors.background.secondary,bg3:e.colors.action.hover,dashboardBg:e.colors.background.canvas,bgBlue1:e.colors.primary.main,bgBlue2:e.colors.primary.shade},a={border1:e.colors.border.weak,border2:e.colors.border.medium,border3:e.colors.border.strong},i={textStrong:e.colors.text.maxContrast,textHeading:e.colors.text.primary,text:e.colors.text.primary,textSemiWeak:e.colors.text.secondary,textWeak:e.colors.text.secondary,textFaint:e.colors.text.disabled,textBlue:e.colors.primary.text},r={formLabel:e.colors.text.primary,formDescription:e.colors.text.secondary,formInputBg:e.components.input.background,formInputBgDisabled:e.colors.action.disabledBackground,formInputBorder:e.components.input.borderColor,formInputBorderHover:e.components.input.borderHover,formInputBorderActive:e.colors.primary.border,formInputBorderInvalid:e.colors.error.border,formInputPlaceholderText:e.colors.text.disabled,formInputText:e.components.input.text,formInputDisabledText:e.colors.action.disabledText,formFocusOutline:e.colors.primary.main,formValidationMessageText:e.colors.error.contrastText,formValidationMessageBg:e.colors.error.main};return Object.assign({},t,{type:"dark"===e.colors.mode?G.Q.Dark:G.Q.Light,isDark:e.isDark,isLight:e.isLight,name:e.name,palette:Object.assign({},n,{brandPrimary:n.orange,brandSuccess:e.colors.success.main,brandWarning:e.colors.warning.main,brandDanger:e.colors.error.main,queryRed:e.colors.error.text,queryGreen:e.colors.success.text,queryPurple:"#fe85fc",queryOrange:n.orange,online:e.colors.success.main,warn:e.colors.success.main,critical:e.colors.success.main}),colors:Object.assign({},s,a,r,i,{bodyBg:e.colors.background.canvas,panelBg:e.components.panel.background,panelBorder:e.components.panel.borderColor,pageHeaderBg:e.colors.background.canvas,pageHeaderBorder:e.colors.background.canvas,dropdownBg:r.formInputBg,dropdownShadow:n.black,dropdownOptionHoverBg:s.bg2,link:e.colors.text.primary,linkDisabled:e.colors.text.disabled,linkHover:e.colors.text.maxContrast,linkExternal:e.colors.text.link}),shadows:{listItem:"none"},visualization:e.visualization})}const K={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var J=n(663);function Y(e){const t="light"===e.mode?[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]:[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}],n={};for(const e of t)for(const t of e.shades)if(n[t.name]=t.color,t.aliases)for(const e of t.aliases)n[e]=t.color;n.transparent="rgba(0,0,0,0)",n["panel-bg"]=e.background.primary,n.text=e.text.primary;return{hues:t,palette:["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],getColorByName:e=>{if(!e)return J.R;const t=n[e];if(t)return t;if("#"===e[0])return e;if(e.indexOf("rgb")>-1)return e;const s=X[e.toLowerCase()];return s?(n[e]=s,s):e}}}const X={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ee={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colors:t={},spacing:n={},shape:a={},typography:i={}}=e,r=D(t),o=s(),l=F(n),d=L(a),c=q(r,i),u=M(r),h=W(),p=A(r),g=Y(r),m={name:"dark"===r.mode?"Dark":"Light",isDark:"dark"===r.mode,isLight:"light"===r.mode,colors:r,breakpoints:o,spacing:l,shape:d,components:p,typography:c,shadows:u,transitions:h,visualization:g,zIndex:Object.assign({},ee),flags:{}};return Object.assign({},m,{v1:Q(m)})}},34784:(e,t,n)=>{"use strict";n.d(t,{Kx:()=>l,TB:()=>d,gz:()=>o,uP:()=>c});var s=n(82897),a=n(28173),i=n(27843),r=n(2238);let o;function l(e){var t;const{field:n,reducers:s}=e;if(!n||!s||s.length<1)return{};if(null!==(t=n.state)&&void 0!==t&&t.calcs){const e=[];for(const t of s)n.state.calcs.hasOwnProperty(t)||e.push(t);if(e.length<1)return Object.assign({},n.state.calcs)}n.state||(n.state={});const i=d.list(s);if(n.values.length<1){const e=Object.assign({},n.state.calcs);for(const t of i)e[t.id]=null!==t.emptyInputResult?t.emptyInputResult:null;return n.state.calcs=e}const{nullValueMode:r}=n.config,o=r===a.Gl.Ignore,l=r===a.Gl.AsZero;if(1===i.length&&i[0].reduce){const e=i[0].reduce(n,o,l);return n.state.calcs=Object.assign({},n.state.calcs,e),e}let u=c(n,o,l);for(const e of i)!u.hasOwnProperty(e.id)&&e.reduce&&(u=Object.assign({},u,e.reduce(n,o,l)));return n.state.calcs=Object.assign({},n.state.calcs,u),u}!function(e){e.sum="sum",e.max="max",e.min="min",e.logmin="logmin",e.mean="mean",e.variance="variance",e.stdDev="stdDev",e.last="last",e.first="first",e.count="count",e.range="range",e.diff="diff",e.diffperc="diffperc",e.delta="delta",e.step="step",e.firstNotNull="firstNotNull",e.lastNotNull="lastNotNull",e.changeCount="changeCount",e.distinctCount="distinctCount",e.allIsZero="allIsZero",e.allIsNull="allIsNull",e.allValues="allValues",e.uniqueValues="uniqueValues"}(o||(o={}));const d=new r.B((()=>[{id:o.lastNotNull,name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:g},{id:o.last,name:"Last",description:"Last value",standard:!0,reduce:p},{id:o.firstNotNull,name:"First *",description:"First non-null value",standard:!0,reduce:h},{id:o.first,name:"First",description:"First Value",standard:!0,reduce:u},{id:o.min,name:"Min",description:"Minimum Value",standard:!0},{id:o.max,name:"Max",description:"Maximum Value",standard:!0},{id:o.mean,name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:o.variance,name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:m},{id:o.stdDev,name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:m},{id:o.sum,name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:o.count,name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:o.range,name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:o.delta,name:"Delta",description:"Cumulative change in value",standard:!0},{id:o.step,name:"Step",description:"Minimum interval between values",standard:!0},{id:o.diff,name:"Difference",description:"Difference between first and last values",standard:!0},{id:o.logmin,name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:o.allIsZero,name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:o.allIsNull,name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:o.changeCount,name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:f},{id:o.distinctCount,name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:o.diffperc,name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:o.allValues,name:"All values",description:"Returns an array with all values",standard:!1,reduce:e=>({allValues:e.values.toArray()})},{id:o.uniqueValues,name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:e=>({uniqueValues:[...new Set(e.values.toArray())]})}]));function c(e,t,n){const a={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},r=e.values;a.count=r.length;const o=e.type===i.fS.number||i.fS.time;for(let e=0;e<r.length;e++){let s=r.get(e);if(0===e&&(a.first=s),a.last=s,null===s){if(t)continue;n&&(s=0)}if(null!=s){const t=null===a.firstNotNull;if(t&&(a.firstNotNull=s),o){if(a.sum+=s,a.allIsNull=!1,a.nonNullCount++,!t){const t=s-a.lastNotNull;a.step>t&&(a.step=t),a.lastNotNull>s?(a.previousDeltaUp=!1,e===r.length-1&&(a.delta+=s)):(a.previousDeltaUp?a.delta+=t:a.delta+=s,a.previousDeltaUp=!0)}s>a.max&&(a.max=s),s<a.min&&(a.min=s),s<a.logmin&&s>0&&(a.logmin=s)}0!==s&&(a.allIsZero=!1),a.lastNotNull=s}}return a.max===-Number.MAX_VALUE&&(a.max=null),a.min===Number.MAX_VALUE&&(a.min=null),a.step===Number.MAX_VALUE&&(a.step=null),a.nonNullCount>0&&(a.mean=a.sum/a.nonNullCount),a.allIsNull&&(a.allIsZero=!1),null!==a.max&&null!==a.min&&(a.range=a.max-a.min),(0,s.isNumber)(a.firstNotNull)&&(0,s.isNumber)(a.lastNotNull)&&(a.diff=a.lastNotNull-a.firstNotNull),(0,s.isNumber)(a.firstNotNull)&&(0,s.isNumber)(a.diff)&&(a.diffperc=a.diff/a.firstNotNull),a}function u(e,t,n){return{first:e.values.get(0)}}function h(e,t,n){const s=e.values;for(let e=0;e<s.length;e++){const t=s.get(e);if(null!=t&&void 0!==t)return{firstNotNull:t}}return{firstNotNull:null}}function p(e,t,n){const s=e.values;return{last:s.get(s.length-1)}}function g(e,t,n){const s=e.values;let a=s.length-1;for(;a>=0;){const e=s.get(a--);if(null!=e&&void 0!==e)return{lastNotNull:e}}return{lastNotNull:null}}function m(e,t,n){if(e.type!==i.fS.number&&e.type!==i.fS.time)return{variance:0,stdDev:0};let s=0,a=0,r=0;const o=e.values;for(let e=0;e<o.length;e++){const t=o.get(e);if(null!=t){r++;let e=a;a+=(t-e)/r,s+=(t-e)*(t-a)}}if(r>0){const e=s/r;return{variance:e,stdDev:Math.sqrt(e)}}return{variance:0,stdDev:0}}function f(e,t,n){const s=e.values;let a=0,i=!0,r=null;for(let e=0;e<s.length;e++){let o=s.get(e);if(null===o){if(t)continue;n&&(o=0)}i||r===o||a++,i=!1,r=o}return{changeCount:a}}function v(e,t,n){const s=e.values,a=new Set;for(let e=0;e<s.length;e++){let i=s.get(e);if(null===i){if(t)continue;n&&(i=0)}a.add(i)}return{distinctCount:a.size}}},77401:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>m,IG:()=>x,Ls:()=>g,U8:()=>f,b9:()=>b,sq:()=>v});var s=n(2238),a=n(49594),i=n(15696),r=n(75922),o=n(90484),l=n(61382),d=n(71114),c=n(95691),u=n(61574),h=n(6318),p=n(24758);const g=new s.B((()=>[...(0,r.Ty)(),...(0,a.N)(),...(0,i.Lk)(),...(0,l.z)()])),m=new s.B((()=>[...(0,r.fX)(),...(0,i.cC)(),...(0,o.n)()])),f=new s.B((()=>[...(0,c.a)(),...(0,u.H)(),...(0,d.T)(),...(0,h.G)(),...(0,p.G)()]));function v(e){const t=g.get(e.id);if(!t)throw new Error("Unknown field matcher: "+e.id);return t.get(e.options)}function b(e){const t=m.get(e.id);if(!t)throw new Error("Unknown frame matcher: "+e.id);return t.get(e.options)}function x(e){const t=f.get(e.id);if(!t)throw new Error("Unknown value matcher: "+e.id);return t.get(e.options)}},15696:(e,t,n)=>{"use strict";n.d(t,{Lk:()=>g,Ys:()=>r,cC:()=>m});var s=n(32934),a=n(56949),i=n(31919);let r;!function(e){e.exclude="exclude",e.include="include"}(r||(r={}));const o={id:i.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:e=>(t,n,a)=>e===t.name||(0,s.C)(t,n,a)===e,getOptionsDisplayText:e=>`Field name: ${e}`},l={id:i.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:r.include,names:[]},get:e=>{const{names:t,mode:n=r.include}=e,a=new Set(null!=t?t:[]),i=(e,t,n)=>a.has(e.name)||a.has((0,s.C)(e,t,n));return n===r.exclude?(e,t,n)=>!i(e,t,n):i},getOptionsDisplayText:e=>{const{names:t,mode:n}=e,s=(null!=t?t:[]).join(", ");return n===r.exclude?`All except: ${s}`:`All of: ${s}`}},d={id:i.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:e=>{const t=h(e);return(e,n,a)=>{const i=(0,s.C)(e,n,a);return!!t&&t.test(i)}},getOptionsDisplayText:e=>`Field name by pattern: ${e}`},c={id:i.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:e=>(t,n,s)=>n.refId===e,getOptionsDisplayText:e=>`Math all fields returned by query with reference ID: ${e}`},u={id:i.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:e=>{var t;const n=d.get((null==e?void 0:e.pattern)||""),s=l.get({mode:r.include,names:null!==(t=null==e?void 0:e.names)&&void 0!==t?t:[]});return(e,t,a)=>s(e,t,a)||n(e,t,a)},getOptionsDisplayText:e=>{var t,n,s;return`Field name by pattern: ${null!==(t=null==e?void 0:e.pattern)&&void 0!==t?t:""} or names: ${null!==(n=null==e||null===(s=e.names)||void 0===s?void 0:s.join(","))&&void 0!==n?n:""}`}},h=e=>{if(e)try{return(0,a.jO)(e)}catch(e){return void console.error(e)}},p={id:i.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:e=>{const t=(0,a.jO)(e);return e=>t.test(e.name||"")},getOptionsDisplayText:e=>`Frame name: ${e}`};function g(){return[o,d,l,u,c]}function m(){return[p]}},75922:(e,t,n)=>{"use strict";n.d(t,{Qw:()=>m,Ty:()=>w,fX:()=>j,m3:()=>h});var s=n(27843),a=n(77401),i=n(31919);const r={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,a.sq)(e)));return(e,n,s)=>{for(const a of t)if(a(e,n,s))return!0;return!1}},getOptionsDisplayText:e=>{let t="";for(const n of e){t.length>0&&(t+=" OR ");const e=a.Ls.get(n.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(n):e.name}return t}},o={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,a.b9)(e)));return e=>{for(const n of t)if(n(e))return!0;return!1}},getOptionsDisplayText:e=>{let t="";for(const n of e){t.length>0&&(t+=" OR ");const e=a.Ac.get(n.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(n):e.name}return t}},l={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,a.sq)(e)));return(e,n,s)=>{for(const a of t)if(!a(e,n,s))return!1;return!0}},getOptionsDisplayText:e=>{let t="";for(const n of e){t.length>0&&(t+=" AND ");const e=a.Ls.get(n.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(n):e.name}return t}},d={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,a.b9)(e)));return e=>{for(const n of t)if(!n(e))return!1;return!0}},getOptionsDisplayText:e=>{let t="";for(const n of e){t.length>0&&(t+=" AND ");const e=a.Ac.get(n.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(n):e.name}return t}},c={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:e=>{const t=(0,a.sq)(e);return(e,n,s)=>!t(e,n,s)},getOptionsDisplayText:e=>{const t=a.Ls.get(e.id);return"NOT "+(t.getOptionsDisplayText?t.getOptionsDisplayText(e.options):t.name)}},u={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:e=>{const t=(0,a.b9)(e);return e=>!t(e)},getOptionsDisplayText:e=>{const t=a.Ac.get(e.id);return"NOT "+(t.getOptionsDisplayText?t.getOptionsDisplayText(e.options):t.name)}},h=e=>!0,p=e=>!0,g=e=>!1,m=e=>e.type!==s.fS.time,f=e=>!1,v={id:i.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:e=>h,getOptionsDisplayText:e=>"Always"},b={id:i.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:e=>p,getOptionsDisplayText:e=>"Always"},x={id:i.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:e=>g,getOptionsDisplayText:e=>"Never"},y={id:i.Ff.neverMatch,name:"No Frames",description:"Never Match",get:e=>f,getOptionsDisplayText:e=>"Never"};function w(){return[r,l,c,v,x]}function j(){return[o,d,u,b,y]}},99612:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=new(n(2238).B)},55998:(e,t,n)=>{"use strict";n.d(t,{H:()=>d});var s=n(53786),a=n(98356),i=n(2101),r=n(99612);const o=e=>t=>{var n;const i=r.Z.get(e.id);if(!i)return t;const o=null!==(n=i.transformation.defaultOptions)&&void 0!==n?n:{},d=Object.assign({},o,e.options);return t.pipe((0,a.z)((t=>(0,s.of)(t).pipe(i.transformation.operator(d,e.replace),l(t,i)))))},l=(e,t)=>n=>n.pipe((0,i.U)((n=>{if(n===e)return n;for(const e of n)e.meta||(e.meta={}),e.meta.transformations?e.meta.transformations=[...e.meta.transformations,t.id]:e.meta.transformations=[t.id];return n})));function d(e,t){const n=(0,s.of)(t);if(!e.length)return n;const a=[];for(let t=0;t<e.length;t++){const n=e[t];n.disabled||a.push(o(n))}return n.pipe.apply(n,a)}},64517:(e,t,n)=>{"use strict";n.d(t,{Y:()=>q});var s=n(42414),a=n(75499),i=n(66247),r=n(66771),o=n(92077),l=n(50820),d=n(31919),c=n(20410);const u={id:c.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:e=>t=>{const n={};return e.include&&(n.include={id:d.E4.byRefId,options:e.include}),e.exclude&&(n.exclude={id:d.E4.byRefId,options:e.exclude}),t.pipe(o.u.operator(n))}};var h=n(43605),p=n(10802),g=n(2101),m=n(57171),f=n(32934),v=n(27843);const b="Time",x="Time",y="Value",w={id:c.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:b,rowField:x,valueField:y},operator:e=>t=>t.pipe((0,g.U)((t=>{const n=e.columnField||b,s=e.rowField||x,a=e.valueField||y;if(1!==t.length)return t;const i=t[0],r=S(i,n),o=S(i,s),l=S(i,a),d=`${s}\\${n}`;if(!r||!o||!l)return t;const c=j(r.values),u=j(o.values),h={};for(let e=0;e<l.values.length;e++){const t=r.values.get(e),n=o.values.get(e),s=l.values.get(e);h[t]||(h[t]={}),h[t][n]=s}const p=new m.v;p.addField({name:d,values:u,type:v.fS.string});for(const e of c){let t=[];for(const n of u){var g;const s=null!==(g=h[e][n])&&void 0!==g?g:"";t.push(s)}p.addField({name:e.toString(),values:t,config:l.config,type:l.type})}return[p]})))};function j(e){const t=new Set;for(let n=0;n<e.length;n++)t.add(e.get(n));return Array.from(t)}function S(e,t){for(let n=0;n<e.fields.length;n++){const s=e.fields[n];if(t===(0,f.C)(s))return s}return null}var C=n(37800),k=n(25783),N=n(9695),O=n(94582);const I={id:c.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:10},operator:e=>t=>t.pipe((0,g.U)((t=>{const n=e.limitField||10;return t.map((e=>e.length>n?Object.assign({},e,{fields:e.fields.map((e=>{const t=e.values.toArray();return Object.assign({},e,{values:new O.G(t.slice(0,n))})})),length:n}):e))})))};var T=n(33660),$=n(62037),R=n(18602);const P={id:c.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:e=>t=>t.pipe((0,g.U)((t=>{const n=D(e.renameByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:n(e)}))):t})))},D=e=>t=>e&&0!==Object.keys(e).length?t.fields.map((n=>{const s=(0,f.C)(n,t),a=e[s];return"string"!=typeof a||0===a.length?n:Object.assign({},n,{config:Object.assign({},n.config,{displayName:a}),state:Object.assign({},n.state,{displayName:a})})})):t.fields,A={id:c.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:e=>t=>t.pipe(l.w.operator({exclude:{names:M(e.excludeByName)}}),R.t.operator(e),P.operator(e))},M=e=>e?Object.keys(e).filter((t=>e[t])):[];var L=n(27275),F=n(56949);const E={id:c.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:e=>t=>t.pipe((0,g.U)((t=>Array.isArray(t)&&0!==t.length?t.map(V(e)):t)))},V=e=>t=>{const n=(0,F.jO)(e.regex),s=t.fields.map((s=>{const a=(0,f.C)(s,t);if(!n.test(a))return s;const i=a.replace(n,e.renamePattern);return Object.assign({},s,{config:Object.assign({},s.config,{displayName:i}),state:Object.assign({},s.state,{displayName:i})})}));return Object.assign({},t,{fields:s})};var z=n(82897),B=n(68633),_=n(72026);const W={id:c.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:e=>e=>e.pipe((0,g.U)((e=>{if(!Array.isArray(e)||e.length<=1)return e;if(!(0,_.hZ)(e))return e;const t={},n=new Set,s=new m.v,a={name:v.rN,values:new O.G,config:{},type:v.fS.string};for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.fields.length;e++){const o=r.fields[e];o.type!==v.fS.time?n.has(v.M5)||(s.addField(U(o,v.M5)),n.add(v.M5)):(t[i]=e,n.has(v.Ls)||(s.addField(U(o,v.Ls)),s.addField(a),n.add(v.Ls)))}}for(let n=0;n<e.length;n++){const a=e[n];for(let e=0;e<a.length;e++){const i=t[n],r=0===i?1:0;s.add({[v.Ls]:a.fields[i].values.get(e),[v.rN]:(0,f.n)(a),[v.M5]:a.fields[r].values.get(e)})}}return[(0,B.aK)(s,0,!0)]})))},U=(e,t)=>Object.assign({},(0,z.omit)(e,["values","state","labels","config","name"]),{name:t,values:new O.G,config:Object.assign({},(0,z.omit)(e.config,["displayName","displayNameFromDS"]))}),H={id:c.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,g.U)((t=>{var n;return Array.isArray(t)&&0!==t.length&&null!=e&&null!==(n=e.sort)&&void 0!==n&&n.length?function(e,t){return e.map((e=>{const n=function(e,t){return t.map((t=>null!=t.index?t:Object.assign({},t,{index:e.fields.findIndex((n=>t.field===(0,f.C)(n,e)))})))}(e,t);return n.length&&null!=n[0].index?(0,B.aK)(e,n[0].index,n[0].desc):e}))}(t,e.sort):t})))};const q={noopTransformer:$.d,filterFieldsTransformer:o.P,filterFieldsByNameTransformer:l.w,filterFramesTransformer:o.u,filterFramesByRefIdTransformer:u,filterByValueTransformer:h.JA,orderFieldsTransformer:R.t,organizeFieldsTransformer:A,reduceTransformer:L.mf,concatenateTransformer:a.aE,calculateFieldTransformer:s.U,joinByFieldTransformer:k.M,seriesToColumnsTransformer:k.M,seriesToRowsTransformer:W,renameFieldsTransformer:P,labelsToFieldsTransformer:N.r,ensureColumnsTransformer:r.W,groupByTransformer:p.i,sortByTransformer:H,mergeTransformer:T.R,renameByRegexTransformer:E,histogramTransformer:C.Op,convertFieldTypeTransformer:i.mg,groupingToMatrixTransformer:w,limitTransformer:I}},42414:(e,t,n)=>{"use strict";n.d(t,{ie:()=>j,U:()=>k,h:()=>I});var s=n(82897),a=n(2101),i=n(68633),r=n(32934),o=n(27843),l=n(28173),d=n(81960),c=n(94582),u=n(76545),h=n(21620),p=n(75558),g=n(83126);class m{constructor(e){var t,n,s;s=0,(n="rowIndex")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.columns=e}get length(){return this.columns.length}get(e){return this.columns[e].get(this.rowIndex)}toArray(){return(0,g.n)(this)}toJSON(){return(0,g.n)(this)}}var f=n(34784),v=n(77401),b=n(31919),x=n(66771),y=n(20410),w=n(62037);let j;!function(e){e.ReduceRow="reduceRow",e.BinaryOperation="binary"}(j||(j={}));const S={reducer:f.gz.sum},C={left:"",operator:d.L.Add,right:""},k={id:y.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:j.ReduceRow,reduce:{reducer:f.gz.sum}},operator:(e,t)=>n=>{const r=e&&!1!==e.timeSeries?x.W.operator(null):w.d.operator({});return e.alias=t?t(e.alias):e.alias,n.pipe(r,(0,a.U)((n=>{var a;const r=null!==(a=e.mode)&&void 0!==a?a:j.ReduceRow;let l;if(r===j.ReduceRow)l=N((0,s.defaults)(e.reduce,S),n);else if(r===j.BinaryOperation){var c,u,p,g;const a=t?Object.assign({},e.binary,{left:t?t(null===(c=e.binary)||void 0===c?void 0:c.left):null===(u=e.binary)||void 0===u?void 0:u.left,right:t?t(null===(p=e.binary)||void 0===p?void 0:p.right):null===(g=e.binary)||void 0===g?void 0:g.right}):e.binary;l=function(e,t){const n=d.n.getIfExists(e.operator);return s=>{const a=O(s,e.left,t),i=O(s,e.right,t);if(a&&i&&n)return new h.r(a,i,n.operation)}}((0,s.defaults)(a,C),n)}return l?n.map((t=>{const n=l(t);if(!n)return t;const s={name:I(e),type:o.fS.number,config:{},values:n};let a=[];if(e.replaceFields){const{timeField:n}=(0,i.sV)(t);a=n&&!1!==e.timeSeries?[n,s]:[s]}else a=[...t.fields,s];return Object.assign({},t,{fields:a})})):n})))}};function N(e,t){var n;let s=(0,v.sq)({id:b.mi.numeric});e.include&&e.include.length&&(s=(0,v.sq)({id:b.mi.byNames,options:{names:e.include}}));const a=f.TB.get(e.reducer);if(!a)throw new Error(`Unknown reducer: ${e.reducer}`);const i=null!==(n=a.reduce)&&void 0!==n?n:f.uP,r=e.nullValueMode===l.Gl.Ignore,d=e.nullValueMode===l.Gl.AsZero;return n=>{const a=[];for(const e of n.fields)s(e,n,t)&&a.push(e.values);const l=new m(a),u={name:"temp",values:l,type:o.fS.number,config:{}},h=[];for(let t=0;t<n.length;t++){l.rowIndex=t;const n=i(u,r,d)[e.reducer];h.push(n)}return new c.G(h)}}function O(e,t,n){if(!t)return;for(const s of e.fields)if(t===(0,r.C)(s,e,n))return s.type===o.fS.boolean?new p.s(s.values):s.values;const s=parseFloat(t);return isNaN(s)?void 0:new u.u(s,e.length)}function I(e){var t;if(null!==(t=e.alias)&&void 0!==t&&t.length)return e.alias;if(e.mode===j.BinaryOperation){var n,s,a;const{binary:t}=e;return`${null!==(n=null==t?void 0:t.left)&&void 0!==n?n:""} ${null!==(s=null==t?void 0:t.operator)&&void 0!==s?s:""} ${null!==(a=null==t?void 0:t.right)&&void 0!==a?a:""}`}if(e.mode===j.ReduceRow){var i;const t=f.TB.getIfExists(null===(i=e.reduce)||void 0===i?void 0:i.reducer);if(t)return t.name}return"math"}},75499:(e,t,n)=>{"use strict";n.d(t,{HO:()=>o,aE:()=>l});var s=n(2101),a=n(27843),i=n(94582),r=n(20410);let o;!function(e){e.Drop="drop",e.FieldName="field",e.Label="label"}(o||(o={}));const l={id:r.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:o.FieldName,frameNameLabel:"frame"},operator:e=>t=>t.pipe((0,s.U)((t=>!Array.isArray(t)||t.length<2?t:[d(t,e)])))};function d(e,t){var n;let s=!0,r=e[0].length;const l=null!==(n=t.frameNameLabel)&&void 0!==n?n:"frame";let d=[];for(const n of e){r!==n.length&&(s=!1,r=Math.max(r,n.length));for(const e of n.fields){const s=Object.assign({},e);s.state=void 0,n.name&&(t.frameNameMode===o.Drop||(t.frameNameMode===o.Label?(s.labels=Object.assign({},e.labels),s.labels[l]=n.name):s.name&&s.name!==a.M5?s.name=`${n.name} · ${e.name}`:s.name=n.name)),d.push(s)}}return s||(d=d.map((e=>{if(e.values.length===r)return e;const t=e.values.toArray();return t.length=r,Object.assign({},e,{values:new i.G(t)})}))),{fields:d,length:r}}},66247:(e,t,n)=>{"use strict";n.d(t,{J_:()=>h,mg:()=>d});var s=n(2101),a=n(12482),i=n(27843),r=n(94582),o=n(77401),l=n(31919);const d={id:n(20410).W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:e=>t=>t.pipe((0,s.U)((t=>d.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const n=function(e,t){if(!e.conversions.length)return t;const n=t.map((e=>Object.assign({},e)));for(const t of e.conversions){if(!t.targetField)continue;const e=o.Ls.get(l.mi.byName).get(t.targetField);for(const s of n)s.fields=s.fields.map((a=>e(a,s,n)?c(a,t):a))}return n}(e,t);return n||[]}};function c(e,t){switch(t.destinationType){case i.fS.time:return h(e,t.dateFormat);case i.fS.number:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++){const n=+t[e].replace(/,/g,"");t[e]=Number.isFinite(n)?n:null}return Object.assign({},e,{type:i.fS.number,values:new r.G(t)})}(e);case i.fS.string:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=`${t[e]}`;return Object.assign({},e,{type:i.fS.string,values:new r.G(t)})}(e);case i.fS.boolean:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=Boolean(!!t[e]);return Object.assign({},e,{type:i.fS.boolean,values:new r.G(t)})}(e);case i.fS.other:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)try{t[e]=JSON.parse(t[e])}catch{t[e]=null}return Object.assign({},e,{type:i.fS.other,values:new r.G(t)})}(e);default:return e}}const u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function h(e,t){const n="number"==typeof e.values.get(0);return e.type===i.fS.time&&n?e:n?Object.assign({},e,{type:i.fS.time}):function(e,t){let n=t?{format:t}:void 0;const s=e.values.toArray().slice();let o=s.find((e=>null!=e)),l="string"==typeof o&&u.test(o);for(let e=0;e<s.length;e++)if(s[e]){let t=l?Date.parse(s[e]):(0,a.J)(s[e],n).valueOf();s[e]=Number.isFinite(t)?t:null}else s[e]=null;return Object.assign({},e,{type:i.fS.time,values:new r.G(s)})}(e,t)}},66771:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var s=n(2101),a=n(68633),i=n(20410),r=n(25783);const o={id:i.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:e=>t=>t.pipe((0,s.U)((t=>o.transformer(e)(t)))),transformer:e=>e=>{const t=function(e){let t;for(const n of e){const{timeField:e}=(0,a.sV)(n);if(!e)return;if(t){if(t!==e.name)return}else t=e.name}return t}(e);return e.length>1&&t?r.M.transformer({byField:t})(e):e}}},92077:(e,t,n)=>{"use strict";n.d(t,{P:()=>o,u:()=>l});var s=n(2101),a=n(77401),i=n(20410),r=n(62037);const o={id:i.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(e,t)=>n=>{if(!e.include&&!e.exclude)return n.pipe(r.d.operator({},t));if(t){var i,o,l,d,c,u,h,p;if("string"==typeof(null===(i=e.include)||void 0===i?void 0:i.options))e.include.options=t(null===(h=e.include)||void 0===h?void 0:h.options);else if("string"==typeof(null===(o=e.include)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.pattern)){var g;e.include.options.pattern=t(null===(g=e.include)||void 0===g?void 0:g.options.pattern)}if("string"==typeof(null===(d=e.exclude)||void 0===d?void 0:d.options))e.exclude.options=t(null===(p=e.exclude)||void 0===p?void 0:p.options);else if("string"==typeof(null===(c=e.exclude)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.pattern)){var m;e.exclude.options.pattern=t(null===(m=e.exclude)||void 0===m?void 0:m.options.pattern)}}return n.pipe((0,s.U)((t=>{const n=e.include?(0,a.sq)(e.include):null,s=e.exclude?(0,a.sq)(e.exclude):null,i=[];for(const e of t){const a=[];for(let i=0;i<e.fields.length;i++){const r=e.fields[i];if(s){if(s(r,e,t))continue;n||a.push(r)}n&&n(r,e,t)&&a.push(r)}if(!a.length)continue;const r=Object.assign({},e,{fields:a});i.push(r)}return i})))}},l={id:i.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:e=>t=>e.include||e.exclude?t.pipe((0,s.U)((t=>{const n=e.include?(0,a.b9)(e.include):null,s=e.exclude?(0,a.b9)(e.exclude):null,i=[];for(const e of t){if(s){if(s(e))continue;n||i.push(e)}n&&n(e)&&i.push(e)}return i}))):t.pipe(r.d.operator({}))}},50820:(e,t,n)=>{"use strict";n.d(t,{f:()=>r,w:()=>i});var s=n(31919),a=n(92077);const i={id:n(20410).W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(e,t)=>n=>n.pipe(a.P.operator({include:r(e.include),exclude:r(e.exclude)},t))},r=e=>{if(!e)return;const{names:t,pattern:n}=e;return Array.isArray(t)&&0!==t.length||n?n?Array.isArray(t)&&0!==t.length?{id:s.mi.byRegexpOrNames,options:e}:{id:s.mi.byRegexp,options:n}:{id:s.mi.byNames,options:{names:t}}:void 0}},43605:(e,t,n)=>{"use strict";n.d(t,{ER:()=>c,JA:()=>u,PQ:()=>d});var s=n(2101),a=n(32934),i=n(94582),r=n(77401),o=n(20410),l=n(62037);let d,c;!function(e){e.exclude="exclude",e.include="include"}(d||(d={})),function(e){e.all="all",e.any="any"}(c||(c={}));const u={id:o.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:d.include,match:c.any},operator:e=>t=>{const n=e.filters,a=e.match===c.all,r=e.type===d.include;return Array.isArray(n)&&0!==n.length?t.pipe((0,s.U)((e=>{if(!Array.isArray(e)||0===e.length)return e;const t=new Set;for(const s of e){const i=p(s,e),r=h(n,i);for(let n=0;n<s.length;n++){if(t.has(n))continue;let i=!0;for(const t of r){const r=t(n,s,e);if(!a&&r){i=!0;break}if(a&&!r){i=!1;break}i=r}i&&t.add(n)}}const s=[],o=r?t.size:e[0].length-t.size;for(const n of e){const e=[];for(const s of n.fields){const a=[];for(let e=0;e<n.length;e++)r&&t.has(e)?a.push(s.values.get(e)):r||t.has(e)||a.push(s.values.get(e));e.push(Object.assign({},s,{values:new i.G(a),state:{}}))}s.push(Object.assign({},n,{fields:e,length:o}))}return s}))):t.pipe(l.d.operator({}))}},h=(e,t)=>{const n=()=>!1;return e.map((e=>{var s;const a=null!==(s=t[e.fieldName])&&void 0!==s?s:-1;if(a<0)return console.warn(`[FilterByValue] Could not find index for field name: ${e.fieldName}`),n;const i=(0,r.IG)(e.config);return(e,t,n)=>i(e,t.fields[a],t,n)}))},p=(e,t)=>e.fields.reduce(((n,s,i)=>(n[(0,a.C)(s,e,t)]=i,n)),{})},10802:(e,t,n)=>{"use strict";n.d(t,{i:()=>u,x:()=>c});var s=n(2101),a=n(68633),i=n(32934),r=n(27843),o=n(94582),l=n(34784),d=n(20410);let c;!function(e){e.aggregate="aggregate",e.groupBy="groupby"}(c||(c={}));const u={id:d.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,s.U)((t=>{if(!Object.keys(e.fields).find((t=>e.fields[t].operation===c.groupBy)))return t;const n=[];for(const a of t){const t=[];for(const n of a.fields)h(n,e)&&t.push(n);if(0===t.length)continue;const d=new Map;for(let e=0;e<a.length;e++){var s;const n=String(t.map((t=>t.values.get(e)))),r=null!==(s=d.get(n))&&void 0!==s?s:{};d.has(n)||d.set(n,r);for(let t of a.fields){const n=(0,i.C)(t);r[n]||(r[n]={name:n,type:t.type,config:Object.assign({},t.config),values:new o.G}),r[n].values.add(t.values.get(e))}}const c=[];for(const e of t){const t=new o.G,n=(0,i.C)(e);d.forEach((e=>{t.add(e[n].values.get(0))})),c.push({name:e.name,type:e.type,config:Object.assign({},e.config),values:t})}for(const t of a.fields){if(!p(t,e))continue;const n=(0,i.C)(t),s=e.fields[n].aggregations,a={};d.forEach((e=>{const t=e[n],i=(0,l.Kx)({field:t,reducers:s});for(const e of s)Array.isArray(a[e])||(a[e]=[]),a[e].push(i[e])}));for(const e of s){const s={name:`${n} (${e})`,values:new o.G(a[e]),type:r.fS.other,config:{}};s.type=g(e,t,s),c.push(s)}}n.push({fields:c,length:d.size})}return n})))},h=(e,t)=>{var n;const s=(0,i.C)(e);return(null==t||null===(n=t.fields[s])||void 0===n?void 0:n.operation)===c.groupBy},p=(e,t)=>{var n;const s=(0,i.C)(e);return(null==t||null===(n=t.fields[s])||void 0===n?void 0:n.operation)===c.aggregate&&Array.isArray(null==t?void 0:t.fields[s].aggregations)&&(null==t?void 0:t.fields[s].aggregations.length)>0},g=(e,t,n)=>{var s;switch(e){case l.gz.allIsNull:return r.fS.boolean;case l.gz.last:case l.gz.lastNotNull:case l.gz.first:case l.gz.firstNotNull:return t.type;default:return null!==(s=(0,a.fu)(n))&&void 0!==s?s:r.fS.string}}},37800:(e,t,n)=>{"use strict";n.d(t,{Jz:()=>x,Op:()=>g,UO:()=>y,Zi:()=>c,cO:()=>f,gY:()=>b,mB:()=>w,py:()=>p,qr:()=>v,wL:()=>m,zM:()=>S});var s=n(2101),a=n(43917),i=n(35765),r=n(27843),o=n(94582),l=n(20410),d=n(52902);const c=[1e-9,2e-9,2.5e-9,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],h=(e,t)=>e-t,p={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},g={id:l.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,s.U)((t=>g.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const n=b(t,e);return null==n?[]:[S(n)]}},m="BucketMin",f="BucketMax";function v(e){let t,n;const s=[];for(const a of e.fields)a.name===m?t=a:a.name===f?n=a:a.type===r.fS.number&&s.push(a);if(t&&n&&s.length)return{bucketMin:t,bucketMax:n,counts:s}}function b(e,t){var n,s,a;let i=null==t?void 0:t.bucketSize,l=null!==(n=null==t?void 0:t.bucketOffset)&&void 0!==n?n:0;if(!i||i<0){let t=[];for(const n of e)for(const e of n.fields)e.type===r.fS.number&&(t=t.concat(e.values.toArray()));t=t.filter((e=>null!=e)),t.sort(((e,t)=>e-t));let n=1/0;if(1===t.length)n=1;else for(let e=1;e<t.length;e++){let s=t[e]-t[e-1];0!==s&&(n=Math.min(n,s))}let s=t[0];const a=(t[t.length-1]-s)/20;for(let e=0;e<c.length;e++){let t=c[e];if(a<t&&t>=n){i=t;break}}}const p=e=>w(e-l,i)+l;let g,v=(null!==(s=(""+i).match(/\.\d+$/))&&void 0!==s?s:["."])[0].length-1,b=[],x=[];for(const t of e)for(const e of t.fields)if(e.type===r.fS.number){let t=j(e.values.toArray(),p,u,h);b.push(t),x.push(Object.assign({},e,{config:Object.assign({},e.config,{unit:"short"===e.config.unit?"short":void 0})})),!g&&e.config.unit&&(g=e.config)}if(!x.length)return null;let y=(0,d.v_)(b);for(let e=1;e<y.length;e++){let t=y[e];for(let e=0;e<t.length;e++)null==t[e]&&(t[e]=0)}const S={name:m,values:new o.G(y[0]),type:r.fS.number,state:void 0,config:0===v?null!==(a=g)&&void 0!==a?a:{}:Object.assign({},g,{decimals:v})},C=Object.assign({},S,{name:f,values:new o.G(y[0].map((e=>e+i)))});if(null!=t&&t.combine){const e=new Array(y[0].length).fill(0);for(let t=1;t<y.length;t++)for(let n=0;n<e.length;n++)e[n]+=y[t][n];x=[Object.assign({},x[0],{name:"Count",values:new o.G(e),type:r.fS.number,state:void 0})]}else x.forEach(((e,t)=>{e.values=new o.G(y[t+1])}));return{bucketMin:S,bucketMax:C,counts:x}}function x(e,t){return Math.round(e/t)*t}function y(e,t){return Math.ceil(e/t)*t}function w(e,t){return Math.floor(e/t)*t}function j(e,t,n,s){let a=new Map;for(let n=0;n<e.length;n++){let s=e[n];null!=s&&(s=t(s));let i=a.get(s);i?i.count++:a.set(s,{value:s,count:1})}n&&n.forEach((e=>a.delete(e)));let i=[...a.values()];s&&i.sort(((e,t)=>s(e.value,t.value)));let r=Array(i.length),o=Array(i.length);for(let e=0;e<i.length;e++)r[e]=i[e].value,o[e]=i[e].count;return[r,o]}function S(e,t){if(!e.bucketMin.display){const n=(0,a.U)({field:e.bucketMin,theme:null!=t?t:(0,i.j)()});e.bucketMin.display=n,e.bucketMax.display=n}return e.counts[0].display=(0,a.U)({field:e.counts[0],theme:null!=t?t:(0,i.j)()}),{fields:[e.bucketMin,e.bucketMax,...e.counts],length:e.bucketMin.values.length}}},25783:(e,t,n)=>{"use strict";n.d(t,{M:()=>d,c:()=>l});var s=n(2101),a=n(77401),i=n(31919),r=n(20410),o=n(52902);let l;!function(e){e.outer="outer",e.inner="inner"}(l||(l={}));const d={id:r.W.joinByField,aliasIds:[r.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:l.outer},operator:e=>t=>t.pipe((0,s.U)((t=>d.transformer(e)(t)))),transformer:e=>{let t;return n=>{if(n.length>1){e.byField&&!t&&(t=a.Ls.get(i.mi.byName).get(e.byField));const s=(0,o._9)({frames:n,joinBy:t,mode:e.mode});if(s)return[s]}return n}}}},52902:(e,t,n)=>{"use strict";n.d(t,{Y3:()=>u,_9:()=>h,v_:()=>v});var s=n(39963),a=n(68633),i=n(27843),r=n(94582),o=n(77401),l=n(31919),d=n(25783);function c(e){var t;return null!==(t=e.joinBy)&&void 0!==t?t:function(e){const{timeField:t}=(0,a.sV)(e[0]);if(t)return o.Ls.get(l.mi.firstTimeField).get({});let n=[];for(const t of e[0].fields)t.type===i.fS.number&&n.push(t.name);for(let t=1;t<e.length;t++){const t=[];for(const n of e[0].fields)n.type===i.fS.number&&t.push(n.name);n=n.filter((e=>!t.includes(e)))}return o.Ls.get(l.mi.byName).get(n[0])}(e.frames)}function u(e,t){if(t>=0){let n=e.fields[t];n.type===i.fS.string||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=e.length;if(n<=1)return!0;let s=0,a=n-1;for(;s<=a&&null==e.get(s);)s++;for(;a>=s&&null==e.get(a);)a--;if(a<=s)return!0;const i=Math.max(1,Math.floor((a-s+1)/t));for(let t=e.get(s),n=s+i;n<=a;n+=i){const s=e.get(n);if(null!=s){if(s<=t)return!1;t=s}}return!0}(n.values)||(e=(0,a.aK)(e,t))}return e}function h(e){var t;if(null===(t=e.frames)||void 0===t||!t.length)return;if(1===e.frames.length){let t=e.frames[0],n=t;const s=c(e);let a=n.fields.findIndex((t=>s(t,n,e.frames)));if(e.keepOriginIndices&&(n=Object.assign({},t,{fields:t.fields.map(((e,t)=>{const n=Object.assign({},e),s={frameIndex:0,fieldIndex:t};return n.state?n.state.origin=s:n.state={origin:s},n}))}),a>0)){const e=n.fields[a],t=n.fields.filter(((e,t)=>t!==a));t.unshift(e),n.fields=t,a=0}if(a>=0&&(n=u(n,a)),e.keep){let s=n.fields.filter(((t,s)=>s===a||e.keep(t,n,e.frames)));t!==n?n.fields=s:n=Object.assign({},t,{fields:s})}return n}const n=[],s=[],a=[],i=c(e);for(let t=0;t<e.frames.length;t++){var o;const r=e.frames[t];if(!r||null===(o=r.fields)||void 0===o||!o.length)continue;const c=[p];let u,f=[];for(let n=0;n<r.fields.length;n++){const s=r.fields[n];if(s.state=s.state||{},!u&&i(s,r,e.frames))u=s;else{var l,d;if(e.keep&&!e.keep(s,r,e.frames))continue;let t=null===(l=s.config.custom)||void 0===l?void 0:l.spanNulls;c.push(!0===t?p:-1===t?g:m);let n=null!==(d=s.labels)&&void 0!==d?d:{};r.name&&(n=Object.assign({},n,{name:r.name})),f.push(Object.assign({},s,{labels:n}))}e.keepOriginIndices&&(s.state.origin={frameIndex:t,fieldIndex:n})}if(!u)continue;0===a.length&&a.push(u),n.push(c);const v=[u.values.toArray()];for(const e of f){var h;v.push(e.values.toArray()),a.push(e),null===(h=e.state)||void 0===h||delete h.displayName}s.push(v)}const f=v(s,n,e.mode);return{length:f[0].length,fields:a.map(((e,t)=>Object.assign({},e,{values:new r.G(f[t])})))}}const p=0,g=1,m=2;function f(e,t,n){for(let s,a=0,i=-1;a<t.length;a++){let r=t[a];if(r>i){for(s=r-1;s>=0&&null==e[s];)e[s--]=null;for(s=r+1;s<n&&null==e[s];)e[i=s++]=null}}}function v(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.c.outer;if(a===d.c.inner)n=new Set((0,s.Z)(e.map((e=>e[0]))));else{n=new Set;for(let t=0;t<e.length;t++){let s=e[t][0],a=s.length;for(let e=0;e<a;e++)n.add(s[e])}}let i=[Array.from(n).sort(((e,t)=>e-t))],r=i[0].length,o=new Map;for(let e=0;e<r;e++)o.set(i[0][e],e);for(let n=0;n<e.length;n++){let s=e[n],a=s[0];for(let e=1;e<s.length;e++){let l=s[e],d=Array(r).fill(void 0),c=t?t[n][e]:g,u=[];for(let e=0;e<l.length;e++){let t=l[e],n=o.get(a[e]);null===t?c!==p&&(d[n]=t,c===m&&u.push(n)):d[n]=t}f(d,u,r),i.push(d)}}return i}},9695:(e,t,n)=>{"use strict";n.d(t,{k:()=>l,r:()=>d});var s=n(2101),a=n(32934),i=n(27843),r=n(94582),o=n(20410);let l;!function(e){e.Columns="columns",e.Rows="rows"}(l||(l={}));const d={id:o.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:e=>t=>t.pipe((0,s.U)((t=>d.transformer(e)(t)))),transformer:e=>t=>{var n;if(e.mode===l.Rows)return function(e,t){const n=[];for(const s of e)for(const o of s.fields)if(o.labels){const l=[],d=[];if(t)for(const e of t)l.push(e),d.push(o.labels[e]);else for(const[e,t]of Object.entries(o.labels))l.push(e),d.push(t);d.length&&n.push(Object.assign({},s,{name:(0,a.C)(o,s,e),fields:[{name:"label",type:i.fS.string,config:{},values:new r.G(l)},{name:"value",type:i.fS.string,config:{},values:new r.G(d)}],length:d.length}))}return n}(t,e.keepLabels);const s=[],o=null!==(n=e.keepLabels)&&void 0!==n&&n.length?new Set(e.keepLabels):void 0;for(const n of t){const t=[],a={};for(const s of n.fields){if(!s.labels){t.push(s);continue}const n=Object.assign({},s,{config:Object.assign({},s.config,{displayName:void 0,displayNameFromDS:void 0}),labels:void 0});t.push(n);for(const t of Object.keys(s.labels)){var d;if(o&&!o.has(t))continue;if(e.valueLabel===t){n.name=s.labels[t];continue}(null!==(d=a[t])&&void 0!==d?d:a[t]=new Set).add(s.labels[t])}}for(const e in a)for(const s of a[e]){const a=new Array(n.length).fill(s);t.push({name:e,type:i.fS.string,values:new r.G(a),config:{}})}s.push({fields:t,length:n.length})}return s}}},33660:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var s=n(82897),a=n(2101),i=n(57171),r=n(94582);const o={id:n(20410).W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:e=>e=>e.pipe((0,a.U)((e=>{if(!Array.isArray(e)||e.length<=1)return e;const t=e.filter((e=>e.fields.length>0));if(0===t.length)return[e[0]];const n=new Set,s={},a=[],r=new i.v;for(let e=0;e<t.length;e++){const i=t[e];for(let o=0;o<i.fields.length;o++){const d=i.fields[o];n.has(d.name)||(r.addField(l(d)),n.add(d.name)),s[d.name]=s[d.name]||{},s[d.name][e]=o,t.length-1===e&&(h(s,d,t)&&a.push(d.name))}}if(0===a.length)return e;const o={},g=[],m=d(t,s,a),f=c(t,n,s);for(let e=0;e<t.length;e++){const n=t[e];for(let t=0;t<n.length;t++){const n=m(e,t),s=f(e,t);if(!Array.isArray(o[n])){o[n]=[s],g.push(p(n,o));continue}let a=!1;o[n]=o[n].map((e=>u(e,s)?(a=!0,Object.assign({},e,s)):e)),a||(o[n].push(s),g.push(p(n,o)))}}for(const e of g){const t=o[e.key][e.index];t&&r.add(t)}return[r]})))},l=e=>Object.assign({},(0,s.omit)(e,["values","state","labels","config"]),{values:new r.G,config:Object.assign({},(0,s.omit)(e.config,"displayName"))}),d=(e,t,n)=>{const s=n.reduce(((e,n)=>Object.keys(t[n]).reduce(((e,s)=>(e[s]=e[s]||[],e[s].push(t[n][s]),e)),e)),{});return(t,n)=>s[t].reduce(((s,a)=>s+e[t].fields[a].values.get(n)),"")},c=(e,t,n)=>(s,a)=>{const i={},r=Array.from(t);for(const t of r){const r=n[t];if(!r)continue;const o=r[s];if("number"!=typeof o)continue;const l=e[s];if(!l||!l.fields)continue;const d=l.fields[o];d&&d.values&&(i[t]=d.values.get(a))}return i},u=(e,t)=>{let n=!0;for(const s in t)if(void 0!==e[s]&&null!==e[s]&&e[s]!==t[s]){n=!1;break}return n},h=(e,t,n)=>Object.keys(e[t.name]).length===n.length,p=(e,t)=>({key:e,index:t[e].length-1})},62037:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});const s={id:n(20410).W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:e=>e=>e,transformer:e=>e=>e}},18602:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,t:()=>r});var s=n(82897),a=n(2101),i=n(32934);const r={id:n(20410).W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:e=>t=>t.pipe((0,a.U)((t=>{const n=l(e.indexByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:n(e.fields,t,e)}))):t})))},o=e=>(t,n)=>d(t,e)-d(n,e),l=e=>(t,n,a)=>{if(!Array.isArray(t)||0===t.length)return t;if(!e||0===Object.keys(e).length)return t;const r=o(e);return(0,s.clone)(t).sort(((e,t)=>r((0,i.C)(e,a,n),(0,i.C)(t,a,n))))},d=(e,t)=>Number.isInteger(t[e])?t[e]:Number.MAX_SAFE_INTEGER},27275:(e,t,n)=>{"use strict";n.d(t,{AL:()=>h,mf:()=>p});var s=n(2101),a=n(68633),i=n(32934),r=n(27843),o=n(94582),l=n(34784),d=n(77401),c=n(75922),u=n(20410);let h;!function(e){e.SeriesToRows="seriesToRows",e.ReduceFields="reduceFields"}(h||(h={}));const p={id:u.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[l.gz.max]},operator:e=>t=>t.pipe((0,s.U)((t=>{var n;if(null==e||null===(n=e.reducers)||void 0===n||!n.length)return t;const s=e.fields?(0,d.sq)(e.fields):e.includeTimeField&&e.mode===h.ReduceFields?c.m3:c.Qw;if(e.mode===h.ReduceFields)return function(e,t,n){const s=l.TB.list(n).map((e=>e.id)),a=[];for(const n of e){const i=[];for(const a of n.fields)if(t(a,n,e)){const e=(0,l.Kx)({field:a,reducers:s});for(const t of s){const n=e[t],r=Object.assign({},a,{values:new o.G([n])});r.state=void 0,s.length>1&&(r.labels||(r.labels={}),r.labels.reducer=l.TB.get(t).name),i.push(r)}}i.length&&a.push(Object.assign({},n,{fields:i,length:1}))}return a}(t,s,e.reducers);const u=function(e,t,n,s){const d=l.TB.list(n),c=d.map((e=>e.id)),u=[],h=s?function(e){const t=new Set;for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.add(n);return[...t]}(e):[];for(const n of e){const p=n.fields.filter((s=>t(s,n,e))),g=p.length,m=[],f=new o.G(new Array(g));m.push({name:"Field",type:r.fS.string,values:f,config:{}});const v={};if(s)for(const e of h)v[e]=new o.G(new Array(g)),m.push({name:e,type:r.fS.string,values:v[e],config:{}});const b={};for(const e of d)b[e.id]=new o.G(new Array(g)),m.push({name:e.name,type:r.fS.other,values:b[e.id],config:{}});for(let t=0;t<p.length;t++){const a=p[t],r=(0,l.Kx)({field:a,reducers:c});if(s){if(f.buffer[t]=a.name,a.labels)for(const e of Object.keys(a.labels))v[e].set(t,a.labels[e])}else f.buffer[t]=(0,i.C)(a,n,e);for(const e of d){const n=r[e.id];b[e.id].buffer[t]=n}}for(const e of m)if(e.type===r.fS.other){const t=(0,a.fu)(e);t&&(e.type=t)}u.push(Object.assign({},n,{fields:m,length:g}))}return function(e){if(null==e||!e.length)return;const t=e[0];for(let n=1;n<e.length;n++){const s=e[n];for(let e=0;e<t.fields.length;e++){const n=t.fields[e];for(let t=0;t<s.fields.length;t++){const a=s.fields[t],i=0===e&&0===t,r=n.type===a.type&&n.name===a.name;if(i||r){const e=n.values.toArray(),t=a.values.toArray();n.values.buffer=e.concat(t)}}}}return t.name=void 0,t.length=t.fields[0].values.length,t}(u)}(t,s,e.reducers,e.labelsToFields);return u?[u]:[]})))}},39003:(e,t,n)=>{"use strict";let s;n.d(t,{Z:()=>s}),function(e){e.NoData="no_data",e.Paused="paused",e.Alerting="alerting",e.OK="ok",e.Pending="pending",e.Unknown="unknown"}(s||(s={}))},53581:(e,t,n)=>{"use strict";let s;n.d(t,{L:()=>s}),function(e){e.Field="field",e.Text="text",e.Skip="skip"}(s||(s={}))},54316:(e,t,n)=>{"use strict";n.d(t,{CQ:()=>r,k8:()=>o,zj:()=>i});var s=n(15546);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let i,r;!function(e){e.CloudAlerting="cloud-alerting",e.UnifiedAlerting="unified-alerting",e.Dashboard="dashboard",e.Explore="explore",e.Unknown="unknown",e.PanelEditor="panel-editor",e.PanelViewer="panel-viewer"}(i||(i={}));class o extends s.Sg{constructor(){super(...arguments),a(this,"root",void 0),a(this,"rootNav",void 0)}init(e){}setRootPage(e,t){return this.root=e,this.rootNav=t,this}setComponentsFromLegacyExports(e){if(e.ConfigCtrl&&(this.angularConfigCtrl=e.ConfigCtrl),this.meta&&this.meta.includes)for(const t of this.meta.includes)if(t.type===s.$_.page&&t.component){if(!e[t.component]){console.warn("App Page uses unknown component: ",t.component,this.meta);continue}}}}!function(e){e.alpha="alpha",e.beta="beta"}(r||(r={}))},52410:(e,t,n)=>{"use strict";n.d(t,{Hx:()=>s,Z3:()=>a,bm:()=>i});const s=0,a=100,i="SAML"},60053:(e,t,n)=>{"use strict";let s;n.d(t,{m:()=>s}),function(e){e[e.Off=0]="Off",e[e.Crosshair=1]="Crosshair",e[e.Tooltip=2]="Tooltip"}(s||(s={}))},28173:(e,t,n)=>{"use strict";let s;n.d(t,{Gl:()=>i,Gu:()=>s,dC:()=>a}),function(e){e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error"}(s||(s={}));const a=["graph","table","logs","trace","nodeGraph","flamegraph"];let i;!function(e){e.Null="null",e.Ignore="connected",e.AsZero="null as zero"}(i||(i={}))},27843:(e,t,n)=>{"use strict";let s;n.d(t,{Ls:()=>i,M5:()=>a,fS:()=>s,rN:()=>r}),function(e){e.time="time",e.number="number",e.string="string",e.boolean="boolean",e.trace="trace",e.geo="geo",e.other="other"}(s||(s={}));const a="Value",i="Time",r="Metric"},74658:(e,t,n)=>{"use strict";let s;n.d(t,{P:()=>s}),function(e){e.TimeSeriesWide="timeseries-wide",e.TimeSeriesLong="timeseries-long",e.TimeSeriesMany="timeseries-many",e.DirectoryListing="directory-listing",e.HeatmapRows="heatmap-rows",e.HeatmapCells="heatmap-cells"}(s||(s={}))},66358:(e,t,n)=>{"use strict";let s,a;n.d(t,{L:()=>s,o:()=>a}),function(e){e.Series="series",e.Field="field",e.Fields="fields",e.Value="value",e.BuiltIn="built-in",e.Template="template"}(s||(s={})),function(e){e.Values="values"}(a||(a={}))},23214:(e,t,n)=>{"use strict";n.d(t,{MF:()=>o,Ru:()=>l,eA:()=>d,hf:()=>r,iL:()=>c});var s=n(87289),a=n(15546);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends a.Sg{constructor(e){super(),i(this,"components",{}),this.DataSourceClass=e}setConfigEditor(e){return this.components.ConfigEditor=e,this}setConfigCtrl(e){return this.angularConfigCtrl=e,this}setQueryCtrl(e){return this.components.QueryCtrl=e,this}setAnnotationQueryCtrl(e){return this.components.AnnotationsQueryCtrl=e,this}setQueryEditor(e){return this.components.QueryEditor=e,this}setExploreQueryField(e){return this.components.ExploreQueryField=e,this}setExploreMetricsQueryField(e){return this.components.ExploreMetricsQueryField=e,this}setExploreLogsQueryField(e){return this.components.ExploreLogsQueryField=e,this}setQueryEditorHelp(e){return this.components.QueryEditorHelp=e,this}setExploreStartPage(e){return this.setQueryEditorHelp(e)}setVariableQueryEditor(e){return this.components.VariableQueryEditor=e,this}setMetadataInspector(e){return this.components.MetadataInspector=e,this}setComponentsFromLegacyExports(e){this.angularConfigCtrl=e.ConfigCtrl,this.components.QueryCtrl=e.QueryCtrl,this.components.AnnotationsQueryCtrl=e.AnnotationsQueryCtrl,this.components.ExploreQueryField=e.ExploreQueryField,this.components.QueryEditor=e.QueryEditor,this.components.QueryEditorHelp=e.QueryEditorHelp,this.components.VariableQueryEditor=e.VariableQueryEditor}}class o{constructor(e){i(this,"name",void 0),i(this,"id",void 0),i(this,"type",void 0),i(this,"uid",void 0),i(this,"interval",void 0),i(this,"init",void 0),i(this,"components",void 0),i(this,"meta",void 0),i(this,"languageProvider",void 0),i(this,"annotations",void 0),i(this,"variables",void 0),this.name=e.name,this.id=e.id,this.type=e.type,this.meta=e.meta,this.uid=e.uid}getRef(){return{type:this.type,uid:this.uid}}}let l,d;!function(e){e.Logs="Logs",e.Metrics="Metrics",e.Tracing="Tracing"}(l||(l={})),function(e){e.Cancelled="cancelled",e.Timeout="timeout",e.Unknown="unknown"}(d||(d={}));class c{constructor(){i(this,"datasource",void 0),i(this,"request",void 0),i(this,"start",void 0),i(this,"startTask",void 0)}}c=(0,s.s)(c),o=(0,s.s)(o)},663:(e,t,n)=>{"use strict";let s;n.d(t,{R:()=>a,S:()=>s}),function(e){e.Thresholds="thresholds",e.PaletteClassic="palette-classic",e.PaletteSaturated="palette-saturated",e.ContinuousGrYlRd="continuous-GrYlRd",e.Fixed="fixed"}(s||(s={}));const a="gray"},15399:(e,t,n)=>{"use strict";function s(e){return t=>t.__systemRef===e}n.d(t,{Y4:()=>s,qb:()=>i,v3:()=>a});const a=e=>"string"==typeof(null==e?void 0:e.__systemRef);let i;!function(e){e.Unit="unit",e.Min="min",e.Max="max",e.Decimals="decimals",e.DisplayName="displayName",e.NoValue="noValue",e.Thresholds="thresholds",e.Mappings="mappings",e.Links="links",e.Color="color"}(i||(i={}))},42454:(e,t,n)=>{"use strict";n.d(t,{Mo:()=>a,_S:()=>s,iJ:()=>i});const s={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,anchor:!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"credit-card":!0,cube:!0,dashboard:!0,database:!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,filter:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,table:!0,"tag-alt":!0,"text-fields":!0,times:!0,"toggle-on":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function a(e){return!(!e||"string"!=typeof e)&&e in s}function i(e){if(a(e))return e}},89905:(e,t,n)=>{"use strict";let s;n.d(t,{l:()=>s}),function(e){e.Grid="grid",e.List="list"}(s||(s={}))},94025:(e,t,n)=>{"use strict";n.d(t,{IA:()=>l,Kh:()=>o,SI:()=>r,oi:()=>d});var s=n(71390),a=n(54209);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r={alertSuccess:(0,s.X)("alert-success"),alertWarning:(0,s.X)("alert-warning"),alertError:(0,s.X)("alert-error")},o={refresh:(0,s.X)("refresh"),componentDidMount:(0,s.X)("component-did-mount"),dataReceived:(0,s.X)("data-received"),dataError:(0,s.X)("data-error"),dataFramesReceived:(0,s.X)("data-frames-received"),dataSnapshotLoad:(0,s.X)("data-snapshot-load"),editModeInitialized:(0,s.X)("init-edit-mode"),initPanelActions:(0,s.X)("init-panel-actions"),initialized:(0,s.X)("panel-initialized"),panelTeardown:(0,s.X)("panel-teardown"),render:(0,s.X)("render")};class l extends a.R{}i(l,"type","graph-hover");class d extends a.m{constructor(){super(...arguments),i(this,"payload",{point:{}})}}i(d,"type","graph-hover-clear")},22543:(e,t,n)=>{"use strict";let s,a,i,r;function o(e){return e.type===r.Status}function l(e){return e.type===r.Join}function d(e){return e.type===r.Leave}function c(e){return e.type===r.Message}function u(e){if(null!=e&&e.length){let t=e.trim().split("/");if(t.length>=3)return{scope:t[0],namespace:t[1],path:t.slice(2).join("/")}}}function h(e){return!!(null!=e&&e.path&&e.namespace&&e.scope)}function p(e){if(!e.scope)return"";let t=e.scope;return e.namespace?(t+="/"+e.namespace,e.path?t+"/"+e.path:t):t}n.d(t,{Aj:()=>p,FU:()=>r,H7:()=>u,RL:()=>c,SK:()=>a,gH:()=>d,mx:()=>l,nU:()=>h,se:()=>o,yS:()=>i,z:()=>s}),function(e){e.DataSource="ds",e.Plugin="plugin",e.Grafana="grafana",e.Stream="stream"}(s||(s={})),function(e){e.DataStream="stream",e.DataFrame="frame",e.JSON="json"}(a||(a={})),function(e){e.Pending="pending",e.Connected="connected",e.Connecting="connecting",e.Disconnected="disconnected",e.Shutdown="shutdown",e.Invalid="invalid"}(i||(i={})),function(e){e.Status="status",e.Join="join",e.Leave="leave",e.Message="message"}(r||(r={}))},93246:(e,t,n)=>{"use strict";let s,a,i,r,o;n.d(t,{Ku:()=>a,Q4:()=>l,UV:()=>i,Uv:()=>o,Y4:()=>r,in:()=>s}),function(e){e.emerg="critical",e.fatal="critical",e.alert="critical",e.crit="critical",e.critical="critical",e.warn="warning",e.warning="warning",e.err="error",e.eror="error",e.error="error",e.info="info",e.information="info",e.informational="info",e.notice="info",e.dbug="debug",e.debug="debug",e.trace="trace",e.unknown="unknown"}(s||(s={})),function(e){e[e.Number=0]="Number",e[e.String=1]="String",e[e.LabelsMap=2]="LabelsMap",e[e.Error=3]="Error"}(a||(a={})),function(e){e.Descending="Descending",e.Ascending="Ascending"}(i||(i={})),function(e){e.none="none",e.exact="exact",e.numbers="numbers",e.signature="signature"}(r||(r={})),function(e){e.none="No de-duplication",e.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",e.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",e.signature="De-duplication of successive lines that have identical punctuation and whitespace."}(o||(o={}));const l=e=>{if(!e)return!1;const t=e;return void 0!==t.getLogRowContext&&void 0!==t.showContextToggle}},94575:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});const s=e=>void 0!==e.getLogsVolumeDataProvider},97370:(e,t,n)=>{"use strict";let s,a,i;n.d(t,{Qz:()=>i,VO:()=>a,yV:()=>s}),function(e){e.Core="core",e.Plugin="plugin",e.Config="config"}(s||(s={})),function(e){e.Section="section",e.Item="item"}(a||(a={})),function(e){e[e.Standard=0]="Standard",e[e.Canvas=1]="Canvas",e[e.Custom=2]="Custom"}(i||(i={}))},59337:(e,t,n)=>{"use strict";let s;n.d(t,{B:()=>s}),function(e){e.Admin="Admin",e.Editor="Editor",e.Viewer="Viewer"}(s||(s={}))},40389:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,mi:()=>l,sf:()=>d,wm:()=>r});var s=n(82897),a=n(27843);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let r,o;!function(e){e.Auto="auto",e.Vertical="vertical",e.Horizontal="horizontal"}(r||(r={})),function(e){e[e.Best=100]="Best",e[e.Good=70]="Good",e[e.OK=50]="OK"}(o||(o={}));class l{constructor(e,t){i(this,"data",void 0),i(this,"panel",void 0),i(this,"dataSummary",void 0),i(this,"list",[]),this.data=e,this.panel=t,this.dataSummary=this.computeDataSummary()}getListAppender(e){return new d(this.list,e)}computeDataSummary(){var e;const t=(null===(e=this.data)||void 0===e?void 0:e.series)||[];let n,s=0,i=0,r=0,o=0,l=0,d=0;for(const e of t){var c;o+=e.length,null!==(c=e.meta)&&void 0!==c&&c.preferredVisualisationType&&(n=e.meta.preferredVisualisationType);for(const t of e.fields)switch(d++,t.type){case a.fS.number:s+=1;break;case a.fS.time:i+=1;break;case a.fS.string:r+=1}e.length>l&&(l=e.length)}return{numberFieldCount:s,timeFieldCount:i,stringFieldCount:r,rowCountTotal:o,rowCountMax:l,fieldCount:d,preferredVisualisationType:n,frameCount:t.length,hasData:o>0,hasTimeField:i>0,hasNumberField:s>0,hasStringField:r>0}}getList(){return this.list}}class d{constructor(e,t){this.list=e,this.defaults=t}append(e){this.list.push((0,s.defaultsDeep)(e,this.defaults))}}},15546:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let a,i,r,o,l,d;n.d(t,{$_:()=>d,BV:()=>a,Sg:()=>c,Xy:()=>r,_Z:()=>o,w2:()=>l,zV:()=>i}),function(e){e.alpha="alpha",e.beta="beta",e.stable="stable",e.deprecated="deprecated"}(a||(a={})),function(e){e.panel="panel",e.datasource="datasource",e.app="app",e.renderer="renderer",e.secretsmanager="secretsmanager"}(i||(i={})),function(e){e.internal="internal",e.valid="valid",e.invalid="invalid",e.modified="modified",e.missing="missing"}(r||(r={})),function(e){e.grafana="grafana",e.commercial="commercial",e.community="community",e.private="private",e.core="core"}(o||(o={})),function(e){e.missingSignature="signatureMissing",e.invalidSignature="signatureInvalid",e.modifiedSignature="signatureModified"}(l||(l={})),function(e){e.dashboard="dashboard",e.page="page",e.panel="panel",e.datasource="datasource"}(d||(d={}));class c{addConfigPage(e){return this.configPages||(this.configPages=[]),this.configPages.push(e),this}setChannelSupport(e){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){s(this,"meta",void 0),s(this,"loadError",void 0),s(this,"angularConfigCtrl",void 0),s(this,"configPages",void 0),this.meta={}}}},39266:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var s=n(15546);function a(e){return e&&e!==s.Xy.valid&&e!==s.Xy.internal}},84403:(e,t,n)=>{"use strict";let s,a;n.d(t,{CZ:()=>i,K2:()=>a,p:()=>r,w5:()=>s}),function(e){e.Annotations="annotations"}(s||(s={})),function(e){e.Equal="Equal",e.NotEqual="NotEqual",e.EqualRegEx="EqualRegEx",e.NotEqualRegEx="NotEqualRegEx"}(a||(a={}));const i=e=>void 0!==e.importFromAbstractQueries,r=e=>void 0!==e.exportToAbstractQueries},51389:(e,t,n)=>{"use strict";let s,a,i;n.d(t,{$U:()=>a,Bd:()=>s,bU:()=>i}),function(e){e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged"}(s||(s={})),function(e){e[e.disabled=0]="disabled",e[e.alphabeticalAsc=1]="alphabeticalAsc",e[e.alphabeticalDesc=2]="alphabeticalDesc",e[e.numericalAsc=3]="numericalAsc",e[e.numericalDesc=4]="numericalDesc",e[e.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",e[e.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc"}(a||(a={})),function(e){e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable"}(i||(i={}))},14150:(e,t,n)=>{"use strict";let s;n.d(t,{Q:()=>s}),function(e){e.Light="light",e.Dark="dark"}(s||(s={}))},87602:(e,t,n)=>{"use strict";let s;n.d(t,{H:()=>s}),function(e){e.Absolute="absolute",e.Percentage="percentage"}(s||(s={}))},12717:(e,t,n)=>{"use strict";n.d(t,{JK:()=>r,Rr:()=>o,T_:()=>i,Ys:()=>a});var s=n(88246);const a="browser",i="YYYY-MM-DD HH:mm:ss";function r(){const e=(0,s.CQ)();return{from:(0,s.CQ)(e).subtract(6,"hour"),to:e,raw:{from:"now-6h",to:"now"}}}function o(){return{from:600,to:0}}},12812:(e,t,n)=>{"use strict";let s,a;n.d(t,{H:()=>s,e:()=>a}),function(e){e.ValueToText="value",e.RangeToText="range",e.RegexToText="regex",e.SpecialValue="special"}(s||(s={})),function(e){e.True="true",e.False="false",e.Null="null",e.NaN="nan",e.NullAndNaN="null+nan",e.Empty="empty"}(a||(a={}))},58193:(e,t,n)=>{"use strict";let s;n.d(t,{Mg:()=>r,Tq:()=>a,gv:()=>o,j2:()=>s,v6:()=>i}),function(e){e.Legacy="legacy",e.Standard="standard",e.Custom="custom",e.Datasource="datasource"}(s||(s={}));class a{}class i extends a{getType(){return s.Standard}}class r extends a{constructor(){var e,t,n;super(...arguments),n=void 0,(t="editor")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getType(){return s.Custom}}class o extends a{getType(){return s.Datasource}}},54251:(e,t,n)=>{"use strict";n.d(t,{vo:()=>l,rt:()=>u,j:()=>c});var s=n(68959),a=n(97859),i=n(2238);class r{constructor(){var e,t,n;n=[],(t="properties")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}addCustomEditor(e){return this.properties.push(e),this}getRegistry(){return new i.B((()=>this.properties))}getItems(){return this.properties}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r{addNumberInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:s.S.get("number").editor,editor:s.S.get("number").editor,process:a.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSliderInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:s.S.get("slider").editor,editor:s.S.get("slider").editor,process:a.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addTextInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:s.S.get("text").editor,editor:s.S.get("text").editor,process:a.op,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:s.S.get("select").editor,editor:s.S.get("select").editor,process:a.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:s.S.get("radio").editor,editor:s.S.get("radio").editor,process:a.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("boolean").editor,override:s.S.get("boolean").editor,process:a.W4,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("color").editor,override:s.S.get("color").editor,process:a.kG,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("unit").editor,override:s.S.get("unit").editor,process:a.VB,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addFieldNamePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("field-name").editor,override:s.S.get("field-name").editor,process:a.kG,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}}class d{constructor(e){o(this,"path",""),o(this,"category",void 0),o(this,"defaultValue",void 0),o(this,"id","nested-panel-options"),o(this,"name","nested"),o(this,"editor",(()=>null)),o(this,"getBuilder",(()=>this.cfg.build)),o(this,"getNestedValueAccess",(e=>{const t=this.cfg.values;return t?t(e):{getValue:t=>e.getValue(`${this.path}.${t}`),onChange:(t,n)=>e.onChange(`${this.path}.${t}`,n)}})),this.cfg=e,this.path=e.path,this.category=e.category,this.defaultValue=e.defaultValue}}function c(e){return"nested-panel-options"===e.id}class u extends r{addNestedOptions(e){const t=new d(e);return this.addCustomEditor(t)}addNumberInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("number").editor}))}addSliderInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("slider").editor}))}addTextInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("text").editor}))}addStringArray(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("strings").editor}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("select").editor}))}addMultiSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("multi-select").editor}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("radio").editor}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("boolean").editor}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("color").editor,settings:e.settings||{}}))}addTimeZonePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("timezone").editor,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("unit").editor}))}addFieldNamePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("field-name").editor}))}addDashboardPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:s.S.get("dashboard-uid").editor}))}}},57897:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var s=n(82897);function a(e){return"number"==typeof e?e:""===e||null==e||Array.isArray(e)?NaN:"boolean"==typeof e?e?1:0:(0,s.toNumber)(e)}},12925:(e,t,n)=>{"use strict";n.r(t),n.d(t,{moveItemImmutably:()=>a,sortValues:()=>o});var s=n(27864);function a(e,t,n){const s=[...e];return Array.prototype.splice.call(s,n,0,Array.prototype.splice.call(s,t,1)[0]),s}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),r=(e,t)=>e-t;function o(e){return(t,n)=>{if(t===n)return 0;if(null==n||"string"==typeof n&&""===n.trim())return-1;if(null==t||"string"==typeof t&&""===(null==t?void 0:t.trim()))return 1;let a=i.compare;return"number"==typeof t&&"number"==typeof n&&(a=r),e===s.As.Descending?a(n,t):a(t,n)}}},81960:(e,t,n)=>{"use strict";n.d(t,{L:()=>a,n:()=>i});var s=n(2238);let a;!function(e){e.Add="+",e.Subtract="-",e.Divide="/",e.Multiply="*"}(a||(a={}));const i=new s.B((()=>[{id:a.Add,name:"Add",operation:(e,t)=>e+t},{id:a.Subtract,name:"Subtract",operation:(e,t)=>e-t},{id:a.Multiply,name:"Multiply",operation:(e,t)=>e*t},{id:a.Divide,name:"Divide",operation:(e,t)=>e/t}]))},14790:(e,t,n)=>{"use strict";n.d(t,{MJ:()=>y,QM:()=>m,uP:()=>p,x5:()=>h});var s=n(82897),a=n(26389),i=n.n(a),r=n(57171),o=n(68633),l=n(32934),d=n(27843),c=n(55343);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let h;function p(e,t){return new m(t).readCSV(e)}var g;!function(e){e[e.full=0]="full",e[e.name=1]="name",e[e.none=2]="none"}(h||(h={})),function(e){e[e.Starting=0]="Starting",e[e.InHeader=1]="InHeader",e[e.ReadingRows=2]="ReadingRows"}(g||(g={}));class m{constructor(e){u(this,"config",void 0),u(this,"callback",void 0),u(this,"state",void 0),u(this,"data",void 0),u(this,"current",void 0),u(this,"chunk",((e,t)=>{for(let t=0;t<e.data.length;t++){const n=e.data[t];if(n.length<1)continue;const s=n[0];if(s){if(s.startsWith("#")){const e=s.indexOf("#",2);if(e>0){const t=s.slice(1,e),a="name"===t,i={unit:"#"};if(a||i.hasOwnProperty(t)){this.state===g.ReadingRows&&(this.current=new r.v({fields:[]}),this.data.push(this.current));const i=s.slice(e+1);if(a){this.current.addFieldFor(void 0,i);for(let e=1;e<n.length;e++)this.current.addFieldFor(void 0,n[e])}else{const{fields:e}=this.current;for(let s=0;s<e.length;s++){e[s].config||(e[s].config={});e[s].config[t]=0===s?i:n[s]}}this.state=g.InHeader;continue}}else if(this.state===g.Starting){this.state=g.InHeader;continue}continue}if(this.state===g.Starting){if((0,o.LI)(s)===d.fS.string){for(const e of n)this.current.addFieldFor(void 0,e);this.state=g.InHeader;continue}this.state=g.InHeader}}if(this.state,g.ReadingRows,this.state=g.ReadingRows,n.length>this.current.fields.length){const{fields:e}=this.current;for(let t=e.length;t<n.length;t++)this.current.addFieldFor(n[t]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(n),this.callback&&this.callback.onRow(n)}})),e||(e={}),this.config=e.config||{},this.callback=e.callback,this.current=new r.v({fields:[]}),this.state=g.Starting,this.data=[]}readCSV(e){this.current=new r.v({fields:[]}),this.data=[this.current];const t=Object.assign({},this.config,{dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk});return i().parse(e,t),this.data}}function f(e,t){const n=e.toString();return n.includes('"')?t.quoteChar+n.replace(/"/gi,'""')+t.quoteChar:n.includes("\n")||n.includes(t.delimiter)?t.quoteChar+n+t.quoteChar:n}function v(e,t){return e.display?n=>{const s=e.display(n);return f((0,c.zc)(s),t)}:e=>f(e,t)}function b(e,t,n){const s="name"===e,a="type"===e;for(const i of t){const r=i.config;if(s||a||r&&r.hasOwnProperty(e)){let i="#"+e+"#";for(let r=0;r<t.length;r++){r>0&&(i+=n.delimiter);let o=t[r].name;a?o=t[r].type:s||(o=t[r].config[e]),o&&(i+=f(o,n))}return i+n.newline}}return""}function x(){const e=["x","y"];return e.toLocaleString?e.toLocaleString().charAt(1):","}function y(e,t){if(!e)return"";let n=(t=(0,s.defaults)(t,{delimiter:x(),newline:"\r\n",quoteChar:'"',encoding:"",headerStyle:h.name,useExcelHeader:!1})).useExcelHeader?`sep=${t.delimiter}${t.newline}`:"";for(const s of e){const{fields:e}=s;if(0===e.length)continue;if(t.headerStyle===h.full)n=n+b("name",e,t)+b("type",e,t)+b("unit",e,t)+b("dateFormat",e,t);else if(t.headerStyle===h.name){for(let a=0;a<e.length;a++)a>0&&(n+=t.delimiter),n+=`"${(0,l.C)(e[a],s).replace(/"/g,'""')}"`;n+=t.newline}const a=e[0].values.length;if(a>0){const s=e.map((e=>v(e,t)));for(let i=0;i<a;i++){for(let a=0;a<e.length;a++){a>0&&(n+=t.delimiter);const r=e[a].values.get(i);null!==r&&(n+=s[a](r))}n+=t.newline}}n+=t.newline}return n}},66827:(e,t,n)=>{"use strict";n.d(t,{W:()=>i,_:()=>r});var s=n(36298),a=n(274);const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(e){var t,n;const{onClickFn:s,replaceVariables:a,link:i,scopedVars:r,range:d,field:c,internalLink:u}=e,h=l(null===(t=i.internal)||void 0===t?void 0:t.query,r,a),p=l(null===(n=i.internal)||void 0===n?void 0:n.panelsState,r,a);return{title:a(i.title?i.title:u.datasourceName,r),href:o(u.datasourceUid,h,d,p),onClick:s?()=>{s({datasourceUid:u.datasourceUid,query:h,panelsState:p,range:d})}:void 0,target:"_self",origin:c}}function o(e,t,n,i){return s.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.S)({range:n.raw,datasource:e,queries:[t],panelsState:i}))}`)}function l(e,t,n){let s="";try{s=JSON.stringify(e||{})}catch(e){console.error(e)}s=n(s,t);let a={};try{a=JSON.parse(s)}catch(e){console.error(s,e)}return a}},70332:(e,t,n)=>{"use strict";n.d(t,{BT:()=>r,HD:()=>p,Mf:()=>v,TX:()=>h,_R:()=>l,cv:()=>i,fd:()=>g,fi:()=>d,hz:()=>u,iU:()=>a,nx:()=>c,tp:()=>m,uw:()=>f,z_:()=>o});var s=n(82897);function a(e){return{uid:e.uid,type:e.type}}function i(e){return"object"==typeof e&&"string"==typeof(null==e?void 0:e.uid)}function r(e){return i(e)?e.uid:(0,s.isString)(e)?e:void 0}const o=(e,t)=>n=>{g(e,t,n.currentTarget.value)},l=(e,t)=>n=>{m(e,t,n.currentTarget.value)},d=(e,t)=>n=>{f(e,t,n.currentTarget.value)},c=(e,t)=>n=>{m(e,t,n.value)},u=(e,t)=>n=>{m(e,t,n.currentTarget.checked)},h=(e,t)=>n=>{f(e,t,n.value)},p=(e,t)=>n=>{v(e,t)};function g(e,t,n){const s=e.options;e.onOptionsChange(Object.assign({},s,{[t]:n}))}const m=(e,t,n)=>{const s=e.options;e.onOptionsChange(Object.assign({},s,{jsonData:Object.assign({},s.jsonData,{[t]:n})}))},f=(e,t,n)=>{const s=e.options;e.onOptionsChange(Object.assign({},s,{secureJsonData:Object.assign({},s.secureJsonData?s.secureJsonData:{},{[t]:n})}))},v=(e,t)=>{const n=e.options;e.onOptionsChange(Object.assign({},n,{secureJsonData:Object.assign({},n.secureJsonData?n.secureJsonData:{},{[t]:""}),secureJsonFields:Object.assign({},n.secureJsonFields,{[t]:!1})}))}},61069:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});const s={},a=(e,t,n)=>{let a=`[Deprecation warning] ${e}: ${t} is deprecated`;n&&(a+=`. Use ${n} instead`);const i=Date.now(),r=s[a];(!r||i-r>1e4)&&(console.warn(a),s[a]=i)}},40791:(e,t,n)=>{"use strict";let s;n.d(t,{x:()=>s}),function(e){e[e.Transformations=0]="Transformations",e[e.FieldConfig=1]="FieldConfig",e[e.FieldConfigOverrides=2]="FieldConfigOverrides"}(s||(s={}))},85449:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,k:()=>a});var s=n(28173);function a(e){let{xField:t,yField:n,nullValueMode:a}=e;const i=t.values,r=n.values,o=i.length;if(r.length!==o)throw new Error("Unexpected field length");const l=a===s.Gl.Ignore,d=a===s.Gl.AsZero,c=[];for(let e=0;e<o;e++){const t=i.get(e);let n=r.get(e);if(null===n){if(l)continue;d&&(n=0)}null!==t&&c.push([t,n])}return c}function i(e,t){if(!t.from||!t.to||!e||0===e.length)return[];const n=t.from.valueOf(),s=t.to.valueOf(),a=e[0][1];return[[n,a],[s,a]]}},41785:(e,t,n)=>{"use strict";n.d(t,{FT:()=>i,IU:()=>r,J8:()=>a,VS:()=>o,aA:()=>l});const s=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(e){const t={};return e.replace(s,((e,n,s,a)=>(t[n]=a,""))),t}function i(e){return e.reduce(((e,t)=>{if(!t)throw new Error("Need parsed labels to find common labels.");return e?(Object.keys(t).forEach((n=>{void 0!==e[n]&&e[n]===t[n]||delete e[n]})),Object.keys(e).forEach((n=>{void 0===t[n]&&delete e[n]}))):e=Object.assign({},t),e}),void 0)}function r(e,t){const n=Object.assign({},e);return Object.keys(t).forEach((e=>{delete n[e]})),n}function o(e,t){if(!e)return!0;for(const[n,s]of Object.entries(e))if(!t||t[n]!==s)return!1;return!0}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(!e||0===Object.keys(e).length)return t;const s=Object.keys(e).sort(),a=s.map((t=>`${t}="${e[t]}"`)).join(", ");return n?a:["{",a,"}"].join("")}},36298:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var s=n(76093),a=n(274);let i,r,o={appSubUrl:""};const l=e=>{var t;const n=(e=>{try{return new URL(e)}catch{return}})(e);if(n&&n.origin!==window.location.origin)return e;const s=null!==(t=o.appSubUrl)&&void 0!==t?t:"",a=s.endsWith("/")?1:0,i=e.startsWith("http");let r=s;return e.startsWith("/")&&!i||(r=`${window.location.origin}${s}`),e.length>0&&0===e.indexOf(r)?e.slice(r.length-a):e},d={initialize:e=>{o=e.config,i=e.getTimeRangeForUrl,r=e.getVariablesUrlParams},stripBaseFromUrl:l,assureBaseUrl:e=>e.startsWith("/")?`${o.appSubUrl}${l(e)}`:e,updateSearchParams:(e,t)=>{const n=new URLSearchParams(t);try{const t=new URL(e);return n.forEach(((e,n)=>t.searchParams.set(n,e))),t.href}catch{const t=new URLSearchParams(e);return n.forEach(((e,n)=>{t.set(n,e)})),"?"+t.toString()}},getTimeRangeUrlParams:()=>i?a.Cj.toUrlParams(i()):null,getVariablesUrlParams:e=>{if(!r)return null;const t=r(e);return a.Cj.toUrlParams(t)},getUrlForPartial:(e,t)=>{const n=a.Cj.parseKeyValue(e.search.startsWith("?")?e.search.substring(1):e.search);for(const e of Object.keys(t))null===t[e]||void 0===t[e]?delete n[e]:n[e]=t[e];return a.Cj.renderUrl(e.pathname,n)},processUrl:e=>o.disableSanitizeHtml?e:s.QX.sanitizeUrl(e)}},49688:(e,t,n)=>{"use strict";n.d(t,{$8:()=>b,$u:()=>y,Ar:()=>c,DA:()=>v,MT:()=>f,Mi:()=>w,ZO:()=>l,bA:()=>u,i6:()=>g,j0:()=>x,jx:()=>d,l3:()=>j,lL:()=>p,zd:()=>h});var s=n(82897),a=n(27843),i=n(93246),r=n(94582);const o=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function l(e){if(!e)return i.in.unknown;let t,n=i.in.unknown;for(const s of Object.keys(i.in)){const a=new RegExp(`\\b${s}\\b`,"i").exec(e);a&&(void 0===t||a.index<t)&&(n=i.in[s],t=a.index)}return n}function d(e){const t=i.in[e.toString().toLowerCase()];return t||i.in.unknown}function c(e,t){const n=new r.G,s=e.fields[t];for(let e=0;e<s.values.length;e++){const e=s.values.get(t);n.buffer.push(l(e))}return Object.assign({},e,{fields:[...e.fields,{name:"LogLevel",type:a.fS.string,values:n,config:{}}]})}const u={JSON:{buildMatcher:e=>new RegExp(`(?:{|,)\\s*"${e}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:e=>{try{const t=JSON.parse(e);return Object.keys(t).map((e=>`"${e}":${JSON.stringify(t[e])}`))}catch{}return[]},getLabelFromField:e=>(e.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:e=>(e.match(/:\s*(.*)$/)||[])[1],test:e=>{let t;try{t=JSON.parse(e)}catch(e){}return"object"==typeof t}},logfmt:{buildMatcher:e=>new RegExp(`(?:^|\\s)${(0,s.escapeRegExp)(e)}=("[^"]*"|\\S+)`),getFields:e=>{const t=[];return e.replace(new RegExp(o,"g"),(e=>(t.push(e.trim()),""))),t},getLabelFromField:e=>(e.match(o)||[])[1],getValueFromField:e=>(e.match(o)||[])[2],test:e=>o.test(e)}};function h(e,t){const n=e.filter((e=>t.test(e.entry))),a=n.length,i=(0,s.countBy)(n,(e=>{const n=e.entry.match(t);return n?n[1]:null}));return m(i,a)}function p(e,t){const n=e.filter((e=>void 0!==e.labels[t])),a=n.length,i=(0,s.countBy)(n,(e=>e.labels[t]));return m(i,a)}function g(e){const t=e.filter((e=>null!=e)),n=(0,s.countBy)(t);return m(n,t.length)}const m=(e,t)=>(0,s.chain)(e).map(((e,n)=>({count:e,value:n,proportion:e/t}))).sortBy("count").reverse().value();function f(e){let t;try{u.JSON.test(e)&&(t=u.JSON)}catch(e){}return!t&&u.logfmt.test(e)&&(t=u.logfmt),t}const v=(e,t)=>e.timeEpochMs<t.timeEpochMs?-1:e.timeEpochMs>t.timeEpochMs?1:e.timeEpochNs<t.timeEpochNs?-1:e.timeEpochNs>t.timeEpochNs?1:0,b=(e,t)=>e.timeEpochMs>t.timeEpochMs?-1:e.timeEpochMs<t.timeEpochMs?1:e.timeEpochNs>t.timeEpochNs?-1:e.timeEpochNs<t.timeEpochNs?1:0,x=(e,t)=>{const n=e?y(e.rows,t):[];return e?Object.assign({},e,{rows:n}):{hasUniqueLabels:!1,rows:n}},y=(e,t)=>t===i.UV.Ascending?e.sort(v):e.sort(b),w=e=>e.labels.__error__?{hasError:!0,errorMessage:e.labels.__error__}:{hasError:!1},j=e=>e.replace(/\\r\\n|\\n|\\t|\\r/g,(e=>"t"===e.slice(1)?"\t":"\n"))},87289:(e,t,n)=>{"use strict";function s(e){return new Proxy(e,{apply:(e,t,n)=>("undefined"!=typeof Reflect&&Reflect.construct||alert("Browser is too old"),Reflect.construct(e,n,t.constructor))})}n.d(t,{s:()=>s})},25803:(e,t,n)=>{"use strict";let s;n.d(t,{z:()=>s}),function(e){e.id="id",e.title="title",e.subTitle="subtitle",e.mainStat="mainstat",e.secondaryStat="secondarystat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(s||(s={}))},95369:(e,t,n)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Number.isInteger(e))return e;let n=10**t,s=e*n*(1+Number.EPSILON);return Math.round(s)/n}function a(e){return((""+e).split(".")[1]||"").length}n.d(t,{O:()=>s,d:()=>a})},86351:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});const s=e=>({label:e,value:e})},20729:(e,t,n)=>{"use strict";n.d(t,{e:()=>s,f:()=>a});const s=e=>{let t,n=Number.MAX_VALUE;for(let s=0;s<e.values.length;s++){const a=e.values.get(s);if(void 0!==t){const e=a-t;n=e,e<n&&(n=e)}t=a}return n},a=e=>{for(let t=0;t<e.values.length;t++){const n=e.values.get(t);if(null!=n){const e=n.toString();if(13===e.length&&e%1e3!=0)return!0}}return!1}},274:(e,t,n)=>{"use strict";function s(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+").replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e){const t=[],n=/\[\]$/,a=e=>"[object Array]"===Object.prototype.toString.call(e),i=(e,n)=>{if("boolean"!=typeof(n="function"==typeof n?n():null==n?"":n))t[t.length]=s(e,!0)+"="+s(n,!0);else{const a=n?"":"="+s("false",!0);t[t.length]=s(e,!0)+a}},r=(e,s)=>{let o,l,d;if(e)if(a(s))for(o=0,l=s.length;o<l;o++)n.test(e)?i(e,s[o]):r(e,s[o]);else if(s&&"[object Object]"===String(s))for(d in s)r(e+"["+d+"]",s[d]);else i(e,s);else if(a(s))for(o=0,l=s.length;o<l;o++)i(s[o].name,s[o].value);else for(d in s)r(d,s[d]);return t};return r("",e).join("&")}function i(e){try{return decodeURIComponent(e)}catch(e){return}}n.d(t,{Cj:()=>r,S:()=>o});const r={renderUrl:function(e,t){return t&&Object.keys(t).length>0&&(e+="?"+a(t)),e},toUrlParams:a,appendQueryToUrl:function(e,t){if(null!=t&&""!==t){const n=e.indexOf("?");-1!==n?e.length-n>1&&(e+="&"):e+="?",e+=t}return e},getUrlSearchParams:function(){const e=window.location.search.substring(1).split("&"),t={};for(const n of e){const e=n.split("=");if(e.length>1){const n=decodeURIComponent(e[0]),s=decodeURIComponent(e[1]);t[n]=n in t?[...t[n],s]:[s]}else if(1===e.length){t[decodeURIComponent(e[0])]=!0}}return t},parseKeyValue:function(e){const t={},n=(e||"").split("&");for(let e of n){let n,s,a;if(e&&(s=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(s=e.substring(0,n),a=e.substring(n+1)),s=i(s),void 0!==s)){let e;a=void 0===a||i(a),e="string"==typeof a&&""!==a&&("true"===a||"false"===a)?"true"===a:a,t.hasOwnProperty(s)?Array.isArray(t[s])?t[s].push(a):t[s]=[t[s],isNaN(e)?a:e]:t[s]=isNaN(e)?a:e}}return t}};function o(e,t){return void 0!==t&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(e)}},231:(e,t,n)=>{"use strict";n.d(t,{HU:()=>o,Jb:()=>l,vh:()=>r});var s=n(84542),a=n(56949),i=n(12812);function r(e,t){for(const n of e)switch(n.type){case i.H.ValueToText:if(null==t)continue;const e=n.options[t];if(e)return e;break;case i.H.RangeToText:if(null==t)continue;const s=parseFloat(t);if(isNaN(s))continue;if(!isNaN(n.options.from)&&s<n.options.from)continue;if(!isNaN(n.options.to)&&s>n.options.to)continue;return n.options.result;case i.H.RegexToText:if(null==t)continue;if("string"!=typeof t)continue;const r=(0,a.jO)(n.options.pattern);if(t.match(r)){const e=Object.assign({},n.options.result);return null!=e.text&&(e.text=t.replace(r,n.options.result.text||"")),e}case i.H.SpecialValue:switch(n.options.match){case i.e.Null:if(null==t)return n.options.result;break;case i.e.NaN:if(isNaN(t))return n.options.result;break;case i.e.NullAndNaN:if(isNaN(t)||null==t)return n.options.result;break;case i.e.True:if(!0===t||"true"===t)return n.options.result;break;case i.e.False:if(!1===t||"false"===t)return n.options.result;break;case i.e.Empty:if(""===t)return n.options.result}}return null}let o;function l(e,t){const n=[];let s=e.mappingType;if(e.mappingType||(e.valueMaps&&e.valueMaps.length?s=1:e.rangeMaps&&e.rangeMaps.length&&(s=2)),1===s)for(let s=0;s<e.valueMaps.length;s++){var a,r;const o=e.valueMaps[s];n.push(d(Object.assign({},o,{id:s,type:i.H.ValueToText}),(null===(a=e.fieldConfig)||void 0===a||null===(r=a.defaults)||void 0===r?void 0:r.thresholds)||t))}else if(2===s)for(let s=0;s<e.rangeMaps.length;s++){var o,l;const a=e.rangeMaps[s];n.push(d(Object.assign({},a,{id:s,type:i.H.RangeToText}),(null===(o=e.fieldConfig)||void 0===o||null===(l=o.defaults)||void 0===l?void 0:l.thresholds)||t))}return n}function d(e,t){const n={type:i.H.ValueToText,options:{}},a=[];let r;const l=parseFloat(e.text);if(t&&!isNaN(l)){const e=(0,s.m1)(l,t.steps);e&&e.color&&(r=e.color)}switch(e.type){case o.ValueToText:case i.H.ValueToText:null!=e.value&&("null"===e.value?a.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:e.text,color:r}}}):n.options[String(e.value)]={text:e.text,color:r});break;case o.RangeToText:case i.H.RangeToText:"null"===e.from||"null"===e.to?a.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:e.text,color:r}}}):a.push({type:i.H.RangeToText,options:{from:+e.from,to:+e.to,result:{text:e.text,color:r}}})}return Object.keys(n.options).length>0&&a.unshift(n),a[0]}!function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(o||(o={}))},6003:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var s=n(16313),a=n(4561),i=n(7356),r=n(67305);function o(e){let{whileLoading:t,source:n}=e;return(0,s.T)((0,a.H)(200).pipe((0,i.h)(t),(0,r.R)(n)),n)}},87726:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>a,Yh:()=>d,dT:()=>o,i7:()=>c});var s=n(55343);function a(e,t){const n=(0,s.Qj)(1e3,["","K","M","B","T"]);return(s,a,i)=>{if(null===s)return{text:""};const r=n(s,a,i);return t?r.suffix=void 0!==r.suffix?`${r.suffix}${e}`:void 0:r.prefix=e,r}}const i=["f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],r=i.indexOf("");function o(e){const t=i.findIndex((t=>t.normalize("NFKD")===e.normalize("NFKD")));return t<0?0:t-r}const l=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=l.map((t=>" "+t+e));return(0,s.Qj)(1024,n,t)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=i.map((t=>" "+t+e));return(0,s.Qj)(1e3,n,r+t)}},55343:(e,t,n)=>{"use strict";n.d(t,{IR:()=>Z,zc:()=>V,Cf:()=>ee,QW:()=>ne,Td:()=>te,br:()=>q,SP:()=>K,Qj:()=>Q,SR:()=>J,vb:()=>Y,FH:()=>W,bn:()=>U,q2:()=>H});var s=n(82897);function a(e,t){return null===e?{text:""}:{text:W(e,t),suffix:"%"}}function i(e,t){return null===e?{text:""}:{text:W(100*e,t),suffix:"%"}}function r(e,t){if(null==e)return{text:""};const n=o(e,t);return"-"===n.text.substring(0,1)?n.text="-0x"+n.text.substring(1):n.text="0x"+n.text,n}function o(e,t){return null==e?{text:""}:{text:parseFloat(W(e,t)).toString(16).toUpperCase()}}function l(e,t){return null==e?{text:""}:{text:e.toExponential(t)}}var d=n(6432),c=n(74333),u=n(88246);let h;!function(e){e.Year="year",e.Month="month",e.Week="week",e.Day="day",e.Hour="hour",e.Minute="minute",e.Second="second",e.Millisecond="millisecond"}(h||(h={}));const p=[h.Year,h.Month,h.Week,h.Day,h.Hour,h.Minute,h.Second,h.Millisecond],g={[h.Year]:31536e3,[h.Month]:2592e3,[h.Week]:604800,[h.Day]:86400,[h.Hour]:3600,[h.Minute]:60,[h.Second]:1,[h.Millisecond]:.001};function m(e,t){return null===e?{text:""}:Math.abs(e)<1e3?{text:W(e,t),suffix:" ns"}:Math.abs(e)<1e6?U(e/1e3,t," µs"):Math.abs(e)<1e9?U(e/1e6,t," ms"):Math.abs(e)<6e10?U(e/1e9,t," s"):Math.abs(e)<36e11?U(e/6e10,t," min"):Math.abs(e)<864e11?U(e/36e11,t," hour"):U(e/864e11,t," day")}function f(e,t){return null===e?{text:""}:Math.abs(e)<1e3?{text:W(e,t),suffix:" µs"}:Math.abs(e)<1e6?U(e/1e3,t," ms"):U(e/1e6,t," s")}function v(e,t,n){return null===e?{text:""}:Math.abs(e)<1e3?{text:W(e,t),suffix:" ms"}:Math.abs(e)<6e4?U(e/1e3,t," s"):Math.abs(e)<36e5?U(e/6e4,t," min"):Math.abs(e)<864e5?U(e/36e5,t," hour"):Math.abs(e)<31536e6?U(e/864e5,t," day"):U(e/31536e6,t," year")}function b(e,t){return null===e?{text:""}:0===e?{text:"0",suffix:" s"}:Math.abs(e)<1e-6?U(1e9*e,t," ns"):Math.abs(e)<.001?U(1e6*e,t," µs"):Math.abs(e)<1?U(1e3*e,t," ms"):Math.abs(e)<60?{text:W(e,t),suffix:" s"}:Math.abs(e)<3600?U(e/60,t," min"):Math.abs(e)<86400?U(e/3600,t," hour"):Math.abs(e)<604800?U(e/86400,t," day"):Math.abs(e)<31536e3?U(e/604800,t," week"):U(e/31556900,t," year")}function x(e,t){return null===e?{text:""}:Math.abs(e)<60?{text:W(e,t),suffix:" min"}:Math.abs(e)<1440?U(e/60,t," hour"):Math.abs(e)<10080?U(e/1440,t," day"):Math.abs(e)<604800?U(e/10080,t," week"):U(e/525948,t," year")}function y(e,t){return null===e?{text:""}:Math.abs(e)<24?{text:W(e,t),suffix:" hour"}:Math.abs(e)<168?U(e/24,t," day"):Math.abs(e)<8760?U(e/168,t," week"):U(e/8760,t," year")}function w(e,t){return null===e?{text:""}:Math.abs(e)<7?{text:W(e,t),suffix:" day"}:Math.abs(e)<365?U(e/7,t," week"):U(e/365,t," year")}function j(e,t,n){if(null===e)return{text:""};if(0===e)return{text:"0",suffix:" "+n+"s"};if(e<0){const s=j(-e,t,n);return s.suffix||(s.suffix=""),s.suffix+=" ago",s}e*=1e3*g[n];const s=[];let a=!1,i=0;null!=t&&(i=t);for(let t=0;t<p.length&&i>=0;t++){const n=1e3*g[p[t]],r=e/n;if(r>=1||a){a=!0;const o=Math.floor(r),l=p[t]+(1!==o?"s":"");s.push(o+" "+l),e%=n,i--}}return{text:s.join(", ")}}function S(e,t){if(null===e)return{text:""};if(e<1e3)return{text:(0,u.zh)(e).format("SSS\\m\\s")};if(e<6e4){let n="ss\\s:SSS\\m\\s";return 0===t&&(n="ss\\s"),{text:(0,u.zh)(e).format(n)}}if(e<36e5){let n="mm\\m:ss\\s:SSS\\m\\s";return 0===t?n="mm\\m":1===t&&(n="mm\\m:ss\\s"),{text:(0,u.zh)(e).format(n)}}let n="mm\\m:ss\\s:SSS\\m\\s";const s=`${("0"+Math.floor((0,u.Ks)(e,"milliseconds").asHours())).slice(-2)}h`;0===t?n="":1===t?n="mm\\m":2===t&&(n="mm\\m:ss\\s");return{text:n?`${s}:${(0,u.zh)(e).format(n)}`:s}}function C(e,t){return j(e,t,h.Millisecond)}function k(e,t){return j(e,t,h.Second)}function N(e){if(e<0){const t=N(-e);return t.suffix||(t.suffix=""),t.suffix+=" ago",t}const t=[],n=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return n>9?t.push(""+n):t.push("0"+n),s>9?t.push(""+s):t.push("0"+s),a>9?t.push(""+a):t.push("0"+a),{text:t.join(":")}}function O(e){if(e<0){const t=O(-e);return t.suffix||(t.suffix=""),t.suffix+=" ago",t}let t="";const n=Math.floor(e/86400);n>0&&(t=n+" d ");return{text:t+N(e-24*n*3600).text}}function I(e,t){return b(e/100,t)}function T(e,t){return S(e,t)}function $(e,t){return S(1e3*e,t)}function R(e,t){return(n,s,a,i)=>t&&(0,u.CQ)().isSame(n,"day")?{text:(0,d.dq)(n,{format:t,timeZone:i})}:{text:(0,d.dq)(n,{format:e,timeZone:i})}}const P=R("YYYY-MM-DD HH:mm:ss"),D=R("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),A=R("MM/DD/YYYY h:mm:ss a"),M=R("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function L(e,t,n,s,a){return{text:(0,d.dq)(e,{format:a?c.U6.fullDateMS:c.U6.fullDate,timeZone:s})}}function F(e,t,n,s){return{text:(0,d.E8)(e,{timeZone:s})}}var E=n(87726);function V(e){var t,n;return`${null!==(t=e.prefix)&&void 0!==t?t:""}${e.text}${null!==(n=e.suffix)&&void 0!==n?n:""}`}let z=[];const B={};let _=!1;function W(e,t){if(null===e)return"";if(e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY)return e.toLocaleString();if(null==t&&(t=function(e){const t=Math.abs(e);let n=1-Math.floor(Math.log(t)/Math.LN10);const s=Math.pow(10,-n);t/s>2.25&&++n;e%1==0&&(n=0);return Math.max(0,n)}(e)),0===e)return e.toFixed(t);const n=t?Math.pow(10,Math.max(0,t)):1,s=String(Math.round(e*n)/n);if(-1!==s.indexOf("e")||0===e)return s;const a=s.indexOf("."),i=-1===a?0:s.length-a-1;return i<t?(i?s:s+".")+String(n).slice(1,t-i+1):s}function U(e,t,n){return{text:W(e,t),suffix:n}}function H(e,t){return(n,s)=>{if(null===n)return{text:""};const a=W(n,s);return e?t?{text:a,prefix:e}:{text:a,suffix:" "+e}:{text:a}}}function q(e){return e&&e.startsWith("bool")}function Z(e,t){return n=>({text:n?e:t})}const G=(e,t)=>Math.log10(t)/Math.log10(e);function Q(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(a,i)=>{if(null===a)return{text:""};if(a===Number.NEGATIVE_INFINITY||a===Number.POSITIVE_INFINITY||isNaN(a))return{text:a.toLocaleString()};const r=0===a?0:Math.floor(G(e,Math.abs(a))),o=t[(0,s.clamp)(n+r,0,t.length-1)];return{text:W(a/e**(0,s.clamp)(r,-n,t.length-n-1),i),suffix:o}}}function K(e,t){return null==e?{text:""}:{text:e.toLocaleString(void 0,{maximumFractionDigits:t})}}function J(e){const t=Q(1e3,["","K","M","B","T"]);return(n,s,a)=>{if(null===n)return{text:""};const i=t(n,s,a);return i.suffix+=" "+e,i}}function Y(e){return{text:`${e}`}}function X(){z=[{name:"Misc",formats:[{name:"Number",id:"none",fn:H("")},{name:"String",id:"string",fn:Y},{name:"short",id:"short",fn:Q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:a},{name:"Percent (0.0-1.0)",id:"percentunit",fn:i},{name:"Humidity (%H)",id:"humidity",fn:H("%H")},{name:"Decibel",id:"dB",fn:H("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:r},{name:"Hexadecimal",id:"hex",fn:o},{name:"Scientific notation",id:"sci",fn:l},{name:"Locale format",id:"locale",fn:K},{name:"Pixels",id:"pixel",fn:H("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec²",id:"accMS2",fn:H("m/sec²")},{name:"Feet/sec²",id:"accFS2",fn:H("f/sec²")},{name:"G unit",id:"accG",fn:H("g")}]},{name:"Angle",formats:[{name:"Degrees (°)",id:"degree",fn:H("°")},{name:"Radians",id:"radian",fn:H("rad")},{name:"Gradian",id:"grad",fn:H("grad")},{name:"Arc Minutes",id:"arcmin",fn:H("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:H("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m²)",id:"areaM2",fn:H("m²")},{name:"Square Feet (ft²)",id:"areaF2",fn:H("ft²")},{name:"Square Miles (mi²)",id:"areaMI2",fn:H("mi²")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,E.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,E.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,E.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,E.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,E.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,E.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,E.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,E.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:H("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:H("ppb")},{name:"nanogram per cubic meter (ng/m³)",id:"conngm3",fn:H("ng/m³")},{name:"nanogram per normal cubic meter (ng/Nm³)",id:"conngNm3",fn:H("ng/Nm³")},{name:"microgram per cubic meter (μg/m³)",id:"conμgm3",fn:H("μg/m³")},{name:"microgram per normal cubic meter (μg/Nm³)",id:"conμgNm3",fn:H("μg/Nm³")},{name:"milligram per cubic meter (mg/m³)",id:"conmgm3",fn:H("mg/m³")},{name:"milligram per normal cubic meter (mg/Nm³)",id:"conmgNm3",fn:H("mg/Nm³")},{name:"gram per cubic meter (g/m³)",id:"congm3",fn:H("g/m³")},{name:"gram per normal cubic meter (g/Nm³)",id:"congNm3",fn:H("g/Nm³")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:H("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:H("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,E.Aq)("$")},{name:"Pounds (£)",id:"currencyGBP",fn:(0,E.Aq)("£")},{name:"Euro (€)",id:"currencyEUR",fn:(0,E.Aq)("€")},{name:"Yen (¥)",id:"currencyJPY",fn:(0,E.Aq)("¥")},{name:"Rubles (₽)",id:"currencyRUB",fn:(0,E.Aq)("₽")},{name:"Hryvnias (₴)",id:"currencyUAH",fn:(0,E.Aq)("₴")},{name:"Real (R$)",id:"currencyBRL",fn:(0,E.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,E.Aq)("kr",!0)},{name:"Icelandic Króna (kr)",id:"currencyISK",fn:(0,E.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,E.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,E.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,E.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,E.Aq)("CHF")},{name:"Polish Złoty (PLN)",id:"currencyPLN",fn:(0,E.Aq)("PLN")},{name:"Bitcoin (฿)",id:"currencyBTC",fn:(0,E.Aq)("฿")},{name:"Milli Bitcoin (฿)",id:"currencymBTC",fn:(0,E.Aq)("mBTC")},{name:"Micro Bitcoin (฿)",id:"currencyμBTC",fn:(0,E.Aq)("μBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,E.Aq)("R")},{name:"Indian Rupee (₹)",id:"currencyINR",fn:(0,E.Aq)("₹")},{name:"South Korean Won (₩)",id:"currencyKRW",fn:(0,E.Aq)("₩")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,E.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,E.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,E.Aq)("đ",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,E.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,E.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,E.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,E.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,E.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,E.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,E.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,E.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,E.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,E.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,E.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,E.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,E.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,E.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,E.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,E.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,E.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,E.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,E.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,E.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,E.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,E.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,E.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,E.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,E.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,E.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,E.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,E.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,E.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,E.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,E.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,E.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,E.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,E.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,E.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,E.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,E.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,E.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,E.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:P},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:D},{name:"Datetime US",id:"dateTimeAsUS",fn:A},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:M},{name:"Datetime local",id:"dateTimeAsLocal",fn:R((0,c.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:R((0,c.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,c.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))},{name:"Datetime default",id:"dateTimeAsSystem",fn:L},{name:"From Now",id:"dateTimeFromNow",fn:F}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,E.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,E.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,E.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,E.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,E.i7)("W",-1)},{name:"Watt per square meter (W/m²)",id:"Wm2",fn:H("W/m²")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,E.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,E.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,E.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,E.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,E.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,E.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,E.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,E.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,E.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,E.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,E.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,E.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,E.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,E.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,E.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,E.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,E.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,E.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,E.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,E.i7)("dBm")},{name:"Ohm (Ω)",id:"ohm",fn:(0,E.i7)("Ω")},{name:"Kiloohm (kΩ)",id:"kohm",fn:(0,E.i7)("Ω",1)},{name:"Megaohm (MΩ)",id:"Mohm",fn:(0,E.i7)("Ω",2)},{name:"Farad (F)",id:"farad",fn:(0,E.i7)("F")},{name:"Microfarad (µF)",id:"µfarad",fn:(0,E.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,E.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,E.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,E.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,E.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,E.i7)("H",-1)},{name:"Microhenry (µH)",id:"µhenry",fn:(0,E.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,E.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:H("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:H("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:H("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:H("cfm")},{name:"Litre/hour",id:"litreh",fn:H("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:H("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:H("mL/min")},{name:"Lux (lx)",id:"lux",fn:H("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,E.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,E.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,E.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,E.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,E.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,E.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,E.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,E.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,E.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,E.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,E.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,E.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,E.i7)("g")},{name:"pound (lb)",id:"masslb",fn:H("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,E.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:H("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,E.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:H("in")},{name:"feet (ft)",id:"lengthft",fn:H("ft")},{name:"meter (m)",id:"lengthm",fn:(0,E.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,E.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:H("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,E.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,E.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,E.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,E.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:H("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:H("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:H('"Hg')},{name:"PSI",id:"pressurepsi",fn:Q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,E.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,E.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,E.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,E.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,E.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,E.i7)("Sv",-1)},{name:"microSievert (µSv)",id:"radusv",fn:(0,E.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,E.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,E.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,E.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,E.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,E.i7)("Sv/h",-1)},{name:"microSievert/hour (µSv/h)",id:"radusvh",fn:(0,E.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:H("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,E.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:H("rad/s")},{name:"Degrees per second (°/s)",id:"rotdegs",fn:H("°/s")}]},{name:"Temperature",formats:[{name:"Celsius (°C)",id:"celsius",fn:H("°C")},{name:"Fahrenheit (°F)",id:"fahrenheit",fn:H("°F")},{name:"Kelvin (K)",id:"kelvin",fn:H("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,E.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:m},{name:"microseconds (µs)",id:"µs",fn:f},{name:"milliseconds (ms)",id:"ms",fn:v},{name:"seconds (s)",id:"s",fn:b},{name:"minutes (m)",id:"m",fn:x},{name:"hours (h)",id:"h",fn:y},{name:"days (d)",id:"d",fn:w},{name:"duration (ms)",id:"dtdurationms",fn:C},{name:"duration (s)",id:"dtdurations",fn:k},{name:"duration (hh:mm:ss)",id:"dthms",fn:N},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:I},{name:"clock (ms)",id:"clockms",fn:T},{name:"clock (s)",id:"clocks",fn:$}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:J("c/s")},{name:"ops/sec (ops)",id:"ops",fn:J("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:J("req/s")},{name:"reads/sec (rps)",id:"rps",fn:J("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:J("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:J("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:J("c/m")},{name:"ops/min (opm)",id:"opm",fn:J("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:J("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:J("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:H("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:H("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:H("mph")},{name:"knot (kn)",id:"velocityknot",fn:H("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,E.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,E.i7)("L")},{name:"cubic meter",id:"m3",fn:H("m³")},{name:"Normal cubic meter",id:"Nm3",fn:H("Nm³")},{name:"cubic decimeter",id:"dm3",fn:H("dm³")},{name:"gallons",id:"gallons",fn:H("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:Z("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:Z("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:Z("On","Off")}]}];for(const e of z)for(const t of e.formats)B[t.id]=t.fn;[{from:"farenheit",to:"fahrenheit"}].forEach((e=>{const t=B[e.to];t&&(B[e.from]=t)})),_=!0}function ee(e){if(!e)return H("");_||X();const t=B[e];if(!t&&e){let t=e.indexOf(":");if(t>0){const n=e.substring(0,t),s=e.substring(t+1);if("prefix"===n)return H(s,!0);if("suffix"===n)return H(s,!1);if("time"===n)return R(s);if("si"===n){const e=(0,E.dT)(s.charAt(0)),t=0===e?s:s.substring(1);return(0,E.i7)(t,e)}if("count"===n)return J(s);if("currency"===n)return(0,E.Aq)(s);if("bool"===n){if(t=s.indexOf("/"),t>=0){return Z(s.substring(0,t),s.substring(t+1))}return Z(s,"-")}}return H(e)}return t}function te(){return _||X(),B}function ne(){return _||X(),z.map((e=>({text:e.name,submenu:e.formats.map((e=>({text:e.name,value:e.id})))})))}},75558:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var s=n(7716);class a extends s.G{constructor(e){super(),this.field=e}get length(){return this.field.length}get(e){return+this.field.get(e)}}},21620:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var s=n(83126);class a{constructor(e,t,n){this.left=e,this.right=t,this.operation=n}get length(){return this.left.length}get(e){return this.operation(this.left.get(e),this.right.get(e))}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}},35315:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(7716),a=n(83126);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends s.G{constructor(e){super(),i(this,"buffer",void 0),i(this,"index",void 0),i(this,"capacity",void 0),i(this,"tail",void 0),i(this,"add",void 0),this.buffer=e.buffer||[],this.capacity=this.buffer.length,this.tail="head"!==e.append,this.index=0,this.add=this.getAddFunction(),e.capacity&&this.setCapacity(e.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?e=>{this.buffer.push(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:e=>{this.buffer.unshift(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?e=>{this.buffer[this.index]=e,this.index=(this.index+1)%this.buffer.length}:e=>{let t=this.index-1;t<0&&(t=this.buffer.length-1),this.buffer[t]=e,this.index=t}}setCapacity(e){if(this.capacity===e)return;const t=this.toArray();if(e>this.length)this.buffer=t;else if(e<this.capacity){const n=this.length-e;this.tail?this.buffer=t.slice(n,t.length):this.buffer=t.slice(0,t.length-n)}this.capacity=e,this.index=0,this.add=this.getAddFunction()}setAppendMode(e){const t="head"!==e;t!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=t,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(e){return this.buffer[(e+this.index)%this.buffer.length]}set(e,t){this.buffer[(e+this.index)%this.buffer.length]=t}get length(){return this.buffer.length}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}},76545:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});class s{constructor(e,t){this.value=e,this.len=t}get length(){return this.len}get(e){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},7716:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,s:()=>i});var s=n(83126);class a{*iterator(){for(let e=0;e<this.length;e++)yield this.get(e)}[Symbol.iterator](){return this.iterator()}forEach(e){return i(this).forEach(e)}map(e){return i(this).map(e)}filter(e){return i(this).filter(e)}toArray(){return(0,s.n)(this)}toJSON(){return this.toArray()}}function i(e){return{*[Symbol.iterator](){for(let t=0;t<e.length;t++)yield e.get(t)},forEach(t){for(let n=0;n<e.length;n++)t(e.get(n))},map(t){const n=[];for(let s=0;s<e.length;s++)n.push(t(e.get(s),s));return n},filter(e){const t=[];for(const n of this)e(n)&&t.push(n);return t}}}},16618:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var s=n(27843),a=n(7716);class i extends a.G{constructor(e){super(),this.len=e}get length(){return this.len}get(e){return e}static newField(e){return{name:"",values:new i(e),type:s.fS.number,config:{min:0,max:e-1}}}}},27904:(e,t,n)=>{"use strict";let s;n.d(t,{Si:()=>a,ct:()=>s,fV:()=>i,mR:()=>r}),function(e){e.DashboardView="dashboard-view",e.DataRequest="data-request"}(s||(s={}));const a=e=>Boolean(e.payload.page),i=e=>Boolean(e.payload.interactionName),r=e=>Boolean(e.payload.experimentId)},31181:(e,t,n)=>{"use strict";n.d(t,{SZ:()=>d,ff:()=>l,r_:()=>r,sm:()=>o});var s=n(65737),a=n(80795),i=n(74903);const r=e=>{(0,i.RP)().addEvent({type:i.ee.MetaAnalytics,payload:e})},o=()=>{var e;const t=a.E1.getLocation(),n=`${null!==(e=s.v.appSubUrl)&&void 0!==e?e:""}${t.pathname}${t.search}${t.hash}`;(0,i.RP)().addEvent({type:i.ee.Pageview,payload:{page:n}})},l=(e,t)=>{(0,i.RP)().addEvent({type:i.ee.Interaction,payload:{interactionName:e,properties:t}})},d=(e,t,n)=>{(0,i.RP)().addEvent({type:i.ee.ExperimentView,payload:{experimentId:e,experimentGroup:t,experimentVariant:n}})}},94570:(e,t,n)=>{"use strict";n.d(t,{q:()=>g});var s=n(68404),a=n(70332),i=n(39266),r=n(25004),o=n(70917),l=n(54761),d=n(38437),c=n(8910),u=n(18474),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.PureComponent{constructor(e){super(e),p(this,"dataSourceSrv",(0,c.F)()),p(this,"state",{}),p(this,"onChange",((e,t)=>{if("clear"===t.action&&this.props.onClear)return void this.props.onClear();const n=this.dataSourceSrv.getInstanceSettings(e.value);n&&(this.props.onChange(n),this.setState({error:void 0}))}))}componentDidMount(){const{current:e}=this.props;this.dataSourceSrv.getInstanceSettings(e)||this.setState({error:"Could not find data source "+e})}getCurrentValue(){const{current:e,hideTextValue:t,noDefault:n}=this.props;if(!e&&n)return;const s=this.dataSourceSrv.getInstanceSettings(e);if(s)return{label:s.name.slice(0,37),value:s.uid,imgUrl:s.meta.info.logos.small,hideText:t,meta:s.meta};const i=(0,a.BT)(e);return i===u.hr.uid||i===u.hr.name?{label:i,value:i,hideText:t}:{label:(null!=i?i:"no name")+" - not found",value:null!=i?i:void 0,imgUrl:"",hideText:t}}getDataSourceOptions(){const{alerting:e,tracing:t,metrics:n,mixed:s,dashboard:a,variables:i,annotations:r,pluginId:o,type:l,filter:d,logs:c}=this.props;return this.dataSourceSrv.getList({alerting:e,tracing:t,metrics:n,logs:c,dashboard:a,mixed:s,variables:i,annotations:r,pluginId:o,filter:d,type:l}).map((e=>({value:e.name,label:`${e.name}${e.isDefault?" (default)":""}`,imgUrl:e.meta.info.logos.small,meta:e.meta})))}render(){const{autoFocus:e,onBlur:t,onClear:n,openMenuOnFocus:s,placeholder:a,width:c,inputId:u,disabled:p=!1,isLoading:g=!1}=this.props,{error:m}=this.state,f=this.getDataSourceOptions(),v=this.getCurrentValue(),b="function"==typeof n;return(0,h.jsx)("div",{"aria-label":r.wl.components.DataSourcePicker.container,children:(0,h.jsx)(o.Ph,{isLoading:g,disabled:p,"aria-label":r.wl.components.DataSourcePicker.inputV2,inputId:u||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:b,backspaceRemovesValue:!1,onChange:this.onChange,options:f,autoFocus:e,onBlur:t,width:c,openMenuOnFocus:s,maxMenuHeight:500,placeholder:a,noOptionsMessage:"No datasources found",value:null!=v?v:null,invalid:Boolean(m)||Boolean(this.props.invalid),getOptionLabel:e=>e.meta&&(0,i.x)(e.meta.signature)&&e!==v?(0,h.jsxs)(l.Lh,{align:"center",justify:"space-between",height:"auto",children:[(0,h.jsx)("span",{children:e.label})," ",(0,h.jsx)(d.o,{status:e.meta.signature})]}):e.label||""})})}}p(g,"defaultProps",{autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"})},678:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,Z:()=>a});n(68404);var s=n(45916);let a=e=>{let{message:t}=e;return(0,s.jsxs)("div",{children:["Unable to render data: ",t,"."]})};function i(e){a=e}},76308:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,L:()=>r});n(68404);var s,a=n(45916);let i=()=>s||(s=(0,a.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."}));function r(e){i=e}},62027:(e,t,n)=>{"use strict";n.d(t,{T:()=>a,t:()=>i});n(68404);var s=n(45916);let a=e=>{let{children:t}=e;return(0,s.jsx)("div",{children:t})};function i(e){a=e}},65737:(e,t,n)=>{"use strict";n.d(t,{O:()=>o,v:()=>c});var s=n(82897),a=n(74333),i=n(35765);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e){r(this,"isPublicDashboardView",void 0),r(this,"datasources",{}),r(this,"panels",{}),r(this,"auth",{}),r(this,"minRefreshInterval",""),r(this,"appUrl",""),r(this,"appSubUrl",""),r(this,"windowTitlePrefix",""),r(this,"buildInfo",void 0),r(this,"newPanelTitle",""),r(this,"bootData",void 0),r(this,"externalUserMngLinkUrl",""),r(this,"externalUserMngLinkName",""),r(this,"externalUserMngInfo",""),r(this,"allowOrgCreate",!1),r(this,"feedbackLinksEnabled",!0),r(this,"disableLoginForm",!1),r(this,"defaultDatasource",""),r(this,"alertingEnabled",!1),r(this,"alertingErrorOrTimeout",""),r(this,"alertingNoDataOrNullValues",""),r(this,"alertingMinInterval",1),r(this,"angularSupportEnabled",!1),r(this,"authProxyEnabled",!1),r(this,"exploreEnabled",!1),r(this,"queryHistoryEnabled",!1),r(this,"helpEnabled",!1),r(this,"profileEnabled",!1),r(this,"ldapEnabled",!1),r(this,"jwtHeaderName",""),r(this,"jwtUrlLogin",!1),r(this,"sigV4AuthEnabled",!1),r(this,"azureAuthEnabled",!1),r(this,"samlEnabled",!1),r(this,"samlName",""),r(this,"autoAssignOrg",!0),r(this,"verifyEmailEnabled",!1),r(this,"oauth",{}),r(this,"rbacEnabled",!0),r(this,"disableUserSignUp",!1),r(this,"loginHint",""),r(this,"passwordHint",""),r(this,"loginError",void 0),r(this,"viewersCanEdit",!1),r(this,"editorsCanAdmin",!1),r(this,"disableSanitizeHtml",!1),r(this,"liveEnabled",!0),r(this,"theme",void 0),r(this,"theme2",void 0),r(this,"pluginsToPreload",[]),r(this,"featureToggles",{}),r(this,"licenseInfo",{}),r(this,"rendererAvailable",!1),r(this,"dashboardPreviews",{systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1}),r(this,"rendererVersion",""),r(this,"secretsManagerPluginEnabled",!1),r(this,"http2Enabled",!1),r(this,"dateFormats",void 0),r(this,"sentry",{enabled:!1,dsn:"",customEndpoint:"",sampleRate:1}),r(this,"grafanaJavascriptAgent",{enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1}),r(this,"pluginCatalogURL","https://grafana.com/grafana/plugins/"),r(this,"pluginAdminEnabled",!0),r(this,"pluginAdminExternalManageEnabled",!1),r(this,"pluginCatalogHiddenPlugins",[]),r(this,"expressionsEnabled",!1),r(this,"customTheme",void 0),r(this,"awsAllowedAuthProviders",[]),r(this,"awsAssumeRoleEnabled",!1),r(this,"azure",{managedIdentityEnabled:!1}),r(this,"caching",{enabled:!1}),r(this,"geomapDefaultBaseLayerConfig",void 0),r(this,"geomapDisableCustomBaseLayer",void 0),r(this,"unifiedAlertingEnabled",!1),r(this,"unifiedAlerting",{minInterval:""}),r(this,"applicationInsightsConnectionString",void 0),r(this,"applicationInsightsEndpointUrl",void 0),r(this,"recordedQueries",{enabled:!0}),r(this,"featureHighlights",{enabled:!1}),r(this,"reporting",{enabled:!0}),r(this,"googleAnalyticsId",void 0),r(this,"googleAnalytics4Id",void 0),r(this,"googleAnalytics4SendManualPageViews",!1),r(this,"rudderstackWriteKey",void 0),r(this,"rudderstackDataPlaneUrl",void 0),r(this,"rudderstackSdkUrl",void 0),r(this,"rudderstackConfigUrl",void 0),this.bootData=e.bootData,this.isPublicDashboardView=e.bootData.settings.isPublicDashboardView;const t={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,s.merge)(this,t,e),this.buildInfo=e.buildInfo||t.buildInfo,this.dateFormats&&a.U6.update(this.dateFormats),function(e){if(-1===window.location.href.indexOf("__feature"))return;new URLSearchParams(window.location.search).forEach(((t,n)=>{if(n.startsWith("__feature.")){const s=n.substring(10),a="true"===t;a!==e.featureToggles[n]&&(e.featureToggles[s]=a,console.log(`Setting feature toggle ${s} = ${a}`))}}))}(this),this.theme2=(0,i.j)(function(e){const t={colors:{mode:e.bootData.user.lightTheme?"light":"dark"}};e.featureToggles.interFont&&(t.typography={fontFamily:'"Inter", "Helvetica", "Arial", sans-serif'});return t}(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}const l=window.grafanaBootData||{settings:{},user:{},navTree:[]},d=l.settings;d.bootData=l;const c=new o(d)},28506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CopyPanelEvent:()=>h.EK,DataSourcePicker:()=>N.q,DataSourceWithBackend:()=>x.CK,EchoEventType:()=>o.ee,FakeEchoSrv:()=>o.rX,GrafanaBootConfig:()=>p.O,HealthCheckError:()=>x.ZA,HealthStatus:()=>x.QO,HistoryWrapper:()=>u._i,MetaAnalyticsEventName:()=>g.ct,PanelDataErrorView:()=>j.Z,PanelRenderer:()=>w.$,PluginPage:()=>k.T,RefreshEvent:()=>h.U5,StreamingFrameAction:()=>c.T0,SystemJS:()=>m.i,ThemeChangedEvent:()=>h.hD,TimeRangeUpdatedEvent:()=>h.md,config:()=>p.v,createDataSourcePluginEventProperties:()=>I,createPluginEventProperties:()=>O,createQueryRunner:()=>C.A,featureEnabled:()=>v.v,frameToMetricFindValue:()=>y.S9,getAngularLoader:()=>a.w,getAppEvents:()=>h.N$,getBackendSrv:()=>s.i,getDataSourceSrv:()=>i.F,getEchoSrv:()=>o.RP,getGrafanaLiveSrv:()=>c.gj,getLegacyAngularInjector:()=>d.V,getLocationSrv:()=>r.w,getTemplateSrv:()=>l.J,isExperimentViewEvent:()=>g.mR,isFetchError:()=>s.kW,isInteractionEvent:()=>g.fV,isPageviewEvent:()=>g.Si,loadPluginCss:()=>m.Y,locationSearchToObject:()=>u.Ox,locationService:()=>u.E1,logDebug:()=>b.o7,logError:()=>b.H,logInfo:()=>b.PN,logWarning:()=>b.KE,navigationLogger:()=>u.GQ,registerEchoBackend:()=>o.e6,reportExperimentView:()=>f.SZ,reportInteraction:()=>f.ff,reportMetaAnalytics:()=>f.r_,reportPageview:()=>f.sm,setAngularLoader:()=>a.W,setAppEvents:()=>h.Xw,setBackendSrv:()=>s.jW,setDataSourceSrv:()=>i.w,setEchoSrv:()=>o.tz,setGrafanaLiveSrv:()=>c.cA,setLegacyAngularInjector:()=>d.t,setLocationService:()=>u.ZG,setLocationSrv:()=>r.x,setQueryRunnerFactory:()=>C.p,setTemplateSrv:()=>l.l,toDataQueryError:()=>S.P,toDataQueryResponse:()=>y.z1,usePluginInteractionReporter:()=>D});var s=n(93570),a=n(70194),i=n(8910),r=n(45926),o=n(74903),l=n(2633),d=n(23106),c=n(98251),u=n(80795),h=n(38251),p=n(65737),g=n(27904),m=n(40683),f=n(31181),v=n(72677),b=n(93250),x=n(18474),y=n(93864),w=n(76308),j=n(678),S=n(75386),C=n(6794),k=n(62027),N=n(94570);function O(e){return{grafana_version:p.v.buildInfo.version,plugin_type:String(e.type),plugin_version:e.info.version,plugin_id:e.id,plugin_name:e.name}}function I(e){return Object.assign({},O(e.meta),{datasource_uid:e.uid})}var T=n(68404),$=n(9888),R=n(77777);const P="grafana_plugin_";function D(){const e=(0,$.g)();return(0,T.useMemo)((()=>{const t=(0,R.v)(e)?I(e.instanceSettings):O(e.meta);return(e,n)=>{if(!function(e){return e.startsWith(P)&&e.length>P.length}(e))throw new Error(`Interactions reported in plugins should start with: "${P}".`);return(0,f.ff)(e,Object.assign({},n,t))}}),[e])}},70194:(e,t,n)=>{"use strict";let s;function a(e){s=e}function i(){return s}n.d(t,{W:()=>a,w:()=>i})},74903:(e,t,n)=>{"use strict";let s,a;function i(e){a=e}function r(){return a||(a=new l),a}n.d(t,{RP:()=>r,e6:()=>o,ee:()=>s,rX:()=>l,tz:()=>i}),function(e){e.Performance="performance",e.MetaAnalytics="meta-analytics",e.Sentry="sentry",e.Pageview="pageview",e.Interaction="interaction",e.ExperimentView="experimentview",e.GrafanaJavascriptAgent="grafana-javascript-agent"}(s||(s={}));const o=e=>{r().addBackend(e)};class l{constructor(){var e,t,n;n=[],(t="events")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}flush(){this.events=[]}addBackend(e){}addEvent(e,t){this.events.push(e)}}},80795:(e,t,n)=>{"use strict";n.d(t,{E1:()=>u,GQ:()=>g,Ox:()=>c,ZG:()=>h,_i:()=>d});var s=n(97594),a=n(274),i=n(61069),r=n(44385),o=n(987),l=n(65737);class d{constructor(e){var t,n,a,i;i=void 0,(a="history")in(n=this)?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,this.history=e||s.lX({basename:null!==(t=l.v.appSubUrl)&&void 0!==t?t:"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(e,t){const n=this.history.location,s=this.getSearchObject();for(const t of Object.keys(e))null===e[t]||void 0===e[t]?delete s[t]:s[t]=e[t];const i=a.Cj.renderUrl(n.pathname,s);t?this.history.replace(i,this.history.location.state):this.history.push(i,this.history.location.state)}push(e){this.history.push(e)}replace(e){this.history.replace(e)}reload(){var e;const t=null===(e=this.history.location.state)||void 0===e?void 0:e.routeReloadCounter;this.history.replace(Object.assign({},this.history.location,{state:{routeReloadCounter:t?t+1:1}}))}getLocation(){return this.history.location}getSearchObject(){return c(this.history.location.search)}update(e){if((0,i.d)("LocationSrv","update","partial, push or replace"),e.partial&&e.query)this.partial(e.query,e.partial);else{const t={pathname:e.path};e.query&&(t.search=a.Cj.toUrlParams(e.query)),e.replace?this.replace(t):this.push(t)}}}function c(e){let t="number"==typeof e?String(e):e;return t.length>0?t.startsWith("?")?a.Cj.parseKeyValue(t.substring(1)):a.Cj.parseKeyValue(t):{}}let u=new d;const h=e=>{throw new Error("locationService can be only overriden in test environment")},p=(0,r.h)("Router"),g=p.logger;(0,o.x)("location",u,p)},45926:(e,t,n)=>{"use strict";let s;function a(e){s=e}function i(){return s}n.d(t,{w:()=>i,x:()=>a})},6794:(e,t,n)=>{"use strict";let s;n.d(t,{A:()=>i,p:()=>a});const a=e=>{if(s)throw new Error("Runner should only be set when Grafana is starting.");s=e},i=()=>{if(!s)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return s()}},38251:(e,t,n)=>{"use strict";n.d(t,{EK:()=>l,N$:()=>u,U5:()=>i,Xw:()=>c,hD:()=>r,md:()=>o});var s=n(54209);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends s.m{}a(i,"type","refresh");class r extends s.R{}a(r,"type","theme-changed");class o extends s.R{}a(o,"type","time-range-updated");class l extends s.R{}let d;function c(e){d=e}function u(){return d}a(l,"type","copy-panel")},93570:(e,t,n)=>{"use strict";function s(e){return"object"==typeof e&&null!==e&&"status"in e&&"data"in e}let a;n.d(t,{i:()=>r,jW:()=>i,kW:()=>s});const i=e=>{a=e},r=()=>a},8910:(e,t,n)=>{"use strict";let s;function a(e){s=e}function i(){return s}n.d(t,{F:()=>i,w:()=>a})},23106:(e,t,n)=>{"use strict";let s;n.d(t,{V:()=>i,t:()=>a});const a=e=>{s=e},i=()=>s},98251:(e,t,n)=>{"use strict";let s,a;n.d(t,{T0:()=>s,cA:()=>i,gj:()=>r}),function(e){e.Append="append",e.Replace="replace"}(s||(s={}));const i=e=>{a=e},r=()=>a},2633:(e,t,n)=>{"use strict";let s;n.d(t,{J:()=>i,l:()=>a});const a=e=>{s=e},i=()=>s},18474:(e,t,n)=>{"use strict";n.d(t,{B9:()=>k,CK:()=>C,PI:()=>N,Pr:()=>y,QO:()=>j,ZA:()=>w,hr:()=>x});var s=n(53786),a=n(3363),i=n(16313),r=n(13016),o=n(94514),l=n(23214),d=n(70332),c=n(22543),u=n(99511),h=n(87289),p=n(65737),g=n(8910),m=n(98251),f=n(93570),v=n(93864);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function y(e){var t;if(!e)return!1;const n=null!==(t=e.type)&&void 0!==t?t:e;return n===x.type||"-100"===n}class w extends Error{constructor(e,t){super(e),b(this,"details",void 0),this.details=t,this.name="HealthCheckError"}}let j;var S;!function(e){e.Unknown="UNKNOWN",e.OK="OK",e.Error="ERROR"}(j||(j={})),function(e){e.PluginID="X-Plugin-Id",e.DatasourceUID="X-Datasource-Uid",e.DashboardUID="X-Dashboard-Uid",e.PanelID="X-Panel-Id"}(S||(S={}));class C extends l.MF{constructor(e){super(e),b(this,"streamOptionsProvider",N)}query(e){const{intervalMs:t,maxDataPoints:n,range:a,requestId:i,hideFromInspector:l=!1}=e;let c=e.targets;this.filterQuery&&(c=c.filter((e=>this.filterQuery(e))));let u=!1;const h=new Set,b=new Set,w=c.map((s=>{var a,i;let r=this.getRef(),o=this.id,l=!0;if(y(s.datasource))return u=!0,Object.assign({},s,{datasource:x});if(s.datasource){var c;const t=(0,g.F)().getInstanceSettings(s.datasource,e.scopedVars);if(!t)throw new Error(`Unknown Datasource: ${JSON.stringify(s.datasource)}`);const n=null!==(c=t.rawRef)&&void 0!==c?c:(0,d.iU)(t),a=t.id;n.uid===r.uid&&o===a||(r=n,o=a,l=!1)}return null!==(a=r.type)&&void 0!==a&&a.length&&h.add(r.type),null!==(i=r.uid)&&void 0!==i&&i.length&&b.add(r.uid),Object.assign({},l?this.applyTemplateVariables(s,e.scopedVars):s,{datasource:r,datasourceId:o,intervalMs:t,maxDataPoints:n})}));if(!w.length)return(0,s.of)({data:[]});const j={queries:w};if(a&&(j.range=a,j.from=a.from.valueOf().toString(),j.to=a.to.valueOf().toString()),p.v.featureToggles.queryOverLive)return(0,m.gj)().getQueryData({request:e,body:j});let C="/api/ds/query";u&&(C+="?expression=true");const N={};return N[S.PluginID]=Array.from(h).join(", "),N[S.DatasourceUID]=Array.from(b).join(", "),e.dashboardUID&&(N[S.DashboardUID]=e.dashboardUID),e.panelId&&(N[S.PanelID]=`${e.panelId}`),(0,f.i)().fetch({url:C,method:"POST",data:j,requestId:i,hideFromInspector:l,headers:N}).pipe((0,r.w)((t=>{var n;const a=(0,v.z1)(t,w);return null!==(n=a.data)&&void 0!==n&&n.length&&a.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?k(a,e,this.streamOptionsProvider):(0,s.of)(a)})),(0,o.K)((e=>(0,s.of)((0,v.z1)(e)))))}getRequestHeaders(){const e={};return e[S.PluginID]=this.type,e[S.DatasourceUID]=this.uid,e}interpolateVariablesInQueries(e,t){return e.map((e=>this.applyTemplateVariables(e,t)))}applyTemplateVariables(e,t){return e}async getResource(e,t,n){const s=this.getRequestHeaders();return(await(0,a.n)((0,f.i)().fetch(Object.assign({},n,{method:"GET",headers:null!=n&&n.headers?Object.assign({},n.headers,s):s,params:null!=t?t:null==n?void 0:n.params,url:`/api/datasources/${this.id}/resources/${e}`})))).data}async postResource(e,t,n){const s=this.getRequestHeaders();return(await(0,a.n)((0,f.i)().fetch(Object.assign({},n,{method:"POST",headers:null!=n&&n.headers?Object.assign({},n.headers,s):s,data:null!=t?t:Object.assign({},t),url:`/api/datasources/${this.id}/resources/${e}`})))).data}async callHealthCheck(){return(0,a.n)((0,f.i)().fetch({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then((e=>e.data)).catch((e=>e.data))}async testDatasource(){return this.callHealthCheck().then((e=>{if(e.status===j.OK)return{status:"success",message:e.message};throw new w(e.message,e.details)}))}}function k(e,t,n){const a=(0,m.gj)();if(!a)return(0,s.of)(e);const r=[],o=[];for(const s of e.data){var l;const e=(0,c.H7)(null===(l=s.meta)||void 0===l?void 0:l.channel);if(e){const i=s;o.push(a.getDataStream({addr:e,buffer:n(t,i),frame:(0,u.Y)(s)}))}else r.push(s)}return r.length&&o.push((0,s.of)(Object.assign({},e,{data:r}))),1===o.length?o[0]:(0,i.T)(...o)}const N=(e,t)=>{var n,s;const a={maxLength:null!==(n=e.maxDataPoints)&&void 0!==n?n:500,action:m.T0.Append};return"now"===(null===(s=e.rangeRaw)||void 0===s?void 0:s.to)&&(a.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),a};C=(0,h.s)(C)},72677:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var s=n(65737);const a=e=>{const{enabledFeatures:t}=s.v.licenseInfo;return t&&t[e]}},93250:(e,t,n)=>{"use strict";n.d(t,{H:()=>u,KE:()=>d,PN:()=>l,o7:()=>c});var s=n(37916),a=n(48606),i=n(2358),r=n(14327),o=n(65737);function l(e,t){o.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([e],{level:r.in.INFO,context:t}),o.v.sentry.enabled&&(0,s.uT)(e,{level:a.z.Info,contexts:t})}function d(e,t){o.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([e],{level:r.in.WARN,context:t}),o.v.sentry.enabled&&(0,s.uT)(e,{level:a.z.Warning,contexts:t})}function c(e,t){o.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([e],{level:r.in.DEBUG,context:t}),o.v.sentry.enabled&&(0,s.uT)(e,{level:a.z.Debug,contexts:t})}function u(e,t){o.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([e.message],{level:r.in.ERROR,context:t}),o.v.sentry.enabled&&(0,s.Tb)(e,{contexts:t})}},40683:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o,i:()=>r});var s=n(59587),a=n.n(s),i=n(65737);const r=a();function o(e){const t=i.v.bootData.user.lightTheme?e.light:e.dark;return r.import(`${t}!css`)}},93864:(e,t,n)=>{"use strict";n.d(t,{Gw:()=>c,S9:()=>u,z1:()=>d});var s=n(28173),a=n(99511),i=n(68633),r=n(27843),o=n(75386);const l={severity:"info",text:"Cached response"};function d(e,t){var n;const r={data:[],state:s.Gu.Done};if(null!==(n=e.data)&&void 0!==n&&n.results){const n=e.data.results,o=null!=t&&t.length?t.map((e=>e.refId)):Object.keys(n),x=function(e){const t=null==e?void 0:e.headers;if(!t||!t.get)return!1;return"HIT"===t.get("X-Cache")}(e),y=[];for(const e of o){const t=n[e];t&&(t.refId=e,y.push(t))}for(const e of y){var d,c,u;if(e.error&&(r.error||(r.error={refId:e.refId,message:e.error},r.state=s.Gu.Error)),null!==(d=e.frames)&&void 0!==d&&d.length)for(let t of e.frames){x&&(h=t,p=void 0,g=void 0,m=void 0,f=void 0,v=void 0,b=void 0,t=Object.assign({},h,{schema:Object.assign({},h.schema,{fields:[...null!==(p=null===(g=h.schema)||void 0===g?void 0:g.fields)&&void 0!==p?p:[]],meta:Object.assign({},null===(m=h.schema)||void 0===m?void 0:m.meta,{notices:[...null!==(f=null===(v=h.schema)||void 0===v||null===(b=v.meta)||void 0===b?void 0:b.notices)&&void 0!==f?f:[],l],isCachedResponse:!0})})}));const n=(0,a.vP)(t);n.refId||(n.refId=e.refId),r.data.push(n)}else{if(null!==(c=e.series)&&void 0!==c&&c.length)for(const t of e.series)t.refId||(t.refId=e.refId),r.data.push((0,i.g0)(t));if(null!==(u=e.tables)&&void 0!==u&&u.length)for(const t of e.tables)t.refId||(t.refId=e.refId),r.data.push((0,i.g0)(t))}}}var h,p,g,m,f,v,b;return e.status&&200!==e.status&&(r.state!==s.Gu.Error&&(r.state=s.Gu.Error),r.error||(r.error=(0,o.P)(e))),r}function c(e){var t,n,s,a;const i=d(e);var r,o;if(null!==(t=i.error)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message)return{status:"error",message:i.error.data.message,details:null!==(r=i.error)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&o.error?{message:i.error.data.error}:void 0};if(null!==(s=i.error)&&void 0!==s&&s.refId&&null!==(a=i.error)&&void 0!==a&&a.message)return{status:"error",message:i.error.message};throw e}function u(e){if(!e||!e.length)return[];const t=[];let n=e.fields.find((e=>e.type===r.fS.string));if(n||(n=e.fields.find((e=>e.type!==r.fS.time))),n)for(let e=0;e<n.values.length;e++)t.push({text:""+n.values.get(e)});return t}},2843:(e,t,n)=>{"use strict";n.d(t,{b:()=>g});var s=n(52423),a=n(42066),i=n(68404),r=n(25004),o=n(16755),l=n(8006),d=n(99500),c=n(23734),u=n(45916);const h=["title","onRemove","children","buttonContent","elevated","bottomSpacing","topSpacing","className","severity"];function p(e){switch(e){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}}const g=i.forwardRef(((e,t)=>{let{title:n,onRemove:i,children:g,buttonContent:f,elevated:v,bottomSpacing:b,topSpacing:x,className:y,severity:w="error"}=e,j=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);const S=(0,o.l4)(),C=m(S,w,v,b,x),k=(0,a.Me)();return(0,u.jsxs)("div",Object.assign({ref:t,className:(0,s.cx)(C.alert,y),"data-testid":r.wl.components.Alert.alertV2(w),role:"alert","aria-labelledby":k},j,{children:[(0,u.jsx)("div",{className:C.icon,children:(0,u.jsx)(d.J,{size:"xl",name:p(w)})}),(0,u.jsxs)("div",{className:C.body,children:[(0,u.jsx)("div",{id:k,className:C.title,children:n}),g&&(0,u.jsx)("div",{className:C.content,children:g})]}),i&&!f&&(0,u.jsx)("div",{className:C.close,children:(0,u.jsx)(c.h,{"aria-label":"Close alert",name:"times",onClick:i,size:"lg",type:"button"})}),i&&f&&(0,u.jsx)("div",{className:C.buttonWrapper,children:(0,u.jsx)(l.zx,{"aria-label":"Close alert",variant:"secondary",onClick:i,type:"button",children:f})})]}))}));g.displayName="Alert";const m=(e,t,n,a,i)=>{const r=e.colors[t],o=e.shape.borderRadius();return{alert:s.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${o};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${e.colors.background.secondary};
      box-shadow: ${n?e.shadows.z3:e.shadows.z1};
      margin-bottom: ${e.spacing(null!=a?a:2)};
      margin-top: ${e.spacing(null!=i?i:0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${e.colors.background.primary};
        z-index: -1;
      }
    `,icon:s.css`
      padding: ${e.spacing(2,3)};
      background: ${r.main};
      border-radius: ${o} 0 0 ${o};
      color: ${r.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:s.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
    `,body:s.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:s.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:s.css`
      padding: ${e.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:s.css`
      padding: ${e.spacing(2,1)};
      background: none;
      display: flex;
    `}}},64313:(e,t,n)=>{"use strict";n.d(t,{C:()=>p});var s=n(52423),a=n(68404),i=n(35008),r=n.n(i),o=n(16755),l=n(99500),d=n(54761),c=n(21888),u=n(45916);const h=["icon","color","text","tooltip","className"];const p=a.memo((e=>{let{icon:t,color:n,text:i,tooltip:r,className:p}=e,m=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);const f=(0,o.wW)((0,a.useCallback)((e=>g(e,n)),[n])),v=(0,u.jsx)("div",Object.assign({className:(0,s.cx)(f.wrapper,p)},m,{children:(0,u.jsxs)(d.Lh,{align:"center",spacing:"xs",children:[t&&(0,u.jsx)(l.J,{name:t,size:"sm"}),(0,u.jsx)("span",{children:i})]})}));return r?(0,u.jsx)(c.u,{content:r,placement:"auto",children:v}):v}));p.displayName="Badge";const g=(e,t)=>{let n=e.visualization.getColorByName(t),a="",i="",o="";return e.isDark?(i=r()(n).setAlpha(.15).toString(),a=r()(n).darken(30).toString(),o=r()(n).lighten(15).toString()):(i=r()(n).setAlpha(.15).toString(),a=r()(n).lighten(20).toString(),o=r()(n).darken(20).toString()),{wrapper:s.css`
      font-size: ${e.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${i};
      border: 1px solid ${a};
      color: ${o};
      font-weight: ${e.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},63179:(e,t,n)=>{"use strict";n.d(t,{QH:()=>x,xf:()=>y});var s=n(52423),a=n(68404),i=n(35008),r=n.n(i),o=n(52410),l=n(40389),d=n(87602),c=n(55343),u=n(663),h=n(31319),p=n(25004),g=n(43456),m=n(8006),f=n(92811),v=n(45916);const b=1.5;let x;!function(e){e.Basic="basic",e.Lcd="lcd",e.Gradient="gradient"}(x||(x={}));class y extends a.PureComponent{render(){const{onClick:e,className:t,theme:n}=this.props,{title:a}=this.props.value,i=function(e){const t={display:"flex",overflow:"hidden",width:"100%"},n=k(e),s={fontSize:`${n.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};C(e.orientation)?(t.flexDirection="column-reverse",s.textAlign="center"):"above"===n.placement?t.flexDirection="column":(t.flexDirection="row",s.width=`${n.width}px`,s.textAlign="right",s.paddingRight="10px");return{wrapper:t,title:s}}(this.props);return e?(0,v.jsxs)("button",{type:"button",style:i.wrapper,onClick:e,className:(0,s.cx)((0,m.gN)(n),t),children:[(0,v.jsx)("div",{style:i.title,children:a}),this.renderBarAndValue()]}):(0,v.jsxs)("div",{style:i.wrapper,className:t,children:[a&&(0,v.jsx)("div",{style:i.title,children:a}),this.renderBarAndValue()]})}renderBarAndValue(){return"lcd"===this.props.displayMode?this.renderRetroBars():this.renderBasicAndGradientBars()}renderBasicAndGradientBars(){const{value:e,showUnfilled:t}=this.props,n=function(e){var t,n;const{displayMode:s,field:a,value:i,alignmentFactors:l,orientation:d,theme:c,text:u}=e,{valueWidth:h,valueHeight:p,maxBarHeight:g,maxBarWidth:m}=N(e),f=null!==(t=a.min)&&void 0!==t?t:o.Hx,v=null!==(n=a.max)&&void 0!==n?n:o.Z3,b=I(i.numeric,f,v),x=$(e),y=R(l||i,x,h,p,d,u),w="basic"===s,j={display:"flex",flexGrow:1},S={borderRadius:"3px",position:"relative",zIndex:1},k={background:`rgba(${c.isDark?"255,255,255":"0,0,0"}, 0.07)`,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(C(d)){const t=Math.max(b*g,1);j.flexDirection="column",j.justifyContent="flex-end",S.transition="height 1s",S.height=`${t}px`,S.width=`${m}px`,k.bottom="-3px",k.width=`${h}px`,w?(S.background=`${r()(x).setAlpha(.35).toRgbString()}`,S.borderTop=`2px solid ${x}`):S.background=T(e,g)}else{const t=Math.max(b*m,1);j.flexDirection="row-reverse",j.justifyContent="flex-end",j.alignItems="stretch",S.transition="width 1s",S.height=`${g}px`,S.width=`${t}px`,k.left="-3px",k.height=`${p}px`,w?(S.background=`${r()(x).setAlpha(.35).toRgbString()}`,S.borderRight=`2px solid ${x}`):S.background=T(e,m)}return{wrapper:j,bar:S,value:y,emptyBar:k}}(this.props);return(0,v.jsxs)("div",{style:n.wrapper,children:[(0,v.jsx)(f.W,{"data-testid":p.wl.components.Panels.Visualization.BarGauge.valueV2,value:e,style:n.value}),t&&(0,v.jsx)("div",{style:n.emptyBar}),(0,v.jsx)("div",{style:n.bar})]})}renderRetroBars(){var e,t;const{display:n,field:s,value:a,itemSpacing:i,alignmentFactors:r,orientation:l,lcdCellWidth:d,text:c}=this.props,{valueHeight:u,valueWidth:h,maxBarHeight:g,maxBarWidth:m,wrapperWidth:b,wrapperHeight:x}=N(this.props),y=null!==(e=s.min)&&void 0!==e?e:o.Hx,w=null!==(t=s.max)&&void 0!==t?t:o.Z3,j=C(l),S=w-y,k=j?g:m,I=i,T=Math.floor(k/d),P=Math.floor((k-I*T)/T),D=R(r||a,$(this.props),h,u,l,c),A={width:`${b}px`,height:`${x}px`,display:"flex"};j?(A.flexDirection="column-reverse",A.alignItems="center"):(A.flexDirection="row",A.alignItems="center",D.justifyContent="flex-end");const M=[];for(let e=0;e<T;e++){const t=O(y+S/T*e,a,n),s={borderRadius:"2px"};t.isLit?s.backgroundImage=`radial-gradient(${t.background} 10%, ${t.backgroundShade})`:s.backgroundColor=t.background,j?(s.height=`${P}px`,s.width=`${m}px`,s.marginTop=`${I}px`):(s.width=`${P}px`,s.height=`${g}px`,s.marginRight=`${I}px`),M.push((0,v.jsx)("div",{style:s},e.toString()))}return(0,v.jsxs)("div",{style:A,children:[M,(0,v.jsx)(f.W,{"data-testid":p.wl.components.Panels.Visualization.BarGauge.valueV2,value:a,style:D})]})}}var w,j,S;function C(e){return e===l.wm.Vertical}function k(e){var t;const{height:n,width:s,alignmentFactors:a,orientation:i,text:r}=e,o=a?a.title:e.value.title;if(!o)return{fontSize:0,width:0,height:0,placement:"above"};if(C(i)){var l;const e=null!==(l=null==r?void 0:r.titleSize)&&void 0!==l?l:14;return{fontSize:e,width:s,height:e*b,placement:"below"}}if(n>40){if(null!=r&&r.titleSize)return{fontSize:null==r?void 0:r.titleSize,width:0,height:r.titleSize*b,placement:"above"};const e=.45,t=Math.max(Math.min(n*e,50),17);return{fontSize:t/b,width:0,height:t,placement:"above"}}const d=Math.max(.6*n,18)/b,c=(0,g.X1)(o,d),u=Math.min(c.width+15,.4*s);return{fontSize:null!==(t=null==r?void 0:r.titleSize)&&void 0!==t?t:d,height:0,width:u,placement:"left"}}function N(e){var t;const{height:n,width:s,orientation:a,text:i,alignmentFactors:r}=e,o=k(e),l=null!=r?r:e.value,d=(0,c.zc)(l);let u=0,h=0,p=0,m=0,f=0,v=0;const b=null!==(t=null==i?void 0:i.valueSize)&&void 0!==t?t:Math.max(o.fontSize,12),x=(0,g.X1)(d,b).width+20;return C(a)?(p=null!=i&&i.valueSize?1*i.valueSize:Math.min(Math.max(.1*n,18),50),m=s,u=n-(o.height+p),h=s,f=s,v=n-o.height):(p=n-o.height,m=Math.max(Math.min(.2*s,150),x),u=n-o.height,h=s-m-o.width,"above"===o.placement?(f=s,v=n-o.height):(f=s-o.width,v=n)),{valueWidth:m,valueHeight:p,maxBarWidth:h,maxBarHeight:u,wrapperHeight:v,wrapperWidth:f}}function O(e,t,n){if(null===e)return{background:u.R,border:u.R};const s=n?n(e).color:null;return s?null===t||isNaN(t.numeric)||null!==e&&e>t.numeric?{background:r()(s).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:r()(s).setAlpha(.95).toRgbString(),backgroundShade:r()(s).setAlpha(.55).toRgbString(),border:r()(s).setAlpha(.9).toRgbString(),isLit:!0}:{background:u.R,border:u.R}}function I(e,t,n){const s=Math.min((e-t)/(n-t),1);return isNaN(s)?0:s}function T(e,t){var n,s;const{field:a,value:i,orientation:r,theme:o}=e,l=C(r)?"0deg":"90deg",c=a.min,p=a.max;let g="",m=0,f=(0,h.QY)(null===(n=a.color)||void 0===n?void 0:n.mode);if(f.id===u.S.Thresholds){const n=a.thresholds;for(let s=0;s<n.steps.length;s++){const a=n.steps[s],r=e.theme.visualization.getColorByName(a.color),o=n.mode===d.H.Percentage?a.value/100:I(a.value,c,p),u=o*t,h=Math.round(u-(u-m)/2),f=n.mode===d.H.Percentage?c+(p-c)*o:a.value;if(""===g)g=`linear-gradient(${l}, ${r}, ${r}`;else{if(i.numeric<f)break;m=u,g+=` ${h}px, ${r}`}}return g+")"}if(f.isContinuous&&f.getColors){const e=f.getColors(o);for(let n=0;n<e.length;n++){const s=e[n];if(""===g)g=`linear-gradient(${l}, ${s} 0px`;else{g+=`, ${s} ${n/(e.length-1)*t}px`}}return g+")"}return null!==(s=i.color)&&void 0!==s?s:u.R}function $(e){const{value:t}=e;return t.color?t.color:u.R}function R(e,t,n,s,a,i){const r={color:t,height:`${s}px`,width:`${n}px`,display:"flex",alignItems:"center",lineHeight:1};let o=n;const l=(0,c.zc)(e);var d,u;C(a)?(r.fontSize=null!==(d=null==i?void 0:i.valueSize)&&void 0!==d?d:(0,g.MX)(l,o,s,1),r.justifyContent="center"):(r.fontSize=null!==(u=null==i?void 0:i.valueSize)&&void 0!==u?u:(0,g.MX)(l,o-20,s,1),r.justifyContent="flex-end",r.paddingLeft="10px",r.paddingRight="10px",o-=10);return r}w=y,j="defaultProps",S={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:x.Gradient,orientation:l.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:d.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0},j in w?Object.defineProperty(w,j,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[j]=S},99749:(e,t,n)=>{"use strict";n.d(t,{w6:()=>N,pc:()=>j,IG:()=>S,ap:()=>C,jG:()=>k});var s=n(68404),a=n(92811),i=n(35008),r=n.n(i),o=n(40389),l=n(27843),d=n(55343),c=n(27864),u=n(57971),h=n(43456),p=n(58002),g=n(45916);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=1.2;class v{constructor(e){var t;m(this,"titleFontSize",void 0),m(this,"valueFontSize",void 0),m(this,"chartHeight",void 0),m(this,"chartWidth",void 0),m(this,"valueColor",void 0),m(this,"panelPadding",void 0),m(this,"justifyCenter",void 0),m(this,"titleToAlignTo",void 0),m(this,"valueToAlignTo",void 0),m(this,"maxTextWidth",void 0),m(this,"maxTextHeight",void 0),m(this,"textValues",void 0),this.props=e;const{width:n,height:s,value:a,text:i}=e;this.valueColor=null!==(t=a.color)&&void 0!==t?t:"gray",this.panelPadding=s>100?12:8,this.textValues=function(e){const{value:t,alignmentFactors:n,count:s}=e;let{textMode:a}=e;const i=n?n.title:t.title,r=(0,d.zc)(n||t);a===k.Auto&&1===(null!=s?s:1)&&(a=k.Value);switch(a){case k.Name:return Object.assign({},t,{title:void 0,prefix:void 0,suffix:void 0,text:t.title||"",titleToAlignTo:void 0,valueToAlignTo:null!=i?i:"",tooltip:(0,d.zc)(t)});case k.Value:return Object.assign({},t,{title:void 0,titleToAlignTo:void 0,valueToAlignTo:r,tooltip:t.title});case k.None:return{numeric:t.numeric,color:t.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${t.title}\nValue: ${(0,d.zc)(t)}`};case k.ValueAndName:default:return Object.assign({},t,{titleToAlignTo:i,valueToAlignTo:r})}}(e),this.justifyCenter=function(e,t){if(e===C.Center)return!0;return 0===(null!=t?t:"").length}(e.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=n-2*this.panelPadding,this.maxTextHeight=s-2*this.panelPadding,i&&(i.titleSize&&(this.titleFontSize=i.titleSize,this.titleToAlignTo=void 0),i.valueSize&&(this.valueFontSize=i.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const e={fontSize:`${this.titleFontSize}px`,lineHeight:f};return this.props.parentOrientation===o.wm.Horizontal&&this.justifyCenter&&(e.paddingRight="0.75ch"),this.props.colorMode===j.Background&&(e.color=(0,u.bM)(this.valueColor,this.props.theme.isDark)),e}getValueStyles(){const e={fontSize:this.valueFontSize,fontWeight:500,lineHeight:f,position:"relative",zIndex:1};switch(this.justifyCenter&&(e.textAlign="center"),this.props.colorMode){case j.Value:e.color=this.valueColor;break;case j.Background:e.color=(0,u.bM)(this.valueColor,this.props.theme.isDark);break;case j.None:e.color=this.props.theme.colors.text.primary}return e}getValueAndTitleContainerStyles(){const e={display:"flex"};return this.justifyCenter&&(e.alignItems="center",e.justifyContent="center",e.flexGrow=1),e}getPanelStyles(){const{width:e,height:t,theme:n,colorMode:s}=this.props,a={width:`${e}px`,height:`${t}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},i=n.isDark?1:-.7;switch(s){case j.Background:const e=r()(this.valueColor).darken(15*i).spin(8).toRgbString(),t=r()(this.valueColor).darken(5*i).spin(-8).toRgbString();a.background=`linear-gradient(120deg, ${e}, ${t})`;break;case j.Value:a.background="transparent"}return this.justifyCenter&&(a.alignItems="center",a.flexDirection="row"),a}renderChart(){var e;const{sparkline:t,colorMode:n}=this.props;if(!t||(null===(e=t.y)||void 0===e?void 0:e.type)!==l.fS.number)return null;let s,a;switch(n){case j.Background:s="rgba(255,255,255,0.4)",a=r()(this.valueColor).brighten(40).toRgbString();break;case j.None:case j.Value:default:a=this.valueColor,s=r()(this.valueColor).setAlpha(.2).toRgbString()}const i={custom:{drawStyle:c.l8.Line,lineWidth:1,fillColor:s,lineColor:a}};return(0,g.jsx)("div",{style:this.getChartStyles(),children:(0,g.jsx)(p.b,{height:this.chartHeight,width:this.chartWidth,sparkline:t,config:i,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class b extends v{constructor(e){var t,n;super(e);const s=null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,h.MX)(this.valueToAlignTo,this.maxTextWidth*s,this.maxTextHeight,f)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=(0,h.MX)(this.titleToAlignTo,.6*this.maxTextWidth,this.maxTextHeight,f,30),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.alignItems="center",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}class x extends v{constructor(e){var t;super(e);const{width:n,height:s}=e;this.chartWidth=n,this.chartHeight=.5*s,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,h.MX)(this.titleToAlignTo,.6*this.maxTextWidth,.4*this.maxTextHeight,f,30)),this.valueToAlignTo.length&&(this.valueFontSize=(0,h.MX)(this.valueToAlignTo,.4*this.maxTextWidth,.5*this.maxTextHeight,f))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="row",e.justifyContent="space-between",e}}class y extends v{constructor(e){var t,n;super(e);const{width:s,height:a}=e;let i=0;this.chartHeight=.25*a,this.chartWidth=s,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,h.MX)(this.titleToAlignTo,this.maxTextWidth,.15*a,f,30),i=this.titleFontSize*f),this.valueToAlignTo.length&&(this.valueFontSize=(0,h.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-i,f)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)),this.chartHeight=a-this.titleFontSize*f-this.valueFontSize*f}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.justifyContent="center",e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="column",e}}class w extends v{constructor(e){var t,n;super(e);const{height:s}=e;let a=0;null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,h.MX)(this.titleToAlignTo,this.maxTextWidth,.15*s,f,30),a=this.titleFontSize*f),this.valueToAlignTo.length&&(this.valueFontSize=(0,h.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-a,f)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.flexGrow=1,e}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}let j,S,C,k;!function(e){e.Value="value",e.Background="background",e.None="none"}(j||(j={})),function(e){e.None="none",e.Line="line",e.Area="area"}(S||(S={})),function(e){e.Auto="auto",e.Center="center"}(C||(C={})),function(e){e.Auto="auto",e.Value="value",e.ValueAndName="value_and_name",e.Name="name",e.None="none"}(k||(k={}));class N extends s.PureComponent{render(){const{onClick:e,className:t,hasLinks:n}=this.props,s=function(e){const{width:t,height:n,sparkline:s}=e;return t/n>2.5?n>50&&s&&s.y.values.length>1?new x(e):new b(e):n>100&&s&&s.y.values.length>1?new y(e):new w(e)}(this.props),i=s.getPanelStyles(),r=s.getValueAndTitleContainerStyles(),o=s.getValueStyles(),l=s.getTitleStyles(),d=s.textValues,c=n?void 0:d.tooltip;return(0,g.jsxs)("div",{className:t,style:i,onClick:e,title:c,children:[(0,g.jsxs)("div",{style:r,children:[d.title&&(0,g.jsx)("div",{style:l,children:d.title}),(0,g.jsx)(a.W,{value:d,style:o})]}),s.renderChart()]})}}var O,I,T;O=N,I="defaultProps",T={justifyMode:C.Auto},I in O?Object.defineProperty(O,I,{value:T,enumerable:!0,configurable:!0,writable:!0}):O[I]=T},58765:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var s=n(52423),a=n(68404),i=n(94130),r=n.n(i),o=n(16755),l=n(25801),d=n(45916);const c=["name","value","hidden","facets","onClick","className","loading","searchTerm","active","style","title","highlightParts"];const u=(0,a.forwardRef)(((e,t)=>{let{name:n,value:i,hidden:u,facets:p,onClick:g,className:m,loading:f,searchTerm:v,active:b,style:x,title:y,highlightParts:w}=e,j=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const S=(0,o.l4)(),C=h(S),k=v?[v]:[],N=(0,a.useCallback)((e=>{g&&!u&&g(n,i,e)}),[g,n,u,i]);let O=i||n;return p&&(O=`${O} (${p})`),(0,d.jsx)("button",Object.assign({ref:t,onClick:N,style:x,title:y||O,type:"button",role:"option","aria-selected":!!b,className:(0,s.cx)(C.base,b&&C.active,f&&C.loading,u&&C.hidden,m,g&&!u&&C.hover)},j,{children:void 0!==w?(0,d.jsx)(l.H,{text:O,highlightClassName:C.matchHighLight,highlightParts:w}):(0,d.jsx)(r(),{textToHighlight:O,searchWords:k,autoEscape:!0,highlightClassName:C.matchHighLight})}),O)}));u.displayName="Label";const h=e=>({base:s.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.bodySmall.lineHeight};
    background-color: ${e.colors.background.secondary};
    color: ${e.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${e.spacing(.5)};
    border-radius: ${e.shape.borderRadius()};
    border: none;
    margin-right: ${e.spacing(1)};
    margin-bottom: ${e.spacing(.5)};
  `,loading:s.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.shade};
    color: ${e.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${e.colors.text.primary};
      }
      50% {
        color: ${e.colors.text.secondary};
      }
      100% {
        color: ${e.colors.text.disabled};
      }
    }
  `,active:s.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `,matchHighLight:s.css`
    background: inherit;
    color: ${e.components.textHighlight.text};
    background-color: ${e.components.textHighlight.background};
  `,hidden:s.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:s.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},8006:(e,t,n)=>{"use strict";n.d(t,{Qj:()=>f,c9:()=>x,fW:()=>v,gN:()=>y,zx:()=>m});var s=n(52423),a=n(68404),i=n(66876),r=n(16755),o=n(58906),l=n(50578),d=n(99500),c=n(21888),u=n(45916);const h=["variant","size","fill","icon","fullWidth","children","className","type"],p=["variant","size","fill","icon","fullWidth","children","className","onBlur","onFocus","disabled","tooltip","tooltipPlacement"];function g(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const m=a.forwardRef(((e,t)=>{let{variant:n="primary",size:a="md",fill:i="solid",icon:o,fullWidth:l,children:c,className:p,type:m="button"}=e,f=g(e,h);const b=(0,r.l4)(),x=v({theme:b,size:a,variant:n,fill:i,fullWidth:l,iconOnly:!c});return(0,u.jsxs)("button",Object.assign({className:(0,s.cx)(x.button,p),type:m},f,{ref:t,children:[o&&(0,u.jsx)(d.J,{name:o,size:a,className:x.icon}),c&&(0,u.jsx)("span",{className:x.content,children:c})]}))}));m.displayName="Button";const f=a.forwardRef(((e,t)=>{let{variant:n="primary",size:a="md",fill:i="solid",icon:o,fullWidth:l,children:h,className:m,disabled:f,tooltip:b,tooltipPlacement:x}=e,y=g(e,p);const w=(0,r.l4)(),j=v({theme:w,fullWidth:l,size:a,variant:n,fill:i,iconOnly:!h}),S=(0,s.cx)(j.button,{[(0,s.css)(j.disabled,{pointerEvents:"none"})]:f},m),C=(0,u.jsxs)("a",Object.assign({className:S},y,{tabIndex:f?-1:0,ref:t,children:[o&&(0,u.jsx)(d.J,{name:o,size:a,className:j.icon}),h&&(0,u.jsx)("span",{className:j.content,children:h})]}));return b?(0,u.jsx)(c.u,{content:b,placement:x,children:C}):C}));f.displayName="LinkButton";const v=e=>{const{theme:t,variant:n,fill:a="solid",size:i,iconOnly:r,fullWidth:d}=e,{height:c,padding:u,fontSize:h}=(0,l.iL)(i,t),p=x(t,n,a),g=function(e,t,n){const s={cursor:"not-allowed",boxShadow:"none",color:e.colors.text.disabled,transition:"none"};if("text"===n)return Object.assign({},s,{background:"transparent",border:"1px solid transparent"});if("outline"===n)return Object.assign({},s,{background:"transparent",border:`1px solid ${e.colors.action.disabledText}`});return Object.assign({},s,{background:e.colors.action.disabledBackground,border:"1px solid transparent"})}(t,0,a),m=(0,o.getFocusStyles)(t),f=t.spacing.gridSize*u-1;return{button:(0,s.css)(Object.assign({label:"button",display:"inline-flex",alignItems:"center",fontSize:h,fontWeight:t.typography.fontWeightMedium,fontFamily:t.typography.fontFamily,padding:`0 ${f}px`,height:t.spacing(c),lineHeight:t.spacing.gridSize*c-2+"px",verticalAlign:"middle",cursor:"pointer",borderRadius:t.shape.borderRadius(1),"&:focus":m,"&:focus-visible":m,"&:focus:not(:focus-visible)":(0,o.getMouseFocusStyles)(t)},d&&{flexGrow:1,justifyContent:"center"},p,{":disabled":g,"&[disabled]":g})),disabled:(0,s.css)(g),img:s.css`
      width: 16px;
      height: 16px;
      margin: ${t.spacing(0,1,0,.5)};
    `,icon:r?(0,s.css)({marginRight:t.spacing(-u/2),marginLeft:t.spacing(-u/2)}):(0,s.css)({marginRight:t.spacing(u/2)}),content:s.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function b(e,t,n){return"outline"===n?{background:"transparent",color:t.text,border:`1px solid ${t.border}`,transition:e.transitions.create(["background-color","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:i.alpha(t.main,e.colors.action.hoverOpacity),borderColor:e.colors.emphasize(t.border,.25),color:t.text}}:"text"===n?{background:"transparent",color:t.text,border:"1px solid transparent",transition:e.transitions.create(["background-color","color"],{duration:e.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:i.alpha(t.shade,e.colors.action.hoverOpacity),textDecoration:"none"}}:{background:t.main,color:t.contrastText,border:"1px solid transparent",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:t.shade,color:t.contrastText,boxShadow:e.shadows.z1}}}function x(e,t,n){switch(t){case"secondary":return b(e,e.colors.secondary,n);case"destructive":return b(e,e.colors.error,n);case"success":return b(e,e.colors.success,n);default:return b(e,e.colors.primary,n)}}const y=e=>s.css`
    background: transparent;
    color: ${e.colors.text.primary};
    border: none;
    padding: 0;
  `},98817:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);const o=["className","children"];const l=(0,a.forwardRef)(((e,t)=>{let{className:n,children:a}=e,l=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const c=(0,i.wW)(d);return(0,r.jsx)("div",Object.assign({ref:t,className:(0,s.cx)("button-group",c.wrapper,n)},l,{children:a}))}));l.displayName="ButtonGroup";const d=e=>({wrapper:s.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},30477:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var s=n(52423),a=n(71679),i=(n(68404),n(50191)),r=n(16755),o=n(8006),l=n(54680),d=n(99500),c=n(45916);const u=["onChange","className","loadData","icon","buttonProps","hideDownIcon","variant","disabled"];const h=(0,i.B)((e=>({popup:s.css`
      label: popup;
      z-index: ${e.zIndex.dropdown};
    `,icons:{right:s.css`
        margin: 1px 0 0 4px;
      `,left:s.css`
        margin: -1px 4px 0 0;
      `}}))),p=e=>{const{onChange:t,loadData:n,icon:s,buttonProps:i,hideDownIcon:p,variant:g,disabled:m}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u),v=(0,r.l4)(),b=h(v);let x=e.children;return p||(x=[e.children,(0,c.jsx)(d.J,{name:"angle-down",className:b.icons.right},"down-icon")]),(0,c.jsx)(a.Z,Object.assign({onChange:(0,l.K)(t),loadData:(0,l.p)(n),dropdownClassName:b.popup},f,{expandIcon:null,children:(0,c.jsx)(o.zx,Object.assign({icon:s,disabled:m,variant:g},null!=i?i:{},{children:x}))}))};p.displayName="ButtonCascader"},334:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{message:t,callToActionElement:n,footer:r,className:l}=e;const d=(0,a.wW)(o);return(0,i.jsxs)("div",{className:(0,s.cx)([d.wrapper,l]),children:[t&&(0,i.jsx)("div",{className:d.message,children:t}),n,r&&(0,i.jsx)("div",{className:d.footer,children:r})]})},o=e=>({wrapper:s.css`
    label: call-to-action-card;
    padding: ${e.spacing(3)};
    background: ${e.colors.background.secondary};
    border-radius: ${e.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:s.css`
    margin-bottom: ${e.spacing(3)};
    font-style: italic;
  `,footer:s.css`
    margin-top: ${e.spacing(3)}};
  `})},1129:(e,t,n)=>{"use strict";n.d(t,{L:()=>O,Z:()=>h});var s,a=n(52423),i=n(68404),r=n(16755),o=n(58906),l=n(78748),d=n(45916);const c=["disabled","href","onClick","children","isSelected","className"];const u=i.createContext(null),h=e=>{let{disabled:t,href:n,onClick:o,children:h,isSelected:g,className:m}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const v=(0,i.useMemo)((()=>i.Children.toArray(h).some((e=>i.isValidElement(e)&&e.type.displayName===p.displayName))),[h]),b=t||!o&&!n,x=o&&!t?o:void 0,y=(0,r.l4)(),w=(0,l.$)(y,t,b,g);return(0,d.jsx)(l._,Object.assign({disableEvents:t,disableHover:b,isSelected:g,className:(0,a.cx)(w.container,m)},f,{children:(0,d.jsxs)(u.Provider,{value:{href:n,onClick:x,disabled:t,isSelected:g},children:[!v&&(s||(s=(0,d.jsx)(p,{}))),h]})}))},p=e=>{let{children:t,className:n,"aria-label":s}=e;const o=(0,i.useContext)(u),l=(0,r.wW)(g),{href:c,onClick:h,isSelected:p}=null!=o?o:{href:void 0,onClick:void 0,isSelected:void 0};return(0,d.jsxs)("h2",{className:(0,a.cx)(l.heading,n),children:[c?(0,d.jsx)("a",{href:c,className:l.linkHack,"aria-label":s,onClick:h,children:t}):h?(0,d.jsx)("button",{onClick:h,className:l.linkHack,"aria-label":s,type:"button",children:t}):(0,d.jsx)(d.Fragment,{children:t}),void 0!==p&&(0,d.jsx)("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:p})]})};p.displayName="Heading";const g=e=>({heading:(0,a.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:e.typography.size.md,letterSpacing:"inherit",lineHeight:e.typography.body.lineHeight,color:e.colors.text.primary,fontWeight:e.typography.fontWeightMedium}),linkHack:(0,a.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:e.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":Object.assign({},(0,o.getFocusStyles)(e),{zIndex:1})}})}),m=e=>{let{children:t,className:n}=e;const s=(0,r.wW)(f);return(0,d.jsx)("div",{className:(0,a.cx)(s.tagList,n),children:t})};m.displayName="Tags";const f=e=>({tagList:(0,a.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),v=e=>{let{children:t,className:n}=e;const s=(0,r.wW)(b);return(0,d.jsx)("p",{className:(0,a.cx)(s.description,n),children:t})};v.displayName="Description";const b=e=>({description:(0,a.css)({width:"100%",gridArea:"Description",margin:e.spacing(1,0,0),color:e.colors.text.secondary,lineHeight:e.typography.body.lineHeight})}),x=e=>{let{children:t,align:n="start",className:s}=e;const i=(0,r.wW)(y);return(0,d.jsx)("div",{className:(0,a.cx)(i.media,s,a.css`
          align-self: ${n};
        `),children:t})};x.displayName="Figure";const y=e=>({media:(0,a.css)({position:"relative",gridArea:"Figure",marginRight:e.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),w=(0,i.memo)((e=>{let{children:t,className:n,separator:s="|"}=e;const o=(0,r.wW)(j);let l=t;const c=i.Children.toArray(t).filter(Boolean);return c.length?(l=c.map(((e,t)=>(0,d.jsx)("div",{className:o.metadataItem,children:e},`element_${t}`))),c.length>1&&s&&(l=c.reduce(((e,t,n)=>[e,(0,d.jsx)("span",{className:o.separator,children:s},`separator_${n}`),t]))),(0,d.jsx)("div",{className:(0,a.cx)(o.metadata,n),children:l})):null}));w.displayName="Meta";const j=e=>({metadata:(0,a.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:e.typography.size.sm,color:e.colors.text.secondary,margin:e.spacing(.5,0,0),lineHeight:e.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,a.css)({zIndex:0}),separator:(0,a.css)({margin:`0 ${e.spacing(1)}`})}),S=e=>{let{children:t,disabled:n,variant:s,className:o}=e;const l=(0,r.wW)(C),c=(0,i.useContext)(u),h=(null==c?void 0:c.disabled)||n,p="primary"===s?l.actions:l.secondaryActions;return(0,d.jsx)("div",{className:(0,a.cx)(p,o),children:i.Children.map(t,(e=>i.isValidElement(e)?(0,i.cloneElement)(e,Object.assign({disabled:h},e.props)):null))})},C=e=>({actions:(0,a.css)({gridArea:"Actions",marginTop:e.spacing(2),"& > *":{marginRight:e.spacing(1)}}),secondaryActions:(0,a.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:e.colors.text.secondary,marginTtop:e.spacing(2),"& > *":{marginRight:`${e.spacing(1)} !important`}})}),k=e=>{let{children:t,disabled:n,className:s}=e;return(0,d.jsx)(S,{variant:"primary",disabled:n,className:s,children:t})};k.displayName="Actions";const N=e=>{let{children:t,disabled:n,className:s}=e;return(0,d.jsx)(S,{variant:"secondary",disabled:n,className:s,children:t})};N.displayName="SecondaryActions";const O=e=>Object.assign({inner:a.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `},g(e),j(e),b(e),y(e),C(e),f(e));h.Heading=p,h.Tags=m,h.Figure=x,h.Meta=w,h.Actions=k,h.SecondaryActions=N,h.Description=v},78748:(e,t,n)=>{"use strict";n.d(t,{$:()=>h,_:()=>u});var s=n(52423),a=(n(68404),n(16755)),i=n(50191),r=n(58906),o=n(45916);const l=["children","disableEvents","disableHover","isSelected","className","href"];const d=e=>{let{children:t,href:n}=e;const{inner:s}=(0,a.wW)(c);return n?(0,o.jsx)("a",{className:s,href:n,children:t}):(0,o.jsx)(o.Fragment,{children:t})},c=e=>({inner:(0,s.css)({display:"flex",width:"100%",padding:e.spacing(2)})}),u=e=>{let{children:t,disableEvents:n,disableHover:i,isSelected:r,className:c,href:u}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const g=(0,a.l4)(),{oldContainer:m}=h(g,n,i,r);return(0,o.jsx)("div",Object.assign({},p,{className:(0,s.cx)(m,c),children:(0,o.jsx)(d,{href:u,children:t})}))},h=(0,i.B)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;const i=void 0!==a;return{container:(0,s.css)(Object.assign({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:'\n        "Figure Heading Tags"\n        "Figure Meta Tags"\n        "Figure Description Tags"\n        "Figure Actions Secondary"',width:"100%",padding:e.spacing(2),background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),marginBottom:"8px",pointerEvents:t?"none":"auto",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!n&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(e)},i&&{cursor:"pointer"},a&&{outline:`solid 2px ${e.colors.primary.border}`})),oldContainer:(0,s.css)(Object.assign({display:"flex",width:"100%",background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),position:"relative",pointerEvents:t?"none":"auto",marginBottom:e.spacing(1),transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!n&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(e)}))}}))},43446:(e,t,n)=>{"use strict";n.d(t,{v:()=>m});var s,a=n(52423),i=n(58635),r=n(71679),o=n(68404),l=n(99500),d=n(4645),c=n(70917),u=n(54680),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=(0,a.css)("\n&:focus{\n  outline: none;\n}\n");class m extends o.PureComponent{constructor(e){var t;super(e),t=this,p(this,"flattenOptions",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];for(const a of e){const e=[...n];e.push(a),a.items?s=[...s,...t.flattenOptions(a.items,e)]:s.push({singleLabel:e[e.length-1].label,label:e.map((e=>e.label)).join(t.props.separator||" / "),value:e.map((e=>e.value))})}return s})),p(this,"getSearchableOptions",(0,i.Z)((e=>this.flattenOptions(e)))),p(this,"onChange",((e,t)=>{const n=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?t.map((e=>e.label)).join(this.props.separator||"/"):t[t.length-1].label;this.setState({rcValue:e,focusCascade:!0,activeLabel:n}),this.props.onSelect(t[t.length-1].value)})),p(this,"onSelect",(e=>{const t=e.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?e.label:e.singleLabel||"",rcValue:t,isSearching:!1}),this.props.onSelect(t[t.length-1])})),p(this,"onCreateOption",(e=>{this.setState({activeLabel:e,rcValue:[],isSearching:!1}),this.props.onSelect(e)})),p(this,"onBlur",(()=>{var e,t;this.setState({isSearching:!1,focusCascade:!1}),""===this.state.activeLabel&&this.setState({rcValue:[]}),null===(e=(t=this.props).onBlur)||void 0===e||e.call(t)})),p(this,"onBlurCascade",(()=>{var e,t;this.setState({focusCascade:!1}),null===(e=(t=this.props).onBlur)||void 0===e||e.call(t)})),p(this,"onInputKeyDown",(e=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(e.key)||this.setState({focusCascade:!1,isSearching:!0})})),p(this,"onSelectInputChange",(e=>{""===e&&this.setState({isSearching:!1})}));const n=this.getSearchableOptions(e.options),{rcValue:s,activeLabel:a}=this.setInitialValue(n,e.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:s,activeLabel:a}}setInitialValue(e,t){if(!t)return{rcValue:[],activeLabel:""};for(const n of e){const e=n.value||[];if(e.indexOf(t)===e.length-1)return{rcValue:e,activeLabel:this.props.displayAllSelectedLevels?n.label:n.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:t}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:e,formatCreateLabel:t,placeholder:n,width:a,changeOnSelect:i,options:o}=this.props,{focusCascade:p,isSearching:m,rcValue:f,activeLabel:v}=this.state,b=this.getSearchableOptions(o);return(0,h.jsx)("div",{children:m?(0,h.jsx)(c.Ph,{allowCustomValue:e,placeholder:n,autoFocus:!p,onChange:this.onSelect,onBlur:this.onBlur,options:b,onCreateOption:this.onCreateOption,formatCreateLabel:t,width:a,onInputChange:this.onSelectInputChange}):(0,h.jsx)(r.Z,{onChange:(0,u.K)(this.onChange),options:o,changeOnSelect:i,value:f.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,children:(0,h.jsx)("div",{className:g,children:(0,h.jsx)(d.I,{autoFocus:this.props.autoFocus,width:a,placeholder:n,onBlur:this.onBlurCascade,value:v,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:p?s||(s=(0,h.jsx)(l.J,{name:"angle-up"})):(0,h.jsx)(l.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})})})})})}}p(m,"defaultProps",{changeOnSelect:!0})},54680:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,p:()=>a});const s=e=>(t,n)=>{e&&e(t.map((e=>String(e))),i(n))},a=e=>t=>{e&&e(i(t))},i=e=>e.map(r),r=e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.label}}},55910:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var s=n(68404),a=n(45916);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends s.PureComponent{constructor(){super(...arguments),i(this,"myRef",(0,s.createRef)()),i(this,"state",{hasEventListener:!1}),i(this,"onOutsideClick",(e=>{const t=this.myRef.current;t&&t.contains(e.target)||this.props.onClick()}))}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return(0,a.jsx)("div",{ref:this.myRef,children:this.props.children})}}i(r,"defaultProps",{includeButtonPress:!0,parent:"undefined"!=typeof window?window:null,useCapture:!1})},11818:(e,t,n)=>{"use strict";n.d(t,{m:()=>g});var s,a,i=n(52423),r=n(68404),o=n(60192),l=n(16755),d=n(8006),c=n(99500),u=n(54588),h=n(45916);const p=["onClipboardCopy","onClipboardError","children","getText","icon","variant"];function g(e){let{onClipboardCopy:t,onClipboardError:n,children:g,getText:v,icon:b,variant:x}=e,y=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const w=(0,l.wW)(f),[j,S]=(0,r.useState)(!1);(0,r.useEffect)((()=>{let e;return j&&(e=setTimeout((()=>{S(!1)}),2e3)),()=>{window.clearTimeout(e)}}),[j]);const C=(0,r.useRef)(null),k=(0,r.useCallback)((async()=>{const e=v();try{await m(e,C),S(!0),null==t||t(e)}catch(t){null==n||n(e,t)}}),[v,t,n]);return(0,h.jsxs)(h.Fragment,{children:[j&&(0,h.jsx)(u.K,{placement:"top",referenceElement:C.current,children:s||(s=(0,h.jsx)(o.c,{i18nKey:"clipboard-button.inline-toast.success",children:"Copied"}))}),(0,h.jsxs)(d.zx,Object.assign({onClick:k,icon:b,variant:j?"success":x,"aria-label":j?"Copied":void 0},y,{className:(0,i.cx)(w.button,j&&w.successButton),ref:C,children:[g,j&&(0,h.jsx)("div",{className:w.successOverlay,children:a||(a=(0,h.jsx)(c.J,{name:"check"}))})]}))]})}const m=async(e,t)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{var n;const s=document.createElement("textarea");null===(n=t.current)||void 0===n||n.appendChild(s),s.value=e,s.focus(),s.select(),document.execCommand("copy"),s.remove()}},f=e=>({button:(0,i.css)({position:"relative"}),successButton:(0,i.css)({"> *":(0,i.css)({visibility:"hidden"})}),successOverlay:(0,i.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},75342:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var s=n(52423),a=n(82897),i=n(68404),r=n(81691),o=n(99500),l=n(16755),d=n(58906),c=n(45916);const u=e=>{let{label:t,isOpen:n,onToggle:d,className:u,contentClassName:p,children:g,labelId:m,loading:f=!1,headerDataTestId:v,contentDataTestId:b}=e;const[x,y]=(0,i.useState)(n),w=(0,l.wW)(h),j=e=>{e.target instanceof HTMLElement&&"A"===e.target.tagName||(e.preventDefault(),e.stopPropagation(),null==d||d(!x),y(!x))},{current:S}=(0,i.useRef)((0,a.uniqueId)()),C=null!=m?m:`collapse-label-${S}`;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{onClick:j,className:(0,s.cx)(w.header,u),children:[(0,c.jsx)("button",{id:`collapse-button-${S}`,className:w.button,onClick:j,"aria-expanded":x&&!f,"aria-controls":`collapse-content-${S}`,"aria-labelledby":C,children:f?(0,c.jsx)(r.$,{className:w.spinner}):(0,c.jsx)(o.J,{name:x?"angle-up":"angle-down",className:w.icon})}),(0,c.jsx)("div",{className:w.label,id:`collapse-label-${S}`,"data-testid":v,children:t})]}),x&&(0,c.jsx)("div",{id:`collapse-content-${S}`,className:(0,s.cx)(w.content,p),"data-testid":b,children:g})]})},h=e=>({header:(0,s.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:e.typography.size.lg,padding:`${e.spacing(.5)} 0`,"&:focus-within":(0,d.getFocusStyles)(e)}),button:(0,s.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,s.css)({color:e.colors.text.secondary}),content:(0,s.css)({padding:`${e.spacing(2)} 0`}),spinner:(0,s.css)({display:"flex",alignItems:"center",width:e.spacing(2)}),label:(0,s.css)({display:"flex"})})},38595:(e,t,n)=>{"use strict";n.d(t,{U:()=>h,y:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(8006),o=n(99500),l=n(45916);const d=["isOpen","onToggle"];const c=e=>({collapse:s.css`
    label: collapse;
    margin-bottom: ${e.spacing(1)};
    background-color: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};
    position: relative;
    border-radius: 3px;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:s.css`
    label: collapse__body;
    padding: ${e.spacing(e.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:s.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:s.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${e.spacing(.5)};
  `,loaderActive:s.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${e.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:s.css`
    label: collapse__header;
    padding: ${e.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:s.css`
    label: collapse__header--collapsed;
    padding: ${e.spacing(1,2,1,2)};
  `,headerLabel:s.css`
    label: collapse__header-label;
    font-weight: ${e.typography.fontWeightMedium};
    margin-right: ${e.spacing(1)};
    font-size: ${e.typography.size.md};
  `,icon:s.css`
    label: collapse__icon;
    margin: ${e.spacing(.25,1,0,-1)};
  `}),u=e=>{let{isOpen:t,onToggle:n}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const[i,r]=(0,a.useState)(t);return(0,l.jsx)(h,Object.assign({isOpen:i,collapsible:!0},s,{onToggle:()=>{r(!i),n&&n(!i)}}))},h=e=>{let{isOpen:t,label:n,loading:a,collapsible:d,onToggle:u,className:h,children:p}=e;const g=(0,i.wW)(r.gN),m=(0,i.wW)(c),f=(0,s.cx)([m.collapse,h]),v=a?(0,s.cx)([m.loader,m.loaderActive]):(0,s.cx)([m.loader]),b=d?(0,s.cx)([m.header]):(0,s.cx)([m.headerCollapsed]);return(0,l.jsxs)("div",{className:f,children:[(0,l.jsxs)("button",{type:"button",className:(0,s.cx)(g,b),onClick:()=>{u&&u(!t)},children:[d&&(0,l.jsx)(o.J,{className:m.icon,name:t?"angle-down":"angle-right"}),(0,l.jsx)("div",{className:(0,s.cx)([m.headerLabel]),children:n})]}),t&&(0,l.jsxs)("div",{className:(0,s.cx)([m.collapseBody]),children:[(0,l.jsx)("div",{className:v}),(0,l.jsx)("div",{className:m.bodyContentWrapper,children:p})]})]})};h.displayName="Collapse"},47057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(52423),a=n(82897),i=n(68404),r=n(35008),o=n.n(r),l=n(16755),d=n(4645),c=n(45916);const u=["color","onChange","isClearable"];const h=(0,i.forwardRef)(((e,t)=>{let{color:n,onChange:s,isClearable:r=!1}=e,l=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const[h,p]=(0,i.useState)(n),[m,f]=(0,i.useState)(n),v=(0,i.useMemo)((()=>(0,a.debounce)(s,100)),[]);(0,i.useEffect)((()=>{const e=o()(n);e.isValid()&&n!==m&&(p(e.toString()),f(n))}),[n,m]);return(0,c.jsx)(d.I,Object.assign({},l,{value:h,onChange:e=>{const{value:t}=e.currentTarget;if(p(t),""===t&&r)return void v(t);const n=o()(t);n.isValid()&&v(n.toString())},onBlur:()=>{o()(h).isValid()||p(n)},addonBefore:(0,c.jsx)(g,{color:n}),ref:t}))}));h.displayName="ColorInput";const p=h,g=e=>{let{color:t}=e;const n=(0,l.wW)(m);return(0,c.jsx)("div",{className:(0,s.cx)(n,s.css`
          background-color: ${t};
        `)})},m=e=>s.css`
  height: 100%;
  width: ${4*e.spacing.gridSize}px;
  border-radius: ${e.shape.borderRadius()} 0 0 ${e.shape.borderRadius()};
  border: 1px solid ${e.colors.border.medium};
`},32933:(e,t,n)=>{"use strict";n.d(t,{sp:()=>v,zH:()=>f});var s=n(52423),a=n(68404),i=n(16755),r=n(50191),o=n(93406),l=n(5762),d=n(43259),c=n(33232),u=n(16944),h=n(15743),p=n(45916);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ColorPicker";return t=class extends a.Component{constructor(){super(...arguments),g(this,"pickerTriggerRef",(0,a.createRef)())}render(){const{theme:t,children:n,onChange:s}=this.props,i=b(t),r=a.createElement(e,Object.assign({},Object.assign({},this.props,{children:null}),{onChange:s}));return(0,p.jsx)(d.D,{content:r,hideAfter:300,children:(e,s,a)=>(0,p.jsxs)(p.Fragment,{children:[this.pickerTriggerRef.current&&(0,p.jsx)(l.J,Object.assign({},a,{referenceElement:this.pickerTriggerRef.current,wrapperClassName:i.colorPicker,onMouseLeave:s,onMouseEnter:e,onKeyDown:e=>(0,o.i)(e,s)})),n?n({ref:this.pickerTriggerRef,showColorPicker:e,hideColorPicker:s}):(0,p.jsx)(u.b,{ref:this.pickerTriggerRef,onClick:e,onMouseLeave:s,color:t.visualization.getColorByName(this.props.color||"#000000")})]})})}},g(t,"displayName",n),t},f=(0,i.HE)(m(c.h,"ColorPicker")),v=(0,i.HE)(m(h.j,"SeriesColorPicker")),b=(0,r.B)((e=>({colorPicker:s.css`
      position: absolute;
      z-index: ${e.zIndex.tooltip};
      color: ${e.colors.text.primary};
      max-width: 400px;
      font-size: ${e.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `})))},33232:(e,t,n)=>{"use strict";n.d(t,{h:()=>w});var s=n(52423),a=n(81699),i=n(68404),r=n(66876),o=n(16755),l=n(50191),d=n(16944),c=n(82897);function u(e,t){const n=new Array(e.length);for(let s=0;s<e.length;s++){const a=e.length-1-s;n[s]=t(e[a],a,e)}return n}var h=n(45916);const p=["hue","selectedColor","onColorSelect"];const g=e=>{let{hue:t,selectedColor:n,onColorSelect:s}=e,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const i=(0,c.upperFirst)(t.name),r=(0,o.wW)(m);return(0,h.jsxs)("div",{className:r.colorRow,children:[(0,h.jsx)("div",{className:r.colorLabel,children:i}),(0,h.jsx)("div",Object.assign({},a,{className:r.swatchRow,children:u(t.shades,(e=>(0,h.jsx)(d.b,{"aria-label":e.name,variant:e.primary?d.$.Large:d.$.Small,isSelected:e.name===n,color:e.color,onClick:()=>s(e.name)},e.name)))}))]})},m=e=>({colorRow:s.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${e.spacing(2)};
      padding: ${e.spacing(.5,0)};

      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,colorLabel:s.css`
      padding-left: ${e.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:s.css`
      display: flex;
      gap: ${e.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),f=e=>{let{color:t,onChange:n}=e;const s=(0,o.l4)(),a=(0,o.wW)(v),i=[];for(const e of s.visualization.hues)i.push((0,h.jsx)(g,{selectedColor:t,hue:e,onColorSelect:n},e.name));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:a.swatches,children:i}),(0,h.jsxs)("div",{className:a.extraColors,children:[(0,h.jsx)(d.b,{isSelected:"transparent"===t,color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>n("transparent")}),(0,h.jsx)(d.b,{isSelected:"text"===t,color:s.colors.text.primary,label:"Text color",onClick:()=>n("text")})]})]})},v=e=>({container:s.css`
      display: flex;
      flex-direction: column;
    `,extraColors:s.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1,0)};
    `,swatches:s.css`
      display: grid;
      flex-grow: 1;
    `});var b=n(62338);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends i.Component{constructor(e){super(e),x(this,"getTabClassName",(e=>{const{activePicker:t}=this.state;return`ColorPickerPopover__tab ${t===e&&"ColorPickerPopover__tab--active"}`})),x(this,"handleChange",(e=>{const{onChange:t,enableNamedColors:n,theme:s}=this.props;if(n)return t(e);t(r.asHexString(s.visualization.getColorByName(e)))})),x(this,"onTabChange",(e=>()=>this.setState({activePicker:e}))),x(this,"renderPicker",(()=>{const{activePicker:e}=this.state,{color:t}=this.props;switch(e){case"spectrum":return(0,h.jsx)(b.Z,{color:t,onChange:this.handleChange});case"palette":return(0,h.jsx)(f,{color:t,onChange:this.handleChange});default:return this.renderCustomPicker(e)}})),x(this,"renderCustomPicker",(e=>{const{customPickers:t,color:n,theme:s}=this.props;return t?i.createElement(t[e].tabComponent,{color:n,theme:s,onChange:this.handleChange}):null})),x(this,"renderCustomPickerTabs",(()=>{const{customPickers:e}=this.props;return e?(0,h.jsx)(h.Fragment,{children:Object.keys(e).map((t=>(0,h.jsx)("button",{className:this.getTabClassName(t),onClick:this.onTabChange(t),children:e[t].name},t)))}):null})),this.state={activePicker:"palette"}}render(){const{theme:e}=this.props,t=j(e);return(0,h.jsx)(a.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,h.jsxs)("div",{tabIndex:-1,className:t.colorPickerPopover,children:[(0,h.jsxs)("div",{className:t.colorPickerPopoverTabs,children:[(0,h.jsx)("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),children:"Colors"}),(0,h.jsx)("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),children:"Custom"}),this.renderCustomPickerTabs()]}),(0,h.jsx)("div",{className:t.colorPickerPopoverContent,children:this.renderPicker()})]})})}}const w=(0,o.HE)(y);w.displayName="ColorPickerPopover";const j=(0,l.B)((e=>({colorPickerPopover:s.css`
      border-radius: ${e.shape.borderRadius()};
      box-shadow: ${e.shadows.z3};
      background: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${e.spacing(1,0)};
        background: ${e.colors.background.secondary};
        color: ${e.colors.text.secondary};
        font-size: ${e.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.background.primary};
      }
    `,colorPickerPopoverContent:s.css`
      width: 246px;
      font-size: ${e.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${e.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:s.css`
      display: flex;
      width: 100%;
      border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
    `})))},16944:(e,t,n)=>{"use strict";n.d(t,{$:()=>h,b:()=>p});var s=n(52423),a=n(81699),i=n(68404),r=n(35008),o=n.n(r),l=n(25004),d=n(16755),c=n(45916);const u=["color","label","variant","isSelected","aria-label"];let h;!function(e){e.Small="small",e.Large="large"}(h||(h={}));const p=i.forwardRef(((e,t)=>{let{color:n,label:s,variant:i=h.Small,isSelected:r,"aria-label":o}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const m=(0,d.l4)(),{isFocusVisible:f,focusProps:v}=(0,a.Fx)(),b=g(m,i,n,f,r),x=!!s,y=`${o||s} color`;return(0,c.jsxs)("div",Object.assign({ref:t,className:b.wrapper,"data-testid":l.wl.components.ColorSwatch.name},p,{children:[x&&(0,c.jsx)("span",{className:b.label,children:s}),(0,c.jsx)("button",Object.assign({className:b.swatch},v,{"aria-label":y}))]}))})),g=(e,t,n,a,i)=>{const r=o()(n),l=t===h.Small?"16px":"32px";let d="none";return r.getAlpha()<.1&&(d=`2px solid ${e.colors.border.medium}`),{wrapper:(0,s.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,s.css)({marginRight:e.spacing(1)}),swatch:(0,s.css)({width:l,height:l,background:`${n}`,border:d,borderRadius:"50%",outlineOffset:"1px",outline:a?`2px solid  ${e.colors.primary.main}`:"none",boxShadow:i?`inset 0 0 0 2px ${n}, inset 0 0 0 4px ${e.colors.getContrastText(n)}`:"none",transition:e.transitions.create(["transform"],{duration:e.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};p.displayName="ColorSwatch"},15743:(e,t,n)=>{"use strict";n.d(t,{j:()=>d,q:()=>c});var s=n(52423),a=(n(68404),n(16755)),i=n(18083),r=n(33232),o=n(45916);const l=["yaxis","onToggleAxis","color"];const d=e=>{const t=(0,a.wW)(u),{yaxis:n,onToggleAxis:s,color:d}=e,c=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l),h=s?{yaxis:{name:"Y-Axis",tabComponent:()=>(0,o.jsx)(i.r,{label:"Use right y-axis",className:t.colorPickerAxisSwitch,labelClass:t.colorPickerAxisSwitchLabel,checked:2===n,onChange:()=>{s&&s()}},"yaxisSwitch")}}:void 0;return(0,o.jsx)(r.h,Object.assign({},c,{color:d||"#000000",customPickers:h}))},c=(0,a.HE)(d),u=()=>({colorPickerAxisSwitch:s.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:s.css`
      display: flex;
      flex-grow: 1;
    `})},62338:(e,t,n)=>{"use strict";n.d(t,{W:()=>p,Z:()=>g});var s=n(52423),a=n(68404),i=n(35206),r=n(30929),o=n(35008),l=n.n(o),d=n(66876),c=n(16755),u=n(47057),h=n(45916);const p=e=>({wrapper:s.css`
    flex-grow: 1;
  `,root:s.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${e.shape.borderRadius(1)} ${e.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${e.shape.borderRadius(1)} ${e.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${e.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${e.spacing(2)};
        width: ${e.spacing(2)};
      }
    }
  `,colorInput:s.css`
    margin-top: ${e.spacing(2)};
  `}),g=e=>{let{color:t,onChange:n}=e;const[s,o]=(0,a.useState)(t);(0,r.Z)((e=>{n(d.asHexString(g.visualization.getColorByName(e)))}),500,[s]);const g=(0,c.l4)(),m=(0,c.wW)(p),f=(0,a.useMemo)((()=>s.startsWith("rgba")?s:l()(g.visualization.getColorByName(t)).toRgbString()),[s,g,t]);return(0,h.jsxs)("div",{className:m.wrapper,children:[(0,h.jsx)(i.ef,{className:m.root,color:f,onChange:o}),(0,h.jsx)(u.Z,{theme:g,color:f,onChange:o,className:m.colorInput})]})}},54241:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(50191),o=n(8006),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends a.PureComponent{constructor(){super(...arguments),d(this,"mainButtonRef",a.createRef()),d(this,"confirmButtonRef",a.createRef()),d(this,"state",{showConfirm:!1}),d(this,"onClickButton",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!0},(()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()})),this.props.onClick&&this.props.onClick()})),d(this,"onClickCancel",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!1},(()=>{var e;null===(e=this.mainButtonRef.current)||void 0===e||e.focus()})),this.props.onCancel&&this.props.onCancel()})),d(this,"onConfirm",(e=>{e&&e.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}))}render(){const{theme:e,className:t,size:n,disabled:a,confirmText:i,confirmVariant:r,children:d}=this.props,c=h(e),u=(0,s.cx)(t,this.state.showConfirm?c.buttonHide:c.buttonShow,a&&c.buttonDisabled),p=(0,s.cx)(c.confirmButton,this.state.showConfirm?c.confirmButtonShow:c.confirmButtonHide),g=a?()=>{}:this.onClickButton;return(0,l.jsxs)("span",{className:c.buttonContainer,children:[(0,l.jsx)("div",{className:(0,s.cx)(a&&c.disabled),children:"string"==typeof d?(0,l.jsx)("span",{className:u,children:(0,l.jsx)(o.zx,{size:n,fill:"text",onClick:g,ref:this.mainButtonRef,children:d})}):(0,l.jsx)("span",{className:u,onClick:g,children:d})}),(0,l.jsxs)("span",{className:p,children:[(0,l.jsx)(o.zx,{size:n,variant:r,onClick:this.onConfirm,ref:this.confirmButtonRef,children:i}),(0,l.jsx)(o.zx,{size:n,fill:"text",onClick:this.onClickCancel,children:"Cancel"})]})]})}}const u=(0,i.HE)(c),h=(0,r.B)((e=>({buttonContainer:s.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:s.css`
      text-decoration: none;
      color: ${e.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:s.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:s.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:s.css`
      align-items: flex-start;
      background: ${e.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:s.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:s.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:s.css`
      cursor: not-allowed;
    `})));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},77772:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});n(68404);var s=n(8006),a=n(54241),i=n(45916);const r=e=>{let{size:t,disabled:n,onConfirm:r,"aria-label":o,closeOnConfirm:l}=e;return(0,i.jsx)(a.p,{confirmText:"Delete",confirmVariant:"destructive",size:t||"md",disabled:n,onConfirm:r,closeOnConfirm:l,children:(0,i.jsx)(s.zx,{"aria-label":o,variant:"destructive",icon:"times",size:t||"sm"})})}},2024:(e,t,n)=>{"use strict";n.d(t,{s:()=>h});var s=n(52423),a=n(68404),i=n(25004),r=n(54761),o=n(4645),l=n(16755),d=n(8006),c=n(78941),u=n(45916);const h=e=>{let{isOpen:t,title:n,body:h,description:g,confirmText:m,confirmVariant:f="destructive",confirmationText:v,dismissText:b="Cancel",dismissVariant:x="secondary",alternativeText:y,modalClass:w,icon:j="exclamation-triangle",onConfirm:S,onDismiss:C,onAlternative:k,confirmButtonVariant:N="destructive"}=e;const[O,I]=(0,a.useState)(Boolean(v)),T=(0,l.wW)(p),$=(0,a.useRef)(null);return(0,a.useEffect)((()=>{var e;t&&(null===(e=$.current)||void 0===e||e.focus())}),[t]),(0,u.jsxs)(c.u,{className:(0,s.cx)(T.modal,w),title:n,icon:j,isOpen:t,onDismiss:C,children:[(0,u.jsxs)("div",{className:T.modalText,children:[h,g?(0,u.jsx)("div",{className:T.modalDescription,children:g}):null,v?(0,u.jsx)("div",{className:T.modalConfirmationInput,children:(0,u.jsx)(r.Lh,{children:(0,u.jsx)(o.I,{placeholder:`Type ${v} to confirm`,onChange:e=>{I(0!==(null==v?void 0:v.localeCompare(e.currentTarget.value)))}})})}):null]}),(0,u.jsxs)(c.u.ButtonRow,{children:[(0,u.jsx)(d.zx,{variant:x,onClick:C,fill:"outline",children:b}),(0,u.jsx)(d.zx,{variant:N,onClick:S,disabled:O,ref:$,"aria-label":i.wl.pages.ConfirmModal.delete,children:m}),k?(0,u.jsx)(d.zx,{variant:"primary",onClick:k,children:y}):null]})]})},p=e=>({modal:s.css`
    width: 500px;
  `,modalText:(0,s.css)({fontSize:e.typography.h5.fontSize,color:e.colors.text.primary}),modalDescription:(0,s.css)({fontSize:e.typography.body.fontSize}),modalConfirmationInput:(0,s.css)({paddingTop:e.spacing(1)})})},33514:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var s=n(68404),a=n(9139),i=n(25004),r=n(16736),o=n(48717),l=n(45916);const d=s.memo((e=>{let{x:t,y:n,onClose:d,focusOnOpen:c=!0,renderMenuItems:u,renderHeader:h}=e;const p=(0,s.useRef)(null),[g,m]=(0,s.useState)({});(0,s.useLayoutEffect)((()=>{const e=p.current;if(e){const s=e.getBoundingClientRect(),a=5,i={right:window.innerWidth<t+s.width,bottom:window.innerHeight<s.bottom+s.height+a};m({position:"fixed",left:i.right?t-s.width-a:t-a,top:i.bottom?n-s.height-a:n+a})}}),[t,n]),(0,a.Z)(p,(()=>{null==d||d()}));const f=null==h?void 0:h(),v=null==u?void 0:u();return(0,l.jsx)(o.h_,{children:(0,l.jsx)(r.v,{header:f,ref:p,style:g,ariaLabel:i.wl.components.Menu.MenuComponent("Context"),onOpen:e=>{c&&e(0)},onClick:d,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),null==d||d())},children:v})})}));d.displayName="ContextMenu"},68105:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var s=n(68404),a=n(33514),i=n(45916);const r=e=>{let{children:t,renderMenuItems:n,focusOnOpen:r=!0}=e;const[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)({x:0,y:0});return(0,i.jsxs)(i.Fragment,{children:[t({openMenu:e=>{l(!0),c({x:e.pageX,y:e.pageY})}}),o&&(0,i.jsx)(a.x,{onClose:()=>l(!1),x:d.x,y:d.y,renderMenuItems:n,focusOnOpen:r})]})}},22222:(e,t,n)=>{"use strict";n.d(t,{$:()=>p,Z:()=>g});var s=n(52423),a=n(68404),i=n(20201),r=n(16755),o=n(9085),l=n.n(o),d=n(99500),c=n(45916);const u=e=>{let{children:t}=e;const[n,i]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!1),p=(0,a.useRef)(null),g=(0,a.useRef)(null),m=(0,r.wW)(h);return(0,a.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{e.target===p.current?i(!e.isIntersecting):e.target===g.current&&u(!e.isIntersecting)}))}));return[p,g].forEach((t=>{t.current&&e.observe(t.current)})),()=>e.disconnect()}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:(0,s.cx)(m.scrollIndicator,m.scrollTopIndicator,{[m.scrollIndicatorVisible]:n}),children:(0,c.jsx)(d.J,{className:l()(m.scrollIcon,m.scrollTopIcon),name:"angle-up"})}),(0,c.jsxs)("div",{className:m.scrollContent,children:[(0,c.jsx)("div",{ref:p}),t,(0,c.jsx)("div",{ref:g})]}),(0,c.jsx)("div",{className:(0,s.cx)(m.scrollIndicator,m.scrollBottomIndicator,{[m.scrollIndicatorVisible]:o}),children:(0,c.jsx)(d.J,{className:l()(m.scrollIcon,m.scrollBottomIcon),name:"angle-down"})})]})},h=e=>({scrollContent:(0,s.css)({flex:1,position:"relative"}),scrollIndicator:(0,s.css)({height:e.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:e.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,s.css)({background:`linear-gradient(0deg, transparent, ${e.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,s.css)({background:`linear-gradient(180deg, transparent, ${e.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,s.css)({opacity:1}),scrollIcon:(0,s.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,s.css)({top:0}),scrollBottomIcon:(0,s.css)({bottom:0})}),p=e=>{let{autoHide:t=!1,autoHideTimeout:n=200,setScrollTop:o,className:l,testId:d,autoHeightMin:h="0",autoHeightMax:p="100%",hideTracksWhenNotNeeded:g=!1,hideHorizontalTrack:f,hideVerticalTrack:v,scrollRefCallback:b,showScrollIndicators:x=!1,updateAfterMountMs:y,scrollTop:w,onScroll:j,children:S}=e;const C=(0,a.useRef)(null),k=(0,r.wW)(m);function N(e,t,n){return n.style&&t&&(n.style.display="none"),(0,c.jsx)("div",Object.assign({},n,{className:e}))}(0,a.useEffect)((()=>{C.current&&b&&b(C.current.view)}),[C,b]),(0,a.useEffect)((()=>{C.current&&null!=w&&C.current.scrollTop(w)}),[w]),(0,a.useEffect)((()=>{y&&setTimeout((()=>{const e=C.current;null!=e&&e.update&&e.update()}),y)}),[y]);const O=(0,a.useCallback)((e=>N("track-horizontal",f,e)),[f]),I=(0,a.useCallback)((e=>N("track-vertical",v,e)),[v]),T=(0,a.useCallback)((e=>(0,c.jsx)("div",Object.assign({},e,{className:"thumb-horizontal"}))),[]),$=(0,a.useCallback)((e=>(0,c.jsx)("div",Object.assign({},e,{className:"thumb-vertical"}))),[]),R=(0,a.useCallback)((e=>(0,c.jsx)("div",Object.assign({},e,{className:"scrollbar-view"}))),[]),P=(0,a.useCallback)((()=>{C.current&&o&&o(C.current.getValues())}),[o]);return(0,c.jsx)(i.ZP,{"data-testid":d,ref:C,className:(0,s.cx)(k.customScrollbar,l,{[k.scrollbarWithScrollIndicators]:x}),onScrollStop:P,autoHeight:!0,autoHide:t,autoHideTimeout:n,hideTracksWhenNotNeeded:g,autoHeightMax:p,autoHeightMin:h,renderTrackHorizontal:O,renderTrackVertical:I,renderThumbHorizontal:T,renderThumbVertical:$,renderView:R,onScroll:j,children:x?(0,c.jsx)(u,{children:S}):S})},g=p,m=e=>({customScrollbar:s.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${e.shape.borderRadius(2)};
        width: ${e.spacing(1)} !important;
        right: 0px;
        bottom: ${e.spacing(.25)};
        top: ${e.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${e.shape.borderRadius(2)};
        height: ${e.spacing(1)} !important;
        right: ${e.spacing(.25)};
        bottom: ${e.spacing(.25)};
        left: ${e.spacing(.25)};
      }
      .thumb-vertical {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:s.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},30873:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});n(68404);var s=n(8006),a=n(45916);function i(e){let{link:t,buttonProps:n}=e;return(0,a.jsx)("a",{href:t.href,target:t.target,rel:"noreferrer",onClick:t.onClick?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!t.onClick||(e.preventDefault(),t.onClick(e))}:void 0,children:(0,a.jsx)(s.zx,Object.assign({icon:"external-link-alt",variant:"primary",size:"sm"},n,{children:t.title}))})}},76920:(e,t,n)=>{"use strict";n.d(t,{v:()=>$});var s=n(52423),a=n(57706),i=n.n(a),r=n(68404),o=n(73934),l=n(44260),d=n(40246),c=n(57597),u=n(66358),h=n(66827),p=n(23766),g=n(55128),m=n(16755),f=n(22222),v=n(4645),b=n(48717),x=n(82897),y=n(16319),w=n(89645),j=n(45916);const S=["suggestions"];const C=e=>({list:s.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:s.css`
      background: ${e.colors.background.primary};
      width: 250px;
    `,item:s.css`
      background: none;
      padding: 2px 8px;
      color: ${e.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${e.colors.action.hover};
      }
    `,label:s.css`
      color: ${e.colors.text.secondary};
    `,activeItem:s.css`
      background: ${e.colors.background.secondary};
      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,itemValue:s.css`
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.size.sm};
    `}),k=e=>{let{suggestions:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,S);const s=(0,r.useRef)(null);(0,y.Z)(s,(()=>{n.onClose&&n.onClose()}));const a=(0,r.useMemo)((()=>(0,x.groupBy)(t,(e=>e.origin))),[t]),i=(0,m.wW)(C);return(0,j.jsx)("div",{ref:s,className:i.wrapper,children:Object.keys(a).map(((e,t)=>{const s=0===t?0:Object.keys(a).reduce(((e,n,s)=>s>=t?e:e+a[n].length),0);return(0,r.createElement)(N,Object.assign({},n,{suggestions:a[e],label:`${(0,x.capitalize)(e)}`,activeIndex:n.activeIndex,activeIndexOffset:s,key:e}))}))})};k.displayName="DataLinkSuggestions";const N=r.memo((e=>{let{activeIndex:t,activeIndexOffset:n,label:a,onClose:i,onSuggestionSelect:r,suggestions:o,activeRef:l}=e;const d=(0,m.wW)(C);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(w.a,{className:d.list,items:o,renderItem:(e,i)=>{const o=i+n===t;return(0,j.jsx)("div",{className:(0,s.cx)(d.item,o&&d.activeItem),ref:o?l:void 0,onClick:()=>{r(e)},title:e.documentation,children:(0,j.jsxs)("span",{className:d.itemValue,children:[(0,j.jsx)("span",{className:d.label,children:a})," ",e.label]})})}})})}));N.displayName="DataLinkSuggestionsList";class O{getBoundingClientRect(){const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){return t.parentElement.getBoundingClientRect()}return{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const I=[(0,g.Z)({onlyIn:e=>"code_block"===e.type,getSyntax:()=>"links"},Object.assign({},i().languages,{links:{builtInVariable:{pattern:/(\${\S+?})/}}}))],T=e=>({input:(0,v.H)({theme:e,invalid:!1}).input,editor:s.css`
    .token.builtInVariable {
      color: ${e.colors.success.text};
    }
    .token.variable {
      color: ${e.colors.primary.text};
    }
  `,suggestionsWrapper:s.css`
    box-shadow: ${e.shadows.z2};
  `,wrapperOverrides:s.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),$=(0,r.memo)((e=>{let{value:t,onChange:n,suggestions:a,placeholder:i="http://your-grafana.com/d/000000010/annotations"}=e;const g=(0,r.useRef)(null),v=(0,m.wW)(T),[x,y]=(0,r.useState)(!1),[w,S]=(0,r.useState)(0),[C,N]=(0,r.useState)((0,p.l1)(t)),$=(0,l.Z)(C),[R,P]=(0,r.useState)(0),D=(0,r.useRef)({showingSuggestions:x,suggestions:a,suggestionsIndex:w,linkUrl:C,onChange:n});D.current={showingSuggestions:x,suggestions:a,suggestionsIndex:w,linkUrl:C,onChange:n};const A=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e,t,n;P((e=A.current,t=w,(null!==(n=null==e?void 0:e.clientHeight)&&void 0!==n?n:0)*t))}),[w]);const M=(0,r.useMemo)((()=>new O),[]),L=r.useCallback(((e,t)=>{if(!D.current.showingSuggestions)return"="===e.key||"$"===e.key||32===e.keyCode&&e.ctrlKey?y(!0):t();switch(e.key){case"Backspace":case"Escape":return y(!1),S(0);case"Enter":return e.preventDefault(),E(D.current.suggestions[D.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":e.preventDefault();const n="ArrowDown"===e.key?1:-1;return S((e=>{return t=e+n,s=D.current.suggestions.length,t-s*Math.floor(t/s);var t,s}));default:return t()}}),[]);(0,r.useEffect)((()=>{$&&$.selection.isFocused&&!C.selection.isFocused&&D.current.onChange(d.Z.serialize(C))}),[C,$]);const F=r.useCallback((e=>{let{value:t}=e;N(t)}),[]),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.current;const n="$"!==d.Z.serialize(t.value).slice(-1);e.origin!==u.L.Template||e.value===h.W.includeVars?t.insertText(`${n?"$":""}{${e.value}}`):t.insertText(`\${${e.value}:queryparam}`),N(t.value),y(!1),S(0),D.current.onChange(d.Z.serialize(t.value))};return(0,j.jsx)("div",{className:v.wrapperOverrides,children:(0,j.jsx)("div",{className:"slate-query-field__wrapper",children:(0,j.jsxs)("div",{className:"slate-query-field",children:[x&&(0,j.jsx)(b.h_,{children:(0,j.jsx)(o.r,{referenceElement:M,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}],children:e=>{let{ref:t,style:n,placement:s}=e;return(0,j.jsx)("div",{ref:t,style:n,"data-placement":s,className:v.suggestionsWrapper,children:(0,j.jsx)(f.Z,{scrollTop:R,autoHeightMax:"300px",setScrollTop:e=>{let{scrollTop:t}=e;return P(t)},children:(0,j.jsx)(k,{activeRef:A,suggestions:D.current.suggestions,onSuggestionSelect:E,onClose:()=>y(!1),activeIndex:w})})})}})}),(0,j.jsx)(c.ML,{schema:p.Yi,ref:g,placeholder:i,value:D.current.linkUrl,onChange:F,onKeyDown:(e,t,n)=>L(e,n),plugins:I,className:(0,s.cx)(v.editor,v.input,s.css`
                  padding: 3px 8px;
                `)})]})})})}));$.displayName="DataLinkInput"},11549:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var s=n(52423),a=(n(68404),n(25004)),i=n(7886),r=n(68105),o=n(9655),l=n(21357),d=n(45916);const c=e=>{let{children:t,links:n,style:c}=e;const u=[{items:(0,i.R)(n),label:"Data links"}],h=u[0].items.length,p=()=>u.map(((e,t)=>(0,d.jsx)(o.k,{label:e.label,children:(e.items||[]).map((e=>(0,d.jsx)(l.s,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),g=s.css`
    cursor: context-menu;
  `;if(h>1)return(0,d.jsx)(r.z,{renderMenuItems:p,children:e=>{let{openMenu:n}=e;return t({openMenu:n,targetClassName:g})}});{const e=n()[0];return(0,d.jsx)("a",{href:e.href,onClick:e.onClick,target:e.target,title:e.title,style:Object.assign({},c,{overflow:"hidden",display:"flex",flexGrow:1}),"aria-label":a.wl.components.DataLinksContextMenu.singleLink,children:t({})})}}},21590:(e,t,n)=>{"use strict";n.d(t,{d:()=>w});var s=n(52423),a=n(82897),i=n(68404),r=n(16755),o=n(50191),l=n(8006),d=n(78941),c=n(65678),u=n(4645),h=n(70800),p=n(76920),g=n(45916);const m=e=>({listItem:s.css`
    margin-bottom: ${e.spacing()};
  `,infoText:s.css`
    padding-bottom: ${e.spacing(2)};
    margin-left: 66px;
    color: ${e.colors.text.secondary};
  `}),f=i.memo((e=>{let{index:t,value:n,onChange:s,suggestions:a,isLast:i}=e;const o=(0,r.wW)(m);return(0,g.jsxs)("div",{className:o.listItem,children:[(0,g.jsx)(c.g,{label:"Title",children:(0,g.jsx)(u.I,{value:n.title,onChange:e=>{s(t,Object.assign({},n,{title:e.target.value}))},placeholder:"Show details"})}),(0,g.jsx)(c.g,{label:"URL",children:(0,g.jsx)(p.v,{value:n.url,onChange:(e,a)=>{s(t,Object.assign({},n,{url:e}),a)},suggestions:a})}),(0,g.jsx)(c.g,{label:"Open in new tab",children:(0,g.jsx)(h.r,{value:n.targetBlank||!1,onChange:()=>{s(t,Object.assign({},n,{targetBlank:!n.targetBlank}))}})}),i&&(0,g.jsx)("div",{className:o.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})}));f.displayName="DataLinkEditor";const v=e=>{let{link:t,index:n,getSuggestions:s,onSave:a,onCancel:r}=e;const[o,c]=(0,i.useState)(t);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f,{value:o,index:n,isLast:!1,suggestions:s(),onChange:(e,t)=>{c(t)}}),(0,g.jsxs)(d.u.ButtonRow,{children:[(0,g.jsx)(l.zx,{variant:"secondary",onClick:()=>r(n),fill:"outline",children:"Cancel"}),(0,g.jsx)(l.zx,{onClick:()=>{a(n,o)},children:"Save"})]})]})};var b=n(23734);const x=e=>{let{link:t,onEdit:n,onRemove:a}=e;const i=(0,r.l4)(),o=y(i),{title:l="",url:d=""}=t,c=""!==l.trim(),u=""!==d.trim();return(0,g.jsxs)("div",{className:o.wrapper,children:[(0,g.jsxs)("div",{className:o.titleWrapper,children:[(0,g.jsx)("div",{className:(0,s.cx)(o.url,!u&&o.notConfigured),children:c?l:"Data link title not provided"}),(0,g.jsxs)("div",{className:o.actionButtons,children:[(0,g.jsx)(b.h,{name:"pen",onClick:n}),(0,g.jsx)(b.h,{name:"times",onClick:a})]})]}),(0,g.jsx)("div",{className:(0,s.cx)(o.url,!u&&o.notConfigured),title:d,children:u?d:"Data link url not provided"})]})},y=(0,o.B)((e=>({wrapper:s.css`
      margin-bottom: ${e.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:s.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:s.css`
      margin-left: ${e.spacing(1)};
      display: flex;
    `,notConfigured:s.css`
      font-style: italic;
    `,title:s.css`
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    `,url:s.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `}))),w=e=>{let{links:t,onChange:n,getSuggestions:s,data:o}=e;const c=(0,r.l4)(),[u,h]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),f=j(c),b=null!=t?t:[],y=null!==u,w=(e,t)=>{if(p){if(""===t.title.trim()&&""===t.url.trim())return m(!1),void h(null);h(null),m(!1)}const s=(0,a.cloneDeep)(b);s[e]=t,n(s),h(null)},S=e=>{p&&m(!1),h(null)};return(0,g.jsxs)(g.Fragment,{children:[b.length>0&&(0,g.jsx)("div",{className:f.wrapper,children:b.map(((e,t)=>(0,g.jsx)(x,{index:t,link:e,onChange:w,onEdit:()=>h(t),onRemove:()=>(e=>{const t=(0,a.cloneDeep)(b);t.splice(e,1),n(t)})(t),data:o},`${e.title}/${t}`)))}),y&&null!==u&&(0,g.jsx)(d.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{S()},children:(0,g.jsx)(v,{index:u,link:p?{title:"",url:""}:b[u],data:o,onSave:w,onCancel:S,getSuggestions:s})}),(0,g.jsx)(l.zx,{size:"sm",icon:"plus",onClick:()=>{let e=(0,a.cloneDeep)(b);h(e.length),m(!0)},variant:"secondary",children:"Add link"})]})},j=(0,o.B)((e=>({wrapper:s.css`
      margin-bottom: ${e.spacing(2)};
    `})))},47974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s,a=n(52423),i=(n(68404),n(16755)),r=n(99500),o=n(30873),l=n(45916);function d(e){let{links:t}=e;const n=(0,i.wW)(c);if(1===t.length)return(0,l.jsx)(o.k,{link:t[0]});const a=t.filter((e=>"_blank"===e.target)),d=t.filter((e=>"_self"===e.target));return(0,l.jsxs)(l.Fragment,{children:[d.map(((e,t)=>(0,l.jsx)(o.k,{link:e},t))),(0,l.jsxs)("div",{className:n.wrapper,children:[(0,l.jsx)("p",{className:n.externalLinksHeading,children:"External links"}),a.map(((e,t)=>(0,l.jsxs)("a",{href:e.href,target:e.target,className:n.externalLink,children:[s||(s=(0,l.jsx)(r.J,{name:"external-link-alt"})),e.title]},t)))]})]})}const c=e=>({wrapper:a.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${e.spacing(1)};
  `,externalLinksHeading:a.css`
    color: ${e.colors.text.secondary};
    font-weight: ${e.typography.fontWeightRegular};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,externalLink:a.css`
    color: ${e.colors.text.link};
    font-weight: ${e.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${e.spacing(1)};
    }
  `})},42147:(e,t,n)=>{"use strict";n.d(t,{O:()=>o});n(68404);var s,a=n(70800),i=n(46889),r=n(45916);function o(e){let{options:t,onOptionsChange:n}=e;return(0,r.jsxs)(r.Fragment,{children:[s||(s=(0,r.jsx)("h3",{className:"page-heading",children:"Alerting"})),(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)("div",{className:"gf-form-inline",children:(0,r.jsx)("div",{className:"gf-form",children:(0,r.jsx)(i._,{labelWidth:26,label:"Manage alerts via Alerting UI",children:(0,r.jsx)(a.x,{value:!1!==t.jsonData.manageAlerts,onChange:e=>n(Object.assign({},t,{jsonData:Object.assign({},t.jsonData,{manageAlerts:e.currentTarget.checked})}))})})})})})]})}},97073:(e,t,n)=>{"use strict";n.d(t,{W:()=>c});n(68404);var s,a=n(8006),i=n(46889),r=n(34117),o=n(4645),l=n(93194),d=n(45916);const c=e=>{let{hasCert:t,label:n,onChange:c,onClick:u,placeholder:h}=e;return(0,d.jsxs)(r.Z,{children:[(0,d.jsx)(i._,{label:n,labelWidth:14,disabled:t,children:t?s||(s=(0,d.jsx)(o.I,{type:"text",value:"configured",width:24})):(0,d.jsx)(l.K,{rows:7,onChange:c,placeholder:h,required:!0})}),t&&(0,d.jsx)(a.zx,{variant:"secondary",onClick:u,style:{marginLeft:4},children:"Reset"})]})}},88807:(e,t,n)=>{"use strict";n.d(t,{E:()=>z});var s=n(52423),a=n(68404),i=n(25004),r=n(16755),o=n(69173),l=n(5333),d=n(46889),c=n(86354),u=n(99500),h=n(70917),p=n(70800),g=n(89716),m=n(3822),f=n(45916);const v=e=>{let{dataSourceConfig:t,onChange:n}=e;const s=t.secureJsonData?t.secureJsonData.basicAuthPassword:"";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d._,{children:(0,f.jsx)(o.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:t.basicAuthUser,onChange:e=>n(Object.assign({},t,{basicAuthUser:e.currentTarget.value}))})}),(0,f.jsx)(d._,{children:(0,f.jsx)(m.c,{isConfigured:!(!t.secureJsonFields||!t.secureJsonFields.basicAuthPassword),value:s||"",inputWidth:18,labelWidth:10,onReset:()=>{n(Object.assign({},t,{secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:""}),secureJsonFields:Object.assign({},t.secureJsonFields,{basicAuthPassword:!1})}))},onChange:e=>{n(Object.assign({},t,{secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:e.currentTarget.value})}))}})})]})};var b,x,y=n(82897),w=n(50191),j=n(8006);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=(0,w.B)((()=>({layout:s.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `}))),k=e=>{let{header:t,onBlur:n,onChange:s,onRemove:a,onReset:i}=e;const r=C();return(0,f.jsxs)("div",{className:r.layout,children:[(0,f.jsx)(o.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:t.name||"",onChange:e=>s(Object.assign({},t,{name:e.target.value})),onBlur:n}),(0,f.jsx)(m.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:t.configured,value:t.value,labelWidth:5,inputWidth:t.configured?11:12,placeholder:"Header Value",onReset:()=>i(t.id),onChange:e=>s(Object.assign({},t,{value:e.target.value})),onBlur:n}),(0,f.jsx)(j.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:e=>a(t.id),children:b||(b=(0,f.jsx)(u.J,{name:"trash-alt"}))})]})};k.displayName="CustomHeaderRow";class N extends a.PureComponent{constructor(e){super(e),S(this,"state",{headers:[]}),S(this,"updateSettings",(()=>{const{headers:e}=this.state,t=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter((e=>{let[t,n]=e;return!t.startsWith("httpHeaderName")}))),n=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter((e=>{let[t,n]=e;return!t.startsWith("httpHeaderValue")})));for(const[s,a]of e.entries())t[`httpHeaderName${s+1}`]=a.name,a.configured||(n[`httpHeaderValue${s+1}`]=a.value);this.props.onChange(Object.assign({},this.props.dataSourceConfig,{jsonData:t,secureJsonData:n}))})),S(this,"onHeaderAdd",(()=>{this.setState((e=>({headers:[...e.headers,{id:(0,y.uniqueId)(),name:"",value:"",configured:!1}]})))})),S(this,"onHeaderChange",((e,t)=>{this.setState((n=>{let{headers:s}=n;return{headers:s.map(((n,s)=>e!==s?n:Object.assign({},t)))}}))})),S(this,"onHeaderReset",(e=>{this.setState((t=>{let{headers:n}=t;return{headers:n.map(((t,n)=>t.id!==e?t:Object.assign({},t,{value:"",configured:!1})))}}))})),S(this,"onHeaderRemove",(e=>{this.setState((t=>{let{headers:n}=t;return{headers:n.filter((t=>t.id!==e))}}),this.updateSettings)}));const{jsonData:t,secureJsonData:n,secureJsonFields:s}=this.props.dataSourceConfig;this.state={headers:Object.keys(t).sort().filter((e=>e.startsWith("httpHeaderName"))).map(((e,a)=>({id:(0,y.uniqueId)(),name:t[e],value:void 0!==n?n[e]:"",configured:s&&s[`httpHeaderValue${a+1}`]||!1})))}}render(){const{headers:e}=this.state;return(0,f.jsxs)("div",{className:"gf-form-group",children:[x||(x=(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)("h6",{children:"Custom HTTP Headers"})})),(0,f.jsx)("div",{children:e.map(((e,t)=>(0,f.jsx)(k,{header:e,onChange:e=>{this.onHeaderChange(t,e)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},e.id)))}),(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(j.zx,{variant:"secondary",icon:"plus",type:"button",onClick:e=>{this.onHeaderAdd()},children:"Add header"})})]})}}const O=e=>{let{dataSourceConfig:t,onChange:n,showForwardOAuthIdentityOption:s=!0}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"gf-form-inline",children:[(0,f.jsx)(d._,{label:"TLS Client Auth",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-tls-client-auth",value:t.jsonData.tlsAuth||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsAuth:e.currentTarget.checked}))})}),(0,f.jsx)(d._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-ca-cert",value:t.jsonData.tlsAuthWithCACert||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsAuthWithCACert:e.currentTarget.checked}))})})]}),(0,f.jsx)("div",{className:"gf-form-inline",children:(0,f.jsx)(d._,{label:"Skip TLS Verify",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-skip-tls-verify",value:t.jsonData.tlsSkipVerify||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsSkipVerify:e.currentTarget.checked}))})})}),s&&(0,f.jsx)("div",{className:"gf-form-inline",children:(0,f.jsx)(d._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-forward-oauth",value:t.jsonData.oauthPassThru||!1,onChange:e=>n(Object.assign({},t.jsonData,{oauthPassThru:e.currentTarget.checked}))})})})]})};var I,T,$,R,P,D,A,M,L=n(12427);const F=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],E={label:"Server (default)",value:"proxy"},V=()=>I||(I=(0,f.jsxs)("div",{className:"grafana-info-box m-t-2",children:[(0,f.jsxs)("p",{children:["Access mode controls how requests to the data source will be handled.",(0,f.jsxs)("strong",{children:[" ",(0,f.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]}),(0,f.jsx)("div",{className:"alert-title",children:"Server access mode (Default):"}),(0,f.jsx)("p",{children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."}),(0,f.jsx)("div",{className:"alert-title",children:"Browser access mode:"}),(0,f.jsx)("p",{children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})]})),z=e=>{const{defaultUrl:t,dataSourceConfig:n,onChange:m,showAccessOptions:b,sigV4AuthToggleEnabled:x,showForwardOAuthIdentityOption:y,azureAuthSettings:w,renderSigV4Editor:j}=e;let S;const[C,k]=(0,a.useState)(!1),I=(0,r.l4)(),z=(0,a.useCallback)((e=>{m(Object.assign({},n,e))}),[n,m]);switch(n.access){case"direct":S=(0,f.jsxs)(f.Fragment,{children:["Your access method is ",T||(T=(0,f.jsx)("em",{children:"Browser"})),", this means the URL needs to be accessible from the browser."]});break;case"proxy":S=(0,f.jsxs)(f.Fragment,{children:["Your access method is ",$||($=(0,f.jsx)("em",{children:"Server"})),", this means the URL needs to be accessible from the grafana backend/server."]});break;default:S="Specify a complete HTTP URL (for example http://your_server:8080)"}const B=(0,f.jsx)(h.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:F,value:F.filter((e=>e.value===n.access))[0]||E,onChange:e=>z({access:e.value})}),_=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(n.url),W=s.css`
    box-shadow: inset 0 0px 5px ${I.v1.palette.red};
  `,U=(0,s.cx)({"width-20":!0,[W]:!_}),H=(0,f.jsx)(c.I,{className:U,placeholder:t,value:n.url,"aria-label":i.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:e=>z({url:e.currentTarget.value})}),q=(null==w?void 0:w.azureAuthSupported)&&w.getAzureAuthEnabled(n)||!1;return(0,f.jsxs)("div",{className:"gf-form-group",children:[(0,f.jsxs)(f.Fragment,{children:[R||(R=(0,f.jsx)("h3",{className:"page-heading",children:"HTTP"})),(0,f.jsxs)("div",{className:"gf-form-group",children:[(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(o.W,{label:"URL",labelWidth:13,tooltip:S,inputEl:H})}),b&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"gf-form-inline",children:[(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(o.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:B})}),(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsxs)("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>k((e=>!e)),children:["Help ",(0,f.jsx)(u.J,{name:C?"angle-down":"angle-right",style:{marginBottom:0}})]})})]}),C&&(P||(P=(0,f.jsx)(V,{})))]}),"proxy"===n.access&&(0,f.jsxs)("div",{className:"gf-form-group",children:[(0,f.jsxs)("div",{className:"gf-form",children:[D||(D=(0,f.jsx)(l.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",children:"Allowed cookies"})),(0,f.jsx)(g.B,{tags:n.jsonData.keepCookies,width:40,onChange:e=>z({jsonData:Object.assign({},n.jsonData,{keepCookies:e})})})]}),(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(o.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:n.jsonData.timeout,onChange:e=>{z({jsonData:Object.assign({},n.jsonData,{timeout:parseInt(e.currentTarget.value,10)})})}})})]})]})]}),(0,f.jsxs)(f.Fragment,{children:[A||(A=(0,f.jsx)("h3",{className:"page-heading",children:"Auth"})),(0,f.jsxs)("div",{className:"gf-form-group",children:[(0,f.jsxs)("div",{className:"gf-form-inline",children:[(0,f.jsx)(d._,{label:"Basic auth",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-basic-auth",value:n.basicAuth,onChange:e=>{z({basicAuth:e.currentTarget.checked})}})}),(0,f.jsx)(d._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-with-credentials",value:n.withCredentials,onChange:e=>{z({withCredentials:e.currentTarget.checked})}})})]}),(null==w?void 0:w.azureAuthSupported)&&(0,f.jsx)("div",{className:"gf-form-inline",children:(0,f.jsx)(d._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-azure-auth",value:q,onChange:e=>{z(w.setAzureAuthEnabled(n,e.currentTarget.checked))}})})}),x&&(0,f.jsx)("div",{className:"gf-form-inline",children:(0,f.jsx)(d._,{label:"SigV4 auth",labelWidth:26,children:(0,f.jsx)(p.x,{id:"http-settings-sigv4-auth",value:n.jsonData.sigV4Auth||!1,onChange:e=>{z({jsonData:Object.assign({},n.jsonData,{sigV4Auth:e.currentTarget.checked})})}})})}),"proxy"===n.access&&(0,f.jsx)(O,{dataSourceConfig:n,onChange:e=>z({jsonData:e}),showForwardOAuthIdentityOption:y})]}),n.basicAuth&&(0,f.jsxs)(f.Fragment,{children:[M||(M=(0,f.jsx)("h6",{children:"Basic Auth Details"})),(0,f.jsx)("div",{className:"gf-form-group",children:(0,f.jsx)(v,Object.assign({},e))})]}),(null==w?void 0:w.azureAuthSupported)&&q&&w.azureSettingsUI&&(0,f.jsx)(w.azureSettingsUI,{dataSourceConfig:n,onChange:m}),n.jsonData.sigV4Auth&&x&&j,(n.jsonData.tlsAuth||n.jsonData.tlsAuthWithCACert)&&(0,f.jsx)(L.s,{dataSourceConfig:n,onChange:m}),"proxy"===n.access&&(0,f.jsx)(N,{dataSourceConfig:n,onChange:m})]})]})}},12427:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var s,a=n(52423),i=(n(68404),n(69173)),r=n(99500),o=n(21888),l=n(97073),d=n(45916);const c=e=>{let{dataSourceConfig:t,onChange:n}=e;const c=t.secureJsonFields&&t.secureJsonFields.tlsCACert,u=t.secureJsonFields&&t.secureJsonFields.tlsClientCert,h=t.secureJsonFields&&t.secureJsonFields.tlsClientKey,p=t.jsonData&&t.jsonData.serverName,g=e=>s=>{s.preventDefault();const a=Object.assign({},t.secureJsonFields);a[e]=!1,n(Object.assign({},t,{secureJsonFields:a}))},m=e=>s=>{const a=Object.assign({},t.secureJsonData);a[e]=s.currentTarget.value,n(Object.assign({},t,{secureJsonData:a}))};return(0,d.jsxs)("div",{className:"gf-form-group",children:[(0,d.jsxs)("div",{className:(0,a.cx)("gf-form",a.css`
            align-items: baseline;
          `),children:[s||(s=(0,d.jsx)("h6",{children:"TLS/SSL Auth Details"})),(0,d.jsx)(o.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info",children:(0,d.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,d.jsx)(r.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})})]}),(0,d.jsxs)("div",{children:[t.jsonData.tlsAuthWithCACert&&(0,d.jsx)(l.W,{hasCert:!!c,onChange:m("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:g("tlsCACert")}),t.jsonData.tlsAuth&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"gf-form",children:(0,d.jsx)(i.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&t.jsonData.serverName,onChange:e=>{const s=Object.assign({},t.jsonData,{serverName:e.currentTarget.value});n(Object.assign({},t,{jsonData:s}))}})}),(0,d.jsx)(l.W,{hasCert:!!u,label:"Client Cert",onChange:m("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:g("tlsClientCert")}),(0,d.jsx)(l.W,{hasCert:!!h,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:m("tlsClientKey"),onClick:g("tlsClientKey")})]})]})]})}},74936:(e,t,n)=>{"use strict";n.d(t,{M:()=>p});var s,a,i=n(52423),r=n(68404),o=n(41644),l=n(16755),d=n(55910),c=n(99500),u=n(30166),h=n(45916);const p=(0,r.memo)((e=>{const t=(0,l.wW)(m),{isOpen:n,onClose:s}=e;return n?(0,h.jsx)(d.L,{useCapture:!0,includeButtonPress:!1,onClick:s,children:(0,h.jsx)("div",{className:t.modal,"data-testid":"date-picker",children:(0,h.jsx)(g,Object.assign({},e))})}):null}));p.displayName="DatePicker";const g=(0,r.memo)((e=>{let{value:t,minDate:n,onChange:i}=e;const r=(0,l.wW)(u.mg);return(0,h.jsx)(o.ZP,{className:r.body,tileClassName:r.title,value:t||new Date,minDate:n,nextLabel:s||(s=(0,h.jsx)(c.J,{name:"angle-right"})),prevLabel:a||(a=(0,h.jsx)(c.J,{name:"angle-left"})),onChange:e=>{Array.isArray(e)||i(e)},locale:"en"})}));g.displayName="Body";const m=e=>({modal:i.css`
      z-index: ${e.zIndex.modal};
      position: absolute;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${e.colors.text.disabled};
      }
    `})},65932:(e,t,n)=>{"use strict";n.d(t,{d:()=>u});var s=n(52423),a=n(68404),i=n(88246),r=n(16755),o=n(4645),l=n(74936),d=n(45916);const c=["value","minDate","onChange","closeOnSelect","placeholder"];const u=e=>{let{value:t,minDate:n,onChange:s,closeOnSelect:u,placeholder:p="Date"}=e,g=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const[m,f]=a.useState(!1),v=(0,r.wW)(h);return(0,d.jsxs)("div",{className:v.container,children:[(0,d.jsx)(o.I,Object.assign({type:"text",autoComplete:"off",placeholder:p,value:t?(b=t,(0,i.CQ)(b).format("L")):t,onClick:()=>f(!0),onChange:e=>{""===e.target.value&&s("")},className:v.input},g)),(0,d.jsx)(l.M,{isOpen:m,value:t&&"string"!=typeof t?t:(0,i.CQ)().toDate(),minDate:n,onChange:e=>{s(e),u&&f(!1)},onClose:()=>f(!1)})]});var b},h=()=>({container:s.css`
      position: relative;
    `,input:s.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},73334:(e,t,n)=>{"use strict";n.d(t,{x:()=>O});var s=n(52423),a=n(68404),i=n(41644),r=n(16500),o=n(6432),l=n(88246),d=n(55910),c=n(48717),u=n(8006),h=n(46889),p=n(4645),g=n(99500),m=n(54761),f=n(16755),v=n(18714),b=n(62835),x=n(30166),y=n(42914),w=n(12482);function j(e,t,n){if((0,l.v9)(e))return e.isValid();if(y.isMathString(e))return y.isValid(e);return(0,w.J)(e,{roundUp:t,timeZone:n}).isValid()}var S,C,k=n(45916);const N=e=>e.stopPropagation(),O=e=>{let{date:t,maxDate:n,label:s,onChange:i}=e;const[o,l]=(0,a.useState)(!1),u=(0,f.l4)(),{modalBackdrop:h}=(0,v.J)(u),p=(0,r.Z)(`(min-width: ${u.breakpoints.values.lg}px)`),g=(0,f.wW)($),m=(0,a.useCallback)((e=>{l(!1),i(e)}),[i]),b=(0,a.useCallback)((e=>{e.preventDefault(),l(!0)}),[l]);return(0,k.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,k.jsx)(I,{date:t,onChange:i,isFullscreen:p,onOpen:b,label:s}),o?p?(0,k.jsx)(d.L,{onClick:()=>l(!1),children:(0,k.jsx)(T,{date:t,onChange:m,isFullscreen:!0,onClose:()=>l(!1),maxDate:n})}):(0,k.jsx)(c.h_,{children:(0,k.jsxs)(d.L,{onClick:()=>l(!1),children:[(0,k.jsx)("div",{className:g.modal,onClick:N,children:(0,k.jsx)(T,{date:t,onChange:m,isFullscreen:!1,onClose:()=>l(!1)})}),(0,k.jsx)("div",{className:h,onClick:N})]})}):null]})},I=e=>{let{date:t,label:n,onChange:i,isFullscreen:r,onOpen:d}=e;const[c,g]=(0,a.useState)((()=>({value:t?(0,o.dq)(t):(0,o.dq)((0,l.CQ)()),invalid:!1})));(0,a.useEffect)((()=>{t&&g({invalid:!j((0,o.dq)(t)),value:(0,l.v9)(t)?(0,o.dq)(t):t})}),[t]);const m=(0,a.useCallback)((e=>{const t=!j(e.currentTarget.value);g({value:e.currentTarget.value,invalid:t})}),[]),f=(0,a.useCallback)((e=>{r&&d(e)}),[r,d]),v=(0,a.useCallback)((()=>{(0,l.v9)(c.value)&&i((0,l.CQ)(c.value))}),[c.value,i]),b=(0,k.jsx)(u.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:d});return(0,k.jsx)(h._,{label:n,onClick:N,invalid:!(!c.value||!c.invalid),className:s.css`
        margin-bottom: 0;
      `,children:(0,k.jsx)(p.I,{onClick:N,onChange:m,addonAfter:b,value:c.value,onFocus:f,onBlur:v,"data-testid":"date-time-input",placeholder:"Select date/time"})})},T=e=>{let{date:t,onClose:n,onChange:r,isFullscreen:o,maxDate:d}=e;const c=(0,f.wW)(x.mg),h=(0,f.wW)($),[p,v]=(0,a.useState)((()=>t&&t.isValid()?t.toDate():new Date)),y=(0,a.useCallback)((e=>{Array.isArray(e)||v((t=>(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e)))}),[]),w=(0,a.useCallback)((e=>{v(e.toDate())}),[]);return(0,k.jsxs)("div",{className:(0,s.cx)(h.container,{[h.fullScreen]:o}),onClick:N,children:[(0,k.jsx)(i.ZP,{next2Label:null,prev2Label:null,value:p,nextLabel:S||(S=(0,k.jsx)(g.J,{name:"angle-right"})),nextAriaLabel:"Next month",prevLabel:C||(C=(0,k.jsx)(g.J,{name:"angle-left"})),prevAriaLabel:"Previous month",onChange:y,locale:"en",className:c.body,tileClassName:c.title,maxDate:d}),(0,k.jsx)("div",{className:h.time,children:(0,k.jsx)(b.y,{showSeconds:!0,onChange:w,value:(0,l.CQ)(p)})}),(0,k.jsxs)(m.Lh,{children:[(0,k.jsx)(u.zx,{type:"button",onClick:()=>r((0,l.CQ)(p)),children:"Apply"}),(0,k.jsx)(u.zx,{variant:"secondary",type:"button",onClick:n,children:"Cancel"})]})]})},$=e=>({container:s.css`
    padding: ${e.spacing(1)};
    border: 1px ${e.colors.border.weak} solid;
    border-radius: ${e.shape.borderRadius(1)};
    background-color: ${e.colors.background.primary};
    z-index: ${e.zIndex.modal};
  `,fullScreen:s.css`
    position: absolute;
  `,time:s.css`
    margin-bottom: ${e.spacing(2)};
  `,modal:s.css`
    position: fixed;
    top: 25%;
    left: 25%;
    width: 100%;
    z-index: ${e.zIndex.modal};
    max-width: 280px;
  `})},7567:(e,t,n)=>{"use strict";n.d(t,{x:()=>P});var s=n(52423),a=n(68404),i=n(11979),r=n(16755),o=n(60192),l=n(8006),d=n(55910),c=n(22222),u=n(65678),h=n(99500),p=n(4645),g=n(48717),m=n(21888),f=n(68237),v=n(37583),b=n(76560);const x=/^now$|^now\-(\d{1,10})([wdhms])$/,y=e=>({from:S(e.from),to:S(e.to)}),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();if(!j(e))return{isValid:!1,errorMessage:"Value not in relative time format."};const n=S(e);return n>Math.ceil(t/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}},j=e=>x.test(e),S=e=>{const t=x.exec(e);if(!t||3!==t.length)return 0;const[,n,s]=t,a=parseInt(n,10);return isNaN(a)?0:a*C[s]},C={w:604800,d:86400,h:3600,m:60,s:1},k=e=>e<=0?"now":e>=C.w&&e%C.w==0?`now-${e/C.w}w`:e>=C.d&&e%C.d==0?`now-${e/C.d}d`:e>=C.h&&e%C.h==0?`now-${e/C.h}h`:e>=C.m&&e%C.m==0?`now-${e/C.m}m`:`now-${e}s`;var N,O,I,T,$=n(45916);const R=b.r.filter((e=>j(e.from)));function P(e){const{timeRange:t,onChange:n}=e,[s,b]=(0,a.useState)(!1),x=(0,a.useCallback)((()=>b(!1)),[]),j=(e=>{const t=k(e.from),n=k(e.to);return{from:t,to:n,display:`${t} to ${n}`}})(t),[S,C]=(0,a.useState)({value:j.from,validation:w(j.from)}),[I,T]=(0,a.useState)({value:j.to,validation:w(j.to)}),[P,A]=(0,a.useState)(null),[L,F]=(0,a.useState)(null),E=(0,i.D)(P,L,{placement:"auto-start"}),V=(0,r.wW)(M(S.validation.errorMessage,I.validation.errorMessage)),z=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),b(!s)}),[s]);return(0,$.jsxs)("div",{className:V.container,ref:A,children:[(0,$.jsxs)("button",{className:V.pickerInput,onClick:z,children:[(0,$.jsx)("span",{className:V.clockIcon,children:N||(N=(0,$.jsx)(h.J,{name:"clock-nine"}))}),(0,$.jsxs)("span",{children:[j.from," to ",j.to]}),(0,$.jsx)("span",{className:V.caretIcon,children:(0,$.jsx)(h.J,{name:s?"angle-up":"angle-down",size:"lg"})})]}),s&&(0,$.jsx)(g.h_,{children:(0,$.jsx)(d.L,{includeButtonPress:!1,onClick:x,children:(0,$.jsx)("div",Object.assign({className:V.content,ref:F,style:E.styles.popper},E.attributes,{children:(0,$.jsxs)("div",{className:V.body,children:[(0,$.jsx)(c.Z,{className:V.leftSide,hideHorizontalTrack:!0,children:(0,$.jsx)(v.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:R,onChange:e=>{const t=y(e);t&&(x(),C(Object.assign({},S,{value:e.from})),T(Object.assign({},I,{value:e.to})),n(t))},value:j})}),(0,$.jsxs)("div",{className:V.rightSide,children:[(0,$.jsx)("div",{className:V.title,children:O||(O=(0,$.jsx)(f.r,{children:(0,$.jsx)(m.u,{content:(0,$.jsx)(D,{}),placement:"bottom",theme:"info",children:(0,$.jsx)("div",{children:(0,$.jsxs)(o.c,{i18nKey:"time-picker.time-range.specify",children:["Specify time range ",(0,$.jsx)(h.J,{name:"info-circle"})]})})})}))}),(0,$.jsx)(u.g,{label:"From",invalid:!S.validation.isValid,error:S.validation.errorMessage,children:(0,$.jsx)(p.I,{onClick:e=>e.stopPropagation(),onBlur:()=>C(Object.assign({},S,{validation:w(S.value)})),onChange:e=>C(Object.assign({},S,{value:e.currentTarget.value})),value:S.value})}),(0,$.jsx)(u.g,{label:"To",invalid:!I.validation.isValid,error:I.validation.errorMessage,children:(0,$.jsx)(p.I,{onClick:e=>e.stopPropagation(),onBlur:()=>T(Object.assign({},I,{validation:w(I.value)})),onChange:e=>T(Object.assign({},I,{value:e.currentTarget.value})),value:I.value})}),(0,$.jsx)(l.zx,{"aria-label":"TimePicker submit button",onClick:e=>{if(e.preventDefault(),!I.validation.isValid||!S.validation.isValid)return;const t=y({from:S.value,to:I.value,display:""});t&&(n(t),b(!1))},children:"Apply time range"})]})]})}))})})]})}const D=()=>{const e=(0,r.wW)(A);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{className:e.supported,children:["Supported formats: ",(0,$.jsx)("code",{className:e.tooltip,children:"now-[digit]s/m/h/d/w"})]}),I||(I=(0,$.jsx)("div",{children:"Example: to select a time range from 10 minutes ago to now"})),(0,$.jsx)("code",{className:e.tooltip,children:"From: now-10m To: now"}),(0,$.jsxs)("div",{className:e.link,children:["For more information see"," ",T||(T=(0,$.jsxs)("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/",children:["docs ",(0,$.jsx)(h.J,{name:"external-link-alt"})]})),"."]})]})},A=e=>({supported:s.css`
    margin-bottom: ${e.spacing(1)};
  `,tooltip:s.css`
    margin: 0;
  `,link:s.css`
    margin-top: ${e.spacing(1)};
  `}),M=(e,t)=>n=>{const a=(0,p.H)({theme:n,invalid:!1}),i=250+L(n,e)+L(n,t);return{container:s.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,s.cx)(a.input,a.wrapper,s.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${n.spacing.gridSize*n.components.height.md-2}px;
      `),caretIcon:(0,s.cx)(a.suffix,s.css`
        position: relative;
        margin-left: ${n.spacing(.5)};
      `),clockIcon:(0,s.cx)(a.prefix,s.css`
        position: relative;
        margin-right: ${n.spacing(.5)};
      `),content:s.css`
      background: ${n.colors.background.primary};
      box-shadow: ${n.shadows.z3};
      position: absolute;
      z-index: ${n.zIndex.dropdown};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${n.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:s.css`
      display: flex;
      height: ${i}px;
    `,description:s.css`
      color: ${n.colors.text.secondary};
      font-size: ${n.typography.size.sm};
    `,leftSide:s.css`
      width: 50% !important;
      border-right: 1px solid ${n.colors.border.medium};
    `,rightSide:s.css`
      width: 50%;
      padding: ${n.spacing(1)};
    `,title:s.css`
      margin-bottom: ${n.spacing(1)};
    `}};function L(e,t){return t?t.length>34?6.5*e.spacing.gridSize:4*e.spacing.gridSize:0}},62835:(e,t,n)=>{"use strict";n.d(t,{y:()=>h});var s,a=n(52423),i=n(63960),r=(n(68404),n(88246)),o=n(16755),l=n(99500),d=n(58906),c=n(50578),u=n(45916);const h=e=>{let{minuteStep:t=1,showHour:n=!0,showSeconds:s=!1,onChange:l,value:d,size:h="auto",disabled:m}=e;const f=(0,o.wW)(g);return(0,u.jsx)(i.Z,{className:(0,a.cx)((0,c.ht)()[h],f.input),popupClassName:f.picker,defaultValue:(0,r.C_)(),onChange:e=>l((0,r.CQ)(e)),allowEmpty:!1,showSecond:s,value:(0,r.C_)(d),showHour:n,minuteStep:t,inputIcon:(0,u.jsx)(p,{wrapperStyle:f.caretWrapper}),disabled:m})},p=e=>{let{wrapperStyle:t=""}=e;return(0,u.jsx)("div",{className:t,children:s||(s=(0,u.jsx)(l.J,{name:"angle-down"}))})},g=e=>{const t=e.components.input.background,n=e.v1.palette.black,s=e.colors.background.secondary,i=e.shape.borderRadius(1),r=e.components.input.borderColor;return{caretWrapper:a.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${e.colors.text.secondary};
    `,picker:a.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${t};
        border-color: ${r};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${e.v1.palette.orange};
            border-radius: ${i};
          }

          &:hover {
            background: ${s};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${n};
        background-color: ${t};
        border-color: ${r};
        border-radius: ${i};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${t};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:a.css`
      .rc-time-picker-input {
        background-color: ${t};
        border-radius: ${i};
        border-color: ${r};
        height: ${e.spacing(4)};

        &:focus {
          ${(0,d.focusCss)(e)}
        }

        &:disabled {
          background-color: ${e.colors.action.disabledBackground};
          color: ${e.colors.action.disabledText};
          border: 1px solid ${e.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},38942:(e,t,n)=>{"use strict";n.d(t,{K:()=>y});var s=n(52423),a=n(68404),i=n(42914),r=n(88246),o=n(12717),l=n(25004),d=n(50191),c=n(16755),u=n(55910),h=n(99500),p=n(4645),g=n(38424),m=n(37006),f=n(76560),v=n(45916);const b=e=>i.isValid(e.from)&&i.isValid(e.to),x=()=>{},y=e=>{let{value:t,onChange:n,onChangeTimeZone:s=x,clearable:i,hideTimeZone:d=!0,timeZone:p="browser",placeholder:y="Select time range",isReversed:j=!0,hideQuickRanges:S=!1,disabled:C=!1}=e;const[k,N]=(0,a.useState)(!1),O=(0,c.l4)(),I=w(O,C),T=()=>{N(!1)};return(0,v.jsxs)("div",{className:I.container,children:[(0,v.jsxs)("button",{type:"button",className:I.pickerInput,"aria-label":l.wl.components.TimePicker.openButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),C||N(!k)},children:[b(t)?(0,v.jsx)(g.s,{value:t,timeZone:p}):(0,v.jsx)("span",{className:I.placeholder,children:y}),!C&&(0,v.jsxs)("span",{className:I.caretIcon,children:[b(t)&&i&&(0,v.jsx)(h.J,{className:I.clearIcon,name:"times",size:"lg",onClick:e=>{e.stopPropagation();const t=(0,r.CQ)(null),s=(0,r.CQ)(null);n({from:t,to:s,raw:{from:t,to:s}})}}),(0,v.jsx)(h.J,{name:k?"angle-up":"angle-down",size:"lg"})]})]}),k&&(0,v.jsx)(u.L,{includeButtonPress:!1,onClick:T,children:(0,v.jsx)(m.x,{timeZone:p,value:b(t)?t:(0,o.JK)(),onChange:e=>{T(),n(e)},quickOptions:f.r,onChangeTimeZone:s,className:I.content,hideTimeZone:d,isReversed:j,hideQuickRanges:S})})]})},w=(0,d.B)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,p.H)({theme:e,invalid:!1});return{container:s.css`
      display: flex;
      position: relative;
    `,content:s.css`
      margin-left: 0;
    `,pickerInput:(0,s.cx)(n.input,t&&n.inputDisabled,n.wrapper,s.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${4*e.spacing.gridSize-2}px;
      `),caretIcon:(0,s.cx)(n.suffix,s.css`
        position: relative;
        top: -1px;
        margin-left: ${e.spacing(.5)};
      `),clearIcon:s.css`
      margin-right: ${e.spacing(.5)};
      &:hover {
        color: ${e.colors.text.maxContrast};
      }
    `,placeholder:s.css`
      color: ${e.colors.text.disabled};
      opacity: 1;
    `}}))},38424:(e,t,n)=>{"use strict";n.d(t,{X:()=>k,s:()=>I});var s,a,i=n(52423),r=n(99510),o=n(81699),l=n(6665),d=n(68404),c=n(88246),u=n(6432),h=n(25214),p=n(85699),g=n(42914),m=n(25004),f=n(16755),v=n(60192),b=n(98817),x=n(18714),y=n(1696),w=n(21888),j=n(37006),S=n(76560),C=n(45916);function k(e){const[t,n]=(0,d.useState)(!1),{value:s,onMoveBackward:a,onMoveForward:u,onZoom:h,timeZone:p,fiscalYearStartMonth:g,timeSyncButton:k,isSynced:R,history:P,onChangeTimeZone:D,onChangeFiscalYearStartMonth:A,hideQuickRanges:M,widthOverride:L,isOnCanvas:F}=e,E=(0,d.createRef)(),{overlayProps:V,underlayProps:z}=(0,l.Ir)({onClose:()=>{n(!1)},isDismissable:!0,isOpen:t},E),{dialogProps:B}=(0,r.R)({},E),_=(0,f.l4)(),W=(0,f.wW)($),{modalBackdrop:U}=(0,x.J)(_),H=(0,c.v9)(s.raw.from)||(0,c.v9)(s.raw.to),q=R?"active":F?"canvas":"default",Z=T(s,p);return(0,C.jsxs)(b.h,{className:W.container,children:[H&&(0,C.jsx)(y.h,{"aria-label":(0,v.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:q,onClick:a,icon:"angle-left",narrow:!0}),(0,C.jsx)(w.u,{content:(0,C.jsx)(O,{timeRange:s,timeZone:p}),placement:"bottom",interactive:!0,children:(0,C.jsx)(y.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,v.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Z}),"aria-controls":"TimePickerContent",onClick:e=>{e.stopPropagation(),e.preventDefault(),n(!t)},icon:"clock-nine",isOpen:t,variant:q,children:(0,C.jsx)(I,Object.assign({},e))})}),t&&(0,C.jsxs)("div",{children:[(0,C.jsx)("div",Object.assign({role:"presentation",className:(0,i.cx)(U,W.backdrop)},z)),(0,C.jsx)(o.MT,{contain:!0,autoFocus:!0,children:(0,C.jsx)("section",Object.assign({className:W.content,ref:E},V,B,{children:(0,C.jsx)(j.x,{timeZone:p,fiscalYearStartMonth:g,value:s,onChange:t=>{e.onChange(t),n(!1)},quickOptions:S.r,history:P,showHistory:!0,widthOverride:L,onChangeTimeZone:D,onChangeFiscalYearStartMonth:A,hideQuickRanges:M})}))})]}),k,H&&(0,C.jsx)(y.h,{"aria-label":(0,v.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:u,icon:"angle-right",narrow:!0,variant:q}),(0,C.jsx)(w.u,{content:N,placement:"bottom",children:(0,C.jsx)(y.h,{"aria-label":(0,v.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:h,icon:"search-minus",variant:q})})]})}k.displayName="TimeRangePicker";const N=()=>(0,C.jsx)(C.Fragment,{children:s||(s=(0,C.jsxs)(v.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip",children:["Time range zoom out ",(0,C.jsx)("br",{})," CTRL+Z"]}))}),O=e=>{let{timeRange:t,timeZone:n}=e;const s=(0,f.wW)(R);return(0,C.jsxs)(C.Fragment,{children:[(0,u.dq)(t.from,{timeZone:n}),a||(a=(0,C.jsx)("div",{className:"text-center",children:(0,C.jsx)(v.c,{i18nKey:"time-picker.range-picker.to",children:"to"})})),(0,u.dq)(t.to,{timeZone:n}),(0,C.jsx)("div",{className:"text-center",children:(0,C.jsx)("span",{className:s.utc,children:(0,h.Vs)(n)})})]})},I=(0,d.memo)((e=>{let{hideText:t,value:n,timeZone:s}=e;const a=(0,f.wW)(R);return t?null:(0,C.jsxs)("span",{className:a.container,children:[(0,C.jsx)("span",{children:T(n,s)}),(0,C.jsx)("span",{className:a.utc,children:p.describeTimeRangeAbbreviation(n,s)})]})}));I.displayName="TimePickerButtonLabel";const T=(e,t)=>{const n={to:g.isMathString(e.raw.to)?e.raw.to:e.to,from:g.isMathString(e.raw.from)?e.raw.from:e.from};return p.describeTimeRange(n,t)},$=e=>({container:i.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,i.css)({display:"none",[e.breakpoints.down("sm")]:{display:"block"}}),content:(0,i.css)({position:"absolute",right:0,top:"116%",zIndex:e.zIndex.dropdown,[e.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:e.zIndex.modal}})}),R=e=>({container:i.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:i.css`
      color: ${e.v1.palette.orange};
      font-size: ${e.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${e.typography.fontWeightMedium};
    `})},30166:(e,t,n)=>{"use strict";n.d(t,{mg:()=>m,uT:()=>p});var s,a,i=n(52423),r=n(68404),o=n(41644),l=n(88246),d=n(12482),c=n(16755),u=n(99500),h=n(45916);function p(e){let{onChange:t,from:n,to:i,timeZone:p}=e;const f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const s=e.toDate(),a=t.toDate(),i=(0,l.CQ)(s).isValid()?s:n,r=(0,l.CQ)(a).isValid()?a:n;if(i>r)return[r,i];return[i,r]}(n,i),v=function(e,t){return(0,r.useCallback)((n=>{if(!Array.isArray(n))return console.error("onCalendarChange: should be run in selectRange={true}");const s=(0,d.J)(g(n[0]),{timeZone:t}),a=(0,d.J)(g(n[1]),{timeZone:t});e(s,a)}),[e,t])}(t,p),b=(0,c.wW)(m);return(0,h.jsx)(o.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:b.body,tileClassName:b.title,value:f,nextLabel:s||(s=(0,h.jsx)(u.J,{name:"angle-right"})),prevLabel:a||(a=(0,h.jsx)(u.J,{name:"angle-left"})),onChange:v,locale:"en"})}function g(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}p.displayName="Body";const m=e=>{const t=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:i.css`
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.primary};
      font-size: ${e.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:i.css`
      z-index: ${e.zIndex.modal};
      background-color: ${e.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${e.colors.text.primary};
        border: 0;
        font-weight: ${e.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${e.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${t},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};

        abbr {
          background-color: ${e.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${t},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${t},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},37006:(e,t,n)=>{"use strict";n.d(t,{x:()=>ge});var s,a=n(52423),i=n(68404),r=n(88246),o=n(85699),l=n(25004),d=n(39106),c=n(16755),u=n(50191),h=n(58906),p=n(60192),g=n(22222),m=n(99500),f=n(82897),v=n(25214),b=n(37625),x=n(65678),y=n(70917),w=n(8006),j=n(82261),S=n(35072),C=n(55591),k=n(95391),N=n(76560),O=n(45916);const I=e=>{const{timeZone:t,fiscalYearStartMonth:n,timestamp:r=Date.now(),onChangeTimeZone:o,onChangeFiscalYearStartMonth:d}=e,[u,h]=(0,i.useState)(!1),[g,m]=(0,i.useState)("tz"),I=(0,i.useCallback)((e=>{e&&e.stopPropagation(),h(!u)}),[u,h]),$=(0,c.l4)(),R=T($);if(!(0,f.isString)(t))return null;const P=(0,v.Pr)(t,r);return P?(0,O.jsxs)("div",{children:[(0,O.jsxs)("section",{"aria-label":(0,p.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:R.container,children:[(0,O.jsxs)("div",{className:R.timeZoneContainer,children:[(0,O.jsxs)("div",{className:R.timeZone,children:[(0,O.jsx)(k.d,{title:P.name}),(0,O.jsx)("div",{className:R.spacer}),(0,O.jsx)(S.K,{info:P})]}),(0,O.jsx)(C.v,{timeZone:t,timestamp:r})]}),(0,O.jsx)("div",{className:R.spacer}),(0,O.jsx)(w.zx,{variant:"secondary",onClick:I,size:"sm",children:s||(s=(0,O.jsx)(p.c,{i18nKey:"time-picker.footer.change-settings-button",children:"Change time settings"}))})]}),u?(0,O.jsxs)("div",{className:R.editContainer,children:[(0,O.jsx)("div",{children:(0,O.jsx)(b.S,{value:g,options:[{label:(0,p.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,p.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:m})}),"tz"===g?(0,O.jsx)("section",{"data-testid":l.wl.components.TimeZonePicker.containerV2,className:(0,a.cx)(R.timeZoneContainer,R.timeSettingContainer),children:(0,O.jsx)(j.O,{includeInternal:!0,onChange:e=>{I(),(0,f.isString)(e)&&o(e)},onBlur:I})}):(0,O.jsx)("section",{"aria-label":l.wl.components.TimeZonePicker.containerV2,className:(0,a.cx)(R.timeZoneContainer,R.timeSettingContainer),children:(0,O.jsx)(x.g,{className:R.fiscalYearField,label:(0,p.t)("time-picker.footer.fiscal-year-start","Fiscal year start month"),children:(0,O.jsx)(y.Ph,{value:n,menuShouldPortal:!1,options:N.E,onChange:e=>{var t;d&&d(null!==(t=e.value)&&void 0!==t?t:0)}})})})]}):null]}):null},T=(0,u.B)((e=>({container:a.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:a.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:a.css`
      margin-left: 7px;
    `,timeSettingContainer:a.css`
      padding-top: ${e.spacing(1)};
    `,fiscalYearField:a.css`
      margin-bottom: 0px;
    `,timeZoneContainer:a.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:a.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `})));var $,R,P=n(68237),D=n(12482),A=n(6432),M=n(42914),L=n(21888),F=n(4645),E=n(99510),V=n(81699),z=n(6665),B=n(18714),_=n(30166);function W(e){let{onClose:t,onApply:n}=e;const s=(0,c.wW)(U);return(0,O.jsxs)("div",{className:s.container,children:[(0,O.jsx)(w.zx,{className:s.apply,onClick:n,children:$||($=(0,O.jsx)(p.c,{i18nKey:"time-picker.calendar.apply-button",children:"Apply time range"}))}),(0,O.jsx)(w.zx,{variant:"secondary",onClick:t,children:R||(R=(0,O.jsx)(p.c,{i18nKey:"time-picker.calendar.cancel-button",children:"Cancel"}))})]})}W.displayName="Footer";const U=e=>({container:a.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:a.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});var H;function q(e){let{onClose:t}=e;const n=(0,c.wW)(Z);return(0,O.jsxs)("div",{className:n.container,children:[H||(H=(0,O.jsx)(P.r,{children:(0,O.jsx)(p.c,{i18nKey:"time-picker.calendar.select-time",children:"Select a time range"})})),(0,O.jsx)(w.zx,{"aria-label":l.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:t})]})}q.displayName="Header";const Z=e=>({container:a.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),G=e=>e.stopPropagation();function Q(e){const t=(0,c.l4)(),{modalBackdrop:n}=(0,B.J)(t),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{container:a.css`
      top: 0px;
      position: absolute;
      ${t?"left":"right"}: 544px;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      z-index: -1;
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${e.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${t?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${e.colors.border.weak};
      }
    `,modal:a.css`
      box-shadow: ${e.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${e.zIndex.modal};
    `,content:a.css`
      margin: 0 auto;
      width: 268px;
    `}}(t,e.isReversed),{isOpen:r,isFullscreen:o,onClose:d}=e,u=i.createRef(),{dialogProps:h}=(0,E.R)({"aria-label":l.wl.components.TimePicker.calendar.label},u),{overlayProps:p}=(0,z.Ir)({isDismissable:!0,isOpen:r,onClose:d},u);return r?o?(0,O.jsx)(V.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,O.jsxs)("section",Object.assign({className:s.container,onClick:G,ref:u},p,h,{children:[(0,O.jsx)(q,Object.assign({},e)),(0,O.jsx)(_.uT,Object.assign({},e))]}))}):(0,O.jsxs)(z.Xj,{children:[(0,O.jsx)("div",{className:n,onClick:G}),(0,O.jsx)(V.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,O.jsx)("section",Object.assign({className:s.modal,onClick:G,ref:u},p,h,{children:(0,O.jsxs)("div",{className:s.content,"aria-label":l.wl.components.TimePicker.calendar.label,children:[(0,O.jsx)(q,Object.assign({},e)),(0,O.jsx)(_.uT,Object.assign({},e)),(0,O.jsx)(W,Object.assign({},e))]})}))})]}):null}const K=(0,i.memo)(Q);var J,Y;Q.displayName="TimePickerCalendar";const X=()=>(0,p.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),ee=()=>(0,p.t)("time-picker.range-content.range-error",'"From" can\'t be after "To"'),te=e=>{const{value:t,isFullscreen:n=!1,timeZone:s,onApply:a,isReversed:r,fiscalYearStartMonth:d}=e,[u,h]=ne(t.raw.from,t.raw.to,s),g=(0,c.wW)(ie),[f,v]=(0,i.useState)(u),[b,y]=(0,i.useState)(h),[j,S]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const[e,n]=ne(t.raw.from,t.raw.to,s);v(e),y(n)}),[t.raw.from,t.raw.to,s]);const C=(0,i.useCallback)((e=>{e.preventDefault(),S(!0)}),[S]),k=(0,i.useCallback)((()=>{if(b.invalid||f.invalid)return;const e={from:f.value,to:b.value},t=o.convertRawToRange(e,s,d);a(t)}),[f.invalid,f.value,a,s,b.invalid,b.value,d]),N=(0,i.useCallback)(((e,t)=>{const[n,a]=ne(e,t,s);v(n),y(a)}),[s]),I=e=>{"Enter"===e.key&&k()},T=o.convertRawToRange({from:"now/fy",to:"now/fy"},s,d),$=(0,p.t)("time-picker.range-content.fiscal-year","Fiscal year"),R=(0,O.jsx)("div",{className:g.tooltip,children:o.isFiscal(t)?(0,O.jsx)(L.u,{content:`${$}: ${T.from.format("MMM-DD")} - ${T.to.format("MMM-DD")}`,children:J||(J=(0,O.jsx)(m.J,{name:"info-circle"}))}):null}),P=(0,O.jsx)(w.zx,{"aria-label":l.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:C});return(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:g.fieldContainer,children:[(0,O.jsx)(x.g,{label:(0,p.t)("time-picker.range-content.from-input","From"),invalid:f.invalid,error:f.errorMessage,children:(0,O.jsx)(F.I,{onClick:e=>e.stopPropagation(),onChange:e=>N(e.currentTarget.value,b.value),addonAfter:P,onKeyDown:I,"aria-label":l.wl.components.TimePicker.fromField,value:f.value})}),R]}),(0,O.jsxs)("div",{className:g.fieldContainer,children:[(0,O.jsx)(x.g,{label:(0,p.t)("time-picker.range-content.to-input","To"),invalid:b.invalid,error:b.errorMessage,children:(0,O.jsx)(F.I,{onClick:e=>e.stopPropagation(),onChange:e=>N(f.value,e.currentTarget.value),addonAfter:P,onKeyDown:I,"aria-label":l.wl.components.TimePicker.toField,value:b.value})}),R]}),(0,O.jsx)(w.zx,{"data-testid":l.wl.components.TimePicker.applyTimeRange,type:"button",onClick:k,children:Y||(Y=(0,O.jsx)(p.c,{i18nKey:"time-picker.range-content.apply-button",children:"Apply time range"}))}),(0,O.jsx)(K,{isFullscreen:n,isOpen:j,from:(0,D.J)(f.value),to:(0,D.J)(b.value),onApply:k,onClose:()=>S(!1),onChange:N,timeZone:s,isReversed:r})]})};function ne(e,t,n){const s=se(e,n),a=se(t,n),i=!ae(s,!1,n),r=!ae(a,!0,n),l=function(e,t,n){const s={from:e,to:t},a=o.convertRawToRange(s,n);return!(a.from.isSame(a.to)||a.from.isBefore(a.to))}(s,a,n)&&!r;return[{value:s,invalid:i||l,errorMessage:l&&!i?ee():X()},{value:a,invalid:r,errorMessage:X()}]}function se(e,t){return(0,r.v9)(e)?(0,A.dq)(e,{timeZone:t}):e}function ae(e,t,n){if((0,r.v9)(e))return e.isValid();if(M.isMathString(e))return M.isValid(e);return(0,D.J)(e,{roundUp:t,timeZone:n}).isValid()}function ie(e){return{fieldContainer:a.css`
      display: flex;
    `,tooltip:a.css`
      padding-left: ${e.spacing(1)};
      padding-top: ${e.spacing(3)};
    `}}var re=n(37583);const oe=(e,t)=>o.convertRawToRange({from:e.from,to:e.to},t);var le,de,ce,ue,he;const pe=e=>{const{quickOptions:t=[],isReversed:n,isFullscreen:s,hideQuickRanges:r,timeZone:o,fiscalYearStartMonth:l,value:u,onChange:h,history:m,showHistory:f,className:v,hideTimeZone:b,onChangeTimeZone:x,onChangeFiscalYearStartMonth:y}=e,w=!(null!=m&&m.length),j=s&&f||!s&&(f&&!w||!r),S=(0,c.l4)(),C=xe(S,n,r,j,s),k=function(e,t){if(!Array.isArray(e)||0===e.length)return[];return e.map((e=>((e,t)=>{const n=(0,A.dq)(e.from,{timeZone:t}),s=(0,A.dq)(e.to,{timeZone:t});return{from:n,to:s,display:`${n} to ${s}`}})(e,t)))}(m,o),N=be(u.raw,t),[T,$]=(0,i.useState)(""),R=t.filter((e=>e.display.toLowerCase().includes(T.toLowerCase())));return(0,O.jsxs)("div",{id:"TimePickerContent",className:(0,a.cx)(C.container,v),children:[(0,O.jsxs)("div",{className:C.body,children:[(!s||!r)&&(0,O.jsxs)("div",{className:C.rightSide,children:[(0,O.jsx)("div",{className:C.timeRangeFilter,children:(0,O.jsx)(d.H,{width:0,autoFocus:!0,value:T,onChange:$,placeholder:(0,p.t)("time-picker.content.filter-placeholder","Search quick ranges")})}),(0,O.jsxs)(g.$,{children:[!s&&(0,O.jsx)(me,Object.assign({},e,{historyOptions:k})),!r&&(0,O.jsx)(re.V,{options:R,onChange:e=>h(oe(e)),value:N})]})]}),s&&(0,O.jsx)("div",{className:C.leftSide,children:(0,O.jsx)(fe,Object.assign({},e,{historyOptions:k}))})]}),!b&&s&&(0,O.jsx)(I,{timeZone:o,fiscalYearStartMonth:l,onChangeTimeZone:x,onChangeFiscalYearStartMonth:y})]})},ge=e=>{const{widthOverride:t}=e,n=(0,c.l4)(),s=(t||window.innerWidth)>=n.breakpoints.values.lg;return(0,O.jsx)(pe,Object.assign({},e,{isFullscreen:s}))},me=e=>{const{value:t,hideQuickRanges:n,onChange:s,timeZone:a,historyOptions:o=[],showHistory:d}=e,u=(0,c.l4)(),h=ye(u),g=(0,r.v9)(t.raw.from)||(0,r.v9)(t.raw.to),[f,v]=(0,i.useState)(!g),b=!n&&f;return(0,O.jsxs)("fieldset",{children:[(0,O.jsx)("div",{className:h.header,children:(0,O.jsxs)("button",{type:"button",className:h.expandButton,onClick:()=>{n||v(!b)},"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!b,"aria-controls":"expanded-timerange",children:[le||(le=(0,O.jsx)(P.r,{children:(0,O.jsx)(p.c,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})})),!n&&(0,O.jsx)(m.J,{name:b?"angle-down":"angle-up"})]})}),!b&&(0,O.jsxs)("div",{className:h.body,id:"expanded-timerange",children:[(0,O.jsx)("div",{className:h.form,children:(0,O.jsx)(te,{value:t,onApply:s,timeZone:a,isFullscreen:!1})}),d&&(0,O.jsx)(re.V,{title:(0,p.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:o,onChange:e=>s(oe(e,a)),placeholderEmpty:null})]})]})},fe=e=>{const{onChange:t,value:n,timeZone:s,fiscalYearStartMonth:a,isReversed:i,historyOptions:r}=e,o=(0,c.l4)(),d=we(o,e.hideQuickRanges);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:d.container,children:[(0,O.jsx)("div",{className:d.title,"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle,children:de||(de=(0,O.jsx)(P.r,{children:(0,O.jsx)(p.c,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})}))}),(0,O.jsx)(te,{value:n,timeZone:s,fiscalYearStartMonth:a,onApply:t,isFullscreen:!0,isReversed:i})]}),e.showHistory&&(0,O.jsx)("div",{className:d.recent,children:(0,O.jsx)(re.V,{title:(0,p.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:r||[],onChange:e=>t(oe(e,s)),placeholderEmpty:ce||(ce=(0,O.jsx)(ve,{}))})})]})},ve=(0,i.memo)((()=>{const e=(0,c.l4)(),t=je(e);return(0,O.jsx)("div",{className:t.container,children:(0,O.jsxs)(p.c,{i18nKey:"time-picker.content.empty-recent-list",children:[ue||(ue=(0,O.jsx)("div",{children:(0,O.jsx)("span",{children:"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here."})})),(0,O.jsxs)("div",{children:[(0,O.jsx)("a",{className:t.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new",children:"Read the documentation"}),he||(he=(0,O.jsx)("span",{children:" to find out more about how to enter custom time ranges."}))]})]})})}));ve.displayName="EmptyRecentList";const be=(e,t)=>(0,i.useMemo)((()=>{if(o.isRelativeTimeRange(e))return t.find((t=>t.from===e.from&&t.to===e.to))}),[e,t]),xe=(0,u.B)(((e,t,n,s,i)=>({container:a.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      width: ${i?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${e.colors.border.weak};
      ${t?"left":"right"}: 0;
    `,body:a.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${s?"381px":"217px"};
    `,leftSide:a.css`
      display: flex;
      flex-direction: column;
      border-right: ${t?"none":`1px solid ${e.colors.border.weak}`};
      width: ${n?"100%":"60%"};
      overflow: hidden;
      order: ${t?1:0};
    `,rightSide:a.css`
      width: ${i?"40%":"100%"}; !important;
      border-right: ${t?`1px solid ${e.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:a.css`
      padding: ${e.spacing(1)};
    `,spacing:a.css`
      margin-top: 16px;
    `}))),ye=(0,u.B)((e=>({header:a.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:a.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,h.getFocusStyles)(e)}
      }
    `,body:a.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,form:a.css`
      padding: 7px 9px 7px 9px;
    `}))),we=(0,u.B)(((e,t)=>({container:a.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${t?"11px":"20%"};
    `,title:a.css`
      margin-bottom: 11px;
    `,recent:a.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${e.spacing(1)};
    `}))),je=(0,u.B)((e=>({container:a.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:a.css`
      color: ${e.colors.text.link};
    `})))},68237:(e,t,n)=>{"use strict";n.d(t,{r:()=>l});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);const o=e=>({text:s.css`
      font-size: ${e.typography.size.md};
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
      margin: 0;
      display: flex;
    `}),l=(0,a.memo)((e=>{let{children:t}=e;const n=(0,i.wW)(o);return(0,r.jsx)("h3",{className:n.text,children:t})}));l.displayName="TimePickerTitle"},37583:(e,t,n)=>{"use strict";n.d(t,{V:()=>f});var s=n(52423),a=n(68404),i=n(50191),r=n(60192),o=n(68237),l=n(44288),d=n(16755),c=n(58906),u=n(45916);const h=e=>({container:s.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:s.css`
      background: ${e.colors.action.selected};
      font-weight: ${e.typography.fontWeightMedium};
    `,radio:s.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,c.getFocusStyles)(e)};
      }
    `,label:s.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${e.colors.action.hover};
        cursor: pointer;
      }
    `}),p=(0,a.memo)((e=>{let{value:t,onSelect:n,selected:a=!1,name:i}=e;const r=(0,d.wW)(h),o=(0,l.Z)();return(0,u.jsxs)("li",{className:(0,s.cx)(r.container,a&&r.selected),children:[(0,u.jsx)("input",{className:r.radio,checked:a,name:i,type:"checkbox",id:o,onChange:()=>n(t)}),(0,u.jsx)("label",{className:r.label,htmlFor:o,children:t.display})]})}));p.displayName="TimeRangeOption";const g=(0,i.B)((()=>({title:s.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `}))),m=(0,i.B)((()=>({grow:s.css`
      flex-grow: 1;
      align-items: flex-start;
    `}))),f=e=>{const t=g(),{title:n,options:s,placeholderEmpty:a}=e;return void 0!==a&&s.length<=0?(0,u.jsx)(u.Fragment,{children:a}):n?(0,u.jsx)("section",{"aria-label":n,children:(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("div",{className:t.title,children:(0,u.jsx)(o.r,{children:n})}),(0,u.jsx)(v,Object.assign({},e))]})}):(0,u.jsx)(v,Object.assign({},e))},v=e=>{let{options:t,value:n,onChange:s,title:a}=e;const i=m();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("ul",{"aria-roledescription":(0,r.t)("time-picker.time-range.aria-role","Time range selection"),children:t.map(((e,t)=>(0,u.jsx)(p,{value:e,selected:b(e,n),onSelect:s,name:null!=a?a:(0,r.t)("time-picker.time-range.default-title","Time ranges")},function(e,t){return`${e.from}-${e.to}-${t}`}(e,t))))}),(0,u.jsx)("div",{className:i.grow})]})};function b(e,t){return!(!t||!e)&&(t.from===e.from&&t.to===e.to)}},82261:(e,t,n)=>{"use strict";n.d(t,{O:()=>k});var s=n(82897),a=n(68404),i=n(25214),r=n(60192),o=n(70917),l=n(52423),d=n(16755),c=n(45916);const u=e=>e.stopPropagation(),h=e=>{const{children:t,label:n}=e,s=(0,d.wW)(p);return n?(0,c.jsxs)("div",{onClick:u,children:[(0,c.jsx)("div",{className:s.header,children:(0,c.jsx)("span",{className:s.label,children:n})}),t]}):(0,c.jsx)("div",{onClick:u,children:t})},p=e=>({header:l.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${e.colors.border.weak};
      text-transform: capitalize;
    `,label:l.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      font-weight: ${e.typography.fontWeightMedium};
    `});var g,m,f=n(55591),v=n(50191),b=n(99500),x=n(35072),y=n(95391);const w="tz-utc-offset",j=(e,t)=>{const{children:n,innerProps:a,innerRef:r,data:o,isSelected:u,isFocused:h}=e,p=(0,d.l4)(),m=C(p),v=Date.now(),j=(0,l.cx)(m.container,h&&m.containerFocused);if(!(0,s.isString)(o.value))return null;const S=(0,i.Pr)(o.value,v);return(0,c.jsx)("div",Object.assign({className:j},a,{ref:r,"aria-label":"Select option",children:(0,c.jsxs)("div",{className:(0,l.cx)(m.leftColumn,m.row),children:[(0,c.jsxs)("div",{className:(0,l.cx)(m.leftColumn,m.wideRow),children:[(0,c.jsx)(y.d,{title:n}),(0,c.jsx)("div",{className:m.spacer}),(0,c.jsx)(x.K,{info:S})]}),(0,c.jsxs)("div",{className:m.rightColumn,children:[(0,c.jsx)(f.v,{timeZone:(null==S?void 0:S.ianaName)||o.value,timestamp:v,className:w}),u&&(g||(g=(0,c.jsx)("span",{children:(0,c.jsx)(b.J,{name:"check"})})))]})]})}))},S=(e,t)=>{const{children:n,innerProps:a,innerRef:r,data:o,isSelected:u,isFocused:h}=e,p=(0,d.l4)(),g=C(p),v=Date.now(),j=(0,l.cx)(g.container,h&&g.containerFocused);if(!(0,s.isString)(o.value))return null;const S=(0,i.Pr)(o.value,v);return(0,c.jsx)("div",Object.assign({className:j},a,{ref:r,"aria-label":"Select option",children:(0,c.jsxs)("div",{className:g.body,children:[(0,c.jsxs)("div",{className:g.row,children:[(0,c.jsx)("div",{className:g.leftColumn,children:(0,c.jsx)(y.d,{title:n})}),(0,c.jsx)("div",{className:g.rightColumn,children:u&&(m||(m=(0,c.jsx)("span",{children:(0,c.jsx)(b.J,{name:"check"})})))})]}),(0,c.jsxs)("div",{className:g.row,children:[(0,c.jsx)("div",{className:g.leftColumn,children:(0,c.jsx)(x.K,{info:S})}),(0,c.jsx)("div",{className:g.rightColumn,children:(0,c.jsx)(f.v,{timestamp:v,timeZone:(null==S?void 0:S.ianaName)||o.value,className:w})})]})]})}))},C=(0,v.B)((e=>({container:l.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,containerFocused:l.css`
      background: ${e.colors.action.hover};
    `,body:l.css`
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:l.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:l.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:l.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:l.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:l.css`
      margin-left: 6px;
    `}))),k=e=>{const{onChange:t,width:n,autoFocus:i=!1,onBlur:l,value:d,includeInternal:u=!1,disabled:p=!1,inputId:g}=e,m=N(u),f=O(m,d),v=T(),b=n&&n<=45?S:j,x=(0,a.useCallback)((e=>{if(!e||!(0,s.isString)(e.value))return t(d);t(e.value)}),[t,d]);return(0,c.jsx)(o.Ph,{inputId:g,value:f,placeholder:(0,r.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:i,menuShouldPortal:!1,openMenuOnFocus:!0,width:n,filterOption:v,options:m,onChange:x,onBlur:l,components:{Option:b,Group:h},disabled:p,"aria-label":(0,r.t)("time-picker.zone.select-aria-label","Time zone picker")})},N=e=>{const t=Date.now();return(0,i.$8)(e).map((e=>{const n=e.zones.reduce(((e,n)=>{const s=(0,i.Pr)(n,t);return s?(e.push({label:s.name,value:s.zone,searchIndex:$(s,t)}),e):e}),[]);return{label:e.name,options:n}}))},O=(e,t)=>(0,a.useMemo)((()=>{if(void 0===t)return;const n=(0,s.toLower)(t),a=e.find((e=>e.label?n.startsWith((0,s.toLower)(e.label)):I(n)));return null==a?void 0:a.options.find((e=>(0,s.isEmpty)(n)?e.value===i.RQ.default:(0,s.toLower)(e.value)===n))}),[e,t]),I=e=>{switch(e){case i.RQ.default:case i.RQ.localBrowserTime:case i.RQ.utc:return!0;default:return!1}},T=()=>(0,a.useCallback)(((e,t)=>!(t&&e.data&&e.data.searchIndex)||e.data.searchIndex.indexOf((0,s.toLower)(t))>-1),[]),$=(e,t)=>{const n=[(0,s.toLower)(e.name),(0,s.toLower)(e.abbreviation),(0,s.toLower)((0,f.k)(t,e.zone))];for(const t of e.countries)n.push((0,s.toLower)(t.name)),n.push((0,s.toLower)(t.code));return n.join("|")}},35072:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);const o=e=>{let{info:t}=e;const n=(0,i.wW)(d),s=l(t);return t?(0,r.jsx)("div",{className:n.description,children:s}):null},l=e=>(0,a.useMemo)((()=>{const t=[];if(!e)return"";if(e.countries.length>0){const n=e.countries[0];t.push(n.name)}return e.abbreviation&&t.push(e.abbreviation),t.join(", ")}),[e]),d=e=>({description:s.css`
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},55591:(e,t,n)=>{"use strict";n.d(t,{k:()=>d,v:()=>l});var s=n(52423),a=n(82897),i=(n(68404),n(6432)),r=n(16755),o=n(45916);const l=e=>{const{timestamp:t,timeZone:n,className:i}=e,l=(0,r.wW)(c);return(0,a.isString)(n)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("span",{className:(0,s.cx)(l.offset,i),children:d(t,n)})}):null},d=(e,t)=>{const n=(0,i.dq)(e,{timeZone:t,format:"Z"});return"+00:00"===n?"UTC":`UTC${n}`},c=e=>{const t=s.css`
    font-weight: normal;
    font-size: ${e.typography.size.sm};
    color: ${e.colors.text.secondary};
    white-space: normal;
  `;return{offset:s.css`
      ${t};
      color: ${e.colors.text.primary};
      background: ${e.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},95391:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{title:t}=e;const n=(0,a.wW)(o);return t?(0,i.jsx)("span",{className:n.title,children:t}):null},o=e=>({title:s.css`
      font-weight: ${e.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},48239:(e,t,n)=>{"use strict";n.d(t,{z:()=>l});var s=n(68404),a=n(25004),i=n(70917),r=n(45916);const o=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],l=e=>{var t;const{onChange:n,width:l,autoFocus:d=!1,onBlur:c,value:u,disabled:h=!1,inputId:p}=e,g=(0,s.useCallback)((e=>{void 0!==e.value&&n(e.value)}),[n]);return(0,r.jsx)(i.Ph,{inputId:p,value:null===(t=o.find((e=>e.value===u)))||void 0===t?void 0:t.value,placeholder:a.wl.components.WeekStartPicker.placeholder,autoFocus:d,openMenuOnFocus:!0,width:l,options:o,onChange:g,onBlur:c,disabled:h})}},76560:(e,t,n)=>{"use strict";n.d(t,{E:()=>a,r:()=>s});const s=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],a=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},16093:(e,t,n)=>{"use strict";n.d(t,{d:()=>g});var s=n(52423),a=n(99510),i=n(81699),r=n(6665),o=n(61104),l=n(68404),d=n(25004),c=n(16755),u=n(22222),h=n(23734),p=n(45916);function g(e){let{children:t,inline:n=!1,onClose:s,closeOnMaskClick:g=!0,scrollableContent:f=!1,title:v,subtitle:b,width:x="40%",expandable:y=!1,tabs:w}=e;const j=(0,c.wW)(m),[S,C]=(0,l.useState)(!1),[k,N]=(0,l.useState)(!1),O=S?"100%":x,I=l.useRef(null),{dialogProps:T,titleProps:$}=(0,a.R)({},I),{overlayProps:R}=(0,r.Ir)({isDismissable:!1,isOpen:k,onClose:s},I);(0,l.useEffect)((()=>{N(!0)}),[]);const P=(0,p.jsx)("div",{className:j.content,children:t}),D={};return n&&(D.position="absolute"),(0,p.jsx)(o.Z,{level:null,handler:!1,open:k,onClose:s,maskClosable:g,placement:"right",width:O,getContainer:n?void 0:"body",style:D,className:j.drawer,"aria-label":"string"==typeof v?d.wl.components.Drawer.General.title(v):d.wl.components.Drawer.General.title("no title"),children:(0,p.jsx)(i.MT,{restoreFocus:!0,contain:!0,autoFocus:!0,children:(0,p.jsxs)("div",Object.assign({className:j.container},R,T,{ref:I,children:["string"==typeof v&&(0,p.jsxs)("div",{className:j.header,children:[(0,p.jsxs)("div",{className:j.actions,children:[y&&!S&&(0,p.jsx)(h.h,{name:"angle-left",size:"xl",onClick:()=>C(!0),"aria-label":d.wl.components.Drawer.General.expand}),y&&S&&(0,p.jsx)(h.h,{name:"angle-right",size:"xl",onClick:()=>C(!1),"aria-label":d.wl.components.Drawer.General.contract}),(0,p.jsx)(h.h,{name:"times",size:"xl",onClick:s,"aria-label":d.wl.components.Drawer.General.close})]}),(0,p.jsxs)("div",{className:j.titleWrapper,children:[(0,p.jsx)("h3",Object.assign({},$,{children:v})),"string"==typeof b&&(0,p.jsx)("div",{className:"muted",children:b}),"string"!=typeof b&&b,w&&(0,p.jsx)("div",{className:j.tabsWrapper,children:w})]})]}),"string"!=typeof v&&v,(0,p.jsx)("div",{className:j.contentScroll,children:f?(0,p.jsx)(u.$,{autoHeightMin:"100%",children:P}):P})]}))})})}const m=e=>({container:s.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:s.css`
      .drawer-content {
        background-color: ${e.colors.background.primary};
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      &.drawer-open .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
        opacity: 1;
      }
      .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
      }
      .drawer-open .drawer-content-wrapper {
        box-shadow: ${e.shadows.z3};
      }

      z-index: ${e.zIndex.dropdown};

      ${e.breakpoints.down("sm")} {
        .drawer-content-wrapper {
          width: 100% !important;
        }
      }
    `,header:s.css`
      background-color: ${e.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${e.spacing(.5)};
    `,actions:s.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:s.css`
      margin-bottom: ${e.spacing(3)};
      padding: ${e.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,s.css)({padding:e.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,s.css)({minHeight:0,flex:1}),tabsWrapper:(0,s.css)({paddingLeft:e.spacing(2),margin:e.spacing(3,-1,-3,-3)})})},41460:(e,t,n)=>{"use strict";n.d(t,{d:()=>b});var s=n(52423),a=n(35210),i=n(81699),r=n(9815),o=n(91053),l=n(68404),d=n(16755),c=n(98817),u=n(55910),h=n(16736),p=n(21357),g=n(1696),m=n(45916);const f=["className","options","value","onChange","narrow","variant"];const v=e=>{const{className:t,options:n,value:s,onChange:v,narrow:b,variant:y}=e,w=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,f),j=(0,d.wW)(x),S=(0,o.W)({}),C=l.useRef(null),{menuTriggerProps:k,menuProps:N}=(0,r.u4)({},S,C),{buttonProps:O}=(0,a.U)(k,C);return(0,m.jsxs)(c.h,{className:j.wrapper,children:[(0,m.jsx)(g.h,Object.assign({className:t,isOpen:S.isOpen,narrow:b,variant:y,ref:C},O,w,{children:(null==s?void 0:s.label)||(null==s?void 0:s.value)})),S.isOpen&&(0,m.jsx)("div",{className:j.menuWrapper,children:(0,m.jsx)(u.L,{onClick:S.close,parent:document,includeButtonPress:!1,children:(0,m.jsx)(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,m.jsx)(h.v,Object.assign({tabIndex:-1,onClose:S.close},N,{children:n.map((e=>(0,m.jsx)(p.s,{label:e.label||e.value,onClick:()=>(e=>{v(e),S.close()})(e),active:e.value===(null==s?void 0:s.value),ariaChecked:e.value===(null==s?void 0:s.value),ariaLabel:e.ariaLabel||e.label,role:"menuitemradio"},`${e.value}`)))}))})})})]})};v.displayName="ButtonSelect";const b=l.memo(v),x=e=>({wrapper:s.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:s.css`
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      top: ${e.spacing(4)};
      right: 0;
    `})},78080:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var s=n(52423),a=n(81699),i=n(68404),r=n(85361),o=n(22163),l=n(32714),d=n(48717),c=n(45916);const u=i.memo((e=>{let{children:t,overlay:n,placement:s}=e;const[u,p]=(0,i.useState)(!1),g=(0,i.useRef)(null),{getArrowProps:m,getTooltipProps:f,setTooltipRef:v,setTriggerRef:b,visible:x}=(0,r.O)({visible:u,placement:s,onVisibleChange:p,interactive:!0,delayHide:0,delayShow:0,offset:[0,8],trigger:["click"]}),y=h(150);return(0,c.jsxs)(c.Fragment,{children:[i.cloneElement("function"==typeof t?t(x):t,{ref:b}),x&&(0,c.jsx)(d.h_,{children:(0,c.jsx)(a.MT,{autoFocus:!0,children:(0,c.jsxs)("div",Object.assign({ref:v},f(),{onClick:()=>{p(!1)},children:[(0,c.jsx)("div",Object.assign({},m({className:"tooltip-arrow"}))),(0,c.jsx)(o.Z,{nodeRef:g,appear:!0,in:!0,timeout:{appear:150,exit:0,enter:0},classNames:y,children:(0,c.jsx)("div",{ref:g,children:l.renderOrCallToRender(n)})})]}))})})]})}));u.displayName="Dropdown";const h=e=>({appear:s.css`
      opacity: 0;
      position: relative;
      transform: scaleY(0.5);
      transform-origin: top;
    `,appearActive:s.css`
      opacity: 1;
      transform: scaleY(1);
      transition: transform ${e}ms cubic-bezier(0.2, 0, 0.2, 1),
        opacity ${e}ms cubic-bezier(0.2, 0, 0.2, 1);
    `})},82663:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{children:t}=e;const n=(0,a.wW)(o);return(0,i.jsx)("div",{className:n.container,children:t})},o=e=>({container:s.css`
      border-left: 3px solid ${e.colors.info.main};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(2)};
      min-width: 350px;
      border-radius: ${e.shape.borderRadius(2)};
      margin-bottom: ${e.spacing(4)};
    `})},72767:(e,t,n)=>{"use strict";n.d(t,{Pf:()=>h,SV:()=>c,z4:()=>u});var s,a=n(37916),i=n(68404),r=n(2843),o=n(66976),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.PureComponent{constructor(){super(...arguments),d(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){(0,a.Tb)(e,{contexts:{react:{componentStack:t.componentStack}}}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e)}componentDidUpdate(e){const{dependencies:t,onRecover:n}=this.props;if(this.state.error&&t&&e.dependencies)for(let s=0;s<t.length;s++)if(t[s]!==e.dependencies[s]){this.setState({error:null,errorInfo:null}),n&&n();break}}render(){const{children:e}=this.props,{error:t,errorInfo:n}=this.state;return e({error:t,errorInfo:n})}}class u extends i.PureComponent{render(){const{title:e,children:t,style:n,dependencies:a}=this.props;return(0,l.jsx)(c,{dependencies:a,children:a=>{let{error:i,errorInfo:d}=a;return d?"alertbox"===n?(0,l.jsx)(r.b,{title:e||"",children:(0,l.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[i&&i.toString(),s||(s=(0,l.jsx)("br",{})),d.componentStack]})}):(0,l.jsx)(o.X,{title:e||"",error:i,errorInfo:d}):t}})}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=n=>(0,l.jsx)(u,Object.assign({},t,{children:(0,l.jsx)(e,Object.assign({},n))}));return n.displayName="WithErrorBoundary",n}d(u,"defaultProps",{title:"An unexpected error happened",style:"alertbox"})},66976:(e,t,n)=>{"use strict";n.d(t,{X:()=>l});var s,a=n(52423),i=(n(68404),n(50191)),r=n(45916);const o=(0,i.B)((()=>a.css`
    width: 500px;
    margin: 64px auto;
  `)),l=e=>{let{error:t,errorInfo:n,title:a}=e;return(0,r.jsxs)("div",{className:o(),children:[(0,r.jsx)("h2",{children:a}),(0,r.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[t&&t.toString(),s||(s=(0,r.jsx)("br",{})),n&&n.componentStack]})]})};l.displayName="ErrorWithStack"},19050:(e,t,n)=>{"use strict";n.d(t,{A_:()=>f,Yo:()=>p});var s,a=n(52423),i=n(82897),r=n(68404),o=n(15020),l=n(16755),d=n(2843),c=n(99500),u=n(57833),h=n(45916);function p(e){let{options:t,children:n,readAs:s,onLoad:i,fileListRenderer:c,onFileRemove:p}=e;const[g,w]=(0,r.useState)([]),[j,S]=(0,r.useState)([]),C=(0,r.useCallback)(((e,t)=>{w((n=>n.map((n=>n.id===e.id?(t(n),n):n))))}),[]),k=(0,r.useCallback)(((e,n,a)=>{let r=e.map(x);if(!1===(null==t?void 0:t.multiple)?w(r):w((e=>[...e,...r])),P(n),null!=t&&t.onDrop)t.onDrop(e,n,a);else for(const e of r){const t=new FileReader,n=()=>{s?t[s](e.file):t.readAsText(e.file)};C(e,(s=>{s.abortUpload=()=>{t.abort()},s.retryUpload=()=>{C(e,(e=>{e.error=null,e.progress=void 0})),n()}})),t.onabort=()=>{C(e,(e=>{e.error=new DOMException("Aborted")}))},t.onprogress=t=>{C(e,(e=>{e.progress=t.loaded}))},t.onload=()=>{null==i||i(t.result)},t.onerror=()=>{C(e,(e=>{e.error=t.error}))},n()}}),[i,t,s,C]),N=e=>{const t=g.filter((t=>e.id!==t.id));w(t),null==p||p(e)},{getRootProps:O,getInputProps:I,isDragActive:T}=(0,o.uI)(Object.assign({},t,{useFsAccessApi:!1,onDrop:k,accept:m(null==t?void 0:t.accept)})),$=y((0,l.l4)(),T),R=g.map((e=>c?c(e,N):(0,h.jsx)(u.K,{file:e,removeFile:N},e.id))),P=e=>{let t=[];e.map((e=>{e.errors.map((e=>{-1===t.indexOf(e.message)&&t.push(e.message)}))})),S(t)},D=()=>{S([])};return(0,h.jsxs)("div",{className:$.container,children:[(0,h.jsxs)("div",Object.assign({"data-testid":"dropzone"},O({className:$.dropzone}),{children:[(0,h.jsx)("input",Object.assign({},I())),null!=n?n:(0,h.jsx)(f,{primaryText:v(g,t)})]})),j.length>0&&(0,h.jsx)("div",{className:$.errorAlert,children:(0,h.jsx)(d.b,{title:"Upload failed",severity:"error",onRemove:D,children:j.map((e=>(0,h.jsx)("div",{children:e},e)))})}),(null==t?void 0:t.accept)&&(0,h.jsx)("small",{className:(0,a.cx)($.small,$.acceptMargin),children:b(t.accept)}),R]})}function g(e){return["txt","json","csv","xls","yml"].some((t=>e.match(t)))?"text/plain":"application/octet-stream"}function m(e){return(0,i.isString)(e)?{[g(e)]:[e]}:Array.isArray(e)?e.reduce(((e,t)=>{const n=g(t);return e[n]=e[n]?[...e[n],t]:[t],e}),{}):e}function f(e){let{primaryText:t="Upload file",secondaryText:n="Drag and drop here or browse"}=e;const a=y((0,l.l4)());return(0,h.jsxs)("div",{className:a.iconWrapper,children:[s||(s=(0,h.jsx)(c.J,{name:"upload",size:"xxl"})),(0,h.jsx)("h3",{children:t}),(0,h.jsx)("small",{className:a.small,children:n})]})}function v(e,t){return void 0===(null==t?void 0:t.multiple)||null!=t&&t.multiple?"Upload file":e.length?"Replace file":"Upload file"}function b(e){return(0,i.isString)(e)?`Accepted file type: ${e}`:Array.isArray(e)?`Accepted file types: ${e.join(", ")}`:`Accepted file types: ${Object.values(e).flat().join(", ")}`}function x(e){return{id:(0,i.uniqueId)("file"),file:e,error:null}}function y(e,t){return{container:a.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:a.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:a.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:a.css`
      margin: ${e.spacing(2,0,1)};
    `,small:a.css`
      color: ${e.colors.text.secondary};
    `,errorAlert:a.css`
      padding-top: 10px;
    `}}},57833:(e,t,n)=>{"use strict";n.d(t,{K:()=>p});var s,a=n(52423),i=(n(68404),n(55343)),r=n(16755),o=n(6784),l=n(8006),d=n(99500),c=n(23734),u=n(45916);const h="Remove file";function p(e){var t,n;let{file:a,removeFile:p}=e;const m=(0,r.wW)(g),{file:f,progress:v,error:b,abortUpload:x,retryUpload:y}=a,w=(0,i.Cf)("decbytes")(f.size);return(0,u.jsxs)("div",{className:m.fileListContainer,children:[(0,u.jsxs)("span",{className:m.fileNameWrapper,children:[s||(s=(0,u.jsx)(d.J,{name:"file-blank",size:"lg","aria-hidden":!0})),(0,u.jsx)("span",{className:m.padding,children:(0,o.O)(f.name)}),(0,u.jsx)("span",{children:(0,i.zc)(w)})]}),(0,u.jsx)("div",{className:m.fileNameWrapper,children:b?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:m.error,children:b.message}),y&&(t||(t=(0,u.jsx)(c.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:y}))),p&&(0,u.jsx)(c.h,{className:y?m.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(a),tooltip:h,"aria-label":h})]}):v&&f.size>v?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("progress",{className:m.progressBar,max:f.size,value:v}),(0,u.jsxs)("span",{className:m.paddingLeft,children:[Math.round(v/f.size*100),"%"]}),x&&(n||(n=(0,u.jsx)(l.zx,{variant:"secondary",type:"button",fill:"text",onClick:x,children:"Cancel upload"})))]}):p&&(0,u.jsx)(c.h,{name:"trash-alt",onClick:()=>p(a),tooltip:h,"aria-label":h,type:"button",tooltipPlacement:"top"})})]})}function g(e){return{fileListContainer:a.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${e.spacing(2)};
      border: 1px dashed ${e.colors.border.medium};
      background-color: ${e.colors.background.secondary};
      margin-top: ${e.spacing(1)};
    `,fileNameWrapper:a.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:a.css`
      padding: ${e.spacing(0,1)};
    `,paddingLeft:a.css`
      padding-left: ${e.spacing(2)};
    `,marginLeft:a.css`
      margin-left: ${e.spacing(1)};
    `,error:a.css`
      padding-right: ${e.spacing(2)};
      color: ${e.colors.error.text};
    `,progressBar:a.css`
      border-radius: ${e.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${e.colors.border.weak};
        border-radius: ${e.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${e.colors.primary.main};
        border-radius: ${e.spacing(1)};
      }
    `}}},29792:(e,t,n)=>{"use strict";n.d(t,{p:()=>p});var s=n(52423),a=n(68404),i=n(44288),r=n(25004),o=n(16755),l=n(58906),d=n(6784),c=n(8006),u=n(99500),h=n(45916);const p=e=>{let{onFileUpload:t,className:n,children:l="Upload file",accept:c="*",size:p="md"}=e;const m=(0,o.wW)(g(p)),[f,v]=(0,a.useState)(""),b=(0,i.Z)(),x=(0,a.useCallback)((e=>{var n,s;const a=null===(n=e.currentTarget)||void 0===n||null===(s=n.files)||void 0===s?void 0:s[0];var i;a&&v(null!==(i=a.name)&&void 0!==i?i:"");t(e)}),[t]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{type:"file",id:b,className:m.fileUpload,onChange:x,multiple:!1,accept:c,"data-testid":r.wl.components.FileUpload.inputField}),(0,h.jsxs)("label",{htmlFor:b,className:(0,s.cx)(m.labelWrapper,n),children:[(0,h.jsx)(u.J,{name:"upload",className:m.icon}),l]}),f&&(0,h.jsx)("span",{"aria-label":"File name",className:m.fileName,"data-testid":r.wl.components.FileUpload.fileNameSpan,children:(0,d.O)(f)})]})},g=e=>t=>{const n=(0,c.fW)({theme:t,variant:"primary",size:e,iconOnly:!1}),a=(0,l.getFocusStyles)(t);return{fileUpload:(0,s.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":a,"&:focus-visible + label":a}),labelWrapper:n.button,icon:n.icon,fileName:(0,s.css)({marginLeft:t.spacing(.5)})}}},39106:(e,t,n)=>{"use strict";n.d(t,{H:()=>u});var s=n(68404),a=n(56949);var i,r=n(8006),o=n(99500),l=n(4645),d=n(45916);const c=["value","width","onChange","escapeRegex"];const u=s.forwardRef(((e,t)=>{let{value:n,width:u,onChange:h,escapeRegex:p=!0}=e,g=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const m=s.useRef(null),f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=s.useRef(null);return s.useEffect((()=>{t.forEach((e=>{e&&("function"==typeof e?e(a.current):e.current=a.current)}))}),[t]),a}(t,m),v=""!==n?(0,d.jsx)(r.zx,{icon:"times",fill:"text",size:"sm",onClick:e=>{var t;null===(t=m.current)||void 0===t||t.focus(),h(""),e.stopPropagation()},children:"Clear"}):null;return(0,d.jsx)(l.I,Object.assign({prefix:i||(i=(0,d.jsx)(o.J,{name:"search"})),suffix:v,width:u,type:"text",value:p?(0,a.x6)(null!=n?n:""):n,onChange:e=>h(p?(0,a.GE)(e.currentTarget.value):e.currentTarget.value)},g,{ref:f}))}));u.displayName="FilterInput"},45904:(e,t,n)=>{"use strict";n.d(t,{B:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(8006),r=n(99500),o=n(45916);const l=e=>{let{label:t,selected:n,onClick:l,icon:c="check"}=e;const u=(0,a.wW)(d),h=(0,a.wW)(i.gN);return(0,o.jsxs)("button",{type:"button",className:(0,s.cx)(h,u.wrapper,n&&u.selected),onClick:l,children:[(0,o.jsx)("span",{children:t}),n&&(0,o.jsx)(r.J,{name:c,className:u.icon})]})},d=e=>({wrapper:s.css`
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(8)};
      padding: ${e.spacing(0,2)};
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.fontWeightMedium};
      line-height: ${e.typography.bodySmall.lineHeight};
      color: ${e.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
      }
    `,selected:s.css`
      color: ${e.colors.text.primary};
      background: ${e.colors.action.selected};

      &:hover {
        background: ${e.colors.action.focus};
      }
    `,icon:s.css`
      margin-left: ${e.spacing(.5)};
    `})},69173:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var s=n(52423),a=(n(68404),n(5333)),i=n(45916);const r=["label","tooltip","labelWidth","inputWidth","inputEl","className","interactive"];const o=e=>{let{label:t,tooltip:n,labelWidth:o,inputWidth:d,inputEl:c,className:u,interactive:h}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const g=l();return(0,i.jsxs)("div",{className:(0,s.cx)(g.formField,u),children:[(0,i.jsx)(a.c,{width:o,tooltip:n,interactive:h,children:t}),c||(0,i.jsx)("input",Object.assign({type:"text",className:"gf-form-input "+(d?`width-${d}`:"")},p))]})};o.displayName="FormField",o.defaultProps={labelWidth:6,inputWidth:12};const l=()=>({formField:s.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},5333:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var s=n(9085),a=n.n(s),i=(n(68404),n(99500)),r=n(21888),o=n(45916);const l=["children","isFocused","isInvalid","className","htmlFor","tooltip","width","interactive"];const d=e=>{let{children:t,isFocused:n,isInvalid:s,className:d,htmlFor:c,tooltip:u,width:h,interactive:p}=e,g=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const m=a()(d,`gf-form-label width-${h||"10"}`,{"gf-form-label--is-focused":n,"gf-form-label--is-invalid":s});return(0,o.jsxs)("label",Object.assign({className:m},g,{htmlFor:c,children:[t,u&&(0,o.jsx)(r.u,{placement:"top",content:u,theme:"info",interactive:p,children:(0,o.jsx)(i.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})]}))}},92811:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});n(68404);var s=n(45916);const a=["value","className","style"];const i=e=>{var t,n;let{value:i,className:r,style:o}=e,l=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,a);const d=(null!==(t=i.prefix)&&void 0!==t?t:"").length>0,c=(null!==(n=i.suffix)&&void 0!==n?n:"").length>0;let u;if(o&&o.fontSize&&"number"==typeof o.fontSize){const e=o.fontSize,t=function(e){return e<20?.9:e<26?.8:.6}(e);u={fontSize:e*t}}return(0,s.jsx)("div",Object.assign({className:r,style:o},l,{children:(0,s.jsxs)("div",{children:[d&&(0,s.jsx)("span",{children:i.prefix}),(0,s.jsx)("span",{children:i.text}),c&&(0,s.jsx)("span",{style:u,children:i.suffix})]})}))};i.displayName="FormattedDisplayValue"},12310:(e,t,n)=>{"use strict";n.d(t,{X:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(50191),o=n(58906),l=n(83744),d=n(45916);const c=["label","description","value","htmlValue","onChange","disabled","className"];const u=a.forwardRef(((e,t)=>{let{label:n,description:r,value:o,htmlValue:l,onChange:u,disabled:p,className:g}=e,m=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const f=(0,a.useCallback)((e=>{u&&u(e)}),[u]),v=(0,i.wW)(h);return(0,d.jsxs)("label",{className:(0,s.cx)(v.wrapper,g),children:[(0,d.jsx)("input",Object.assign({type:"checkbox",className:v.input,checked:o,disabled:p,onChange:f,value:l},m,{ref:t})),(0,d.jsx)("span",{className:v.checkmark}),n&&(0,d.jsx)("span",{className:v.label,children:n}),r&&(0,d.jsx)("span",{className:v.description,children:r})]})})),h=(0,r.B)((e=>{const t=(0,l.F)(e);return{wrapper:s.css`
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:s.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,o.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,o.getMouseFocusStyles)(e)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${e.colors.primary.main};
        border: none;

        &:hover {
          background: ${e.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${e.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${e.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${e.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${e.colors.action.disabledText};
        }
      }
    `,checkmark:s.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.components.input.background};
      border: 1px solid ${e.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${e.components.input.borderHover};
      }
    `,label:(0,s.cx)(t.label,s.css`
        position: relative;
        z-index: 2;
        padding-left: ${e.spacing(1)};
        white-space: nowrap;
        cursor: pointer;
        position: relative;
        top: -3px;
      `),description:(0,s.cx)(t.description,s.css`
        line-height: ${e.typography.bodySmall.lineHeight};
        padding-left: ${e.spacing(3)};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}}));u.displayName="Checkbox"},65678:(e,t,n)=>{"use strict";n.d(t,{g:()=>p});var s=n(52423),a=n(68404),i=n(50191),r=n(16755),o=n(32714),l=n(31625),d=n(83744),c=n(45916);const u=["label","description","horizontal","invalid","loading","disabled","required","error","children","className","validationMessageHorizontalOverflow","htmlFor"];const h=(0,i.B)((e=>({field:s.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${e.spacing(2)};
    `,fieldHorizontal:s.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:s.css`
      margin-top: ${e.spacing(.5)};
    `,fieldValidationWrapperHorizontal:s.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:s.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `}))),p=e=>{let{label:t,description:n,horizontal:i,invalid:p,loading:g,disabled:m,required:f,error:v,children:b,className:x,validationMessageHorizontalOverflow:y,htmlFor:w}=e,j=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const S=(0,r.l4)(),C=h(S),k=null!=w?w:(0,o.getChildId)(b),N="string"==typeof t?(0,c.jsx)(d._,{htmlFor:k,description:n,children:`${t}${f?" *":""}`}):t,O=function(e){for(const t in e)void 0===e[t]&&delete e[t];return e}({invalid:p,disabled:m,loading:g});return(0,c.jsxs)("div",Object.assign({className:(0,s.cx)(C.field,i&&C.fieldHorizontal,x)},j,{children:[N,(0,c.jsxs)("div",{children:[a.cloneElement(b,O),p&&v&&!i&&(0,c.jsx)("div",{className:(0,s.cx)(C.fieldValidationWrapper,{[C.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(l.S,{children:v})})]}),p&&v&&i&&(0,c.jsx)("div",{className:(0,s.cx)(C.fieldValidationWrapper,C.fieldValidationWrapperHorizontal,{[C.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(l.S,{children:v})})]}))}},68455:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var s=n(59052);const a=["name","control","children"];const i=e=>{let{name:t,control:n,children:i}=e,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,a);const{fields:o,append:l,prepend:d,remove:c,swap:u,move:h,insert:p}=(0,s.Dq)(Object.assign({control:n,name:t},r));return i({fields:o,append:l,prepend:d,remove:c,swap:u,move:h,insert:p})}},71980:(e,t,n)=>{"use strict";n.d(t,{C:()=>d});var s=n(52423),a=(n(68404),n(16755)),i=n(50191),r=n(58101),o=n(45916);const l=["label","children","className"];const d=e=>{let{label:t,children:n,className:i}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const u=(0,a.l4)(),h=c(u);return(0,o.jsxs)("fieldset",Object.assign({className:(0,s.cx)(h.wrapper,i)},d,{children:[t&&(0,o.jsx)(r.D,{children:t}),n]}))},c=(0,i.B)((e=>({wrapper:s.css`
      margin-bottom: ${e.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `})))},31625:(e,t,n)=>{"use strict";n.d(t,{S:()=>d});var s=n(52423),a=(n(68404),n(50191)),i=n(16755),r=n(99500),o=n(45916);const l=(0,a.B)((e=>{const t=`\n      font-size: ${e.typography.size.sm};\n      font-weight: ${e.typography.fontWeightMedium};\n      padding: ${e.spacing(.5,1)};\n      color: ${e.colors.error.contrastText};\n      background: ${e.colors.error.main};\n      border-radius: ${e.shape.borderRadius()};\n      position: relative;\n      display: inline-block;\n\n      a {\n        color: ${e.colors.error.contrastText};\n        text-decoration: underline;\n      }\n\n      a:hover {\n        text-decoration: none;\n      }\n    `;return{vertical:s.css`
      ${t}
      margin: ${e.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${e.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:s.css`
      ${t}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:s.css`
      margin-right: ${e.spacing()};
    `}})),d=e=>{let{children:t,horizontal:n,className:a}=e;const d=(0,i.l4)(),c=l(d),u=(0,s.cx)(n?c.horizontal:c.vertical,a);return(0,o.jsxs)("div",{role:"alert",className:u,children:[(0,o.jsx)(r.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),t]})}},3218:(e,t,n)=>{"use strict";n.d(t,{l:()=>c});var s=n(52423),a=n(68404),i=n(59052),r=n(45916);const o=["defaultValues","onSubmit","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth"],l=["handleSubmit","trigger","formState"];function d(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}function c(e){let{defaultValues:t,onSubmit:n,validateOnMount:c=!1,validateFieldsOnMount:u,children:h,validateOn:p="onSubmit",maxWidth:g=600}=e,m=d(e,o);const f=(0,i.cI)({mode:p,defaultValues:t}),{handleSubmit:v,trigger:b,formState:x}=f,y=d(f,l);return(0,a.useEffect)((()=>{c&&b(u)}),[b,u,c]),(0,r.jsx)("form",Object.assign({className:s.css`
        max-width: ${"none"!==g?g+"px":g};
        width: 100%;
      `,onSubmit:v(n)},m,{children:h(Object.assign({errors:x.errors,formState:x},y))}))}},46889:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(32714),o=n(31625),l=n(66946),d=n(45916);const c=["children","label","tooltip","labelWidth","invalid","loading","disabled","required","className","htmlFor","grow","shrink","error","transparent","interactive"];const u=e=>{let{children:t,label:n,tooltip:u,labelWidth:p="auto",invalid:g,loading:m,disabled:f,required:v,className:b,htmlFor:x,grow:y,shrink:w,error:j,transparent:S,interactive:C}=e,k=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const N=(0,i.l4)(),O=h(N,y,w),I=null!=x?x:(0,r.getChildId)(t),T="string"==typeof n?(0,d.jsx)(l.W,{interactive:C,width:p,tooltip:u,htmlFor:I,transparent:S,children:`${n}${v?" *":""}`}):n;return(0,d.jsxs)("div",Object.assign({className:(0,s.cx)(O.container,b)},k,{children:[T,(0,d.jsxs)("div",{className:O.childContainer,children:[a.cloneElement(t,{invalid:g,disabled:f,loading:m}),g&&j&&(0,d.jsx)("div",{className:(0,s.cx)(O.fieldValidationWrapper),children:(0,d.jsx)(o.S,{children:j})})]})]}))};u.displayName="InlineField";const h=(e,t,n)=>({container:s.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} ${n?1:0} auto;
      margin: 0 ${e.spacing(.5)} ${e.spacing(.5)} 0;
    `,childContainer:s.css`
      flex: ${t?1:0} ${n?1:0} auto;
    `,fieldValidationWrapper:s.css`
      margin-top: ${e.spacing(.5)};
    `})},34117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=["children","className"];const o=e=>{let{children:t,className:n}=e,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const d=(0,a.wW)(l);return(0,i.jsx)("div",Object.assign({className:(0,s.cx)(d.container,n)},o,{children:t}))},l=e=>({container:s.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${e.spacing(.5)};
    `})},66946:(e,t,n)=>{"use strict";n.d(t,{W:()=>c});var s=n(52423),a=n(68404),i=n(16755),r=n(99500),o=n(21888),l=n(45916);const d=["children","className","tooltip","width","transparent","interactive","as"];const c=e=>{let{children:t,className:n,tooltip:c,width:h,transparent:p,interactive:g,as:m="label"}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const v=(0,i.wW)((0,a.useCallback)((e=>u(e,p,h)),[p,h]));return(0,l.jsxs)(m,Object.assign({className:(0,s.cx)(v.label,n)},f,{children:[t,c&&(0,l.jsx)(o.u,{interactive:g,placement:"top",content:c,theme:"info",children:(0,l.jsx)(r.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})})]}))},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return{label:s.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
      background-color: ${t?"transparent":e.colors.background.secondary};
      height: ${e.spacing(e.components.height.md)};
      line-height: ${e.spacing(e.components.height.md)};
      margin-right: ${e.spacing(.5)};
      border-radius: ${e.shape.borderRadius(2)};
      border: none;
      width: ${n?"auto"!==n?8*n+"px":n:"100%"};
      color: ${e.colors.text.primary};
    `,icon:s.css`
      color: ${e.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${e.colors.text.primary};
      }
    `}}},70946:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=["children","className","grow"];const o=e=>{let{children:t,className:n,grow:o}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const c=(0,a.wW)((e=>l(e,o)));return(0,i.jsx)("div",Object.assign({className:(0,s.cx)(c.container,n)},d,{children:t}))};o.displayName="InlineSegmentGroup";const l=(e,t)=>({container:s.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin-bottom: ${e.spacing(.5)};
    `})},83744:(e,t,n)=>{"use strict";n.d(t,{F:()=>d,_:()=>c});var s=n(52423),a=(n(68404),n(50191)),i=n(16755),r=n(99500),o=n(45916);const l=["children","description","className","category"];const d=(0,a.B)((e=>({label:s.css`
      label: Label;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      max-width: 480px;
    `,labelContent:s.css`
      display: flex;
      align-items: center;
    `,description:s.css`
      label: Label-description;
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightRegular};
      margin-top: ${e.spacing(.25)};
      display: block;
    `,categories:s.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:s.css`
      margin: 0 ${e.spacing(.25)};
    `}))),c=e=>{let{children:t,description:n,className:a,category:c}=e,u=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const h=(0,i.l4)(),p=d(h),g=null==c?void 0:c.map(((e,t)=>(0,o.jsxs)("span",{className:p.categories,children:[(0,o.jsx)("span",{children:e}),(0,o.jsx)(r.J,{name:"angle-right",className:p.chevron})]},`${e}/${t}`)));return(0,o.jsx)("div",{className:(0,s.cx)(p.label,a),children:(0,o.jsxs)("label",Object.assign({},u,{children:[(0,o.jsxs)("div",{className:p.labelContent,children:[g,t]}),n&&(0,o.jsx)("span",{className:p.description,children:n})]}))})}},86354:(e,t,n)=>{"use strict";n.d(t,{G:()=>c,I:()=>u});var s=n(9085),a=n.n(s),i=n(68404),r=n(37722),o=n(45916);const l=["validationEvents","className","hideErrorMessage","inputRef"];function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c;!function(e){e.Invalid="invalid",e.Valid="valid"}(c||(c={}));class u extends i.PureComponent{constructor(){super(...arguments),d(this,"state",{error:null}),d(this,"validatorAsync",(e=>t=>{const n=(0,r.Gu)(t.target.value,e);this.setState((e=>Object.assign({},e,{error:n?n[0]:null})))})),d(this,"populateEventPropsWithStatus",((e,t)=>{const n=Object.assign({},e);return t?(Object.keys(r.JU).forEach((s=>{((0,r.z3)(s,t)||e[s])&&(n[s]=async n=>{n.persist(),(0,r.z3)(s,t)&&await this.validatorAsync(t[s]).apply(this,[n]),e[s]&&e[s].apply(null,[n,this.status])})})),n):n}))}get status(){return this.state.error?c.Invalid:c.Valid}get isInvalid(){return this.status===c.Invalid}render(){const e=this.props,{validationEvents:t,className:n,hideErrorMessage:s,inputRef:i}=e,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l),{error:d}=this.state,c=a()("gf-form-input",{invalid:this.isInvalid},n),u=this.populateEventPropsWithStatus(r,t);return(0,o.jsxs)("div",{style:{flexGrow:1},children:[(0,o.jsx)("input",Object.assign({},u,{ref:i,className:c})),d&&!s&&(0,o.jsx)("span",{children:d})]})}}d(u,"defaultProps",{className:""})},45335:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,Z:()=>o});n(68404);var s=n(8887),a=n(99500),i=n(45916);const r=e=>{const t=e.selectProps.menuIsOpen;return(0,i.jsx)(s.c.IndicatorsContainer,Object.assign({},e,{children:(0,i.jsx)(a.J,{name:t?"angle-up":"angle-down",style:{marginTop:"7px"}})}))},o=r},15996:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,Z:()=>r});n(68404);var s=n(8887),a=n(45916);const i=e=>{const{children:t}=e;return(0,a.jsx)(s.c.NoOptionsMessage,Object.assign({},e,{children:(0,a.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,a.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:t})})}))},r=i},62717:(e,t,n)=>{"use strict";n.d(t,{qb:()=>C,Ph:()=>S});var s,a=n(9085),i=n.n(a),r=n(68404),o=n(8887),l=n(37826),d=n(30250),c=n(83238),u=n(16755),h=n(22222),p=n(93698),g=n(2087),m=n(28728),f=n(21888),v=n(45335),b=n(15996),x=n(99500),y=n(45916);const w=e=>{const{children:t,isSelected:n,data:a}=e;return(0,y.jsx)(o.c.Option,Object.assign({},e,{children:(0,y.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[a.imgUrl&&(0,y.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:a.imgUrl,alt:""}),(0,y.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,y.jsx)("div",{children:t}),a.description&&(0,y.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:a.description})]}),n&&(s||(s=(0,y.jsx)(x.J,{name:"check","aria-hidden":"true"})))]})}))};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:n,onChange:s,options:a,placeholder:r,width:o,value:d,className:u,isDisabled:h,isLoading:p,isSearchable:g,isClearable:f,backspaceRemovesValue:v,isMulti:b,autoFocus:x,openMenuOnFocus:w,onBlur:j,maxMenuHeight:C,noOptionsMessage:N,isOpen:O,components:I,tooltipContent:T,tabSelectsValue:$,onCloseMenu:R,onOpenMenu:P,allowCustomValue:D,formatCreateLabel:A,"aria-label":M}=this.props;let L="";o&&(L="width-"+o);let F=l.ZP;const E={};D&&(F=c.Z,E.formatCreateLabel=null!=A?A:e=>e);const V=i()("gf-form-input","gf-form-input--form-dropdown",L,u),z=Object.assign({},S.defaultProps.components,I);return(0,y.jsx)(k,{onCloseMenu:R,onOpenMenu:P,tooltipContent:T,isOpen:O,children:(i,o)=>(0,y.jsx)(F,Object.assign({captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:V,components:z,defaultValue:e,value:d,getOptionLabel:t,getOptionValue:n,menuShouldScrollIntoView:!1,isSearchable:g,onChange:s,options:a,placeholder:r||"Choose",styles:(0,m.Z)(this.context),isDisabled:h,isLoading:p,isClearable:f,autoFocus:x,onBlur:j,openMenuOnFocus:w,maxMenuHeight:C,noOptionsMessage:N,isMulti:b,backspaceRemovesValue:v,menuIsOpen:O,onMenuOpen:i,onMenuClose:o,tabSelectsValue:$,"aria-label":M},E))})}}j(S,"contextType",u.Ni),j(S,"defaultProps",{className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:w,SingleValue:g.P,IndicatorsContainer:v.Z,MenuList:e=>(0,y.jsx)(o.c.MenuList,Object.assign({},e,{children:(0,y.jsx)(h.$,{autoHide:!1,autoHeightMax:"inherit",children:e.children})})),Group:p.n}});class C extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:n,onChange:s,placeholder:a,width:r,value:o,className:l,loadOptions:c,defaultOptions:u,isLoading:h,loadingMessage:p,noOptionsMessage:f,isDisabled:x,isSearchable:j,isClearable:S,backspaceRemovesValue:C,autoFocus:N,onBlur:O,openMenuOnFocus:I,maxMenuHeight:T,isMulti:$,tooltipContent:R,onCloseMenu:P,onOpenMenu:D,isOpen:A}=this.props;let M="";r&&(M="width-"+r);const L=i()("gf-form-input","gf-form-input--form-dropdown",M,l);return(0,y.jsx)(k,{onCloseMenu:P,onOpenMenu:D,tooltipContent:R,isOpen:A,children:(i,r)=>(0,y.jsx)(d.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:L,components:{Option:w,SingleValue:g.P,IndicatorsContainer:v.Z,NoOptionsMessage:b.Z},defaultValue:e,value:o,getOptionLabel:t,getOptionValue:n,menuShouldScrollIntoView:!1,onChange:s,loadOptions:c,isLoading:h,defaultOptions:u,placeholder:a||"Choose",styles:(0,m.Z)(this.context),loadingMessage:p,noOptionsMessage:f,isDisabled:x,isSearchable:j,isClearable:S,autoFocus:N,onBlur:O,openMenuOnFocus:I,maxMenuHeight:T,isMulti:$,backspaceRemovesValue:C})})}}j(C,"contextType",u.Ni),j(C,"defaultProps",{className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300});class k extends r.PureComponent{constructor(){super(...arguments),j(this,"state",{isOpenInternal:!1}),j(this,"onOpenMenu",(()=>{const{onOpenMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!0})})),j(this,"onCloseMenu",(()=>{const{onCloseMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!1})}))}render(){const{children:e,isOpen:t,tooltipContent:n}=this.props,{isOpenInternal:s}=this.state;let a;return(s||t)&&(a=!1),n?(0,y.jsx)(f.u,{show:a,content:n,placement:"bottom",children:(0,y.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}):(0,y.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}}},18083:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var s,a=n(82897),i=n(68404),r=n(99500),o=n(21888),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.PureComponent{constructor(){super(...arguments),d(this,"state",{id:(0,a.uniqueId)()}),d(this,"internalOnChange",(e=>{e.stopPropagation(),this.props.onChange(e)}))}render(){const{labelClass:e="",switchClass:t="",label:n,checked:a,transparent:i,className:d,tooltip:c,tooltipPlacement:u}=this.props,h=this.state.id,p=`gf-form-label ${e} ${i?"gf-form-label--transparent":""} pointer`,g=`gf-form-switch ${t} ${i?"gf-form-switch--transparent":""}`;return(0,l.jsx)("div",{className:"gf-form-switch-container-react",children:(0,l.jsxs)("label",{htmlFor:h,className:`gf-form gf-form-switch-container ${d||""}`,children:[n&&(0,l.jsxs)("div",{className:p,children:[n,c&&(0,l.jsx)(o.u,{placement:u||"auto",content:c,theme:"info",children:(0,l.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,l.jsx)(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}),(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)("input",{id:h,type:"checkbox",checked:a,onChange:this.internalOnChange}),s||(s=(0,l.jsx)("span",{className:"gf-form-switch__slider"}))]})]})})}}},58101:(e,t,n)=>{"use strict";n.d(t,{D:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=["children","className"];const o=e=>({legend:s.css`
      font-size: ${e.typography.h3.fontSize};
      font-weight: ${e.typography.fontWeightRegular};
      margin: 0 0 ${e.spacing(2)} 0;
    `}),l=e=>{let{children:t,className:n}=e,l=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const d=(0,a.wW)(o);return(0,i.jsx)("legend",Object.assign({className:(0,s.cx)(d.legend,n)},l,{children:t}))}},37625:(e,t,n)=>{"use strict";n.d(t,{S:()=>m});var s=n(52423),a=n(82897),i=n(68404),r=n(42454),o=n(16755),l=n(99500),d=n(50191),c=n(58906),u=n(50578),h=n(45916);const p=i.forwardRef(((e,t)=>{let{children:n,active:s=!1,disabled:a=!1,size:i="md",onChange:r,onClick:l,id:d,name:c,description:u,fullWidth:p,"aria-label":m}=e;const f=(0,o.l4)(),v=g(f,i,p);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{type:"radio",className:v.radio,onChange:r,onClick:l,disabled:a,id:d,checked:s,name:c,"aria-label":m,ref:t}),(0,h.jsx)("label",{className:v.radioLabel,htmlFor:d,title:u,children:n})]})}));p.displayName="RadioButton";const g=(0,d.B)(((e,t,n)=>{const{fontSize:a,height:i,padding:r}=(0,u.iL)(t,e),o=e.colors.text.secondary,l=e.colors.text.primary,d=i*e.spacing.gridSize-4-2;return{radio:s.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,c.getFocusStyles)(e)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,c.getMouseFocusStyles)(e)}
      }

      &:disabled + label {
        color: ${e.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:s.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${d}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${d}px;
      color: ${o};
      padding: ${e.spacing(0,r)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${n?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${l};
      }
    `}}));function m(e){let{options:t,value:n,onChange:d,onClick:c,disabled:u,disabledOptions:g,size:m="md",id:v,className:b,fullWidth:x=!1,autoFocus:y=!1}=e;const w=(0,i.useCallback)((e=>()=>{d&&d(e.value)}),[d]),j=(0,i.useCallback)((e=>()=>{c&&c(e.value)}),[c]),S=null!=v?v:(0,a.uniqueId)("radiogroup-"),C=(0,i.useRef)(S),k=(0,o.wW)(f),N=(0,i.useRef)(null);return(0,i.useEffect)((()=>{y&&N.current&&N.current.focus()}),[y]),(0,h.jsx)("div",{className:(0,s.cx)(k.radioGroup,x&&k.fullWidth,b),children:t.map(((e,t)=>{const s=g&&e.value&&g.includes(e.value),a=e.icon?(0,r.iJ)(e.icon):void 0;return(0,h.jsxs)(p,{size:m,disabled:s||u,active:n===e.value,"aria-label":e.ariaLabel,onChange:w(e),onClick:j(e),id:`option-${e.value}-${S}`,name:C.current,description:e.description,fullWidth:x,ref:n===e.value?N:void 0,children:[a&&(0,h.jsx)(l.J,{name:a,className:k.icon}),e.imgUrl&&(0,h.jsx)("img",{src:e.imgUrl,alt:e.label,className:k.img}),e.label," ",e.component?(0,h.jsx)(e.component,{}):null]},`o.label-${t}`)}))})}m.displayName="RadioButtonGroup";const f=e=>({radioGroup:(0,s.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${e.components.input.borderColor}`,borderRadius:e.shape.borderRadius(),padding:"2px"}),fullWidth:(0,s.css)({display:"flex"}),icon:s.css`
      margin-right: 6px;
    `,img:s.css`
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      margin-right: ${e.spacing(1)};
    `})},50578:(e,t,n)=>{"use strict";n.d(t,{GL:()=>i,RK:()=>r,ht:()=>l,iL:()=>c,nf:()=>o});var s=n(52423),a=n(58906);const i=e=>s.css`
  &:focus {
    ${(0,a.focusCss)(e)}
  }
`,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?e.colors.error.border:e.components.input.borderColor,a=t?e.colors.error.shade:e.components.input.borderHover,i=e.components.input.background,r=e.components.input.text,l=e.isDark?"#2e2f35":"#bab4ca";return(0,s.cx)(o(e),s.css`
      background: ${i};
      line-height: ${e.typography.body.lineHeight};
      font-size: ${e.typography.size.md};
      color: ${r};
      border: 1px solid ${n};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
        -webkit-text-fill-color: ${r} !important;
        border-color: ${l};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${e.colors.background.primary}, 0 0 0px 4px ${e.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
        -webkit-text-fill-color: ${r} !important;
      }

      &:hover {
        border-color: ${a};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${e.colors.action.disabledBackground};
        color: ${e.colors.action.disabledText};
        border: 1px solid ${e.colors.action.disabledBackground};

        &:hover {
          border-color: ${n};
        }
      }

      &::placeholder {
        color: ${e.colors.text.disabled};
        opacity: 1;
      }
    `)},o=e=>s.css`
    padding: ${e.spacing(0,1,0,1)};
  `,l=()=>({sm:s.css`
      width: ${d("sm")};
    `,md:s.css`
      width: ${d("md")};
    `,lg:s.css`
      width: ${d("lg")};
    `,auto:s.css`
      width: ${d("auto")};
    `}),d=e=>{switch(e){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";default:return"auto"}};function c(e,t){switch(e){case"sm":return{padding:1,fontSize:t.typography.size.sm,height:t.components.height.sm};case"lg":return{padding:3,fontSize:t.typography.size.lg,height:t.components.height.lg};default:return{padding:2,fontSize:t.typography.size.md,height:t.components.height.md}}}},47868:(e,t,n)=>{"use strict";n.d(t,{a:()=>v});var s=n(21256),a=n.n(s),i=n(68404),r=n(55343),o=n(52410),l=n(87602),d=n(43456),c=n(663),u=n(84542);const h={mode:l.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function p(e,t,n){const s=null!=n,a=Math.min(.15*e/1.5,20),i=s?t-1.5*a:t;return{showLabel:s,gaugeHeight:Math.min(i,e),titleFontSize:a}}function g(e,t,n,s){var a,i,r,d,p,g;if((null===(a=t.color)||void 0===a?void 0:a.mode)!==c.S.Thresholds)return[{value:null!==(p=t.min)&&void 0!==p?p:o.Hx,color:null!==(g=n.color)&&void 0!==g?g:c.R}];const m=null!==(i=t.thresholds)&&void 0!==i?i:h,f=m.mode===l.H.Percentage,v=m.steps;let b=null!==(r=t.min)&&void 0!==r?r:o.Hx,x=null!==(d=t.max)&&void 0!==d?d:o.Z3;f&&(b=0,x=100);const y=(0,u.m1)(b,v),w=(0,u.m1)(x,v),j=[{value:+b.toFixed(e),color:s.visualization.getColorByName(y.color)}];let S=!0;for(let e=0;e<v.length;e++){const t=v[e];if(S){y===t&&(S=!1);continue}const n=v[e-1];if(j.push({value:t.value,color:s.visualization.getColorByName(n.color)}),t===w)break}return j.push({value:+x.toFixed(e),color:s.visualization.getColorByName(w.color)}),j}var m=n(45916);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends i.PureComponent{constructor(){super(...arguments),f(this,"canvasElement",null),f(this,"renderVisualization",(()=>{var e;const{width:t,value:n,height:s,onClick:a,text:i}=this.props,r=p(t,s,n.title);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{height:`${r.gaugeHeight}px`,width:"100%"},ref:e=>this.canvasElement=e,onClick:a}),r.showLabel&&(0,m.jsx)("div",{style:{textAlign:"center",fontSize:null!==(e=null==i?void 0:i.titleSize)&&void 0!==e?e:r.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"},children:n.title})]})}))}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){var e,t,n,s,i,c;const{field:u,showThresholdLabels:h,showThresholdMarkers:m,width:f,height:v,theme:b,value:x}=this.props,y=p(f,v,x.title),w=Math.min(f,y.gaugeHeight),j="v1"in b?b.colors.background.secondary:b.colors.bg2,S=h?1.5:1,C=Math.min(w/5.5,40)/S,k=C/5,N=(0,r.zc)(x),O=.9*Math.min(f,1.3*w)-(2*(C+(m?k:0)+(h?10:0))+10),I=null!==(e=null===(t=this.props.text)||void 0===t?void 0:t.valueSize)&&void 0!==e?e:(0,d.MX)(N,O,w,1,1.7*C),T=Math.max(I/2.5,12);let $=null!==(n=u.min)&&void 0!==n?n:o.Hx,R=null!==(s=u.max)&&void 0!==s?s:o.Z3,P=x.numeric;(null===(i=u.thresholds)||void 0===i?void 0:i.mode)===l.H.Percentage&&($=0,R=100,P=void 0===x.percent?(P-$)/(R-$)*100:100*x.percent);const D=void 0===u.decimals?2:u.decimals;m&&($=+$.toFixed(D),R=+R.toFixed(D));const A={series:{gauges:{gauge:{min:$,max:R,neutralValue:null===(c=u.custom)||void 0===c?void 0:c.neutral,background:{color:j},border:{color:null},shadow:{show:!1},width:C},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:g(D,u,x,b),label:{show:h,margin:k+1,font:{size:T}},show:m,width:k},value:{color:x.color,formatter:()=>N,font:{size:I,family:b.typography.fontFamily}},show:!0}}},M={data:[[0,P]],label:x.title};try{this.canvasElement&&a().plot(this.canvasElement,[M],A)}catch(e){console.error("Gauge rendering error",e,A,x)}}render(){return(0,m.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}f(v,"defaultProps",{showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:h}})},92554:(e,t,n)=>{"use strict";n.d(t,{k:()=>w});var s=n(21256),a=n.n(s),i=n(82897),r=n(68404),o=n(9841),l=n(27864),d=n(45432),c=n(9593),u=n(62335),h=n(32735),p=n(45916);const g=e=>{let{dimensions:t,activeDimensions:n,pos:s,timeZone:a}=e,i=null;if(null===n.xAxis)return null;n.yAxis&&(i=n.yAxis[0]);const r=n.xAxis[1]?(0,o.jC)(t.xAxis,n.xAxis[0],n.xAxis[1]):s.x,l=(0,h.wu)(t.yAxis.columns,t.xAxis.columns,r,a),d=l.time,c=l.results.map(((e,t)=>({color:e.color,label:e.label,value:e.value,isActive:i===t})));return(0,p.jsx)(u.c,{series:c,timestamp:d})};g.displayName="MultiModeGraphTooltip";var m=n(55343),f=n(32934);const v=e=>{let{dimensions:t,activeDimensions:n,timeZone:s}=e;if(null===n.yAxis||void 0===n.yAxis[1]||null===n.xAxis||void 0===n.xAxis[1])return null;const a=(0,o.jC)(t.xAxis,n.xAxis[0],n.xAxis[1]),i=(0,o.$q)(t.xAxis,n.xAxis[0]),r=i.display?(0,m.zc)(i.display(a)):a,l=(0,o.$q)(t.yAxis,n.yAxis[0]),d=(0,o.jC)(t.yAxis,n.yAxis[0],n.yAxis[1]),c=(0,l.display)(d);return(0,p.jsx)(u.c,{series:[{color:c.color,label:(0,f.C)(l),value:(0,m.zc)(c)}],timestamp:r})};v.displayName="SingleModeGraphTooltip";const b=e=>{let{mode:t=l.f3.Single,dimensions:n,activeDimensions:s,pos:a,timeZone:i}=e;return s&&s.xAxis?"single"===t?(0,p.jsx)(v,{dimensions:n,activeDimensions:s,timeZone:i}):(0,p.jsx)(g,{dimensions:n,activeDimensions:s,pos:a,timeZone:i}):null};var x;function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}b.displayName="GraphTooltip";class w extends r.PureComponent{constructor(){super(...arguments),y(this,"state",{isTooltipVisible:!1,isContextVisible:!1}),y(this,"element",null),y(this,"$element",void 0),y(this,"onPlotSelected",((e,t)=>{const{onHorizontalRegionSelected:n}=this.props;n&&n(t.xaxis.from,t.xaxis.to)})),y(this,"onPlotHover",((e,t,n)=>{this.setState({isTooltipVisible:!0,activeItem:n,pos:t})})),y(this,"onPlotClick",((e,t,n)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:n,contextPos:t})})),y(this,"renderTooltip",(()=>{const{children:e,series:t,timeZone:n}=this.props,{pos:s,activeItem:a,isTooltipVisible:i}=this.state;let c=null;if(!i||!s||0===t.length)return null;if(r.Children.forEach(e,(e=>{if(c)return;(e&&e.type&&(e.type.displayName||e.type.name))===d.I.displayName&&(c=e)})),!c)return null;const u=c.props,h=u.mode||"single";if(!a&&"single"===h)return null;const p=u.tooltipComponent||b,g={xAxis:[a?a.series.seriesIndex:0,a?a.dataIndex:void 0],yAxis:a?[a.series.seriesIndex,a.dataIndex]:null},m={dimensions:{xAxis:(0,o.q2)("xAxis",t.map((e=>e.timeField))),yAxis:(0,o.q2)("yAxis",t.map((e=>e.valueField)))},activeDimensions:g,pos:s,mode:u.mode||l.f3.Single,timeZone:n},f=r.createElement(p,Object.assign({},m));return r.cloneElement(c,{content:f,position:{x:s.pageX,y:s.pageY},offset:{x:10,y:10}})})),y(this,"renderContextMenu",(()=>{const{series:e}=this.props,{contextPos:t,contextItem:n,isContextVisible:s}=this.state;if(!s||!t||!n||0===e.length)return null;const a={xAxis:[n?n.series.seriesIndex:0,n?n.dataIndex:void 0],yAxis:n?[n.series.seriesIndex,n.dataIndex]:null},i={xAxis:(0,o.q2)("xAxis",e.map((e=>e.timeField))),yAxis:(0,o.q2)("yAxis",e.map((e=>e.valueField)))},r={x:t.pageX,y:t.pageY,onClose:()=>this.setState({isContextVisible:!1}),getContextMenuSource:()=>({datapoint:n.datapoint,dataIndex:n.dataIndex,series:n.series,seriesIndex:n.series.seriesIndex,pageX:t.pageX,pageY:t.pageY}),timeZone:this.props.timeZone,dimensions:i,contextDimensions:a};return(0,p.jsx)(c.w,Object.assign({},r))})),y(this,"getBarWidth",(()=>{const{series:e}=this.props;return Math.min(...e.map((e=>e.timeStep)))}))}componentDidUpdate(e,t){e!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=a()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(e){return 0===e.length?[{show:!0,min:-1,max:1}]:(0,i.uniqBy)(e.map((e=>{const t=e.yAxis?e.yAxis.index:1;return{show:!0,index:t,position:1===t?"left":"right",min:e.yAxis&&e.yAxis.min&&!isNaN(e.yAxis.min)?e.yAxis.min:null,tickDecimals:e.yAxis&&e.yAxis.tickDecimals&&!isNaN(e.yAxis.tickDecimals)?e.yAxis.tickDecimals:null}})),(e=>e.index))}draw(){if(null===this.element)return;const{width:e,series:t,timeRange:n,showLines:s,showBars:i,showPoints:r,isStacked:o,lineWidth:l,timeZone:d,onHorizontalRegionSelected:c}=this.props;if(!e)return;const u=e/100,p=n.from.valueOf(),g=n.to.valueOf(),m=this.getYAxes(t),f={legend:{show:!1},series:{stack:o,lines:{show:s,lineWidth:l,zero:!1},points:{show:r,fill:1,fillColor:!1,radius:2},bars:{show:i,fill:1,barWidth:i?this.getBarWidth()/1.5:1,zero:!1,lineWidth:l},shadowSize:0},xaxis:{timezone:d,show:!0,mode:"time",min:p,max:g,label:"Datetime",ticks:u,timeformat:(0,h.mc)(u,p,g),tickFormatter:h.sV},yaxes:m,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:c?"x":null,color:"#666"},crosshair:{mode:"x"}};try{a().plot(this.element,t.filter((e=>e.isVisible)),f)}catch(e){throw console.error("Graph rendering error",e,f,t),new Error("Error rendering panel")}}render(){const{ariaLabel:e,height:t,width:n,series:s}=this.props,a=0===s.length,i=this.renderTooltip(),r=this.renderContextMenu();return(0,p.jsxs)("div",{className:"graph-panel","aria-label":e,children:[(0,p.jsx)("div",{className:"graph-panel__chart",ref:e=>this.element=e,style:{height:t,width:n},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),a&&(x||(x=(0,p.jsx)("div",{className:"datapoints-warning",children:"No data"}))),i,r]})}}y(w,"defaultProps",{showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1})},9593:(e,t,n)=>{"use strict";n.d(t,{b:()=>f,w:()=>m});var s=n(52423),a=(n(68404),n(9841)),i=n(6432),r=n(16755),o=n(33514),l=n(92811),d=n(54761),c=n(9655),u=n(21357),h=n(10814),p=n(45916);const g=["getContextMenuSource","timeZone","itemsGroup","dimensions","contextDimensions"];const m=e=>{let{getContextMenuSource:t,timeZone:n,itemsGroup:s,dimensions:r,contextDimensions:l}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,g);const h=t(),m=s?s.map((e=>{var t;return Object.assign({},e,{items:null===(t=e.items)||void 0===t?void 0:t.filter((e=>e.label))})})):[];return(0,p.jsx)(o.x,Object.assign({},d,{renderMenuItems:()=>null==m?void 0:m.map(((e,t)=>(0,p.jsx)(c.k,{label:e.label,children:(e.items||[]).map((e=>(0,p.jsx)(u.s,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},`${e.label}`)))},`${e.label}${t}`))),renderHeader:()=>{var e;if(!h)return null;let t;if(null!=r&&r.yAxis&&null!=l&&null!==(e=l.yAxis)&&void 0!==e&&e[1]){const e=(0,a.jC)(r.yAxis,l.yAxis[0],l.yAxis[1]);t=(0,h.series.valueField.display)(e)}const s=(0,i.dq)(h.datapoint[0],{defaultWithMS:h.series.hasMsResolution,timeZone:n});return(0,p.jsx)(f,{timestamp:s,seriesColor:h.series.color,displayName:h.series.alias||h.series.label,displayValue:t})}}))},f=e=>{let{timestamp:t,seriesColor:n,displayName:s,displayValue:a}=e;const i=(0,r.wW)(v);return(0,p.jsxs)("div",{className:i.wrapper,children:[(0,p.jsx)("strong",{children:t}),(0,p.jsxs)(d.Lh,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(h.F,{color:n}),(0,p.jsx)("span",{className:i.displayName,children:s})]}),a&&(0,p.jsx)(l.W,{value:a})]})]})};function v(e){return{wrapper:s.css`
      padding: ${e.spacing(.5)} ${e.spacing(1)};
      font-size: ${e.typography.size.sm};
      z-index: ${e.zIndex.tooltip};
    `,displayName:s.css`
      white-space: nowrap;
      padding-left: ${e.spacing(.5)};
    `}}},89164:(e,t,n)=>{"use strict";n.d(t,{U:()=>c});var s=n(52423),a=(n(68404),n(50191)),i=n(22222),r=n(38914),o=n(92554),l=n(45916);const d=(0,a.B)((e=>{let{placement:t}=e;return{wrapper:s.css`
    display: flex;
    flex-direction: ${"bottom"===t?"column":"row"};
  `,graphContainer:s.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:s.css`
    padding: 10px 0;
    max-height: ${"bottom"===t?"35%":"none"};
  `}})),c=e=>{const{series:t,timeRange:n,width:s,height:a,showBars:c,showLines:u,showPoints:h,sortLegendBy:p,sortLegendDesc:g,legendDisplayMode:m,legendVisibility:f,placement:v,onSeriesToggle:b,onToggleSort:x,hideEmpty:y,hideZero:w,isStacked:j,lineWidth:S,onHorizontalRegionSelected:C,timeZone:k,children:N,ariaLabel:O}=e,{graphContainer:I,wrapper:T,legendContainer:$}=d(e),R=t.reduce(((e,t)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=0===e.reduce(((e,t)=>e+(t[1]||0)),0),a=!e.reduce(((e,t)=>e&&null!==t[1]),!0);return t&&a||n&&s}(t.data,y,w)?e:e.concat([{label:t.label,color:t.color||"",disabled:!t.isVisible,yAxis:t.yAxis.index,getDisplayValues:()=>t.info||[]}])),[]);return(0,l.jsxs)("div",{className:T,"aria-label":O,children:[(0,l.jsx)("div",{className:I,children:(0,l.jsx)(o.k,{series:t,timeRange:n,timeZone:k,showLines:u,showPoints:h,showBars:c,width:s,height:a,isStacked:j,lineWidth:S,onHorizontalRegionSelected:C,children:N})}),f&&(0,l.jsx)("div",{className:$,children:(0,l.jsx)(i.$,{hideHorizontalTrack:!0,children:(0,l.jsx)(r.l,{items:R,displayMode:m,placement:v,sortBy:p,sortDesc:g,onLabelClick:(e,t)=>{b&&b(e.label,t)},onToggleSort:x})})})]})}},32735:(e,t,n)=>{"use strict";n.d(t,{mc:()=>c,sV:()=>d,wu:()=>l});var s=n(55343),a=n(32934),i=n(6432),r=n(74333);const o=(e,t)=>{let n,s=0,a=e.values.length-1;for(;;){if(s>a)return Math.max(a,0);n=Math.floor((s+a)/2);const i=e.values.get(n);if(i===t)return n;i&&i<t?s=n+1:a=n-1}},l=(e,t,n,i)=>{let r,l,d,c,u;const h=[];let p,g;for(r=0;r<e.length;r++){l=e[r];const i=t[r];d=o(i,n),c=n-i.values.get(d),u=i.values.get(d),(void 0===p||c>=0&&(c<p||p<0)||c<0&&c>p)&&(p=c,g=i.display?(0,s.zc)(i.display(u)):u);const m=l.display(l.values.get(d));h.push({value:(0,s.zc)(m),datapointIndex:d,seriesIndex:r,color:m.color,label:(0,a.C)(l),time:i.display?(0,s.zc)(i.display(u)):u})}return{results:h,time:g}},d=(e,t)=>{var n,s;return(0,i.dq)(e,{format:null==t||null===(n=t.options)||void 0===n?void 0:n.timeformat,timeZone:null==t||null===(s=t.options)||void 0===s?void 0:s.timezone})},c=(e,t,n)=>{if(t&&n&&e){const s=n-t,a=s/e/1e3,i=86400010,o=31536e6;return a<=10?r.U6.interval.millisecond:a<=45?r.U6.interval.second:s<=i?r.U6.interval.minute:a<=8e4?r.U6.interval.hour:s<=o?r.U6.interval.day:a<=31536e3?r.U6.interval.month:r.U6.interval.year}return r.U6.interval.minute}},22:(e,t,n)=>{"use strict";n.d(t,{d:()=>b,j:()=>v});var s=n(68404),a=n(95484),i=n(95027),r=n(77401),o=n(31919),l=n(92721),d=n(94025),c=n(27783),u=n(30733),h=n(13131),p=n(39571),g=n(78846),m=n(45916);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v="__fixed";class b extends s.Component{constructor(e){super(e),f(this,"panelContext",{}),f(this,"plotInstance",void 0),f(this,"subscription",new a.w0),f(this,"getTimeRange",(()=>this.props.timeRange));let t=this.prepState(e);t.alignedData=t.config.prepData([t.alignedFrame]),this.state=t,this.plotInstance=s.createRef()}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;const{frames:s,fields:a,preparePlotFrame:i}=e,l=(i||g.R)(s,a||{x:r.Ls.get(o.mi.firstTimeField).get({}),y:r.Ls.get(o.mi.numeric).get({})},e.timeRange);if((0,p.Zp)("GraphNG",!1,"data aligned",l),l){var d;let s=null===(d=this.state)||void 0===d?void 0:d.config;t&&(s=e.prepConfig(l,this.props.frames,this.getTimeRange),(0,p.Zp)("GraphNG",!1,"config prepared",s)),n={alignedFrame:l,config:s},(0,p.Zp)("GraphNG",!1,"data prepared",n.alignedData)}return n}handleCursorUpdate(e){var t,n;const s=null===(t=e.payload)||void 0===t||null===(n=t.point)||void 0===n?void 0:n.time,a=this.plotInstance.current;if(a&&s){const e=a.valToPos(s,"x");let t;if(e&&(t=(0,p.ah)(a,a.posToIdx(e))),!t||!e)return;a.setCursor({left:e,top:t})}}componentDidMount(){this.panelContext=this.context;const{eventBus:e}=this.panelContext;this.subscription.add(e.getStream(l.es).pipe((0,i.p)(50)).subscribe({next:t=>{e!==t.origin&&this.handleCursorUpdate(t)}})),this.subscription.add(e.getStream(d.IA).pipe((0,i.p)(50)).subscribe({next:e=>this.handleCursorUpdate(e)})),this.subscription.add(e.getStream(l.xH).pipe((0,i.p)(50)).subscribe({next:()=>{var e;const t=null===(e=this.plotInstance)||void 0===e?void 0:e.current;t&&t.setCursor({left:-10,top:-10})}}))}componentDidUpdate(e){const{frames:t,structureRev:n,timeZone:s,propsToDiff:a}=this.props,i=!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(const s of n)if("function"==typeof s){if(!s(e,t))return!1}else if(t[s]!==e[s])return!1;return!0}(e,this.props,a);if(t!==e.frames||i||s!==e.timeZone){let t=this.prepState(this.props,!1);if(t){(void 0===this.state.config||s!==e.timeZone||n!==e.structureRev||!n||i)&&(t.config=this.props.prepConfig(t.alignedFrame,this.props.frames,this.getTimeRange),(0,p.Zp)("GraphNG",!1,"config recreated",t.config)),t.alignedData=t.config.prepData([t.alignedFrame]),this.setState(t)}}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:e,height:t,children:n,timeRange:s,renderLegend:a}=this.props,{config:i,alignedFrame:r,alignedData:o}=this.state;return i?(0,m.jsx)(u.AY,{width:e,height:t,legend:a(i),children:(e,t)=>(0,m.jsx)(h.N,{config:i,data:o,width:e,height:t,timeRange:s,plotRef:e=>this.plotInstance.current=e,children:n?n(i,r):null})}):null}}f(b,"contextType",c.bb)},36577:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var s=n(27843),a=n(94582),i=n(37800);const r=(e,t,n)=>e+n;function o(e){if(0===e.frame.length)return e.frame;let{frame:t,refFieldName:n,refFieldPseudoMax:o,refFieldPseudoMin:l,insertMode:d}=e;d||(d=r);const c=t.fields.find((e=>null!=n?e.name===n:e.type===s.fS.time));if(null==c)return t;c.state=Object.assign({},c.state,{nullThresholdApplied:!0});const u=t.fields.map((e=>{var t,n,s;return null!==(t=null!==(n=null===(s=e.config.custom)||void 0===s?void 0:s.insertNulls)&&void 0!==n?n:c.config.interval)&&void 0!==t?t:null})),h=new Set(u);if(h.delete(null),0===h.size)return t;if(1===h.size){const e=h.values().next().value;if(e<=0)return t;const n=c.values.toArray(),s=t.fields.map((e=>e.values.toArray())),r=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;const l=e.length,d=[];if(null!=s&&s<e[0]){let t=(0,i.mB)(s,n);for(;t<e[0];)d.push(r(t-n,t,n)),t+=n}d.push(e[0]);let c=e[0];for(let t=1;t<l;t++){const s=e[t];for(;s-c>n&&(d.push(r(c,s,n)),c+=n,o););d.push(s),c=s}if(null!=a&&a>c)for(;c+n<a;)d.push(r(c,a,n)),c+=n;const u=d.length;if(u===l)return t;const h=[];for(let n of t){let t;if(n!==e){t=Array(u);for(let s=0,a=0;s<u;s++)t[s]=e[a]===d[s]?n[a++]:null}else t=d;h.push(t)}return h}(n,s,e,l,o,d,true);return r===s?t:Object.assign({},t,{length:r[0].length,fields:t.fields.map(((e,t)=>Object.assign({},e,{values:new a.G(r[t])})))})}return t}},96904:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var s=n(94582);function a(e){return Object.assign({},e,{fields:e.fields.map((e=>{var t;const n=+(null===(t=e.config)||void 0===t?void 0:t.noValue);if(Number.isNaN(n))return e;{const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)null===t[e]&&(t[e]=n);return Object.assign({},e,{values:new s.G(t)})}}))})}},78846:(e,t,n)=>{"use strict";n.d(t,{z:()=>h,R:()=>u});var s=n(27843),a=n(94582),i=n(52902),r=n(27864),o=n(22),l=n(36577);function d(e,t,n){let s,a;for(let i=0;i<t.length;i++){if(null==t[i])null==a&&null!=s&&(a=i);else{if(null!=a){if(e[i]-s<n)for(;a<i;)t[a++]=void 0;a=null}s=e[i]}}return t}function c(e){var t,n,a;return e.type===s.fS.number&&(null===(t=e.config.custom)||void 0===t?void 0:t.drawStyle)===r.l8.Bars&&!(null!==(n=e.config.custom)&&void 0!==n&&null!==(a=n.hideFrom)&&void 0!==a&&a.viz)}function u(e,t,n){e=e.map((e=>{var t;return null!==(t=e.fields[0].state)&&void 0!==t&&t.nullThresholdApplied?e:(0,l.w)({frame:e,refFieldName:null,refFieldPseudoMin:null==n?void 0:n.from.valueOf(),refFieldPseudoMax:null==n?void 0:n.to.valueOf()})}));let r=0;e.forEach((e=>{e.fields.forEach((e=>{c(e)&&(e.config.custom=Object.assign({},e.config.custom,{spanNulls:-1}),r++)}))}));let o=1/0;r>1&&e.forEach((e=>{if(!e.fields.some(c))return;const t=e.fields[0].values.toArray();for(let e=0;e<t.length;e++)e>0&&(o=Math.min(o,t[e]-t[e-1]))}));let u=(0,i._9)({frames:e,joinBy:t.x,keep:t.y,keepOriginIndices:!0});return u?(u=function(e){let t=e.fields.find((e=>e.type===s.fS.time)),n=null==t?void 0:t.values.toArray();for(let s=0;s<e.fields.length;s++){var i;let r=e.fields[s];if(r===t||c(r))continue;let o=null===(i=r.config.custom)||void 0===i?void 0:i.spanNulls;"number"==typeof o&&-1!==o&&(r.values=new a.G(d(n,r.values.toArray(),o)))}return e}(u),o!==1/0&&(u.fields.forEach(((e,t)=>{let n=e.values.toArray();if(0===t){let e=n[n.length-1];n.push(e+o,e+2*o)}else c(e)?n.push(null,null):n.push(void 0,void 0)})),u.length+=2),u):null}function h(e){var t,n,s,a,i,l,d;const c="na",u=`${void 0!==e.min?e.min:c}-${void 0!==e.max?e.max:c}`,h=`${void 0!==(null===(t=e.custom)||void 0===t?void 0:t.axisSoftMin)?e.custom.axisSoftMin:c}-${void 0!==(null===(n=e.custom)||void 0===n?void 0:n.axisSoftMax)?e.custom.axisSoftMax:c}`,p=`${void 0!==(null===(s=e.custom)||void 0===s?void 0:s.axisPlacement)?null===(a=e.custom)||void 0===a?void 0:a.axisPlacement:r.LB.Auto}`,g=null!==(i=e.unit)&&void 0!==i?i:o.j,m=null!==(l=e.custom)&&void 0!==l&&l.scaleDistribution?function(e){if(e.type===r.wf.Log)return`${e.type}${e.log}`;return e.type}(e.custom.scaleDistribution):r.wf.Linear;return`${g}/${u}/${h}/${p}/${m}/${Boolean(null===(d=e.custom)||void 0===d?void 0:d.axisLabel)?e.custom.axisLabel:c}`}},99500:(e,t,n)=>{"use strict";n.d(t,{J:()=>dn});var s=n(52423),a=n(68404),i=n(95148),r=n(42454),o=n(16755),l=n(13143),d=n(78996),c=n(77234),u=n(21209),h=n(29739),p=n(74081),g=n(62109),m=n(17868),f=n(58677),v=n(86174),b=n(85083),x=n(97690),y=n(47547),w=n(93314),j=n(88287),S=n(77441),C=n(85733),k=n(90055),N=n(42417),O=n(77406),I=n(82425),T=n(90942),$=n(55950),R=n(27825),P=n(4769),D=n(41556),A=n(9252),M=n(22770),L=n(85012),F=n(66822),E=n(60807),V=n(75420),z=n(59487),B=n(52089),_=n(11279),W=n(27590),U=n(95155),H=n(22904),q=n(77803),Z=n(17072),G=n(43228),Q=n(80718),K=n(2825),J=n(6539),Y=n(98719),X=n(91992),ee=n(7551),te=n(49743),ne=n(29111),se=n(17231),ae=n(62757),ie=n(84080),re=n(56225),oe=n(40826),le=n(36462),de=n(77889),ce=n(79422),ue=n(65829),he=n(59174),pe=n(62540),ge=n(45890),me=n(71400),fe=n(32647),ve=n(61420),be=n(73820),xe=n(35776),ye=n(29858),we=n(4668),je=n(59070),Se=n(57402),Ce=n(78199),ke=n(36524),Ne=n(86393),Oe=n(28087),Ie=n(23340),Te=n(28306),$e=n(70601),Re=n(93086),Pe=n(58604),De=n(77361),Ae=n(22260),Me=n(17018),Le=n(56015),Fe=n(86100),Ee=n(13337),Ve=n(10211),ze=n(52682),Be=n(80166),_e=n(2172),We=n(28385),Ue=n(88039),He=n(94619),qe=n(24982),Ze=n(24787),Ge=n(51525),Qe=n(20832),Ke=n(85130),Je=n(66374),Ye=n(82335),Xe=n(78794),et=n(19760),tt=n(43878),nt=n(96417),st=n(60779),at=n(70672),it=n(32283),rt=n(27767),ot=n(23452),lt=n(27926),dt=n(34737),ct=n(84497),ut=n(14565),ht=n(32503),pt=n(76444),gt=n(78017),mt=n(77632),ft=n(56568),vt=n(93656),bt=n(35270),xt=n(30417),yt=n(88494),wt=n(29636),jt=n(44011),St=n(89679),Ct=n(71492),kt=n(60222),Nt=n(49856),Ot=n(55009),It=n(74523),Tt=n(70577),$t=n(83707),Rt=n(38776),Pt=n(81334),Dt=n(61081),At=n(6015),Mt=n(37324),Lt=n(5311),Ft=n(90594),Et=n(8614),Vt=n(46485),zt=n(49171),Bt=n(92912),_t=n(46938),Wt=n(54613),Ut=n(23656),Ht=n(86622),qt=n(40415),Zt=n(45088),Gt=n(76051),Qt=n(56202),Kt=n(7045),Jt=n(61844),Yt=n(97746),Xt=n(85552),en=n(92210);let tn=!1,nn="public/img/icons/";function sn(e,t){i.V[nn+t]={content:e,status:"loaded"}}var an=n(6294),rn=n(45916);const on=["size","type","name","className","style","title"];const ln=e=>({container:s.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:s.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:s.css`
      fill: ${e.v1.palette.orange};
    `}),dn=a.forwardRef(((e,t)=>{let{size:n="md",type:a="default",name:dn,className:un,style:hn,title:pn=""}=e,gn=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,on);const mn=(0,o.wW)(ln);if(null!=dn&&dn.startsWith("fa fa-"))return(0,rn.jsx)("i",Object.assign({className:cn(dn,un)},gn,{style:hn}));"panel-add"===dn&&(n="xl"),tn||function(){tn=!0;const e="undefined"!=typeof window&&window.__grafana_public_path__;e&&(nn=e+"img/icons/"),sn(l,"unicons/angle-double-down.svg"),sn(d,"unicons/angle-double-right.svg"),sn(c,"unicons/angle-down.svg"),sn(u,"unicons/angle-left.svg"),sn(h,"unicons/angle-right.svg"),sn(p,"unicons/angle-up.svg"),sn(g,"unicons/apps.svg"),sn(m,"unicons/arrow.svg"),sn(f,"unicons/arrow-down.svg"),sn(v,"unicons/arrow-from-right.svg"),sn(b,"unicons/arrow-left.svg"),sn(x,"unicons/arrow-random.svg"),sn(y,"unicons/arrow-right.svg"),sn(w,"unicons/arrow-up.svg"),sn(j,"unicons/arrows-h.svg"),sn(S,"unicons/backward.svg"),sn(C,"unicons/bars.svg"),sn(k,"unicons/bell.svg"),sn(N,"unicons/bell-slash.svg"),sn(O,"unicons/bolt.svg"),sn(I,"unicons/book.svg"),sn(T,"unicons/book-open.svg"),sn($,"unicons/brackets-curly.svg"),sn(R,"unicons/bug.svg"),sn(P,"unicons/building.svg"),sn(D,"unicons/calculator-alt.svg"),sn(A,"unicons/calendar-alt.svg"),sn(M,"unicons/camera.svg"),sn(L,"unicons/channel-add.svg"),sn(F,"unicons/chart-line.svg"),sn(E,"unicons/check.svg"),sn(V,"unicons/check-circle.svg"),sn(z,"unicons/circle.svg"),sn(B,"unicons/clipboard-alt.svg"),sn(_,"unicons/clock-nine.svg"),sn(W,"unicons/cloud.svg"),sn(U,"unicons/cloud-download.svg"),sn(H,"unicons/code-branch.svg"),sn(q,"unicons/cog.svg"),sn(Z,"unicons/columns.svg"),sn(G,"unicons/comment-alt.svg"),sn(Q,"unicons/comment-alt-share.svg"),sn(K,"unicons/comments-alt.svg"),sn(J,"unicons/compass.svg"),sn(Y,"unicons/copy.svg"),sn(X,"unicons/cube.svg"),sn(ee,"unicons/dashboard.svg"),sn(te,"unicons/database.svg"),sn(ne,"unicons/document-info.svg"),sn(se,"unicons/download-alt.svg"),sn(ae,"unicons/draggabledots.svg"),sn(ie,"unicons/edit.svg"),sn(re,"unicons/ellipsis-v.svg"),sn(oe,"unicons/envelope.svg"),sn(le,"unicons/exchange-alt.svg"),sn(de,"unicons/exclamation-triangle.svg"),sn(ce,"unicons/external-link-alt.svg"),sn(ue,"unicons/eye.svg"),sn(he,"unicons/eye-slash.svg"),sn(pe,"unicons/file-alt.svg"),sn(ge,"unicons/file-blank.svg"),sn(me,"unicons/filter.svg"),sn(fe,"unicons/folder.svg"),sn(ve,"unicons/folder-open.svg"),sn(be,"unicons/folder-plus.svg"),sn(xe,"unicons/folder-upload.svg"),sn(ye,"unicons/forward.svg"),sn(we,"unicons/graph-bar.svg"),sn(je,"unicons/history.svg"),sn(Se,"unicons/home-alt.svg"),sn(Ce,"unicons/import.svg"),sn(ke,"unicons/info.svg"),sn(Ne,"unicons/info-circle.svg"),sn(Oe,"unicons/key-skeleton-alt.svg"),sn(Ie,"unicons/keyboard.svg"),sn(Te,"unicons/link.svg"),sn($e,"unicons/list-ul.svg"),sn(Re,"unicons/lock.svg"),sn(Pe,"unicons/minus.svg"),sn(De,"unicons/minus-circle.svg"),sn(Ae,"unicons/mobile-android.svg"),sn(Me,"unicons/monitor.svg"),sn(Le,"unicons/pause.svg"),sn(Fe,"unicons/pen.svg"),sn(Ee,"unicons/play.svg"),sn(Ve,"unicons/plug.svg"),sn(ze,"unicons/plus.svg"),sn(Be,"unicons/plus-circle.svg"),sn(_e,"unicons/power.svg"),sn(We,"unicons/presentation-play.svg"),sn(Ue,"unicons/process.svg"),sn(He,"unicons/question-circle.svg"),sn(qe,"unicons/repeat.svg"),sn(Ze,"unicons/rocket.svg"),sn(Ge,"unicons/save.svg"),sn(Qe,"unicons/search.svg"),sn(Ke,"unicons/search-minus.svg"),sn(Je,"unicons/search-plus.svg"),sn(Ye,"unicons/share-alt.svg"),sn(Xe,"unicons/shield.svg"),sn(et,"unicons/signal.svg"),sn(tt,"unicons/signin.svg"),sn(nt,"unicons/signout.svg"),sn(st,"unicons/sitemap.svg"),sn(at,"unicons/slack.svg"),sn(it,"unicons/sliders-v-alt.svg"),sn(rt,"unicons/sort-amount-down.svg"),sn(ot,"unicons/sort-amount-up.svg"),sn(lt,"unicons/square-shape.svg"),sn(dt,"unicons/star.svg"),sn(ct,"unicons/step-backward.svg"),sn(ut,"unicons/sync.svg"),sn(ht,"unicons/table.svg"),sn(pt,"unicons/tag-alt.svg"),sn(gt,"unicons/times.svg"),sn(mt,"unicons/trash-alt.svg"),sn(ft,"unicons/unlock.svg"),sn(vt,"unicons/upload.svg"),sn(bt,"unicons/user.svg"),sn(xt,"unicons/users-alt.svg"),sn(yt,"unicons/wrap-text.svg"),sn(wt,"unicons/cloud-upload.svg"),sn(jt,"unicons/credit-card.svg"),sn(St,"unicons/file-copy-alt.svg"),sn(Ct,"unicons/fire.svg"),sn(kt,"unicons/hourglass.svg"),sn(Nt,"unicons/layer-group.svg"),sn(Ot,"unicons/line-alt.svg"),sn(It,"unicons/list-ui-alt.svg"),sn(Tt,"unicons/message.svg"),sn($t,"unicons/palette.svg"),sn(Rt,"unicons/percentage.svg"),sn(Pt,"unicons/shield-exclamation.svg"),sn(Dt,"unicons/plus-square.svg"),sn(At,"unicons/x.svg"),sn(Mt,"unicons/capture.svg"),sn(Lt,"custom/gf-grid.svg"),sn(Ft,"custom/gf-landscape.svg"),sn(Et,"custom/gf-layout-simple.svg"),sn(Vt,"custom/gf-portrait.svg"),sn(zt,"custom/gf-bar-alignment-after.svg"),sn(Bt,"custom/gf-bar-alignment-before.svg"),sn(_t,"custom/gf-bar-alignment-center.svg"),sn(Wt,"custom/gf-interpolation-linear.svg"),sn(Ut,"custom/gf-interpolation-smooth.svg"),sn(Ht,"custom/gf-interpolation-step-after.svg"),sn(qt,"custom/gf-interpolation-step-before.svg"),sn(Zt,"custom/gf-logs.svg"),sn(Gt,"mono/favorite.svg"),sn(Qt,"mono/grafana.svg"),sn(Kt,"mono/heart.svg"),sn(Jt,"mono/heart-break.svg"),sn(Yt,"mono/panel-add.svg"),sn(Xt,"mono/library-panel.svg"),sn(en,"unicons/record-audio.svg")}(),(0,r.Mo)(dn)||console.warn("Icon component passed an invalid icon name",dn);const fn=(0,an.B)(n),vn=fn,bn=null!=dn&&dn.startsWith("gf-bar-align")?16:null!=dn&&dn.startsWith("gf-interp")?30:fn,xn=(0,an.y)(dn,a),yn=`${nn}${xn}/${dn}.svg`;return(0,rn.jsx)("div",Object.assign({className:mn.container},gn,{ref:t,children:(0,rn.jsx)(i.Z,{src:yn,width:bn,height:vn,title:pn,className:(0,s.cx)(mn.icon,un,"mono"===a?{[mn.orange]:"favorite"===dn}:""),style:hn})}))}));function cn(e,t){return(0,s.cx)(e,{"fa-spin":"fa fa-spinner"===e},t)}dn.displayName="Icon"},6294:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,y:()=>a});const s=["grafana","favorite","heart-break","heart","panel-add","library-panel"];function a(e,t){return null!=e&&e.startsWith("gf-")?"custom":s.includes(e)?"mono":"default"===t?"unicons":"solid"===t?"solid":"mono"}function i(e){switch(e){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},23734:(e,t,n)=>{"use strict";n.d(t,{h:()=>g});var s=n(52423),a=n(68404),i=n(66876),r=n(16755),o=n(58906),l=n(50191),d=n(99500),c=n(6294),u=n(21888),h=n(45916);const p=["name","size","iconType","tooltip","tooltipPlacement","ariaLabel","className","variant"];const g=a.forwardRef(((e,t)=>{let{name:n,size:a="md",iconType:i,tooltip:o,tooltipPlacement:l,ariaLabel:c,className:g,variant:f="secondary"}=e,v=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const b=(0,r.l4)(),x=m(b,a,f),y="string"==typeof o?o:"",w=(0,h.jsx)("button",Object.assign({ref:t,"aria-label":c||y},v,{className:(0,s.cx)(x.button,g),children:(0,h.jsx)(d.J,{name:n,size:a,className:x.icon,type:i})}));return o?(0,h.jsx)(u.u,{content:o,placement:l,children:w}):w}));g.displayName="IconButton";const m=(0,l.B)(((e,t,n)=>{const a=(0,c.B)(t),r=Math.max(a/3,8);let l=e.colors.text.primary;return"primary"===n?l=e.colors.primary.text:"destructive"===n&&(l=e.colors.error.text),{button:s.css`
      width: ${a}px;
      height: ${a}px;
      background: transparent;
      border: none;
      color: ${l};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${e.shape.borderRadius()};
      z-index: 0;
      margin-right: ${e.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${e.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${r}px;
        left: -${r}px;
        right: -${r}px;
        top: -${r}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,o.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) {
        ${(0,o.getMouseFocusStyles)(e)}
      }

      &:hover {
        color: ${l};

        &:before {
          background-color: ${"secondary"===n?e.colors.action.hover:i.alpha(l,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:s.css`
      vertical-align: baseline;
      display: flex;
    `}}))},14402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,a:()=>p});var s=n(52423),a=n(68404),i=n(54316),r=n(16755),o=n(64313),l=n(89902),d=n(45916);const c=["title","featureState"];const u=a.memo(a.forwardRef(((e,t)=>{let{title:n,featureState:s}=e,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const i=(0,r.wW)(h),o=s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:i.badge,children:(0,d.jsx)(p,{featureState:s})}),(0,d.jsx)("h3",{children:n})]}):(0,d.jsx)("h3",{children:n});return(0,d.jsx)(l.v,Object.assign({branded:!0,title:o,urlTitle:"Read documentation",ref:t},a))})));u.displayName="FeatureInfoBox";const h=e=>({badge:s.css`
      margin-bottom: ${e.spacing(1)};
    `}),p=e=>{let{featureState:t,tooltip:n}=e;const s=function(e){if(e===i.CQ.alpha)return{text:"Alpha",icon:"exclamation-triangle",color:"orange"};return{text:"Beta",icon:"rocket",color:"blue"}}(t);return(0,d.jsx)(o.C,{text:s.text,color:s.color,icon:s.icon,tooltip:n})}},89902:(e,t,n)=>{"use strict";n.d(t,{v:()=>h});var s,a=n(52423),i=n(68404),r=n(16755),o=n(50191),l=n(2843),d=n(99500),c=n(45916);const u=["title","className","children","branded","url","urlTitle","onDismiss","severity"];const h=i.memo(i.forwardRef(((e,t)=>{let{title:n,className:i,children:o,url:h,urlTitle:g,severity:m="info"}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const v=(0,r.wW)(p);return(0,c.jsxs)(l.b,Object.assign({severity:m,className:i},f,{ref:t,title:n,children:[(0,c.jsx)("div",{children:o}),h&&(0,c.jsxs)("a",{href:h,className:(0,a.cx)("external-link",v.docsLink),target:"_blank",rel:"noreferrer",children:[s||(s=(0,c.jsx)(d.J,{name:"book"}))," ",g||"Read more"]})]}))})));h.displayName="InfoBox";const p=(0,o.B)((e=>({docsLink:a.css`
      display: inline-block;
      margin-top: ${e.spacing(2)};
    `})))},54588:(e,t,n)=>{"use strict";n.d(t,{K:()=>c});var s=n(52423),a=n(68404),i=n(11979),r=n(16755),o=n(99500),l=n(48717),d=n(45916);function c(e){let{referenceElement:t,children:n,suffixIcon:c,placement:h}=e;const[g,m]=(0,a.useState)(null),f=(0,i.D)(t,g,{placement:h}),v=(0,r.wW)(u),b=(0,r.wW)(p);return(0,d.jsx)(l.h_,{children:(0,d.jsx)("div",Object.assign({style:Object.assign({display:"inline-block"},f.styles.popper)},f.attributes.popper,{ref:m,children:(0,d.jsxs)("span",{className:(0,s.cx)(v.root,b[h]),children:[n&&(0,d.jsx)("span",{children:n}),c&&(0,d.jsx)(o.J,{name:c})]})}))})}const u=e=>({root:(0,s.css)(Object.assign({},e.typography.bodySmall,{willChange:"transform",background:e.components.tooltip.background,color:e.components.tooltip.text,padding:e.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:e.spacing(.5),alignItems:"center"}))}),h=(e,t)=>(0,s.keyframes)({from:{opacity:0,transform:`translate(${e}, ${t})`},to:{opacity:1,transform:"translate(0, 0px)"}}),p=e=>{const t=h(0,e.spacing(1)),n=h(0,e.spacing(-1)),a=h(e.spacing(1),0),i=h(e.spacing(-1),0);return{top:(0,s.css)({marginBottom:e.spacing(1),animation:`${t} ease-out 100ms`}),bottom:(0,s.css)({marginTop:e.spacing(1),animation:`${n} ease-out 100ms`}),left:(0,s.css)({marginRight:e.spacing(1),animation:`${a} ease-out 100ms`}),right:(0,s.css)({marginLeft:e.spacing(1),animation:`${i} ease-out 100ms`})}}},13910:(e,t,n)=>{"use strict";n.d(t,{H:()=>l});var s=n(68404),a=n(43456),i=n(4645),r=n(45916);const o=["defaultValue","minWidth","maxWidth","onCommitChange","onKeyDown","onBlur"];const l=s.forwardRef(((e,t)=>{const{defaultValue:n="",minWidth:l=10,maxWidth:d,onCommitChange:c,onKeyDown:u,onBlur:h}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o),[g,m]=s.useState(n),[f,v]=s.useState(l);return(0,s.useEffect)((()=>{v(function(e,t,n){if(!e)return t;const s=3,i=(0,a.X1)(e.toString(),14).width/8+s;if(t&&i<t)return t;if(n&&i>n)return i;return i}(g.toString(),l,d))}),[g,d,l]),(0,r.jsx)(i.I,Object.assign({},p,{ref:t,value:g.toString(),onChange:e=>{m(e.currentTarget.value)},width:f,onBlur:e=>{h?h(e):c&&c(e)},onKeyDown:e=>{u?u(e):"Enter"===e.key&&c&&c(e)},"data-testid":"autosize-input"}))}));l.displayName="AutoSizeInput"},4645:(e,t,n)=>{"use strict";n.d(t,{H:()=>p,I:()=>h});var s=n(52423),a=n(68404),i=n(92084),r=n(16755),o=n(50191),l=n(50578),d=n(81691),c=n(45916);const u=["className","addonAfter","addonBefore","prefix","suffix","invalid","loading","width"];const h=a.forwardRef(((e,t)=>{const{className:n,addonAfter:a,addonBefore:o,prefix:l,suffix:h,invalid:g,loading:m,width:f=0}=e,v=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u),[b,x]=(0,i.Z)(),[y,w]=(0,i.Z)(),j=(0,r.l4)(),S=p({theme:j,invalid:!!g,width:f});return(0,c.jsxs)("div",{className:(0,s.cx)(S.wrapper,n),"data-testid":"input-wrapper",children:[!!o&&(0,c.jsx)("div",{className:S.addon,children:o}),(0,c.jsxs)("div",{className:S.inputWrapper,children:[l&&(0,c.jsx)("div",{className:S.prefix,ref:b,children:l}),(0,c.jsx)("input",Object.assign({ref:t,className:S.input},v,{style:{paddingLeft:l?x.width+12:void 0,paddingRight:h||m?w.width+12:void 0}})),(h||m)&&(0,c.jsxs)("div",{className:S.suffix,ref:y,children:[m&&(0,c.jsx)(d.$,{className:S.loadingIndicator,inline:!0}),h]})]}),!!a&&(0,c.jsx)("div",{className:S.addon,children:a})]})}));h.displayName="Input";const p=(0,o.B)((e=>{let{theme:t,invalid:n=!1,width:a}=e;const i="28px",r=s.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${t.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${i};
    color: ${t.colors.text.secondary};
  `;return{wrapper:(0,s.cx)(s.css`
        label: input-wrapper;
        display: flex;
        width: ${a?`${t.spacing(a)}`:"100%"};
        height: ${t.spacing(t.components.height.md)};
        border-radius: ${t.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${n?t.colors.error.border:t.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:s.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${i};
        }
        &:not(:last-child) {
          padding-right: ${i};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,s.cx)((0,l.GL)(t),(0,l.RK)(t,n),s.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${t.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:s.css`
      background-color: ${t.colors.action.disabledBackground};
      color: ${t.colors.action.disabledText};
      border: 1px solid ${t.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:s.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,s.cx)(r,s.css`
        label: input-prefix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,s.cx)(r,s.css`
        label: input-suffix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:s.css`
      & + * {
        margin-left: ${t.spacing(.5)};
      }
    `}}))},35258:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});const s=n(59052).Qr},89946:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var s=n(68404),a=n(24497),i=n(45916);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends s.PureComponent{constructor(){super(...arguments),r(this,"wrapperRef",(0,s.createRef)()),r(this,"renderJson",(()=>{const{json:e,config:t,open:n,onDidRender:s}=this.props,i=this.wrapperRef.current,r=new a.u(e,n,t);i.hasChildNodes()?i.replaceChild(r.render(),i.lastChild):i.appendChild(r.render()),s&&s(r.json)}))}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:e}=this.props;return(0,i.jsx)("div",{className:e,ref:this.wrapperRef})}}r(o,"defaultProps",{open:3,config:{animateOpen:!0}})},24497:(e,t,n)=>{"use strict";n.d(t,{u:()=>f});var s=n(82897);function a(e){return!!e&&"object"===typeof e}function i(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";const t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function r(e){return null===e?"null":typeof e}function o(e,t){const n=r(e);return"null"===n||"undefined"===n?n:("string"===n&&(t='"'+(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')),"function"===n?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":t)}function l(e){return`json-formatter-${e}`}function d(e,t,n){const s=document.createElement(e);return t&&s.classList.add(l(t)),void 0!==n&&(n instanceof Node?s.appendChild(n):s.appendChild(document.createTextNode(String(n)))),s}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,h=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,g="undefined"!=typeof window&&window.requestAnimationFrame||(e=>(e(),0)),m={animateOpen:!0,animateClose:!0};class f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,s=arguments.length>3?arguments[3]:void 0;c(this,"_isOpen",null),c(this,"element",null),c(this,"skipChildren",!1),this.json=e,this.open=t,this.config=n,this.key=s}get isOpen(){return null!==this._isOpen?this._isOpen:this.open>0}set isOpen(e){this._isOpen=e}get isDate(){return"string"===this.type&&(u.test(this.json)||p.test(this.json)||h.test(this.json))}get isUrl(){return"string"===this.type&&0===this.json.indexOf("http")}get isArray(){return Array.isArray(this.json)}get isObject(){return a(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return void 0!==this.key}get constructorName(){return i(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map((e=>e||'""')):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,s.isNumber)(this.json[0])||(0,s.isNumber)(this.json[1]))}renderArray(){const e=d("span");return e.appendChild(d("span","bracket","[")),this.isNumberArray()?(this.json.forEach(((t,n)=>{n>0&&e.appendChild(d("span","array-comma",",")),e.appendChild(d("span","number",t))})),this.skipChildren=!0):e.appendChild(d("span","number",this.json.length)),e.appendChild(d("span","bracket","]")),e}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.element=d("div","row");const t=d("a","toggler-link"),n=d("span","toggler");if(this.isObject&&t.appendChild(n),this.hasKey&&t.appendChild(d("span","key",`${this.key}:`)),this.isObject){const e=d("span","value"),n=d("span"),s=d("span","constructor-name",this.constructorName);if(n.appendChild(s),this.isArray){const e=this.renderArray();n.appendChild(e)}e.appendChild(n),t.appendChild(e)}else{const e=this.isUrl?d("a"):d("span");e.classList.add(l(this.type)),this.isDate&&e.classList.add(l("date")),this.isUrl&&(e.classList.add(l("url")),e.setAttribute("href",this.json));const n=o(this.json,this.json);e.appendChild(document.createTextNode(n)),t.appendChild(e)}const s=d("div","children");return this.isObject&&s.classList.add(l("object")),this.isArray&&s.classList.add(l("array")),this.isEmpty&&s.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),e||this.element.appendChild(t),this.skipChildren?t.removeChild(n):this.element.appendChild(s),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${l("children")}`);if(t&&!this.isEmpty)if(e){let e=0;const n=()=>{const s=this.keys[e],a=new f(this.json[s],this.open-1,this.config,s);t.appendChild(a.render()),e+=1,e<this.keys.length&&(e>10?n():g(n))};g(n)}else this.keys.forEach((e=>{const n=new f(this.json[e],this.open-1,this.config,e);t.appendChild(n.render())}))}removeChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${l("children")}`);if(e){let e=0;const n=()=>{t&&t.children.length&&(t.removeChild(t.children[0]),e+=1,e>10?n():g(n))};g(n)}else t&&(t.innerHTML="")}}},54761:(e,t,n)=>{"use strict";n.d(t,{Ar:()=>d,Lh:()=>c,W2:()=>h,wc:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);const o=["children","orientation","spacing","justify","align","wrap","width","height"];var l;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(l||(l={}));const d=e=>{let{children:t,orientation:n=l.Horizontal,spacing:s="sm",justify:d="flex-start",align:c="normal",wrap:u=!1,width:h="100%",height:g="100%"}=e,m=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const f=(0,i.wW)((0,a.useCallback)((e=>p(e,n,s,d,c,u)),[c,d,n,s,u]));return(0,r.jsx)("div",Object.assign({className:f.layout,style:{width:h,height:g}},m,{children:a.Children.toArray(t).filter(Boolean).map(((e,t)=>(0,r.jsx)("div",{className:f.childWrapper,children:e},t)))}))},c=e=>{let{children:t,spacing:n,justify:s,align:a="center",wrap:i,width:o,height:c}=e;return(0,r.jsx)(d,{spacing:n,justify:s,orientation:l.Horizontal,align:a,width:o,height:c,wrap:i,children:t})},u=e=>{let{children:t,spacing:n,justify:s,align:a,width:i,height:o}=e;return(0,r.jsx)(d,{spacing:n,justify:s,orientation:l.Vertical,align:a,width:i,height:o,children:t})},h=e=>{let{children:t,padding:n,margin:o,grow:l,shrink:d}=e;const c=(0,i.wW)((0,a.useCallback)((e=>m(e,n,o)),[n,o]));return(0,r.jsx)("div",{className:(0,s.cx)(c.wrapper,void 0!==l&&s.css`
            flex-grow: ${l};
          `,void 0!==d&&s.css`
            flex-shrink: ${d};
          `),children:t})},p=(e,t,n,a,i,r)=>{const o="none"!==n?e.spacing(g[n]):0,d=t===l.Horizontal&&!r||t===l.Vertical?0:`-${o}`,c=t===l.Vertical?"vertical-group":"horizontal-group";return{layout:s.css`
      label: ${c};
      display: flex;
      flex-direction: ${t===l.Vertical?"column":"row"};
      flex-wrap: ${r?"wrap":"nowrap"};
      justify-content: ${a};
      align-items: ${i};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${d};
    `,childWrapper:s.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${t!==l.Horizontal||r?o:0};
      margin-right: ${t===l.Horizontal?o:0};
      display: flex;
      align-items: ${i};

      &:last-child {
        margin-bottom: ${t===l.Vertical&&0};
        margin-right: ${t===l.Horizontal&&0};
      }
    `}},g={none:0,xs:.5,sm:1,md:2,lg:3},m=(e,t,n)=>{const a=t&&"none"!==t&&e.spacing(g[t])||0,i=n&&"none"!==n&&e.spacing(g[n])||0;return{wrapper:s.css`
      label: container;
      margin: ${i};
      padding: ${a};
    `}}},32889:(e,t,n)=>{"use strict";n.d(t,{r:()=>d});var s=n(68404),a=n(16144),i=n(36298),r=n(76093),o=n(45916);const l=["href","children"];const d=(0,s.forwardRef)(((e,t)=>{let{href:n,children:s}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const c=i.u.stripBaseFromUrl(r.QX.sanitizeUrl(null!=n?n:""));return(0,o.jsx)(a.Link,Object.assign({ref:t,to:c},d,{children:s}))}));d.displayName="Link"},36624:(e,t,n)=>{"use strict";n.d(t,{L:()=>l});var s=n(52423),a=n(68404),i=n(50191),r=n(45916);const o=(0,i.B)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{list:s.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:s.css`
    display: ${e?"inline-block":"block"};
  `}}));class l extends a.PureComponent{constructor(e){super(e)}render(){const{items:e,renderItem:t,getItemKey:n,className:a,inline:i}=this.props,l=o(i);return(0,r.jsx)("ul",{className:(0,s.cx)(l.list,a),children:e.map(((e,s)=>(0,r.jsx)("li",{className:l.item,children:t(e,s)},n?n(e):s)))})}}},19495:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var s=n(68404),a=n(36624),i=n(45916);class r extends s.PureComponent{render(){return(0,i.jsx)(a.L,Object.assign({inline:!0},this.props))}}},89645:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var s=n(68404),a=n(36624),i=n(45916);class r extends s.PureComponent{render(){return(0,i.jsx)(a.L,Object.assign({},this.props))}}},38953:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var s,a=n(52423),i=(n(68404),n(16755)),r=n(81691),o=n(45916);const l=["text","className"];const d=e=>{let{text:t,className:n}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const u=(0,i.wW)(c);return(0,o.jsxs)("div",Object.assign({className:(0,a.cx)(u.container,n)},d,{children:[t," ",s||(s=(0,o.jsx)(r.$,{inline:!0}))]}))},c=e=>({container:a.css`
      margin-bottom: ${e.spacing(4)};
    `})},90261:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var s=n(68404),a=n(70917),i=n(94698),r=n(45916);const o=e=>{var t,n;let{value:o,onChange:l,context:d,item:c}=e;const u=null!==(t=c.settings)&&void 0!==t?t:{},h=(0,i.IX)(d.data,null==u?void 0:u.filter),p=(0,i.nw)(h,o),g=(0,s.useCallback)((e=>{if(!e||(0,i.w3)(e.value,h))return l(null==e?void 0:e.value)}),[h,l]),m=p.find((e=>e.value===o));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Ph,{value:m,placeholder:null!==(n=u.placeholderText)&&void 0!==n?n:"Select field",options:p,onChange:g,noOptionsMessage:u.noFieldsMessage,width:u.width,isClearable:!0})})}},26908:(e,t,n)=>{"use strict";n.d(t,{i:()=>O});var s=n(2238),a=n(68404),i=n(31919),r=n(77401),o=n(4645),l=n(45916);const d=(0,a.memo)((e=>{const{options:t,onChange:n}=e,s=(0,a.useCallback)((e=>n(e.target.value)),[n]);return(0,l.jsx)(o.I,{placeholder:"Enter regular expression",defaultValue:t,onBlur:s})}));d.displayName="FieldNameByRegexMatcherEditor";const c={id:i.mi.byRegexp,component:d,matcher:r.Ls.get(i.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:e=>e};var u=n(70917),h=n(94698);const p=(0,a.memo)((e=>{const{data:t,options:n,onChange:s,id:i}=e,r=(0,h.IX)(t),o=(0,h.nw)(r,n),d=(0,a.useCallback)((e=>{if((0,h.w3)(e.value,r))return s(e.value)}),[r,s]),c=o.find((e=>e.value===n));return(0,l.jsx)(u.Ph,{value:c,options:o,onChange:d,inputId:i})}));p.displayName="FieldNameMatcherEditor";const g={id:i.mi.byName,component:p,matcher:r.Ls.get(i.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>e},m=(0,a.memo)((e=>{const{data:t,options:n,onChange:s}=e,{readOnly:i,prefix:r}=n,d=(0,h.IX)(t),c=(0,h.nw)(d,void 0),p=(0,a.useCallback)((e=>{if(Array.isArray(e))return s(Object.assign({},n,{names:e.reduce(((e,t)=>(0,h.w3)(t.value,d)?(e.push(t.value),e):e),[])}))}),[d,s,n]);if(i){var g;const e=(null!==(g=n.names)&&void 0!==g?g:[]).join(", ");return(0,l.jsx)(o.I,{value:e,readOnly:!0,disabled:!0,prefix:r})}return(0,l.jsx)(u.NU,{value:n.names,options:c,onChange:p})}));m.displayName="FieldNameMatcherEditor";const f={id:i.mi.byNames,component:m,matcher:r.Ls.get(i.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>{var t;return(null!==(t=e.names)&&void 0!==t?t:[]).join(", ")},excludeFromPicker:!0};var v=n(27843);const b=(0,a.memo)((e=>{const{data:t,options:n,onChange:s,id:i}=e,r=y(t),o=w(r,n),d=(0,a.useCallback)((e=>s(e.value)),[s]),c=o.find((e=>e.value===n));return(0,l.jsx)(u.Ph,{inputId:i,value:c,options:o,onChange:d})}));b.displayName="FieldTypeMatcherEditor";const x=[{value:v.fS.number,label:"Numeric"},{value:v.fS.string,label:"String"},{value:v.fS.time,label:"Time"},{value:v.fS.boolean,label:"Boolean"},{value:v.fS.trace,label:"Traces"},{value:v.fS.other,label:"Other"}],y=e=>(0,a.useMemo)((()=>{const t=new Map;for(const e of x)t.set(e.value,0);for(const n of e)for(const e of n.fields){const n=e.type||v.fS.other;let s=t.get(n);s||(s=0),t.set(n,s+1)}return t}),[e]),w=(e,t)=>(0,a.useMemo)((()=>{let n=!1;const s=[];for(const a of x){const i=e.get(a.value),r=t===a.value;(i||r)&&s.push(Object.assign({},a,{label:`${a.label} (${e.get(a.value)})`})),r&&(n=!0)}return t&&!n&&s.push({value:t,label:`${t} (No matches)`}),s}),[e,t]),j={id:i.mi.byType,component:b,matcher:r.Ls.get(i.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:e=>e},S=(0,a.memo)((e=>{const{data:t,options:n,onChange:s}=e,i=k(t),r=N(i),o=(0,a.useCallback)((e=>{if(e.value&&i.has(e.value))return s(e.value)}),[i,s]),d=r.find((e=>e.value===n));return(0,l.jsx)(u.Ph,{value:d,options:r,onChange:o})}));S.displayName="FieldsByFrameRefIdMatcher";const C={id:i.mi.byFrameRefID,component:S,matcher:r.Ls.get(i.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:e=>e},k=e=>(0,a.useMemo)((()=>{const t=new Set;for(const n of e)n.refId&&t.add(n.refId);return t}),[e]),N=e=>(0,a.useMemo)((()=>Array.from(e).map((e=>({value:e,label:e})))),[e]),O=new s.B((()=>[g,c,j,C,f]))},94698:(e,t,n)=>{"use strict";n.d(t,{IX:()=>o,nw:()=>l,w3:()=>r});var s=n(68404),a=n(32934),i=n(33886);function r(e,t){return!!e&&(t.display.has(e)||t.raw.has(e))}function o(e,t){return(0,s.useMemo)((()=>function(e,t){const n={display:new Set,raw:new Set,fields:new Map};for(const s of e)for(const i of s.fields){if(t&&!t(i))continue;const r=(0,a.C)(i,s,e);n.display.add(r),n.fields.set(r,i),i.name&&r!==i.name&&(n.raw.add(i.name),n.fields.set(i.name,i))}return n}(e,t)),[e,t])}function l(e,t,n,a){return(0,s.useMemo)((()=>{let s=!1;const r=[];n&&r.push(n);for(const n of e.display){s||n!==t||(s=!0);const o=e.fields.get(n);a&&a!==(null==o?void 0:o.type)||r.push({value:n,label:n,icon:o?(0,i.e7)(o):void 0})}for(const n of e.raw)e.display.has(n)||(s||n!==t||(s=!0),r.push({value:n,label:`${n} (base field name)`}));return t&&!s&&r.push({value:t,label:`${t} (not found)`}),r}),[e,t,n,a])}},16736:(e,t,n)=>{"use strict";n.d(t,{v:()=>p});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);const o=e=>({divider:(0,s.css)({height:1,backgroundColor:e.colors.border.weak,margin:e.spacing(.5,0)})});var l=n(9655),d=n(21357),c=n(47253);const u=["header","children","ariaLabel","onOpen","onClose","onKeyDown"];const h=a.forwardRef(((e,t)=>{let{header:n,children:s,ariaLabel:o,onOpen:l,onClose:d,onKeyDown:h}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const m=(0,i.wW)(g),f=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(()=>f.current));const[v,b]=(0,c.d)({localRef:f,onOpen:l,onClose:d,onKeyDown:h});return(0,r.jsxs)("div",Object.assign({},p,{tabIndex:-1,ref:f,className:m.wrapper,role:"menu","aria-label":o,onKeyDown:v,onFocus:b,children:[n&&(0,r.jsx)("div",{className:m.header,children:n}),s]}))}));h.displayName="Menu";const p=Object.assign(h,{Item:d.s,Divider:function(){const e=(0,i.wW)(o);return(0,r.jsx)("div",{className:e.divider})},Group:l.k}),g=e=>({header:s.css`
      padding: ${e.spacing(.5,.5,1,.5)};
      border-bottom: 1px solid ${e.colors.border.weak};
    `,wrapper:s.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
      padding: ${e.spacing(.5,0)};
    `})},9655:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var s=n(52423),a=n(82897),i=(n(68404),n(16755)),r=n(45916);const o=e=>{let{label:t,ariaLabel:n,children:s}=e;const o=(0,i.wW)(l),d=`group-label-${(0,a.uniqueId)()}`;return(0,r.jsxs)("div",{role:"group","aria-labelledby":!n&&t?d:void 0,"aria-label":n,children:[t&&(0,r.jsx)("label",{id:d,className:o.groupLabel,"aria-hidden":!0,children:t}),s]})};o.displayName="MenuGroup";const l=e=>({groupLabel:s.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      padding: ${e.spacing(.5,1)};
    `})},21357:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var s=n(52423),a=n(68404),i=n(16755),r=n(58906),o=n(99500),l=n(25004),d=n(47253);var c=n(45916);const u=a.memo((e=>{let{items:t,isOpen:n,openedWithArrow:s,setOpenedWithArrow:r,close:u,customStyle:p}=e;const g=(0,i.wW)(h),m=(0,a.useRef)(null),[f]=(0,d.d)({localRef:m,isMenuOpen:n,openedWithArrow:s,setOpenedWithArrow:r,close:u});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:g.iconWrapper,"aria-label":l.wl.components.Menu.SubMenu.icon,children:(0,c.jsx)(o.J,{name:"angle-right",className:g.icon,"aria-hidden":!0})}),n&&(0,c.jsx)("div",{ref:m,className:g.subMenu(m.current),"aria-label":l.wl.components.Menu.SubMenu.container,style:p,children:(0,c.jsx)("div",{tabIndex:-1,className:g.itemsWrapper,role:"menu",onKeyDown:f,children:t})})]})}));u.displayName="SubMenu";const h=e=>({iconWrapper:s.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:s.css`
      opacity: 0.7;
      margin-left: ${e.spacing(2)};
      color: ${e.colors.text.secondary};
    `,itemsWrapper:s.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
    `,subMenu:t=>s.css`
      position: absolute;
      top: 0;
      z-index: ${e.zIndex.dropdown};
      ${(e=>{if(!e)return"left";const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return 0===n.width?"left":t.right+n.width+10>window.innerWidth?"right":"left"})(t)}: 100%;
    `}),p=a.memo(a.forwardRef(((e,t)=>{const{url:n,icon:r,label:l,ariaLabel:d,ariaChecked:h,target:p,onClick:m,className:f,active:v,destructive:b,childItems:x,role:y="menuitem",tabIndex:w=-1,customSubMenuContainerStyles:j}=e,S=(0,i.wW)(g),[C,k]=(0,a.useState)(v),[N,O]=(0,a.useState)(!1),[I,T]=(0,a.useState)(!1),$=(0,a.useCallback)((()=>{O(!0),k(!0)}),[]),R=(0,a.useCallback)((()=>{O(!1),k(!1)}),[]),P=x&&x.length>0,D=P?"div":void 0===n?"button":"a",A=(0,s.cx)({[S.item]:!0,[S.active]:C,[S.destructive]:b},f),M=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(()=>M.current));return(0,c.jsxs)(D,{target:p,className:A,rel:"_blank"===p?"noopener noreferrer":void 0,href:n,onClick:m,onMouseEnter:$,onMouseLeave:R,onKeyDown:e=>{if("ArrowRight"===e.key)e.preventDefault(),e.stopPropagation(),P&&(O(!0),T(!0),k(!0))},role:void 0===n?y:void 0,"data-role":"menuitem",ref:M,"aria-label":d,"aria-checked":h,tabIndex:w,children:[(0,c.jsxs)(c.Fragment,{children:[r&&(0,c.jsx)(o.J,{name:r,className:S.icon,"aria-hidden":!0}),l]}),P&&(0,c.jsx)(u,{items:x,isOpen:N,openedWithArrow:I,setOpenedWithArrow:T,close:()=>{var e;O(!1),k(!1),null==M||null===(e=M.current)||void 0===e||e.focus()},customStyle:j})]})})));p.displayName="MenuItem";const g=e=>({item:s.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${e.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${e.spacing(.5,2)};
      min-height: ${e.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,r.getFocusStyles)(e)}
      }
    `,active:s.css`
      background: ${e.colors.action.hover};
    `,destructive:s.css`
      color: ${e.colors.error.text};

      svg {
        color: ${e.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.error.main};
        color: ${e.colors.error.contrastText};

        svg {
          color: ${e.colors.error.contrastText};
        }
      }
    `,icon:s.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${e.colors.text.secondary};
    `})},47253:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(68404),a=n(31423);const i=(e,t)=>(e%t+t)%t,r=e=>{let{localRef:t,isMenuOpen:n,openedWithArrow:r,setOpenedWithArrow:o,close:l,onOpen:d,onClose:c,onKeyDown:u}=e;const[h,p]=(0,s.useState)(-1);(0,s.useEffect)((()=>{n&&r&&(p(0),null==o||o(!1))}),[n,r,o]),(0,s.useEffect)((()=>{var e,n;const s=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelectorAll('[data-role="menuitem"]');null==s||null===(n=s[h])||void 0===n||n.focus(),null==s||s.forEach(((e,t)=>{e.tabIndex=t===h?0:-1}))}),[t,h]),(0,a.Z)((()=>{var e;const n=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelector('[data-role="menuitem"]');n&&(n.tabIndex=0),null==d||d(p)}));return[e=>{var n,s,a;const r=null==t||null===(n=t.current)||void 0===n?void 0:n.querySelectorAll('[data-role="menuitem"]'),o=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0;switch(e.key){case"ArrowUp":e.preventDefault(),e.stopPropagation(),p(i(h-1,o));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),p(i(h+1,o));break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),p(-1),null==l||l();break;case"Home":e.preventDefault(),e.stopPropagation(),p(0);break;case"End":e.preventDefault(),e.stopPropagation(),p(o-1);break;case"Enter":e.preventDefault(),e.stopPropagation(),null==r||null===(a=r[h])||void 0===a||a.click();break;case"Escape":e.preventDefault(),e.stopPropagation(),null==c||c();break;case"Tab":null==c||c()}null==u||u(e)},()=>{-1===h&&p(0)}]}},78941:(e,t,n)=>{"use strict";n.d(t,{u:()=>g});var s=n(52423),a=n(99510),i=n(81699),r=n(6665),o=n(68404),l=n(16755),d=n(23734),c=n(54761),u=n(39785),h=n(18714),p=n(45916);function g(e){const{title:t,children:n,isOpen:c=!1,closeOnEscape:u=!0,closeOnBackdropClick:g=!0,className:f,contentClassName:v,onDismiss:b,onClickBackdrop:x,trapFocus:y=!0}=e,w=(0,l.l4)(),j=(0,h.J)(w),S=(0,o.useRef)(null),{overlayProps:C,underlayProps:k}=(0,r.Ir)({isKeyboardDismissDisabled:!u,isOpen:c,onClose:b},S),{dialogProps:N,titleProps:O}=(0,a.R)({},S);if(!c)return null;const I=(0,s.cx)(j.modalHeader,"string"!=typeof t&&j.modalHeaderWithTabs);return(0,p.jsxs)(r.Xj,{children:[(0,p.jsx)("div",Object.assign({className:j.modalBackdrop,onClick:x||(g?b:void 0)},k)),(0,p.jsx)(i.MT,{contain:y,autoFocus:!0,restoreFocus:!0,children:(0,p.jsxs)("div",Object.assign({className:(0,s.cx)(j.modal,f),ref:S},C,N,{children:[(0,p.jsxs)("div",{className:I,children:["string"==typeof t&&(0,p.jsx)(m,Object.assign({},e,{title:t,id:O.id})),"string"!=typeof t&&t,(0,p.jsx)("div",{className:j.modalHeaderClose,children:(0,p.jsx)(d.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:b})})]}),(0,p.jsx)("div",{className:(0,s.cx)(j.modalContent,v),children:n})]}))})]})}function m(e){let{icon:t,iconTooltip:n,title:s,id:a}=e;return(0,p.jsx)(u.x,{icon:t,iconTooltip:n,title:s,id:a})}g.ButtonRow=function(e){let{leftItems:t,children:n}=e;const s=(0,l.l4)(),a=(0,h.J)(s);return t?(0,p.jsx)("div",{className:a.modalButtonRow,children:(0,p.jsxs)(c.Lh,{justify:"space-between",children:[(0,p.jsx)(c.Lh,{justify:"flex-start",spacing:"md",children:t}),(0,p.jsx)(c.Lh,{justify:"flex-end",spacing:"md",children:n})]})}):(0,p.jsx)("div",{className:a.modalButtonRow,children:(0,p.jsx)(c.Lh,{justify:"flex-end",spacing:"md",children:n})})}},39785:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});n(68404);var s=n(16755),a=n(18714),i=n(45916);const r=e=>{let{icon:t,iconTooltip:n,title:r,children:o,id:l}=e;const d=(0,s.wW)(a.J);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:d.modalHeaderTitle,id:l,children:r}),o]})}},41762:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});n(68404);var s=n(45916);const a=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"share-modal-body",children:(0,s.jsx)("div",{className:"share-modal-header",children:(0,s.jsx)("div",{className:"share-modal-content",children:t})})})}},55278:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});n(68404);var s=n(87152),a=n(10453),i=n(39785),r=n(45916);const o=e=>{let{icon:t,title:n,tabs:o,activeTab:l,onChangeTab:d}=e;return(0,r.jsx)(i.x,{icon:t,title:n,children:(0,r.jsx)(a.J,{hideBorder:!0,children:o.map(((e,t)=>(0,r.jsx)(s.O,{label:e.label,icon:e.icon,suffix:e.tabSuffix,active:e.value===l,onChangeTab:()=>d(e)},`${e.value}-${t}`)))})})}},40941:(e,t,n)=>{"use strict";n.d(t,{$i:()=>o,JY:()=>d,Y0:()=>l,kr:()=>r});var s=n(68404),a=n(45916);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=s.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class o extends s.Component{constructor(e){super(e),i(this,"showModal",((e,t)=>{this.setState({component:e,props:t})})),i(this,"hideModal",(()=>{this.setState({component:null,props:{}})})),this.state={component:e.component||null,props:e.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,a.jsx)(r.Provider,{value:this.state,children:this.props.children})}}const l=()=>(0,a.jsx)(r.Consumer,{children:e=>{let{component:t,props:n}=e;return t?(0,a.jsx)(t,Object.assign({},n)):null}}),d=r.Consumer},18714:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var s=n(52423);const a=(0,n(50191).B)((e=>{const t=e.shape.borderRadius(1);return{modal:s.css`
      position: fixed;
      z-index: ${e.zIndex.modal};
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      border-radius: ${t};
      border: 1px solid ${e.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:s.css`
      position: fixed;
      z-index: ${e.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${e.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:s.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${e.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:s.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,modalHeaderTitle:s.css`
      font-size: ${e.typography.size.lg};
      margin: ${e.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:s.css`
      margin-right: ${e.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:s.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${e.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:s.css`
      overflow: auto;
      padding: ${e.spacing(3)};
      width: 100%;
    `,modalButtonRow:s.css`
      padding-top: ${e.spacing(3)};
    `}}))},31787:(e,t,n)=>{"use strict";n.d(t,{p:()=>f});var s=n(52423),a=n(68404),i=n(27105),r=n(25004),o=n(16755),l=n(82173),d=n(27464);function c(e,t,n,s){const a=[];for(const r of n){var i;t&&!r.label.startsWith(t)||a.push(Object.assign({},r,{kind:u(e,r.kind),range:s,insertText:null!==(i=r.insertText)&&void 0!==i?i:r.label}))}return a}function u(e,t){switch(t){case d.k.Method:return e.languages.CompletionItemKind.Method;case d.k.Field:return e.languages.CompletionItemKind.Field;case d.k.Property:return e.languages.CompletionItemKind.Property;case d.k.Constant:return e.languages.CompletionItemKind.Constant;case d.k.Text:return e.languages.CompletionItemKind.Text}return e.languages.CompletionItemKind.Text}function h(e,t,n){if(t&&n)return e.languages.registerCompletionItemProvider(t,{triggerCharacters:["$"],provideCompletionItems:(t,s,a)=>{const i={startLineNumber:s.lineNumber,endLineNumber:s.lineNumber,startColumn:s.column,endColumn:s.column};if("$"===a.triggerCharacter)return i.startColumn=s.column-1,{suggestions:c(e,"$",n(),i)};const r=t.getValueInRange({startLineNumber:s.lineNumber,startColumn:1,endLineNumber:s.lineNumber,endColumn:s.column}),{index:o,prefix:l}=function(e){for(let t=e.length-1;t>0;t--){const n=e.charAt(t);if("$"===n)return{index:t,prefix:e.substring(t)};if(" "===n||"\t"===n||'"'===n||"'"===n)return{index:t+1,prefix:e.substring(t+1)}}return{index:0,prefix:e}}(r);i.startColumn=o+1;const d=c(e,l,n(),i);return d.length?{suggestions:d}:void 0}})}var p=n(45916);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends a.PureComponent{constructor(e){super(e),g(this,"completionCancel",void 0),g(this,"monaco",void 0),g(this,"loadCustomLanguage",(()=>{const{language:e}=this.props,t=i.F.getIfExists(e);return t?t.init():Promise.resolve()})),g(this,"getEditorValue",(()=>"")),g(this,"onBlur",(()=>{const{onBlur:e}=this.props;e&&e(this.getEditorValue())})),g(this,"onSave",(()=>{const{onSave:e}=this.props;e&&e(this.getEditorValue())})),g(this,"handleBeforeMount",(e=>{this.monaco=e;const{language:t,getSuggestions:n,onBeforeEditorMount:s}=this.props;n&&(this.completionCancel=h(e,t,n)),null==s||s(e)})),g(this,"handleOnMount",((e,t)=>{const{onChange:n,onEditorDidMount:s}=this.props;this.getEditorValue=()=>e.getValue(),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,this.onSave);const a=this.loadCustomLanguage();var i;s&&(a.then((()=>s(e,t))),null===(i=e.getModel())||void 0===i||i.onDidChangeContent((()=>null==n?void 0:n(e.getValue()))))}))}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(e){const{getSuggestions:t,language:n}=this.props,s=e.language!==n;if(e.getSuggestions!==t||s){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco)return void console.warn("Monaco instance not loaded yet");t&&(this.completionCancel=h(this.monaco,n,t))}s&&this.loadCustomLanguage()}render(){var e,t;const{theme:n,language:s,width:a,height:i,showMiniMap:o,showLineNumbers:d,readOnly:c,monacoOptions:u}=this.props,h=null!==(e=this.props.value)&&void 0!==e?e:"",g=h.length>100,m=null!==(t=this.props.containerStyles)&&void 0!==t?t:v(n).container,f={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:g&&o,renderCharacters:!1},readOnly:c,lineNumbersMinChars:4,lineDecorationsWidth:1*n.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*n.spacing.gridSize,bottom:.5*n.spacing.gridSize},fixedOverflowWidgets:!0};return d||(f.glyphMargin=!1,f.folding=!1,f.lineNumbers="off",f.lineNumbersMinChars=0),(0,p.jsx)("div",{className:m,onBlur:this.onBlur,"aria-label":r.wl.components.CodeEditor.container,children:(0,p.jsx)(l.o,{width:a,height:i,language:s,value:h,options:Object.assign({},f,null!=u?u:{}),beforeMount:this.handleBeforeMount,onMount:this.handleOnMount})})}}const f=(0,o.HE)(m),v=e=>({container:s.css`
      border-radius: ${e.shape.borderRadius()};
      border: 1px solid ${e.components.input.borderColor};
    `})},82173:(e,t,n)=>{"use strict";n.d(t,{o:()=>l});n(68404);var s=n(38953),a=n(66976),i=n(66015);var r,o=n(45916);const l=e=>{const{loading:t,error:l,dependency:d}=(e=>{const t=(0,i.Z)((async()=>await e));return Object.assign({},t,{dependency:t.value})})(n.e(2462).then(n.bind(n,42457)));if(t)return r||(r=(0,o.jsx)(s.u,{text:""}));if(l)return(0,o.jsx)(a.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:(null==l?void 0:l.stack)||""}});const c=d.ReactMonacoEditor;return(0,o.jsx)(c,Object.assign({},e))}},27464:(e,t,n)=>{"use strict";let s;n.d(t,{k:()=>s}),function(e){e.Method="method",e.Field="field",e.Property="property",e.Constant="constant",e.Text="text"}(s||(s={}))},85896:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var s=n(27464);function a(e){const t="${"+e.value+"}",n=e.value===e.label?e.origin:`${e.label} / ${e.origin}`;return{label:t,kind:s.k.Property,detail:n,documentation:e.documentation}}},80998:(e,t,n)=>{"use strict";n.d(t,{X:()=>p});var s=n(52423),a=n(68404),i=n(25004),r=n(32889),o=n(21084),l=n(16755),d=n(58906),c=n(99500),u=n(23734),h=n(45916);const p=a.memo((e=>{let{title:t,section:n,parent:d,pageIcon:p,onGoBack:m,children:f,titleHref:v,parentHref:b,leftItems:x,isFullscreen:y,className:w,"aria-label":j}=e;const S=(0,l.wW)(g),C=(0,s.cx)("page-toolbar",S.toolbar,{"page-toolbar--fullscreen":y},w),k=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:S.truncateText,children:t}),n&&(0,h.jsxs)("span",{className:S.pre,children:[" / ",n]})]});return(0,h.jsxs)("nav",{className:C,"aria-label":j,children:[(0,h.jsxs)("div",{className:S.leftWrapper,children:[p&&!m&&(0,h.jsx)("div",{className:S.pageIcon,children:(0,h.jsx)(c.J,{name:p,size:"lg","aria-hidden":!0})}),m&&(0,h.jsx)("div",{className:S.pageIcon,children:(0,h.jsx)(u.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":i.wl.components.BackButton.backArrow,onClick:m})}),(0,h.jsxs)("nav",{"aria-label":"Search links",className:S.navElement,children:[d&&b&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(r.r,{"aria-label":`Search dashboard in the ${d} folder`,className:(0,s.cx)(S.titleText,S.parentLink,S.titleLink,S.truncateText),href:b,children:[d," ",(0,h.jsx)("span",{className:S.parentIcon})]}),v&&(0,h.jsx)("span",{className:(0,s.cx)(S.titleText,S.titleDivider),"aria-hidden":!0,children:"/"})]}),(t||Boolean(null==x?void 0:x.length))&&(0,h.jsxs)("div",{className:S.titleWrapper,children:[t&&(0,h.jsx)("h1",{className:S.h1Styles,children:v?(0,h.jsx)(r.r,{"aria-label":"Search dashboard by name",className:(0,s.cx)(S.titleText,S.titleLink),href:v,children:k}):(0,h.jsx)("div",{className:S.titleText,children:k})}),null==x?void 0:x.map(((e,t)=>(0,h.jsx)("div",{className:S.leftActionItem,children:e},t)))]})]})]}),(0,h.jsx)(o.R,{alignment:"right",children:a.Children.toArray(f).filter(Boolean)})]})}));p.displayName="PageToolbar";const g=e=>{const{spacing:t,typography:n}=e,a=(0,d.getFocusStyles)(e);return{pre:s.css`
      white-space: pre;
    `,toolbar:s.css`
      align-items: center;
      background: ${e.colors.background.canvas};
      display: flex;
      gap: ${e.spacing(2)};
      justify-content: space-between;
      padding: ${e.spacing(1.5,2)};
    `,leftWrapper:s.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:s.css`
      display: none;
      ${e.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${e.spacing(1)};
        align-items: center;
      }
    `,truncateText:s.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:s.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:s.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:s.css`
      margin: 0;
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:s.css`
      margin-left: ${e.spacing(.5)};
    `,titleText:s.css`
      display: flex;
      font-size: ${n.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: 2px;
    `,titleLink:s.css`
      &:focus-visible {
        ${a}
      }
    `,titleDivider:s.css`
      padding: ${t(0,.5,0,.5)};
      display: none;
      ${e.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:s.css`
      display: none;
      ${e.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:s.css`
      display: none;
      ${e.breakpoints.up("md")} {
        align-items: center;
        display: flex;
        padding-left: ${t(.5)};
      }
    `}}},1558:(e,t,n)=>{"use strict";n.d(t,{t:()=>u});var s,a,i=n(52423),r=n(68404),o=n(16755),l=n(8006),d=n(99500),c=n(45916);const u=e=>{let{currentPage:t,numberOfPages:n,onNavigate:u,hideWhenSinglePage:p,showSmallVersion:g,className:m}=e;const f=(0,o.wW)(h),v=g?1:8,b=(0,r.useMemo)((()=>{const e=[...new Array(n).keys()],s=n>v,a=(e,t)=>(0,c.jsx)("li",{className:f.item,children:(0,c.jsx)(l.zx,{size:"sm",variant:t,onClick:()=>u(e),children:e})},e);return e.reduce(((e,i)=>{const r=i+1,o=r===t?"primary":"secondary",l=v,u=n-v+1,h=u-l,p=h>-1&&t>=l&&t<=u,m=g?1:3,b=g?0:2;return s?1===r||r===n||t<l&&r<l||h>=0&&t>u&&r>u||h<0&&t>=l&&r>u||p&&r>=t-b&&r<=t+b?e.push(a(r,o)):(r===l&&t<l||r===u&&t>u||p&&(r===t-m||r===t+m))&&e.push((0,c.jsx)("li",{className:f.item,children:(0,c.jsx)(d.J,{className:f.ellipsis,name:"ellipsis-v"})},r)):e.push(a(r,o)),e}),[])}),[t,n,u,v,g,f.ellipsis,f.item]);return p&&n<=1?null:(0,c.jsx)("div",{className:(0,i.cx)(f.container,m),children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{className:f.item,children:(0,c.jsx)(l.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>u(t-1),disabled:1===t,children:s||(s=(0,c.jsx)(d.J,{name:"angle-left"}))})}),b,(0,c.jsx)("li",{className:f.item,children:(0,c.jsx)(l.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>u(t+1),disabled:t===n,children:a||(a=(0,c.jsx)(d.J,{name:"angle-right"}))})})]})})},h=()=>({container:i.css`
      float: right;
    `,item:i.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:i.css`
      transform: rotate(90deg);
    `})},3157:(e,t,n)=>{"use strict";n.d(t,{g:()=>d});var s=n(52423),a=(n(68404),n(16755));const i="#e02f44";var r=n(99500),o=n(21888),l=n(45916);const d=e=>{let{error:t,onClick:n}=e;const i=(0,a.wW)(c);return t?(0,l.jsx)(o.u,{theme:"error",content:t,children:(0,l.jsx)(r.J,{onClick:n,className:(0,s.cx)(i.icon,{[i.clickable]:!!n}),size:"sm",name:"exclamation-triangle"})}):null},c=()=>({clickable:s.css`
      cursor: pointer;
    `,icon:s.css`
      color: ${i};
    `})},21144:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var s=n(52423),a=(n(68404),n(25004)),i=n(16755),r=n(99500),o=n(21888),l=n(45916);const d=e=>{let{onCancel:t,loading:n}=e;const d=(0,i.wW)(c);return n?(0,l.jsx)(o.u,{content:"Cancel query",children:(0,l.jsx)(r.J,{className:(0,s.cx)("spin-clockwise",{[d.clickable]:!!t}),name:"sync",size:"sm",onClick:t,"aria-label":a.wl.components.LoadingIndicator.icon})}):null},c=()=>({clickable:s.css`
      cursor: pointer;
    `})},27783:(e,t,n)=>{"use strict";n.d(t,{R9:()=>o,_w:()=>r,bb:()=>i});var s=n(68404),a=n(25317);const i=s.createContext({eventBus:new a.F}),r=i.Provider,o=()=>s.useContext(i)},20317:(e,t,n)=>{"use strict";n.d(t,{fm:()=>p});var s=n(3157),a=n(21144),i=n(52423),r=n(68404),o=n(16755),l=n(45916);const d=(e,t)=>{const n=r.Children.toArray(e).filter(Boolean);return n.length>0?t(n):null},c=(e,t,n)=>t.length>0||n.length>0?e.spacing.gridSize*e.components.panel.headerHeight:0,u=(e,t,n,s,a)=>{const i=("md"===e?t.components.panel.padding:0)*t.spacing.gridSize;return{contentStyle:{padding:i},innerWidth:n-2*i-2,innerHeight:a-s-2*i-2}},h=e=>{const{padding:t,background:n,borderColor:s}=e.components.panel;return{container:i.css`
      label: panel-container;
      background-color: ${n};
      border: 1px solid ${s};
      position: relative;
      border-radius: 3px;
      height: 100%;
      display: flex;
      flex-direction: column;
      flex: 0 0 0;
    `,content:i.css`
      label: panel-content;
      width: 100%;
      flex-grow: 1;
    `,header:i.css`
      label: panel-header;
      display: flex;
      align-items: center;
    `,headerTitle:i.css`
      label: panel-header;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      padding-left: ${e.spacing(t)};
      flex-grow: 1;
      font-weight: ${e.typography.fontWeightMedium};
    `,leftItems:i.css`
      display: flex;
      padding-right: ${e.spacing(t)};
    `}},p=e=>{let{title:t="",children:n,width:s,height:a,padding:i="md",leftItems:r=[]}=e;const p=(0,o.l4)(),g=(0,o.wW)(h),m=c(p,t,r),{contentStyle:f,innerWidth:v,innerHeight:b}=u(i,p,s,m,a),x={height:m},y={width:s,height:a};return(0,l.jsxs)("div",{className:g.container,style:y,children:[(0,l.jsxs)("div",{className:g.header,style:x,children:[(0,l.jsx)("div",{className:g.headerTitle,children:t}),d(r,(e=>(0,l.jsx)("div",{className:g.leftItems,children:e})))]}),(0,l.jsx)("div",{className:g.content,style:f,children:n(v,b)})]})};p.LoadingIndicator=a.T,p.ErrorIndicator=s.g},25393:(e,t,n)=>{"use strict";let s;n.d(t,{R:()=>s}),function(e){e.ToggleSelection="select",e.AppendToSelection="append"}(s||(s={}))},91288:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=["children","className"];const o=e=>{let{children:t,className:n}=e,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const d=(0,a.wW)(l);return(0,i.jsx)("div",Object.assign({className:(0,s.cx)(d,n)},o,{children:t}))},l=e=>s.css`
    background-color: ${e.components.panel.background};
    border: 1px solid ${e.components.panel.borderColor};
    border-radius: 3px;
  `},38437:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});n(68404);var s=n(15546),a=n(64313),i=n(45916);const r=["status"];const o=e=>{let{status:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);const o=function(e){e||(e=s.Xy.invalid);switch(e){case s.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case s.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case s.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case s.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case s.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}(t);return(0,i.jsx)(a.C,Object.assign({text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip},n))};o.displayName="PluginSignatureBadge"},48717:(e,t,n)=>{"use strict";n.d(t,{RN:()=>d,h_:()=>l,lO:()=>c});var s,a=n(68404),i=n(97394),r=n(16755),o=n(45916);function l(e){const{children:t,className:n,root:s,forwardedRef:l}=e,c=(0,r.l4)(),u=(0,a.useRef)(null),h=null!=s?s:d();return u.current||(u.current=document.createElement("div"),n&&(u.current.className=n),u.current.style.position="relative",u.current.style.zIndex=`${c.zIndex.portal}`),(0,a.useLayoutEffect)((()=>(u.current&&h.appendChild(u.current),()=>{u.current&&h.removeChild(u.current)})),[h]),i.createPortal((0,o.jsx)("div",{ref:l,children:t}),u.current)}function d(){var e;return null!==(e=window.document.getElementById("grafana-portal-container"))&&void 0!==e?e:document.body}function c(){return s||(s=(0,o.jsx)("div",{id:"grafana-portal-container"}))}a.forwardRef(((e,t)=>(0,o.jsx)(l,Object.assign({},e,{forwardedRef:t})))).displayName="RefForwardingPortal"},22995:(e,t,n)=>{"use strict";n.d(t,{q:()=>C});var s=n(52423),a=n(9085),i=n.n(a),r=n(82897),o=n(68404),l=n(40246),d=n(57597),c=n(25004),u=n(23766),h=n(70790),p=n(16564),g=n(69362),m=n(17843),f=n(20093),v=n(737),b=n(17669),x=n(16755),y=n(58906),w=n(45916);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends o.PureComponent{constructor(e,t){super(e,t),j(this,"plugins",void 0),j(this,"runOnChangeDebounced",void 0),j(this,"lastExecutedValue",null),j(this,"mounted",!1),j(this,"editor",null),j(this,"onChange",((e,t)=>{const n=e.document!==this.state.value.document,s=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(e),this.setState({value:e},(()=>{if(n){const n=l.Z.serialize(s)!==l.Z.serialize(e);n&&t&&this.runOnChangeAndRunQuery(),n&&!t&&this.runOnChangeDebounced()}}))})),j(this,"runOnChange",(()=>{const{onChange:e}=this.props,t=l.Z.serialize(this.state.value);e&&e(this.cleanText(t))})),j(this,"runOnRunQuery",(()=>{const{onRunQuery:e}=this.props;e&&(e(),this.lastExecutedValue=this.state.value)})),j(this,"runOnChangeAndRunQuery",(()=>{this.runOnChange(),this.runOnRunQuery()})),j(this,"handleBlur",((e,t,n)=>{const{onBlur:s}=this.props;if(s)s();else{(this.lastExecutedValue?l.Z.serialize(this.lastExecutedValue):"")!==l.Z.serialize(t.value)&&this.runOnChangeAndRunQuery()}return n()})),this.runOnChangeDebounced=(0,r.debounce)(this.runOnChange,500);const{onTypeahead:n,cleanText:s,portalOrigin:a,onWillApplySuggestion:i}=e;this.plugins=[(0,h.b)({onTypeahead:n,cleanText:s,portalOrigin:a,onWillApplySuggestion:i}),(0,p.d)({handler:this.runOnChangeAndRunQuery}),(0,g.z)(),(0,m.G)(),(0,f.$)(),(0,v.R)(),(0,b.w)(),...e.additionalPlugins||[]].filter((e=>e)),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,u.l1)(e.query||"",e.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(e,t){const{query:n,syntax:s,syntaxLoaded:a}=this.props;if(!e.syntaxLoaded&&a&&this.editor){const e=this.editor.insertText(" ").deleteBackward(1);this.onChange(e.value,!0)}const{value:i}=this.state;n!==e.query&&n!==l.Z.serialize(i)&&this.setState({value:(0,u.l1)(n||"",s)})}cleanText(e){return e.replace(/[\r]/g,"")}render(){const{disabled:e,theme:t}=this.props,n=i()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":e}),a=k(t);return(0,w.jsx)("div",{className:(0,s.cx)(n,a.wrapper),children:(0,w.jsx)("div",{className:"slate-query-field","aria-label":c.wl.components.QueryField.container,children:(0,w.jsx)(d.ML,{ref:e=>this.editor=e,schema:u.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:e=>{this.onChange(e.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}const C=(0,x.HE)(S),k=e=>{const t=(0,y.getFocusStyles)(e);return{wrapper:s.css`
      &:focus-within {
        ${t}
      }
    `}}},21162:(e,t,n)=>{"use strict";n.d(t,{dP:()=>g,o5:()=>p});var s=n(14016),a=n(68404),i=n(13960),r=n(25004),o=n(60192),l=n(98817),d=n(41460),c=n(1696),u=n(45916);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class g extends a.PureComponent{constructor(e){super(e),h(this,"onChangeSelect",(e=>{const{onIntervalChanged:t}=this.props;t&&null!=e.value&&t(e.value)}))}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:e,intervals:t,tooltip:n,value:a,text:h,isLoading:f,noIntervalPicker:v,width:b}=this.props,x=a||"",y=this.getVariant(),w=function(){let{intervals:e=p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.map((e=>{const t=(0,i.RA)(e);return{label:e,value:e,ariaLabel:(0,s.Z)(t)}}));return t.unshift(m(g.offOption.value)),t}({intervals:t}),j=w.find((e=>{let{value:t}=e;return t===x})),S=m(g.offOption.value);let C=j||S;C.label===S.label&&(C={value:""});const k=C.ariaLabel,N=(0,o.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:k}),O=(0,o.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),I=""===C.value?O:N;return(0,u.jsxs)(l.h,{className:"refresh-picker",children:[(0,u.jsx)(c.h,{"aria-label":h,tooltip:n,onClick:e,variant:y,icon:f?"fa fa-spinner":"sync",style:b?{width:b}:void 0,"data-testid":r.wl.components.RefreshPicker.runButtonV2,children:h}),!v&&(0,u.jsx)(d.d,{value:C,options:w,onChange:this.onChangeSelect,variant:y,title:(0,o.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":r.wl.components.RefreshPicker.intervalButtonV2,"aria-label":I})]})}}function m(e){return e===g.liveOption.value?{label:(0,o.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,o.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,o.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,o.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}h(g,"offOption",{label:"Off",value:"",ariaLabel:"Turn off auto refresh"}),h(g,"liveOption",{label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}),h(g,"isLive",(e=>e===g.liveOption.value))},4388:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var s=n(68404),a=n(76093);const i=["component","content"];function r(e){let{component:t,content:n}=e,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,i);return s.createElement(t||"span",Object.assign({dangerouslySetInnerHTML:{__html:a.QX.sanitize(n)}},r))}},3822:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var s=n(52423),a=n(82897),i=(n(68404),n(8006)),r=n(69173),o=n(45916);const l=["label","labelWidth","inputWidth","onReset","isConfigured","tooltip","placeholder","interactive"];const d=e=>{let{label:t="Password",labelWidth:n,inputWidth:d=12,onReset:c,isConfigured:u,tooltip:h,placeholder:p="Password",interactive:g}=e,m=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const f={noRadiusInput:s.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:s.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `};return(0,o.jsx)(r.W,{label:t,tooltip:h,interactive:g,labelWidth:n,inputEl:u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",Object.assign({type:"text",className:(0,s.cx)(`gf-form-input width-${d}`,f.noRadiusInput),disabled:!0,value:"configured"},(0,a.omit)(m,"value"))),(0,o.jsx)(i.zx,{onClick:c,variant:"secondary",type:"button",children:"Reset"})]}):(0,o.jsx)("input",Object.assign({type:"password",className:`gf-form-input width-${d}`,placeholder:p},m))})};d.displayName="SecretFormField"},85558:(e,t,n)=>{"use strict";n.d(t,{m4:()=>l});n(68404);var s=n(8006),a=n(4645),i=n(54761),r=n(45916);const o=["isConfigured","onReset"];const l=e=>{let{isConfigured:t,onReset:n}=e,l=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);return(0,r.jsxs)(i.Lh,{children:[!t&&(0,r.jsx)(a.I,Object.assign({},l,{type:"password"})),t&&(0,r.jsx)(a.I,Object.assign({},l,{type:"text",disabled:!0,value:"configured"})),t&&(0,r.jsx)(s.zx,{onClick:n,variant:"secondary",children:"Reset"})]})}},47398:(e,t,n)=>{"use strict";n.d(t,{Zk:()=>u});var s=n(52423),a=(n(68404),n(16755)),i=n(8006),r=n(54761),o=n(93194),l=n(45916);const d=["isConfigured","onReset"];const c=e=>({configuredStyle:s.css`
      min-height: ${e.spacing(e.components.height.md)};
      padding-top: ${e.spacing(.5)};
      resize: none;
    `}),u=e=>{let{isConfigured:t,onReset:n}=e,u=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const h=(0,a.wW)(c);return(0,l.jsxs)(r.Lh,{children:[!t&&(0,l.jsx)(o.K,Object.assign({},u)),t&&(0,l.jsx)(o.K,Object.assign({},u,{rows:1,disabled:!0,value:"configured",className:(0,s.cx)(h.configuredStyle)})),t&&(0,l.jsx)(i.zx,{onClick:n,variant:"secondary",children:"Reset"})]})}},65335:(e,t,n)=>{"use strict";n.d(t,{X:()=>h});var s=n(52423),a=n(82897),i=(n(68404),n(16755)),r=n(66946),o=n(60715),l=n(20544),d=n(72907),c=n(45916);const u=["options","value","onChange","Component","className","allowCustomValue","allowEmptyValue","placeholder","disabled","inputMinWidth","inputPlaceholder","onExpandedChange","autofocus"];function h(e){let{options:t,value:n,onChange:h,Component:p,className:g,allowCustomValue:m,allowEmptyValue:f,placeholder:v,disabled:b,inputMinWidth:x,inputPlaceholder:y,onExpandedChange:w,autofocus:j=!1}=e,S=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const[C,k,N,O]=(0,l._)(j,w),I=x?Math.max(x,k):k,T=(0,i.wW)(o.N);if(!N){const e=(0,a.isObject)(n)?n.label:n;return(0,c.jsx)(C,{disabled:b,Component:p||(0,c.jsx)(r.W,{className:(0,s.cx)(T.segment,{[T.queryPlaceholder]:void 0!==v&&!n,[T.disabled]:b},g),children:e||v})})}return(0,c.jsx)(d.V,Object.assign({},S,{value:n&&!(0,a.isObject)(n)?{value:n}:n,placeholder:y,options:t,width:I,onClickOutside:()=>O(!1),allowCustomValue:m,allowEmptyValue:f,onChange:e=>{O(!1),h(e)}}))}},89089:(e,t,n)=>{"use strict";n.d(t,{V:()=>p});var s=n(52423),a=n(82897),i=(n(68404),n(7197)),r=n(16755),o=n(66946),l=n(72907),d=n(60715),c=n(20544),u=n(45916);const h=["value","onChange","loadOptions","reloadOptionsOnChange","Component","className","allowCustomValue","allowEmptyValue","disabled","placeholder","inputMinWidth","inputPlaceholder","autofocus","onExpandedChange","noOptionMessageHandler"];function p(e){var t;let{value:n,onChange:p,loadOptions:m,reloadOptionsOnChange:f=!1,Component:v,className:b,allowCustomValue:x,allowEmptyValue:y,disabled:w,placeholder:j,inputMinWidth:S,inputPlaceholder:C,autofocus:k=!1,onExpandedChange:N,noOptionMessageHandler:O=g}=e,I=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);const[T,$]=(0,i.Z)(m,[m]),[R,P,D,A]=(0,c._)(k,N),M=S?Math.max(S,P):P,L=(0,r.wW)(d.N);if(!D){const e=(0,a.isObject)(n)?n.label:n;return(0,u.jsx)(R,{onClick:f?void 0:$,disabled:w,Component:v||(0,u.jsx)(o.W,{className:(0,s.cx)(L.segment,{[L.queryPlaceholder]:void 0!==j&&!n,[L.disabled]:w},b),children:e||j})})}return(0,u.jsx)(l.V,Object.assign({},I,{value:n&&!(0,a.isObject)(n)?{value:n}:n,placeholder:C,options:null!==(t=T.value)&&void 0!==t?t:[],loadOptions:f?$:void 0,width:M,noOptionsMessage:O(T),allowCustomValue:x,allowEmptyValue:y,onClickOutside:()=>{A(!1)},onChange:e=>{A(!1),p(e)}}))}function g(e){return e.loading?"Loading options...":e.error?"Failed to load options":Array.isArray(e.value)&&0!==e.value.length?"":"No options found"}},34297:(e,t,n)=>{"use strict";n.d(t,{X:()=>p});var s=n(52423),a=n(68404),i=n(16319),r=n(16755),o=n(43456),l=n(66946),d=n(60715),c=n(20544),u=n(45916);const h=["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"];function p(e){let{value:t,onChange:n,Component:p,className:g,placeholder:m,inputPlaceholder:f,disabled:v,autofocus:b=!1,onExpandedChange:x}=e,y=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);const w=(0,a.useRef)(null),[j,S]=(0,a.useState)(t),[C,k]=(0,a.useState)((0,o.X1)((t||"").toString(),14).width),[N,,O,I]=(0,c._)(b,x),T=(0,r.wW)(d.N);if((0,i.Z)(w,(()=>{I(!1),n(j)})),!O)return(0,u.jsx)(N,{disabled:v,Component:p||(0,u.jsx)(l.W,{className:(0,s.cx)(T.segment,{[T.queryPlaceholder]:void 0!==m&&!j,[T.disabled]:v},g),children:t||m})});const $=s.css`
    width: ${Math.max(C+20,32)}px;
  `;return(0,u.jsx)("input",Object.assign({},y,{ref:w,autoFocus:!0,className:(0,s.cx)("gf-form gf-form-input",$),value:j,placeholder:f,onChange:e=>{const{width:t}=(0,o.X1)(e.target.value,14);k(t),S(e.target.value)},onBlur:()=>{I(!1),n(j)},onKeyDown:e=>{[13,27].includes(e.keyCode)&&(I(!1),n(j))}}))}},564:(e,t,n)=>{"use strict";n.d(t,{f:()=>d});var s,a=n(52423),i=(n(68404),n(16755)),r=n(34117),o=n(66946),l=n(45916);const d=e=>{let{label:t,htmlFor:n,children:a,fill:d}=e;const u=(0,i.wW)(c);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(o.W,{htmlFor:n,width:12,className:u.label,children:t}),a,d&&(0,l.jsx)("div",{className:u.fill,children:s||(s=(0,l.jsx)(o.W,{children:""}))})]})})},c=e=>({label:a.css`
    color: ${e.colors.primary.text};
  `,fill:a.css`
    flex-grow: 1;
    margin-bottom: ${e.spacing(.5)};
  `})},72907:(e,t,n)=>{"use strict";n.d(t,{V:()=>l});var s=n(68404),a=n(16755),i=n(70917),r=n(45916);const o=["value","placeholder","options","onChange","onClickOutside","loadOptions","width","noOptionsMessage","allowCustomValue","allowEmptyValue"];function l(e){let{value:t,placeholder:n="",options:l=[],onChange:d,onClickOutside:c,loadOptions:u,width:h,noOptionsMessage:p="",allowCustomValue:g=!1,allowEmptyValue:m=!1}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const v=(0,s.useRef)(null),b=(0,a.l4)();let x,y=h>0?h/b.spacing.gridSize:void 0,w={};return u?(x=i.qb,w={loadOptions:u,defaultOptions:!0}):x=i.Ph,(0,r.jsx)("div",Object.assign({},f,{ref:v,children:(0,r.jsx)(x,Object.assign({width:y,noOptionsMessage:p,placeholder:n,autoFocus:!0,isOpen:!0,onChange:d,options:l,value:t,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const e=v.current.querySelector('input[id^="react-select-"]');e&&(e.value||m)?d({value:e.value,label:e.value}):c()}},allowCustomValue:g},w))}))}},60715:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var s=n(52423);const a=e=>{const t="v1"in e?e.v1.palette:e.palette;return{segment:s.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:s.css`
      color: ${t.gray2};
    `,disabled:s.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},20544:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var s=n(68404),a=n(45916);const i=(e,t)=>{const n=(0,s.useRef)(null),[i,r]=(0,s.useState)(e),[o,l]=(0,s.useState)(0),d=e=>{r(e),t&&t(e)};return[e=>{let{Component:t,onClick:s,disabled:i}=e;return(0,a.jsx)("div",{ref:n,onClick:i?void 0:()=>{d(!0),n&&n.current&&l(1.25*n.current.clientWidth),s&&s()},children:t})},o,i,d]}},34153:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});n(68404);var s=n(99500),a=n(45916);const i=e=>{let{isOpen:t}=e;const n=t?"search":"angle-down",i=t?"sm":"md";return(0,a.jsx)(s.J,{name:n,size:i})}},70917:(e,t,n)=>{"use strict";n.d(t,{M8:()=>Y,qb:()=>K,NU:()=>Q,Ph:()=>G,eI:()=>O,LT:()=>J});var s=n(68404),a=n(37826),i=n(30250),r=n(5105),o=n(83238),l=n(16755),d=n(99500),c=n(81691),u=n(34153),h=n(52423),p=n(4645),g=n(45916);const m=s.forwardRef(((e,t)=>{const{children:n}=e,s=(0,l.l4)(),a=(0,p.H)({theme:s,invalid:!1});return(0,g.jsx)("div",{className:(0,h.cx)(a.suffix,h.css`
          position: relative;
        `),ref:t,children:n})}));m.displayName="IndicatorsContainer";var f=n(50191),v=n(50578);const b=["focused","invalid","disabled","children","innerProps","prefix"];const x=(0,f.B)(((e,t,n)=>{const s=(0,p.H)({theme:e,invalid:t});return{input:(0,h.cx)((0,v.nf)(e),h.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,n&&h.css`
          padding-left: 0;
        `),prefix:(0,h.cx)(s.prefix,h.css`
        position: relative;
      `)}})),y=s.forwardRef((function(e,t){let{invalid:n,children:s,innerProps:a,prefix:i}=e;!function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n])}(e,b);const r=(0,l.l4)(),o=x(r,n,!!i);return(0,g.jsxs)("div",Object.assign({className:o.input},a,{ref:t,children:[i&&(0,g.jsx)("div",{className:(0,h.cx)(o.prefix),children:i}),s]}))}));var w=n(23734),j=n(68570);const S=e=>{let{innerProps:t,children:n}=e;const s=(0,l.l4)(),a=(0,j.D)(s);return(0,g.jsx)("div",Object.assign({},t,{className:a.multiValueContainer,children:n}))},C=e=>{let{children:t,innerProps:n}=e;const s=(0,l.l4)(),a=(0,j.D)(s);return(0,g.jsx)(w.h,Object.assign({},n,{name:"times",size:"sm",className:a.multiValueRemove}))};var k=n(8887),N=n(58906);const O=e=>{const{isDisabled:t,isFocused:n,children:s,selectProps:{invalid:a=!1}}=e,i=(0,l.l4)(),r=I(i,n,t,a);return(0,g.jsx)(k.c.SelectContainer,Object.assign({},e,{className:(0,h.cx)(r.wrapper,e.className),children:s}))},I=(0,f.B)(((e,t,n,s)=>{const a=(0,p.H)({theme:e,invalid:s});return{wrapper:(0,h.cx)(a.wrapper,(0,v.RK)(e,s),t&&h.css`
            ${(0,N.focusCss)(e.v1)}
          `,n&&a.inputDisabled,h.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${n?"not-allowed":"pointer"};
        `)}}));var T=n(82897),$=n(75478),R=n(42454),P=n(22222);const D=e=>{let{children:t,maxHeight:n,innerRef:s,innerProps:a}=e;const i=(0,l.l4)(),r=(0,j.D)(i);return(0,g.jsx)("div",Object.assign({},a,{className:r.menu,style:{maxHeight:n},"aria-label":"Select options menu",children:(0,g.jsx)(P.$,{scrollRefCallback:s,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0,children:t})}))};D.displayName="SelectMenu";const A=e=>{var t;let{children:n,maxHeight:s,options:a,getValue:i}=e;const r=(0,l.l4)(),o=(0,j.D)(r),[d]=i(),c=37*(d?a.findIndex((e=>e.value===d.value)):0);if(!Array.isArray(n))return null;const u=7*(null!==(t=(0,T.max)(a.map((e=>{var t;return null===(t=e.label)||void 0===t?void 0:t.length}))))&&void 0!==t?t:0),h=Math.min(37*a.length,s);return(0,g.jsx)($.t7,{className:o.menu,height:h,width:u,"aria-label":"Select options menu",itemCount:n.length,itemSize:37,initialScrollOffset:c,children:e=>{let{index:t,style:s}=e;return(0,g.jsx)("div",{style:Object.assign({},s,{overflow:"hidden"}),children:n[t]})}})};A.displayName="VirtualizedSelectMenu";const M=e=>{let{children:t,data:n,innerProps:s,innerRef:a,isFocused:i,isSelected:r,renderOptionLabel:o}=e;const c=(0,l.l4)(),u=(0,j.D)(c),p=n.icon?(0,R.iJ)(n.icon):void 0;return(0,g.jsxs)("div",Object.assign({ref:a,className:(0,h.cx)(u.option,i&&u.optionFocused,r&&u.optionSelected,n.isDisabled&&u.optionDisabled)},s,{"aria-label":"Select option",title:n.title,children:[p&&(0,g.jsx)(d.J,{name:p,className:u.optionIcon}),n.imgUrl&&(0,g.jsx)("img",{className:u.optionImage,src:n.imgUrl,alt:n.label||n.value}),(0,g.jsxs)("div",{className:u.optionBody,children:[(0,g.jsx)("span",{children:o?o(n):t}),n.description&&(0,g.jsx)("div",{className:u.optionDescription,children:n.description}),n.component&&(0,g.jsx)(n.component,{})]})]}))};M.displayName="SelectMenuOptions";var L=n(93698),F=n(2087);class E extends s.Component{render(){const{children:e}=this.props,{selectProps:t}=this.props;if(t&&Array.isArray(e)&&Array.isArray(e[0])&&void 0!==t.maxVisibleValues&&(!t.showAllSelectedWhenOpen||!t.menuIsOpen)){const[n,...s]=e,a=n.slice(0,t.maxVisibleValues);return this.renderContainer([a,...s])}return this.renderContainer(e)}renderContainer(e){const{isMulti:t,theme:n}=this.props,s=(0,j.D)(n),a=(0,h.cx)(s.valueContainer,t&&s.valueContainerMulti);return(0,g.jsx)("div",{className:a,children:e})}}const V=(0,l.HE)(E);var z=n(28728);const B=["description"];const _=(e,t)=>{for(const n of t)if("options"in n){let t=_(e,n.options);if(t)return t}else if("value"in n&&n.value===e)return n;return null},W=e=>e.map((e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,B)));var U;const H=e=>{const{children:t,innerProps:n,selectProps:{menuIsOpen:a,onMenuClose:i,onMenuOpen:r},isFocused:o,isMulti:l,getValue:d,innerRef:c}=e,u=e.selectProps;return u.renderControl?s.createElement(u.renderControl,{isOpen:a,value:l?d():d()[0],ref:c,onClick:a?i:r,onBlur:i,disabled:!!u.disabled,invalid:!!u.invalid}):(0,g.jsx)(y,{ref:c,innerProps:n,prefix:u.prefix,focused:o,invalid:!!u.invalid,disabled:!!u.disabled,children:t})};function q(e){var t;let{allowCustomValue:n=!1,allowCreateWhileLoading:h=!1,"aria-label":p,autoFocus:f=!1,backspaceRemovesValue:v=!0,cacheOptions:b,className:x,closeMenuOnSelect:y=!0,components:w,defaultOptions:k,defaultValue:N,disabled:I=!1,filterOption:T,formatCreateLabel:$,getOptionLabel:R,getOptionValue:P,inputValue:E,invalid:B,isClearable:q=!1,id:G,isLoading:Q=!1,isMulti:K=!1,inputId:J,isOpen:Y,isOptionDisabled:X,isSearchable:ee=!0,loadOptions:te,loadingMessage:ne="Loading options...",maxMenuHeight:se=300,minMenuHeight:ae,maxVisibleValues:ie,menuPlacement:re="auto",menuPosition:oe,menuShouldPortal:le=!0,noOptionsMessage:de="No options found",onBlur:ce,onChange:ue,onCloseMenu:he,onCreateOption:pe,onInputChange:ge,onKeyDown:me,onOpenMenu:fe,onFocus:ve,openMenuOnFocus:be=!1,options:xe=[],placeholder:ye="Choose",prefix:we,renderControl:je,showAllSelectedWhenOpen:Se=!0,tabSelectsValue:Ce=!0,value:ke,virtualized:Ne=!1,width:Oe,isValidNewOption:Ie,formatOptionLabel:Te}=e;const $e=(0,l.l4)(),Re=(0,j.D)($e),Pe=(0,s.useRef)(null),[De,Ae]=(0,s.useState)(!1),Me=(0,z.O)($e,Oe);(0,s.useEffect)((()=>{if(te&&Y&&Pe.current&&Pe.current.controlRef&&"auto"===re){const e=window.innerHeight-Pe.current.controlRef.getBoundingClientRect().bottom;Ae(e<se)}}),[se,re,te,Y]);const Le=(0,s.useCallback)(((e,t)=>{if(K&&null==e)return ue([],t);ue(e,t)}),[K,ue]);let Fe=a.ZP;const Ee={};let Ve,ze={};if(K&&te)Ve=ke;else if(K&&ke&&Array.isArray(ke)&&!te)Ve=ke.map((e=>{var t;return _(null!==(t=e.value)&&void 0!==t?t:e,xe)}));else if(te){const e=N||ke;Ve=e?[e]:[]}else Ve=((e,t)=>{if(Array.isArray(e)){const t=e.filter(Boolean);return null!=t&&t.length?t:void 0}if("object"==typeof e)return[e];if("string"==typeof e||"number"==typeof e){const n=_(e,t);if(n)return[n]}})(ke,xe);const Be={"aria-label":p,autoFocus:f,backspaceRemovesValue:v,captureMenuScroll:!1,closeMenuOnSelect:y,defaultValue:N,disabled:I,filterOption:T,getOptionLabel:R,getOptionValue:P,inputValue:E,invalid:B,isClearable:q,id:G,isDisabled:I,isLoading:Q,isMulti:K,inputId:J,isOptionDisabled:X,isSearchable:ee,maxMenuHeight:se,minMenuHeight:ae,maxVisibleValues:ie,menuIsOpen:Y,menuPlacement:"auto"===re&&De?"top":re,menuPosition:oe,menuShouldBlockScroll:!0,menuPortalTarget:le&&"undefined"!=typeof document?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:ce,onChange:Le,onInputChange:ge,onKeyDown:me,onMenuClose:he,onMenuOpen:fe,onFocus:ve,formatOptionLabel:Te,openMenuOnFocus:be,options:Ne?W(xe):xe,placeholder:ye,prefix:we,renderControl:je,showAllSelectedWhenOpen:Se,tabSelectsValue:Ce,value:K?Ve:null===(t=Ve)||void 0===t?void 0:t[0]};n&&(Fe=o.Z,Ee.allowCreateWhileLoading=h,Ee.formatCreateLabel=null!=$?$:Z,Ee.onCreateOption=pe,Ee.isValidNewOption=Ie),te&&(Fe=n?r.Z:i.Z,ze={loadOptions:te,cacheOptions:b,defaultOptions:k});const _e=Ne?A:D;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(Fe,Object.assign({ref:Pe,components:Object.assign({MenuList:_e,Group:L.n,ValueContainer:V,IndicatorsContainer(e){const{selectProps:t}=e,{value:n,showAllSelectedWhenOpen:s,maxVisibleValues:a,menuIsOpen:i}=t;if(void 0!==a){const t=n.length,r=[...e.children];return r.splice(-1,0,(e=>{const{maxVisibleValues:t,selectedValuesCount:n,menuIsOpen:s,showAllSelectedWhenOpen:a}=e;return!(void 0!==t&&n>t)||a&&s?null:(0,g.jsxs)("span",{id:"excess-values",children:["(+",n-t,")"]},"excess-values")})({maxVisibleValues:a,selectedValuesCount:t,showAllSelectedWhenOpen:s,menuIsOpen:i})),(0,g.jsx)(m,Object.assign({},e,{children:r}))}return(0,g.jsx)(m,Object.assign({},e))},IndicatorSeparator:()=>(0,g.jsx)(g.Fragment,{}),Control:H,Option:M,ClearIndicator(e){const{clearValue:t}=e;return(0,g.jsx)(d.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Re.singleValueRemove,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),t()}})},LoadingIndicator:()=>U||(U=(0,g.jsx)(c.$,{inline:!0})),LoadingMessage:()=>(0,g.jsx)("div",{className:Re.loadingMessage,children:ne}),NoOptionsMessage:()=>(0,g.jsx)("div",{className:Re.loadingMessage,"aria-label":"No options provided",children:de}),DropdownIndicator:e=>(0,g.jsx)(u.m,{isOpen:e.selectProps.menuIsOpen}),SingleValue:e=>(0,g.jsx)(F.P,Object.assign({},e,{disabled:I})),SelectContainer:O,MultiValueContainer:S,MultiValueRemove:C},w),styles:Me,className:x},Be,Ee,ze))})}function Z(e){return(0,g.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,g.jsx)("div",{children:e}),(0,g.jsx)("div",{style:{flexGrow:1}}),(0,g.jsx)("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"},children:"Hit enter to add"})]})}function G(e){return(0,g.jsx)(q,Object.assign({},e))}function Q(e){return(0,g.jsx)(q,Object.assign({},e,{isMulti:!0}))}function K(e){return(0,g.jsx)(q,Object.assign({},e))}function J(e){return(0,g.jsx)(q,Object.assign({virtualized:!0},e))}function Y(e){return(0,g.jsx)(q,Object.assign({},e,{isMulti:!0}))}},93698:(e,t,n)=>{"use strict";n.d(t,{n:()=>h});var s=n(52423),a=n(68404),i=n(50191),r=n(16755),o=n(99500),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=(0,i.B)((e=>({header:s.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${e.colors.background.secondary};

      &:hover {
        color: ${e.colors.text.maxContrast};
      }
    `,label:s.css`
      flex-grow: 1;
    `,icon:s.css`
      padding-right: 2px;
    `})));class u extends a.PureComponent{constructor(){super(...arguments),d(this,"state",{expanded:!1}),d(this,"onToggleChildren",(()=>{this.setState((e=>({expanded:!e.expanded})))}))}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:e}=this.props.selectProps.value;e&&this.props.options.some((t=>t.value===e))&&this.setState({expanded:!0})}}componentDidUpdate(e){""!==e.selectProps.inputValue&&this.setState({expanded:!0})}render(){const{children:e,label:t,theme:n}=this.props,{expanded:s}=this.state,a=c(n);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:a.header,onClick:this.onToggleChildren,children:[(0,l.jsx)("span",{className:a.label,children:t}),(0,l.jsx)(o.J,{className:a.icon,name:s?"angle-up":"angle-down"})," "]}),s&&e]})}}const h=(0,r.HE)(u)},2087:(e,t,n)=>{"use strict";n.d(t,{P:()=>h});var s=n(52423),a=n(68404),i=n(8887),r=n(16755);var o=n(81691),l=n(75336),d=n(1315),c=n(45916);const u=e=>({singleValue:s.css`
    label: singleValue;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,spinnerWrapper:s.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,spinnerIcon:s.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,disabled:s.css`
    color: ${e.colors.text.disabled};
  `,isOpen:s.css`
    color: ${e.colors.text.disabled};
  `}),h=e=>{var t;const{children:n,data:l,isDisabled:h}=e,g=(0,r.wW)(u),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=250,delay:s=250}=t,[i,r]=(0,a.useState)(e),o=(0,a.useRef)();return(0,a.useEffect)((()=>{let t;if(e)t=setTimeout((()=>{o.current=new Date,r(e)}),s);else{const s=o.current?Date.now()-o.current.valueOf():0,a=()=>{o.current=void 0,r(e)};s>=n?a():t=setTimeout(a,n-s)}return()=>{t&&(clearTimeout(t),t=void 0)}}),[e,n,s]),i}(l.loading||!1,{delay:250,duration:750});return(0,c.jsxs)(i.c.SingleValue,Object.assign({},e,{className:(0,s.cx)(g.singleValue,h&&g.disabled,e.selectProps.menuIsOpen&&g.isOpen),children:[l.imgUrl?(0,c.jsx)(p,{loading:m,imgUrl:l.imgUrl,styles:g,alt:null!==(t=l.label)&&void 0!==t?t:l.value}):(0,c.jsx)(d.R,{horizontal:!0,size:16,visible:m,duration:150,children:(0,c.jsx)("div",{className:g.spinnerWrapper,children:(0,c.jsx)(o.$,{className:g.spinnerIcon,inline:!0})})}),!l.hideText&&n]}))},p=e=>(0,c.jsxs)("div",{className:e.styles.spinnerWrapper,children:[(0,c.jsx)(l.n,{duration:150,visible:e.loading,children:(0,c.jsx)(o.$,{className:e.styles.spinnerIcon,inline:!0})}),(0,c.jsx)(l.n,{duration:150,visible:!e.loading,children:(0,c.jsx)("img",{className:e.styles.spinnerIcon,src:e.imgUrl,alt:e.alt})})]})},68570:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var s=n(52423);const a=(0,n(50191).B)((e=>({menu:s.css`
      label: grafana-select-menu;
      background: ${e.components.dropdown.background};
      box-shadow: ${e.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:s.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,optionIcon:s.css`
      margin-right: ${e.spacing(1)};
    `,optionImage:s.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:s.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      white-space: normal;
      line-height: ${e.typography.body.lineHeight};
    `,optionBody:s.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:s.css`
      label: grafana-select-option-focused;
      background: ${e.colors.action.focus};
    `,optionSelected:s.css`
      background: ${e.colors.action.selected};
    `,optionDisabled:s.css`
      label: grafana-select-option-disabled;
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:s.css`
      label: grafana-select-single-value;
      color: ${e.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:s.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:s.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:s.css`
      label: grafana-select-loading-message;
      padding: ${e.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:s.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius()};
      margin: ${e.spacing(.25,1,.25,0)};
      padding: ${e.spacing(.25,0,.25,1)};
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `,multiValueRemove:s.css`
      label: grafana-select-multi-value-remove;
      margin: ${e.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:s.css`
      cursor: pointer;
      &:hover {
        color: ${e.colors.text.primary};
      }
    `})))},28728:(e,t,n)=>{"use strict";n.d(t,{O:()=>i,Z:()=>a});var s=n(68404);function a(e){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(e){return Object.assign({},e,{color:"inherit",margin:0,padding:0,zIndex:1})},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:e=>{let{maxHeight:t}=e;return{maxHeight:t}},multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:t=>Object.assign({},t,{color:e.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function i(e,t){return(0,s.useMemo)((()=>Object.assign({},a(e),{menuPortal:t=>Object.assign({},t,{zIndex:e.zIndex.portal}),menu:t=>{let{top:n,bottom:s,position:a}=t;return{top:n,bottom:s,position:a,minWidth:"100%",zIndex:e.zIndex.dropdown}},container:()=>({width:t?e.spacing(t):"100%",display:"auto"===t?"inline-flex":"flex"}),option:(e,t)=>Object.assign({},e,{opacity:t.isDisabled?.5:1})})),[e,t])}},94868:(e,t,n)=>{"use strict";n.d(t,{F:()=>g});var s=n(82897),a=n(68404),i=n(96209),r=n(53786),o=n(3255),l=n(65243),d=n(13016),c=n(29236),u=n(56949),h=n(21162);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends a.PureComponent{constructor(e){super(e),p(this,"propsSubject",void 0),p(this,"subscription",void 0),this.propsSubject=new i.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,d.w)((e=>h.dP.isLive(e.interval)?(0,r.of)({}):e.loading?o.C:(0,l.F)((0,u.e0)(e.interval)))),(0,c.b)((()=>this.props.func()))).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(e){h.dP.isLive(e.interval)&&h.dP.isLive(this.props.interval)||(0,s.isEqual)(e,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},69927:(e,t,n)=>{"use strict";n.d(t,{PR:()=>b,ZH:()=>m,rD:()=>f});var s=n(82897),a=n(34784),i=n(40389),r=n(87602),o=n(231),l=n(663),d=n(71855),c=n(84542);const u=["override"],h=["mappings"];function p(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const g=["reduceOptions","orientation"];function m(e,t,n){let l=e.options;if(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},"singlestat"===t&&n.angular)return function(e,t){const n=t.angular,s=a.TB.getIfExists(n.valueName),l={reduceOptions:{calcs:[s?s.id:a.gz.mean]},orientation:i.wm.Horizontal},d={};n.format&&(d.unit=n.format);n.tableColumn&&(l.reduceOptions.fields=`/^${n.tableColumn}$/`);n.nullPointMode&&(d.nullValueMode=n.nullPointMode);n.nullText&&(d.noValue=n.nullText);(n.decimals||0===n.decimals)&&(d.decimals=n.decimals);if(n.thresholds&&n.colors){const e=n.thresholds.split(",").map((e=>Number(e.trim()))),t=[];for(const s of n.colors){const n=t.length-1;n>=0?t.push({value:e[n],color:s}):t.push({value:-1/0,color:s})}d.thresholds={mode:r.H.Absolute,steps:t}}const c=(0,o.Jb)(n,d.thresholds);c&&c.length&&(d.mappings=c);n.gauge&&n.gauge.show&&(d.min=n.gauge.minValue,d.max=n.gauge.maxValue);return e.fieldConfig.defaults=d,l}(e,n);for(const e of g)n.hasOwnProperty(e)&&(l[e]=(0,s.cloneDeep)(n[e]));return l}function f(e){if(!e.options)return{};const t=parseFloat(e.pluginVersion||"6.1");let n=e.options;t<6.2&&(n=function(e){const{valueOptions:t}=e;if(!t)return e;const n={},i={};if(n.mappings=e.valueMappings,n.thresholds=e.thresholds,n.defaults=i,i.unit=t.unit,i.decimals=t.decimals,t.stat){const e=a.TB.get(t.stat);e&&(n.calcs=[e.id])}i.min=e.minValue,i.max=e.maxValue;const r=Object.assign({},e,{fieldOptions:n});return(0,s.omit)(r,"valueMappings","thresholds","valueOptions","minValue","maxValue")}(n)),t<6.3&&(n=function(e){const{fieldOptions:t}=e;if(!t)return e;const n=e.fieldOptions,{mappings:s}=n,a=p(n,h);let i;e.thresholds&&(i={mode:r.H.Absolute,steps:v(e.thresholds)});return Object.assign({},e,{fieldOptions:Object.assign({},a,{defaults:Object.assign({},t.defaults,{mappings:s,thresholds:i})})})}(n));const{fieldOptions:i}=n;if(t<6.6&&i){var o;if(i&&i.override){const e=p(n.fieldOptions,u);n=Object.assign({},n,{fieldOptions:Object.assign({},e,{overrides:[]})})}let e=null==i||null===(o=i.defaults)||void 0===o?void 0:o.thresholds;e?delete i.defaults.thresholds:(e=null==i?void 0:i.thresholds,delete i.thresholds),e&&(i.defaults.thresholds={mode:r.H.Absolute,steps:e});const{defaults:t}=i;t.color&&"string"==typeof t.color&&(t.color={mode:l.S.Fixed,fixedColor:t.color}),(0,d.gb)(t)}if(t<7&&(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},e.fieldConfig={defaults:i&&i.defaults?Object.assign({},e.fieldConfig.defaults,i.defaults):e.fieldConfig.defaults,overrides:i&&i.overrides?[...e.fieldConfig.overrides,...i.overrides]:e.fieldConfig.overrides},i&&(n.reduceOptions={values:i.values,limit:i.limit,calcs:i.calcs}),delete n.fieldOptions),t<7.1){const t=e.fieldConfig.defaults.title;null!=t&&(e.fieldConfig.defaults.displayName=t,delete e.fieldConfig.defaults.title)}if(t<8){var c;const t=null===(c=e.fieldConfig)||void 0===c?void 0:c.defaults;let n=null==t?void 0:t.unit;"percent"===n?((0,s.isNumber)(t.min)||(t.min=0),(0,s.isNumber)(t.max)||(t.max=100)):"percentunit"===n&&((0,s.isNumber)(t.min)||(t.min=0),(0,s.isNumber)(t.max)||(t.max=1))}return n}function v(e){if(!e||!e.length)return;const t=e.map((e=>({value:null===e.value?-1/0:e.value,color:e.color})));return(0,c.bP)(t),t[0].value=-1/0,t}function b(e){return(0,o.Jb)(e)}},40773:(e,t,n)=>{"use strict";n.d(t,{U:()=>g});var s=n(52423),a=n(78966),i=n(27619),r=n(68404),o=n(16755),l=n(17655),d=n(45916);const c=["value","children","visible","placement","tipFormatter"];const u=e=>({tooltip:(0,s.css)({position:"absolute",display:"block",visibility:"visible",fontSize:e.typography.bodySmall.fontSize,opacity:.9,padding:3})}),h=e=>{const{value:t,children:n,visible:s,placement:a,tipFormatter:i}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c),p=(0,r.useRef)(),g=(0,r.useRef)(null),m=(0,o.wW)(u);function f(){null!==g.current&&cancelAnimationFrame(g.current)}return(0,r.useEffect)((()=>(s?g.current=requestAnimationFrame((()=>{var e,t;null===(e=p.current)||void 0===e||null===(t=e.forcePopupAlign)||void 0===t||t.call(e)})):f(),f)),[t,s]),(0,d.jsx)(l.Z,Object.assign({overlayClassName:m.tooltip,placement:a,overlay:null!=i?i:t,overlayInnerStyle:{minHeight:"auto"},ref:p,visible:s},h,{children:n}))};var p=n(90754);const g=e=>{let{min:t,max:n,onChange:l,onAfterChange:c,orientation:u="horizontal",reverse:g,step:m,formatTooltipResult:f,value:v,tooltipAlwaysVisible:b=!0}=e;const x=(0,r.useCallback)((e=>{null==l||l("number"==typeof e?[e,e]:e)}),[l]),y=(0,r.useCallback)((e=>{null==c||c("number"==typeof e?[e,e]:e)}),[c]),w="horizontal"===u,j=(0,o.l4)(),S=(0,p.W)(j,w);return(0,d.jsxs)("div",{className:(0,s.cx)(S.container,S.slider),children:[(0,d.jsx)(a.Global,{styles:S.tooltip}),(0,d.jsx)(i.Z,{min:t,max:n,step:m,defaultValue:v,range:!0,onChange:x,onAfterChange:y,vertical:!w,reverse:g,tabIndex:[0,1],handleRender:(e,t)=>(0,d.jsx)(h,{value:t.value,visible:b||t.dragging,tipFormatter:f,placement:w?"top":"right",children:e})})]})};g.displayName="RangeSlider"},82219:(e,t,n)=>{"use strict";n.d(t,{i:()=>u});var s=n(52423),a=n(78966),i=n(27619),r=n(68404),o=n(16755),l=n(4645),d=n(90754),c=n(45916);const u=e=>{let{min:t,max:n,onChange:u,onAfterChange:h,orientation:p="horizontal",reverse:g,step:m,value:f,ariaLabelForHandle:v,marks:b,included:x}=e;const y="horizontal"===p,w=(0,o.l4)(),j=(0,d.W)(w,y,Boolean(b)),S=i.Z,[C,k]=(0,r.useState)(null!=f?f:t),N=(0,r.useCallback)((e=>{const t="number"==typeof e?e:e[0];k(t),null==u||u(t)}),[k,u]),O=(0,r.useCallback)((e=>{let t=+e.target.value;Number.isNaN(t)&&(t=0),k(t),u&&u(t),h&&h(t)}),[u,h]),I=(0,r.useCallback)((e=>{const s=+e.target.value;s>n?k(n):s<t&&k(t)}),[n,t]),T=(0,r.useCallback)((e=>{const t="number"==typeof e?e:e[0];null==h||h(t)}),[h]),$=y?[]:[j.sliderInputVertical],R=y?[]:[j.sliderInputFieldVertical];return(0,c.jsxs)("div",{className:(0,s.cx)(j.container,j.slider),children:[(0,c.jsx)(a.Global,{styles:j.tooltip}),(0,c.jsxs)("div",{className:(0,s.cx)(j.sliderInput,...$),children:[(0,c.jsx)(S,{min:t,max:n,step:m,defaultValue:f,value:C,onChange:N,onAfterChange:T,vertical:!y,reverse:g,ariaLabelForHandle:v,marks:b,included:x}),(0,c.jsx)(l.I,{type:"text",className:(0,s.cx)(j.sliderInputField,...R),value:C,onChange:O,onBlur:I,min:t,max:n})]})]})};u.displayName="Slider"},90754:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var s=n(52423),a=n(78966);const i=(0,n(50191).B)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{spacing:i}=e,r=e.colors.border.strong,o=e.colors.primary.main,l=e.colors.primary.main,d=e.colors.primary.transparent,c=`box-shadow: 0px 0px 0px 6px ${d}`;return{container:s.css`
      width: 100%;
      margin: ${t?"inherit":`${i(1,3,1,1)}`};
      padding-bottom: ${t&&n?e.spacing(1):"inherit"};
      height: ${t?"auto":"100%"};
    `,slider:s.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${e.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${e.colors.text.disabled};
        font-size: ${e.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${e.colors.text.primary};
      }
      .rc-slider-vertical .rc-slider-handle {
        margin-top: -10px;
      }
      .rc-slider-handle {
        border: none;
        background-color: ${l};
        box-shadow: ${e.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${c};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${e.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${e.colors.text.primary};
        border-color: ${e.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${o};
      }
      .rc-slider-rail {
        background-color: ${r};
        cursor: pointer;
      }
    `,tooltip:a.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${e.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${e.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:s.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:s.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:s.css`
      margin-left: ${e.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:s.css`
      margin: 0 0 ${e.spacing(3)} 0;
      order: 1;
    `}}))},58002:(e,t,n)=>{"use strict";n.d(t,{b:()=>v});var s=n(82897),a=n(68404),i=n(3448),r=n(27843),o=n(31319),l=n(27864),d=n(13131),c=n(27565),u=n(39571),h=n(16618),p=n(36577);function g(e,t){var n;const s=e.y.values.length,a=Object.assign({},e.y.config,t);return(0,p.w)({frame:{refId:"sparkline",fields:[null!==(n=e.x)&&void 0!==n?n:h.r.newField(s),Object.assign({},e.y,{config:a})],length:s}})}var m=n(45916);const f={drawStyle:l.l8.Line,showPoints:l.Jp.Auto,axisPlacement:l.LB.Hidden};class v extends a.PureComponent{constructor(e){super(e);const t=g(e.sparkline,e.config);this.state={data:(0,u.Bj)(t,(0,u.i7)(t)),alignedDataFrame:t,configBuilder:this.prepareConfig(t)}}static getDerivedStateFromProps(e,t){const n=g(e.sparkline,e.config);return n?Object.assign({},t,{data:(0,u.Bj)(n,(0,u.i7)(n)),alignedDataFrame:n}):Object.assign({},t)}componentDidUpdate(e,t){const{alignedDataFrame:n}=this.state;if(!n)return;let a=!1;a=e.sparkline!==this.props.sparkline?!(0,i.Ch)(this.state.alignedDataFrame,t.alignedDataFrame):!(0,s.isEqual)(e.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var t,n,s;let{min:a,max:i}=null===(t=this.state.alignedDataFrame.fields[1].state)||void 0===t?void 0:t.range;return a===i?(0===a?i=100:(a=0,i*=2),[a,i]):[Math.max(a,null!==(n=e.config.min)&&void 0!==n?n:-1/0),Math.min(i,null!==(s=e.config.max)&&void 0!==s?s:1/0)]}prepareConfig(e){const{theme:t}=this.props,n=new c.U;n.setCursor({show:!1,x:!1,y:!1});const s=e.fields[0];n.addScale({scaleKey:"x",orientation:l.wN.Horizontal,direction:l.bQ.Right,isTime:!1,range:()=>{const{sparkline:e}=this.props;if(e.x){if(e.timeRange&&e.x.type===r.fS.time)return[e.timeRange.from.valueOf(),e.timeRange.to.valueOf()];const t=e.x.values;return[t.get(0),t.get(t.length-1)]}return[0,e.y.values.length-1]}}),n.addAxis({scaleKey:"x",theme:t,placement:l.LB.Hidden});for(let d=0;d<e.fields.length;d++){var a,i;const c=e.fields[d],u=c.config,h=Object.assign({},f,u.custom);if(c===s||c.type!==r.fS.number)continue;const p=u.unit||"__fixed";n.addScale({scaleKey:p,orientation:l.wN.Vertical,direction:l.bQ.Up,range:()=>this.getYRange(c)}),n.addAxis({scaleKey:p,theme:t,placement:l.LB.Hidden});const g=(0,o.fD)(c).getCalculator(c,t)(0,0),m=h.drawStyle===l.l8.Points?l.Jp.Always:h.showPoints;n.addSeries({pxAlign:!1,scaleKey:p,theme:t,drawStyle:h.drawStyle,lineColor:null!==(a=h.lineColor)&&void 0!==a?a:g,lineWidth:h.lineWidth,lineInterpolation:h.lineInterpolation,showPoints:m,pointSize:h.pointSize,fillOpacity:h.fillOpacity,fillColor:null!==(i=h.fillColor)&&void 0!==i?i:g})}return n}render(){const{data:e,configBuilder:t}=this.state,{width:n,height:s,sparkline:a}=this.props;return(0,m.jsx)(d.N,{data:e,config:t,width:n,height:s,timeRange:a.timeRange})}}},81691:(e,t,n)=>{"use strict";n.d(t,{$:()=>l});var s=n(52423),a=(n(68404),n(50191)),i=n(99500),r=n(45916);const o=(0,a.B)(((e,t)=>({wrapper:s.css`
      font-size: ${e}px;
      ${t?s.css`
            display: inline-block;
          `:""}
    `}))),l=e=>{const{className:t,inline:n=!1,iconClassName:a,style:l,size:d=16}=e,c=o(d,n);return(0,r.jsx)("div",{"data-testid":"Spinner",style:l,className:(0,s.cx)(c.wrapper,t),children:(0,r.jsx)(i.J,{className:(0,s.cx)("fa-spin",a),name:"fa fa-spinner"})})}},4116:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});var s=n(82897),a=n(68404),i=n(34784),r=n(70917),o=n(45916);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends a.PureComponent{constructor(){super(...arguments),l(this,"checkInput",(()=>{const{stats:e,allowMultiple:t,defaultStat:n,onChange:a}=this.props,r=i.TB.list(e);if(r.length!==e.length){const t=r.map((e=>e.id)),n=(0,s.difference)(e,t);console.warn("Unknown stats",n,e),a(r.map((e=>e.id)))}!t&&e.length>1&&(console.warn("Removing extra stat",e),a([e[0]])),n&&e.length<1&&a([n])})),l(this,"onSelectionChange",(e=>{const{onChange:t}=this.props;Array.isArray(e)?t(e.map((e=>e.value))):t(e&&e.value?[e.value]:[])}))}componentDidMount(){this.checkInput()}componentDidUpdate(e){this.checkInput()}render(){const{stats:e,allowMultiple:t,defaultStat:n,placeholder:s,className:a,menuPlacement:l,width:d,inputId:c}=this.props,u=i.TB.selectOptions(e);return(0,o.jsx)(r.Ph,{value:u.current,className:a,isClearable:!n,isMulti:t,width:d,isSearchable:!0,options:u.options,placeholder:s,onChange:this.onSelectionChange,menuPlacement:l,inputId:c})}}l(d,"defaultProps",{allowMultiple:!1})},70800:(e,t,n)=>{"use strict";n.d(t,{r:()=>g,x:()=>m});var s=n(52423),a=n(82897),i=n(68404),r=n(61069),o=n(16755),l=n(50191),d=n(58906),c=n(45916);const u=["value","checked","disabled","onChange","id","label"],h=["transparent","className","showLabel","label","value","id"];function p(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const g=i.forwardRef(((e,t)=>{let{value:n,checked:l,disabled:d,onChange:h,id:g,label:m}=e,v=p(e,u);l&&(0,r.d)("Switch","checked prop","value");const b=(0,o.l4)(),x=f(b),y=(0,i.useRef)(g||(0,a.uniqueId)("switch-"));return(0,c.jsxs)("div",{className:(0,s.cx)(x.switch),children:[(0,c.jsx)("input",Object.assign({type:"checkbox",disabled:d,checked:n,onChange:e=>{null==h||h(e)},id:y.current},v,{ref:t})),(0,c.jsx)("label",{htmlFor:y.current,"aria-label":null!=m?m:"Toggle switch"})]})}));g.displayName="Switch";const m=i.forwardRef(((e,t)=>{let{transparent:n,className:a,showLabel:i,label:r,value:l,id:d}=e,u=p(e,h);const m=(0,o.l4)(),v=f(m,n);return(0,c.jsxs)("div",{className:(0,s.cx)(v.inlineContainer,a),children:[i&&(0,c.jsx)("label",{htmlFor:d,className:(0,s.cx)(v.inlineLabel,l&&v.inlineLabelEnabled,"inline-switch-label"),children:r}),(0,c.jsx)(g,Object.assign({},u,{id:d,label:r,ref:t,value:l}))]})}));m.displayName="Switch";const f=(0,l.B)(((e,t)=>({switch:s.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${e.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${e.colors.primary.main};
          border-color: ${e.colors.primary.main};

          &:hover {
            background: ${e.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${e.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,d.getFocusStyles)(e)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,d.getMouseFocusStyles)(e)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${e.components.input.background};
        border: 1px solid ${e.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${e.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${e.colors.text.secondary};
          box-shadow: ${e.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:s.css`
      padding: ${e.spacing(0,1)};
      height: ${e.spacing(e.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${t?"transparent":e.components.input.background};
      border: 1px solid ${t?"transparent":e.components.input.borderColor};
      border-radius: ${e.shape.borderRadius()};

      &:hover {
        border: 1px solid ${t?"transparent":e.components.input.borderHover};

        .inline-switch-label {
          color: ${e.colors.text.primary};
        }
      }
    `,inlineLabel:s.css`
      cursor: pointer;
      padding-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:s.css`
      color: ${e.colors.text.primary};
    `})))},54671:(e,t,n)=>{"use strict";n.d(t,{W:()=>g});var s=n(52423),a=n(68404),i=n(10453),r=n(87152),o=n(23734),l=n(22222),d=n(71873),c=n(50191),u=n(16755),h=n(45916);const p=(0,c.B)((e=>({container:s.css`
      height: 100%;
    `,tabContent:s.css`
      padding: ${e.spacing(2)};
      background-color: ${e.colors.background.primary};
      height: calc(100% - ${e.components.menuTabs.height}px);
    `,close:s.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${e.typography.size.lg};
    `,tabs:s.css`
      padding-top: ${e.spacing(1)};
      border-color: ${e.colors.border.weak};
      ul {
        margin-left: ${e.spacing(2)};
      }
    `})));function g(e){var t,n;const[s,c]=(0,a.useState)(e.tabs.some((t=>t.value===e.defaultTab))?e.defaultTab:null===(t=e.tabs)||void 0===t?void 0:t[0].value),{tabs:g,onClose:m,closeIconTooltip:f}=e,v=(0,u.l4)(),b=p(v);return(0,h.jsxs)("div",{className:b.container,children:[(0,h.jsxs)(i.J,{className:b.tabs,children:[g.map((e=>(0,h.jsx)(r.O,{label:e.label,active:e.value===s,onChangeTab:()=>{c(e.value)},icon:e.icon},e.value))),(0,h.jsx)(o.h,{className:b.close,onClick:m,name:"times",title:null!=f?f:"Close"})]}),(0,h.jsx)(l.$,{autoHeightMin:"100%",children:(0,h.jsx)(d.I,{className:b.tabContent,children:null===(n=g.find((e=>e.value===s)))||void 0===n?void 0:n.content})})]})}},41345:(e,t,n)=>{"use strict";n.d(t,{i:()=>Ae});var s,a=n(68404),i=n(91742),r=n(44260),o=n(75478),l=n(32934),d=n(16755),c=n(22222),u=n(1558),h=n(25004),p=n(52423),g=n(45916);const m=()=>s||(s=(0,g.jsx)("span",{children:" "}));var f=n(90517);const v=["key"];const b=e=>{const{totalColumnsWidth:t,footerGroups:n,height:s,isPaginationVisible:i}=e,r=h.wl.components.Panels.Visualization.Table,o=(0,d.wW)(f.V);return(0,g.jsx)("div",{style:{position:i?"relative":"absolute",width:t?`${t}px`:"100%",bottom:"0px"},children:n.map((e=>{const t=e.getFooterGroupProps(),{key:n}=t,i=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,v);return(0,a.createElement)("div",Object.assign({className:o.tfoot},i,{key:n,"data-testid":r.footer,style:s?{height:`${s}px`}:void 0}),e.headers.map(((e,t)=>function(e,t,n){var s;const a=e.getHeaderProps();if(!a)return null;a.style=null!==(s=a.style)&&void 0!==s?s:{},a.style.position="absolute",a.style.justifyContent=e.justifyContent,n&&(a.style.height=n);return(0,g.jsx)("div",Object.assign({className:t.headerCell},a,{children:e.render("Footer")}))}(e,o,s))))}))})};function x(e,t){return void 0===t?m:(e=>{const t=p.css`
    width: 100%;
    list-style: none;
  `,n=p.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return e.value&&!Array.isArray(e.value)?(0,g.jsx)("span",{children:e.value}):e.value&&Array.isArray(e.value)&&e.value.length>0?(0,g.jsx)("ul",{className:t,children:e.value.map(((e,t)=>{const s=Object.keys(e)[0];return(0,g.jsxs)("li",{className:n,children:[(0,g.jsxs)("span",{children:[s,":"]}),(0,g.jsx)("span",{children:e[s]})]},t)}))}):m})({value:t[e]})}var y,w=n(33886),j=n(99500),S=n(5762),C=n(55910),k=n(54761),N=n(83744),O=n(23734),I=n(8006),T=n(39106),$=n(12310),R=n(50191);const P=e=>{let{options:t,values:n,caseSensitive:s,onChange:i}=e;const r=(0,d.l4)(),l=D(r),[c,u]=(0,a.useState)(""),h=(0,a.useMemo)((()=>new RegExp(c,s?void 0:"i")),[c,s]),p=(0,a.useMemo)((()=>t.filter((e=>void 0!==e.label&&h.test(e.label)))),[t,h]),m=r.spacing.gridSize,f=(0,a.useMemo)((()=>Math.min(28*p.length,140)+m),[m,p.length]),v=(0,a.useCallback)((e=>{u(e)}),[u]),b=(0,a.useCallback)((e=>t=>{const s=t.currentTarget.checked?n.concat(e):n.filter((t=>t.value!==e.value));i(s)}),[i,n]);return(0,g.jsxs)(k.wc,{spacing:"md",children:[(0,g.jsx)(T.H,{placeholder:"Filter values",onChange:v,value:c}),!p.length&&(y||(y=(0,g.jsx)(N._,{children:"No values"}))),p.length&&(0,g.jsx)(o.t7,{height:f,itemCount:p.length,itemSize:28,width:"100%",className:l.filterList,children:e=>{let{index:t,style:s}=e;const a=p[t],{value:i,label:r}=a,o=void 0!==n.find((e=>e.value===i));return(0,g.jsx)("div",{className:l.filterListRow,style:s,title:r,children:(0,g.jsx)($.X,{value:o,label:r,onChange:b(a)})})}})]})},D=(0,R.B)((e=>({filterList:p.css`
    label: filterList;
  `,filterListRow:p.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${e.spacing(.5)};

    :hover {
      background-color: ${e.colors.action.hover};
    }
  `})));var A=n(82897),M=n(58635),L=n(27843),F=n(55343),E=n(34784),V=n(94582),z=n(43917),B=n(87602),_=n(23564),W=n(40389),U=n(63179),H=n(11549),q=n(27864);const Z={mode:B.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},G=e=>{const{field:t,innerWidth:n,tableStyles:s,cell:a,cellProps:i,row:r}=e;let o=(0,_.xD)(t,!1);o.thresholds||(o=Object.assign({},o,{thresholds:Z}));const l=t.display(a.value);let d=U.QH.Gradient;t.config.custom&&t.config.custom.displayMode===q.h2.LcdGauge?d=U.QH.Lcd:t.config.custom&&t.config.custom.displayMode===q.h2.BasicGauge&&(d=U.QH.Basic);const c=()=>(0,A.isFunction)(t.getLinks)?t.getLinks({valueRowIndex:r.index}):[],u=Boolean(c().length);return(0,g.jsxs)("div",Object.assign({},i,{className:s.cellContainer,children:[u&&(0,g.jsx)(H.V,{links:c,style:{display:"flex",width:"100%"},children:e=>(e=>{const{openMenu:a,targetClassName:i}=e;return(0,g.jsx)(U.xf,{width:n,height:s.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:W.wm.Horizontal,theme:s.theme,onClick:a,className:i,itemSpacing:1,lcdCellWidth:8,displayMode:d})})(e)}),!u&&(0,g.jsx)(U.xf,{width:n,height:s.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:W.wm.Horizontal,theme:s.theme,itemSpacing:1,lcdCellWidth:8,displayMode:d})]}))};var Q=n(35008),K=n.n(Q),J=n(56397),Y=n(57971),X=n(11818),ee=n(78941),te=n(31787);function ne(e){let{value:t,onDismiss:n,mode:s}=e,a=t;if((0,A.isString)(t))try{t=JSON.parse(t)}catch{}else a=JSON.stringify(t,null," ");let i=a;return"code"===s&&(i=JSON.stringify(t,null," ")),(0,g.jsxs)(ee.u,{onDismiss:n,isOpen:!0,title:"Inspect value",children:["code"===s?(0,g.jsx)(te.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(i&&i.length)>100,value:i,readOnly:!0}):(0,g.jsx)("pre",{children:i}),(0,g.jsx)(ee.u.ButtonRow,{children:(0,g.jsx)(X.m,{icon:"copy",getText:()=>i,children:"Copy to Clipboard"})})]})}var se=n(49256);function ae(e){var t;let{field:n,cell:s,previewMode:i,onCellFilterAdded:r}=e;const[o,l]=(0,a.useState)(!1),d="flex-end"===he(n),c=Boolean(n.config.filterable)&&void 0!==s.value,u=Boolean(null===(t=n.config.custom)||void 0===t?void 0:t.inspect),h={size:"sm",tooltipPlacement:"top"},p=(0,a.useCallback)((e=>{r&&r({key:n.name,operator:se.PT,value:s.value})}),[s,n,r]),m=(0,a.useCallback)((e=>{r&&r({key:n.name,operator:se.tE,value:s.value})}),[s,n,r]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"cellActions "+(d?"cellActionsLeft":""),children:(0,g.jsxs)(k.Lh,{spacing:"xs",children:[u&&(0,g.jsx)(O.h,Object.assign({name:"eye",tooltip:"Inspect value",onClick:()=>{l(!0)}},h)),c&&(0,g.jsx)(O.h,Object.assign({name:"search-plus",onClick:p,tooltip:"Filter for value"},h)),c&&(0,g.jsx)(O.h,Object.assign({name:"search-minus",onClick:m,tooltip:"Filter out value"},h))]})}),o&&(0,g.jsx)(ne,{mode:i,value:s.value,onDismiss:()=>{l(!1)}})]})}const ie=e=>{var t,n;const{field:s,cell:i,tableStyles:r,row:o,cellProps:l}=e,d=Boolean(null===(t=s.config.custom)||void 0===t?void 0:t.inspect),c=s.display(i.value);let u;u=a.isValidElement(i.value)?i.value:(0,F.zc)(c);const h=s.config.filterable&&void 0!==i.value||d,m=function(e,t,n){var s,a,i;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if((null===(s=t.config.custom)||void 0===s?void 0:s.displayMode)===q.h2.ColorText)return e.buildCellContainerStyle(n.color,void 0,!r);if((null===(a=t.config.custom)||void 0===a?void 0:a.displayMode)===q.h2.ColorBackgroundSolid){const t=K()(n.color),s=(0,Y.bM)(n.color,e.theme.isDark);return e.buildCellContainerStyle(s,t.toRgbString(),!r)}if((null===(i=t.config.custom)||void 0===i?void 0:i.displayMode)===q.h2.ColorBackground){const t=e.theme.isDark?1:-.7,s=K()(n.color).darken(10*t).spin(5).toRgbString(),a=(0,Y.bM)(n.color,e.theme.isDark);return e.buildCellContainerStyle(a,`linear-gradient(120deg, ${s}, ${n.color})`,!r)}return r?e.cellContainerNoOverflow:e.cellContainer}(r,s,c,d),f=Boolean(null===(n=(0,J.i)(s,o))||void 0===n?void 0:n.length);return(0,g.jsxs)("div",Object.assign({},l,{className:m,children:[!f&&(0,g.jsx)("div",{className:r.cellText,children:u}),f&&(0,g.jsx)(H.V,{links:()=>(0,J.i)(s,o)||[],children:e=>(0,g.jsx)("div",{onClick:e.openMenu,className:(0,p.cx)(r.cellLink,e.targetClassName),children:u})}),h&&(0,g.jsx)(ae,Object.assign({},e,{previewMode:"text"}))]}))};var re=n(77495),oe=n(50913);function le(e){const{cell:t,tableStyles:n,cellProps:s}=e;let a="";return t.value instanceof oe.Z?a=(new re.Z).writeGeometry(t.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):null!=t.value&&(a=`${t.value}`),(0,g.jsx)("div",Object.assign({},s,{className:n.cellContainer,children:(0,g.jsx)("div",{className:n.cellText,style:{fontFamily:"monospace"},children:a})}))}const de=e=>{var t;const{field:n,cell:s,tableStyles:a,row:i,cellProps:r}=e,o=n.display(s.value),l=Boolean(null===(t=(0,J.i)(n,i))||void 0===t?void 0:t.length);return(0,g.jsxs)("div",Object.assign({},r,{className:a.cellContainer,children:[!l&&(0,g.jsx)("img",{src:o.text,className:a.imageCell,alt:""}),l&&(0,g.jsx)(H.V,{links:()=>(0,J.i)(n,i)||[],children:e=>(0,g.jsx)("div",{onClick:e.openMenu,className:(0,p.cx)(a.imageCellLink,e.targetClassName),children:(0,g.jsx)("img",{src:o.text,className:a.imageCell,alt:""})})})]}))};function ce(e){var t,n;const{cell:s,tableStyles:a,cellProps:i,field:r,row:o}=e,l=Boolean(null===(t=r.config.custom)||void 0===t?void 0:t.inspect),d=p.css`
    cursor: pointer;
    font-family: monospace;
  `;let c=s.value,u=c;if((0,A.isString)(c))try{c=JSON.parse(c)}catch{}else u=JSON.stringify(c,null," ");const h=Boolean(null===(n=(0,J.i)(r,o))||void 0===n?void 0:n.length);return(0,g.jsxs)("div",Object.assign({},i,{className:l?a.cellContainerNoOverflow:a.cellContainer,children:[(0,g.jsxs)("div",{className:(0,p.cx)(a.cellText,d),children:[!h&&(0,g.jsx)("div",{className:a.cellText,children:u}),h&&(0,g.jsx)(H.V,{links:()=>(0,J.i)(r,o)||[],children:e=>(0,g.jsx)("div",{onClick:e.openMenu,className:e.targetClassName,children:u})})]}),l&&(0,g.jsx)(ae,Object.assign({},e,{previewMode:"code"}))]}))}const ue=e=>{let{row:t,expandedIndexes:n,setExpandedIndexes:s}=e;const a=(0,d.wW)(f.V),i=n.has(t.index);return(0,g.jsx)("div",{className:a.expanderCell,onClick:()=>{const e=new Set(n);i?e.delete(t.index):e.add(t.index),s(e)},children:(0,g.jsx)(j.J,{"aria-label":i?"Close trace":"Open trace",name:i?"angle-down":"angle-right",size:"xl"})})};function he(e){if(!e)return"flex-start";if(e.config.custom){switch(e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}}return e.type===L.fS.number?"flex-end":"flex-start"}function pe(e,t){switch(e){case q.h2.ColorText:case q.h2.ColorBackground:return ie;case q.h2.Image:return de;case q.h2.LcdGauge:case q.h2.BasicGauge:case q.h2.GradientGauge:return G;case q.h2.JSONView:return ce}return t.type===L.fS.geo?le:t.type===L.fS.other?ce:ie}function ge(e){return function(t,n,s){return 0===t.length?t:s&&e?t.filter((t=>{if(!t.values.hasOwnProperty(n))return!1;const a=me(t,e);return void 0!==s.find((e=>e.value===a))})):t}}function me(e,t){if(!t||!e)return"";const n=t.values.get(e.index),s=t.display?t.display(n):n;return t.display?(0,F.zc)(s):s}function fe(e,t){return void 0===e.label&&void 0===t.label?0:void 0===e.label&&void 0!==t.label?-1:void 0!==e.label&&void 0===t.label?1:e.label<t.label?-1:e.label>t.label?1:0}function ve(e,t,n){return String(e.values[n]).localeCompare(String(t.values[n]),void 0,{sensitivity:"base"})}function be(e,t,n){const s=xe(e.values[n]),a=xe(t.values[n]);return s===a?0:s>a?1:-1}function xe(e){return null==e||""===e||isNaN(e)?Number.NEGATIVE_INFINITY:"number"==typeof e?e:Number(e)}function ye(e,t,n){var s;const a=null!==(s=e.display)&&void 0!==s?s:(0,z.U)({field:e,theme:n}),i=t[0],r=(0,E.Kx)({field:e,reducers:t})[i];return(0,F.zc)(a(r))}const we=e=>{let{column:{preFilteredRows:t,filterValue:n,setFilter:s},onClose:i,field:r}=e;const o=(0,d.l4)(),l=(0,a.useMemo)((()=>function(e,t){if(!t||0===e.length)return{};const n={};for(let s=0;s<e.length;s++){const a=me(e[s],t);n[a||"(Blanks)"]=a}return n}(t,r)),[t,r]),c=(0,a.useMemo)((()=>{return e=l,Object.keys(e).reduce(((t,n)=>t.concat({value:e[n],label:n})),[]).sort(fe);var e}),[l]),u=(0,a.useMemo)((()=>function(e,t){return t?e.filter((e=>t.some((t=>t.value===e.value)))):[]}(c,n)),[c,n]),[h,m]=(0,a.useState)(u),[f,v]=(0,a.useState)(!1),b=(0,a.useCallback)((e=>i()),[i]),x=(0,a.useCallback)((e=>{const t=h.length?h:void 0;s(t),i()}),[s,h,i]),y=(0,a.useCallback)((e=>{s(void 0),i()}),[s,i]),w=(0,a.useMemo)((()=>void 0!==n),[n]),j=(0,d.wW)(je);return(0,g.jsx)(C.L,{onClick:b,useCapture:!0,children:(0,g.jsx)("div",{className:(0,p.cx)(j.filterContainer),onClick:Se,children:(0,g.jsxs)(k.wc,{spacing:"lg",children:[(0,g.jsxs)(k.wc,{spacing:"xs",children:[(0,g.jsxs)(k.Lh,{justify:"space-between",align:"center",children:[(0,g.jsx)(N._,{className:j.label,children:"Filter by values:"}),(0,g.jsx)(O.h,{name:"text-fields",tooltip:"Match case",style:{color:f?o.colors.text.link:o.colors.text.disabled},onClick:()=>{v((e=>!e))}})]}),(0,g.jsx)("div",{className:(0,p.cx)(j.listDivider)}),(0,g.jsx)(P,{onChange:m,values:h,options:c,caseSensitive:f})]}),(0,g.jsxs)(k.Lh,{spacing:"lg",children:[(0,g.jsxs)(k.Lh,{children:[(0,g.jsx)(I.zx,{size:"sm",onClick:x,children:"Ok"}),(0,g.jsx)(I.zx,{size:"sm",variant:"secondary",onClick:b,children:"Cancel"})]}),w&&(0,g.jsx)(k.Lh,{children:(0,g.jsx)(I.zx,{fill:"text",size:"sm",onClick:y,children:"Clear filter"})})]})]})})})},je=e=>({filterContainer:p.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};
    padding: ${e.spacing(2)};
    margin: ${e.spacing(1)} 0;
    box-shadow: 0px 0px 20px ${e.v1.palette.black};
    border-radius: ${e.spacing(.5)};
  `,listDivider:p.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${e.colors.border.medium};
    padding: ${e.spacing(.5,2)};
  `,label:p.css`
    margin-bottom: 0;
  `}),Se=e=>{e.stopPropagation()};var Ce;const ke=e=>{var t;let{column:n,field:s,tableStyles:i}=e;const r=(0,a.useRef)(null),[o,l]=(0,a.useState)(!1),c=(0,d.wW)(Ne),u=(0,a.useMemo)((()=>Boolean(n.filterValue)),[n.filterValue]),h=(0,a.useCallback)((()=>l(!0)),[l]),m=(0,a.useCallback)((()=>l(!1)),[l]);return s&&null!==(t=s.config.custom)&&void 0!==t&&t.filterable?(0,g.jsxs)("button",{className:(0,p.cx)(i.headerFilter,u?c.filterIconEnabled:c.filterIconDisabled),ref:r,type:"button",onClick:h,children:[Ce||(Ce=(0,g.jsx)(j.J,{name:"filter"})),o&&r.current&&(0,g.jsx)(S.J,{content:(0,g.jsx)(we,{column:n,tableStyles:i,field:s,onClose:m}),placement:"bottom-start",referenceElement:r.current,show:!0})]}):null},Ne=e=>({filterIconEnabled:p.css`
    label: filterIconEnabled;
    color: ${e.colors.primary.text};
  `,filterIconDisabled:p.css`
    label: filterIconDisabled;
    color: ${e.colors.text.disabled};
  `});var Oe,Ie;const Te=["key"];const $e=e=>{const{headerGroups:t,showTypeIcons:n}=e,s=h.wl.components.Panels.Visualization.Table,i=(0,d.wW)(f.V);return(0,g.jsx)("div",{role:"rowgroup",children:t.map((e=>{const t=e.getHeaderGroupProps(),{key:r}=t,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,Te);return(0,a.createElement)("div",Object.assign({className:i.thead},o,{key:r,"aria-label":s.header,role:"row"}),e.headers.map(((e,t)=>function(e,t,n){var s;const a=e.getHeaderProps(),i=null!==(s=e.field)&&void 0!==s?s:null;e.canResize&&(a.style.userSelect=e.isResizing?"none":"auto");return a.style.position="absolute",a.style.justifyContent=e.justifyContent,(0,g.jsxs)("div",Object.assign({className:t.headerCell},a,{role:"columnheader",children:[e.canSort&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("button",Object.assign({},e.getSortByToggleProps(),{className:t.headerCellLabel,children:[n&&(0,g.jsx)(j.J,{name:(0,w.e7)(i),title:null==i?void 0:i.type,size:"sm",className:t.typeIcon}),(0,g.jsx)("div",{children:e.render("Header")}),(0,g.jsx)("div",{children:e.isSorted&&(e.isSortedDesc?Oe||(Oe=(0,g.jsx)(j.J,{name:"arrow-down"})):Ie||(Ie=(0,g.jsx)(j.J,{name:"arrow-up"})))})]})),e.canFilter&&(0,g.jsx)(ke,{column:e,tableStyles:t,field:i})]}),!e.canSort&&e.render("Header"),!e.canSort&&e.canFilter&&(0,g.jsx)(ke,{column:e,tableStyles:t,field:i}),e.canResize&&(0,g.jsx)("div",Object.assign({},e.getResizerProps(),{className:t.resizeHandle}))]}))}(e,i,n))))}))})};var Re=n(3520);const Pe=150;function De(e,t){const n={};if(e){n.sortBy=[];for(const s of e)for(const e of t)e.Header===s.displayName&&n.sortBy.push({id:e.id,desc:s.desc})}return n}const Ae=(0,a.memo)((e=>{const{ariaLabel:t,data:n,subData:s,height:h,onCellFilterAdded:p,width:m,columnMinWidth:v=Pe,noHeader:y,resizable:w=!0,initialSortBy:j,footerOptions:S,showTypeIcons:C,footerValues:k,enablePagination:N}=e,O=(0,a.useRef)(null),I=(0,a.useRef)(null),T=(0,a.useRef)(null),$=(0,d.wW)(f.V),R=(0,d.l4)(),P=y?0:$.cellHeight,[D,F]=(0,a.useState)(k),[z,B]=(0,a.useState)(new Set),_=(0,r.Z)(z),W=(0,a.useMemo)((()=>{let e=0;if(!D)return 0;for(const t of D)Array.isArray(t)&&t.length>e&&(e=t.length);return e>1?33*e:33}),[D]),U=(0,a.useMemo)((()=>n.fields.length?Array(n.length).fill(0):[]),[n]),H=(0,a.useMemo)((()=>function(e,t,n,s,a,i,r){const o=i?[{Header:()=>null,id:"expander",Cell:e=>{let{row:t}=e;return(0,g.jsx)(ue,{row:t,expandedIndexes:s,setExpandedIndexes:a})},width:50,minWidth:50,filter:(e,t,n)=>[],justifyContent:"left",field:e.fields[0],sortType:"basic"}]:[];let d=0;i&&(t-=50);for(const[s,a]of e.fields.entries()){var c;const i=a.config.custom||{};if(i.hidden)continue;i.width?t-=i.width:d++;const u=e=>{switch(e){case L.fS.number:return"number";case L.fS.time:return"basic";default:return"alphanumeric-insensitive"}},h=pe(i.displayMode,a);o.push({Cell:h,id:s.toString(),field:a,Header:(0,l.C)(a,e),accessor:(e,t)=>a.values.get(t),sortType:u(a.type),width:i.width,minWidth:null!==(c=i.minWidth)&&void 0!==c?c:n,filter:(0,M.Z)(ge(a)),justifyContent:he(a),Footer:x(s,r)})}let u=t/d;for(let e=d;e>0;e--)for(const e of o)!e.width&&e.minWidth>u&&(e.width=e.minWidth,d-=1,u=(t-=e.width)/d);for(const e of o)e.width||(e.width=u),e.minWidth=50;return o}(n,m,v,z,B,!(null==s||!s.length),D)),[n,m,v,D,s,z]),q=function(e){let{onColumnResize:t,onSortByChange:n,data:s}=e;return(0,a.useCallback)(((e,a)=>{switch(a.type){case"columnDoneResizing":if(t){const n=e.columnResizing.headerIdWidths[0][0],a=parseInt(n,10),i=Math.round(e.columnResizing.columnWidths[n]),r=s.fields[a];if(!r)return e;const o=(0,l.C)(r,s);t(o,i)}case"toggleSortBy":if(n){const t=[];for(const n of e.sortBy){const e=s.fields[parseInt(n.id,10)];e&&t.push({displayName:(0,l.C)(e,s),desc:n.desc})}n(t)}}return e}),[s,t,n])}(e),Z=(0,a.useMemo)((()=>({columns:H,data:U,disableResizing:!w,stateReducer:q,initialState:De(j,H),autoResetFilters:!1,sortTypes:{number:be,"alphanumeric-insensitive":ve}})),[j,H,U,w,q]),{getTableProps:G,headerGroups:Q,rows:K,prepareRow:J,totalColumnsWidth:Y,footerGroups:X,page:ee,state:te,gotoPage:ne,setPageSize:se,pageOptions:ae}=(0,i.useTable)(Z,i.useFilters,i.useSortBy,i.usePagination,i.useAbsoluteLayout,i.useResizeColumns);(0,a.useEffect)((()=>{S||F(k)}),[k,S]),(0,a.useEffect)((()=>{S&&(S.show?F(function(e,t,n,s){return e.map(((e,a)=>{if(e.field.type!==L.fS.number)return 0===a&&n.reducer&&n.reducer.length>0?E.TB.get(n.reducer[0]).name:void 0;let i=(0,A.clone)(e.field);return i.values=new V.G(t[a]),i.state=void 0,e.field=i,n.fields&&n.fields.length>0?n.fields.find((t=>t===e.field.name))?ye(e.field,n.reducer,s):void 0:ye(e.field,n.reducer||[],s)}))}(Q[0].headers,function(e){const t=[];for(const n in e)for(const[s,a]of Object.entries(e[n].values))void 0===t[s]&&(t[s]=[]),t[s].push(a);return t}(K),S,R)):F(void 0))}),[S,R,te.filters,n]);let ie=h-(P+W);N&&(ie-=$.cellHeight);const re=Math.round(ie/$.cellHeight)-1;(0,a.useEffect)((()=>{re<=0||se(re)}),[re,se]),(0,a.useEffect)((()=>{var e;null===(e=O.current)||void 0===e||e.resetAfterIndex(Math.min(...Array.from(z),..._?Array.from(_):[]))}),[z,_]),(0,a.useEffect)((()=>{var e,t;const n=null===(e=T.current)||void 0===e?void 0:e.querySelector(".track-vertical"),s=null===(t=I.current)||void 0===t?void 0:t.firstChild;var a;s&&n&&(null==n||n.remove(),null===(a=s.querySelector(":scope > .track-vertical"))||void 0===a||a.remove(),s.append(n))})),(0,a.useEffect)((()=>{B(new Set)}),[n,s]);const oe=a.useCallback((e=>{if(z.has(e)){const a=null==s?void 0:s.find((t=>{var n,s;return(null===(n=t.meta)||void 0===n||null===(s=n.custom)||void 0===s?void 0:s.parentRowIndex)===e}));if(a){var t,n;const e=!(null===(t=a.meta)||void 0===t||null===(n=t.custom)||void 0===n||!n.noHeader),s={height:$.rowHeight*(a.length+(e?0:1)),background:R.colors.emphasize(R.colors.background.primary,.015),paddingLeft:50,position:"absolute",bottom:0};return(0,g.jsx)("div",{style:s,children:(0,g.jsx)(Ae,{data:a,width:m-50,height:$.rowHeight*(a.length+1),noHeader:e})})}}return null}),[z,s,$.rowHeight,R.colors,m]),le=a.useCallback((e=>{let{index:t,style:n}=e,s=K[t];return N&&(s=ee[t]),J(s),(0,g.jsxs)("div",Object.assign({},s.getRowProps({style:n}),{className:$.row,children:[oe(t),s.cells.map(((e,t)=>(0,g.jsx)(Re.p,{tableStyles:$,cell:e,onCellFilterAdded:p,columnIndex:t,columnCount:s.cells.length},t)))]}))}),[p,ee,N,J,K,$,oe]),de=(0,a.useCallback)((e=>{ne(e-1)}),[ne]),ce=N?ee.length:K.length;let me=null;if(N){const e=te.pageIndex*te.pageSize+1;let t=e+te.pageSize-1;const s=m<550;t>n.length&&(t=n.length),me=(0,g.jsxs)("div",{className:$.paginationWrapper,children:[s?null:(0,g.jsx)("div",{className:$.paginationItem}),(0,g.jsx)("div",{className:$.paginationCenterItem,children:(0,g.jsx)(u.t,{currentPage:te.pageIndex+1,numberOfPages:ae.length,showSmallVersion:s,onNavigate:de})}),s?null:(0,g.jsxs)("div",{className:$.paginationSummary,children:[e," - ",t," of ",n.length," rows"]})]})}return(0,g.jsxs)("div",Object.assign({},G(),{className:$.table,"aria-label":t,role:"table",ref:I,children:[(0,g.jsx)(c.$,{hideVerticalTrack:!0,children:(0,g.jsxs)("div",{className:$.tableContentWrapper(Y),children:[!y&&(0,g.jsx)($e,{headerGroups:Q,showTypeIcons:C}),ce>0?(0,g.jsx)("div",{ref:T,children:(0,g.jsx)(c.$,{onScroll:e=>{const{scrollTop:t}=e.target;null!==O.current&&O.current.scrollTo(t)},hideHorizontalTrack:!0,children:(0,g.jsx)(o.S_,{height:ie,itemCount:ce,itemSize:e=>{if(z.has(e)){const a=null==s?void 0:s.find((t=>{var n,s;return(null===(n=t.meta)||void 0===n||null===(s=n.custom)||void 0===s?void 0:s.parentRowIndex)===e}));if(a){var t,n;const e=!(null===(t=a.meta)||void 0===t||null===(n=t.custom)||void 0===n||!n.noHeader);return $.rowHeight*(a.length+1+(e?0:1))}}return $.rowHeight},width:"100%",ref:O,style:{overflow:void 0},children:le})})}):(0,g.jsx)("div",{style:{height:h-P},className:$.noData,children:"No data"}),D&&(0,g.jsx)(b,{height:W,isPaginationVisible:Boolean(N),footerValues:D,footerGroups:X,totalColumnsWidth:Y})]})}),me]}))}));Ae.displayName="Table"},3520:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});const s=e=>{var t;let{cell:n,tableStyles:s,onCellFilterAdded:a,columnIndex:i,columnCount:r,userProps:o}=e;const l=n.getCellProps(),d=n.column.field;if(null==d||!d.display)return null;l.style&&(l.style.minWidth=l.style.width,l.style.justifyContent=n.column.justifyContent);let c=(null!==(t=n.column.width)&&void 0!==t?t:24)-2*s.cellPadding;return n.render("Cell",{field:d,tableStyles:s,onCellFilterAdded:a,cellProps:l,innerWidth:c,userProps:o})}},90517:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var s=n(52423);const a=e=>{const{colors:t}=e,n=e.colors.background.secondary,a=e.colors.border.weak,i=e.colors.primary.border,r=e.typography.body.lineHeight,o=12+14*r,l=o+2,d=e.colors.emphasize(e.colors.background.primary,.03),c=(t,n,i)=>{const r={margin:e.spacing(0,-.5,0,.5)},o={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${e.colors.primary.main}`,background:null!=n?n:d,zIndex:1};return s.css`
      label: ${i?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${6}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${l-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${a};

      ${t?`color: ${t};`:""};
      ${n?`background: ${n};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${i&&o};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${i?r:{position:"absolute",top:0,right:0,margin:"auto"}}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${e.spacing(1,.5,1,.5)};
        background: ${n?"none":e.colors.emphasize(e.colors.background.primary,.03)};

        svg {
          color: ${t};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:e,cellHeight:o,buildCellContainerStyle:c,cellPadding:6,cellHeightInner:14*r,rowHeight:l,table:s.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:s.css`
      label: thead;
      height: ${o}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${n};
      position: relative;
    `,tfoot:s.css`
      label: tfoot;
      height: ${o}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${n};
      position: relative;
    `,headerCell:s.css`
      padding: ${6}px;
      overflow: hidden;
      white-space: nowrap;
      color: ${t.primary.text};
      border-right: 1px solid ${e.colors.border.weak};
      display: flex;

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:s.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
      margin-right: ${e.spacing(.5)};
    `,cellContainer:c(void 0,void 0,!0),cellContainerNoOverflow:c(void 0,void 0,!1),cellText:s.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,cellLink:s.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      text-decoration: underline;
    `,imageCellLink:s.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:s.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:s.css`
      display: flex;
      background: ${n};
      height: ${o}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      border-top: 1px solid ${e.colors.border.weak};
      li {
        margin-bottom: 0;
      }
    `,paginationItem:s.css`
      flex: 20%;
    `,paginationCenterItem:s.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:s.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${e.spacing(1)};
    `,tableContentWrapper:e=>{const t=void 0!==e?`${e}px`:"100%";return s.css`
        label: tableContentWrapper;
        width: ${t};
        display: flex;
        flex-direction: column;
      `},row:s.css`
      label: row;
      border-bottom: 1px solid ${a};

      &:hover {
        background-color: ${d};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:s.css`
      height: 100%;
    `,resizeHandle:s.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${i};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:s.css`
      margin-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
    `,noData:s.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:s.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${l}px;
      cursor: pointer;
    `}}},49256:(e,t,n)=>{"use strict";n.d(t,{PT:()=>s,tE:()=>a});const s="=",a="!="},68624:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(52423),a=(n(68404),n(55343)),i=n(50191),r=n(16755),o=n(45916);const l=(0,i.B)((e=>({counter:s.css`
      label: counter;
      margin-left: ${e.spacing(1)};
      border-radius: ${e.spacing(3)};
      background-color: ${e.colors.action.hover};
      padding: ${e.spacing(.25,1)};
      color: ${e.colors.text.secondary};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
    `}))),d=e=>{let{value:t}=e;const n=(0,r.wW)(l);return(0,o.jsx)("span",{className:n.counter,children:(0,a.SP)(t,0).text})}},87152:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var s=n(52423),a=n(68404),i=n(25004),r=n(16755),o=n(50191),l=n(58906),d=n(99500),c=n(68624),u=n(45916);const h=["label","active","icon","onChangeTab","counter","suffix","className","href"];const p=a.forwardRef(((e,t)=>{var n,a;let{label:o,active:l,icon:p,onChangeTab:m,counter:f,suffix:v,href:b}=e,x=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);const y=(0,r.l4)(),w=g(y),j=(0,s.cx)(w.link,l?w.activeStyle:w.notActive);return(0,u.jsx)("div",{className:w.item,children:(0,u.jsx)("a",Object.assign({href:b||"#",className:j},x,{onClick:m,"aria-label":x["aria-label"]||i.wl.components.Tab.title(o),role:"tab","aria-selected":l,ref:t,children:(0,u.jsxs)(u.Fragment,{children:[p&&(n||(n=(0,u.jsx)(d.J,{name:p}))),o,"number"==typeof f&&(a||(a=(0,u.jsx)(c.A,{value:f}))),v&&(0,u.jsx)(v,{className:w.suffix})]})}))})}));p.displayName="Tab";const g=(0,o.B)((e=>({item:s.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:s.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${e.spacing(1)};
      }

      &:focus-visible {
+        ${(0,l.getFocusStyles)(e)}
      }
    `,notActive:s.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${e.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${e.colors.action.hover};
        }
      }
    `,activeStyle:s.css`
      label: activeTabStyle;
      color: ${e.colors.text.primary};
      overflow: hidden;
      font-weight: ${e.typography.fontWeightMedium};

      a {
        color: ${e.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:s.css`
      margin-left: ${e.spacing(1)};
    `})))},71873:(e,t,n)=>{"use strict";n.d(t,{I:()=>d});var s=n(52423),a=(n(68404),n(50191)),i=n(16755),r=n(45916);const o=["children","className"];const l=(0,a.B)((e=>({tabContent:s.css`
      background: ${e.colors.background.primary};
    `}))),d=e=>{let{children:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const d=(0,i.l4)(),c=l(d);return(0,r.jsx)("div",Object.assign({},a,{className:(0,s.cx)(c.tabContent,n),children:t}))}},10453:(e,t,n)=>{"use strict";n.d(t,{J:()=>d});var s=n(52423),a=n(68404),i=n(50191),r=n(16755),o=n(45916);const l=(0,i.B)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tabsWrapper:!t&&s.css`
        border-bottom: 1px solid ${e.colors.border.weak};
      `,tabs:s.css`
      position: relative;
      display: flex;
      height: ${e.components.menuTabs.height}px;
    `}})),d=a.forwardRef(((e,t)=>{let{children:n,className:a,hideBorder:i}=e;const d=(0,r.l4)(),c=l(d,i);return(0,o.jsx)("div",{className:(0,s.cx)(c.tabsWrapper,a),ref:t,children:(0,o.jsx)("div",{className:c.tabs,role:"tablist",children:n})})}));d.displayName="TabsBar"},51028:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var s=n(52423),a=n(68404),i=n(16755),r=n(14106),o=n(99500),l=n(45916);const d=["name","onClick","icon","className","colorIndex"];const c=(0,a.forwardRef)(((e,t)=>{let{name:n,onClick:a,icon:r,className:c,colorIndex:h}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const g=(0,i.l4)(),m=u(g,n,h),f=(0,s.cx)(m.wrapper,c,{[m.hover]:void 0!==a});return a?(0,l.jsxs)("button",Object.assign({},p,{className:f,onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a(n,e)},ref:t,children:[r&&(0,l.jsx)(o.J,{name:r}),n]})):(0,l.jsxs)("span",Object.assign({},p,{className:f,ref:t,children:[r&&(0,l.jsx)(o.J,{name:r}),n]}))}));c.displayName="Tag";const u=(e,t,n)=>{let a;return a=void 0===n?(0,r.Bx)(t):(0,r.vm)(n),{wrapper:s.css`
      appearance: none;
      border-style: none;
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
      line-height: ${e.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${a.color};
      color: ${e.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${e.shape.borderRadius(2)};
    `,hover:s.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},76961:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var s=n(52423),a=n(68404),i=n(16755),r=n(51028),o=n(45916);const l=(0,a.memo)((0,a.forwardRef)(((e,t)=>{let{displayMax:n,tags:a,icon:l,onClick:c,className:u,getAriaLabel:h}=e;const p=(0,i.l4)(),g=d(p,Boolean(n&&n>0)),m=a.length,f=n?a.slice(0,n):a;return(0,o.jsxs)("ul",{className:(0,s.cx)(g.wrapper,u),"aria-label":"Tags",ref:t,children:[f.map(((e,t)=>(0,o.jsx)("li",{className:g.li,children:(0,o.jsx)(r.V,{name:e,icon:l,onClick:c,"aria-label":null==h?void 0:h(e,t),"data-tag-id":t})},e))),n&&n>0&&m-n>0&&(0,o.jsxs)("span",{className:g.moreTagsLabel,children:["+ ",m-n]})]})})));l.displayName="TagList";const d=(e,t)=>({wrapper:s.css`
      position: relative;
      align-items: ${t?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${t?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:s.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
    `,li:(0,s.css)({listStyle:"none"})})},89716:(e,t,n)=>{"use strict";n.d(t,{B:()=>p});var s=n(52423),a=n(68404),i=n(16755),r=n(8006),o=n(4645),l=n(14106),d=n(23734),c=n(45916);const u=e=>{let{name:t,disabled:n,onRemove:s}=e;const{color:r,borderColor:o}=(0,a.useMemo)((()=>(0,l.Bx)(t)),[t]),u=(0,i.wW)(h);return(0,c.jsxs)("li",{className:u.itemStyle,style:{backgroundColor:r,borderColor:o},children:[(0,c.jsx)("span",{className:u.nameStyle,children:t}),(0,c.jsx)(d.h,{name:"times",size:"lg",disabled:n,ariaLabel:`Remove "${t}" tag`,onClick:()=>s(t),type:"button",className:u.buttonStyles})]})},h=e=>{const t=3*e.spacing.gridSize;return{itemStyle:(0,s.css)({display:"flex",gap:"3px",alignItems:"center",height:`${t}px`,lineHeight:t-2+"px",color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",padding:`0 ${e.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:e.typography.size.sm}),nameStyle:(0,s.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,s.css)({margin:0,"&:hover::before":{display:"none"}})}},p=e=>{let{placeholder:t="New tag (enter key to add)",tags:n=[],onChange:l,width:d,className:h,disabled:p,addOnBlur:m,invalid:f,id:v}=e;const[b,x]=(0,a.useState)(""),y=(0,i.wW)(g),w=(0,i.l4)(),j=(0,a.useCallback)((e=>{x(e.target.value)}),[]),S=e=>{l(n.filter((t=>t!==e)))},C=e=>{null==e||e.preventDefault(),n.includes(b)||l(n.concat(b)),x("")};return(0,c.jsxs)("div",{className:(0,s.cx)(y.wrapper,h,d?(0,s.css)({width:w.spacing(d)}):""),children:[(0,c.jsx)(o.I,{id:v,disabled:p,placeholder:t,onChange:j,value:b,onKeyDown:e=>{"Enter"===e.key&&""!==b&&C(e)},onBlur:()=>{m&&b&&C()},invalid:f,suffix:(0,c.jsx)(r.zx,{fill:"text",className:y.addButtonStyle,onClick:C,size:"md",disabled:b.length<=0,children:"Add"})}),(null==n?void 0:n.length)>0&&(0,c.jsx)("ul",{className:y.tags,children:n.map((e=>(0,c.jsx)(u,{name:e,onRemove:S,disabled:p},e)))})]})},g=e=>({wrapper:s.css`
    min-height: ${e.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${e.spacing(1)};
    flex-wrap: wrap;
  `,tags:s.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${e.spacing(.5)};
  `,addButtonStyle:s.css`
    margin: 0 -${e.spacing(1)};
  `})},93194:(e,t,n)=>{"use strict";n.d(t,{K:()=>c});var s=n(52423),a=n(68404),i=n(16755),r=n(50191),o=n(50578),l=n(45916);const d=["invalid","className"];const c=a.forwardRef(((e,t)=>{let{invalid:n,className:a}=e,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const o=(0,i.l4)(),c=u(o,n);return(0,l.jsx)("textarea",Object.assign({},r,{className:(0,s.cx)(c.textarea,a),ref:t}))})),u=(0,r.B)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{textarea:(0,s.cx)((0,o.RK)(e),(0,o.GL)(e),s.css`
        border-radius: ${e.shape.borderRadius()};
        padding: ${e.spacing.gridSize/4}px ${e.spacing.gridSize}px;
        width: 100%;
        border-color: ${t?e.colors.error.border:e.components.input.borderColor};
      `)}}));c.displayName="TextArea"},32134:(e,t,n)=>{"use strict";n.d(t,{p:()=>P});var s=n(68404),a=n(16755),i=n(22),r=n(27783),o=n(43501),l=n(82897),d=n(49959),c=n(27843),u=n(43917),h=n(31319),p=n(663),g=n(55343),m=n(32934),f=n(60053),v=n(92721),b=n(27864),x=n(78846),y=n(27565),w=n(44151),j=n(39571);const S=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),C=Array(53);for(let e=0;e<C.length;e++)C[e]=2**e;const k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null==e?"-":e.toFixed(t)},N={drawStyle:b.l8.Line,showPoints:b.Jp.Auto,axisPlacement:b.LB.Auto};function O(e,t){const n=new Map;return e.fields.forEach(((e,s)=>{var a;const i=null===(a=e.state)||void 0===a?void 0:a.origin;if(i){var r;const e=null===(r=t[i.frameIndex])||void 0===r?void 0:r.fields[i.fieldIndex];e&&n.set((0,m.C)(e,t[i.frameIndex],t),s)}})),n}var I=n(45916);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $=["legend","options"];class R extends s.Component{constructor(){super(...arguments),T(this,"panelContext",{}),T(this,"prepConfig",((e,t,n)=>{const{eventBus:s,sync:a}=this.context,{theme:i,timeZone:r,renderers:o,tweakAxis:I,tweakScale:T}=this.props;return(e=>{var t,n,s;let{frame:a,theme:i,timeZones:r,getTimeRange:o,eventBus:I,sync:T,allFrames:$,renderers:R,tweakScale:P=(e=>e),tweakAxis:D=(e=>e)}=e;const A=new y.U(r[0]);let M;A.setPrepData((e=>(M=e[0],(0,j.Bj)(e[0],A.getStackingGroups()))));const L=a.fields[0];if(!L)return A;let F=0;const E="x";let V="_x",z="";const B=(null===(t=L.config.custom)||void 0===t?void 0:t.axisPlacement)!==b.LB.Hidden?b.LB.Bottom:b.LB.Hidden,_=(null===(n=L.config.custom)||void 0===n?void 0:n.axisPlacement)!==b.LB.Hidden;if(L.type===c.fS.time){V="time",A.addScale({scaleKey:E,orientation:b.wN.Horizontal,direction:b.bQ.Right,isTime:!0,range:()=>{const e=o();return[e.from.valueOf(),e.to.valueOf()]}});const e=r.length>1?(e,t)=>t.map(((e,t)=>t<2?null:e)):void 0;for(let t=0;t<r.length;t++){var W,U;const n=r[t];A.addAxis({scaleKey:E,isTime:!0,placement:B,show:_,label:null===(W=L.config.custom)||void 0===W?void 0:W.axisLabel,timeZone:n,theme:i,grid:{show:0===t&&(null===(U=L.config.custom)||void 0===U?void 0:U.axisGridShow)},filter:e})}r.length>1&&A.addHook("drawAxes",(e=>{e.ctx.save(),e.ctx.fillStyle=i.colors.text.primary,e.ctx.textAlign="left",e.ctx.textBaseline="bottom";let t=0;e.axes.forEach((n=>{if(2===n.side){let s=n._pos+n._size;e.ctx.fillText(r[t],e.bbox.left,s*d.Z.pxRatio),t++}})),e.ctx.restore()}))}else{var H,q;L.config.unit&&(V=L.config.unit),A.addScale({scaleKey:E,orientation:b.wN.Horizontal,direction:b.bQ.Right}),A.addAxis({scaleKey:E,placement:B,show:_,label:null===(H=L.config.custom)||void 0===H?void 0:H.axisLabel,theme:i,grid:{show:null===(q=L.config.custom)||void 0===q?void 0:q.axisGridShow}})}let Z,G=null!==(s=null==R?void 0:R.flatMap((e=>Object.values(e.fieldMap).filter((t=>-1===e.indicesOnly.indexOf(t))))))&&void 0!==s?s:[];for(let e=1;e<a.fields.length;e++){var Q,K,J,Y,X,ee,te,ne,se,ae,ie;const t=a.fields[e],n=Object.assign({},t.config,{custom:Object.assign({},N,t.config.custom)}),s=n.custom;if(t===L||t.type!==c.fS.number)continue;t.state.seriesIndex=F++;let r=null!==(Q=t.display)&&void 0!==Q?Q:k;(null===(K=t.config.custom)||void 0===K||null===(J=K.stacking)||void 0===J?void 0:J.mode)===b.o0.Percent&&(r=(0,u.U)({field:Object.assign({},t,{config:Object.assign({},t.config,{unit:"percentunit"})}),theme:i}));const f=(0,x.z)(n),v=(0,h.fD)(t),y=(0,h.YO)(t,i).color;if(A.addScale(P({scaleKey:f,orientation:b.wN.Vertical,direction:b.bQ.Up,distribution:null===(Y=s.scaleDistribution)||void 0===Y?void 0:Y.type,log:null===(X=s.scaleDistribution)||void 0===X?void 0:X.log,linearThreshold:null===(ee=s.scaleDistribution)||void 0===ee?void 0:ee.linearThreshold,min:t.config.min,max:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax,centeredZero:s.axisCenteredZero,range:(null===(te=s.stacking)||void 0===te?void 0:te.mode)===b.o0.Percent?(e,t,n)=>[t=t<0?-1:0,n=n>0?1:0]:void 0,decimals:t.config.decimals},t)),z||(z=f),s.axisPlacement!==b.LB.Hidden){var re,oe;let e;var le;s.axisColorMode===b.yK.Series&&(e=v.isByValue&&(null===(le=t.config.custom)||void 0===le?void 0:le.gradientMode)===b.FI.Scheme&&v.id===p.S.Thresholds?(0,w.P2)(1,i,v,t.config.thresholds):y);let a,o={};e&&(o={border:{show:!0,width:1,stroke:e},ticks:{stroke:e},color:s.axisColorMode===b.yK.Series?e:void 0}),S.has(n.unit)&&(a=C),A.addAxis(D(Object.assign({scaleKey:f,label:s.axisLabel,size:s.axisWidth,placement:null!==(re=s.axisPlacement)&&void 0!==re?re:b.LB.Auto,formatValue:(e,t)=>(0,g.zc)(r(e,t)),theme:i,grid:{show:s.axisGridShow},decimals:t.config.decimals,distr:null===(oe=s.scaleDistribution)||void 0===oe?void 0:oe.type,incrs:a},o),t))}const j=s.drawStyle===b.l8.Points?b.Jp.Always:s.showPoints;let I=()=>null;!0!==s.spanNulls&&(I=(e,t,n,s)=>{let a=[],i=e.series[t];if(!n&&s&&s.length){const[n,r]=i.idxs,o=e.data[0],l=e.data[t],d=Math.round(e.valToPos(o[n],"x",!0)),c=Math.round(e.valToPos(o[r],"x",!0));s[0][0]===d&&a.push(n);for(let t=0;t<s.length;t++){let n=s[t],i=s[t+1];if(i&&n[1]===i[0]){let t=e.posToIdx(n[1],!0);if(null==l[t])for(let e=1;e<100;e++){if(null!=l[t+e]){t+=e;break}if(null!=l[t-e]){t-=e;break}}a.push(t)}}s[s.length-1][1]===c&&a.push(r)}return a.length?a:null});let T,{fillOpacity:R}=s,E=null,V=null;if(null!==(ne=t.state)&&void 0!==ne&&ne.origin){Z||(Z=O(a,$));const e=$[t.state.origin.frameIndex],n=null==e?void 0:e.fields[t.state.origin.fieldIndex],i=(0,m.C)(null!=n?n:t,e,$);if(G.indexOf(i)>=0)E=()=>null,V=()=>{};else if(s.transform===b.pR.Constant){const e=d.Z.paths.linear();E=(t,n)=>{const s=t._data,a=o();let i=[a.from.valueOf(),a.to.valueOf()],r=s[n].find((e=>null!=e)),l=[r,r],d=s.slice();return d[0]=i,d[n]=l,e(Object.assign({},t,{_data:d}),n,0,1)}}if(s.fillBelowTo){const e=a.fields.find((e=>{var t;return s.fillBelowTo===e.name||s.fillBelowTo===(null===(t=e.config)||void 0===t?void 0:t.displayNameFromDS)||s.fillBelowTo===(0,m.C)(e,a,$)})),t=e?(0,m.C)(e,a,$):s.fillBelowTo,n=Z.get(i),r=Z.get(t);(0,l.isNumber)(r)&&(0,l.isNumber)(n)?(A.addBand({series:[n,r],fill:void 0}),R||(R=35)):R=0}}var de;if(v.id===p.S.Thresholds&&(T=e=>(0,h.YO)(M.fields[e],i).color),A.addSeries({pathBuilder:E,pointsBuilder:V,scaleKey:f,showPoints:j,pointsFilter:I,colorMode:v,fillOpacity:R,theme:i,dynamicSeriesColor:T,drawStyle:s.drawStyle,lineColor:null!==(se=s.lineColor)&&void 0!==se?se:y,lineWidth:s.lineWidth,lineInterpolation:s.lineInterpolation,lineStyle:s.lineStyle,barAlignment:s.barAlignment,barWidthFactor:s.barWidthFactor,barMaxWidth:s.barMaxWidth,pointSize:s.pointSize,spanNulls:s.spanNulls||!1,show:!(null!==(ae=s.hideFrom)&&void 0!==ae&&ae.viz),gradientMode:s.gradientMode,thresholds:n.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax,dataFrameFieldIndex:null===(ie=t.state)||void 0===ie?void 0:ie.origin}),s.thresholdsStyle&&n.thresholds)(null!==(de=s.thresholdsStyle.mode)&&void 0!==de?de:b.i3.Off)!==b.i3.Off&&A.addThresholds({config:s.thresholdsStyle,thresholds:n.thresholds,scaleKey:f,theme:i,hardMin:t.config.min,hardMax:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax})}let ce=(0,j.i7)(a);A.setStackingGroups(ce),null==R||R.forEach((e=>{Z||(Z=O(a,$));let t={};for(let n in e.fieldMap){let s=e.fieldMap[n];t[n]=Z.get(s)}e.init(A,t)})),A.scaleKeys=[E,z];let ue={dataIdx:(e,t,n,s)=>{let a=e.data[t];if(null==a[n]){let t,i=null,r=null;for(t=n;null==i&&t-- >0;)null!=a[t]&&(i=t);for(t=n;null==r&&t++<a.length;)null!=a[t]&&(r=t);let o=e.data[0],l=e.valToPos(s,"x"),d=null==r?1/0:e.valToPos(o[r],"x"),c=l-(null==i?-1/0:e.valToPos(o[i],"x")),u=d-l;c<=u?c<=15&&(n=i):u<=15&&(n=r)}return n}};if(T&&T()!==f.m.Off){const e={point:{[E]:null,[z]:null},data:a},t=new v.es(e);ue.sync={key:"__global_",filters:{pub:(n,s,a,i,r,o,l)=>!(T&&T()===f.m.Off||(e.rowIndex=l,a<0&&i<0?(e.point[V]=null,e.point[z]=null,I.publish(new v.xH)):(e.point[V]=s.posToVal(a,E),e.point[z]=s.posToVal(i,z),e.point.panelRelY=i>0?i/o:1,I.publish(t),t.payload.down=void 0),0))},scales:[E,z]}}return A.setSync(),A.setCursor(ue),A})({frame:e,theme:i,timeZones:Array.isArray(r)?r:[r],getTimeRange:n,eventBus:s,sync:a,allFrames:t,renderers:o,tweakScale:T,tweakAxis:I})})),T(this,"renderLegend",(e=>{const{legend:t,frames:n}=this.props;return!e||t&&!t.showLegend?null:(0,I.jsx)(o.l,Object.assign({data:n,config:e},t))}))}render(){return(0,I.jsx)(i.d,Object.assign({},this.props,{prepConfig:this.prepConfig,propsToDiff:$,renderLegend:this.renderLegend}))}}T(R,"contextType",r.bb);const P=(0,a.HE)(R);P.displayName="TimeSeries"},1696:(e,t,n)=>{"use strict";n.d(t,{h:()=>f});var s,a,i=n(52423),r=n(68404),o=n(42454),l=n(25004),d=n(16755),c=n(58906),u=n(8006),h=n(99500),p=n(21888),g=n(45916);const m=["tooltip","icon","className","children","imgSrc","imgAlt","fullWidth","isOpen","narrow","variant","iconOnly","aria-label","isHighlighted"];const f=(0,r.forwardRef)(((e,t)=>{let{tooltip:n,icon:r,className:o,children:l,imgSrc:c,imgAlt:u,fullWidth:f,isOpen:y,narrow:w,variant:j="default",iconOnly:S,"aria-label":C,isHighlighted:k}=e,N=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,m);const O=(0,d.wW)(x),I=(0,i.cx)({[O.button]:!0,[O.buttonFullWidth]:f,[O.narrow]:w},O[j],o),T=(0,i.cx)({[O.content]:!0,[O.contentWithIcon]:!!r,[O.contentWithRightIcon]:void 0!==y}),$=(0,g.jsxs)("button",Object.assign({ref:t,className:I,"aria-label":v(C,n),"aria-expanded":y},N,{children:[b(r),c&&(0,g.jsx)("img",{className:O.img,src:c,alt:null!=u?u:""}),l&&!S&&(0,g.jsx)("div",{className:T,children:l}),!1===y&&(s||(s=(0,g.jsx)(h.J,{name:"angle-down"}))),!0===y&&(a||(a=(0,g.jsx)(h.J,{name:"angle-up"}))),k&&(0,g.jsx)("div",{className:O.highlight})]}));return n?(0,g.jsx)(p.u,{content:n,placement:"bottom",children:$}):$}));function v(e,t){return e||(t?l.wl.components.PageToolbar.item(t):void 0)}function b(e){return e?(0,o.Mo)(e)?(0,g.jsx)(h.J,{name:e,size:"lg"}):e:null}f.displayName="ToolbarButton";const x=e=>{const t=(0,u.c9)(e,"primary","solid"),n=(0,u.c9)(e,"destructive","solid"),s=i.css`
    color: ${e.colors.text.secondary};
    background-color: ${e.colors.background.primary};

    &:hover {
      color: ${e.colors.text.primary};
      background: ${e.colors.background.secondary};
    }
  `,a=i.css`
    color: ${e.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${e.colors.text.primary};
      background: ${e.colors.background.secondary};
    }
  `;return{button:i.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${e.spacing(e.components.height.md)};
      padding: ${e.spacing(0,1)};
      border-radius: ${e.shape.borderRadius()};
      line-height: ${e.components.height.md*e.spacing.gridSize-2}px;
      font-weight: ${e.typography.fontWeightMedium};
      border: 1px solid ${e.colors.border.weak};
      white-space: nowrap;
      transition: ${e.transitions.create(["background","box-shadow","border-color","color"],{duration:e.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,c.getFocusStyles)(e)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,c.getMouseFocusStyles)(e)}
      }

      &:hover {
        box-shadow: ${e.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${e.colors.action.disabledOpacity};
        background: ${e.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${e.colors.text.disabled};
          background: ${e.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:e.flags.topnav?a:s,canvas:s,active:i.css`
      color: ${e.v1.palette.orangeDark};
      border-color: ${e.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.emphasize(e.colors.background.canvas,.03)};
      }
    `,primary:(0,i.css)(t),destructive:(0,i.css)(n),narrow:i.css`
      padding: 0 ${e.spacing(.5)};
    `,img:i.css`
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,buttonFullWidth:i.css`
      flex-grow: 1;
    `,content:i.css`
      flex-grow: 1;
    `,contentWithIcon:i.css`
      display: none;
      padding-left: ${e.spacing(1)};

      @media ${c.mediaUp(e.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:i.css`
      padding-right: ${e.spacing(.5)};
    `,highlight:i.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},21084:(e,t,n)=>{"use strict";n.d(t,{R:()=>p});var s=n(52423),a=n(99510),i=n(81699),r=n(6665),o=n(68404),l=n(16755),d=n(1696),c=n(45916);const u=["alignment","className","children"];const h="overflow-button",p=(0,o.forwardRef)(((e,t)=>{let{alignment:n="left",className:p,children:m}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const v=o.Children.toArray(m).filter((e=>null!==e)),[b,x]=(0,o.useState)(Array(v.length).fill(!0)),y=(0,o.useRef)(null),[w,j]=(0,o.useState)(!1),S=(0,o.createRef)(),{overlayProps:C}=(0,r.Ir)({onClose:()=>j(!1),isDismissable:!0,isOpen:w},S),{dialogProps:k}=(0,a.R)({},S),N=(0,l.l4)(),O="left"===n?b.indexOf(!1)-1:b.length,I=g(N,O,n);return(0,o.useLayoutEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{if(e.target instanceof HTMLElement&&e.target.parentNode){const t=Array.prototype.indexOf.call(e.target.parentNode.children,e.target);x((n=>{const s=[...n];return s[t]=e.isIntersecting,s}))}}))}),{threshold:1,root:y.current});return y.current&&Array.from(y.current.children).forEach((t=>{t instanceof HTMLElement&&t.dataset.testid!==h&&e.observe(t)})),()=>e.disconnect()}),[m]),(0,c.jsxs)("div",Object.assign({ref:y,className:(0,s.cx)(I.container,p)},f,{children:[v.map(((e,t)=>(0,c.jsx)("div",{style:{order:t,visibility:b[t]?"visible":"hidden"},className:I.childWrapper,children:e},t))),b.includes(!1)&&(0,c.jsxs)("div",{"data-testid":h,className:I.overflowButton,children:[(0,c.jsx)(d.h,{variant:w?"active":"default",tooltip:"Show more items",onClick:()=>j(!w),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),w&&(0,c.jsx)(i.MT,{contain:!0,autoFocus:!0,children:(0,c.jsx)("div",Object.assign({className:I.overflowItems,ref:S},C,k,{children:v.map(((e,t)=>!b[t]&&e))}))})]})]}))}));p.displayName="ToolbarButtonRow";const g=(e,t,n)=>({overflowButton:s.css`
    order: ${t};
  `,overflowItems:s.css`
    align-items: center;
    background-color: ${e.colors.background.primary};
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${e.spacing(1)};
    margin-top: ${e.spacing(1)};
    max-width: 80vw;
    padding: ${e.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${e.zIndex.sidemenu};
  `,container:s.css`
    align-items: center;
    display: flex;
    gap: ${e.spacing(1)};
    justify-content: ${"left"===n?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:s.css`
    align-items: center;
    display: flex;
    gap: ${e.spacing(1)};
  `})},5762:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var s=n(68404),a=n(93701),i=n(73934),r=n(41141),o=n(48717),l=n(45916);const d={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},c={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class u extends s.PureComponent{render(){const{content:e,show:t,placement:n,onMouseEnter:u,onMouseLeave:h,className:p,wrapperClassName:g,renderArrow:m,referenceElement:f,onKeyDown:v}=this.props;return(0,l.jsx)(a.dK,{children:(0,l.jsx)(r.ZP,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:t=>(0,l.jsx)(o.h_,{children:(0,l.jsx)(i.r,{placement:n,referenceElement:f,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}],children:n=>{let{ref:a,style:i,placement:r,arrowProps:o,update:f}=n;return(0,l.jsx)("div",{onMouseEnter:u,onMouseLeave:h,onKeyDown:v,ref:a,style:Object.assign({},i,d,c[t]),"data-placement":r,className:`${g}`,children:(0,l.jsxs)("div",{className:p,children:["string"==typeof e&&e,s.isValidElement(e)&&s.cloneElement(e),"function"==typeof e&&e({updatePopperPosition:f}),m&&m({arrowProps:o,placement:r})]})})}})})})})}}},43259:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var s=n(68404);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends s.Component{constructor(){super(...arguments),a(this,"hideTimeout",null),a(this,"state",{show:!1}),a(this,"showPopper",(()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})})),a(this,"hidePopper",(()=>{this.hideTimeout=setTimeout((()=>{this.setState({show:!1})}),this.props.hideAfter)}))}render(){const{children:e,content:t,placement:n="auto"}=this.props,{show:s}=this.state;return e(this.showPopper,this.hidePopper,{show:s,placement:n,content:t})}}},21888:(e,t,n)=>{"use strict";n.d(t,{u:()=>c});var s=n(52423),a=n(68404),i=n(85361),r=n(66876),o=n(16755),l=n(48717),d=n(45916);const c=a.memo((e=>{let{children:t,theme:n,interactive:s,show:r,placement:c,content:h}=e;const[p,g]=a.useState(r);(0,a.useEffect)((()=>{if(!1!==p){const e=e=>{"Escape"===e.key&&g(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[p]);const{getArrowProps:m,getTooltipProps:f,setTooltipRef:v,setTriggerRef:b,visible:x,update:y}=(0,i.O)({visible:p,placement:c,interactive:s,delayHide:s?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:g}),w=(0,o.wW)(u)[null!=n?n:"info"];return(0,d.jsxs)(d.Fragment,{children:[a.cloneElement(t,{ref:b}),x&&(0,d.jsx)(l.h_,{children:(0,d.jsxs)("div",Object.assign({ref:v},f({className:w}),{children:[(0,d.jsx)("div",Object.assign({},m({className:"tooltip-arrow"}))),"string"==typeof h&&h,a.isValidElement(h)&&a.cloneElement(h),"function"==typeof h&&y&&h({updatePopperPosition:y})]}))})]})}));function u(e){function t(t,n,a){return s.css`
      background-color: ${t};
      border-radius: 3px;
      border: 1px solid ${n};
      box-shadow: ${e.shadows.z2};
      color: ${a};
      font-size: ${e.typography.bodySmall.fontSize};
      padding: ${e.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${e.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${n} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${t} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${n} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${t} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${n} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${t} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${n};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${t};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${r.darken(t,.1)};
        color: ${a};
      }

      pre {
        background: ${r.darken(t,.1)};
        color: ${a};
      }

      a {
        color: ${a};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const n=t(e.components.tooltip.background,e.components.tooltip.background,e.components.tooltip.text);return{info:n,"info-alt":n,error:t(e.colors.error.main,e.colors.error.main,e.colors.error.contrastText)}}c.displayName="Tooltip"},25801:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var s=n(68404),a=n(45916);const i=e=>{let{highlightParts:t,text:n,highlightClassName:i}=e;if(null==t||!t.length)return null;let r=[],o=function(e,t){const n=[];return e.forEach((e=>{n.push(e.start,e.end+1)})),0!==n[0]&&n.unshift(0),n[n.length-1]!==t&&n.push(t),n}(t,n.length),l=0===t[0].start;for(let e=1;e<o.length;e++){let t=o[e-1],a=o[e];r.push((0,s.createElement)(l?"mark":"span",{key:e-1,className:l?i:void 0},n.substring(t,a))),l=!l}return(0,a.jsx)("div",{children:r})}},76234:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var s=n(68404),a=n(55343),i=n(43446),r=n(45916);function o(e){return`Custom unit: ${e}`}class l extends s.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{this.props.onChange(e.value)},(t="onChange")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{value:e,width:t}=this.props;let n;const s=(0,a.QW)().map((t=>{const s=t.submenu.map((t=>{const s={label:t.text,value:t.value};return t.value===e&&(n=s),s}));return{label:t.text,value:t.text,items:s}}));return e&&!n&&(n={value:e,label:e}),(0,r.jsx)(i.v,{width:t,initialValue:n&&n.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:o,options:s,placeholder:"Choose",onSelect:this.props.onChange})}}},15013:(e,t,n)=>{"use strict";n.d(t,{b:()=>d});var s=n(68404),a=n(25004),i=n(16755),r=n(8006),o=n(70917),l=n(45916);function d(e){let{"aria-label":t,label:n,icon:d,options:c,onChange:u,variant:h,minWidth:p=16,size:g="sm",isFullWidth:m=!0,menuPlacement:f,fill:v,buttonCss:b}=e;const[x,y]=(0,s.useState)(!1),w=(0,i.l4)();return(0,l.jsxs)(l.Fragment,{children:[!x&&(0,l.jsx)(r.zx,{size:g||"sm",className:b,icon:d||"plus",onClick:()=>y(!0),variant:h,fill:v,fullWidth:m,"aria-label":a.wl.components.ValuePicker.button(null!=t?t:n),children:n}),x&&(0,l.jsx)("span",{style:{minWidth:w.spacing(p),flexGrow:m?1:void 0},children:(0,l.jsx)(o.Ph,{placeholder:n,options:c,"aria-label":a.wl.components.ValuePicker.select(null!=t?t:n),isOpen:!0,onCloseMenu:()=>y(!1),autoFocus:!0,onChange:e=>{y(!1),u(e)},menuPlacement:f})})]})}},30733:(e,t,n)=>{"use strict";n.d(t,{AY:()=>d});var s=n(52423),a=(n(68404),n(65065)),i=n(16755),r=n(58906),o=n(22222),l=n(45916);const d=e=>{var t,n;let{width:s,height:r,legend:d,children:u}=e;const h=(0,i.wW)(c),p={display:"flex",width:`${s}px`,height:`${r}px`},[g,m]=(0,a.Z)();if(!d)return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{tabIndex:0,style:p,className:h.viz,children:u(s,r)})});const{placement:f,maxHeight:v="35%",maxWidth:b="60%"}=d.props;let x=null;const y={};switch(f){case"bottom":p.flexDirection="column",y.maxHeight=v,m&&(x={width:s,height:r-m.height});break;case"right":p.flexDirection="row",y.maxWidth=b,m&&(x={width:s-m.width,height:r}),d.props.width&&(y.width=d.props.width,x={width:s-d.props.width,height:r})}return 0===(null===(t=x)||void 0===t?void 0:t.width)&&(x.width=s),0===(null===(n=x)||void 0===n?void 0:n.height)&&(x.height=r),(0,l.jsxs)("div",{style:p,children:[(0,l.jsx)("div",{tabIndex:0,className:h.viz,children:x&&u(x.width,x.height)}),(0,l.jsx)("div",{style:y,ref:g,children:(0,l.jsx)(o.$,{hideHorizontalTrack:!0,children:d})})]})},c=e=>({viz:(0,s.css)({flexGrow:2,borderRadius:e.shape.borderRadius(1),"&:focus-visible":(0,r.getFocusStyles)(e)})});d.Legend=e=>{let{children:t}=e;return(0,l.jsx)(l.Fragment,{children:t})}},10814:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var s=n(68404),a=n(31319),i=n(16755),r=n(45916);const o=["color","className","gradient"];const l=s.memo(s.forwardRef(((e,t)=>{let{color:n,className:s,gradient:l}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const c=(0,i.l4)();let u;if(l){var h,p;const e=null===(h=(p=a.WO.get(l)).getColors)||void 0===h?void 0:h.call(p,c);u=null!=e&&e.length?`linear-gradient(90deg, ${e.join(", ")})`:c.visualization.getColorByName("")}else u=n;const g={background:u,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return(0,r.jsx)("div",Object.assign({"data-testid":"series-icon",ref:t,className:s,style:g},d))})));l.displayName="SeriesIcon"},38914:(e,t,n)=>{"use strict";n.d(t,{l:()=>O});var s=n(68404),a=n(92721),i=n(27864),r=n(27783),o=n(25393),l=n(52423),d=n(16755),c=n(19495),u=n(89645),h=n(13768),p=n(45916);const g=e=>{let{items:t,itemRenderer:n,onLabelMouseOver:s,onLabelMouseOut:a,onLabelClick:i,placement:r,className:o,readonly:g}=e;const f=(0,d.wW)(m);n||(n=e=>(0,p.jsx)(h.e,{item:e,onLabelClick:i,onLabelMouseOver:s,onLabelMouseOut:a,readonly:g}));const v=e=>`${e.getItemKey?e.getItemKey():e.label}`;if("right"===r){const e=(e,t)=>(0,p.jsx)("span",{className:f.itemRight,children:n(e,t)});return(0,p.jsx)("div",{className:(0,l.cx)(f.rightWrapper,o),children:(0,p.jsx)(u.a,{items:t,renderItem:e,getItemKey:v})})}{const e=(e,t)=>(0,p.jsx)("span",{className:f.itemBottom,children:n(e,t)});return(0,p.jsxs)("div",{className:(0,l.cx)(f.bottomWrapper,o),children:[(0,p.jsx)("div",{className:f.section,children:(0,p.jsx)(c.Y,{items:t.filter((e=>1===e.yAxis)),renderItem:e,getItemKey:v})}),(0,p.jsx)("div",{className:(0,l.cx)(f.section,f.sectionRight),children:(0,p.jsx)(c.Y,{items:t.filter((e=>1!==e.yAxis)),renderItem:e,getItemKey:v})})]})}};g.displayName="VizLegendList";const m=e=>{const t=l.css`
    padding-right: 10px;
    display: flex;
    font-size: ${e.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:t,itemRight:(0,l.cx)(t,l.css`
        margin-bottom: ${e.spacing(.5)};
      `),rightWrapper:l.css`
      padding-left: ${e.spacing(.5)};
    `,bottomWrapper:l.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${e.spacing(.5)};
    `,section:l.css`
      display: flex;
    `,sectionRight:l.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var f=n(82897),v=n(99500),b=n(55343),x=n(58906),y=n(12488);const w=e=>{let{item:t,onLabelClick:n,onLabelMouseOver:a,onLabelMouseOut:i,className:r,readonly:o}=e;const c=(0,d.wW)(j),u=(0,s.useCallback)((e=>{a&&a(t,e)}),[t,a]),h=(0,s.useCallback)((e=>{i&&i(t,e)}),[t,i]),g=(0,s.useCallback)((e=>{n&&n(t,e)}),[t,n]);return(0,p.jsxs)("tr",{className:(0,l.cx)(c.row,r),children:[(0,p.jsx)("td",{children:(0,p.jsxs)("span",{className:c.itemWrapper,children:[(0,p.jsx)(y.i,{color:t.color,seriesName:t.label,readonly:o}),(0,p.jsxs)("button",{disabled:o,type:"button",onBlur:h,onFocus:u,onMouseOver:u,onMouseOut:h,onClick:o?void 0:g,className:(0,l.cx)(c.label,t.disabled&&c.labelDisabled),children:[t.label," ",2===t.yAxis&&(0,p.jsx)("span",{className:c.yAxisLabel,children:"(right y-axis)"})]})]})}),t.getDisplayValues&&t.getDisplayValues().map(((e,t)=>(0,p.jsx)("td",{className:c.value,children:(0,b.zc)(e)},`${e.title}-${t}`)))]})};w.displayName="LegendTableItem";const j=e=>{const t=x.hoverColor(e.colors.background.primary,e);return{row:l.css`
      label: LegendRow;
      font-size: ${e.v1.typography.size.sm};
      border-bottom: 1px solid ${e.colors.border.weak};
      td {
        padding: ${e.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${t};
      }
    `,label:l.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:l.css`
      label: LegendLabelDisabled;
      color: ${e.colors.text.disabled};
    `,itemWrapper:l.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:l.css`
      text-align: right;
    `,yAxisLabel:l.css`
      color: ${e.colors.text.secondary};
    `}};var S;const C=e=>{let{items:t,sortBy:n,sortDesc:s,itemRenderer:a,className:i,onToggleSort:r,onLabelClick:o,onLabelMouseOver:c,onLabelMouseOut:u,readonly:h}=e;const g=(0,d.wW)(k),m={};for(const e of t)if(e.getDisplayValues)for(const t of e.getDisplayValues()){var b;m[null!==(b=t.title)&&void 0!==b?b:"?"]=t}const x=n?(0,f.orderBy)(t,(e=>{if(e.getDisplayValues){const t=e.getDisplayValues().filter((e=>e.title===n))[0];return t&&t.numeric}}),s?"desc":"asc"):t;return a||(a=(e,t)=>(0,p.jsx)(w,{item:e,onLabelClick:o,onLabelMouseOver:c,onLabelMouseOut:u,readonly:h},`${e.label}-${t}`)),(0,p.jsxs)("table",{className:(0,l.cx)(g.table,i),children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[S||(S=(0,p.jsx)("th",{})),Object.keys(m).map((e=>{const t=m[e];return(0,p.jsxs)("th",{title:t.description,className:(0,l.cx)(g.header,r&&g.headerSortable,{[g.withIcon]:n===e}),onClick:()=>{r&&r(e)},children:[e,n===e&&(0,p.jsx)(v.J,{size:"xs",name:s?"angle-down":"angle-up"})]},e)}))]})}),(0,p.jsx)("tbody",{children:x.map(a)})]})},k=e=>({table:l.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${e.colors.border.weak};
    }
  `,header:l.css`
    color: ${e.colors.primary.text};
    font-weight: ${e.typography.fontWeightMedium};
    border-bottom: 1px solid ${e.colors.border.weak};
    padding: ${e.spacing(.25,1,.25,1)};
    font-size: ${e.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:l.css`
    padding-right: 4px;
  `,headerSortable:l.css`
    cursor: pointer;
  `});var N=n(39329);function O(e){let{items:t,displayMode:n,sortBy:l,seriesVisibilityChangeBehavior:d=N.Y.Isolate,sortDesc:c,onLabelClick:u,onToggleSort:h,placement:m,className:f,itemRenderer:v,readonly:b}=e;const{eventBus:x,onToggleSeriesVisibility:y,onToggleLegendSort:w}=(0,r.R9)(),j=(0,s.useCallback)(((e,t)=>{null==x||x.publish({type:a.es.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[x]),S=(0,s.useCallback)(((e,t)=>{null==x||x.publish({type:a.xH.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[x]),k=(0,s.useCallback)(((e,t)=>{u&&u(e,t),y&&y(e.label,d===N.Y.Hide?o.R.AppendToSelection:function(e){return e.ctrlKey||e.metaKey||e.shiftKey?o.R.AppendToSelection:o.R.ToggleSelection}(t))}),[y,u,d]);switch(n){case i.jK.Table:return(0,p.jsx)(C,{className:f,items:t,placement:m,sortBy:l,sortDesc:c,onLabelClick:k,onToggleSort:h||w,onLabelMouseOver:j,onLabelMouseOut:S,itemRenderer:v,readonly:b});case i.jK.List:return(0,p.jsx)(g,{className:f,items:t,placement:m,onLabelMouseOver:j,onLabelMouseOut:S,onLabelClick:k,itemRenderer:v,readonly:b});default:return null}}O.displayName="VizLegend"},13768:(e,t,n)=>{"use strict";n.d(t,{e:()=>g});var s=n(52423),a=n(68404),i=n(25004),r=n(16755),o=n(12488),l=n(82897),d=n(55343),c=n(19495),u=n(45916);const h=e=>{let{stats:t}=e;const n=(0,r.wW)(p);return 0===t.length?null:(0,u.jsx)(c.Y,{className:n.list,items:t,renderItem:e=>(0,u.jsxs)("div",{className:n.item,title:e.description,children:[e.title&&`${(0,l.capitalize)(e.title)}:`," ",(0,d.zc)(e)]})})},p=()=>({list:s.css`
    flex-grow: 1;
    text-align: right;
  `,item:s.css`
    margin-left: 8px;
  `});h.displayName="VizLegendStatsList";const g=e=>{let{item:t,onLabelClick:n,onLabelMouseOver:l,onLabelMouseOut:d,className:c,readonly:p}=e;const g=(0,r.wW)(m),f=(0,a.useCallback)((e=>{l&&l(t,e)}),[t,l]),v=(0,a.useCallback)((e=>{d&&d(t,e)}),[t,d]),b=(0,a.useCallback)((e=>{n&&n(t,e)}),[t,n]);return(0,u.jsxs)("div",{className:(0,s.cx)(g.itemWrapper,t.disabled&&g.itemDisabled,c),"aria-label":i.wl.components.VizLegend.seriesName(t.label),children:[(0,u.jsx)(o.i,{seriesName:t.label,color:t.color,gradient:t.gradient,readonly:p}),(0,u.jsx)("button",{disabled:p,type:"button",onBlur:v,onFocus:f,onMouseOver:f,onMouseOut:v,onClick:b,className:g.label,children:t.label}),t.getDisplayValues&&(0,u.jsx)(h,{stats:t.getDisplayValues()})]})};g.displayName="VizLegendListItem";const m=e=>({label:s.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
  `,itemDisabled:s.css`
    label: LegendLabelDisabled;
    color: ${e.colors.text.disabled};
  `,itemWrapper:s.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:s.css`
    text-align: right;
  `,yAxisLabel:s.css`
    color: ${e.v1.palette.gray2};
  `})},12488:(e,t,n)=>{"use strict";n.d(t,{i:()=>l});var s=n(68404),a=n(32933),i=n(27783),r=n(10814),o=n(45916);const l=s.memo((e=>{let{seriesName:t,color:n,gradient:l,readonly:d}=e;const{onSeriesColorChange:c}=(0,i.R9)(),u=(0,s.useCallback)((e=>c(t,e)),[t,c]);return t&&c&&n&&!d?(0,o.jsx)(a.sp,{color:n,onChange:u,enableNamedColors:!0,children:e=>{let{ref:t,showColorPicker:s,hideColorPicker:a}=e;return(0,o.jsx)(r.F,{color:n,className:"pointer",ref:t,onClick:s,onMouseLeave:a})}}):(0,o.jsx)(r.F,{color:n,gradient:l})}));l.displayName="VizLegendSeriesIcon"},39329:(e,t,n)=>{"use strict";let s;n.d(t,{Y:()=>s}),function(e){e[e.Isolate=0]="Isolate",e[e.Hide=1]="Hide"}(s||(s={}))},25700:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c});var s=n(68404),a=n(40389);function i(e,t,n){const s=Math.ceil(Math.sqrt(n*e/t));return Math.floor(s*t/e)*s<n?t/Math.ceil(s*t/e):e/s}var r,o,l,d=n(45916);class c extends s.PureComponent{constructor(e){super(e),this.state={values:e.getValues()}}componentDidUpdate(e){const{renderCounter:t,source:n}=this.props;t===e.renderCounter&&n===e.source||this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:e,width:t,height:n}=this.props;return e===a.wm.Auto?t>n?a.wm.Vertical:a.wm.Horizontal:e}renderGrid(){const{renderValue:e,height:t,width:n,itemSpacing:s,getAlignmentFactors:a,orientation:r}=this.props,{values:o}=this.state,l=((e,t,n,s)=>{const a=i(e,t,s),r=i(t,e,s),o=Math.max(a,r);let l=Math.floor(e/o),d=Math.ceil(s/l);l=Math.ceil(s/d);const c=l-(l*d-s);return{width:e/l-n+n/l,height:t/d-n+n/d,widthOnLastRow:e/c-n+n/c,xCount:l,yCount:d}})(n,t,s,o.length),c=a?a(o,l.width,l.height):{};let u=0,h=0,p=[];for(let t=0;t<o.length;t++){const n=o[t],a=h===l.yCount-1?l.widthOnLastRow:l.width,i=l.height,g={position:"absolute",left:u*a+s*u,top:h*i+s*h,width:`${a}px`,height:`${i}px`};p.push((0,d.jsx)("div",{style:g,children:e({value:n,width:a,height:i,alignmentFactors:c,orientation:r,count:o.length})},t)),u++,u===l.xCount&&(u=0,h++)}return(0,d.jsx)("div",{style:{position:"relative"},children:p})}render(){const{renderValue:e,height:t,width:n,itemSpacing:s,getAlignmentFactors:i,autoGrid:r,orientation:o,minVizWidth:l,minVizHeight:c}=this.props,{values:h}=this.state;if(r&&o===a.wm.Auto)return this.renderGrid();const p={display:"flex"},g={display:"flex",overflow:`${l?"auto":"hidden"} ${c?"auto":"hidden"}`};let m=t,f=n,v=this.getOrientation();switch(v){case a.wm.Horizontal:g.flexDirection="column",g.height=`${t}px`,p.marginBottom=`${s}px`,f=n,m=Math.max(t/h.length-s+s/h.length,null!=c?c:0);break;case a.wm.Vertical:g.flexDirection="row",g.justifyContent="space-between",p.marginRight=`${s}px`,m=t,f=Math.max(n/h.length-s+s/h.length,null!=l?l:0)}p.width=`${f}px`,p.height=`${m}px`;const b=i?i(h,f,m):{};return(0,d.jsx)("div",{style:g,children:h.map(((t,n)=>(0,d.jsx)("div",{style:u(p,n,h.length),children:e({value:t,width:f,height:m,alignmentFactors:b,orientation:v,count:h.length})},n)))})}}function u(e,t,n){return t===n-1?Object.assign({},e,{marginRight:0,marginBottom:0}):e}l={itemSpacing:8},(o="defaultProps")in(r=c)?Object.defineProperty(r,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[o]=l},62335:(e,t,n)=>{"use strict";n.d(t,{V:()=>l,c:()=>d});var s=n(52423),a=(n(68404),n(16755)),i=n(10814),r=n(45916);const o=e=>({icon:s.css`
      margin-right: ${e.spacing(1)};
      vertical-align: middle;
    `,seriesTable:s.css`
      display: table;
    `,seriesTableRow:s.css`
      display: table-row;
      font-size: ${e.typography.bodySmall.fontSize};
    `,seriesTableCell:s.css`
      display: table-cell;
    `,label:s.css`
      word-break: break-all;
    `,value:s.css`
      padding-left: ${e.spacing(2)};
    `,activeSeries:s.css`
      font-weight: ${e.typography.fontWeightBold};
      color: ${e.colors.text.maxContrast};
    `,timestamp:s.css`
      font-weight: ${e.typography.fontWeightBold};
      font-size: ${e.typography.bodySmall.fontSize};
    `}),l=e=>{let{color:t,label:n,value:l,isActive:d}=e;const c=(0,a.wW)(o);return(0,r.jsxs)("div",{"data-testid":"SeriesTableRow",className:(0,s.cx)(c.seriesTableRow,d&&c.activeSeries),children:[t&&(0,r.jsx)("div",{className:c.seriesTableCell,children:(0,r.jsx)(i.F,{color:t,className:c.icon})}),n&&(0,r.jsx)("div",{className:(0,s.cx)(c.seriesTableCell,c.label),children:n}),l&&(0,r.jsx)("div",{className:(0,s.cx)(c.seriesTableCell,c.value),children:l})]})},d=e=>{let{timestamp:t,series:n}=e;const s=(0,a.wW)(o);return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)("div",{className:s.timestamp,"aria-label":"Timestamp",children:t}),n.map(((e,t)=>(0,r.jsx)(l,{isActive:e.isActive,label:e.label,color:e.color,value:e.value},`${e.label}-${t}`)))]})}},45432:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(48717),r=n(1700),o=n(45916);const l=e=>{let{content:t,position:n,offset:s}=e;const l=(0,a.wW)(d);return n?(0,o.jsx)(i.h_,{className:l.portal,children:(0,o.jsx)(r.S,{position:n,offset:s||{x:0,y:0},children:t})}):null};l.displayName="VizTooltip";const d=()=>({portal:s.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},1700:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var s=n(52423),a=n(68404),i=n(6663),r=n(16755),o=n(58906);var l=n(45916);const d=["position","offset","children","allowPointerEvents","className"];const c=e=>{let{position:{x:t,y:n},offset:{x:o,y:c},children:h,allowPointerEvents:p=!1,className:g}=e,m=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const f=(0,a.useRef)(null),[v,b]=(0,a.useState)({width:0,height:0}),{width:x,height:y}=(0,i.Z)(),[w,j]=(0,a.useState)({x:t+o,y:n+c}),S=(0,a.useMemo)((()=>new ResizeObserver((e=>{for(let t of e){const e=Math.floor(t.contentRect.width+16),n=Math.floor(t.contentRect.height+16);v.width===e&&v.height===n||b({width:Math.min(e,x),height:Math.min(n,y)})}}))),[v,x,y]);(0,a.useLayoutEffect)((()=>(f.current&&S.observe(f.current),()=>{S.disconnect()})),[S]),(0,a.useLayoutEffect)((()=>{if(f&&f.current){const{x:e,y:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=e,d=t;const c=Math.max(e+a+n-(r-a),0),u=Math.abs(Math.min(e-a-n-a,0)),h=c>0,p=u>0,g=Math.max(t+i+s-(o-i),0),m=Math.abs(Math.min(t-i-s-i,0)),f=g>0,v=m>0;return l=h&&p?c>u?a:r-a-n:h?e-a-n:e+a,d=f&&v?g>m?i:o-i-s:f?t-i-s:t+i,{x:l,y:d}}(t,n,v.width,v.height,o,c,x,y);j({x:e,y:s})}}),[x,y,t,o,n,c,v]);const C=(0,r.wW)(u);return(0,l.jsx)("div",Object.assign({ref:f,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${w.x}px, ${w.y}px)`,transition:"transform ease-out 0.1s"}},m,{className:(0,s.cx)(C.wrapper,g),children:h}))};c.displayName="VizTooltipContainer";const u=e=>({wrapper:s.css`
    ${(0,o.getTooltipContainerStyles)(e)}
  `})},52777:(e,t,n)=>{"use strict";n.d(t,{bZj:()=>nt.b,O5T:()=>Dn.O,M8I:()=>gs.M8,qbS:()=>gs.qb,H6n:()=>ks.H,Cts:()=>bs.C,xfx:()=>_e.xf,QHm:()=>_e.QH,w6I:()=>Le.w6,pcF:()=>Le.pc,IGx:()=>Le.IG,apN:()=>Le.ap,jGm:()=>Le.jG,dI4:()=>ra._,zxk:()=>Kn.zx,OSz:()=>j.O,hE2:()=>Jn.h,doH:()=>Vs.d,_d:()=>fn._,Zbd:()=>Ls.Z,_L7:()=>Fs._,vTp:()=>w.v,WTJ:()=>Mn.W,XZJ:()=>$s.X,LVf:()=>P.L,mUV:()=>y.m,pq4:()=>re.p,kwZ:()=>le.k,s2J:()=>it.s,UO1:()=>at.U,zH8:()=>k.zH,TkS:()=>F,puI:()=>h.p,sm4:()=>ae.s,W20:()=>vs.W2,xVl:()=>vn.x,ybu:()=>at.y,ATJ:()=>$e.A,$TT:()=>b.$,kuP:()=>yt.k,vmb:()=>Sn.v,V5N:()=>Cn.V,dIl:()=>jn.d,E1E:()=>Pn.E,Mtg:()=>Q.M,d2U:()=>K.d,xZq:()=>J.x,m1X:()=>p.m,dys:()=>Un.d,Ltx:()=>zs.L,msj:()=>ms.m,KBh:()=>B.K,SVk:()=>$n.SV,z4Q:()=>$n.z4,X2N:()=>Rn.X,TZ:()=>Gs.T,jKV:()=>ea.j,nTT:()=>Fn.n,aXU:()=>On.a,ZjK:()=>On.Z,gNt:()=>as.g,F26:()=>hs.F,Zjt:()=>hn.Z,C3N:()=>rs.C,S0X:()=>os.S,YoT:()=>Ps.Yo,A_i:()=>Ps.A_,K$w:()=>Ds.K,p0f:()=>Rs.p,HSx:()=>Ns.H,BmQ:()=>se.B,l09:()=>Zn.l,WRj:()=>Es.W,fiX:()=>pn,aCY:()=>Ee.a,kJb:()=>Ve.k,wvn:()=>Be.w,bpR:()=>Be.b,drZ:()=>ea.d,UNL:()=>st,UAG:()=>ze.U,LhK:()=>vs.Lh,JO$:()=>c.J,hU:()=>u.h,vDh:()=>Nn.v,_9$:()=>ls._,Z6t:()=>us.Z,cJ0:()=>_s.c,W4p:()=>cs.W,mOU:()=>ds.m,x$6:()=>Ts.x,KEo:()=>S.K,IIB:()=>Cs.I,gs_:()=>Qn.g,gwK:()=>In.g,uC:()=>Tn.u,Cmj:()=>Xs.C,__J:()=>ss._,vw6:()=>la,Gdq:()=>a.G,DeQ:()=>is.D,rUS:()=>ns.r,Qjf:()=>Kn.Qj,aVo:()=>Y.a,u3Z:()=>C.u,jwW:()=>ot,QNy:()=>gt,w3v:()=>un,JxD:()=>Qs.J,v2r:()=>bn.v,kSQ:()=>xn.k,sNh:()=>yn.s,u_l:()=>ce.u,xBx:()=>ue.x,Y0X:()=>ge.Y0,QEF:()=>pe.Q,Han:()=>he.H,krk:()=>ge.kr,JYt:()=>ge.JY,$iA:()=>ge.$i,NUq:()=>gs.NU,XDu:()=>me.X,tlE:()=>ee.t,fmR:()=>Ge.fm,qbG:()=>Ke.g,E3Q:()=>Qe.T,lk7:()=>oa.l,_wC:()=>Je._w,bbH:()=>Je.bb,lNn:()=>Zs.l,oDb:()=>Bs.o,J2e:()=>f.J,Dh5:()=>m.D,h_i:()=>v.h_,lO4:()=>v.lO,qjJ:()=>ie.q,SYO:()=>xs.S,xON:()=>js,U2U:()=>qn.U,VR_:()=>oe.o,dPd:()=>U.dP,xpf:()=>Ms.x,DNo:()=>Me.D,wf3:()=>be.wf,m4K:()=>Os.m4,Zkz:()=>Is.Zk,XX7:()=>Vn.X,VXm:()=>zn.V,Xrl:()=>Bn.X,fT$:()=>Wn.f,VBk:()=>_n.V,PhF:()=>gs.Ph,eI2:()=>gs.eI,spA:()=>k.sp,jx7:()=>z.j,qRd:()=>z.q,FiV:()=>kn.F,cS8:()=>He.c,VtB:()=>He.V,YvT:()=>Xe.Y,R8q:()=>ia.R,FOj:()=>fe.F,R9v:()=>En.R,iRW:()=>Hn.i,bju:()=>Fe.b,$jN:()=>Ln.$,mMX:()=>W.m,rsf:()=>Ts.r,sHf:()=>An.s,OK9:()=>Ie.O,I5H:()=>Ae.I,WLI:()=>x.W,iA_:()=>ve.i,h2q:()=>be.h2,wtM:()=>ke,J_V:()=>Oe.J,Vp9:()=>te.V,PST:()=>ne.P,B7H:()=>X.B,Kx8:()=>je.K,yAm:()=>q.y,K4x:()=>As.K,XcI:()=>H.X,pfI:()=>ta.p,OkK:()=>Z.O,hAV:()=>Yn.h,RNy:()=>Xn.R,ua7:()=>g.u,iiT:()=>Ys.i,gDA:()=>Hs.gD,N$r:()=>qs.N,UBi:()=>Us.U,nAu:()=>_.n,b59:()=>es.b,wcK:()=>vs.wc,L2y:()=>Pe,LTN:()=>gs.LT,AYi:()=>Ye.AY,ltB:()=>et.l,eMh:()=>tt.e,QBm:()=>qe.Q,I5C:()=>We.I,S$u:()=>Ue.S,zDr:()=>G.z,zH1:()=>wn.z,K2:()=>Ks.K,Rbc:()=>Js.R,z12:()=>aa.z,gNI:()=>Kn.gN,PRL:()=>mn.PR,o5O:()=>U.o5,ivH:()=>ts.i,LyM:()=>Ls.L,HxM:()=>Cs.H,hIY:()=>Nt,RNS:()=>v.RN,D1k:()=>fs.D,qVi:()=>Ws.q,sVu:()=>Ze.sV,mcr:()=>Ze.mc,RnT:()=>aa.R,JpF:()=>ps.Z,RKV:()=>Gn.RK,rDf:()=>mn.rD,ZHc:()=>mn.ZH,zrC:()=>sa,R9P:()=>Je.R9,ThK:()=>de.T,PfY:()=>$n.Pf});var s=n(69173),a=n(86354),i=n(45335),r=n(15996),o=n(62717),l=n(18083),d=n(3822),c=n(99500),u=n(23734),h=n(54241),p=n(77772),g=n(21888),m=n(43259),f=n(5762),v=n(48717),b=n(22222),x=n(54671),y=n(11818),w=n(43446),j=n(30477),S=n(54588),C=n(38953),k=n(32933),N=n(52423),O=n(68404),I=n(35206),T=n(30929),$=n(66876),R=n(16755),P=n(55910),D=n(47057),A=n(62338),M=n(45916);const L=["value","onChange","returnColorAs"];const F=(0,O.forwardRef)(((e,t)=>{let{value:n="",onChange:s,returnColorAs:a="rgb"}=e,i=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,L);const[r,o]=(0,O.useState)(n),[l,d]=(0,O.useState)(!1),c=(0,R.l4)(),u=(0,R.wW)(E),h=(0,R.wW)(A.W);return(0,T.Z)((e=>{if(e===n)return;if(!e)return void s("");const t=c.visualization.getColorByName(e);s("rgb"===a?$.asRgbString(t):$.asHexString(t))}),500,[r]),(0,M.jsx)(P.L,{onClick:()=>d(!1),children:(0,M.jsxs)("div",{className:u.wrapper,children:[l&&!i.disabled&&(0,M.jsx)(I.ef,{"data-testid":"color-popover",color:r,onChange:o,className:(0,N.cx)(h.root,u.picker)}),(0,M.jsx)("div",{onClick:()=>d(!0),children:(0,M.jsx)(D.Z,Object.assign({},i,{theme:c,color:r,onChange:o,ref:t,isClearable:!0}))})]})})}));F.displayName="ColorPickerInput";const E=e=>({wrapper:N.css`
      position: relative;
    `,picker:N.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:N.css`
      position: absolute;
    `});var V,z=n(15743),B=n(82663),_=n(76234),W=n(4116),U=n(21162),H=n(38424),q=n(62835),Z=n(82261),G=n(48239),Q=n(74936),K=n(65932),J=n(73334),Y=n(89645),X=n(89716),ee=n(1558),te=n(51028),ne=n(76961),se=n(45904),ae=n(2024),ie=n(22995),re=n(31787),oe=n(82173),le=n(27464),de=n(85896),ce=n(78941),ue=n(39785),he=n(55278),pe=n(41762),ge=n(40941),me=n(80998),fe=n(94868),ve=n(41345),be=n(27864),xe=n(82897),ye=n(14790),we=n(50191),je=n(93194);function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ce extends O.PureComponent{constructor(e){super(e),Se(this,"readCSV",(0,xe.debounce)((()=>{const{config:e}=this.props,{text:t}=this.state;this.setState({data:(0,ye.uP)(t,{config:e})})}),150)),Se(this,"onTextChange",(e=>{this.setState({text:e.target.value})}));const{text:t,config:n}=e;this.state={text:t,data:(0,ye.uP)(t,{config:n})}}componentDidUpdate(e,t){const{text:n}=this.state;n===t.text&&this.props.config===e.config||this.readCSV(),this.props.text!==e.text&&this.props.text!==n&&this.setState({text:this.props.text}),this.state.data!==t.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:e,height:t,theme:n}=this.props,{data:s}=this.state,a=Ne(n);return(0,M.jsxs)("div",{className:a.tableInputCsv,children:[(0,M.jsx)(je.K,{style:{width:e,height:t},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:a.textarea}),s&&(0,M.jsx)("footer",{className:a.footer,children:s.map(((e,t)=>(0,M.jsxs)("span",{children:["Rows:",e.length,", Columns:",e.fields.length,"  ",V||(V=(0,M.jsx)(c.J,{name:"check-circle"}))]},t)))})]})}}const ke=(0,R.HE)(Ce);ke.displayName="TableInputCSV";const Ne=(0,we.B)((e=>({tableInputCsv:N.css`
      position: relative;
    `,textarea:N.css`
      height: 100%;
      width: 100%;
    `,footer:N.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${e.colors.success.main};
      padding: 1px ${e.spacing(.5)};
      font-size: 80%;
    `})));var Oe=n(10453),Ie=n(87152),Te=n(25004),$e=n(68624);const Re=["label","active","icon","counter","className","suffix","onChangeTab","href"];const Pe=O.forwardRef(((e,t)=>{var n,s;let{label:a,active:i,icon:r,counter:o,suffix:l,onChangeTab:d,href:u}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Re);const p=(0,R.wW)(De),g=(0,N.cx)(p.link,i&&p.activeStyle);return(0,M.jsx)("a",Object.assign({href:u,className:g},h,{onClick:d,"aria-label":h["aria-label"]||Te.wl.components.Tab.title(a),role:"tab","aria-selected":i,ref:t,children:(0,M.jsxs)(M.Fragment,{children:[r&&(n||(n=(0,M.jsx)(c.J,{name:r}))),a,"number"==typeof o&&(s||(s=(0,M.jsx)($e.A,{value:o}))),l&&(0,M.jsx)(l,{className:p.suffix})]})}))}));Pe.displayName="Tab";const De=e=>({link:N.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${e.colors.text.primary};

      svg {
        margin-right: ${e.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:N.css`
      label: activeTabStyle;
      color: ${e.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:N.css`
      margin-left: ${e.spacing(1)};
    `});var Ae=n(71873),Me=n(4388),Le=n(99749),Fe=n(58002),Ee=n(47868),Ve=n(92554),ze=n(89164),Be=n(9593),_e=n(63179),We=n(45432),Ue=n(1700),He=n(62335),qe=n(25700),Ze=n(32735),Ge=n(20317),Qe=n(21144),Ke=n(3157),Je=n(27783),Ye=n(30733),Xe=n(39329),et=n(38914),tt=n(13768),nt=n(2843);class st extends O.Component{constructor(e){super(e),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:e.series}}componentDidUpdate(e){const{series:t}=this.props;(0,xe.isEqual)(e.series,t)||this.setState({hiddenSeries:[],toggledSeries:t})}onSeriesToggle(e,t){const{series:n,onHiddenSeriesChanged:s}=this.props,{hiddenSeries:a}=this.state;if(t.ctrlKey||t.metaKey||t.shiftKey){const t=a.indexOf(e)>-1?a.filter((t=>t!==e)):a.concat([e]),i=n.map((e=>Object.assign({},e,{isVisible:-1===t.indexOf(e.label)})));return void this.setState({hiddenSeries:t,toggledSeries:i},(()=>s?s(t):void 0))}const i=n.map((e=>e.label)),r=a.length+1===i.length?[]:(0,xe.difference)(i,[e]),o=n.map((e=>Object.assign({},e,{isVisible:-1===r.indexOf(e.label)})));this.setState({hiddenSeries:r,toggledSeries:o},(()=>s?s(r):void 0))}render(){const{children:e}=this.props,{toggledSeries:t}=this.state;return e({onSeriesToggle:this.onSeriesToggle,toggledSeries:t})}}var at=n(38595),it=n(75342);const rt=["level","lvl","filename"],ot=e=>{let{labels:t}=e;const n=(0,R.wW)(lt),s=Object.keys(t).filter((e=>!e.startsWith("_")&&!rt.includes(e)));return 0===s.length?(0,M.jsx)("span",{className:(0,N.cx)([n.logsLabels]),children:(0,M.jsx)("span",{className:(0,N.cx)([n.logsLabel]),children:"(no unique labels)"})}):(0,M.jsx)("span",{className:(0,N.cx)([n.logsLabels]),children:s.sort().map((e=>{const s=t[e];if(!s)return;const a=`${e}: ${s}`;return(0,M.jsx)("span",{className:(0,N.cx)([n.logsLabel]),children:(0,M.jsx)("span",{className:(0,N.cx)([n.logsLabelValue]),title:a,children:s})},e)}))})},lt=e=>({logsLabels:N.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${e.typography.size.xs};
    `,logsLabel:N.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:N.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `});var dt=n(2525),ct=n(94130),ut=n.n(ct),ht=n(30420);class pt extends O.PureComponent{constructor(){var e,t,n;super(...arguments),n={chunks:[],prevValue:""},(t="state")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return null;return{chunks:dt.ZP.parse(e.value).spans.map((t=>{return t.css?{style:(n=e.theme,s=t.css,s.split(/;\s*/).reduce(((e,t)=>{if("color:rgba(0,0,0,0.5)"===t)return{color:n.colors.text.secondary};const s=t.match(/([^:\s]+)\s*:\s*(.+)/);return s&&s[1]&&s[2]&&(e[s[1].replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=s[2]),e}),{})),text:t.text}:{text:t.text};var n,s})),prevValue:e.value}}render(){const{chunks:e}=this.state;return e.map(((e,t)=>{var n;const s=null!==(n=this.props.highlight)&&void 0!==n&&n.searchWords?(0,M.jsx)(ut(),{textToHighlight:e.text,searchWords:this.props.highlight.searchWords,findChunks:ht.Xt,highlightClassName:this.props.highlight.highlightClassName},t):e.text;return e.style?(0,M.jsx)("span",{style:e.style,"data-testid":"ansiLogLine",children:s},t):s}))}}const gt=(0,R.HE)(pt);gt.displayName="LogMessageAnsi";var mt=n(58635),ft=n(49688),vt=n(93246),bt=n(6432),xt=n(58906),yt=n(30873);const wt=e=>({logsStatsRow:N.css`
    label: logs-stats-row;
    margin: ${parseInt(e.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:N.css`
    label: logs-stats-row--active;
    color: ${e.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:N.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:N.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:N.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:N.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:N.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.text.disabled};
  `,logsStatsRowInnerBar:N.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.primary.main};
  `}),jt=e=>{let{active:t,count:n,proportion:s,value:a}=e;const i=(0,R.wW)(wt),r=`${Math.round(100*s)}%`,o={width:r},l=t?(0,N.cx)([i.logsStatsRow,i.logsStatsRowActive]):(0,N.cx)([i.logsStatsRow]);return(0,M.jsxs)("div",{className:l,children:[(0,M.jsxs)("div",{className:(0,N.cx)([i.logsStatsRowLabel]),children:[(0,M.jsx)("div",{className:(0,N.cx)([i.logsStatsRowValue]),title:a,children:a}),(0,M.jsx)("div",{className:(0,N.cx)([i.logsStatsRowCount]),children:n}),(0,M.jsx)("div",{className:(0,N.cx)([i.logsStatsRowPercent]),children:r})]}),(0,M.jsx)("div",{className:(0,N.cx)([i.logsStatsRowBar]),children:(0,M.jsx)("div",{className:(0,N.cx)([i.logsStatsRowInnerBar]),style:o})})]})};jt.displayName="LogLabelStatsRow";const St=(0,we.B)((e=>({logsStats:N.css`
      label: logs-stats;
      background: inherit;
      color: ${e.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:N.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${e.colors.border.medium};
      display: flex;
    `,logsStatsTitle:N.css`
      label: logs-stats__title;
      font-weight: ${e.typography.fontWeightMedium};
      padding-right: ${e.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:N.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:N.css`
      label: logs-stats__body;
      padding: 5px 0;
    `})));class Ct extends O.PureComponent{render(){const{label:e,rowCount:t,stats:n,value:s,theme:a,isLabel:i}=this.props,r=St(a),o=n.slice(0,5);let l=o.find((e=>e.value===s)),d=n.slice(5);const c=!l;c&&(l=d.find((e=>e.value===s)),d=d.filter((e=>e.value!==s)));const u=d.reduce(((e,t)=>e+t.count),0),h=o.reduce(((e,t)=>e+t.count),0)+u,p=u/h;return(0,M.jsxs)("div",{className:r.logsStats,"data-testid":"logLabelStats",children:[(0,M.jsx)("div",{className:r.logsStatsHeader,children:(0,M.jsxs)("div",{className:r.logsStatsTitle,children:[e,": ",h," of ",t," rows have that ",i?"label":"field"]})}),(0,M.jsxs)("div",{className:r.logsStatsBody,children:[o.map((e=>(0,M.jsx)(jt,Object.assign({},e,{active:e.value===s}),e.value))),c&&l&&(0,M.jsx)(jt,Object.assign({},l,{active:!0}),l.value),u>0&&(0,M.jsx)(jt,{count:u,value:"Other",proportion:p},"__OTHERS__")]})]})}}const kt=(0,R.HE)(Ct);kt.displayName="LogLabelStats";const Nt=(e,t)=>{let n=e.isLight?e.v1.palette.gray5:e.v1.palette.gray2;const s=xt.hoverColor(e.colors.background.secondary,e);switch(t){case vt.in.crit:case vt.in.critical:n="#705da0";break;case vt.in.error:case vt.in.err:n="#e24d42";break;case vt.in.warning:case vt.in.warn:n=e.colors.warning.main;break;case vt.in.info:n="#7eb26d";break;case vt.in.debug:n="#1f78c1";break;case vt.in.trace:n="#6ed0e0"}return{logsRowMatchHighLight:N.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${e.components.textHighlight.text}
      background-color: ${e.components.textHighlight};
    `,logsRowsTable:N.css`
      label: logs-rows;
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.bodySmall.fontSize};
      width: 100%;
    `,context:N.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:N.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${e.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${e.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${s};
      }
    `,logsRowDuplicates:N.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:N.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${n};
      }
    `,logIconError:N.css`
      color: ${e.colors.warning.main};
    `,logsRowToggleDetails:N.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:N.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:N.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:N.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:N.css`
      label: logs-row-details-table;
      border: 1px solid ${e.colors.border.medium};
      padding: 0 ${e.spacing(1)} ${e.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:N.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:N.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${e.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:N.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${e.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:N.css`
      label: logs-row-details__heading;
      font-weight: ${e.typography.fontWeightBold};
      padding: ${e.spacing(1)} 0 ${e.spacing(.5)};
    `,logDetailsValue:N.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${s};
      }
    `}};function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class It extends O.PureComponent{constructor(){super(...arguments),Ot(this,"state",{showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1}),Ot(this,"showField",(()=>{const{onClickShowDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),Ot(this,"hideField",(()=>{const{onClickHideDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),Ot(this,"filterLabel",(()=>{const{onClickFilterLabel:e,parsedKey:t,parsedValue:n}=this.props;e&&e(t,n)})),Ot(this,"filterOutLabel",(()=>{const{onClickFilterOutLabel:e,parsedKey:t,parsedValue:n}=this.props;e&&e(t,n)})),Ot(this,"showStats",(()=>{const{showFieldsStats:e}=this.state;if(!e){const e=this.props.getStats(),t=e?e.reduce(((e,t)=>e+t.count),0):0;this.setState({fieldStats:e,fieldCount:t})}this.toggleFieldsStats()}))}toggleFieldsStats(){this.setState((e=>({showFieldsStats:!e.showFieldsStats})))}hoverValueCopy(){const e=!this.state.mouseOver;this.setState({mouseOver:e})}render(){const{theme:e,parsedKey:t,parsedValue:n,isLabel:s,links:a,showDetectedFields:i,wrapLogMessage:r,onClickShowDetectedField:o,onClickHideDetectedField:l,onClickFilterLabel:d,onClickFilterOutLabel:c}=this.props,{showFieldsStats:h,fieldStats:p,fieldCount:g,mouseOver:m}=this.state,f=(e=>({noHoverBackground:N.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:N.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:N.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:N.css`
      color: ${e.colors.primary.text};
    `,hoverValueCopy:N.css`
      margin: ${e.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:N.css`
      label: wrapLine;
      white-space: pre-wrap;
    `}))(e),v=Nt(e),b=o&&l,x=d&&c,w=!s&&i&&i.includes(t)?(0,M.jsx)(u.h,{name:"eye",className:f.showingField,title:"Hide this field",onClick:this.hideField}):(0,M.jsx)(u.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return(0,M.jsxs)("tr",{className:(0,N.cx)(v.logDetailsValue,{[f.noHoverBackground]:h}),children:[(0,M.jsx)("td",{className:v.logsDetailsIcon,children:(0,M.jsx)(u.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})}),x&&s&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("td",{className:v.logsDetailsIcon,children:(0,M.jsx)(u.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})}),(0,M.jsx)("td",{className:v.logsDetailsIcon,children:(0,M.jsx)(u.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel})})]}),b&&!s&&(0,M.jsx)("td",{className:v.logsDetailsIcon,colSpan:2,children:w}),(0,M.jsx)("td",{className:v.logDetailsLabel,children:t}),(0,M.jsxs)("td",{className:(0,N.cx)(f.wordBreakAll,r&&f.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this),children:[n,m&&(0,M.jsx)(y.m,{getText:()=>n,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:f.hoverValueCopy}),null==a?void 0:a.map((e=>(0,M.jsxs)("span",{children:[" ",(0,M.jsx)(yt.k,{link:e})]},e.title))),h&&(0,M.jsx)(kt,{stats:p,label:t,value:n,rowCount:g,isLabel:s})]})]})}}const Tt=(0,R.HE)(It);Tt.displayName="LogDetailsRow";var $t=n(27843),Rt=n(35008),Pt=n.n(Rt),Dt=n(76093);const At=(e,t)=>{const n=t?N.css`
        top: -250px;
      `:N.css`
        margin-top: -250px;
        width: 75%;
      `,s=t?N.css`
        top: 100%;
      `:N.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:N.css`
      position: absolute;
      height: 250px;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      background: ${e.colors.background.primary};
      box-shadow: 0 0 10px ${e.v1.palette.black};
      border: 1px solid ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(2)};
      width: 100%;
    `,header:N.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${e.colors.background.secondary};
    `,logs:N.css`
      height: 220px;
      padding: 10px;
    `,afterContext:n,beforeContext:s}},Mt=e=>{let{row:t,rows:n,onLoadMoreContext:s,canLoadMoreRows:a}=e;const{header:i}=(0,R.wW)(At);return(0,M.jsxs)("div",{className:i,children:[(0,M.jsxs)("span",{className:N.css`
          opacity: 0.6;
        `,children:["Found ",n.length," rows."]}),(n.length>=10||n.length>10&&n.length%10!=0)&&a&&(0,M.jsx)("span",{className:N.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:s,children:"Load 10 more"})]})},Lt=e=>{let{row:t,rows:n,error:s,className:a,shouldScrollToBottom:i,canLoadMoreRows:r,onLoadMoreContext:o}=e;const{commonStyles:l,logs:d}=(0,R.wW)(At),[c,u]=(0,O.useState)(0),h=(0,O.useRef)(null);(0,O.useLayoutEffect)((()=>{const e=n.length>0&&n.length<=10;i&&e&&h.current&&u(h.current.offsetHeight)}),[i,n]);const p={row:t,rows:n,onLoadMoreContext:o,canLoadMoreRows:r};return(0,M.jsxs)("div",{className:(0,N.cx)(l,a),children:[i&&!s&&(0,M.jsx)(Mt,Object.assign({},p)),(0,M.jsx)("div",{className:d,children:(0,M.jsx)(b.$,{autoHide:!0,scrollTop:c,autoHeightMin:"210px",children:(0,M.jsxs)("div",{ref:h,children:[!s&&(0,M.jsx)(Y.a,{items:n,renderItem:e=>(0,M.jsx)("div",{className:N.css`
                        padding: 5px 0;
                      `,children:"string"==typeof e&&Dt.QX.hasAnsiCodes(e)?(0,M.jsx)(gt,{value:e}):e})}),s&&(0,M.jsx)(nt.b,{title:s})]})})}),!i&&!s&&(0,M.jsx)(Mt,Object.assign({},p))]})},Ft=e=>{let{row:t,context:n,errors:s,onOutsideClick:a,onLoadMoreContext:i,hasMoreContextRows:r,wrapLogMessage:o}=e;(0,O.useEffect)((()=>{const e=e=>{27===e.keyCode&&a()};return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[a]);const{afterContext:l,beforeContext:d}=(0,R.wW)((e=>At(e,o)));return(0,M.jsx)(P.L,{onClick:a,children:(0,M.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[n.after&&(0,M.jsx)(Lt,{rows:n.after,error:s&&s.after,row:t,className:l,shouldScrollToBottom:!0,canLoadMoreRows:!!r&&r.after,onLoadMoreContext:i}),n.before&&(0,M.jsx)(Lt,{onLoadMoreContext:i,canLoadMoreRows:!!r&&r.before,row:t,rows:n.before,error:s&&s.before,className:d})]})})};const Et=1e5;function Vt(e,t,n,s){const a=n&&n.length>0&&n[0]&&n[0].length>0&&t.length<Et,i=null!=n?n:[];if(e){const e=a?{searchWords:i,highlightClassName:s}:void 0;return(0,M.jsx)(gt,{value:t,highlight:e})}return a?(0,M.jsx)(ut(),{textToHighlight:t,searchWords:i,findChunks:ht.Xt,highlightClassName:s}):t}const zt=(0,mt.Z)(((e,t)=>{if(t)try{return JSON.stringify(JSON.parse(e),void 0,2)}catch(t){return e}return e}));class Bt extends O.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{e.stopPropagation(),this.props.onToggleContext()},(t="onContextToggle")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{row:e,theme:t,errors:n,hasMoreContextRows:s,updateLimit:a,context:i,contextIsOpen:r,showContextToggle:o,wrapLogMessage:l,prettifyLogMessage:d,onToggleContext:c}=this.props,h=Nt(t,e.logLevel),{hasAnsi:p,raw:m}=e,f=zt(m,d),v=(e=>{const t=Pt()(e.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:N.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:N.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${t};
    `,horizontalScroll:N.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:N.css`
      display: block;
      margin-left: 0px;
    `,contextButton:N.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      padding: ${e.spacing(0,0,0,.5)};
      z-index: 100;
    `}})(t);return(0,M.jsx)("td",{style:r?{position:"unset"}:void 0,className:h.logsRowMessage,children:(0,M.jsxs)("div",{className:(0,N.cx)({[v.positionRelative]:l},{[v.horizontalScroll]:!l}),children:[r&&i&&(0,M.jsx)(Ft,{row:e,context:i,errors:n,wrapLogMessage:l,hasMoreContextRows:s,onOutsideClick:c,onLoadMoreContext:()=>{a&&a()}}),(0,M.jsx)("span",{className:(0,N.cx)(v.positionRelative,{[v.rowWithContext]:r}),children:Vt(p,f,e.searchWords,h.logsRowMatchHighLight)}),!r&&(null==o?void 0:o(e))&&(0,M.jsxs)("span",{className:(0,N.cx)("log-row-context",h.context,v.contextButton),onClick:e=>e.stopPropagation(),children:[(0,M.jsx)(g.u,{placement:"top",content:"Show context",children:(0,M.jsx)(u.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})}),(0,M.jsx)(g.u,{placement:"top",content:"Copy",children:(0,M.jsx)(u.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(f))})})]})]})})}}const _t=(0,R.HE)(Bt);_t.displayName="LogRowMessage";const Wt=(0,mt.Z)(ft.MT),Ut=(0,mt.Z)(((e,t)=>{const n=Ht(e.entry),s=[...qt(e,t),...n].reduce(((e,t)=>{const n=t.value.replace(/(^")|("$)/g,""),s=`${t.key}=${n}`;return e[s]?e[s].links=[...e[s].links||[],...t.links||[]]:e[s]=t,e}),{}),a=Object.values(s);return a.sort(Zt),a})),Ht=(0,mt.Z)((e=>{if(e.length>Et)return[];const t=Wt(e);if(!t)return[];return t.getFields(e).map((e=>({key:t.getLabelFromField(e),value:t.getValueFromField(e)})))})),qt=(0,mt.Z)(((e,t)=>e.dataFrame.fields.map(((e,t)=>Object.assign({},e,{index:t}))).filter(((t,n)=>!function(e,t,n){var s;if("labels"===e.name&&e.type===$t.fS.other)return!0;if("id"===e.name)return!0;if(n.entryFieldIndex===t)return!0;if(null!==(s=e.config.custom)&&void 0!==s&&s.hidden)return!0;if(null==e.values.get(n.rowIndex))return!0;return!1}(t,n,e))).map((n=>{const s=t?t(n,e.rowIndex):[];return{key:n.name,value:n.values.get(e.rowIndex).toString(),links:s,fieldIndex:n.index}}))));function Zt(e,t){var n,s,a,i;return null===(n=e.links)||void 0===n||!n.length||null!==(s=t.links)&&void 0!==s&&s.length?null!==(a=e.links)&&void 0!==a&&a.length||null===(i=t.links)||void 0===i||!i.length?e.key>t.key?1:e.key<t.key?-1:0:1:-1}var Gt,Qt;function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Jt extends O.PureComponent{constructor(){super(...arguments),Kt(this,"getParser",(0,mt.Z)(ft.MT)),Kt(this,"getStatsForDetectedField",(e=>{const t=this.getParser(this.props.row.entry).buildMatcher(e);return(0,ft.zd)(this.props.getRows(),t)}))}render(){const{row:e,theme:t,hasError:n,onClickFilterOutLabel:s,onClickFilterLabel:a,getRows:i,showDuplicates:r,className:o,onClickShowDetectedField:l,onClickHideDetectedField:d,showDetectedFields:u,getFieldLinks:h,wrapLogMessage:p}=this.props,m=Nt(t,e.logLevel),f=(e=>({logsRowLevelDetails:N.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:N.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${e.colors.background.primary};
      }
    `}))(t),v=e.labels?e.labels:{},b=Object.keys(v).length>0,x=Ut(e,h),y=x&&x.length>0,w=(0,N.cx)(!n&&[m.logsRowLevel,f.logsRowLevelDetails]);return(0,M.jsxs)("tr",{className:(0,N.cx)(o,f.logDetails),children:[r&&(Gt||(Gt=(0,M.jsx)("td",{}))),(0,M.jsx)("td",{className:w,"aria-label":"Log level"}),(0,M.jsx)("td",{colSpan:4,children:(0,M.jsx)("div",{className:m.logDetailsContainer,children:(0,M.jsx)("table",{className:m.logDetailsTable,children:(0,M.jsxs)("tbody",{children:[b&&(0,M.jsx)("tr",{children:(0,M.jsx)("td",{colSpan:5,className:m.logDetailsHeading,"aria-label":"Log labels",children:"Log labels"})}),Object.keys(v).sort().map((e=>{const t=v[e];return(0,M.jsx)(Tt,{parsedKey:e,parsedValue:t,isLabel:!0,getStats:()=>(0,ft.lL)(i(),e),onClickFilterOutLabel:s,onClickFilterLabel:a},`${e}=${t}`)})),y&&(0,M.jsx)("tr",{children:(0,M.jsxs)("td",{colSpan:5,className:m.logDetailsHeading,"aria-label":"Detected fields",children:["Detected fields",(0,M.jsx)(g.u,{content:"Fields that are parsed from log message and detected by Grafana.",children:(0,M.jsx)(c.J,{name:"question-circle",size:"xs",className:N.css`
                            margin-left: 4px;
                          `})})]})}),x.sort().map((t=>{const{key:n,value:s,links:a,fieldIndex:i}=t;return(0,M.jsx)(Tt,{parsedKey:n,parsedValue:s,links:a,onClickShowDetectedField:l,onClickHideDetectedField:d,getStats:()=>void 0===i?this.getStatsForDetectedField(n):(0,ft.i6)(e.dataFrame.fields[i].values.toArray()),showDetectedFields:u,wrapLogMessage:p},`${n}=${s}`)})),!y&&!b&&(Qt||(Qt=(0,M.jsx)("tr",{children:(0,M.jsx)("td",{colSpan:5,"aria-label":"No details",children:"No details available"})})))]})})})})]})}}const Yt=(0,R.HE)(Jt);Yt.displayName="LogDetails";var Xt=n(25981),en=n(68633),tn=n(26222);const nn=e=>{let{getRowContext:t,row:n,children:s,logsSortOrder:a}=e;const[i,r]=(0,O.useState)(10),[o,l]=(0,O.useState)(null),[d,c]=(0,O.useState)({before:!0,after:!0}),{value:u}=(0,Xt.Z)((async()=>await(async(e,t,n,s)=>{const a=[e(t,{limit:n}),e(t,{limit:n+1,direction:"FORWARD"})],i=await Promise.all(a.map((e=>e.catch((e=>e))))),r=i.map((e=>{const n=e;if(!n.data)return[];const a=[];for(let e=0;e<n.data.length;e++){const s=(0,en.g0)(n.data[e]),i=new tn.N(s),r=i.getFieldByName("ts"),o=i.getFieldByName("id");for(let e=0;e<r.values.length;e++){if(o){if(o.values.get(e)===t.uid)continue}else if(parseInt(r.values.get(e),10)===t.timeEpochMs)continue;const n=s.fields.filter((e=>"line"===e.name))[0].values.get(e);a.push(n)}}return s===vt.UV.Ascending?a.reverse():a})),o=i.map((e=>{const t=e;return t.message?t.message:""}));return{data:s===vt.UV.Ascending?r.reverse():r,errors:s===vt.UV.Ascending?o.reverse():o}})(t,n,i,a)),[i]);return(0,O.useEffect)((()=>{u&&l((e=>{let t=!0,n=!0;if(e){const s=e.data[0],a=e.data[1],i=u.data[0],r=u.data[1];i&&s.length!==i.length||(t=!1),r&&a.length!==r.length||(n=!1)}return c({before:t,after:n}),u}))}),[u]),s({result:{before:o?o.data[0]:[],after:o?o.data[1]:[]},errors:{before:o?o.errors[0]:void 0,after:o?o.errors[1]:void 0},hasMoreContextRows:d,updateLimit:()=>r(i+10),limit:i})};class sn extends O.PureComponent{render(){const{row:e,showDetectedFields:t,getFieldLinks:n,wrapLogMessage:s}=this.props,a=Ut(e,n),i=s?"":N.css`
          white-space: nowrap;
        `,r=t.map((e=>{const t=a.find((t=>{const{key:n}=t;return n===e}));return t?`${e}=${t.value}`:null})).filter((e=>null!==e)).join(" ");return(0,M.jsx)("td",{className:i,children:r})}}const an=(0,R.HE)(sn);function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}an.displayName="LogRowMessageDetectedFields";class on extends O.PureComponent{constructor(){super(...arguments),rn(this,"state",{showContext:!1,showDetails:!1}),rn(this,"toggleContext",(()=>{this.setState((e=>({showContext:!e.showContext})))})),rn(this,"toggleDetails",(()=>{this.props.enableLogDetails&&this.setState((e=>({showDetails:!e.showDetails})))}))}renderTimeStamp(e){return(0,bt.dq)(e,{timeZone:this.props.timeZone})}renderLogRow(e,t,n,s){const{getRows:a,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,enableLogDetails:d,row:u,showDuplicates:h,showContextToggle:p,showLabels:m,showTime:f,showDetectedFields:v,wrapLogMessage:b,prettifyLogMessage:x,theme:y,getFieldLinks:w,forceEscape:j,onLogRowHover:S}=this.props,{showDetails:C,showContext:k}=this.state,O=Nt(y,u.logLevel),I=(e=>({topVerticalAlign:N.css`
      label: topVerticalAlign;
      margin-top: -${e.spacing(.9)};
      margin-left: -${e.spacing(.25)};
    `,detailsOpen:N.css`
      &:hover {
        background-color: ${xt.hoverColor(e.colors.background.primary,e)};
      }
    `,errorLogRow:N.css`
      label: erroredLogRow;
      color: ${e.colors.text.secondary};
    `}))(y),{errorMessage:T,hasError:$}=(0,ft.Mi)(u),R=(0,N.cx)(O.logsRow,{[I.errorLogRow]:$}),P=u.hasUnescapedContent&&j?Object.assign({},u,{entry:(0,ft.l3)(u.entry),raw:(0,ft.l3)(u.raw)}):u;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("tr",{className:R,onClick:this.toggleDetails,onMouseEnter:()=>{S&&S(u)},onMouseLeave:()=>{S&&S(void 0)},children:[h&&(0,M.jsx)("td",{className:O.logsRowDuplicates,children:P.duplicates&&P.duplicates>0?`${P.duplicates+1}x`:null}),(0,M.jsx)("td",{className:(0,N.cx)({[O.logsRowLevel]:!$}),children:$&&(0,M.jsx)(g.u,{content:`Error: ${T}`,placement:"right",theme:"error",children:(0,M.jsx)(c.J,{className:O.logIconError,name:"exclamation-triangle",size:"xs"})})}),d&&(0,M.jsx)("td",{title:C?"Hide log details":"See log details",className:O.logsRowToggleDetails,children:(0,M.jsx)(c.J,{className:I.topVerticalAlign,name:C?"angle-down":"angle-right"})}),f&&(0,M.jsx)("td",{className:O.logsRowLocalTime,children:this.renderTimeStamp(u.timeEpochMs)}),m&&P.uniqueLabels&&(0,M.jsx)("td",{className:O.logsRowLabels,children:(0,M.jsx)(ot,{labels:P.uniqueLabels})}),v&&v.length>0?(0,M.jsx)(an,{row:P,showDetectedFields:v,getFieldLinks:w,wrapLogMessage:b}):(0,M.jsx)(_t,{row:P,getRows:a,errors:t,hasMoreContextRows:n,updateLimit:s,context:e,contextIsOpen:k,showContextToggle:p,wrapLogMessage:b,prettifyLogMessage:x,onToggleContext:this.toggleContext})]}),this.state.showDetails&&(0,M.jsx)(Yt,{className:R,showDuplicates:h,getFieldLinks:w,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,getRows:a,row:P,wrapLogMessage:b,hasError:$,showDetectedFields:v})]})}render(){const{showContext:e}=this.state,{logsSortOrder:t,row:n,getRowContext:s}=this.props;return e?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(nn,{row:n,getRowContext:s,logsSortOrder:t,children:e=>{let{result:t,errors:n,hasMoreContextRows:s,updateLimit:a}=e;return(0,M.jsx)(M.Fragment,{children:this.renderLogRow(t,n,s,a)})}})}):this.renderLogRow()}}const ln=(0,R.HE)(on);function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ln.displayName="LogRow";class cn extends O.PureComponent{constructor(){super(...arguments),dn(this,"renderAllTimer",null),dn(this,"state",{renderAll:!1}),dn(this,"makeGetRows",(0,mt.Z)((e=>()=>e))),dn(this,"sortLogs",(0,mt.Z)(((e,t)=>(0,ft.$u)(e,t))))}componentDidMount(){const{logRows:e,previewLimit:t}=this.props,n=(e?e.length:0)<=2*t;n?this.setState({renderAll:n}):this.renderAllTimer=window.setTimeout((()=>this.setState({renderAll:!0})),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:e,showContextToggle:t,showLabels:n,showTime:s,wrapLogMessage:a,prettifyLogMessage:i,logRows:r,deduplicatedRows:o,timeZone:l,onClickFilterLabel:d,onClickFilterOutLabel:c,theme:u,enableLogDetails:h,previewLimit:p,getFieldLinks:g,logsSortOrder:m,showDetectedFields:f,onClickShowDetectedField:v,onClickHideDetectedField:b,forceEscape:x,onLogRowHover:y}=this.props,{renderAll:w}=this.state,{logsRowsTable:j}=Nt(u),S=o||r,C=r&&r.length>0,k=S?S.reduce(((e,t)=>t.duplicates?e+t.duplicates:e),0):0,N=e!==vt.Y4.none&&k>0,O=S||[],I=m?this.sortLogs(O,m):O,T=I.slice(0,p),$=I.slice(p,I.length),R=this.makeGetRows(I),P=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return(0,M.jsx)("table",{className:j,children:(0,M.jsxs)("tbody",{children:[C&&T.map(((e,r)=>(0,M.jsx)(ln,{getRows:R,getRowContext:P,row:e,showContextToggle:t,showDuplicates:N,showLabels:n,showTime:s,showDetectedFields:f,wrapLogMessage:a,prettifyLogMessage:i,timeZone:l,enableLogDetails:h,onClickFilterLabel:d,onClickFilterOutLabel:c,onClickShowDetectedField:v,onClickHideDetectedField:b,getFieldLinks:g,logsSortOrder:m,forceEscape:x,onLogRowHover:y},e.uid))),C&&w&&$.map(((e,r)=>(0,M.jsx)(ln,{getRows:R,getRowContext:P,row:e,showContextToggle:t,showDuplicates:N,showLabels:n,showTime:s,showDetectedFields:f,wrapLogMessage:a,prettifyLogMessage:i,timeZone:l,enableLogDetails:h,onClickFilterLabel:d,onClickFilterOutLabel:c,onClickShowDetectedField:v,onClickHideDetectedField:b,getFieldLinks:g,logsSortOrder:m,forceEscape:x,onLogRowHover:y},e.uid))),C&&!w&&(0,M.jsx)("tr",{children:(0,M.jsxs)("td",{colSpan:5,children:["Rendering ",I.length-p," rows..."]})})]})})}}dn(cn,"defaultProps",{previewLimit:100});const un=(0,R.HE)(cn);un.displayName="LogsRows";var hn=n(47974);const pn=e=>{let{className:t,children:n}=e;const s=gn();return(0,M.jsx)("div",{className:(0,N.cx)(s,t),children:n})},gn=(0,we.B)((()=>N.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `));var mn=n(69927),fn=n(334),vn=n(33514),bn=n(16736),xn=n(9655),yn=n(21357),wn=n(68105),jn=n(21590),Sn=n(76920),Cn=n(11549),kn=n(10814),Nn=n(89902),On=n(14402),In=n(89946),Tn=n(24497),$n=n(72767),Rn=n(66976),Pn=n(88807),Dn=n(42147),An=n(12427),Mn=n(97073),Ln=n(81691),Fn=n(75336),En=n(1315),Vn=n(65335),zn=n(89089),Bn=n(34297),_n=n(72907),Wn=n(564),Un=n(16093),Hn=n(82219),qn=n(40773),Zn=n(3218),Gn=n(50578),Qn=n(35258),Kn=n(8006),Jn=n(98817),Yn=n(1696),Xn=n(21084),es=n(15013),ts=n(26908),ns=n(32889),ss=n(83744),as=n(65678),is=n(58101),rs=n(71980),os=n(31625),ls=n(46889),ds=n(70946),cs=n(66946),us=n(34117),hs=n(68455),ps=n(28728),gs=n(70917),ms=n(34153),fs=n(68570),vs=n(54761),bs=n(64313),xs=n(37625);const ys=e=>{let{id:t,name:n,label:s,checked:a,disabled:i,description:r,onChange:o}=e;const l=(0,R.wW)(ws);return(0,M.jsxs)("label",{title:r,className:l.label,children:[(0,M.jsx)("input",{id:t,name:n,type:"radio",checked:a,disabled:i,className:l.input,onChange:()=>o&&o(t)}),s]})},ws=e=>({input:N.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${e.colors.background.canvas};
    margin: 0;
    width: ${e.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${e.spacing(2)};
    border: 1px solid ${e.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${e.v1.palette.white};
      border: 5px solid ${e.colors.primary.main};
    }

    :disabled {
      background-color: ${e.colors.action.disabledBackground} !important;
      border-color: ${e.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${e.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${e.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${e.colors.background.canvas}, 0 0 0 3px ${e.colors.primary.main};
    }
  `,label:N.css`
    font-size: ${e.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${e.spacing(2)} auto;
    gap: ${e.spacing(1)};
  `});function js(e){let{name:t,id:n,options:s,value:a,onChange:i,className:r,disabled:o,disabledOptions:l=[]}=e;const d=(0,R.wW)(Ss),c=null!=n?n:(0,xe.uniqueId)("radiogroup-list-");return(0,M.jsx)("div",{id:n,className:(0,N.cx)(d.container,r),role:"radiogroup",children:s.map(((e,n)=>{const s=`${c}-${n}`,r=a&&a===e.value,d=o||l.some((t=>t===e.value));return(0,M.jsx)(ys,{id:s,name:t,label:e.label,description:e.description,checked:r,disabled:d,onChange:()=>i&&e.value&&i(e.value)},s)}))})}const Ss=e=>({container:N.css`
    display: grid;
    gap: ${e.spacing(1)};
  `});var Cs=n(4645),ks=n(13910),Ns=n(39106),Os=n(85558),Is=n(47398),Ts=n(70800),$s=n(12310),Rs=n(29792),Ps=n(19050),Ds=n(57833),As=n(38942),Ms=n(7567),Ls=n(1129),Fs=n(78748),Es=n(92811),Vs=n(41460),zs=n(78080),Bs=n(38437),_s=n(5333),Ws=n(33073),Us=n(27565),Hs=n(28766),qs=n(13131),Zs=n(43501),Gs=n(3876),Qs=n(10487),Ks=n(53461),Js=n(29173),Ys=n(47919),Xs=n(80046),ea=n(22),ta=n(32134);const na=O.createContext({}),sa=()=>{const{data:e,dimFields:t,mapSeriesIndexToDataFrameFieldIndex:n}=(0,O.useContext)(na),s=(0,O.useCallback)((()=>{const n=t.x;let s=null;for(let t=0;t<e.fields.length;t++)if(n(e.fields[t],e,[e])){s=e.fields[t];break}return s}),[e,t]);return{dimFields:t,mapSeriesIndexToDataFrameFieldIndex:n,getXAxisField:s,alignedData:e}};var aa=n(78846),ia=n(25393),ra=n(58765),oa=n(91288);const la={SecretFormField:d.c,FormField:s.W,Select:o.Ph,AsyncSelect:o.qb,IndicatorsContainer:i.B,NoOptionsMessage:r.P,Input:a.I,Switch:l.r}},75336:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var s=n(52423),a=(n(68404),n(22163)),i=n(50191),r=n(45916);const o=(0,i.B)((e=>({enter:s.css`
      label: enter;
      opacity: 0;
    `,enterActive:s.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${e}ms ease-out;
    `,exit:s.css`
      label: exit;
      opacity: 1;
    `,exitActive:s.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:n,duration:s=250}=e,i=o(s);return(0,r.jsx)(a.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:s,classNames:i,children:n})}},1315:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var s=n(52423),a=(n(68404),n(22163)),i=n(50191),r=n(45916);const o=(0,i.B)(((e,t,n)=>({enter:s.css`
      label: enter;
      ${t}: 0;
      opacity: 0;
    `,enterActive:s.css`
      label: enterActive;
      ${t}: ${n}px;
      opacity: 1;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `,exit:s.css`
      label: exit;
      ${t}: ${n}px;
      opacity: 1;
    `,exitActive:s.css`
      label: exitActive;
      opacity: 0;
      ${t}: 0;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:n,duration:s=250,horizontal:i,size:l}=e,d=o(s,i?"width":"height",l);return(0,r.jsx)(a.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:s,classNames:d,children:n})}},13131:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var s=n(68404),a=n(49959),i=n(39571),r=n(45916);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends s.Component{constructor(e){super(e),o(this,"plotContainer",(0,s.createRef)()),o(this,"plotCanvasBBox",(0,s.createRef)()),this.state={plot:null}}reinitPlot(){var e;let{width:t,height:n,plotRef:s}=this.props;if(null===(e=this.state.plot)||void 0===e||e.destroy(),0===t&&0===n)return;this.props.config.addHook("setSize",(e=>{e.over}));const r=Object.assign({width:Math.floor(this.props.width),height:Math.floor(this.props.height)},this.props.config.getConfig());(0,i.Zp)("UPlot",!1,"Reinitializing plot",r);const o=new a.Z(r,this.props.data,this.plotContainer.current);s&&s(o),this.setState({plot:o})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;null===(e=this.state.plot)||void 0===e||e.destroy()}componentDidUpdate(e){let{plot:t}=this.state;!function(e,t){return t.width===e.width&&t.height===e.height}(e,this.props)?null==t||t.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)}):!function(e,t){return t.config===e.config}(e,this.props)?this.reinitPlot():!function(e,t){return t.data===e.data}(e,this.props)?null==t||t.setData(this.props.data):function(e,t){let n=e.timeRange,s=t.timeRange;return n===s||s.from.valueOf()===n.from.valueOf()&&s.to.valueOf()===n.to.valueOf()}(e,this.props)||null==t||t.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()})}render(){return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},43501:(e,t,n)=>{"use strict";n.d(t,{l:()=>m});var s=n(68404),a=n(32934),i=n(31319),r=n(34784),o=n(43917),l=n(27864),d=n(16755),c=n(30733),u=n(38914),h=n(45916);const p=["data","config","placement","calcs","displayMode"];const g=e=>null==e?"-":e.toFixed(1),m=s.memo((e=>{let{data:t,config:n,placement:s,calcs:m,displayMode:f}=e,v=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const b=(0,d.l4)(),x=n.getSeries().map((e=>{var s,d,c,u;const h=e.props,p=h.dataFrameFieldIndex,f=n.getAxisPlacement(e.props.scaleKey);if(!p)return;const v=null===(s=t[p.frameIndex])||void 0===s?void 0:s.fields[p.fieldIndex];if(!v||null!==(d=v.config.custom)&&void 0!==d&&null!==(c=d.hideFrom)&&void 0!==c&&c.legend)return;const x=(0,a.C)(v,t[p.frameIndex],t),y=(0,i.YO)(v,b).color;return{disabled:!(null===(u=h.show)||void 0===u||u),fieldIndex:p,color:y,label:x,yAxis:f===l.LB.Left?1:2,getDisplayValues:()=>{var e;if(null==m||!m.length)return[];const t=null!==(e=v.display)&&void 0!==e?e:g;let n=null;const s=(0,r.Kx)({field:v,reducers:m});return m.map((e=>{const a=r.TB.get(e);let i=t;return a.id===r.gz.diffperc&&(i=(0,o.U)({field:Object.assign({},v,{config:Object.assign({},v.config,{unit:"percent"})}),theme:b})),a.id!==r.gz.count&&a.id!==r.gz.changeCount&&a.id!==r.gz.distinctCount||(n||(n=(0,o.U)({field:Object.assign({},v,{config:Object.assign({},v.config,{unit:"none"})}),theme:b})),i=n),Object.assign({},i(s[e]),{title:a.name,description:a.description})}))},getItemKey:()=>`${x}-${p.frameIndex}-${p.fieldIndex}`}})).filter((e=>void 0!==e));return(0,h.jsx)(c.AY.Legend,Object.assign({placement:s},v,{children:(0,h.jsx)(u.l,{placement:s,items:x,displayMode:f,sortBy:v.sortBy,sortDesc:v.sortDesc})}))}));m.displayName="PlotLegend"},33073:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var s=n(27864);const a={drawStyle:[{label:"Lines",value:s.l8.Line},{label:"Bars",value:s.l8.Bars},{label:"Points",value:s.l8.Points}],lineInterpolation:[{description:"Linear",value:s.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:s.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:s.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:s.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:s.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:s.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:s.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:s.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:s.Jp.Always},{label:"Never",value:s.Jp.Never}],axisPlacement:[{label:"Auto",value:s.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:s.LB.Left},{label:"Right",value:s.LB.Right},{label:"Hidden",value:s.LB.Hidden}],fillGradient:[{label:"None",value:s.FI.None},{label:"Opacity",value:s.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:s.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:s.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:s.o0.None},{label:"Normal",value:s.o0.Normal},{label:"100%",value:s.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:s.i3.Off},{label:"As lines",value:s.i3.Line},{label:"As lines (dashed)",value:s.i3.Dashed},{label:"As filled regions",value:s.i3.Area},{label:"As filled regions and lines",value:s.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:s.i3.DashedAndArea}]}},28766:(e,t,n)=>{"use strict";n.d(t,{ff:()=>h,gD:()=>u,mr:()=>v});var s=n(55343),a=n(95369),i=n(74333),r=n(6432),o=n(27864),l=n(43456),d=n(2855),c=n(50410);const u=12;class h extends d.L{merge(e){this.props.size=(0,c.V)("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===o.LB.Auto&&(this.props.placement=e.placement)}calculateSpace(e,t,n,s,a){const i=e.axes[t],r=e.scales[i.scale];if(2!==i.side||!r)return 30;if(r.time){const i=v(e,[n],t,40,(s-n)/(a/40));return(0,l.X1)(i[0],u).width+18}return 40}calculateAxisSize(e,t,n){const s=e.axes[n];let a=s.ticks.size;if(2===s.side)a+=s.gap+u;else if(null!=t&&t.length){let n=t.reduce(((e,t)=>Math.max(e,(0,l.X1)(t,u).width)),0);const i=Math.min(.4*e.width,n);a+=s.gap+s.labelGap+i}return Math.ceil(a)}getConfig(){let{scaleKey:e,label:t,show:n=!0,placement:i=o.LB.Auto,grid:r={show:!0},ticks:l,space:d,filter:c,gap:h=5,formatValue:p,splits:g,values:m,incrs:f,isTime:x,timeZone:y,theme:w,tickLabelRotation:j,size:S,color:C,border:k,decimals:N,distr:O=o.wf.Linear}=this.props;const I=`${u}px ${w.typography.fontFamily}`,T=w.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,s.br)(e)&&(g=[0,1]),0===N&&O===o.wf.Linear&&(c=(e,t)=>t.map((e=>Number.isInteger(e)?e:null)));let $={scale:e,show:n,stroke:null!=C?C:w.colors.text.primary,side:b(i),font:I,size:null!=S?S:(e,t,n)=>this.calculateAxisSize(e,t,n),rotate:j,gap:h,labelGap:0,grid:{show:r.show,stroke:T,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:T,width:1/devicePixelRatio,size:4},l),splits:g,values:m,space:null!=d?d:(e,t,n,s,a)=>this.calculateSpace(e,t,n,s,a),filter:c,incrs:f};return null!=k&&($.border=k),null!=t&&t.length>0&&($.label=t,$.labelSize=u+8,$.labelFont=I,$.labelGap=8),m?$.values=m:x?$.values=v:p&&($.values=(e,t,n,s,i)=>{let r=(0,a.d)((0,a.O)(i,6));return t.map((e=>p(e,r>0?r:void 0)))}),$.timeZone=y,$}}const p=1e3,g=6e4,m=864e5,f=31536e6;function v(e,t,n,s,a){var o,l;const d=e.axes[n].timeZone,c=e.scales.x,u=(null!==(o=null==c?void 0:c.max)&&void 0!==o?o:0)-(null!==(l=null==c?void 0:c.min)&&void 0!==l?l:0),h=Math.round(f/m)*m,v=Math.round(a/m)*m;let b=i.U6.interval.year;return a<p?b=i.U6.interval.millisecond:a<=g?b=i.U6.interval.second:u<=m?b=i.U6.interval.minute:a<=m?b=i.U6.interval.hour:u<f?b=i.U6.interval.day:v===h?b=i.U6.interval.year:a<=f&&(b=i.U6.interval.month),t.map((e=>null==e?"":(0,r.dq)(e,{format:b,timeZone:d})))}function b(e){switch(e){case o.LB.Top:return 0;case o.LB.Right:return 1;case o.LB.Bottom:return 2;case o.LB.Left:}return 3}},27565:(e,t,n)=>{"use strict";n.d(t,{U:()=>j});var s=n(82897),a=n(49959),i=n(12717),r=n(25214),o=n(27864),l=n(39571),d=n(28766),c=n(50410),u=n(663),h=n(66876),p=n(2855),g=n(44151);class m extends p.L{getConfig(){const{facets:e,drawStyle:t,pathBuilder:n,pointsBuilder:s,pointsFilter:i,lineInterpolation:r,lineWidth:l,lineStyle:d,barAlignment:c,barWidthFactor:u,barMaxWidth:h,showPoints:p,pointSize:g,scaleKey:m,pxAlign:v,spanNulls:b,show:x=!0}=this.props;let y={},w=this.getLineColor();if(y.stroke=w,null!=n)y.paths=n,y.width=l;else if(t===o.l8.Points)y.paths=()=>null;else if(null!=t){var j;if(y.width=l,d&&"solid"!==d.fill)"dot"===d.fill&&(y.cap="round"),y.dash=null!==(j=d.dash)&&void 0!==j?j:[10,10];y.paths=(e,n,s,i)=>{let l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.6,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:200;const r=a.Z.paths;f||(f={linear:r.linear(),smooth:r.spline(),stepBefore:r.stepped({align:-1,extend:!0}),stepAfter:r.stepped({align:1,extend:!0})});if(e===o.l8.Bars){let e=`bars|${n}|${s}|${i}`;return f[e]||(f[e]=r.bars({size:[s,i],align:n})),f[e]}if(e===o.l8.Line){if(t===o.KC.StepBefore)return f.stepBefore;if(t===o.KC.StepAfter)return f.stepAfter;if(t===o.KC.Smooth)return f.smooth}return f.linear}(t,r,c,u,h);return l(e,n,s,i)}}const S="string"==typeof w?w:(e,t)=>e.series[t]._stroke,C={points:{stroke:S,fill:S,size:!g||g<l?void 0:g,filter:i}};return null!=s?C.points.show=s:t===o.l8.Points?C.points.show=!0:p===o.Jp.Auto?t===o.l8.Bars&&(C.points.show=!1):p===o.Jp.Never?C.points.show=!1:p===o.Jp.Always&&(C.points.show=!0),Object.assign({scale:m,facets:e,spanGaps:"number"!=typeof b&&b,value:()=>"",pxAlign:v,show:x,fill:this.getFill()},y,C)}getLineColor(){const{lineColor:e,gradientMode:t,colorMode:n,thresholds:s,theme:a,hardMin:i,hardMax:r,softMin:l,softMax:d,dynamicSeriesColor:c}=this.props;return t===o.FI.None&&c?(t,n)=>{var s,a;return null!==(s=null!==(a=c(n))&&void 0!==a?a:e)&&void 0!==s?s:u.R}:t===o.FI.Scheme&&(null==n?void 0:n.id)!==u.S.Fixed?(0,g.P2)(1,a,n,s,i,r,l,d):null!=e?e:u.R}getFill(){const{lineColor:e,fillColor:t,gradientMode:n,fillOpacity:s,colorMode:a,thresholds:i,theme:r,hardMin:l,hardMax:d,softMin:c,softMax:p,dynamicSeriesColor:m}=this.props;if(t)return t;const f=null!=n?n:o.FI.None,v=(null!=s?s:0)/100;if(f===o.FI.None&&m&&v>0)return(e,t)=>{let n=e.series[t]._stroke;return h.alpha(null!=n?n:"",v)};switch(f){case o.FI.Opacity:return(0,g.DT)(null!=t?t:e,v);case o.FI.Hue:return(0,g.oN)(null!=t?t:e,v,r);case o.FI.Scheme:if((null==a?void 0:a.id)!==u.S.Fixed)return(0,g.P2)(v,r,a,i,l,d,c,p);default:if(v>0)return h.alpha(null!=e?e:"",v)}}}let f;var v=n(35008),b=n.n(v),x=n(87602);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={drag:{setScale:!1},points:{size:(e,t)=>2*e.series[t].points.size,width:(e,t,n)=>n/4},focus:{prox:30}};class j{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Ys;y(this,"series",[]),y(this,"axes",{}),y(this,"scales",[]),y(this,"bands",[]),y(this,"stackingGroups",[]),y(this,"cursor",void 0),y(this,"select",void 0),y(this,"hasLeftAxis",!1),y(this,"hooks",{}),y(this,"tz",void 0),y(this,"sync",!1),y(this,"mode",1),y(this,"frames",void 0),y(this,"thresholds",{}),y(this,"tooltipInterpolator",void 0),y(this,"padding",void 0),y(this,"prepData",void 0),y(this,"scaleKeys",["",""]),y(this,"tzDate",(e=>{let t=new Date(e);return this.tz?a.Z.tzDate(t,this.tz):t})),this.tz=null===(e=(0,r.Pr)(t,Date.now()))||void 0===e?void 0:e.ianaName}addHook(e,t){(0,l.Zp)("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",function(e){const t=e.config.mode===o.i3.Dashed||e.config.mode===o.i3.DashedAndArea?[10,10]:null;function n(e,n,s,a){let i=e.ctx,r=0;for(let e=0;e<s.length;e++)if("transparent"===s[e].color){r=e;break}i.lineWidth=2,t&&i.setLineDash(t);for(let t=1;t<s.length;t++){const o=s[t];let l;l=r>=t&&t>0?b()(a.visualization.getColorByName(s[t-1].color)):b()(a.visualization.getColorByName(o.color)),1===l.getAlpha()&&l.setAlpha(.7);let d=Math.round(e.bbox.left),c=Math.round(e.valToPos(o.value,n,!0)),u=Math.round(e.bbox.left+e.bbox.width),h=Math.round(e.valToPos(o.value,n,!0));i.beginPath(),i.moveTo(d,c),i.lineTo(u,h),i.strokeStyle=l.toString(),i.stroke()}}function s(e,t,n,s){let a=e.ctx,i=(0,g.KV)(e,t,n.map((e=>{let t=b()(s.visualization.getColorByName(e.color));return 1===t.getAlpha()&&t.setAlpha(.15),[e.value,t.toString()]})),!0);a.fillStyle=i,a.fillRect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height)}const{scaleKey:a,thresholds:i,theme:r,config:l,hardMin:d,hardMax:c,softMin:u,softMax:h}=e;return e=>{const t=e.ctx,{min:p,max:m}=e.scales.x,{min:f,max:v}=e.scales[a];if(null==p||null==m||null==f||null==v)return;let{steps:b,mode:y}=i;if(y===x.H.Percentage){let[t,n]=(0,g.A9)(e,a,d,c,u,h),s=n-t;b=b.map((e=>Object.assign({},e,{value:t+s*(e.value/100)})))}switch(t.save(),l.mode){case o.i3.Line:case o.i3.Dashed:n(e,a,b,r);break;case o.i3.Area:s(e,a,b,r);break;case o.i3.LineAndArea:case o.i3.DashedAndArea:s(e,a,b,r),n(e,a,b,r)}t.restore()}}(e)))}addAxis(e){var t,n;e.placement=null!==(t=e.placement)&&void 0!==t?t:o.LB.Auto,e.grid=null!==(n=e.grid)&&void 0!==n?n:{};let s=e.scaleKey;var a;"x"===s&&(s+=null!==(a=e.timeZone)&&void 0!==a?a:"");this.axes[s]?this.axes[s].merge(e):(e.placement===o.LB.Auto&&(e.placement=this.hasLeftAxis?o.LB.Right:o.LB.Left),e.placement===o.LB.Left&&(this.hasLeftAxis=!0),e.placement===o.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[s]=new d.ff(e))}getAxisPlacement(e){var t;const n=this.axes[e];return null!==(t=null==n?void 0:n.props.placement)&&void 0!==t?t:o.LB.Left}setCursor(e){this.cursor=(0,s.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new m(e))}getSeries(){return this.series}addScale(e){const t=this.scales.find((t=>t.props.scaleKey===e.scaleKey));t?t.merge(e):this.scales.push(new c.I(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=t=>(this.frames=t,e(t,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){var e=this;const t=Object.assign({},l.qt,{mode:this.mode,series:[2===this.mode?null:{value:()=>""}]});t.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map((e=>e.getConfig())),t.series=[...t.series,...this.series.map((e=>e.getConfig()))],t.scales=this.scales.reduce(((e,t)=>Object.assign({},e,t.getConfig())),{}),t.hooks=this.hooks,t.select=this.select;const n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(n,s)=>{let a=n.series[s].points._stroke;if("string"!=typeof a){let t=e.frames[0].fields[s];a=t.display(t.values.get(n.cursor.idxs[s])).color}return a+t}};return t.cursor=(0,s.merge)({},w,{points:{stroke:n("80"),fill:n()}},this.cursor),t.tzDate=this.tzDate,Array.isArray(this.padding)&&(t.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach((e=>{(0,l.Kq)(e).forEach((e=>{this.addBand(e)}))})),this.bands.length&&(t.bands=this.bands),t}ensureNonOverlappingAxes(e){const t=e.find((e=>"x"===e.props.scaleKey)),n=e.filter((e=>{var t;return void 0===(null===(t=e.props.grid)||void 0===t?void 0:t.show)})),s=n.findIndex((e=>e.props.placement===o.LB.Left||e.props.placement===o.LB.Right||e.props.placement===o.LB.Bottom&&e!==t));for(let e=0;e<n.length;e++)n[e]===t||e===s?n[e].props.grid.show=!0:n[e].props.grid.show=!1;return e}}},50410:(e,t,n)=>{"use strict";n.d(t,{I:()=>l,V:()=>d});var s=n(49959),a=n(37800),i=n(55343),r=n(27864),o=n(2855);class l extends o.L{merge(e){this.props.min=d("min",this.props.min,e.min),this.props.max=d("max",this.props.max,e.max)}getConfig(){var e,t,n;let{isTime:o,scaleKey:l,min:d,max:c,softMin:u,softMax:h,range:p,direction:g,orientation:m,centeredZero:f,decimals:v}=this.props;const b=this.props.distribution,x=o?{}:{distr:b===r.wf.Symlog?4:b===r.wf.Log?3:b===r.wf.Ordinal?2:1,log:b===r.wf.Log||b===r.wf.Symlog?null!==(e=this.props.log)&&void 0!==e?e:2:void 0,asinh:b===r.wf.Symlog?null!==(t=this.props.linearThreshold)&&void 0!==t?t:1:void 0};const y={min:{pad:.1,hard:null!=d?d:-1/0,soft:u||0,mode:null==u?3:1},max:{pad:.1,hard:null!=c?c:1/0,soft:h||0,mode:null==h?3:1}};let w=null==u&&null!=d,j=null==h&&null!=c,S=w&&j;let C=!o&&!S;return(0,i.br)(l)&&(C=!1,p=[0,1]),{[l]:Object.assign({time:o,auto:C,range:null!==(n=p)&&void 0!==n?n:(e,t,n,i)=>{var r;const o=e.scales[i];let l=[t,n];if(!S&&null==t&&null==n)return l;let u=null!==(r=o.log)&&void 0!==r?r:10;if(1===o.distr||2===o.distr||4===o.distr){if(f){let e=Math.abs(t),s=Math.abs(n),a=Math.max(e,s);t=-a,n=a}l=4===o.distr?s.Z.rangeAsinh(t,n,u,!0):s.Z.rangeNum(w?d:t,j?c:n,y)}else 3===o.distr&&(l=s.Z.rangeLog(t,n,u,!0));if(0===v)if(1===o.distr||2===o.distr)l[0]=(0,a.mB)(l[0],1),l[1]=(0,a.UO)(l[1],1);else if(3===o.distr){let e=2===o.log?Math.log2:Math.log10;if(l[0]<=1)l[0]=1;else{let t=Math.floor(e(l[0]));l[0]=u**t}let t=Math.ceil(e(l[1]));l[1]=u**t,l[0]===l[1]&&(l[1]*=u)}else 4===o.distr&&(l[0]=(0,a.mB)(l[0],1),l[1]=(0,a.UO)(l[1],1));return w&&(l[0]=d),j&&(l[1]=c),l[0]>=l[1]&&(l[0]=3===o.distr?1:0,l[1]=100),l},dir:g,ori:m},x)}}}function d(e,t,n){return!(null==t)?!(null==n)?"min"===e?t<n?t:n:t>n?t:n:t:n}},44151:(e,t,n)=>{"use strict";n.d(t,{A9:()=>m,DT:()=>u,KV:()=>g,P2:()=>f,oN:()=>h});var s=n(35008),a=n.n(s),i=n(66876),r=n(663),o=n(87602),l=n(27864),d=n(43456);function c(e,t,n){let s=0,a=0,i=0,r=0;return e===p.Down?(a=t.top,r=t.top+t.height):e===p.Left?(s=t.left+t.width,i=t.left):e===p.Up?(a=t.top+t.height,r=t.top):e===p.Right&&(s=t.left,i=t.left+t.width),n.createLinearGradient(s,a,i,r)}function u(e,t){return(n,s)=>{const a=(0,d.AE)(),r=c(n.scales.x.ori===l.wN.Horizontal?p.Down:p.Left,n.bbox,a);return r.addColorStop(0,i.alpha(e,t)),r.addColorStop(1,i.alpha(e,0)),r}}function h(e,t,n){return(s,i)=>{const r=(0,d.AE)(),o=c(s.scales.x.ori===l.wN.Horizontal?p.Down:p.Left,s.bbox,r),u=a()(e).spin(-15),h=a()(e).spin(15);return n.isDark?(o.addColorStop(0,h.lighten(10).setAlpha(t).toString()),o.addColorStop(1,u.darken(10).setAlpha(t).toString())):(o.addColorStop(0,h.lighten(10).setAlpha(t).toString()),o.addColorStop(1,u.setAlpha(t).toString())),o}}let p;function g(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.scales[t],i=null,r=null;for(let e=0;e<n.length;e++){let t=n[e][0];if((t<=a.min||null==i)&&(i=e),r=e,t>=a.max)break}if(i===r)return n[i][1];let o=n[i][0],c=n[r][0];o===-1/0&&(o=a.min),c===1/0&&(c=a.max);let u,h,p,g,m=Math.round(e.valToPos(o,t,!0)),f=Math.round(e.valToPos(c,t,!0)),v=m-f;if(0===v)return n[r][1];e.scales.x.ori===l.wN.Horizontal?(u=p=0,h=m,g=f):(h=g=0,u=m,p=f);let b,x=(0,d.AE)(),y=x.createLinearGradient(u,h,p,g);for(let a=i;a<=r;a++){let o=n[a],l=(m-(a===i?m:a===r?f:Math.round(e.valToPos(o[0],t,!0))))/v;s&&a>i&&y.addColorStop(l,b),y.addColorStop(l,b=o[1])}return y}function m(e,t,n,s,a,i){var r,o;let l=null!==(r=null!=n?n:a)&&void 0!==r?r:null,d=null!==(o=null!=s?s:i)&&void 0!==o?o:null;if(null==l||null==d){var c,u,h,p;let[n,s]=function(e,t){let n=e.scales[t],s=1/0,a=-1/0;return e.series.forEach(((n,i)=>{if(n.show&&n.scale===t)if(null==n.min){let t=e.data[i];for(let e=0;e<t.length;e++)null!=t[e]&&(s=Math.min(s,t[e]),a=Math.max(a,t[e]))}else s=Math.min(s,n.min),a=Math.max(a,n.max)})),a===s&&(s=n.min,a=n.max),[s,a]}(e,t);l=null!==(c=null!==(u=l)&&void 0!==u?u:n)&&void 0!==c?c:0,d=null!==(h=null!==(p=d)&&void 0!==p?p:s)&&void 0!==h?h:100}return[l,d]}function f(e,t,n,s,a,l,d,c){if(!n)throw Error("Missing colorMode required for color scheme gradients");if(!s)throw Error("Missing thresholds required for color scheme gradients");return(u,h)=>{let p=u.series[h].scale,f="";if(n.id===r.S.Thresholds)if(s.mode===o.H.Absolute){f=g(u,p,s.steps.map((n=>[n.value,i.alpha(t.visualization.getColorByName(n.color),e)])),!0)}else{const[n,r]=m(u,p,a,l,d,c),o=r-n;f=g(u,p,s.steps.map((s=>[n+o*(s.value/100),i.alpha(t.visualization.getColorByName(s.color),e)])),!0)}else if(n.getColors){const s=n.getColors(t),[r,o]=m(u,p,a,l,d,c),h=o-r;f=g(u,p,s.map(((n,a)=>[r+h*(a/(s.length-1)),i.alpha(t.visualization.getColorByName(n),e)])),!1)}return f}}!function(e){e[e.Right=0]="Right",e[e.Up=1]="Up",e[e.Left=2]="Left",e[e.Down=3]="Down"}(p||(p={}))},3876:(e,t,n)=>{"use strict";n.d(t,{T:()=>l});var s=n(68404),a=n(62124),i=n(10487),r=n(53461),o=n(45916);function l(e){let{id:t,events:n,renderEventMarker:l,mapEventToXYCoords:d,config:c}=e;const u=(0,s.useRef)(),[h,p]=(0,s.useState)(0),g=(0,a.Z)();(0,s.useLayoutEffect)((()=>{c.addHook("init",(e=>{u.current=e})),c.addHook("draw",(()=>{g()&&p((e=>e+1))}))}),[c,p]);const m=(0,s.useMemo)((()=>{const e=[];if(!u.current||0===n.length)return e;for(let a=0;a<n.length;a++){const r=n[a];for(let n=0;n<r.length;n++){const o=d(r,{fieldIndex:n,frameIndex:a});o&&e.push((0,s.createElement)(i.J,Object.assign({},o,{key:`${t}-marker-${a}-${n}`}),l(r,{fieldIndex:n,frameIndex:a})))}}return(0,o.jsx)(o.Fragment,{children:e})}),[n,l,h]);return u.current?(0,o.jsx)(r.K,{left:u.current.bbox.left/window.devicePixelRatio,top:u.current.bbox.top/window.devicePixelRatio,children:m}):null}},10487:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});n(68404);var s=n(45916);const a=e=>{let{x:t,y:n,children:a}=e;return(0,s.jsx)("div",{style:{position:"absolute",top:`${n}px`,left:`${t}px`},children:a})}},53461:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var s=n(52423),a=n(68404),i=n(45916);const r=e=>{let{children:t,left:n,top:r}=e;const o=(0,a.useMemo)((()=>s.css`
      position: absolute;
      overflow: visible;
      left: ${n}px;
      top: ${r}px;
    `),[n,r]);return(0,i.jsx)("div",{className:o,children:t})}},80046:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var s=n(82897),a=n(68404);const i=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),r=e=>{let t=e.root.closest("[tabindex]"),n=new Set,a=null,r=null;if(!t)return;const o=t=>{var i;if(0===n.size||!e)return void(r=null);const l=.1*(t-(null!==(i=r)&&void 0!==i?i:t));let d=0,c=0;n.has("ArrowUp")&&(c-=l),n.has("ArrowDown")&&(c+=l),n.has("ArrowLeft")&&(d-=l),n.has("ArrowRight")&&(d+=l),n.has("Shift")&&(d*=2,c*=2),((t,n)=>{const{cursor:a}=e;if(void 0===a.left||void 0===a.top)return;const{width:i,height:r}=e.over.style,[o,l]=[Math.floor(parseFloat(i)),Math.floor(parseFloat(r))];e.setCursor({left:(0,s.clamp)(a.left+t,0,o),top:(0,s.clamp)(a.top+n,0,l)})})(d,c);const{cursor:u}=e;if(n.has(" ")&&u){var h;const t=Number(e.over.style.height.slice(0,-2));e.setSelect({left:u.left<a?u.left:a,top:0,width:Math.abs(u.left-(null!==(h=a)&&void 0!==h?h:u.left)),height:t},!1)}r=t,window.requestAnimationFrame(o)},l=t=>{if("Tab"===t.key)return void e.setCursor({left:-5,top:-5});if(!i.has(t.key))return;t.preventDefault(),t.stopPropagation();if(!n.has(t.key)){const s=0===n.size;n.add(t.key),a=" "===t.key&&null===a?e.cursor.left:a,s&&window.requestAnimationFrame(o)}},d=t=>{i.has(t.key)&&(n.delete(t.key)," "===t.key&&(t.preventDefault(),t.stopPropagation(),e.setSelect(e.select),a=null))},c=()=>{var n;if(null===(n=t)||void 0===n||!n.matches(":focus-visible"))return;const s=parseFloat(e.over.style.width),a=parseFloat(e.over.style.height);e.setCursor({left:s/2,top:a/2})},u=()=>{r=null,a=null,n.clear(),e.setSelect({left:0,top:0,width:0,height:0},!1)};t.addEventListener("keydown",l),t.addEventListener("keyup",d),t.addEventListener("focus",c),t.addEventListener("blur",u);(e.hooks.destroy??=[]).push((()=>{var e,n,s,a;null===(e=t)||void 0===e||e.removeEventListener("keydown",l),null===(n=t)||void 0===n||n.removeEventListener("keyup",d),null===(s=t)||void 0===s||s.removeEventListener("focus",c),null===(a=t)||void 0===a||a.removeEventListener("blur",u),t=null}))},o=e=>{let{config:t}=e;return(0,a.useLayoutEffect)((()=>t.addHook("init",r)),[t]),null}},47919:(e,t,n)=>{"use strict";n.d(t,{_:()=>w,i:()=>y});var s=n(68404),a=n(62124),i=n(60053),r=n(43917),o=n(663),l=n(32934),d=n(55343),c=n(27843),u=n(12925),h=n(27864),p=n(16755),g=n(48717),m=n(62335),f=n(1700),v=n(39571),b=n(45916);const x=["mode","sortOrder","sync","timeZone","config","renderTooltip"];const y=e=>{let{mode:t=h.f3.Single,sortOrder:n=h.As.None,sync:y,timeZone:j,config:S,renderTooltip:C}=e,k=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,x);const N=(0,s.useRef)(),O=(0,p.l4)(),[I,T]=(0,s.useState)(null),[$,R]=(0,s.useState)(null),[P,D]=(0,s.useState)([]),[A,M]=(0,s.useState)(null),[L,F]=(0,s.useState)(!1),E=(0,a.Z)();if((0,s.useEffect)((()=>{(0,v.Zp)("TooltipPlugin",!0,`Focused series: ${I}, focused point: ${$}`)}),[$,I]),(0,s.useLayoutEffect)((()=>{let e;const t=()=>{var e;E()&&(F(!0),null===(e=N.current)||void 0===e||e.root.classList.add("plot-active"))},n=()=>{var e;E()&&(M(null),F(!1),null===(e=N.current)||void 0===e||e.root.classList.remove("plot-active"))};S.addHook("syncRect",((t,n)=>e=n)),S.addHook("init",(e=>{var s,a;N.current=e,null===(s=e.root.parentElement)||void 0===s||s.addEventListener("focus",t),e.over.addEventListener("mouseenter",t),null===(a=e.root.parentElement)||void 0===a||a.addEventListener("blur",n),e.over.addEventListener("mouseleave",n),y&&y()===i.m.Crosshair&&e.root.classList.add("shared-crosshair")}));const s=S.getTooltipInterpolator();return s?S.addHook("setCursor",(t=>{s(T,R,(n=>{if(n)return void M(null);if(!e)return;const{x:s,y:a}=w(t,e);void 0!==s&&void 0!==a&&M({x:s,y:a})}),t)})):(S.addHook("setLegend",(e=>{E()&&(R(e.legend.idx),D(e.legend.idxs.slice()))})),S.addHook("setCursor",(t=>{if(!e||!E())return;const{x:n,y:s}=w(t,e);M(void 0!==n&&void 0!==s?{x:n,y:s}:null)})),S.addHook("setSeries",((e,t)=>{E()&&T(t)}))),()=>{var e,s;(M(null),N.current)&&(N.current.over.removeEventListener("mouseleave",n),N.current.over.removeEventListener("mouseenter",t),null===(e=N.current.root.parentElement)||void 0===e||e.removeEventListener("focus",t),null===(s=N.current.root.parentElement)||void 0===s||s.removeEventListener("blur",n))}}),[S,M,F,R,D]),null===$||!L&&y&&y()===i.m.Crosshair)return null;let V=k.data.fields[0];if(!V)return null;const z=V.display||(0,r.U)({field:V,timeZone:j,theme:O});let B=null,_=z(V.values.get($)).text;if(C)B=C(k.data,I,$);else{if(t===h.f3.Single&&null!==I){var W;const e=k.data.fields[I];if(!e)return null;const t=null!==(W=null==P?void 0:P[I])&&void 0!==W?W:$;_=z(V.values.get(t)).text;const n=(e.display||(0,r.U)({field:e,timeZone:j,theme:O}))(e.values.get(t));B=(0,b.jsx)(m.c,{series:[{color:n.color||o.R,label:(0,l.C)(e,k.data,k.frames),value:n?(0,d.zc)(n):null}],timestamp:_})}if(t===h.f3.Multi){let e=[];const t=k.data,s=t.fields,a=[];for(let n=0;n<s.length;n++){var U,H,q,Z;const s=t.fields[n];if(!s||s===V||s.type===c.fS.time||s.type!==c.fS.number||null!==(U=s.config.custom)&&void 0!==U&&null!==(H=U.hideFrom)&&void 0!==H&&H.tooltip||null!==(q=s.config.custom)&&void 0!==q&&null!==(Z=q.hideFrom)&&void 0!==Z&&Z.viz)continue;const i=k.data.fields[n].values.get(P[n]),r=s.display(i);a.push(i),e.push({color:r.color||o.R,label:(0,l.C)(s,t,k.frames),value:r?(0,d.zc)(r):null,isActive:I===n})}if(n!==h.As.None){const t=[...e],s=u.sortValues(n);e.sort(((e,n)=>{const i=t.indexOf(e),r=t.indexOf(n);return s(a[i],a[r])}))}B=(0,b.jsx)(m.c,{series:e,timestamp:_})}}return(0,b.jsx)(g.h_,{children:B&&A&&(0,b.jsx)(f.S,{position:{x:A.x,y:A.y},offset:{x:10,y:10},children:B})})};function w(e,t){let n,s;const a=e.cursor.left||0,i=e.cursor.top||0;if(function(e,t){let{left:n,top:s}=e;return void 0!==n&&void 0!==s&&(n<0||n>t.width||s<0||s>t.height)}(e.cursor,t)){const r=e.posToIdx(a);if(i<0||i>t.height){let i=(0,v.ah)(e,r);i&&(s=t.top+i,a>=0&&a<=t.width&&(n=t.left+e.valToPos(e.data[0][e.posToIdx(a)],e.series[0].scale)))}}else n=t.left+a,s=t.top+i;return{x:n,y:s}}},29173:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var s=n(68404),a=n(39571);const i=e=>{let{onZoom:t,config:n}=e;const[i,r]=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(i){if((0,a.Zp)("ZoomPlugin",!1,"selected",i),i.bbox.width<5)return;t({from:i.min,to:i.max})}}),[i]),(0,s.useLayoutEffect)((()=>{n.addHook("setSelect",(e=>{const t=e.posToVal(e.select.left,"x"),n=e.posToVal(e.select.left+e.select.width,"x");r({min:t,max:n,bbox:{left:e.bbox.left/window.devicePixelRatio+e.select.left,top:e.bbox.top/window.devicePixelRatio,height:e.bbox.height/window.devicePixelRatio,width:e.select.width}}),e.setSelect({left:0,width:0},!1)}))}),[n]),null}},2855:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});class s{constructor(e){this.props=e}}},39571:(e,t,n)=>{"use strict";n.d(t,{Bj:()=>g,Kq:()=>h,Zp:()=>v,ah:()=>m,i7:()=>p,qt:()=>c});var s=n(27843),a=n(66247),i=n(27864),r=n(987),o=n(44385),l=n(78846);const d=(e,t,n)=>{let s=t%2?n[0]||n[2]:n[1]||n[3];return n[t]||!s?0:8},c={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[d,d,d,d],series:[],hooks:{}};var u;function h(e){let t=[],{series:n,dir:s}=e,a=n.length-1,i=n.slice().reverse();return i.forEach(((e,n)=>{if(n!==a){let a=i[n+1];t.push({series:[e,a],dir:-1*s})}})),t}function p(e){let t=new Map;return e.fields.forEach(((e,n)=>{var s;let{config:a,values:r}=e;if(0===n)return;let{custom:o}=a;if(null==o)return;if(null!==(s=o.hideFrom)&&void 0!==s&&s.viz)return;let{stacking:d}=o;if(null==d)return;let{mode:c,group:h}=d;if(c===i.o0.None)return;let p=r.toArray(),g=function(e,t){const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=e.length;if(0===n)return!1;let s=0,a=n-1;for(;s<=a&&null==e[s];)s++;for(;a>=s&&null==e[a];)a--;if(a>=s){const n=Math.max(1,Math.floor((a-s+1)/t));for(let t=s;t<=a;t+=n){const n=e[t];if(null!=n&&(n<0||Object.is(n,-0)))return!0}}return!1}(t);if(e===i.pR.NegativeY)return n?u.Pos:u.Neg;return n?u.Neg:u.Pos}(o.transform,p),m=o.drawStyle,f=m===i.l8.Bars?o.barAlignment:m===i.l8.Line?o.lineInterpolation:null,v=`${g}|${c}|${h}|${(0,l.z)(a)}|${m}|${f}`,b=t.get(v);null==b&&(b={series:[],dir:g},t.set(v,b)),b.series.push(n)})),[...t.values()]}function g(e,t,n){let r=Array(e.fields.length),o=t.length,l=e.length,d=o>0?Array(l).fill(0):[],c=o>0?Array(l).fill(!1):[],u=Array.from({length:o},(()=>d.slice())),h=Array.from({length:o},(()=>c.slice()));if(t.forEach(((t,n)=>{let s=h[n];t.series.forEach((t=>{var n,a;let i=e.fields[t];if(null!==(n=i.config.custom)&&void 0!==n&&null!==(a=n.hideFrom)&&void 0!==a&&a.viz)return;let r=i.values.toArray();for(let e=0;e<l;e++)null!=r[e]&&(s[e]=!0)}))})),e.fields.forEach(((e,n)=>{var o,d;let c=e.values.toArray();if(0===n)return void(e.type===s.fS.time?r[n]=(0,a.J_)(e).values.toArray():r[n]=c);let{custom:p}=e.config;if(!p||null!==(o=p.hideFrom)&&void 0!==o&&o.viz)return void(r[n]=c);if(p.transform===i.pR.Constant){let e=c.findIndex((e=>null!=e)),t=c[e];c=Array(c.length).fill(void 0),c[e]=t}else if(c=c.slice(),p.transform===i.pR.NegativeY)for(let e=0;e<c.length;e++)null!=c[e]&&(c[e]*=-1);let g=null===(d=p.stacking)||void 0===d?void 0:d.mode;if(g&&g!==i.o0.None){let e=t.findIndex((e=>e.series.indexOf(n)>-1)),s=u[e],a=h[e],i=r[n]=Array(l);for(let e=0;e<l;e++){let t=c[e];i[e]=null!=t?s[e]+=t:a[e]?s[e]:t}}else r[n]=c})),n){n({totals:r.map(((e,n)=>{let s=t.findIndex((e=>e.series.indexOf(n)>-1));return-1!==s?u[s]:e}))})}return e.fields.forEach(((e,n)=>{var s,a,o,d;if(0===n||null!==(s=e.config.custom)&&void 0!==s&&null!==(a=s.hideFrom)&&void 0!==a&&a.viz)return;if((null===(o=e.config.custom)||void 0===o||null===(d=o.stacking)||void 0===d?void 0:d.mode)===i.o0.Percent){let e=t.findIndex((e=>e.series.indexOf(n)>-1)),s=u[e],a=t[e],i=r[n];for(let e=0;e<l;e++){let t=i[e];null!=t&&(i[e]=0===s[e]?0:a.dir*(t/s[e]))}}})),r}function m(e,t){let n,s=1,a=1,i=e.data[1][t],r=e.data[1][t];for(let n=1;n<e.data.length;n++){const o=e.data[n][t];null!=o&&(null==i?i=o:o>i&&(i=e.data[n][t],s=n),null==r?r=o:o<r&&(r=e.data[n][t],a=n))}return n=null==r&&null==i?void 0:null!=r&&null!=i?(e.valToPos(r,e.series[a].scale)+e.valToPos(i,e.series[s].scale))/2:e.valToPos(r||i,e.series[s||a].scale),void 0!==n&&n<0&&(n=e.bbox.height/devicePixelRatio),n}!function(e){e[e.Pos=1]="Pos",e[e.Neg=-1]="Neg"}(u||(u={}));const f=(0,o.h)("uPlot"),v=f.logger;(0,r.x)("graphng",void 0,f)},8681:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ALERTING_COLOR:()=>d.ns,Alert:()=>a.bZj,AlertingSettings:()=>a.O5T,AsyncMultiSelect:()=>a.M8I,AsyncSelect:()=>a.qbS,AutoSizeInput:()=>a.H6n,AxisPlacement:()=>Z.LB,Badge:()=>a.Cts,BarAlignment:()=>Z.pu,BarGauge:()=>a.xfx,BarGaugeDisplayMode:()=>a.QHm,BarValueVisibility:()=>Z.Jp,BigValue:()=>a.w6I,BigValueColorMode:()=>a.pcF,BigValueGraphMode:()=>a.IGx,BigValueJustifyMode:()=>a.apN,BigValueTextMode:()=>a.jGm,BracesPlugin:()=>E.h,BrowserLabel:()=>a.dI4,Button:()=>a.zxk,ButtonCascader:()=>a.OSz,ButtonGroup:()=>a.hE2,ButtonSelect:()=>a.doH,CallToActionCard:()=>a._d,Card:()=>a.Zbd,CardContainer:()=>a._L7,Cascader:()=>a.vTp,CertificationKey:()=>a.WTJ,Checkbox:()=>a.XZJ,ClearPlugin:()=>V.G,ClickOutsideWrapper:()=>a.LVf,ClipboardButton:()=>a.mUV,ClipboardPlugin:()=>z.w,CodeEditor:()=>a.pq4,CodeEditorSuggestionItemKind:()=>a.kwZ,CollapsableSection:()=>a.s2J,Collapse:()=>a.UO1,ColorPicker:()=>a.zH8,ColorPickerInput:()=>a.TkS,CompletionItemKind:()=>i.c,ConfirmButton:()=>a.puI,ConfirmModal:()=>a.sm4,Container:()=>a.W20,ContextMenu:()=>a.xVl,ControlledCollapse:()=>a.ybu,Counter:()=>a.ATJ,CustomScrollbar:()=>a.$TT,DEFAULT_ANNOTATION_COLOR:()=>d.Jx,DOMUtil:()=>o,DataLinkButton:()=>a.kuP,DataLinkInput:()=>a.vmb,DataLinksContextMenu:()=>a.V5N,DataLinksInlineEditor:()=>a.dIl,DataSourceHttpSettings:()=>a.E1E,DatePicker:()=>a.Mtg,DatePickerWithInput:()=>a.d2U,DateTimePicker:()=>a.xZq,DeleteButton:()=>a.m1X,DrawStyle:()=>Z.l8,Drawer:()=>a.dys,Dropdown:()=>a.Ltx,DropdownIndicator:()=>a.msj,EmptySearchResult:()=>a.KBh,ErrorBoundary:()=>a.SVk,ErrorBoundaryAlert:()=>a.z4Q,ErrorWithStack:()=>a.X2N,EventsCanvas:()=>a.TZ,EventsWithValidation:()=>c.JU,FIXED_UNIT:()=>a.jKV,FadeTransition:()=>a.nTT,FeatureBadge:()=>a.aXU,FeatureInfoBox:()=>a.ZjK,Field:()=>a.gNt,FieldArray:()=>a.F26,FieldLinkList:()=>a.Zjt,FieldSet:()=>a.C3N,FieldValidationMessage:()=>a.S0X,FileDropzone:()=>a.YoT,FileDropzoneDefaultChildren:()=>a.A_i,FileListItem:()=>a.K$w,FileUpload:()=>a.p0f,FilterInput:()=>a.HSx,FilterPill:()=>a.BmQ,Form:()=>a.l09,FormattedValueDisplay:()=>a.WRj,FullWidthButtonContainer:()=>a.fiX,Gauge:()=>a.aCY,GlobalStyles:()=>$.n,Graph:()=>a.kJb,GraphContextMenu:()=>a.wvn,GraphContextMenuHeader:()=>a.bpR,GraphGradientMode:()=>Z.FI,GraphNG:()=>a.drZ,GraphSeriesToggler:()=>a.UNL,GraphTresholdsStyleMode:()=>Z.i3,GraphWithLegend:()=>a.UAG,HorizontalGroup:()=>a.LhK,Icon:()=>a.JO$,IconButton:()=>a.hU,IndentationPlugin:()=>B.R,InfoBox:()=>a.vDh,InlineField:()=>a._9$,InlineFieldRow:()=>a.Z6t,InlineFormLabel:()=>a.cJ0,InlineLabel:()=>a.W4p,InlineSegmentGroup:()=>a.mOU,InlineSwitch:()=>a.x$6,InlineToast:()=>a.KEo,Input:()=>a.IIB,InputControl:()=>a.gs_,JSONFormatter:()=>a.gwK,JsonExplorer:()=>a.uC,KeyboardPlugin:()=>a.Cmj,Label:()=>a.__J,LegacyForms:()=>a.vw6,LegacyInputStatus:()=>a.Gdq,Legend:()=>a.DeQ,LegendDisplayMode:()=>Z.jK,LineInterpolation:()=>Z.KC,Link:()=>a.rUS,LinkButton:()=>a.Qjf,List:()=>a.aVo,LoadingPlaceholder:()=>a.u3Z,LogLabels:()=>a.jwW,LogMessageAnsi:()=>a.QNy,LogRows:()=>a.w3v,Marker:()=>a.JxD,Menu:()=>a.v2r,MenuGroup:()=>a.kSQ,MenuItem:()=>a.sNh,Modal:()=>a.u_l,ModalHeader:()=>a.xBx,ModalRoot:()=>a.Y0X,ModalTabContent:()=>a.QEF,ModalTabsHeader:()=>a.Han,ModalsContext:()=>a.krk,ModalsController:()=>a.JYt,ModalsProvider:()=>a.$iA,MultiSelect:()=>a.NUq,NO_DATA_COLOR:()=>d._V,NewlinePlugin:()=>_.z,NodeGraphDataFrameFieldNames:()=>j,OK_COLOR:()=>d.te,PENDING_COLOR:()=>d.f7,PageToolbar:()=>a.XDu,Pagination:()=>a.tlE,PanelChrome:()=>a.fmR,PanelChromeErrorIndicator:()=>a.qbG,PanelChromeLoadingIndicator:()=>a.E3Q,PanelContainer:()=>a.lk7,PanelContextProvider:()=>a._wC,PanelContextRoot:()=>a.bbH,PlotLegend:()=>a.lNn,PluginSignatureBadge:()=>a.oDb,PointVisibility:()=>Z.Jp,Popover:()=>a.J2e,PopoverController:()=>a.Dh5,Portal:()=>a.h_i,PortalContainer:()=>a.lO4,QueryField:()=>a.qjJ,REGION_FILL_ALPHA:()=>d.iV,RadioButtonGroup:()=>a.SYO,RadioButtonList:()=>a.xON,RangeSlider:()=>a.U2U,ReactMonacoEditor:()=>a.VR_,ReactUtils:()=>l,RefreshPicker:()=>a.dPd,RelativeTimeRangePicker:()=>a.xpf,RenderUserContentAsHTML:()=>a.DNo,RunnerPlugin:()=>W.d,SCHEMA:()=>u.Yi,ScaleDirection:()=>Z.bQ,ScaleDistribution:()=>a.wf3,ScaleOrientation:()=>Z.wN,SearchFunctionType:()=>b.Z,SecretInput:()=>a.m4K,SecretTextArea:()=>a.Zkz,Segment:()=>a.XX7,SegmentAsync:()=>a.VXm,SegmentInput:()=>a.Xrl,SegmentSection:()=>a.fT$,SegmentSelect:()=>a.VBk,Select:()=>a.PhF,SelectContainer:()=>a.eI2,SelectionShortcutsPlugin:()=>U.$,SeriesColorPicker:()=>a.spA,SeriesColorPickerPopover:()=>a.jx7,SeriesColorPickerPopoverWithTheme:()=>a.qRd,SeriesIcon:()=>a.FiV,SeriesTable:()=>a.cS8,SeriesTableRow:()=>a.VtB,SeriesVisibilityChangeBehavior:()=>a.YvT,SeriesVisibilityChangeMode:()=>a.R8q,SetInterval:()=>a.FOj,SlatePrism:()=>H.Z,SlideOutTransition:()=>a.R9v,Slider:()=>a.iRW,Sparkline:()=>a.bju,Spinner:()=>a.$jN,StackingMode:()=>Z.o0,StatsPicker:()=>a.mMX,SuggestionsPlugin:()=>q.b,Switch:()=>a.rsf,TLSAuthSettings:()=>a.sHf,Tab:()=>a.OK9,TabContent:()=>a.I5H,TabbedContainer:()=>a.WLI,Table:()=>a.iA_,TableCellDisplayMode:()=>a.h2q,TableInputCSV:()=>a.wtM,TabsBar:()=>a.J_V,Tag:()=>a.Vp9,TagList:()=>a.PST,TagsInput:()=>a.B7H,TextArea:()=>a.Kx8,ThemeContext:()=>C.Ni,TimeOfDayPicker:()=>a.yAm,TimeRangeInput:()=>a.K4x,TimeRangePicker:()=>a.XcI,TimeSeries:()=>a.pfI,TimeZonePicker:()=>a.OkK,ToolbarButton:()=>a.hAV,ToolbarButtonRow:()=>a.RNy,Tooltip:()=>a.ua7,TooltipDisplayMode:()=>Z.f3,TooltipPlugin:()=>a.iiT,UPLOT_AXIS_FONT_SIZE:()=>a.gDA,UPlotChart:()=>a.N$r,UPlotConfigBuilder:()=>a.UBi,UnitPicker:()=>a.nAu,ValuePicker:()=>a.b59,VerticalGroup:()=>a.wcK,VerticalTab:()=>a.L2y,VirtualizedSelect:()=>a.LTN,VizLayout:()=>a.AYi,VizLegend:()=>a.ltB,VizLegendListItem:()=>a.eMh,VizRepeater:()=>a.QBm,VizTooltip:()=>a.I5C,VizTooltipContainer:()=>a.S$u,WeekStartPicker:()=>a.zDr,WithContextMenu:()=>a.zH1,XYCanvas:()=>a.K2,ZoomPlugin:()=>a.Rbc,ansicolor:()=>x._J,attachDebugger:()=>w.x,buildScaleKey:()=>a.z12,calculateFontSize:()=>f.MX,clearButtonStyles:()=>a.gNI,colors:()=>d.O9,commonOptionsBuilder:()=>s,convertOldAngularValueMapping:()=>a.PRL,createLogger:()=>y.h,defaultIntervals:()=>a.o5O,fieldMatchersUI:()=>a.ivH,fuzzyMatch:()=>S.C,getAvailableIcons:()=>r.BI,getCanvasContext:()=>f.AE,getCardStyles:()=>a.LyM,getCellLinks:()=>m.i,getFieldTypeIcon:()=>r.e7,getInputStyles:()=>a.HxM,getLogRowStyles:()=>a.hIY,getPortalContainer:()=>a.RNS,getScrollbarWidth:()=>g.n,getSelectStyles:()=>a.D1k,getTagColor:()=>p.vm,getTagColorsFromName:()=>p.Bx,getTextColorForAlphaBackground:()=>d.bM,getTextColorForBackground:()=>d.Gc,getTheme:()=>O,graphFieldOptions:()=>a.qVi,graphTickFormatter:()=>a.sVu,graphTimeFormat:()=>a.mcr,hasValidationEvent:()=>c.z3,linkModelToContextMenuItems:()=>h.R,makeFragment:()=>u.xl,makeValue:()=>u.l1,measureText:()=>f.X1,mockTheme:()=>I,mockThemeContext:()=>C.sJ,preparePlotFrame:()=>a.RnT,regexValidation:()=>c.FE,resetSelectStyles:()=>a.JpF,sharedInputStyle:()=>a.RKV,sharedSingleStatMigrationHandler:()=>a.rDf,sharedSingleStatPanelChangedHandler:()=>a.ZHc,sortedColors:()=>d.Wm,styleMixins:()=>R,stylesFactory:()=>T.B,toIconName:()=>r.iJ,useForceUpdate:()=>v.N,useGraphNGContext:()=>a.zrC,usePanelContext:()=>a.R9P,useStyles:()=>C.yK,useStyles2:()=>C.wW,useTheme:()=>C.Fg,useTheme2:()=>C.l4,validate:()=>c.Gu,variableSuggestionToCodeEditorSuggestion:()=>a.ThK,withErrorBoundary:()=>a.PfY,withTheme:()=>C.Zz,withTheme2:()=>C.HE});var s={};n.r(s),n.d(s,{ScaleDistributionEditor:()=>P.Y,StackingEditor:()=>F.n,addAxisConfig:()=>P.r,addHideFrom:()=>D.B,addLegendOptions:()=>A.J,addStackingConfig:()=>F.V,addTextSizeOptions:()=>L.Z,addTooltipOptions:()=>M.L});var a=n(52777),i=n(36337),r=n(33886),o=n(11839),l=n(32714),d=n(57971),c=n(37722),u=n(23766),h=n(7886),p=n(14106),g=n(6778),m=n(56397),f=n(43456),v=n(80589),b=n(85328),x=n(2525),y=n(44385),w=n(987);let j;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(j||(j={}));var S=n(25285),C=n(16755),k=n(35765);let N;const O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark";return N?N(e):(0,k.j)({colors:{mode:e}}).v1},I=e=>(N=e,()=>{N=null});var T=n(50191),$=n(3389),R=n(58906),P=n(44108),D=n(33441),A=n(41185),M=n(23247),L=n(94221),F=n(61054),E=n(51320),V=n(17843),z=n(17669),B=n(737),_=n(69362),W=n(16564),U=n(20093),H=n(55128),q=n(70790),Z=n(27864)},44108:(e,t,n)=>{"use strict";n.d(t,{Y:()=>m,r:()=>h});n(68404);var s=n(27843),a=n(97859),i=n(27864),r=n(33073),o=n(37625),l=n(65678),d=n(70917),c=n(4645),u=n(45916);function h(e,t,n){const o=["Axis"];e.addRadio({path:"axisPlacement",name:"Placement",category:o,defaultValue:r.q.axisPlacement[0].value,settings:{options:r.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:o,defaultValue:"",settings:{placeholder:"Optional text"},showIf:e=>e.axisPlacement!==i.LB.Hidden,shouldApply:e=>e.type!==s.fS.time&&e.type!==s.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:o,settings:{placeholder:"Auto"},showIf:e=>e.axisPlacement!==i.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:o,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:o,defaultValue:i.yK.Text,settings:{options:[{value:i.yK.Text,label:"Text"},{value:i.yK.Series,label:"Series"}]}}),e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:o,editor:m,override:m,defaultValue:{type:i.wf.Linear},shouldApply:e=>e.type===s.fS.number,process:a.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:o,defaultValue:!1,showIf:e=>{var t;return(null===(t=e.scaleDistribution)||void 0===t?void 0:t.type)!==i.wf.Log}}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:t.axisSoftMin,category:o,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:t.axisSoftMax,category:o,settings:{placeholder:"See: Standard options > Max"}})}const p=[{label:"Linear",value:i.wf.Linear},{label:"Logarithmic",value:i.wf.Log},{label:"Symlog",value:i.wf.Symlog}],g=[{label:"2",value:2},{label:"10",value:10}],m=e=>{var t,n;let{value:s,onChange:a}=e;const r=null!==(t=null==s?void 0:s.type)&&void 0!==t?t:i.wf.Linear;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{marginBottom:16},children:(0,u.jsx)(o.S,{value:r,options:p,onChange:e=>{var t;a(Object.assign({},s,{type:e,log:e===i.wf.Linear?void 0:null!==(t=s.log)&&void 0!==t?t:2}))}})}),(r===i.wf.Log||r===i.wf.Symlog)&&(0,u.jsx)(l.g,{label:"Log base",children:(0,u.jsx)(d.Ph,{options:g,value:null!==(n=s.log)&&void 0!==n?n:2,onChange:e=>{a(Object.assign({},s,{log:e.value}))}})}),r===i.wf.Symlog&&(0,u.jsx)(l.g,{label:"Linear threshold",children:(0,u.jsx)(c.I,{placeholder:"1",value:s.linearThreshold,onChange:e=>{a(Object.assign({},s,{linearThreshold:Number(e.currentTarget.value)}))}})})]})}},33441:(e,t,n)=>{"use strict";n.d(t,{B:()=>d});var s=n(82897),a=n(68404),i=n(54761),r=n(45904),o=n(45916);const l=e=>{const{value:t,onChange:n}=e,l=(0,a.useCallback)((e=>{n(Object.assign({},t,{[e]:!t[e]}))}),[t,n]);return(0,o.jsx)(i.Lh,{spacing:"xs",children:Object.keys(t).map((e=>{const n=e;return(0,o.jsx)(r.B,{icon:t[n]?"eye-slash":"eye",onClick:()=>l(n),label:(0,s.startCase)(n),selected:t[n]},n)}))})};function d(e){e.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:l,override:l,shouldApply:()=>!0,hideFromDefaults:!0,process:e=>e})}},41185:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var s=n(68959),a=n(27864);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:a.jK.List,settings:{options:[{value:a.jK.List,label:"List"},{value:a.jK.Table,label:"Table"}]},showIf:e=>e.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:e=>e.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:e=>e.legend.showLegend&&"right"===e.legend.placement}),t&&e.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:s.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:e=>!1!==e.legend.showLegend})}},61054:(e,t,n)=>{"use strict";n.d(t,{V:()=>m,n:()=>g});n(68404);var s,a=n(97859),i=n(27843),r=n(27864),o=n(54761),l=n(37625),d=n(4645),c=n(21888),u=n(23734),h=n(33073),p=n(45916);const g=e=>{let{value:t,context:n,onChange:a,item:i}=e;return(0,p.jsxs)(o.Lh,{children:[(0,p.jsx)(l.S,{value:(null==t?void 0:t.mode)||r.o0.None,options:i.settings.options,onChange:e=>{a(Object.assign({},t,{mode:e}))}}),n.isOverride&&(null==t?void 0:t.mode)&&(null==t?void 0:t.mode)!==r.o0.None&&(0,p.jsx)(d.I,{type:"text",placeholder:"Group",suffix:s||(s=(0,p.jsx)(c.u,{content:"Name of the stacking group",placement:"top",children:(0,p.jsx)(u.h,{name:"question-circle"})})),defaultValue:null==t?void 0:t.group,onChange:e=>{a(Object.assign({},t,{group:e.currentTarget.value.trim()}))}})]})};function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Graph styles"];e.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:n,defaultValue:t,editor:g,override:g,settings:{options:h.q.stacking},process:a.kG,shouldApply:e=>e.type===i.fS.number})}},94221:(e,t,n)=>{"use strict";function s(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&e.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),e.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}n.d(t,{Z:()=>s})},23247:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var s=n(27864);function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=["Tooltip"],a=t?[{value:s.f3.Single,label:"Single"},{value:s.f3.None,label:"Hidden"}]:[{value:s.f3.Single,label:"Single"},{value:s.f3.Multi,label:"All"},{value:s.f3.None,label:"Hidden"}],i=[{value:s.As.None,label:"None"},{value:s.As.Ascending,label:"Ascending"},{value:s.As.Descending,label:"Descending"}];e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:n,defaultValue:"single",settings:{options:a}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:n,defaultValue:s.As.None,showIf:e=>e.tooltip.mode===s.f3.Multi,settings:{options:i}})}},51320:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var s=n(44288);const a={"[":"]","{":"}","(":")"};function i(){return{onKeyDown(e,t,n){const{value:i}=t;switch(e.key){case"(":case"{":case"[":{const{start:{offset:n,key:r},end:{offset:o,key:l},focus:{offset:d}}=i.selection,c=i.focusText.text;if(i.selection.isExpanded)return e.preventDefault(),t.insertTextByKey(r,n,e.key).insertTextByKey(l,o+1,a[e.key]).moveEndBackward(1),!0;if(d===c.length||" "===c[d]||Object.values(a).includes(c[d])){e.preventDefault();const i=a[e.key],d={key:`brace_match-${(0,s.Z)()}`,type:`brace_match-${i}`,anchor:{key:r,offset:n,object:"point"},focus:{key:l,offset:o+1,object:"point"},object:"annotation"};return t.insertText(e.key).insertText(i).addAnnotation(d).moveBackward(1),!0}break}case")":case"}":case"]":{const n=i.anchorText.text[i.selection.anchor.offset],s=e.key,a=`brace_match-${s}`,r=i.annotations.find((e=>(null==e?void 0:e.type)===a&&e.anchor.key===i.anchorText.key));if(r&&n===s&&!i.selection.isExpanded)return e.preventDefault(),t.moveFocusForward(1).removeAnnotation(r).moveAnchorForward(1),!0;break}case"Backspace":{const n=i.anchorText.text,s=i.selection.anchor.offset,r=n[s-1],o=n[s];if(a[r]&&a[r]===o)return e.preventDefault(),t.deleteBackward(1).deleteForward(1).focus(),!0}}return n()}}}},17843:(e,t,n)=>{"use strict";function s(){return{onKeyDown(e,t,n){const s=t.value;if(s.selection.isExpanded)return n();if("k"===e.key&&e.ctrlKey){e.preventDefault();const n=s.anchorText.text,a=s.selection.anchor.offset,i=n.length-a;return t.deleteForward(i),!0}return n()}}}n.d(t,{G:()=>s})},17669:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});const s=e=>null==e?void 0:e.replace(/[\uFEFF]/g,"");function a(){const e={onCopy(e,t,n){e.preventDefault();const{document:a,selection:i}=t.value,{start:{offset:r},end:{offset:o}}=i,l=a.getLeafBlocksAtRange(i).toArray().map((e=>e.text)),d=s(((e,t,n)=>{if(!e.length)return;const s=e.slice(0,-1).join("").length+e.length-1;return e.join("\n").slice(t,s+n)})(l,r,o));return d&&e.clipboardData&&e.clipboardData.setData("Text",d),!0},onPaste(e,t,n){if(e.preventDefault(),e.clipboardData){const n=s(e.clipboardData.getData("Text")),a=null==n?void 0:n.split("\n");if(a&&a.length){t.insertText(a[0]);for(const e of a.slice(1))t.splitBlock().insertText(e)}}return!0}};return Object.assign({},e,{onCut:(t,n,s)=>(e.onCopy(t,n,s),n.deleteAtRange(n.value.selection),!0)})}},737:(e,t,n)=>{"use strict";n.d(t,{R:()=>u});var s=n(59641),a=n(53594),i=n(40246);const r=(0,s.TB)("mod+["),o=(0,s.TB)("shift+tab"),l=(0,s.TB)("mod+]"),d="  ",c=(e,t)=>{const n=e.value.selection,s=e.value.document.getLeafBlocksAtRange(n).toArray();if("left"===t)for(const t of s){const n=t.text.length-t.text.trimLeft().length,s=t.getFirstText().key,i={anchor:{key:s,offset:n,path:[]},focus:{key:s,offset:n,path:[]}};e.deleteBackwardAtRange(a.e6.create(i),Math.min(d.length,n))}else{const{startText:t}=e.value,a=t.text.slice(0,n.start.offset),i=/^\s*$/.test(a);for(const t of s)e.insertTextByKey(t.getFirstText().key,0,d);i&&e.moveStartBackward(d.length)}};function u(){return{onKeyDown(e,t,n){if(r(e)||o(e))e.preventDefault(),c(t,"left");else if(l(e))e.preventDefault(),c(t,"right");else{if("Tab"!==e.key)return n();((e,t,n)=>{const{startBlock:s,endBlock:a,selection:{start:{offset:r,key:o},end:{offset:l,key:u}}}=t.value;if(""===i.Z.serialize(t.value))return;e.preventDefault();const h=s.getFirstText();h&&0===r&&o===h.key&&l===h.text.length&&u===h.key||!s.equals(a)?c(t,"right"):t.insertText(d)})(e,t)}return!0}}}},69362:(e,t,n)=>{"use strict";function s(){return{onKeyDown(e,t,n){const s=t.value;if(s.selection.isExpanded)return n();if("Enter"===e.key){e.preventDefault();const{startBlock:n}=s,a=function(e){let t=e.length-e.trimLeft().length;if(t){let n=e[0];for(;--t;)n+=e[0];return n}return""}(n.text);return t.splitBlock().insertText(a).focus()}return n()}}}n.d(t,{z:()=>s})},16564:(e,t,n)=>{"use strict";function s(e){let{handler:t}=e;return{onKeyDown:(e,n,s)=>t&&"Enter"===e.key&&(e.shiftKey||e.ctrlKey)?(e.preventDefault(),t(e),n):s()}}n.d(t,{d:()=>s})},20093:(e,t,n)=>{"use strict";n.d(t,{$:()=>a});const s=(0,n(59641).TB)("mod+l");function a(){return{onKeyDown(e,t,n){if(!s(e))return n();{e.preventDefault();const{focusBlock:n,document:s}=t.value;t.moveAnchorToStartOfBlock();s.getNextBlock(n.key)?t.moveFocusToStartOfNextBlock():t.moveFocusToEndOfText()}return!0}}}},65178:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="prism-token"},55128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,a:()=>b});var s=n(57706),a=n.n(s),i=n(53594),r=n(65178),o=n(16565),l=(n(68404),n(45916));function d(e){return"block"===e.object&&"code_block"===e.type}function c(e){return"javascript"}function u(e,t,n){const{decoration:s}=e;if(s.type!==r.Z)return n();const a=s.data.get("className");return(0,l.jsx)("span",{className:a,children:e.children})}class h extends((0,o.Record)({onlyIn:d,getSyntax:c,renderDecoration:u})){constructor(e){super(e)}}const p=h;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().languages;const n=new p(e);return{decorateNode:(e,s,r)=>{if(!n.onlyIn(e))return r();const o=i.gO.create(e),l=n.getSyntax(o),d=t[l];if(!d)return[];const c=o.getTexts().map((e=>e&&e.getText())).join("\n"),u=a().tokenize(c,d),h=b(u),p=s.value.data.set("tokens",h);return s.setData(p),m(n,u,o)},renderDecoration:(e,t,s)=>n.renderDecoration({children:e.children,decoration:e.decoration},t,s)}}function m(e,t,n){const s=n.getTexts(),a=[];let i=0,r=0;return s.forEach((e=>{r=i+e.getText().length;let s=0;t.forEach((function t(o,l){if("string"==typeof o){if(l){const t=f({text:e,textStart:i,textEnd:r,start:s,end:s+o.length,className:`prism-token token ${l}`,block:n});t&&a.push(t)}s+=o.length}else if(l=`${l} ${o.type}`,o.alias&&(l+=" "+o.alias),"string"==typeof o.content){const t=f({text:e,textStart:i,textEnd:r,start:s,end:s+o.content.length,className:`prism-token token ${l}`,block:n});t&&a.push(t),s+=o.content.length}else for(let e=0;e<o.content.length;e+=1)t(o.content[e],l)})),i=r+1})),a}function f(e){let{text:t,textStart:n,textEnd:s,start:a,end:i,className:o,block:l}=e;if(a>=s||i<=n)return null;a=Math.max(a,n),i=Math.min(i,s),a-=n,i-=n;return l.createDecoration({object:"decoration",anchor:{key:t.key,offset:a,object:"point"},focus:{key:t.key,offset:i,object:"point"},type:r.Z,data:{className:o}})}function v(e){return"string"==typeof e?[{content:e,types:[],aliases:[]}]:Array.isArray(e)?e.flatMap((e=>v(e))):e instanceof a().Token?v(e.content).flatMap((t=>{let n=[];var s;"string"==typeof e.alias?n=[e.alias]:n=null!==(s=e.alias)&&void 0!==s?s:[];return{content:t.content,types:[e.type,...t.types],aliases:[...n,...t.aliases]}})):[]}function b(e){const t=v(e);if(!t.length)return[];const n=t[0];n.prev=null,n.next=t.length>=2?t[1]:null,n.offsets={start:0,end:n.content.length};for(let e=1;e<t.length-1;e++)t[e].prev=t[e-1],t[e].next=t[e+1],t[e].offsets={start:t[e-1].offsets.end,end:t[e-1].offsets.end+t[e].content.length};const s=t[t.length-1];return s.prev=t.length>=2?t[t.length-2]:null,s.next=null,s.offsets={start:t.length>=2?t[t.length-2].offsets.end:0,end:t.length>=2?t[t.length-2].offsets.end+s.content.length:s.content.length},t}},70790:(e,t,n)=>{"use strict";n.d(t,{b:()=>D});var s=n(82897),a=n(68404),i=n(97394),r=n(75478),o=n(16755),l=n(36337),d=n(13265);const c=e=>e.reduce(((e,t)=>{let{items:n,label:s}=t;return e.push({label:s,kind:l.c.GroupTitle}),n.reduce(((e,t)=>(e.push(t),e)),e)}),[]),u=e=>e.reduce(((e,t)=>e.length<t.label.length?t.label:e),""),h=(e,t,n)=>{const s=(0,d.Z)(n,{font:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize,fontWeight:"normal"}),a=g(s.width,e),i=p(s.height,e);return{listWidth:a,listHeight:m(i,t),itemHeight:i}},p=(e,t)=>e+2*t.spacing.gridSize,g=(e,t)=>{const n=3*t.spacing.gridSize;return Math.min(Math.max(e+n,200),800)},m=(e,t)=>{const n=Math.min(t.length,10)*e;return Math.max(n,100)};var f,v=n(52423),b=n(42870),x=n(45916);const y=e=>{let{item:t,height:n}=e;const s=t&&!!t.documentation,a=t?t.label:"",i=(0,b.a)(null==t?void 0:t.documentation),r=((e,t,n)=>({typeaheadItem:v.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${e.spacing(1,1,1,2)};
      border: ${e.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${e.colors.background.secondary};
      color: ${e.colors.text};
      box-shadow: 0 0 20px ${e.v1.colors.dropdownShadow};
      visibility: ${!0===n?"visible":"hidden"};
      width: 250px;
      min-height: ${t+parseInt(e.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}))((0,o.l4)(),n,s);return(0,x.jsxs)("div",{className:(0,v.cx)([r.typeaheadItem]),children:[(0,x.jsx)("b",{children:a}),f||(f=(0,x.jsx)("hr",{})),(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})]})};var w=n(94130),j=n.n(w),S=n(25801);const C=e=>({typeaheadItem:v.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${e.typography.fontFamilyMonospace};
    padding: ${e.spacing(1,1,1,2)};
    font-size: ${e.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:v.css`
    label: type-ahead-item-selected;
    background-color: ${e.colors.background.secondary};
  `,typeaheadItemMatch:v.css`
    label: type-ahead-item-match;
    color: ${e.v1.palette.yellow};
    border-bottom: 1px solid ${e.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:v.css`
    label: type-ahead-item-group-title;
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
    line-height: ${e.typography.body.lineHeight};
    padding: ${e.spacing(1)};
  `}),k=e=>{const t=(0,o.wW)(C),{isSelected:n,item:s,prefix:a,style:i,onMouseEnter:r,onMouseLeave:d,onClickItem:c}=e,u=n?(0,v.cx)([t.typeaheadItem,t.typeaheadItemSelected]):(0,v.cx)([t.typeaheadItem]),h=(0,v.cx)([t.typeaheadItemMatch]),p=(0,v.cx)([t.typeaheadItemGroupTitle]),g=s.label||"";return s.kind===l.c.GroupTitle?(0,x.jsx)("li",{className:p,style:i,children:(0,x.jsx)("span",{children:g})}):(0,x.jsx)("li",{role:"none",children:(0,x.jsx)("button",{role:"menuitem",className:u,style:i,onMouseDown:c,onMouseEnter:r,onMouseLeave:d,type:"button",children:void 0!==s.highlightParts?(0,x.jsx)(S.H,{text:g,highlightClassName:h,highlightParts:s.highlightParts}):(0,x.jsx)(j(),{textToHighlight:g,searchWords:[null!=a?a:""],autoEscape:!0,highlightClassName:h})})})};function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=(e,t)=>e-t*Math.floor(e/t);class I extends a.PureComponent{constructor(){super(...arguments),N(this,"context",void 0),N(this,"listRef",(0,a.createRef)()),N(this,"state",{hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1}),N(this,"componentDidMount",(()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const e=c(this.props.groupedItems),t=u(e),{listWidth:n,listHeight:s,itemHeight:a}=h(this.context,e,t);this.setState({listWidth:n,listHeight:s,itemHeight:a,allItems:e})})),N(this,"componentWillUnmount",(()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)})),N(this,"handleSelectionChange",(()=>{this.forceUpdate()})),N(this,"componentDidUpdate",((e,t)=>{if(null!==this.state.typeaheadIndex&&t.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(1===this.state.typeaheadIndex)return void this.listRef.current.scrollToItem(0);this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if(!1===(0,s.isEqual)(e.groupedItems,this.props.groupedItems)){const e=c(this.props.groupedItems),t=u(e),{listWidth:n,listHeight:s,itemHeight:a}=h(this.context,e,t);this.setState({listWidth:n,listHeight:s,itemHeight:a,allItems:e,typeaheadIndex:null})}})),N(this,"onMouseEnter",(e=>{this.setState({hoveredItem:e})})),N(this,"onMouseLeave",(()=>{this.setState({hoveredItem:null})})),N(this,"moveMenuIndex",(e=>{const t=this.state.allItems.length;if(t){const n=this.state.typeaheadIndex||0;let s=O(n+e,t);return this.state.allItems[s].kind===l.c.GroupTitle&&(s=O(s+e,t)),void this.setState({typeaheadIndex:s})}})),N(this,"insertSuggestion",(()=>{this.props.onSelectSuggestion&&null!==this.state.typeaheadIndex&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}))}get menuPosition(){if(!window.getSelection)return"";const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){const e=t.parentElement.getBoundingClientRect(),n=window.scrollX,s=window.scrollY;return`position: absolute; display: flex; top: ${e.top+s+e.height+6}px; left: ${e.left+n-2}px`}return""}render(){const{prefix:e,isOpen:t=!1,origin:n}=this.props,{allItems:s,listWidth:a,listHeight:i,itemHeight:o,hoveredItem:l,typeaheadIndex:d}=this.state,c=l||d,u=s[l||(d||0)];return(0,x.jsxs)(T,{origin:n,isOpen:t,style:this.menuPosition,children:[(0,x.jsx)("ul",{role:"menu",className:"typeahead","data-testid":"typeahead",children:(0,x.jsx)(r.t7,{ref:this.listRef,itemCount:s.length,itemSize:o,itemKey:e=>{const t=s&&s[e];return t?`${e}-${t.label}`:`${e}`},width:a,height:i,children:t=>{let{index:n,style:a}=t;const i=s&&s[n];return i?(0,x.jsx)(k,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(i):{},isSelected:null!==d&&s[d]===i,item:i,prefix:e,style:a,onMouseEnter:()=>this.onMouseEnter(n),onMouseLeave:this.onMouseLeave}):null}})}),c&&(0,x.jsx)(y,{height:i,item:u})]})}}N(I,"contextType",o.Ni);class T extends a.PureComponent{constructor(e){super(e),N(this,"node",void 0);const{index:t=0,origin:n="query",style:s}=e;this.node=document.createElement("div"),this.node.setAttribute("style",s),this.node.classList.add("slate-typeahead",`slate-typeahead-${n}-${t}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),i.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var $=n(23766),R=n(85328),P=n(65178);function D(e){let t,{onTypeahead:n,cleanText:a,onWillApplySuggestion:i,portalOrigin:r}=e,o={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const l=(0,s.debounce)(A,250),d=e=>{o=Object.assign({},o,e)};return{onBlur:(e,t,n)=>(o=Object.assign({},o,{groupedItems:[]}),n()),onClick:(e,t,n)=>(o=Object.assign({},o,{groupedItems:[]}),n()),onKeyDown:(e,s,i)=>{const r=o.groupedItems.length;switch(e.key){case"Escape":if(r)return e.preventDefault(),o=Object.assign({},o,{groupedItems:[]}),s.insertText("");break;case"ArrowDown":case"ArrowUp":if(r)return e.preventDefault(),void t.moveMenuIndex("ArrowDown"===e.key?1:-1);break;case"Enter":if(!e.shiftKey&&!e.ctrlKey&&r)return e.preventDefault(),t.insertSuggestion();break;case"Tab":if(r)return e.preventDefault(),t.insertSuggestion();break;default:1===e.key.length&&l(s,d,n,a)}return i()},commands:{selectSuggestion:(e,t)=>{const s=o.groupedItems;if(!s||!s.length)return e;const i=e.applyTypeahead(t);return l(e,d,n,a),i},applyTypeahead:(e,t)=>{let n=t.insertText||t.label;const s="function"===t.kind,r=t.move||0,l=r>0?r:0,d=r<0?-r:0,{typeaheadPrefix:c,typeaheadText:u,typeaheadContext:h}=o;i&&(n=i(n,{groupedItems:o.groupedItems,typeaheadContext:h,typeaheadPrefix:c,typeaheadText:u}));const p=t.deleteBackwards||c.length,g=(a?a(u):u).length-c.length,m=u.indexOf(c),f=c&&(g>0&&m>-1||n===u)&&!s?g+m:0;if(n.match(/\n/)){const t=(0,$.xl)(n);return e.deleteBackward(p).deleteForward(f).insertFragment(t).focus(),e}return o=Object.assign({},o,{groupedItems:[]}),e.snapshotSelection().deleteBackward(p).deleteForward(f).insertText(n).moveForward(l).moveBackward(d).focus(),e}},renderEditor(e,n,s){if(n.value.selection.isExpanded)return s();const a=s();return(0,x.jsxs)(x.Fragment,{children:[a,(0,x.jsx)(I,{menuRef:e=>t=e,origin:r,prefix:o.typeaheadPrefix,isOpen:!!o.groupedItems.length,groupedItems:o.groupedItems,onSelectSuggestion:n.selectSuggestion})]})}}}const A=async(e,t,n,a)=>{if(!n)return;const{value:i}=e,{selection:r}=i,o=i.document.getClosestBlock(i.focusBlock.key),l=i.selection.start.offset-1,d=o&&o.getDecorations(e),c=d?d.filter((e=>e.start.offset<=l&&e.end.offset>l&&e.type===P.Z)).toArray():[],u=d&&d.filter((e=>e.end.offset<=l&&e.type===P.Z&&e.data.get("className").includes("label-key"))).last(),h=u&&i.focusText.text.slice(u.start.offset,u.end.offset),p=c.map((e=>e.data.get("className"))).join(" ").split(" ").filter((e=>e.length));let g=i.focusText.text,m=g.slice(0,r.focus.offset);c.length&&(g=i.focusText.text.slice(c[0].start.offset,c[0].end.offset),m=i.focusText.text.slice(c[0].start.offset,r.focus.offset));const f=m.match(/(?:!?=~?"?|")(.*)/);f?m=f[1]:a&&(m=a(m));const{suggestions:v,context:b}=await n({prefix:m,text:g,value:i,wrapperClasses:p,labelKey:h||void 0,editor:e});t({groupedItems:v.map((e=>{if(!e.items)return e;const t=e.searchFunctionType||(e.prefixMatch?R.Z.Prefix:R.Z.Word),n=R.n[t];let a=Object.assign({},e);return m&&(e.skipFilter||(a.items=a.items.filter((e=>(e.filterText||e.label).length>=m.length)),a.items=n(a.items,m)),a.items=a.items.filter((e=>{var t;return!(e.insertText===m||(null!==(t=e.filterText)&&void 0!==t?t:e.label)===m)}))),e.skipSort||(a.items=(0,s.sortBy)(a.items,(e=>void 0===e.sortText?void 0!==e.sortValue?e.sortValue:e.label:e.sortText||e.label))),a})).filter((e=>e.items&&e.items.length)),typeaheadPrefix:m,typeaheadContext:b,typeaheadText:g}),e.blur().focus()}},3389:(e,t,n)=>{"use strict";n.d(t,{n:()=>p});var s=n(78966),a=(n(68404),n(16755));function i(e){return s.css`
    .panel-options-group {
      border-bottom: 1px solid ${e.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${e.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${e.colors.text.primary};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${e.colors.text.secondary};
      margin-right: ${e.spacing(1)};
      padding: ${e.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${e.spacing(1,2,1,4)};
    }
  `}function r(e){return s.css`
    .card-section {
      margin-bottom: ${e.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${e.colors.background.secondary};
      box-shadow: none;
      padding: ${e.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${e.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${e.spacing(2)};
    }

    .card-item-type {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${e.typography.size.sm};
    }

    .card-item-name {
      color: ${e.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${e.spacing(1)};
    }

    .card-item-sub-name {
      color: ${e.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${e.spacing(2)};
      font-size: ${e.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${e.typography.size.sm};
        display: inline-block;
        margin-left: ${e.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${e.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h3.fontSize};
      }

      ${e.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${e.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${e.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${e.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${e.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var o=n(58906);function l(e){return s.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${e.typography.htmlFontSize}px;
      font-family: ${e.typography.fontFamily};
      line-height: ${e.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${e.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.canvas};
      ${d(e.typography.body)}
    }

    h1,
    .h1 {
      ${d(e.typography.h1)}
    }
    h2,
    .h2 {
      ${d(e.typography.h2)}
    }
    h3,
    .h3 {
      ${d(e.typography.h3)}
    }
    h4,
    .h4 {
      ${d(e.typography.h4)}
    }
    h5,
    .h5 {
      ${d(e.typography.h5)}
    }
    h6,
    .h6 {
      ${d(e.typography.h6)}
    }

    p {
      margin: 0 0 ${e.spacing(2)};
    }

    button {
      letter-spacing: ${e.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,o.getFocusStyles)(e)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${e.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${e.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${e.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${e.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${e.colors.text.primary};
    }

    .text-warning {
      color: ${e.colors.warning.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${e.colors.error.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${e.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,o.getFocusStyles)(e)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${e.components.textHighlight.background};
      color: ${e.components.textHighlight.text};
      padding: 0;
    }
  `}function d(e){return`\n    margin: 0;\n    font-size: ${e.fontSize};\n    line-height: ${e.lineHeight};\n    font-weight: ${e.fontWeight};\n    letter-spacing: ${e.letterSpacing};\n    font-family: ${e.fontFamily};\n    margin-bottom: 0.45em;\n  `}function c(e){return s.css`
    input,
    button,
    select,
    textarea {
      font-size: ${e.typography.body.fontSize};
      font-weight: ${e.typography.body.fontWeight};
      line-height: ${e.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${e.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${e.components.input.background};
      color: ${e.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function u(e){const t=e.breakpoints.values.xxl+2*e.spacing.gridSize+e.components.sidemenu.width;return s.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};

      ${e.breakpoints.up("sm")} {
        margin: ${e.spacing(0,1)};
      }

      ${e.breakpoints.up("md")} {
        margin: ${e.spacing(0,2)};
      }

      @media (min-width: ${t}px) {
        max-width: ${e.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${e.spacing(2)};
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};
    }

    .page-body {
      padding: ${e.spacing(1)};
      background: ${e.components.panel.background};
      border: 1px solid ${e.components.panel.borderColor};
      margin-bottom: 32px;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(2)};
      }

      ${e.breakpoints.up("lg")} {
        padding: ${e.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${e.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${e.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${e.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button {
        margin-left: ${e.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${e.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${e.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${e.spacing(1)};
      margin-top: ${e.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}var h=n(45916);function p(){const e=(0,a.l4)();return(0,h.jsx)(s.Global,{styles:[l(e),c(e),u(e),r(e),i(e),s.css`
    // TODO copy from _utils.scss
  `]})}},16755:(e,t,n)=>{"use strict";n.d(t,{Fg:()=>g,HE:()=>p,Ni:()=>u,Zz:()=>h,l4:()=>m,sJ:()=>b,wW:()=>v,yK:()=>f});var s=n(24420),a=n.n(s),i=n(68404),r=n(35765),o=n(50191),l=n(45916);let d=null;const c=new WeakMap,u=i.createContext((0,r.j)());u.displayName="ThemeContext";const h=e=>{const t=t=>{const n=d||u;return(0,l.jsx)(n.Consumer,{children:n=>(0,l.jsx)(e,Object.assign({},t,{theme:n.v1}))})};return t.displayName=`WithTheme(${e.displayName})`,a()(t,e),t},p=e=>{const t=t=>{const n=d||u;return(0,l.jsx)(n.Consumer,{children:n=>(0,l.jsx)(e,Object.assign({},t,{theme:n}))})};return t.displayName=`WithTheme(${e.displayName})`,a()(t,e),t};function g(){return(0,i.useContext)(d||u).v1}function m(){return(0,i.useContext)(d||u)}function f(e){const t=g();let n=c.get(e);return n||(n=(0,o.B)(e),c.set(e,n)),n(t)}function v(e){const t=m();let n=c.get(e);return n||(n=(0,o.B)(e),c.set(e,n)),n(t)}const b=e=>(d=i.createContext(e),()=>{d=null})},58906:(e,t,n)=>{"use strict";n.r(t),n.d(t,{cardChrome:()=>i,focusCss:()=>c,getFocusStyles:()=>h,getMouseFocusStyles:()=>u,getTooltipContainerStyles:()=>p,hoverColor:()=>r,listItem:()=>o,listItemSelected:()=>l,mediaUp:()=>d});var s=n(35008),a=n.n(s);function i(e){return`\n    background: ${e.colors.background.secondary};\n    &:hover {\n      background: ${r(e.colors.background.secondary,e)};\n    }\n    box-shadow: ${e.components.panel.boxShadow};\n    border-radius: ${e.shape.borderRadius(2)};\n`}function r(e,t){return t.isDark?a()(e).brighten(2).toString():a()(e).darken(2).toString()}function o(e){return`\n  background: ${e.colors.background.secondary};\n  &:hover {\n    background: ${r(e.colors.background.secondary,e)};\n  }\n  box-shadow: ${e.components.panel.boxShadow};\n  border-radius: ${e.shape.borderRadius(2)};\n`}function l(e){return`\n    background: ${r(e.colors.background.secondary,e)};\n    color: ${e.colors.text.maxContrast};\n`}function d(e){return`only screen and (min-width: ${e})`}const c=e=>{const t=(e=>e.hasOwnProperty("v1"))(e);return`\n  outline: 2px dotted transparent;\n  outline-offset: 2px;\n  box-shadow: 0 0 0 2px ${t?e.colors.background.canvas:e.colors.bodyBg}, 0 0 0px 4px ${t?e.colors.primary.main:e.colors.formFocusOutline};\n  transition-property: outline, outline-offset, box-shadow;\n  transition-duration: 0.2s;\n  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function u(e){return{outline:"none",boxShadow:"none"}}function h(e){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const p=e=>`\n  overflow: hidden;\n  background: ${e.colors.background.secondary};\n  box-shadow: ${e.shadows.z2};\n  max-width: 800px;\n  padding: ${e.spacing(1)};\n  border-radius: ${e.shape.borderRadius()};\n  z-index: ${e.zIndex.tooltip};\n`},50191:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var s=n(58635);function a(e){return(0,s.Z)(e)}},36337:(e,t,n)=>{"use strict";let s;n.d(t,{c:()=>s}),function(e){e.GroupTitle="GroupTitle"}(s||(s={}))},33886:(e,t,n)=>{"use strict";n.d(t,{BI:()=>i,e7:()=>r,iJ:()=>s.iJ});var s=n(42454),a=n(27843);const i=()=>Object.keys(s._S);function r(e){if(e)switch(e.type){case a.fS.time:return"clock-nine";case a.fS.string:return"font";case a.fS.number:return"calculator-alt";case a.fS.boolean:return"toggle-on";case a.fS.trace:return"info-circle";case a.fS.geo:return"map-marker";case a.fS.other:return"brackets-curly"}return"question-circle"}},93406:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});const s=(e,t)=>{"Tab"===e.key||e.altKey||e.ctrlKey||e.metaKey||(e.stopPropagation(),"Escape"===e.key&&t())}},57971:(e,t,n)=>{"use strict";n.d(t,{Gc:()=>m,Jx:()=>r,O9:()=>h,Wm:()=>v,_V:()=>d,bM:()=>f,f7:()=>c,iV:()=>u,ns:()=>l,te:()=>o});var s=n(82897),a=n(35008),i=n.n(a);const r="rgba(0, 211, 255, 1)",o="rgba(11, 237, 50, 1)",l="rgba(237, 46, 24, 1)",d="rgba(150, 150, 150, 1)",c="rgba(247, 149, 32, 1)",u=.09,h=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function p(e){return i()(e).toHsl()}function g(e){return i()(e).toHexString()}function m(e){return i()(e).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function f(e,t){const n=i()(e),s=n.getBrightness();return n.getAlpha()<.3?t?"rgb(247, 248, 250)":"rgb(32, 34, 38)":s>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let v=function(e){const t=(0,s.map)(e,p),n=(0,s.sortBy)(t,["h"]),a=(0,s.chunk)(n,4),i=(0,s.map)(a,(e=>(0,s.sortBy)(e,"l"))),r=(0,s.flattenDeep)((0,s.zip)(...i));return(0,s.map)(r,g)}(h)},7886:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});const s=e=>e().map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_blank"===e.target?"external-link-alt":"link"),onClick:e.onClick})))},987:(e,t,n)=>{"use strict";function s(e,t,n){}n.d(t,{x:()=>s})},11839:(e,t,n)=>{"use strict";function s(e,t){let n,s=e.parentElement.previousSibling;for(;s;){if(n=s.querySelector(t),n)return n;s=s.previousSibling}}function a(e){const t=(e||window).getSelection();if(!t||!t.anchorNode)return null;const n=t.getRangeAt(0),s=t.anchorNode.textContent,a=n.startOffset;return s.slice(a,a+1)}n.r(t),n.d(t,{getNextCharacter:()=>a,getPreviousCousin:()=>s}),"undefined"!=typeof window&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n,s=this;do{for(n=t.length;--n>=0&&t.item(n)!==s;);s=s.parentElement}while(n<0&&s);return s})},6784:(e,t,n)=>{"use strict";function s(e){const t=e.lastIndexOf("."),n=e.substring(t),s=e.substring(0,t);return s.length<16?e:`${s.substring(0,16)}...${n}`}n.d(t,{O:()=>s})},25285:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var s=n(82897);function a(e,t){let n=0,a=e.indexOf(t);t=t.replace(/\s/g,"");const i=[];if(-1!==a)return{distance:0,found:!0,ranges:[{start:a,end:a+t.length-1}]};for(const r of t){const t=e.indexOf(r,a);if(-1===t)return{distance:1/0,ranges:[],found:!1};if(-1!==a&&(n+=t-a),a=t+1,0===i.length)i.push({start:t,end:t});else{const e=(0,s.last)(i);t===e.end+1?e.end++:i.push({start:t,end:t})}}return{distance:n,ranges:i,found:!0}}},60192:(e,t,n)=>{"use strict";n.d(t,{c:()=>l,t:()=>d});var s=n(36509),a=(n(68404),n(4696)),i=n(45710),r=n(45916);function o(){s.ZP.options.lng||s.ZP.use(a.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const l=e=>(o(),(0,r.jsx)(i.c,Object.assign({},e))),d=(e,t,n)=>(o(),s.ZP.t(e,t,n))},44385:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var s=n(82897);(0,s.throttle)((function(){console.log(...arguments)}),500);const a=e=>{let t=!1;return{logger:function(e){},enable:()=>t=!0,disable:()=>t=!1,isEnabled:()=>t}}},43456:(e,t,n)=>{"use strict";let s;n.d(t,{AE:()=>r,MX:()=>l,X1:()=>o});const a=new Map;let i="";function r(){return s||(s=document.createElement("canvas").getContext("2d")),s}function o(e,t){const n=`${t}px 'Roboto'`,s=e+n,o=a.get(s);if(o)return o;const l=r();i!==n&&(l.font=i=n);const d=l.measureText(e);return 500===a.size&&a.clear(),a.set(s,d),d}function l(e,t,n,s,a){const i=t/(o(e,14).width+2)*14,r=n/s,l=Math.min(r,i);return Math.min(l,null!=a?a:l)}},32714:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getChildId:()=>a,renderOrCallToRender:()=>i});var s=n(68404);function a(e){let t;const n=s.Children.only(e);return"id"in(null==n?void 0:n.props)?t=n.props.id:"inputId"in n.props&&(t=null==n?void 0:n.props.inputId),"string"==typeof t?t:void 0}function i(e,t){if(s.isValidElement(e)||"string"==typeof e||"number"==typeof e)return e;if("function"==typeof e)return e(t);throw new Error(`${e} is not a React element nor a function that returns React element`)}},6778:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});let s=null;function a(){if(null!==s)return s;if("undefined"!=typeof document){const e=document.createElement("div"),t={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(t).map((n=>{e.style[n]=t[n]})),document.body.appendChild(e),s=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else s=0;return s||0}},85328:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,n:()=>i});var s=n(25285);let a;!function(e){e.Word="Word",e.Prefix="Prefix",e.Fuzzy="Fuzzy"}(a||(a={}));const i={[a.Word]:(e,t)=>e.filter((e=>(e.filterText||e.label).includes(t))),[a.Prefix]:(e,t)=>e.filter((e=>(e.filterText||e.label).startsWith(t))),[a.Fuzzy]:(e,t)=>(t=t.toLowerCase(),e.filter((e=>{const{distance:n,ranges:a,found:i}=(0,s.C)(e.label.toLowerCase(),t);return!!i&&(e.sortValue=n,e.highlightParts=a,!0)})))}},23766:(e,t,n)=>{"use strict";n.d(t,{Yi:()=>a,l1:()=>r,xl:()=>i});var s=n(53594);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(e,t)=>{const n=e.split("\n").map((e=>s.gO.create({type:"code_line",nodes:[s.xv.create(e)]}))),a=s.gO.create({data:{syntax:t},type:"code_block",nodes:n});return s.BB.create({nodes:[a]})},r=(e,t)=>{const n=i(e,t);return s.B4.create({document:n})}},56397:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});const s=(e,t)=>{let n;if(e.getLinks&&(n=e.getLinks({valueRowIndex:t.index})),n){for(let a=0;a<(null===(s=n)||void 0===s?void 0:s.length);a++){var s;if(n[a].onClick){const s=n[a].onClick;n[a].onClick=n=>{n.ctrlKey||n.metaKey||n.shiftKey||(n.preventDefault(),s(n,{field:e,rowIndex:t.index}))}}}return n}}},14106:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>i,vm:()=>r});const s=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o(e.toLowerCase()),n=Math.abs(t%s.length);return r(n)}function r(e){return{color:s[e],borderColor:a[e]}}function o(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}},80589:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var s=n(68404);function a(){const[e,t]=(0,s.useState)(0);return()=>t((e=>e+1))}},37722:(e,t,n)=>{"use strict";let s;n.d(t,{FE:()=>r,Gu:()=>a,JU:()=>s,z3:()=>i}),function(e){e.onBlur="onBlur",e.onFocus="onFocus",e.onChange="onChange"}(s||(s={}));const a=(e,t)=>{const n=t.reduce(((t,n)=>n.rule(e)?t:t.concat(n.errorMessage)),[]);return n.length>0?n:null},i=(e,t)=>t&&t[e],r=(e,t)=>({rule:t=>!!t.match(e),errorMessage:t||"Value is not valid"})},25004:(e,t,n)=>{"use strict";n.d(t,{wl:()=>a});const s={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${s.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,folderHeader:e=>`data-testid Folder header ${e}`,folderContent:e=>`data-testid Folder content ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"}},a={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:s.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:s.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:s.CallToActionCard.button("Add variable"),addVariableCTAV2:s.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:s.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",SaveConfigButton:"data-testid public dashboard save config button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}}},components:s}},27864:(e,t,n)=>{"use strict";let s,a,i,r,o,l,d,c,u,h,p,g;n.d(t,{As:()=>C,FI:()=>c,IG:()=>x,Jp:()=>i,KC:()=>l,LB:()=>s,QH:()=>k,ap:()=>y,bQ:()=>g,f3:()=>S,h2:()=>j,i3:()=>m,jG:()=>w,jK:()=>f,l8:()=>r,o0:()=>u,pR:()=>o,pc:()=>b,pu:()=>h,wN:()=>p,wf:()=>d,wm:()=>v,yK:()=>a}),function(e){e.Auto="auto",e.Bottom="bottom",e.Hidden="hidden",e.Left="left",e.Right="right",e.Top="top"}(s||(s={})),function(e){e.Series="series",e.Text="text"}(a||(a={})),function(e){e.Always="always",e.Auto="auto",e.Never="never"}(i||(i={})),function(e){e.Bars="bars",e.Line="line",e.Points="points"}(r||(r={})),function(e){e.Constant="constant",e.NegativeY="negative-Y"}(o||(o={})),function(e){e.Linear="linear",e.Smooth="smooth",e.StepAfter="stepAfter",e.StepBefore="stepBefore"}(l||(l={})),function(e){e.Linear="linear",e.Log="log",e.Ordinal="ordinal",e.Symlog="symlog"}(d||(d={})),function(e){e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme"}(c||(c={})),function(e){e.None="none",e.Normal="normal",e.Percent="percent"}(u||(u={})),function(e){e[e.After=1]="After",e[e.Before=-1]="Before",e[e.Center=0]="Center"}(h||(h={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(p||(p={})),function(e){e[e.Down=-1]="Down",e[e.Left=-1]="Left",e[e.Right=1]="Right",e[e.Up=1]="Up"}(g||(g={}));let m,f;!function(e){e.Area="area",e.Dashed="dashed",e.DashedAndArea="dashed+area",e.Line="line",e.LineAndArea="line+area",e.Off="off",e.Series="series"}(m||(m={})),function(e){e.Hidden="hidden",e.List="list",e.Table="table"}(f||(f={}));let v;!function(e){e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical"}(v||(v={}));let b,x,y,w,j,S,C;!function(e){e.Background="background",e.None="none",e.Value="value"}(b||(b={})),function(e){e.Area="area",e.Line="line",e.None="none"}(x||(x={})),function(e){e.Auto="auto",e.Center="center"}(y||(y={})),function(e){e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name"}(w||(w={})),function(e){e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge"}(j||(j={})),function(e){e.Multi="multi",e.None="none",e.Single="single"}(S||(S={})),function(e){e.Ascending="asc",e.Descending="desc",e.None="none"}(C||(C={}));let k;!function(e){e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd"}(k||(k={}));j.Auto},65993:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var s=n(35008),a=n.n(s);function i(e,t,n){if(e.isLight)return t;{if(n){const e=a()(t);return a().mostReadable(n,[e.clone().lighten(25),e.clone().lighten(10),e,e.clone().darken(10),e.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const e=a()(t).toHsl();e.l=1-e.l;const s=a()(e);return s.isLight()?s.darken(5).toHex8String():s.lighten(5).toHex8String()}}},5849:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var s=n(86780),a=n(23019),i=n.n(a),r=n(68404),o=n(16755),l=n(8006),d=n(23734),c=n(4645),u=n(45916);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.PureComponent{constructor(){super(...arguments),h(this,"clearUiFind",(()=>{this.props.onChange("")}))}render(){const{allowClear:e,inputProps:t,value:n}=this.props,s=(0,u.jsxs)(u.Fragment,{children:[t.suffix,e&&n&&n.length&&(0,u.jsx)(d.h,{name:"times",onClick:this.clearUiFind})]});return(0,u.jsx)(c.I,Object.assign({placeholder:"Find..."},t,{onChange:e=>this.props.onChange(e.currentTarget.value),suffix:s,value:n}))}}h(p,"defaultProps",{inputProps:{},trackFindFunction:void 0,value:void 0});var g=n(74147);const m=e=>({TracePageSearchBar:s.iv`
      label: TracePageSearchBar;
      float: right;
      position: sticky;
      top: 8px;
      right: 0;
      z-index: ${e.zIndex.navbarFixed};
      background: ${e.colors.background.primary};
      margin-top: 8px;
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${e.shadows.z2};
    `,TracePageSearchBarBar:s.iv`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:s.iv`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:s.iv`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:s.iv`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:s.iv`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),f=(0,r.memo)((function(e){const{navigable:t,setSearch:n,searchValue:s,searchBarSuffix:a,spanFindMatches:r,focusedSpanIdForSearch:d,setSearchBarSuffix:c,setFocusedSpanIdForSearch:h}=e,f=(0,o.wW)(m),v=s?(0,u.jsx)("span",{className:f.TracePageSearchBarSuffix,"aria-label":"Search bar suffix",children:a}):null,b=i()(f.TracePageSearchBarBtn,{[f.TracePageSearchBarBtnDisabled]:!s}),x={className:i()(f.TracePageSearchBarBar,g.A4),name:"search",suffix:v},y=e=>null!=r&&r.size&&(null==r?void 0:r.size)>0?e+" of "+(null==r?void 0:r.size):"";return(0,u.jsx)("div",{className:f.TracePageSearchBar,children:(0,u.jsxs)("span",{className:g.NY,style:{display:"flex"},children:[(0,u.jsx)(p,{onChange:e=>{h(""),c(""),n(e)},value:s,inputProps:x,allowClear:!0}),(0,u.jsx)(u.Fragment,{children:t&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.zx,{className:b,variant:"secondary",disabled:!s,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:()=>{const e=Array.from(r),t=e.indexOf(d)?e.indexOf(d):0;if(-1===t||t===e.length-1)return h(e[0]),void c(y(1));h(e[t+1]),c(y(t+2))}}),(0,u.jsx)(l.zx,{className:b,variant:"secondary",disabled:!s,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:()=>{const e=Array.from(r),t=e.indexOf(d)?e.indexOf(d):0;if(-1===t||0===t)return h(e[e.length-1]),void c(y(e.length));h(e[t-1]),c(y(t))}})]})})]})})}))},50814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(86780),a=n(23019),i=n.n(a),r=(n(68404),n(16755)),o=n(65993),l=n(40930),d=n(45916);const c=e=>({Ticks:s.iv`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:s.iv`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,o.h)(e,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:s.iv`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:s.iv`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function u(e){const{endTime:t,numTicks:n,showLabels:s,startTime:a}=e;let o;if(s){o=[];const e=(t||0)-(a||0);for(let t=0;t<n;t++){const s=(a||0)+t/(n-1)*e;o.push((0,l.LU)(s))}}const u=(0,r.wW)(c),h=[];for(let e=0;e<n;e++){const t=e/(n-1);h.push((0,d.jsx)("div",{"data-testid":"TicksID",className:u.TicksTick,style:{left:100*t+"%"},children:o&&(0,d.jsx)("span",{className:i()(u.TicksTickLabel,{[u.TicksTickLabelEndAnchor]:t>=1}),children:o[e]})},t))}return(0,d.jsx)("div",{className:u.Ticks,children:h})}u.defaultProps={endTime:null,showLabels:null,startTime:null}},99437:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(86780),a=n(23019),i=n.n(a),r=(n(68404),n(16755)),o=n(74147),l=n(45916);const d=["children","className"],c=["children","className","width","style"];function u(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const h=()=>({flexRow:s.iv`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function p(e){const{children:t,className:n=""}=e,s=u(e,d),a=(0,r.wW)(h);return(0,l.jsx)("div",Object.assign({className:i()(a.flexRow,n)},s,{children:t}))}function g(e){const{children:t,className:n="",width:s,style:a}=e,r=u(e,c),d=100*s+"%",h=Object.assign({},a,{flexBasis:d,maxWidth:d});return(0,l.jsx)("div",Object.assign({className:i()(o.WW,n),style:h,"data-testid":"TimelineRowCell"},r,{children:t}))}p.defaultProps={className:""},g.defaultProps={className:"",style:{}},p.Cell=g},60456:(e,t,n)=>{"use strict";n.d(t,{l4:()=>mt,ZP:()=>St});var s=n(86780),a=n(82897),i=n(58635),r=n(68404),o=n(50191),l=n(1696),d=n(16755);var c=n(47627);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h{constructor(e){u(this,"bufferLen",void 0),u(this,"dataLen",void 0),u(this,"heights",void 0),u(this,"lastI",void 0),u(this,"ys",void 0),this.ys=[],this.heights=[],this.bufferLen=e,this.dataLen=-1,this.lastI=-1}profileData(e){e!==this.dataLen&&(this.dataLen=e,this.ys.length=e,this.heights.length=e,this.lastI>=e&&(this.lastI=e-1))}calcHeights(e,t,n){null!=n&&(this.lastI=n);let s=e+this.bufferLen;if(s<=this.lastI)return;s>=this.heights.length&&(s=this.heights.length-1);let a=this.lastI;for(-1===this.lastI&&(a=0,this.ys[0]=0);a<=s;){const e=this.heights[a]=t(a);this.ys[a+1]=this.ys[a]+e,a++}this.lastI=s}calcYs(e,t){for(;(null==this.ys[this.lastI]||e>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,t)}confirmHeight(e,t){let n=e;if(n>this.lastI)return void this.calcHeights(n,t);const s=t(n);if(s===this.heights[n])return;const a=s-this.heights[n];for(this.heights[n]=s;++n<=this.lastI;)this.ys[n]+=a;null!=this.ys[this.lastI+1]&&(this.ys[this.lastI+1]+=a)}findFloorIndex(e,t){this.calcYs(e,t);let n,s=0,a=this.lastI;if(this.ys.length<2||e<this.ys[1])return 0;if(e>this.ys[a])return a;for(;s<a;)if(n=s+.5*(a-s)|0,e>this.ys[n]){if(e<=this.ys[n+1])return n;s=n}else{if(!(e<this.ys[n]))return n;if(e>=this.ys[n-1])return n-1;a=n}throw new Error(`unable to find floor index for y=${e}`)}getRowPosition(e,t){return this.confirmHeight(e,t),{height:this.heights[e],y:this.ys[e]}}getEstimatedHeight(){const e=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?0|e:e/(this.lastI+1)*this.heights.length|0}}var p=n(45916);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=100;class f extends r.Component{constructor(e){super(e),g(this,"_yPositions",void 0),g(this,"_knownHeights",void 0),g(this,"_startIndexDrawn",void 0),g(this,"_endIndexDrawn",void 0),g(this,"_startIndex",void 0),g(this,"_endIndex",void 0),g(this,"_viewHeight",void 0),g(this,"_scrollTop",void 0),g(this,"_isScrolledOrResized",void 0),g(this,"_htmlTopOffset",void 0),g(this,"_windowScrollListenerAdded",void 0),g(this,"_htmlElm",void 0),g(this,"_wrapperElm",void 0),g(this,"_itemHolderElm",void 0),g(this,"getViewHeight",(()=>this._viewHeight)),g(this,"getBottomVisibleIndex",(()=>{const e=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(e,this._getHeight)})),g(this,"getTopVisibleIndex",(()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight))),g(this,"getRowPosition",(e=>this._yPositions.getRowPosition(e,this._getHeight))),g(this,"scrollToIndex",(e=>{var t,n;const{scrollElement:s}=this.props,a=(null==s?void 0:s.getBoundingClientRect().top)||0,i=((null==s?void 0:s.scrollTop)||0)+((null===(t=this._itemHolderElm)||void 0===t?void 0:t.getBoundingClientRect().top)||0)-a,r=this.getRowPosition(e).y;null===(n=this.props.scrollElement)||void 0===n||n.scrollTo({top:r+i-80})})),g(this,"_onScroll",(()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))})),g(this,"_positionList",(()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const e=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,t=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(e<this._startIndexDrawn||t>this._endIndexDrawn)&&this.forceUpdate()})),g(this,"_initWrapper",(e=>{this.props.windowScroller&&(this._wrapperElm=e,e&&(this._viewHeight=e.clientHeight))})),g(this,"_initItemHolder",(e=>{this._itemHolderElm=e,this._scanItemHeights()})),g(this,"_scanItemHeights",(()=>{const e=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let t=null,n=null,s=!1;const a=this._itemHolderElm.childNodes,i=a.length;for(let e=0;e<i;e++){const i=a[e],r=i.getAttribute("data-item-key");if(!r){console.warn("itemKey not found");continue}const o=(i.firstElementChild||i).clientHeight;o!==this._knownHeights.get(r)&&(this._knownHeights.set(r,o),s?n=r:(s=!0,t=n=r))}if(null!=t&&null!=n){const s=e(t),a=n===t?s:e(n);this._yPositions.calcHeights(a,this._getHeight,s),this.forceUpdate()}})),g(this,"_getHeight",(e=>{const t=this.props.getKeyFromIndex(e),n=this._knownHeights.get(t);return null!=n&&n==n?n:this.props.itemHeightGetter(e,t)})),this._yPositions=new h(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-1048576,this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:e}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=e+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else{var e;this._wrapperElm=this.props.scrollElement,null===(e=this._wrapperElm)||void 0===e||e.addEventListener("scroll",this._onScroll)}}componentDidUpdate(e){var t,n;(this._itemHolderElm&&this._scanItemHeights(),this.props.windowScroller)||e.scrollElement!==this.props.scrollElement&&(null===(t=e.scrollElement)||void 0===t||t.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,null===(n=this._wrapperElm)||void 0===n||n.addEventListener("scroll",this._onScroll))}componentWillUnmount(){var e;this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):null===(e=this._wrapperElm)||void 0===e||e.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const e=this.props.windowScroller,t=e?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,n=e?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return t!==this._viewHeight||n!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm)return this._viewHeight=-1,this._startIndex=0,void(this._endIndex=0);this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const e=this._scrollTop,t=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(e,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(t,this._getHeight)}render(){const{dataLength:e,getKeyFromIndex:t,initialDraw:n=m,itemRenderer:s,viewBuffer:a,viewBufferMin:i}=this.props,r=this._getHeight,o=[];let l,d;if(this._yPositions.profileData(e),this._wrapperElm){this._isViewChanged()&&this._calcViewIndexes();const t=i>this._startIndex?0:this._startIndex-i,n=i<e-this._endIndex?this._endIndex+i:e-1;t<this._startIndexDrawn||n>this._endIndexDrawn?(l=a>this._startIndex?0:this._startIndex-a,d=this._endIndex+a,d>=e&&(d=e-1)):(l=this._startIndexDrawn,d=this._endIndexDrawn>e-1?e-1:this._endIndexDrawn)}else l=0,d=(n<e?n:e)-1;this._yPositions.calcHeights(d,r,l||-1),this._startIndexDrawn=l,this._endIndexDrawn=d,o.length=d-l+1;for(let e=l;e<=d;e++){const{y:n,height:a}=this._yPositions.getRowPosition(e,r),i={height:a,top:n,position:"absolute"},l=t(e),d={"data-item-key":l};o.push(s(l,i,e,d))}const c={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(c.onScroll=this._onScroll,c.style.height="100%",c.style.overflowY="auto");const u={position:"relative",height:this._yPositions.getEstimatedHeight()};return(0,p.jsx)("div",Object.assign({},c,{children:(0,p.jsx)("div",{style:u,children:(0,p.jsx)("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder,children:o})})}))}}g(f,"defaultProps",{initialDraw:m,itemsWrapperClassName:"",windowScroller:!1});var v=n(23019),b=n.n(v),x=n(62969),y=n.n(x),w=n(29796),j=n.n(w),S=n(65993),C=n(2726),k=n(25004),N=n(43259),O=n(5762);function I(e){let{children:t,content:n,overlayClassName:s}=e;const a=(0,r.useRef)(null);return(0,p.jsx)(N.D,{content:n,hideAfter:300,children:(e,n,i)=>(0,p.jsxs)(p.Fragment,{children:[a.current&&(0,p.jsx)(O.J,Object.assign({},i,{referenceElement:a.current,wrapperClassName:s,onMouseLeave:n,onMouseEnter:e})),r.cloneElement(t,{ref:a,onMouseEnter:e,onMouseLeave:n})]})})}var T=n(65188),$=n.n(T),R=n(94961),P=n.n(R),D=n(74147),A=n(40930);var M=n(18440),L=n.n(M),F=n(99500),E=n(81582),V=n.n(E),z=n(21888),B=n(8006);const _=()=>({CopyIcon:s.iv`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function W(e){const t=(0,d.wW)(_),[n,s]=(0,r.useState)(!1);return(0,p.jsx)(z.u,{content:n?"Copied":e.tooltipTitle,children:(0,p.jsx)(B.zx,{className:b()(t.CopyIcon),type:"button",icon:e.icon,onClick:()=>{V()(e.copyText),s(!0)}})})}var U;W.defaultProps={icon:"copy",className:void 0};const H="copyIcon",q=e=>({KeyValueTable:s.iv`
      label: KeyValueTable;
      background: ${(0,S.h)(e,"#fff")};
      border: 1px solid ${(0,S.h)(e,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:s.iv`
      label: body;
      vertical-align: baseline;
    `,row:s.iv`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,S.h)(e,"#f5f5f5")};
      }
      &:not(:hover) .${H} {
        visibility: hidden;
      }
    `,keyColumn:s.iv`
      label: keyColumn;
      color: ${(0,S.h)(e,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:s.iv`
      label: copyColumn;
      text-align: right;
    `,linkIcon:s.iv`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),Z=/^(\[|\{)/;function G(e){if("string"==typeof e&&Z.test(e))try{return JSON.parse(e)}catch(e){}return e}const Q=e=>(0,p.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",children:[e.children," ",U||(U=(0,p.jsx)(F.J,{name:"external-link-alt"}))]});function K(e){const{data:t,linksGetter:n}=e,s=(0,d.wW)(q);return(0,p.jsx)("div",{className:b()(s.KeyValueTable),"data-testid":"KeyValueTable",children:(0,p.jsx)("table",{className:D.K9,children:(0,p.jsx)("tbody",{className:s.body,children:t.map(((e,a)=>{const i={__html:L()(G(e.value))},r=(0,p.jsx)("div",{className:D.b$,dangerouslySetInnerHTML:i}),o=n?n(t,a):null;let l;return l=o&&o.length?(0,p.jsx)("div",{children:(0,p.jsx)(Q,{href:o[0].url,title:o[0].text,children:r})}):r,(0,p.jsxs)("tr",{className:s.row,children:[(0,p.jsx)("td",{className:s.keyColumn,"data-testid":"KeyValueTable--keyColumn",children:e.key}),(0,p.jsx)("td",{children:l}),(0,p.jsx)("td",{className:s.copyColumn,children:(0,p.jsx)(W,{className:H,copyText:JSON.stringify(e,null,2),tooltipTitle:"Copy JSON"})})]},`${e.key}-${a}`)}))})})})}Q.defaultProps={title:""};const J=e=>({header:s.iv`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,S.h)(e,"#e8e8e8")};
      }
    `,headerEmpty:s.iv`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:s.iv`
      label: headerHighContrast;
      &:hover {
        background: ${(0,S.h)(e,"#ddd")};
      }
    `,emptyIcon:s.iv`
      label: emptyIcon;
      color: ${(0,S.h)(e,"#aaa")};
    `,summary:s.iv`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:s.iv`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,S.h)(e,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:s.iv`
      label: summaryLabel;
      color: ${(0,S.h)(e,"#777")};
    `,summaryDelim:s.iv`
      label: summaryDelim;
      color: ${(0,S.h)(e,"#bbb")};
      padding: 0 0.2em;
    `});function Y(e){const{data:t}=e,n=(0,d.wW)(J);return Array.isArray(t)&&t.length?(0,p.jsx)("ul",{className:n.summary,children:t.map(((e,t)=>(0,p.jsxs)("li",{className:n.summaryItem,children:[(0,p.jsx)("span",{className:n.summaryLabel,children:e.key}),(0,p.jsx)("span",{className:n.summaryDelim,children:"="}),String(e.value)]},`${e.key}-${t}`)))}):null}function X(e){const{className:t,data:n,highContrast:s,interactive:a,isOpen:i,label:r,linksGetter:o,onToggle:l}=e,c=!Array.isArray(n)||!n.length,u=(0,d.wW)(J),h=b()(D.Im,{[u.emptyIcon]:c});let g=null,m=null;return a&&(g=i?(0,p.jsx)($(),{className:h}):(0,p.jsx)(P(),{className:h}),m={"aria-checked":i,onClick:c?null:l,role:"switch"}),(0,p.jsxs)("div",{className:b()(t,D.ty),children:[(0,p.jsxs)("div",Object.assign({className:b()(u.header,{[u.headerEmpty]:c,[u.headerHighContrast]:s&&!c})},m,{"data-testid":"AccordianKeyValues--header",children:[g,(0,p.jsxs)("strong",{"data-test":"label",children:[r,i||":"]}),!i&&(0,p.jsx)(Y,{data:n})]})),i&&(0,p.jsx)(K,{data:n,linksGetter:o})]})}var ee,te,ne;Y.defaultProps={data:null},X.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const se=e=>({AccordianLogs:s.iv`
      label: AccordianLogs;
      border: 1px solid ${(0,S.h)(e,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:s.iv`
      label: AccordianLogsHeader;
      background: ${(0,S.h)(e,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,S.h)(e,"#dadada")};
      }
    `,AccordianLogsContent:s.iv`
      label: AccordianLogsContent;
      background: ${(0,S.h)(e,"#f0f0f0")};
      border-top: 1px solid ${(0,S.h)(e,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:s.iv`
      label: AccordianLogsFooter;
      color: ${(0,S.h)(e,"#999")};
    `});function ae(e){const{interactive:t,isOpen:n,linksGetter:s,logs:i,openedItems:r,onItemToggle:o,onToggle:l,timestamp:c}=e;let u=null,h="span",g=null;t&&(u=n?ee||(ee=(0,p.jsx)($(),{className:D.Im})):te||(te=(0,p.jsx)(P(),{className:"u-align-icon"})),h="a",g={"aria-checked":n,onClick:l,role:"switch"});const m=(0,d.wW)(se);return(0,p.jsxs)("div",{className:m.AccordianLogs,children:[(0,p.jsxs)(h,Object.assign({className:m.AccordianLogsHeader},g,{children:[u," ",ne||(ne=(0,p.jsx)("strong",{children:"Events"}))," (",i.length,")"]})),n&&(0,p.jsxs)("div",{className:m.AccordianLogsContent,children:[(0,a.sortBy)(i,"timestamp").map(((e,n)=>(0,p.jsx)(X,{className:n<i.length-1?D.bi:null,data:e.fields||[],highContrast:!0,interactive:t,isOpen:!!r&&r.has(e),label:`${(0,A.LU)(e.timestamp-c)}`,linksGetter:s,onToggle:t&&o?()=>o(e):null},`${e.timestamp}-${n}`))),(0,p.jsx)("small",{className:m.AccordianLogsFooter,children:"Log timestamps are relative to the start time of the full trace."})]})]})}ae.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ie=e=>({wrapper:s.iv`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:s.iv`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:s.iv`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:s.iv`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:s.iv`
      label: logMarker;
      background-color: ${(0,S.h)(e,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,S.h)(e,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function re(e){return`${(100*e).toFixed(1)}%`}function oe(e){let{viewEnd:t,viewStart:n,getViewedBounds:s,color:i,shortLabel:o,longLabel:l,onClick:c,rpc:u,traceStartTime:h,span:g,className:m,labelClassName:f}=e;const[v,x]=(0,r.useState)(o),y=()=>x(o),w=()=>x(l),j=(0,a.groupBy)(g.logs,(e=>{const t=s(e.timestamp,e.timestamp).start;return re(Math.round(500*t)/500)})),S=(0,d.wW)(ie);return(0,p.jsxs)("div",{className:b()(S.wrapper,m),onBlur:y,onClick:c,onFocus:w,onMouseOut:y,onMouseOver:w,"aria-hidden":!0,"data-testid":k.wl.components.TraceViewer.spanBar,children:[(0,p.jsx)("div",{"aria-label":v,className:S.bar,style:{background:i,left:re(n),width:re(t-n)},children:(0,p.jsx)("div",{className:b()(S.label,f),"data-testid":"SpanBar--label",children:v})}),(0,p.jsx)("div",{children:Object.keys(j).map((e=>(0,p.jsx)(I,{content:(0,p.jsx)(ae,{interactive:!1,isOpen:!0,logs:j[e],timestamp:h}),children:(0,p.jsx)("div",{"data-testid":"SpanBar--logMarker",className:S.logMarker,style:{left:e}})},e)))}),u&&(0,p.jsx)("div",{className:S.rpc,style:{background:u.color,left:re(u.viewStart),width:re(u.viewEnd-u.viewStart)}})]})}const le=r.memo(oe);var de=n(9655),ce=n(21357),ue=n(33514);const he=e=>{let{links:t}=e;const n=(0,d.wW)(pe),[s,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)({x:0,y:0}),l=()=>a(!1);return(0,p.jsxs)("div",{"data-testid":"SpanLinksMenu",children:[(0,p.jsx)("button",{onClick:e=>{a(!0),o({x:e.pageX,y:e.pageY})},className:n.button,children:(0,p.jsx)(F.J,{name:"link",className:n.button})}),s?(0,p.jsx)(ue.x,{onClose:()=>a(!1),renderMenuItems:()=>((e,t,n)=>{var s,a,i;return(0,p.jsxs)(p.Fragment,{children:[null!==(s=e.logLinks)&&void 0!==s&&s.length?(0,p.jsx)(de.k,{label:"Logs",children:e.logLinks.map(((e,s)=>(0,p.jsx)(ce.s,{label:"Logs for this span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},s)))}):null,null!==(a=e.metricLinks)&&void 0!==a&&a.length?(0,p.jsx)(de.k,{label:"Metrics",children:e.metricLinks.map(((e,s)=>{var a;return(0,p.jsx)(ce.s,{label:null!==(a=e.title)&&void 0!==a?a:"Metrics for this span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},s)}))}):null,null!==(i=e.traceLinks)&&void 0!==i&&i.length?(0,p.jsx)(de.k,{label:"Traces",children:e.traceLinks.map(((e,s)=>{var a;return(0,p.jsx)(ce.s,{label:null!==(a=e.title)&&void 0!==a?a:"View linked span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},s)}))}):null]})})(t,n,l),focusOnOpen:!0,x:i.x,y:i.y}):null]})},pe=()=>({button:s.iv`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:s.iv`
      max-width: 60ch;
      overflow: hidden;
    `});var ge,me,fe=n(51290),ve=n.n(fe);function be(e){return(0,a.get)((0,a.find)(e.references,(e=>{let{span:t,refType:n}=e;return t&&t.spanID&&("CHILD_OF"===n||"FOLLOWS_FROM"===n)})),"span")}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ye=(0,o.B)((e=>({SpanTreeOffset:s.iv`
      label: SpanTreeOffset;
      color: ${(0,S.h)(e,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:s.iv`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:s.iv`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,S.h)(e,"lightgrey")};
      }
    `,indentGuideActive:s.iv`
      label: indentGuideActive;
      border-color: ${(0,S.h)(e,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:s.iv`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `})));class we extends r.PureComponent{constructor(e){super(e),xe(this,"ancestorIds",void 0),xe(this,"handleMouseLeave",((e,t)=>{e.relatedTarget instanceof HTMLSpanElement&&(0,a.get)(e,"relatedTarget.dataset.ancestorId")===t||this.props.removeHoverIndentGuideId(t)})),xe(this,"handleMouseEnter",((e,t)=>{e.relatedTarget instanceof HTMLSpanElement&&(0,a.get)(e,"relatedTarget.dataset.ancestorId")===t||this.props.addHoverIndentGuideId(t)})),this.ancestorIds=function(e){const t=[];if(!e)return t;let n=be(e);for(;n;)t.push(n.spanID),n=be(n);return t}(e.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:e,onClick:t,showChildrenIcon:n,span:s,theme:a}=this.props,{hasChildren:i,spanID:r}=s,o=i?{onClick:t,role:"switch","aria-checked":e}:null,l=n&&i&&(e?ge||(ge=(0,p.jsx)($(),{"data-testid":"icon-arrow-down"})):me||(me=(0,p.jsx)(ve(),{"data-testid":"icon-arrow-right"}))),d=ye(a);return(0,p.jsxs)("span",Object.assign({className:b()(d.SpanTreeOffset,{[d.SpanTreeOffsetParent]:i})},o,{children:[this.ancestorIds.map((e=>(0,p.jsx)("span",{className:b()(d.indentGuide,{[d.indentGuideActive]:this.props.hoverIndentGuideIds.has(e)}),"data-ancestor-id":e,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:t=>this.handleMouseEnter(t,e),onMouseLeave:t=>this.handleMouseLeave(t,e)},e))),l&&(0,p.jsx)("span",{className:d.iconWrapper,onMouseEnter:e=>this.handleMouseEnter(e,r),onMouseLeave:e=>this.handleMouseLeave(e,r),"data-testid":"icon-wrapper",children:l})]}))}}xe(we,"displayName","UnthemedSpanTreeOffset"),xe(we,"defaultProps",{childrenVisible:!1,showChildrenIcon:!0});const je=(0,d.HE)(we);var Se,Ce,ke=n(50814),Ne=n(99437);function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ie="spanBar",Te="spanBarLabel",$e="nameWrapper",Re="nameWrapperMatchingFilter",Pe="jaegerView",De="nameColumn",Ae=(0,o.B)((e=>{const t=s.F4`
    label: flash;
    from {
      background-color: ${(0,S.h)(e,"#68b9ff")};
    }
    to {
      background-color: default;
    }
  `;return{nameWrapper:s.iv`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:s.iv`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,S.h)(e,"#fffce4")};
    `,nameColumn:s.iv`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:s.iv`
      label: endpointName;
      color: ${(0,S.h)(e,"#808080")};
    `,view:s.iv`
      label: view;
      position: relative;
    `,viewExpanded:s.iv`
      label: viewExpanded;
      background: ${(0,S.h)(e,"#f8f8f8")};
      outline: 1px solid ${(0,S.h)(e,"#ddd")};
    `,viewExpandedAndMatchingFilter:s.iv`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,S.h)(e,"#fff3d7")};
      outline: 1px solid ${(0,S.h)(e,"#ddd")};
    `,row:s.iv`
      label: row;
      &:hover .${Ie} {
        opacity: 1;
      }
      &:hover .${Te} {
        color: ${(0,S.h)(e,"#000")};
      }
      &:hover .${$e} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,S.h)(e,"#fafafa")},
          ${(0,S.h)(e,"#f8f8f8")} 75%,
          ${(0,S.h)(e,"#eee")}
        );
      }
      &:hover .${Pe} {
        background-color: ${(0,S.h)(e,"#f5f5f5")};
        outline: 1px solid ${(0,S.h)(e,"#ddd")};
      }
    `,rowClippingLeft:s.iv`
      label: rowClippingLeft;
      & .${De}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,S.h)(e,"rgba(25, 25, 25, 0.25)")},
          ${(0,S.h)(e,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:s.iv`
      label: rowClippingRight;
      & .${Pe}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,S.h)(e,"rgba(25, 25, 25, 0.25)")},
          ${(0,S.h)(e,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:s.iv`
      label: rowExpanded;
      & .${Ie} {
        opacity: 1;
      }
      & .${Te} {
        color: ${(0,S.h)(e,"#000")};
      }
      & .${$e}, &:hover .${$e} {
        background: ${(0,S.h)(e,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,S.h)(e,"#ddd")};
      }
      & .${Re} {
        background: ${(0,S.h)(e,"#fff3d7")};
      }
      &:hover .${Pe} {
        background: ${(0,S.h)(e,"#eee")};
      }
    `,rowMatchingFilter:s.iv`
      label: rowMatchingFilter;
      background-color: ${(0,S.h)(e,"#fffbde")};
      &:hover .${$e} {
        background: linear-gradient(
          90deg,
          ${(0,S.h)(e,"#fffbde")},
          ${(0,S.h)(e,"#fffbde")} 75%,
          ${(0,S.h)(e,"#f7f1c6")}
        );
      }
      &:hover .${Pe} {
        background-color: ${(0,S.h)(e,"#f7f1c6")};
        outline: 1px solid ${(0,S.h)(e,"#ddd")};
      }
    `,rowFocused:s.iv`
      label: rowFocused;
      background-color: ${(0,S.h)(e,"#cbe7ff")};
      animation: ${t} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${$e}, .${Pe}, .${Re} {
        background-color: ${(0,S.h)(e,"#cbe7ff")};
        animation: ${t} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ie} {
        opacity: 1;
      }
      & .${Te} {
        color: ${(0,S.h)(e,"#000")};
      }
      &:hover .${$e}, :hover .${Pe} {
        background: ${(0,S.h)(e,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,S.h)(e,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:s.iv`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Pe} {
        background: ${(0,S.h)(e,"#ffeccf")};
      }
    `,name:s.iv`
      label: name;
      color: ${(0,S.h)(e,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,S.h)(e,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:s.iv`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:s.iv`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:s.iv`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:s.iv`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,S.h)(e,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:s.iv`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:s.iv`
      label: labelRight;
      left: 100%;
    `,labelLeft:s.iv`
      label: labelLeft;
      right: 100%;
    `}}));class Me extends r.PureComponent{constructor(){super(...arguments),Oe(this,"_detailToggle",(()=>{this.props.onDetailToggled(this.props.span.spanID)})),Oe(this,"_childrenToggle",(()=>{this.props.onChildrenToggled(this.props.span.spanID)})),Oe(this,"getSpanBarLabel",((e,t,n)=>{var s;const a=null!==(s=null==t?void 0:t.type)&&void 0!==s?s:"";if(a===C.Hn)return"";if(""===a||a===C.th)return`(${n})`;if(a===C.Kg){var i,r;const n=null!==(i=null==t||null===(r=t.tag)||void 0===r?void 0:r.trim())&&void 0!==i?i:"";if(""!==n&&e.tags){var o,l,d;const t=null===(o=e.tags)||void 0===o?void 0:o.find((e=>e.key===n)),s=null===(l=e.process)||void 0===l||null===(d=l.tags)||void 0===d?void 0:d.find((e=>e.key===n));if(t)return`(${t.value})`;if(s)return`(${s.value})`}}return""}))}render(){const{className:e,color:t,spanBarOptions:n,columnDivision:s,isChildrenExpanded:a,isDetailExpanded:i,isMatchingFilter:r,isFocused:o,numTicks:l,rpc:d,noInstrumentedServer:c,showErrorIcon:u,getViewedBounds:h,traceStartTime:g,span:m,hoverIndentGuideIds:f,addHoverIndentGuideId:v,removeHoverIndentGuideId:x,clippingLeft:w,clippingRight:C,theme:k,createSpanLink:N}=this.props,{duration:O,hasChildren:I,operationName:T,process:{serviceName:$}}=m,R=(0,A.LU)(O),P=h(m.startTime,m.startTime+m.duration),D=P.start,M=P.end,L=Ae(k),F=`${$}::${T}`;let E,V;D>1-M?(E=`${F} | ${R}`,V=L.labelLeft):(E=`${R} | ${F}`,V=L.labelRight);return(0,p.jsxs)(Ne.Z,{className:b()(L.row,{[L.rowExpanded]:i,[L.rowMatchingFilter]:r,[L.rowExpandedAndMatchingFilter]:r&&i,[L.rowFocused]:o,[L.rowClippingLeft]:w,[L.rowClippingRight]:C},e),children:[(0,p.jsx)(Ne.Z.Cell,{className:b()(L.nameColumn,De),width:s,children:(0,p.jsxs)("div",{className:b()(L.nameWrapper,$e,{[L.nameWrapperMatchingFilter]:r,nameWrapperMatchingFilter:r}),children:[(0,p.jsx)(je,{onClick:I?this._childrenToggle:void 0,childrenVisible:a,span:m,hoverIndentGuideIds:f,addHoverIndentGuideId:v,removeHoverIndentGuideId:x}),(0,p.jsxs)("button",{type:"button",className:b()(L.name,{[L.nameDetailExpanded]:i}),"aria-checked":i,title:F,onClick:this._detailToggle,role:"switch",style:{borderColor:t},tabIndex:0,children:[(0,p.jsxs)("span",{className:b()(L.svcName,{[L.svcNameChildrenCollapsed]:I&&!a}),children:[u&&(0,p.jsx)(y(),{style:{backgroundColor:m.errorIconColor?(0,S.h)(k,m.errorIconColor):(0,S.h)(k,"#db2828")},className:L.errorIcon}),$," ",d&&(0,p.jsxs)("span",{children:[Se||(Se=(0,p.jsx)(j(),{}))," ",(0,p.jsx)("i",{className:L.rpcColorMarker,style:{background:d.color}}),d.serviceName]}),c&&(0,p.jsxs)("span",{children:[Ce||(Ce=(0,p.jsx)(j(),{}))," ",(0,p.jsx)("i",{className:L.rpcColorMarker,style:{background:c.color}}),c.serviceName]})]}),(0,p.jsx)("small",{className:L.endpointName,children:d?d.operationName:T}),(0,p.jsxs)("small",{className:L.endpointName,children:[" ",this.getSpanBarLabel(m,n,R)]})]}),N&&(()=>{const e=N(m),t=(e=>e?Object.values(e).reduce(((e,t)=>e+t.length),0):0)(e);if(e&&1===t){var n,s,a,i,r,o;const t=null!==(n=null!==(s=null!==(a=null===(i=e.logLinks)||void 0===i?void 0:i[0])&&void 0!==a?a:null===(r=e.metricLinks)||void 0===r?void 0:r[0])&&void 0!==s?s:null===(o=e.traceLinks)||void 0===o?void 0:o[0])&&void 0!==n?n:void 0;return t?(0,p.jsx)("a",{href:t.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:t.onClick?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!t.onClick||(e.preventDefault(),t.onClick(e))}:void 0,children:t.content}):null}return e&&t>1?(0,p.jsx)(he,{links:e}):null})()]})}),(0,p.jsxs)(Ne.Z.Cell,{className:b()(L.view,Pe,{[L.viewExpanded]:i,[L.viewExpandedAndMatchingFilter]:r&&i}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-s,onClick:this._detailToggle,children:[(0,p.jsx)(ke.Z,{numTicks:l}),(0,p.jsx)(le,{rpc:d,viewStart:D,viewEnd:M,getViewedBounds:h,color:t,shortLabel:R,longLabel:E,traceStartTime:g,span:m,labelClassName:`spanBarLabel ${V}`,className:Ie})]})]})}}Oe(Me,"displayName","UnthemedSpanBarRow"),Oe(Me,"defaultProps",{className:"",rpc:null});const Le=(0,d.HE)(Me);var Fe=n(90962),Ee=n.n(Fe),Ve=n(6432),ze=n(30873),Be=n(93194);const _e=e=>({Divider:s.iv`
      background: ${(0,S.h)(e,"#ddd")};
    `,DividerVertical:s.iv`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:s.iv`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function We(e){let{className:t,style:n,type:a}=e;const i=(0,d.wW)(_e);return(0,p.jsx)("div",{style:n,className:(0,s.cx)(i.Divider,"horizontal"===a?i.DividerHorizontal:i.DividerVertical,t)})}var Ue,He,qe,Ze,Ge=n(77267);function Qe(e){const{reference:t,children:n,createFocusSpanLink:s}=e,a=s(t.traceID,t.spanID);return(0,p.jsx)("a",{href:a.href,target:a.target,rel:"noopener noreferrer",onClick:a.onClick?e=>{e.preventDefault(),a.onClick(e)}:void 0,children:n})}const Ke=e=>({AccordianReferenceItem:s.iv`
      border-bottom: 1px solid ${(0,S.h)(e,"#d8d8d8")};
    `,AccordianKeyValues:s.iv`
      margin-left: 10px;
    `,AccordianReferences:s.iv`
      label: AccordianReferences;
      border: 1px solid ${(0,S.h)(e,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:s.iv`
      label: AccordianReferencesHeader;
      background: ${(0,S.h)(e,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,S.h)(e,"#dadada")};
      }
    `,AccordianReferencesContent:s.iv`
      label: AccordianReferencesContent;
      background: ${(0,S.h)(e,"#f0f0f0")};
      border-top: 1px solid ${(0,S.h)(e,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:s.iv`
      label: AccordianReferencesFooter;
      color: ${(0,S.h)(e,"#999")};
    `,ReferencesList:s.iv`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:s.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:s.iv`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:s.iv`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:s.iv`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:s.iv`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:s.iv`
      margin-right: 8px;
    `,title:s.iv`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Je(e){const{data:t,createFocusSpanLink:n,openedItems:a,onItemToggle:i,interactive:r}=e,o=(0,d.wW)(Ke);return(0,p.jsx)("div",{className:o.AccordianReferencesContent,children:t.map(((e,l)=>{var d;return(0,p.jsxs)("div",{className:l<t.length-1?o.AccordianReferenceItem:void 0,children:[(0,p.jsx)("div",{className:o.item,children:(0,p.jsx)(Qe,{reference:e,createFocusSpanLink:n,children:(0,p.jsxs)("span",{className:o.itemContent,children:[e.span?(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{className:(0,s.cx)("span-svc-name",o.serviceName),children:e.span.process.serviceName}),(0,p.jsx)("small",{className:"endpoint-name",children:e.span.operationName})]}):(0,p.jsxs)("span",{className:(0,s.cx)("span-svc-name",o.title),children:["View Linked Span ",Ue||(Ue=(0,p.jsx)(F.J,{name:"external-link-alt"}))]}),(0,p.jsxs)("small",{className:o.debugInfo,children:[(0,p.jsx)("span",{className:o.debugLabel,"data-label":"TraceID:",children:e.traceID}),(0,p.jsx)("span",{className:o.debugLabel,"data-label":"SpanID:",children:e.spanID})]})]})})},`${e.spanID}`),!(null===(d=e.tags)||void 0===d||!d.length)&&(0,p.jsx)("div",{className:o.AccordianKeyValues,children:(0,p.jsx)(X,{className:l<t.length-1?D.bi:null,data:e.tags||[],highContrast:!0,interactive:r,isOpen:!!a&&a.has(e),label:"attributes",linksGetter:null,onToggle:r&&i?()=>i(e):null})})]},l)}))})}const Ye=e=>{let{data:t,interactive:n=!0,isOpen:s,onToggle:a,onItemToggle:i,openedItems:r,createFocusSpanLink:o}=e;const l=!Array.isArray(t)||!t.length;let c=null,u="span",h=null;n&&(c=s?He||(He=(0,p.jsx)($(),{className:D.Im})):qe||(qe=(0,p.jsx)(P(),{className:D.Im})),u="a",h={"aria-checked":s,onClick:l?null:a,role:"switch"});const g=(0,d.wW)(Ke);return(0,p.jsxs)("div",{className:g.AccordianReferences,children:[(0,p.jsxs)(u,Object.assign({className:g.AccordianReferencesHeader},h,{children:[c,Ze||(Ze=(0,p.jsx)("strong",{children:(0,p.jsx)("span",{children:"References"})}))," ","(",t.length,")"]})),s&&(0,p.jsx)(Je,{data:t,openedItems:r,createFocusSpanLink:o,onItemToggle:i,interactive:n})]})},Xe=r.memo(Ye),et=()=>({TextList:s.iv`
      max-height: 450px;
      overflow: auto;
    `,List:s.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:s.iv`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function tt(e){const{data:t}=e,n=(0,d.wW)(et);return(0,p.jsx)("div",{className:b()(n.TextList),"data-testid":"TextList",children:(0,p.jsx)("ul",{className:n.List,children:t.map(((e,t)=>(0,p.jsx)("li",{className:n.item,children:e},`${t}`)))})})}const nt=e=>({header:s.iv`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,S.h)(e,"#e8e8e8")};
      }
    `});function st(e){let{data:t}=e;return(0,p.jsx)(tt,{data:t})}function at(e){const{className:t,data:n,headerClassName:s,interactive:a,isOpen:i,label:r,onToggle:o,TextComponent:l=st}=e,c=!Array.isArray(n)||!n.length,u=(0,d.wW)(J),h=b()(D.Im,{[u.emptyIcon]:c});let g=null,m=null;a&&(g=i?(0,p.jsx)($(),{className:h}):(0,p.jsx)(P(),{className:h}),m={"aria-checked":i,onClick:c?null:o,role:"switch"});const f=(0,d.wW)(nt);return(0,p.jsxs)("div",{className:t||"",children:[(0,p.jsxs)("div",Object.assign({className:b()(f.header,s)},m,{"data-testid":"AccordianText--header",children:[g,(0,p.jsx)("strong",{children:r})," (",n.length,")"]})),i&&(0,p.jsx)(l,{data:n})]})}var it;at.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const rt=e=>({header:s.iv`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:s.iv`
      overflow: hidden;
    `,debugInfo:s.iv`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:s.iv`
      label: debugLabel;
      &::before {
        color: ${(0,S.h)(e,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:s.iv`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,S.h)(e,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,S.h)(e,"#333")};
      }
    `,AccordianWarnings:s.iv`
      label: AccordianWarnings;
      background: ${(0,S.h)(e,"#fafafa")};
      border: 1px solid ${(0,S.h)(e,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:s.iv`
      label: AccordianWarningsHeader;
      background: ${(0,S.h)(e,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,S.h)(e,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:s.iv`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,S.h)(e,"#e8e8e8")};
    `,AccordianWarningsLabel:s.iv`
      label: AccordianWarningsLabel;
      color: ${(0,S.h)(e,"#d36c08")};
    `,Textarea:s.iv`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:s.iv`
      font-size: 1.5em;
    `});function ot(e){var t,n;const{detailState:s,linksGetter:a,logItemToggle:i,logsToggle:r,processToggle:o,span:l,tagsToggle:c,traceStartTime:u,warningsToggle:h,stackTracesToggle:g,referencesToggle:m,referenceItemToggle:f,createSpanLink:v,createFocusSpanLink:x,topOfViewRefType:y}=e,{isTagsOpen:w,isProcessOpen:j,logs:S,isWarningsOpen:C,references:k,isStackTracesOpen:N}=s,{operationName:O,process:I,duration:T,relativeStartTime:$,startTime:R,traceID:P,spanID:M,logs:L,tags:F,warnings:E,references:V,stackTraces:z}=l,{timeZone:B}=e,_=[{key:"svc",label:"Service:",value:I.serviceName},{key:"duration",label:"Duration:",value:(0,A.LU)(T)},{key:"start",label:"Start Time:",value:(0,A.LU)($)+lt(R,B)},...l.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:l.childSpanCount}]:[]],W=(0,d.wW)(rt),U=null==v?void 0:v(l),H=x(P,M);return(0,p.jsxs)("div",{"data-testid":"span-detail-component",children:[(0,p.jsxs)("div",{className:W.header,children:[(0,p.jsx)("h2",{className:b()(D.h2),children:O}),(0,p.jsx)("div",{className:W.listWrapper,children:(0,p.jsx)(Ge.Z,{className:D.xb,divider:!0,items:_})})]}),null!=U&&null!==(t=U.logLinks)&&void 0!==t&&t[0]?(0,p.jsx)(ze.k,{link:Object.assign({},null==U||null===(n=U.logLinks)||void 0===n?void 0:n[0],{title:"Logs for this span"}),buttonProps:{icon:"gf-logs"}}):null,it||(it=(0,p.jsx)(We,{className:D.im,type:"horizontal"})),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(X,{data:F,label:"Attributes",linksGetter:a,isOpen:w,onToggle:()=>c(M)}),I.tags&&(0,p.jsx)(X,{className:D.bi,data:I.tags,label:"Resource",linksGetter:a,isOpen:j,onToggle:()=>o(M)})]}),L&&L.length>0&&(0,p.jsx)(ae,{linksGetter:a,logs:L,isOpen:S.isOpen,openedItems:S.openedItems,onToggle:()=>r(M),onItemToggle:e=>i(M,e),timestamp:u}),E&&E.length>0&&(0,p.jsx)(at,{className:W.AccordianWarnings,headerClassName:W.AccordianWarningsHeader,label:(0,p.jsx)("span",{className:W.AccordianWarningsLabel,children:"Warnings"}),data:E,isOpen:C,onToggle:()=>h(M)}),z&&z.length&&(0,p.jsx)(at,{label:"Stack trace",data:z,isOpen:N,TextComponent:e=>{var t;let n;var s;(null===(t=e.data)||void 0===t?void 0:t.length)>1?n=e.data.map(((e,t)=>`StackTrace ${t+1}:\n${e}`)).join("\n"):n=null===(s=e.data)||void 0===s?void 0:s[0];return(0,p.jsx)(Be.K,{className:W.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:n})},onToggle:()=>g(M)}),V&&V.length>0&&(V.length>1||"CHILD_OF"!==V[0].refType)&&(0,p.jsx)(Xe,{data:V,isOpen:k.isOpen,openedItems:k.openedItems,onToggle:()=>m(M),onItemToggle:e=>f(M,e),createFocusSpanLink:x}),y===mt.Explore&&(0,p.jsxs)("small",{className:W.debugInfo,children:[(0,p.jsx)("a",Object.assign({},H,{onClick:e=>{!H.onClick||0!==e.button||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(e.preventDefault(),H.onClick(e))},children:(0,p.jsx)(Ee(),{className:b()(D.Im,W.LinkIcon)})})),(0,p.jsx)("span",{className:W.debugLabel,"data-label":"SpanID:"})," ",M]})]})]})}const lt=(e,t)=>{const n=(0,Ve.dq)(e/1e3,{timeZone:t,defaultWithMS:!0}),s=n.split(" ");return` (${s[1]?s[1]:n})`};function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ct=(0,o.B)((e=>({expandedAccent:s.iv`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:s.iv`
      label: infoWrapper;
      border: 1px solid ${(0,S.h)(e,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `})));class ut extends r.PureComponent{constructor(){super(...arguments),dt(this,"_detailToggle",(()=>{this.props.onDetailToggled(this.props.span.spanID)})),dt(this,"_linksGetter",((e,t)=>{const{linksGetter:n,span:s}=this.props;return n(s,e,t)}))}render(){const{color:e,columnDivision:t,detailState:n,logItemToggle:s,logsToggle:a,processToggle:i,referenceItemToggle:r,referencesToggle:o,warningsToggle:l,stackTracesToggle:d,span:c,timeZone:u,tagsToggle:h,traceStartTime:g,hoverIndentGuideIds:m,addHoverIndentGuideId:f,removeHoverIndentGuideId:v,theme:b,createSpanLink:x,focusedSpanId:y,createFocusSpanLink:w,topOfViewRefType:j}=this.props,S=ct(b);return(0,p.jsxs)(Ne.Z,{children:[(0,p.jsxs)(Ne.Z.Cell,{width:t,style:{overflow:"hidden"},children:[(0,p.jsx)(je,{span:c,showChildrenIcon:!1,hoverIndentGuideIds:m,addHoverIndentGuideId:f,removeHoverIndentGuideId:v}),(0,p.jsx)("span",{children:(0,p.jsx)("span",{className:S.expandedAccent,onClick:this._detailToggle,style:{borderColor:e},"data-testid":"detail-row-expanded-accent"})})]}),(0,p.jsx)(Ne.Z.Cell,{width:1-t,children:(0,p.jsx)("div",{className:S.infoWrapper,style:{borderTopColor:e},children:(0,p.jsx)(ot,{detailState:n,linksGetter:this._linksGetter,logItemToggle:s,logsToggle:a,processToggle:i,referenceItemToggle:r,referencesToggle:o,warningsToggle:l,stackTracesToggle:d,span:c,timeZone:u,tagsToggle:h,traceStartTime:g,createSpanLink:x,focusedSpanId:y,createFocusSpanLink:w,topOfViewRefType:j})})})]})}}const ht=(0,d.HE)(ut);function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gt=(0,o.B)((e=>{const{topOfViewRefType:t}=e,n=t===mt.Explore?"fixed":"absolute";return{rowsWrapper:s.iv`
      width: 100%;
    `,row:s.iv`
      width: 100%;
    `,scrollToTopButton:s.iv`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${n};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}}));let mt;!function(e){e.Explore="Explore",e.Panel="Panel"}(mt||(mt={}));const ft=28,vt=161,bt=197;const xt=(0,i.Z)((function(e,t,n){return e?function(e,t,n){if(!e)return[];let s=null;const a=[];for(let i=0;i<e.length;i++){const r=e[i],{spanID:o,depth:l}=r;let d=!1;null!=s&&(l>=s?d=!0:s=null),d||(t.has(o)&&(s=l+1),a.push({span:r,isDetail:!1,spanIndex:i}),n.has(o)&&a.push({span:r,isDetail:!0,spanIndex:i}))}return a}(e.spans,t,n):[]})),yt=(0,i.Z)(A._h,a.isEqual),wt=(0,i.Z)((function(e){const[t,n]=e;return{left:t>0,right:n<1}}),a.isEqual);class jt extends r.Component{constructor(e){super(e),pt(this,"listView",void 0),pt(this,"topTraceViewRef",(0,r.createRef)()),pt(this,"getViewRange",(()=>this.props.currentViewRangeTime)),pt(this,"getSearchedSpanIDs",(()=>this.props.findMatchesIDs)),pt(this,"getCollapsedChildren",(()=>this.props.childrenHiddenIDs)),pt(this,"mapRowIndexToSpanIndex",(e=>this.getRowStates()[e].spanIndex)),pt(this,"mapSpanIndexToRowIndex",(e=>{const t=this.getRowStates().length;for(let n=0;n<t;n++){const{spanIndex:t}=this.getRowStates()[n];if(t===e)return n}throw new Error(`unable to find row for span index: ${e}`)})),pt(this,"setListView",(e=>{const t=this.listView!==e;this.listView=e,e&&t&&this.props.registerAccessors(this.getAccessors())})),pt(this,"getKeyFromIndex",(e=>{const{isDetail:t,span:n}=this.getRowStates()[e];return`${n.traceID}--${n.spanID}--${t?"detail":"bar"}`})),pt(this,"getIndexFromKey",(e=>{const t=e.split("--"),n=t[0],s=t[1],a="detail"===t[2],i=this.getRowStates().length;for(let e=0;e<i;e++){const{span:t,isDetail:i}=this.getRowStates()[e];if(t.spanID===s&&t.traceID===n&&i===a)return e}return-1})),pt(this,"getRowHeight",(e=>{const{span:t,isDetail:n}=this.getRowStates()[e];return n?Array.isArray(t.logs)&&t.logs.length?bt:vt:ft})),pt(this,"renderRow",((e,t,n,s)=>{const{isDetail:a,span:i,spanIndex:r}=this.getRowStates()[n];return a?this.renderSpanDetailRow(i,e,t,s):this.renderSpanBarRow(i,r,e,t,s)})),pt(this,"scrollToSpan",(e=>{if(null==e)return;const t=this.getRowStates().findIndex((t=>t.span.spanID===e));var n;t>=0&&(null===(n=this.listView)||void 0===n||n.scrollToIndex(t))})),pt(this,"scrollToTop",(()=>{var e;const{topOfViewRef:t}=this.props;null==t||null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}));const{setTrace:t,trace:n,uiFind:s}=e;t(n,s)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(e){const t=Object.keys(e);for(let n=0;n<t.length;n+=1)if(e[t[n]]!==this.props[t[n]]){if("shouldScrollToFirstUiFindMatch"!==t[n])return!0;if(e[t[n]])return!0}return!1}componentDidUpdate(e){const{registerAccessors:t,trace:n}=e,{shouldScrollToFirstUiFindMatch:s,clearShouldScrollToFirstUiFindMatch:a,scrollToFirstVisibleSpan:i,registerAccessors:r,setTrace:o,trace:l,uiFind:d,focusedSpanId:c,focusedSpanIdForSearch:u}=this.props;n!==l&&o(l,d),this.listView&&t!==r&&r(this.getAccessors()),s&&(i(),a()),c!==e.focusedSpanId&&this.scrollToSpan(c),u!==e.focusedSpanIdForSearch&&this.scrollToSpan(u)}getRowStates(){const{childrenHiddenIDs:e,detailStates:t,trace:n}=this.props;return xt(n,e,t)}getClipping(){const{currentViewRangeTime:e}=this.props;return wt(e)}getViewedBounds(){const{currentViewRangeTime:e,trace:t}=this.props,[n,s]=e;return yt({min:t.startTime,max:t.endTime,viewStart:n,viewEnd:s})}getAccessors(){const e=this.listView;if(!e)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:e.getViewHeight,getBottomRowIndexVisible:e.getBottomVisibleIndex,getTopRowIndexVisible:e.getTopVisibleIndex,getRowPosition:e.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(e,t,n,s,a){const{spanID:i}=e,{serviceName:r}=e.process,{childrenHiddenIDs:o,childrenToggle:l,detailStates:d,detailToggle:u,findMatchesIDs:h,spanNameColumnWidth:g,trace:m,spanBarOptions:f,hoverIndentGuideIds:v,addHoverIndentGuideId:b,removeHoverIndentGuideId:x,createSpanLink:y,focusedSpanId:w,focusedSpanIdForSearch:j,theme:S}=this.props;if(!m)return null;const C=(0,c._K)(r,S),k=o.has(i),N=d.has(i),O=!!h&&h.has(i),I=i===w||i===j,T=(0,A.yM)(e)||k&&(0,A.Qx)(m.spans,t);let $=null;if(k){const e=(0,A.s2)(m.spans.slice(t));if(e){const t=this.getViewedBounds()(e.startTime,e.startTime+e.duration);$={color:(0,c._K)(e.process.serviceName,S),operationName:e.operationName,serviceName:e.process.serviceName,viewEnd:t.end,viewStart:t.start}}}const R=e.tags.find((e=>"peer.service"===e.key));let P=null;!e.hasChildren&&R&&(0,A.JE)(e)&&(P={serviceName:R.value,color:(0,c._K)(R.value,S)});const D=gt(this.props);return(0,p.jsx)("div",Object.assign({className:D.row,style:s},a,{children:(0,p.jsx)(Le,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:C,spanBarOptions:f,columnDivision:g,isChildrenExpanded:!k,isDetailExpanded:N,isMatchingFilter:O,isFocused:I,numTicks:5,onDetailToggled:u,onChildrenToggled:l,rpc:$,noInstrumentedServer:P,showErrorIcon:T,getViewedBounds:this.getViewedBounds(),traceStartTime:m.startTime,span:e,hoverIndentGuideIds:v,addHoverIndentGuideId:b,removeHoverIndentGuideId:x,createSpanLink:y})}),n)}renderSpanDetailRow(e,t,n,s){const{spanID:a}=e,{serviceName:i}=e.process,{detailLogItemToggle:r,detailLogsToggle:o,detailProcessToggle:l,detailReferencesToggle:d,detailReferenceItemToggle:u,detailWarningsToggle:h,detailStackTracesToggle:g,detailStates:m,detailTagsToggle:f,detailToggle:v,spanNameColumnWidth:b,trace:x,timeZone:y,hoverIndentGuideIds:w,addHoverIndentGuideId:j,removeHoverIndentGuideId:S,linksGetter:C,createSpanLink:k,focusedSpanId:N,createFocusSpanLink:O,topOfViewRefType:I,theme:T}=this.props,$=m.get(a);if(!x||!$)return null;const R=(0,c._K)(i,T),P=gt(this.props);return(0,p.jsx)("div",Object.assign({className:P.row,style:Object.assign({},n,{zIndex:1})},s,{children:(0,p.jsx)(ht,{color:R,columnDivision:b,onDetailToggled:v,detailState:$,linksGetter:C,logItemToggle:r,logsToggle:o,processToggle:l,referenceItemToggle:u,referencesToggle:d,warningsToggle:h,stackTracesToggle:g,span:e,timeZone:y,tagsToggle:f,traceStartTime:x.startTime,hoverIndentGuideIds:w,addHoverIndentGuideId:j,removeHoverIndentGuideId:S,createSpanLink:k,focusedSpanId:N,createFocusSpanLink:O,topOfViewRefType:I})}),t)}render(){const e=gt(this.props),{scrollElement:t}=this.props;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(f,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:e.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:t}),(0,p.jsx)(l.h,{className:e.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"})]})}}const St=(0,d.HE)(jt)},40930:(e,t,n)=>{"use strict";n.d(t,{JE:()=>p,LU:()=>s.LU,Qx:()=>u,_h:()=>a,s2:()=>h,yM:()=>c});var s=n(14368);function a(e){const{min:t,max:n,viewStart:s,viewEnd:a}=e,i=n-t,r=t+s*i,o=n-(1-a)*i-r;return(e,t)=>({start:(e-r)/o,end:(t-r)/o})}function i(e,t,n){return!(!Array.isArray(n.tags)||!n.tags.length)&&n.tags.some((n=>n.key===e&&n.value===t))}const r=i.bind(null,"span.kind","client"),o=i.bind(null,"span.kind","server"),l=i.bind(null,"error",!0),d=i.bind(null,"error","true"),c=e=>l(e)||d(e);function u(e,t){const{depth:n}=e[t];let s=t+1;for(;s<e.length&&e[s].depth>n;s++)if(c(e[s]))return!0;return!1}function h(e){if(e.length<=1||!r(e[0]))return!1;const t=e[0].depth+1;let n=1;for(;n<e.length&&e[n].depth===t;){if(o(e[n]))return e[n];n++}return null}const p=e=>e.tags.some((e=>{let{key:t,value:n}=e;return"span.kind"===t&&"client"===n}))},77267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(86780),a=n(23019),i=n.n(a),r=(n(68404),n(16755)),o=n(65993),l=n(45916);function d(e){const{className:t,divider:n=!1,items:a}=e,d=(0,r.wW)((e=>t=>({LabeledList:s.iv`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${!0===e&&"\n        margin-right: -8px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: flex-end;\n      "}
    `,LabeledListItem:s.iv`
      label: LabeledListItem;
      display: inline-block;
      ${!0===e&&`\n        border-right: 1px solid ${(0,o.h)(t,"#ddd")};\n        padding: 0 8px;\n      `}
    `,LabeledListLabel:s.iv`
      label: LabeledListLabel;
      color: ${t.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:s.iv`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `}))(n));return(0,l.jsx)("ul",{className:i()(d.LabeledList,t),children:a.map((e=>{let{key:t,label:n,value:s}=e;return(0,l.jsxs)("li",{className:d.LabeledListItem,children:[(0,l.jsx)("span",{className:d.LabeledListLabel,children:n}),(0,l.jsx)("strong",{className:d.LabeledListValue,children:s})]},`${t}`)}))})}},97602:(e,t,n)=>{"use strict";n.d(t,{kt:()=>lt,e6:()=>rt.ZP,T2:()=>it,Ox:()=>H,h2:()=>l.h,rZ:()=>Et,R1:()=>Ft});var s=n(86780),a=n(68404),i=n(31181),r=n(50191),o=n(16755),l=n(65993),d=n(21710),c=n.n(d);const u={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left — Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right — Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in — Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out — Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let h;function p(){if(h)return h;const e=new(c())(document.body);return h=e,e}var g=n(23019),m=n.n(g),f=n(74147),v=n(50814),b=n(99437),x=n(23734),y=n(45916);const w=()=>({TimelineCollapser:s.iv`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function j(e){const{onExpandAll:t,onExpandOne:n,onCollapseAll:s,onCollapseOne:a}=e,i=(0,o.wW)(w);return(0,y.jsxs)("div",{className:i.TimelineCollapser,"data-testid":"TimelineCollapser",children:[(0,y.jsx)(x.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:n}),(0,y.jsx)(x.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:a}),(0,y.jsx)(x.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:t}),(0,y.jsx)(x.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:s})]})}var S;!function(e){e.DragEnd="DragEnd",e.DragMove="DragMove",e.DragStart="DragStart",e.MouseEnter="MouseEnter",e.MouseLeave="MouseLeave",e.MouseMove="MouseMove"}(S||(S={}));const C=S;var k=n(82897);const N=["getBounds","tag","resetBoundsOnResize"];function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(e){let{getBounds:t,tag:n,resetBoundsOnResize:s=!0}=e,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,N);O(this,"_bounds",void 0),O(this,"_isDragging",void 0),O(this,"_onMouseEnter",void 0),O(this,"_onMouseLeave",void 0),O(this,"_onMouseMove",void 0),O(this,"_onDragStart",void 0),O(this,"_onDragMove",void 0),O(this,"_onDragEnd",void 0),O(this,"_resetBoundsOnResize",void 0),O(this,"getBounds",void 0),O(this,"tag",void 0),O(this,"handleMouseEnter",void 0),O(this,"handleMouseMove",void 0),O(this,"handleMouseLeave",void 0),O(this,"handleMouseDown",void 0),O(this,"resetBounds",(()=>{this._bounds=void 0})),O(this,"_handleMinorMouseEvent",(e=>{const{button:t,clientX:n,type:s}=e;if(this._isDragging||0!==t)return;let a,i=null;if("mouseenter"===s)i=C.MouseEnter,a=this._onMouseEnter;else if("mouseleave"===s)i=C.MouseLeave,a=this._onMouseLeave;else{if("mousemove"!==s)throw new Error(`invalid event type: ${s}`);i=C.MouseMove,a=this._onMouseMove}if(!a)return;const{value:r,x:o}=this._getPosition(n);a({event:e,type:i,value:r,x:o,manager:this,tag:this.tag})})),O(this,"_handleDragEvent",(e=>{const{button:t,clientX:n,type:s}=e;let a,i=null;if("mousedown"===s){if(this._isDragging||0!==t)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const e=(0,k.get)(document,"body.style");e&&(e.userSelect="none"),this._isDragging=!0,i=C.DragStart,a=this._onDragStart}else if("mousemove"===s){if(!this._isDragging)return;i=C.DragMove,a=this._onDragMove}else{if("mouseup"!==s)throw new Error(`invalid event type: ${s}`);if(!this._isDragging)return;this._stopDragging(),i=C.DragEnd,a=this._onDragEnd}if(!a)return;const{value:r,x:o}=this._getPosition(n);a({event:e,type:i,value:r,x:o,manager:this,tag:this.tag})})),this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=t,this.tag=n,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(s),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=a.onMouseEnter,this._onMouseLeave=a.onMouseLeave,this._onMouseMove=a.onMouseMove,this._onDragStart=a.onDragStart,this._onDragMove=a.onDragMove,this._onDragEnd=a.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(e){const{clientXLeft:t,maxValue:n,minValue:s,width:a}=this._getBounds();let i=e-t,r=i/a;return null!=s&&r<s?(r=s,i=s*a):null!=n&&r>n&&(r=n,i=n*a),{value:r,x:i}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const e=(0,k.get)(document,"body.style");e&&(e.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $=(0,r.B)((()=>({TimelineColumnResizer:s.iv`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:s.iv`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:s.iv`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:s.iv`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:s.iv`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:s.iv`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:s.iv`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:s.iv`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `})));class R extends a.PureComponent{constructor(e){super(e),T(this,"state",void 0),T(this,"_dragManager",void 0),T(this,"_rootElm",void 0),T(this,"_setRootElm",(e=>{this._rootElm=e})),T(this,"_getDraggingBounds",(()=>{if(!this._rootElm)throw new Error("invalid state");const{left:e,width:t}=this._rootElm.getBoundingClientRect(),{min:n,max:s}=this.props;return{clientXLeft:e,width:t,maxValue:s,minValue:n}})),T(this,"_handleDragUpdate",(e=>{let{value:t}=e;this.setState({dragPosition:t})})),T(this,"_handleDragEnd",(e=>{let{manager:t,value:n}=e;t.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(n)})),this._dragManager=new I({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let e,t;const{position:n,columnResizeHandleHeight:s}=this.props,{dragPosition:a}=this.state;e=100*n+"%";const i={left:e};let r=!1,o=!1;const l=$();if(this._dragManager.isDragging()&&this._rootElm&&null!=a){r=a<n,o=a>n,e=100*a+"%";t={left:100*Math.min(n,a)+"%",right:`calc(${100*(1-Math.max(n,a))}% - 1px)`}}else t=i;t.height=s;const d=r||o;return(0,y.jsxs)("div",{className:l.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer",children:[(0,y.jsx)("div",{className:m()(l.gripIcon,d&&l.gripIconDragging),style:i,"data-testid":"TimelineColumnResizer--gripIcon"}),(0,y.jsx)("div",{"aria-hidden":!0,className:m()(l.dragger,d&&l.draggerDragging,o&&l.draggerDraggingRight,r&&l.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:t,"data-testid":"TimelineColumnResizer--dragger"})]})}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=(0,r.B)((()=>({TimelineViewingLayer:s.iv`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:s.iv`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:s.iv`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:s.iv`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:s.iv`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:s.iv`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:s.iv`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:s.iv`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `})));function A(e,t,n){return e+n*(t-e)}function M(e,t,n){return(n-e)/(t-e)}function L(e,t,n,a,i){const r=function(e,t){let[n,s]=e<t?[e,t]:[t,e];return n>=1||s<=0?{isOutOfView:!0}:(n<0&&(n=0),s>1&&(s=1),{isDraggingLeft:e>t,left:100*n+"%",width:100*(s-n)+"%"})}(M(e,t,n),M(e,t,a));if(function(e){return Reflect.has(e,"isOutOfView")}(r))return null;const{isDraggingLeft:o,left:l,width:d}=r,c=D(),u=(0,s.cx)({[c.TimelineViewingLayerDraggedDraggingRight]:!o,[c.TimelineViewingLayerDraggedReframeDrag]:!i,[c.TimelineViewingLayerDraggedShiftDrag]:i});return(0,y.jsx)("div",{className:(0,s.cx)(c.TimelineViewingLayerDragged,c.TimelineViewingLayerDraggedDraggingLeft,u),style:{left:l,width:d},"data-testid":"Dragged"})}class F extends a.PureComponent{constructor(e){super(e),P(this,"_draggerReframe",void 0),P(this,"_root",void 0),P(this,"_setRoot",(e=>{this._root=e})),P(this,"_getDraggingBounds",(()=>{if(!this._root)throw new Error("invalid state");const{left:e,width:t}=this._root.getBoundingClientRect();return{clientXLeft:e,width:t}})),P(this,"_handleReframeMouseMove",(e=>{let{value:t}=e;const[n,s]=this.props.viewRangeTime.current,a=A(n,s,t);this.props.updateNextViewRangeTime({cursor:a})})),P(this,"_handleReframeMouseLeave",(()=>{this.props.updateNextViewRangeTime({cursor:void 0})})),P(this,"_handleReframeDragUpdate",(e=>{let{value:t}=e;const{current:n,reframe:s}=this.props.viewRangeTime,[a,i]=n,r=A(a,i,t),o={reframe:{anchor:s?s.anchor:r,shift:r}};this.props.updateNextViewRangeTime(o)})),P(this,"_handleReframeDragEnd",(e=>{let{manager:t,value:n}=e;const{current:s,reframe:a}=this.props.viewRangeTime,[i,r]=s,o=A(i,r,n),l=a?a.anchor:o,[d,c]=o<l?[o,l]:[l,o];t.resetBounds(),this.props.updateViewRangeTime(d,c,"timeline-header")})),this._draggerReframe=new I({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(e){const{boundsInvalidator:t}=this.props;t!==e.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:e}=this.props,{current:t,cursor:n,reframe:s,shiftEnd:a,shiftStart:i}=e,[r,o]=t;let l;!(null!=s||null!=a||null!=i)&&null!=n&&n>=r&&n<=o&&(l=100*M(r,o,n)+"%");const d=D();return(0,y.jsxs)("div",{"aria-hidden":!0,className:d.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer",children:[null!=l&&(0,y.jsx)("div",{className:d.TimelineViewingLayerCursorGuide,style:{left:l},"data-testid":"TimelineViewingLayer--cursorGuide"}),null!=s&&L(r,o,s.anchor,s.shift,!1),null!=a&&L(r,o,o,a,!0),null!=i&&L(r,o,r,i,!0)]})}}const E=e=>({TimelineHeaderRow:s.iv`
      label: TimelineHeaderRow;
      background: ${(0,l.h)(e,"#ececec")};
      border-bottom: 1px solid ${(0,l.h)(e,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:s.iv`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:s.iv`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function V(e){const{duration:t,nameColumnWidth:n,numTicks:s,onCollapseAll:a,onCollapseOne:i,onColummWidthChange:r,onExpandAll:l,onExpandOne:d,updateViewRangeTime:c,updateNextViewRangeTime:u,viewRangeTime:h,columnResizeHandleHeight:p}=e,[g,x]=h.current,w=(0,o.wW)(E);return(0,y.jsxs)(b.Z,{className:w.TimelineHeaderRow,"data-testid":"TimelineHeaderRow",children:[(0,y.jsxs)(b.Z.Cell,{className:m()(f.oD,f.H3,w.TimelineHeaderWrapper),width:n,children:[(0,y.jsx)("h4",{className:w.TimelineHeaderRowTitle,children:"Service & Operation"}),(0,y.jsx)(j,{onCollapseAll:a,onExpandAll:l,onCollapseOne:i,onExpandOne:d})]}),(0,y.jsxs)(b.Z.Cell,{width:1-n,children:[(0,y.jsx)(F,{boundsInvalidator:n,updateNextViewRangeTime:u,updateViewRangeTime:c,viewRangeTime:h}),(0,y.jsx)(v.Z,{numTicks:s,startTime:g*t,endTime:x*t,showLabels:!0})]}),(0,y.jsx)(R,{columnResizeHandleHeight:p,position:n,onChange:r,min:.2,max:.85})]})}var z=n(60456);const B=["setSpanNameColumnWidth","updateNextViewRangeTime","updateViewRangeTime","viewRange","traceTimeline","theme","topOfViewRef","focusedSpanIdForSearch"];function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W=(0,r.B)((e=>({TraceTimelineViewer:s.iv`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,l.h)(e,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,l.h)(e,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,l.h)(e,"teal")};
      }

      & .json-markup-null {
        color: ${(0,l.h)(e,"teal")};
      }

      & .json-markup-number {
        color: ${(0,l.h)(e,"blue","black")};
      }
    `})));class U extends a.PureComponent{constructor(e){super(e),_(this,"collapseAll",(()=>{this.props.collapseAll(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseAll"})})),_(this,"collapseOne",(()=>{this.props.collapseOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseOne"})})),_(this,"expandAll",(()=>{this.props.expandAll(),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandAll"})})),_(this,"expandOne",(()=>{this.props.expandOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandOne"})})),this.state={height:0}}componentDidMount(){!function(e){const t=p();Object.keys(e).forEach((n=>{const s=e[n];s&&t.bind(u[n].binding,s)}))}({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const e=this.props,{setSpanNameColumnWidth:t,updateNextViewRangeTime:n,updateViewRangeTime:s,viewRange:a,traceTimeline:i,theme:r,topOfViewRef:o,focusedSpanIdForSearch:l}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,B),{trace:c}=d,u=W(r);return(0,y.jsxs)("div",{className:u.TraceTimelineViewer,ref:e=>e&&this.setState({height:e.getBoundingClientRect().height}),children:[(0,y.jsx)(V,{duration:c.duration,nameColumnWidth:i.spanNameColumnWidth,numTicks:5,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:t,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:a.time,updateNextViewRangeTime:n,updateViewRangeTime:s,columnResizeHandleHeight:this.state.height}),(0,y.jsx)(z.ZP,Object.assign({},d,i,{setSpanNameColumnWidth:t,currentViewRangeTime:a.time.current,topOfViewRef:o,focusedSpanIdForSearch:l}))]})}}const H=(0,o.HE)(U);var q=n(68485),Z=n.n(q),G=n(6432),Q=n(977),K=n.n(Q);const J=["isLarge","className"];const Y=()=>({NewWindowIconLarge:s.iv`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function X(e){const{isLarge:t,className:n}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,J),a=(0,o.wW)(Y),i=m()({[a.NewWindowIconLarge]:t},n);return(0,y.jsx)(K(),Object.assign({className:i},s))}var ee;X.defaultProps={isLarge:!1};const te=e=>(0,y.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",className:e.className,children:[e.children," ",ee||(ee=(0,y.jsx)(X,{}))]});function ne(e){const{links:t}=e;return(0,y.jsx)(te,{href:t[0].url,title:t[0].text,className:e.className})}var se=n(77267);const ae=()=>({BreakableText:s.iv`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),ie=/\W*\w+\W*/g;function re(e){const{className:t,text:n,wordRegexp:s=ie}=e,a=(0,o.wW)(ae);if(!n)return"string"==typeof n?n:null;const i=[];s.exec("");let r=s.exec(n)||[n];for(;r;)i.push((0,y.jsx)("span",{className:t||a.BreakableText,children:r[0]},`${n}-${i.length}`)),r=s.exec(n);return i}re.defaultProps={wordRegexp:ie};const oe=e=>({TraceName:s.iv`
      label: TraceName;
      font-size: ${e.typography.size.lg};
    `});function le(e){const{className:t,traceName:n}=e,s=(0,o.wW)(oe),a=String(n||"<trace-without-root-span>"),i=(0,y.jsx)(re,{text:a});return(0,y.jsx)("span",{className:m()(s.TraceName,t),children:i})}var de=n(87855),ce=n(9763);const ue=n.n(ce)()(Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},linkPatterns:[],menu:[{label:"About Jaeger",items:[{label:"GitHub",url:"https://github.com/uber/jaeger"},{label:"Docs",url:"http://jaeger.readthedocs.io/en/latest/"},{label:"Twitter",url:"https://twitter.com/JaegerTracing"},{label:"Discussion Group",url:"https://groups.google.com/forum/#!forum/jaeger-tracing"},{label:"Gitter.im",url:"https://gitter.im/jaegertracing/Lobby"},{label:"Blog",url:"https://medium.com/jaegertracing/"}]}],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]}));function he(e){return(0,k.get)(ue,e)}function pe(e){const t=e.references?e.references.find((e=>"CHILD_OF"===e.refType)):null;return t?t.span:null}const ge=/#\{([^{}]*)\}/g;function me(e){const t=new Set;return e.replace(ge,((e,n)=>(t.add(n),e))),Array.from(t)}function fe(e,t,n){return e.replace(ge,((e,s)=>{const a=n[s];return null==a?"":t(a)}))}function ve(e,t){if("string"!=typeof e)throw new Error("Invalid template");return{parameters:me(e),template:fe.bind(null,e,t)}}function be(e){if("string"==typeof e)return t=>t===e;if(Array.isArray(e))return t=>e.indexOf(t)>-1;if(null==e)return()=>!0;throw new Error(`Invalid value: ${e}`)}const xe=e=>e;function ye(e,t){if(t)return t.find((t=>t.key===e))}function we(e,t){return e.template(t)}function je(e,t,n,s){const a=n[s];let i="logs";const r=t.process.tags===n;r&&(i="process");t.tags===n&&(i="tags");const o=[];return e.forEach((e=>{if(e.type(i)&&e.key(a.key)&&e.value(a.value)){const s={},l=e.parameters.every((o=>{let l=ye(o,n);return l||r||(l=function(e,t){let n=t;for(;n;){const t=ye(e,n.tags)||ye(e,n.process.tags);if(t)return t;n=pe(n)}}(o,t)),l?(s[o]=l.value,!0):(console.warn(`Skipping link pattern, missing parameter ${o} for key ${a.key} in ${i}.`,e.object),!1)}));l&&o.push({url:we(e.url,s),text:we(e.text,s)})}})),o}const Se=(he("linkPatterns")||[]).map((function(e){try{const t=ve(e.url,encodeURIComponent),n=ve(e.text,xe);return{object:e,type:be(e.type),key:be(e.key),value:be(e.value),url:t,text:n,parameters:(0,k.uniq)(t.parameters.concat(n.parameters))}}catch(t){return console.error(`Ignoring invalid link pattern: ${t}`,e),null}})).filter((e=>Boolean(e))),Ce=(0,de.Z)(10)((e=>{const t=[];return e?function(e,t){const n=[],s=Object.keys(t).filter((e=>"string"==typeof t[e]||"number"===t[e]));return e.filter((e=>e.type("traces"))).forEach((e=>{const a={};e.parameters.every((e=>{const n=e;return!!s.includes(n)&&(a[e]=t[n],!0)}))&&n.push({url:we(e.url,a),text:we(e.text,a)})})),n}(Se,e):t}));ke=Se,Ne=new WeakMap;var ke,Ne;const Oe=(0,k.memoize)((function(e){let t;const n=new Set(e.map((e=>{let{spanID:t}=e;return t})));for(let s=0;s<e.length;s++){if(e[s].references&&e[s].references.some((t=>{let{traceID:a,spanID:i}=t;return a===e[s].traceID&&n.has(i)})))continue;if(!t){t=e[s];continue}const a=e[s].references&&e[s].references.length||0,i=t.references&&t.references.length||0;(a<i||a===i&&e[s].startTime<t.startTime)&&(t=e[s])}return t?`${t.process.serviceName}: ${t.operationName}`:""}),(e=>e.length?e[0].traceID:0));var Ie=n(14368),Te=n(58635),$e=n(47627);function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pe=(0,r.B)((e=>({CanvasSpanGraph:s.iv`
      label: CanvasSpanGraph;
      background: ${(0,l.h)(e,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `})));class De extends a.PureComponent{constructor(e){super(e),Re(this,"_canvasElm",void 0),Re(this,"getColor",(e=>(0,$e.e6)(e,this.props.theme))),Re(this,"_setCanvasRef",(e=>{this._canvasElm=e})),this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:e,items:t}=this.props;!function(e,t,n,s,a){const i=new Map,r=t.length<60?60:Math.min(t.length,200),o=2*window.innerWidth;e.width=o,e.height=r;const l=Math.min(6,Math.max(2,r/t.length)),d=r/t.length,c=e.getContext("2d",{alpha:!1});c.fillStyle=a,c.fillRect(0,0,o,r);for(let e=0;e<t.length;e++){const{valueWidth:a,valueOffset:r,serviceName:u}=t[e],h=r/n*o;let p=a/n*o;p<10&&(p=10);let g=i.get(u);g||(g=`rgba(${s(u).concat(.8).join()})`,i.set(u,g)),c.fillStyle=g,c.fillRect(h,e*d,p,l)}}(this._canvasElm,t,e,this.getColor,(0,l.h)(this.props.theme,"#fff"))}}render(){return(0,y.jsx)("canvas",{className:Pe(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef})}}const Ae=(0,o.HE)(De),Me=()=>({TickLabels:s.iv`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:s.iv`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Le(e){const{numTicks:t,duration:n}=e,s=(0,o.wW)(Me),a=[];for(let e=0;e<t+1;e++){const i=e/t,r=1===i?{right:"0%"}:{left:100*i+"%"};a.push((0,y.jsx)("div",{className:s.TickLabelsLabel,style:r,"data-testid":"tick",children:(0,Ie.LU)(n*i)},i))}return(0,y.jsx)("div",{className:s.TickLabels,children:a})}var Fe=n(8006);const Ee=()=>({GraphTick:s.iv`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function Ve(e){const{numTicks:t}=e,n=(0,o.wW)(Ee),s=[];for(let e=1;e<t;e++){const a=e/t*100+"%";s.push((0,y.jsx)("line",{className:n.GraphTick,x1:a,y1:"0%",x2:a,y2:"100%"},e/t))}return(0,y.jsx)("g",{"data-testid":"ticks","aria-hidden":"true",children:s})}const ze=()=>({ScrubberHandleExpansion:m()(s.iv`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:m()(s.iv`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:m()(s.iv`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:s.iv`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:s.iv`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function Be(e){let{isDragging:t,onMouseDown:n,onMouseEnter:s,onMouseLeave:a,position:i}=e;const r=100*i+"%",l=(0,o.wW)(ze),d=m()({[l.ScrubberDragging]:t});return(0,y.jsxs)("g",{className:d,"data-testid":"scrubber-component",children:[(0,y.jsxs)("g",{"data-testid":"scrubber-component-g",className:l.ScrubberHandles,onMouseDown:n,onMouseEnter:s,onMouseLeave:a,children:[(0,y.jsx)("rect",{"data-testid":"scrubber-component-rect-1",x:r,className:l.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),(0,y.jsx)("rect",{"data-testid":"scrubber-component-rect-2",x:r,className:l.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})]}),(0,y.jsx)("line",{className:l.ScrubberLine,y2:"100%",x1:r,x2:r,"data-testid":"scrubber-component-line"})]})}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const We=(0,r.B)((e=>{const t="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",n=s.iv`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:s.iv`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${t} {
        display: unset;
      }
    `,ViewingLayerGraph:s.iv`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,l.h)(e,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:s.iv`
      label: ViewingLayerInactive;
      fill: ${(0,l.h)(e,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:s.iv`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,l.h)(e,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:s.iv`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:s.iv`
      label: ViewingLayerDrag;
      fill: ${(0,l.h)(e,"#44f")};
    `,ViewingLayerFullOverlay:s.iv`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:n,ViewingLayerResetZoomHoverClassName:t}})),Ue="SHIFT_END",He="SHIFT_START",qe="REFRAME";class Ze extends a.PureComponent{constructor(e){super(e),_e(this,"state",void 0),_e(this,"_root",void 0),_e(this,"_draggerReframe",void 0),_e(this,"_draggerStart",void 0),_e(this,"_draggerEnd",void 0),_e(this,"_setRoot",(e=>{this._root=e})),_e(this,"_getDraggingBounds",(e=>{if(!this._root)throw new Error("invalid state");const{left:t,width:n}=this._root.getBoundingClientRect(),[s,a]=this.props.viewRange.time.current;let i=1,r=0;return e===He?i=a:e===Ue&&(r=s),{clientXLeft:t,maxValue:i,minValue:r,width:n}})),_e(this,"_handleReframeMouseMove",(e=>{let{value:t}=e;this.props.updateNextViewRangeTime({cursor:t})})),_e(this,"_handleReframeMouseLeave",(()=>{this.props.updateNextViewRangeTime({cursor:null})})),_e(this,"_handleReframeDragUpdate",(e=>{let{value:t}=e;const n=t,{time:s}=this.props.viewRange,a={reframe:{anchor:s.reframe?s.reframe.anchor:n,shift:n}};this.props.updateNextViewRangeTime(a)})),_e(this,"_handleReframeDragEnd",(e=>{let{manager:t,value:n}=e;const{time:s}=this.props.viewRange,a=s.reframe?s.reframe.anchor:n,[i,r]=n<a?[n,a]:[a,n];t.resetBounds(),this.props.updateViewRangeTime(i,r,"minimap")})),_e(this,"_handleScrubberEnterLeave",(e=>{let{type:t}=e;const n=t===C.MouseEnter;this.setState({preventCursorLine:n})})),_e(this,"_handleScrubberDragUpdate",(e=>{let{event:t,tag:n,type:s,value:a}=e;s===C.DragStart&&t.stopPropagation(),n===He?this.props.updateNextViewRangeTime({shiftStart:a}):n===Ue&&this.props.updateNextViewRangeTime({shiftEnd:a})})),_e(this,"_handleScrubberDragEnd",(e=>{let{manager:t,tag:n,value:s}=e;const[a,i]=this.props.viewRange.time.current;let r;if(n===He)r=[s,i];else{if(n!==Ue)throw new Error("bad state");r=[a,s]}t.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(r[0],r[1],"minimap")})),_e(this,"_resetTimeZoomClickHandler",(()=>{this.props.updateViewRangeTime(0,1)})),this._draggerReframe=new I({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:qe}),this._draggerStart=new I({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:He}),this._draggerEnd=new I({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Ue}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(e,t){const n=We(this.props.theme),s=function(e,t){const[n,s]=e<t?[e,t]:[t,e];return{x:100*n+"%",width:100*(s-n)+"%",leadingX:100*t+"%"}}(e,t);return[(0,y.jsx)("rect",{className:m()(n.ViewingLayerDraggedShift,n.ViewingLayerDrag),x:s.x,y:"0",width:s.width,height:this.props.height-2},"fill"),(0,y.jsx)("rect",{className:m()(n.ViewingLayerDrag),x:s.leadingX,y:"0",width:"1",height:this.props.height-2},"edge")]}render(){const{height:e,viewRange:t,numTicks:n,theme:s}=this.props,{preventCursorLine:a}=this.state,{current:i,cursor:r,shiftStart:o,shiftEnd:l,reframe:d}=t.time,c=null!=o||null!=l||null!=d,[u,h]=i;let p=0;u&&(p=100*u);let g,f=100;h&&(f=100-100*h),c||null==r||a||(g=100*r+"%");const v=We(s);return(0,y.jsxs)("div",{"aria-hidden":!0,className:v.ViewingLayer,style:{height:e},children:[(0!==u||1!==h)&&(0,y.jsx)(Fe.zx,{onClick:this._resetTimeZoomClickHandler,className:m()(v.ViewingLayerResetZoom,v.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary",children:"Reset Selection"}),(0,y.jsxs)("svg",{height:e,className:v.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,children:[p>0&&(0,y.jsx)("rect",{x:0,y:0,height:"100%",width:`${p}%`,className:v.ViewingLayerInactive}),f>0&&(0,y.jsx)("rect",{x:100-f+"%",y:0,height:"100%",width:`${f}%`,className:v.ViewingLayerInactive}),(0,y.jsx)(Ve,{numTicks:n}),g&&(0,y.jsx)("line",{className:v.ViewingLayerCursorGuide,x1:g,y1:"0",x2:g,y2:e-2,strokeWidth:"1"}),null!=o&&this._getMarkers(u,o),null!=l&&this._getMarkers(h,l),(0,y.jsx)(Be,{isDragging:null!=o,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:u||0}),(0,y.jsx)(Be,{isDragging:null!=l,position:h||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),null!=d&&this._getMarkers(d.anchor,d.shift)]}),c&&(0,y.jsx)("div",{className:v.ViewingLayerFullOverlay})]})}}const Ge=(0,o.HE)(Ze);var Qe;function Ke(e){return{valueOffset:e.relativeStartTime,valueWidth:e.duration,serviceName:e.process.serviceName}}const Je=(0,Te.Z)((function(e){return e.spans.map(Ke)}));class Ye extends a.PureComponent{render(){const{height:e,trace:t,viewRange:n,updateNextViewRangeTime:s,updateViewRangeTime:a}=this.props;if(!t)return Qe||(Qe=(0,y.jsx)("div",{}));const i=Je(t);return(0,y.jsxs)("div",{className:m()(f.GL,f.H3),children:[(0,y.jsx)(Le,{numTicks:4,duration:t.duration}),(0,y.jsxs)("div",{className:f.WW,children:[(0,y.jsx)(Ae,{valueWidth:t.duration,items:i}),(0,y.jsx)(Ge,{viewRange:n,numTicks:4,height:e||60,updateViewRangeTime:a,updateNextViewRangeTime:s})]})]})}}var Xe,et,tt;tt={height:60},(et="defaultProps")in(Xe=Ye)?Object.defineProperty(Xe,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):Xe[et]=tt;const nt=["renderer"];const st=e=>({TracePageHeader:s.iv`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,l.h)(e,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,l.h)(e,"#eee")};
        border-bottom: 1px solid ${(0,l.h)(e,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,l.h)(e,"#ccc")};
      }
    `,TracePageHeaderTitleRow:s.iv`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:s.iv`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:s.iv`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
      /* Adapt styles when changing from a element into button */
      background: transparent;
      text-align: left;
      border: none;
    `,TracePageHeaderDetailToggle:s.iv`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:s.iv`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:s.iv`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:s.iv`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:s.iv`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:m()(s.iv`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:s.iv`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:s.iv`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:s.iv`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),at=[{key:"timestamp",label:"Trace Start:",renderer(e,t,n){const s=(0,G.dq)(e.startTime/1e3,{timeZone:t,defaultWithMS:!0}),a=s.match(/^(.+)(:\d\d\.\d+)$/);return a?(0,y.jsxs)("span",{className:n.TracePageHeaderOverviewItemValue,children:[a[1],(0,y.jsx)("span",{className:n.TracePageHeaderOverviewItemValueDetail,children:a[2]})]}):s}},{key:"duration",label:"Duration:",renderer:e=>(0,Ie.LU)(e.duration)},{key:"service-count",label:"Services:",renderer:e=>new Set((0,k.values)(e.processes).map((e=>e.serviceName))).size},{key:"depth",label:"Depth:",renderer:e=>(0,k.get)((0,k.maxBy)(e.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:e=>e.spans.length}];function it(e){const{canCollapse:t,hideMap:n,hideSummary:s,onSlimViewClicked:i,slimView:r,trace:l,updateNextViewRangeTime:d,updateViewRangeTime:c,viewRange:u,timeZone:h}=e,p=(0,o.wW)(st),g=a.useMemo((()=>l?Ce(l):[]),[l]);if(!l)return null;const v=!s&&!r&&at.map((e=>{const{renderer:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,nt);return Object.assign({},n,{value:t(l,h,p)})})),b=(0,y.jsxs)("h1",{className:m()(p.TracePageHeaderTitle,t&&p.TracePageHeaderTitleCollapsible),children:[(0,y.jsx)(le,{traceName:Oe(l.spans)})," ",(0,y.jsx)("small",{className:m()(p.TracePageHeaderTraceId,f.pQ),children:l.traceID})]});return(0,y.jsxs)("header",{className:p.TracePageHeader,children:[(0,y.jsxs)("div",{className:p.TracePageHeaderTitleRow,children:[g&&g.length>0&&(0,y.jsx)(ne,{links:g,className:p.TracePageHeaderBack}),t?(0,y.jsxs)("button",{type:"button",className:p.TracePageHeaderTitleLink,onClick:i,role:"switch","aria-checked":!r,children:[(0,y.jsx)(Z(),{className:m()(p.TracePageHeaderDetailToggle,!r&&p.TracePageHeaderDetailToggleExpanded)}),b]}):b]}),v&&(0,y.jsx)(se.Z,{className:p.TracePageHeaderOverviewItems,items:v}),!n&&!r&&(0,y.jsx)(Ye,{trace:l,viewRange:u,updateNextViewRangeTime:d,updateViewRangeTime:c})]})}var rt=n(2726);function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lt{constructor(e){ot(this,"isTagsOpen",void 0),ot(this,"isProcessOpen",void 0),ot(this,"logs",void 0),ot(this,"references",void 0),ot(this,"isWarningsOpen",void 0),ot(this,"isStackTracesOpen",void 0),ot(this,"isReferencesOpen",void 0);const{isTagsOpen:t,isProcessOpen:n,isReferencesOpen:s,isWarningsOpen:a,isStackTracesOpen:i,logs:r,references:o}=e||{};this.isTagsOpen=Boolean(t),this.isProcessOpen=Boolean(n),this.isReferencesOpen=Boolean(s),this.isWarningsOpen=Boolean(a),this.isStackTracesOpen=Boolean(i),this.logs={isOpen:Boolean(r&&r.isOpen),openedItems:r&&r.openedItems?new Set(r.openedItems):new Set},this.references={isOpen:Boolean(o&&o.isOpen),openedItems:o&&o.openedItems?new Set(o.openedItems):new Set}}toggleTags(){const e=new lt(this);return e.isTagsOpen=!this.isTagsOpen,e}toggleProcess(){const e=new lt(this);return e.isProcessOpen=!this.isProcessOpen,e}toggleReferences(){const e=new lt(this);return e.references.isOpen=!this.references.isOpen,e}toggleReferenceItem(e){const t=new lt(this);return t.references.openedItems.has(e)?t.references.openedItems.delete(e):t.references.openedItems.add(e),t}toggleWarnings(){const e=new lt(this);return e.isWarningsOpen=!this.isWarningsOpen,e}toggleStackTraces(){const e=new lt(this);return e.isStackTracesOpen=!this.isStackTracesOpen,e}toggleLogs(){const e=new lt(this);return e.logs.isOpen=!this.logs.isOpen,e}toggleLogItem(e){const t=new lt(this);return t.logs.openedItems.has(e)?t.logs.openedItems.delete(e):t.logs.openedItems.add(e),t}}var dt=n(58565);class ct{static iterFunction(e,t=0){return n=>e(n.value,n,t)}static searchFunction(e){return"function"==typeof e?e:(t,n)=>e instanceof ct?n===e:t===e}constructor(e,t=[]){this.value=e,this.children=t}get depth(){return this.children.reduce(((e,t)=>Math.max(t.depth+1,e)),1)}get size(){let e=0;return this.walk((()=>e++)),e}addChild(e){return this.children.push(e instanceof ct?e:new ct(e)),this}find(e){if(ct.iterFunction(ct.searchFunction(e))(this))return this;for(let t=0;t<this.children.length;t++){const n=this.children[t].find(e);if(n)return n}return null}getPath(e){const t=ct.iterFunction(ct.searchFunction(e)),n=(e,s)=>{const a=s.concat([e]);if(t(e))return a;for(let t=0;t<e.children.length;t++){const s=e.children[t],i=n(s,a);if(i)return i}return null};return n(this,[])}walk(e,t=0){const n=[];let s=t;for(n.push({node:this,depth:s});n.length;){const{node:t,depth:a}=n.pop();e(t.value,t,a),s=a+1;let i=t.children.length-1;for(;i>=0;)n.push({node:t.children[i],depth:s}),i--}}}const ut=e=>e.serviceName;var ht=n(21817),pt=n.n(ht);const gt=e=>e.spanID,mt=e=>e.operationName,ft=e=>e.duration,vt=e=>e.startTime,bt=e=>e.processID,xt=(0,dt.P1)((0,dt.P1)((({span:e})=>e),(e=>e.references||[])),(({type:e})=>e),((e,t)=>e.find((e=>e.refType===t)))),yt=((0,dt.P1)((e=>xt({span:e,type:"CHILD_OF"})),(e=>e?e.spanID:null)),(0,dt.P1)((e=>{if(!e.process)throw new Error("\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    ");return e.process}),ut)),wt=((0,dt.P1)((({spans:e})=>e),(({leftBound:e})=>e),(({rightBound:e})=>e),((e,t,n)=>e.filter((e=>vt(e)>=t&&vt(e)<=n)))),(0,dt.P1)((({spans:e})=>e),(({text:e})=>e),((e,t)=>pt().filter(t,e,{extract:e=>`${yt(e)} ${mt(e)}`}).map((({original:e})=>e))))),jt=(0,dt.P1)(wt,(e=>e.reduce(((e,t)=>({...e,[gt(t)]:t})),{}))),St=((0,dt.P1)((({spans:e})=>e),jt,((e,t)=>e.map((e=>({...e,muted:!t[gt(e)]}))))),e=>e.spans),Ct=e=>e.processes,kt=(0,dt.P1)((e=>e.span),(e=>e.processes),((e,t)=>({...e,process:t[bt(e)]}))),Nt=(0,dt.P1)(St,(e=>e.reduce(((e,t)=>e.set(gt(t),t)),new Map)));function Ot(e){const t=new Map(e.spans.map((e=>[e.spanID,new ct(e.spanID)]))),n=new Map(e.spans.map((e=>[e.spanID,e]))),s=new ct("__root__");e.spans.forEach((e=>{const n=t.get(e.spanID);if(Array.isArray(e.references)&&e.references.length){const{refType:a,spanID:i}=e.references[0];if("CHILD_OF"!==a&&"FOLLOWS_FROM"!==a)throw new Error(`Unrecognized ref type: ${a}`);(t.get(i)||s).children.push(n)}else s.children.push(n)}));const a=(e,t)=>{const s=n.get(e.value),a=n.get(t.value);return+(s.startTime>a.startTime)||+(s.startTime===a.startTime)-1};return e.spans.forEach((e=>{const n=t.get(e.spanID);n.children.length>1&&n.children.sort(a)})),s.children.sort(a),s}(0,dt.P1)(St,(e=>e.length));const It=(0,dt.P1)(St,(e=>e.reduce(((e,t)=>e?Math.min(e,vt(t)):vt(t)),null))),Tt=(0,dt.P1)(St,It,((e,t)=>e.reduce(((e,n)=>e?Math.max(vt(n)-t+ft(n),e):ft(n)),null))),$t=((0,dt.P1)(It,Tt,((e,t)=>e+t)),(0,dt.P1)(Ot,Nt,((e,t)=>e.children.map((e=>t.get(e.value))).sort(((e,t)=>{return n=vt(e),s=vt(t),n-s;var n,s}))[0]))),Rt=((0,dt.P1)(Ot,(e=>e.depth-1)),(0,dt.P1)((0,dt.P1)((e=>e.trace),Ot),(0,dt.P1)((e=>e.span),gt),((e,t)=>e.getPath(t).length-1)),(0,dt.P1)(Ct,(e=>Object.keys(e).reduce(((t,n)=>t.add(ut(e[n]))),new Set)))),Pt=((0,dt.P1)(Rt,(e=>e.size)),{ms:Ie.Cz,s:Ie.Gk}),Dt=(0,dt.P1)(Tt,(e=>e>=Ie.WT?Pt.s:Pt.ms)),At=((0,dt.P1)((({duration:e})=>e),(({unit:e})=>Pt[e]),((e,t)=>t(e))),(0,dt.P1)((({duration:e})=>e),(0,dt.P1)((({trace:e})=>e),Dt),((e,t)=>t(e))),(0,dt.P1)((({trace:e})=>e),(({spans:e})=>e),(({sort:e})=>e),((e,t,{dir:n,comparator:s,selector:a})=>[...t].sort(((t,i)=>n*s(a(t,e),a(i,e)))))),(0,dt.P1)(Ot,(e=>{const t=new Map;let n=0;return e.walk((e=>t.set(e,n++))),t})));(0,dt.P1)((0,dt.P1)((e=>e.trace),Ot),(0,dt.P1)((e=>e.span),gt),((e,t)=>{const n=e.find(t);return n?n.size-1:-1})),(0,dt.P1)((0,dt.P1)((({trace:e})=>e),At),(({span:e})=>e),((e,t)=>e.get(gt(t)))),(0,dt.P1)((0,dt.P1)((0,dt.P1)((e=>{const t=St(e),n=Ct(e);return{...e,spans:t.map((e=>kt({span:e,processes:n})))}}),$t),(0,dt.zB)({name:mt,serviceName:yt})),(({name:e,serviceName:t})=>`${t}: ${e}`)),(0,dt.P1)((({spans:e})=>e),(0,dt.P1)((({trace:e})=>e),Ot),(({collapsed:e})=>e),((e,t,n)=>{const s=n.reduce(((e,n)=>(t.find(n).walk((t=>t!==n&&e.add(t))),e)),new Set);return s.size>0?e.filter((e=>!s.has(gt(e)))):e})),(0,dt.P1)((({trace:e})=>e),(({interval:e=4})=>e),(({width:e=3})=>e),((e,t,n)=>[...Array(t+1).keys()].map((s=>({timestamp:It(e)+Tt(e)*(s/t),width:n}))))),(0,dt.P1)((e=>e),St,((e,t)=>{const n=new Map;return{...e,spans:t.reduce(((e,t)=>{const s=n.has(gt(t))?`${gt(t)}_${n.get(gt(t))}`:gt(t),a={...t,spanID:s};return s!==gt(t)&&console.warn("duplicate spanID in trace replaced",gt(t),"new:",s),n.set(gt(t),(n.get(gt(t))||0)+1),e.concat([a])}),[])}})),(0,dt.P1)((e=>e),St,((e,t)=>({...e,spans:t.filter((e=>!!vt(e)))})));function Mt(e){const t=new Map;return{tags:e.reduce(((e,n)=>(e.some((e=>e.key===n.key&&e.value===n.value))?t.set(`${n.key}:${n.value}`,`Duplicate tag "${n.key}:${n.value}"`):e.push(n),e)),[]),warnings:Array.from(t.values())}}function Lt(e,t){var n;const s=null!==(n=null==e?void 0:e.slice())&&void 0!==n?n:[],a=(t||[]).map((e=>e.toLowerCase()));return s.sort(((e,t)=>{const n=e.key.toLowerCase(),s=t.key.toLowerCase();for(let e=0;e<a.length;e++){const t=a[e];if(n.startsWith(t)&&!s.startsWith(t))return-1;if(!n.startsWith(t)&&s.startsWith(t))return 1}return n>s?1:n<s?-1:0})),s}function Ft(e){if(null==e||!e.traceID)return null;const t=e.traceID.toLowerCase();let n=0,s=Number.MAX_SAFE_INTEGER;const a=new Map,i=new Map;e.spans=e.spans.filter((e=>Boolean(e.startTime))),e.processes=Object.entries(e.processes).reduce(((e,t)=>{let[n,s]=t;return e[n]=Object.assign({},s,{tags:Lt(s.tags)}),e}),{});const r=e.spans.length;for(let t=0;t<r;t++){const r=e.spans[t],{startTime:o,duration:l,processID:d}=r;let c=r.spanID;o<s&&(s=o),o+l>n&&(n=o+l);const u=a.get(c);null!=u?(console.warn(`Dupe spanID, ${u+1} x ${c}`,r,i.get(c)),(0,k.isEqual)(r,i.get(c))&&console.warn("\t two spans with same ID have `isEqual(...) === true`"),a.set(c,u+1),c=`${c}_${u}`,r.spanID=c):a.set(c,1),r.process=e.processes[d],i.set(c,r)}const o=Ot(e),l=[],d={};o.walk((function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("__root__"===e)return;const r=i.get(e);if(!r)return;const{serviceName:o}=r.process;d[o]=(d[o]||0)+1,r.relativeStartTime=r.startTime-s,r.depth=a-1,r.hasChildren=n.children.length>0,r.childSpanCount=n.children.length,r.warnings=r.warnings||[],r.tags=r.tags||[],r.references=r.references||[];const c=Mt(r.tags);r.tags=Lt(c.tags,he("topTagPrefixes")),r.warnings=r.warnings.concat(c.warnings),r.references.forEach(((n,s)=>{const a=i.get(n.spanID);a&&(n.span=a,s>0&&(a.subsidiarilyReferencedBy=a.subsidiarilyReferencedBy||[],a.subsidiarilyReferencedBy.push({spanID:e,traceID:t,span:r,refType:n.refType})))})),l.push(r)}));const c=Oe(l);return{services:Object.keys(d).map((e=>({name:e,numberOfSpans:d[e]}))),spans:l,traceID:t,traceName:c,processes:e.processes,duration:n-s,startTime:s,endTime:n}}function Et(e,t){if(!t)return;const n=[],s=[];e.split(/\s+/).filter(Boolean).forEach((e=>{"-"===e[0]?s.push(e.slice(1).toLowerCase()):n.push(e.toLowerCase())}));const a=(e,t)=>e.some((e=>t.toLowerCase().includes(e))),i=e=>!!e&&e.some((e=>!a(s,e.key)&&(a(n,e.key)||a(n,e.value.toString()))));return new Set(t.filter((e=>a(n,e.operationName)||a(n,e.process.serviceName)||i(e.tags)||null!==e.logs&&e.logs.some((e=>i(e.fields)))||i(e.process.tags)||n.some((t=>t===e.spanID)))).map((e=>e.spanID)))}},2726:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>p,Kg:()=>m,ZP:()=>f,th:()=>g});var s,a=n(86780),i=(n(68404),n(86351)),r=n(70332),o=n(16755),l=n(34117),d=n(46889),c=n(70917),u=n(4645),h=n(45916);const p="None",g="Duration",m="Tag";function f(e){var t,n,f;let{options:b,onOptionsChange:x}=e;const y=(0,o.wW)(v),w=[p,g,m].map(i.E);return(0,h.jsxs)("div",{className:(0,a.iv)({width:"100%"}),children:[s||(s=(0,h.jsx)("h3",{className:"page-heading",children:"Span bar label"})),(0,h.jsx)("div",{className:y.infoText,children:"Span bar label lets you add additional info to the span bar row."}),(0,h.jsx)(l.Z,{className:y.row,children:(0,h.jsx)(d._,{label:"Label",labelWidth:26,grow:!0,children:(0,h.jsx)(c.Ph,{inputId:"label",options:w,value:(null===(t=b.jsonData.spanBar)||void 0===t?void 0:t.type)||"",onChange:e=>{var t;(0,r.tp)({onOptionsChange:x,options:b},"spanBar",Object.assign({},b.jsonData.spanBar,{type:null!==(t=null==e?void 0:e.value)&&void 0!==t?t:""}))},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25})})}),(null===(n=b.jsonData.spanBar)||void 0===n?void 0:n.type)===m&&(0,h.jsx)(l.Z,{className:y.row,children:(0,h.jsx)(d._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value",children:(0,h.jsx)(u.I,{type:"text",placeholder:"Enter tag key",onChange:e=>(0,r.tp)({onOptionsChange:x,options:b},"spanBar",Object.assign({},b.jsonData.spanBar,{tag:e.currentTarget.value})),value:(null===(f=b.jsonData.spanBar)||void 0===f?void 0:f.tag)||"",width:25})})})]})}const v=e=>({infoText:a.iv`
    label: infoText;
    padding-bottom: ${e.spacing(2)};
    color: ${e.colors.text.secondary};
  `,row:a.iv`
    label: row;
    align-items: baseline;
  `})},74147:(e,t,n)=>{"use strict";n.d(t,{A4:()=>u,GL:()=>d,H3:()=>l,Im:()=>g,K9:()=>f,NY:()=>b,WW:()=>a,b$:()=>p,bi:()=>i,h2:()=>o,im:()=>r,oD:()=>c,pQ:()=>v,ty:()=>m,xb:()=>h});var s=n(86780);const a=s.iv`
  position: relative;
`,i=s.iv`
  margin-bottom: 0.25rem;
`,r=s.iv`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,o=s.iv`
  margin: 0;
`,l=s.iv`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,d=s.iv`
  padding-bottom: 0.5rem;
`,c=s.iv`
  display: flex;
`,u=(s.iv`
  align-items: center;
`,s.iv`
  align-items: start;
`,s.iv`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`),h=s.iv`
  text-align: right;
`,p=s.iv`
  display: inline-block;
`,g=s.iv`
  margin: -0.2rem 0.25rem 0 0;
`,m=s.iv`
  text-overflow: ellipsis;
`,f=s.iv`
  width: 100%;
`,v=s.iv`
  color: #aaa;
`,b=s.iv`
  justify-content: flex-end;
`},47627:(e,t,n)=>{"use strict";n.d(t,{_K:()=>u,e6:()=>h});var s=n(58635),a=n(35008),i=n.n(a),r=n(57971);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(7!==e.length)return[0,0,0];const t=e.slice(1,3),n=e.slice(3,5),s=e.slice(5);return[parseInt(t,16),parseInt(n,16),parseInt(s,16)]}class d{constructor(e,t){o(this,"colorsHex",void 0),o(this,"colorsRgb",void 0),o(this,"cache",void 0);const n=function(e,t){const n=e.indexOf("#E24D42");n>-1&&e.splice(n,1);let s=[];for(const n of e)i().readability(t.colors.background.primary,n)>=3&&s.push(n);return s}(e,t);this.colorsHex=n,this.colorsRgb=n.map(l),this.cache=new Map}_getColorIndex(e){let t=this.cache.get(e);if(null==t){const n=this.hashCode(e.toLowerCase()),s=Math.abs(n%this.colorsHex.length);t=4===s?s+1:s,this.cache.set(e,t)}return t}hashCode(e){let t,n,s=0;for(t=0;t<e.length;t++)n=e.charCodeAt(t),s=(s<<5)-s+n;return s}getColorByKey(e){const t=this._getColorIndex(e);return this.colorsHex[t]}getRgbColorByKey(e){const t=this._getColorIndex(e);return this.colorsRgb[t]}clear(){this.cache.clear()}}const c=(0,s.Z)(((e,t)=>new d(e,t)));function u(e,t){return c(r.O9,t).getColorByKey(e)}function h(e,t){return c(r.O9,t).getRgbColorByKey(e)}},14368:(e,t,n)=>{"use strict";n.d(t,{WT:()=>o,LU:()=>f,Cz:()=>g,Gk:()=>m});var s=n(82897),a=n(92467),i=n.n(a);const r=1e3,o=1e6,l=60*o,d=60*l,c=24*d,u=Math.log10(r),h=[{unit:"d",microseconds:c,ofPrevious:24},{unit:"h",microseconds:d,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:r,ofPrevious:1e3},{unit:"μs",microseconds:1,ofPrevious:1e3}];const p=(e,t,n)=>function(e,t){const n=t+(Math.floor(Math.log10(Math.abs(e)))+1);return n<=0?Math.trunc(e):Number(e.toPrecision(n))}(e/n,t)*n;function g(e){const t=p(e,u,r);return`${i().duration(t/r).asMilliseconds()}ms`}function m(e){const t=p(e,u,o);return`${i().duration(t/r).asSeconds()}s`}function f(e){const[t,n]=(0,s.dropWhile)(h,((t,n)=>{let{microseconds:s}=t;return n<h.length-1&&s>e}));if(1e3===t.ofPrevious)return`${(0,s.round)(e/t.microseconds,2)}${t.unit}`;const a=`${Math.floor(e/t.microseconds)}${t.unit}`,i=Math.round(e/n.microseconds%t.ofPrevious),r=`${i}${n.unit}`;return 0===i?a:`${a} ${r}`}},34371:(e,t,n)=>{"use strict";n.d(t,{Or:()=>As,b4:()=>Ps,nH:()=>Ds});var s=n(55560),a=n(68404),i=n(36635),r=n(70356),o=n(80795),l=n(65737),d=n(31181),c=n(72767),u=n(40941),h=n(3389),p=n(48717),g=n(15459),m=n(34819),f=n(63454),v=n(45916);const b=a.forwardRef(((e,t)=>(0,v.jsx)("div",{id:"ngRoot",ref:t,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}})));b.displayName="AngularRoot";var x=n(70194);var y,w,j=n(52423),S=n(16755),C=n(39321),k=n(64850),N=n(82897),O=n(97370),I=n(36298),T=n(35448),R=n(59196),P=n(8105),D=n(2247),A=n(61533),M=n(66015),L=n(78941),F=n(22222),E=n(8006),V=n(46782),z=n(40455);function B(e){let{onDismiss:t}=e;const{value:n=[]}=(0,M.Z)((()=>z.h.loadOrgs()),[]),s=R.Vt.user.orgId,a=(0,j.css)({display:"flex",maxHeight:"calc(85vh - 42px)"});return(0,v.jsx)(L.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:t,isOpen:!0,contentClassName:a,children:(0,v.jsx)(F.$,{autoHeightMin:"100%",children:(0,v.jsxs)("table",{className:"filter-table form-inline",children:[y||(y=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Role"}),(0,v.jsx)("th",{})]})})),(0,v.jsx)("tbody",{children:n.map((e=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{children:e.role}),(0,v.jsx)("td",{className:"text-right",children:e.orgId===s?w||(w=(0,v.jsx)(E.zx,{size:"sm",children:"Current"})):(0,v.jsx)(E.zx,{variant:"secondary",size:"sm",onClick:()=>(async e=>{await z.h.setUserOrg(e),window.location.href=`${V.ZP.appSubUrl}${V.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${e.orgId}`})(e),children:"Switch to"})})]},e.orgId)))})]})})})}var _=n(45560);const W=(e,t)=>{const{isSignedIn:n,user:s}=R.Vt,a=()=>{D.Z.publish(new P.Dn({component:_.B}))},i=()=>{D.Z.publish(new P.Dn({component:B}))};if(!l.v.featureToggles.topnav&&s&&s.orgCount>1){const t=e.find((e=>"profile"===e.id));t&&(t.showOrgSwitcher=!0,t.subTitle=`Organization: ${null==s?void 0:s.orgName}`)}if(!n&&!l.v.featureToggles.topnav){const n=I.u.getUrlForPartial(t,{forceLogin:"true"});e.unshift({icon:"signout",id:"sign-in",section:O.yV.Config,target:"_self",text:(0,T.t)("nav.sign-in","Sign in"),url:n})}return e.forEach((e=>{let t=e.children||[];"help"===e.id&&(e.children=[...(0,A.dP)(),{id:"keyboard-shortcuts",text:(0,T.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:a}]),!l.v.featureToggles.topnav&&e.showOrgSwitcher&&(e.children=[...t,{id:"switch-organization",text:(0,T.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:i}])})),e},U=(e,t)=>{const n=e.onClick;return e.onClick=()=>{var s;(0,d.ff)("grafana_navigation_item_clicked",{path:null!==(s=e.url)&&void 0!==s?s:e.id,state:t?"expanded":"collapsed"}),null==n||n()},e.children&&(e.children=e.children.map((e=>U(e,t)))),e},H=(e,t)=>Boolean(e===t||q(e,t)),q=(e,t)=>{var n;return Boolean(null===(n=e.children)||void 0===n?void 0:n.some((e=>e===t||q(e,t))))},Z=e=>{var t;return null!==(t=null==e?void 0:e.split("?")[0])&&void 0!==t?t:""},G=(e,t)=>{const n=Z(null==t?void 0:t.url),s=Z(e.url);return s&&s.length>(null==n?void 0:n.length)},Q=(e,t,n)=>{for(const a of e){var s;const e=Z(a.url),i=I.u.stripBaseFromUrl(e);if(i){if(i===t){n=a;break}if("/"!==i&&t.startsWith(i))G(a,n)&&(n=a);else{if("/alerting/list"===i&&t.startsWith("/alerting/notification/")){n=a;break}"/dashboards"===i&&t.startsWith("/d/")&&G(a,n)&&(n=a)}}if(a.children&&(n=Q(a.children,t,n)),Z(null===(s=n)||void 0===s?void 0:s.url)===t)return n}return n};function K(e){var t;return null!==(t=e.id)&&void 0!==t?t:e.text}var J=n(99510),Y=n(81699),X=n(6665),ee=n(22163),te=n(99500),ne=n(23734);const se=40;var ae=n(42454),ie=n(61264),re=n(32889);function oe(e){let{children:t,icon:n,isActive:s,isChild:a,onClick:i,target:r,url:o}=e;const l=(0,S.l4)(),d=le(l,s,a),c=(0,v.jsxs)("div",{className:d.linkContent,children:[n&&(0,v.jsx)(te.J,{"data-testid":"dropdown-child-icon",name:n}),(0,v.jsx)("div",{className:d.linkText,children:t}),"_blank"===r&&(0,v.jsx)(te.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:d.externalLinkIcon})]});let u=(0,v.jsx)("button",{className:(0,j.cx)(d.button,d.element),onClick:i,children:c});return o&&(u=!r&&o.startsWith("/")?(0,v.jsx)(re.r,{className:d.element,href:o,target:r,onClick:i,children:c}):(0,v.jsx)("a",{href:o,target:r,className:d.element,onClick:i,children:c})),(0,v.jsx)("li",{className:d.listItem,children:u})}oe.displayName="NavBarMenuItem";const le=(e,t,n)=>({button:(0,j.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,j.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,j.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,j.css)({color:e.colors.text.secondary}),element:(0,j.css)(Object.assign({alignItems:"center",boxSizing:"border-box",position:"relative",color:t?e.colors.text.primary:e.colors.text.secondary,padding:e.spacing(1,1,1,n?5:0)},n&&{borderRadius:e.shape.borderRadius()},{width:"100%","&:hover, &:focus-visible":Object.assign({},n&&{background:e.colors.emphasize(e.colors.background.primary,.03)},{textDecoration:"underline",color:e.colors.text.primary}),"&:focus-visible":{boxShadow:"none",outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:t?"block":"none",content:'" "',height:e.spacing(3),position:"absolute",left:e.spacing(1),top:"50%",transform:"translateY(-50%)",width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}})),listItem:(0,j.css)(Object.assign({boxSizing:"border-box",position:"relative",display:"flex",width:"100%"},n&&{padding:e.spacing(0,2)}))});var de=n(65632);function ce(e){let{link:t}=e;const n=function(e){return{img:(0,j.css)({height:e.spacing(3),width:e.spacing(3)}),round:(0,j.css)({borderRadius:"50%"})}}((0,S.l4)());if("grafana"===t.icon)return(0,v.jsx)(de.c.MenuLogo,{className:n.img});if(t.icon){const e=(0,ae.iJ)(t.icon);return(0,v.jsx)(te.J,{name:null!=e?e:"link",size:"xl"})}return(0,v.jsx)("img",{className:(0,j.cx)(n.img,t.roundIcon&&n.round),src:t.img,alt:""})}const ue=e=>{let{children:t}=e;const n=(0,S.wW)(he);return(0,v.jsxs)("div",{children:[t,(0,v.jsx)("span",{className:n.highlight})]})},he=e=>({highlight:j.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function pe(e){var t,n;let{link:s,activeItem:i,children:r,className:o,onClose:l}=e;const d=(0,S.wW)(ge),c=s.highlightText?ue:a.Fragment,u=s===i,h=q(s,i),[p,g]=(0,a.useState)(Boolean(h));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:(0,j.cx)(d.collapsibleSectionWrapper,o),children:[(0,v.jsx)(oe,{isActive:s===i,onClick:()=>{var e;null===(e=s.onClick)||void 0===e||e.call(s),null==l||l()},target:s.target,url:s.url,children:(0,v.jsxs)("div",{className:(0,j.cx)(d.labelWrapper,{[d.isActive]:u,[d.hasActiveChild]:h}),children:[(0,v.jsx)(c,{children:(0,v.jsx)(ce,{link:s})}),null!==(t=(0,ie.Y)(s.id))&&void 0!==t?t:s.text]})}),Boolean(null===(n=s.children)||void 0===n?void 0:n.length)&&(0,v.jsx)(E.zx,{"aria-label":(p?"Collapse":"Expand")+" section",variant:"secondary",fill:"text",className:d.collapseButton,onClick:()=>g(!p),children:(0,v.jsx)(te.J,{name:p?"angle-up":"angle-down",size:"xl"})})]}),p&&r]})}const ge=e=>({collapsibleSectionWrapper:(0,j.css)({alignItems:"center",display:"flex"}),collapseButton:(0,j.css)({color:e.colors.text.disabled,padding:e.spacing(0,.5),marginRight:e.spacing(1)}),collapseWrapperActive:(0,j.css)({backgroundColor:e.colors.action.disabledBackground}),collapseContent:(0,j.css)({padding:0}),labelWrapper:(0,j.css)({display:"grid",fontSize:e.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} auto`,placeItems:"center",fontWeight:e.typography.fontWeightMedium}),isActive:(0,j.css)({color:e.colors.text.primary,"&::before":{display:"block",content:'" "',height:e.spacing(3),position:"absolute",left:e.spacing(1),top:"50%",transform:"translateY(-50%)",width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}}),hasActiveChild:(0,j.css)({color:e.colors.text.primary})});function me(e){let{link:t,activeItem:n,onClose:s}=e;const a=(0,S.wW)(fe);if(t.emptyMessageId&&!ve(t)){const e=(0,ie.Y)(t.emptyMessageId);return(0,v.jsx)(pe,{link:t,children:(0,v.jsx)("ul",{className:a.children,children:(0,v.jsx)("div",{className:a.emptyMessage,children:e})})})}return(0,v.jsx)(pe,{onClose:s,link:t,activeItem:n,children:ve(t)&&(0,v.jsx)("ul",{className:a.children,children:t.children.map((e=>{var a;const i=e.icon?(0,ae.iJ)(e.icon):void 0;return!e.isCreateAction&&(0,v.jsx)(oe,{isActive:H(e,n),isChild:!0,icon:e.showIconInNavbar?i:void 0,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),s()},target:e.target,url:e.url,children:null!==(a=(0,ie.Y)(e.id))&&void 0!==a?a:e.text},`${t.text}-${e.text}`)}))})})}const fe=e=>({children:(0,j.css)({display:"flex",flexDirection:"column"}),flex:(0,j.css)({display:"flex"}),itemWithoutMenu:(0,j.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,j.css)({height:"100%",width:"100%"}),iconContainer:(0,j.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,j.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,j.css)({fontSize:e.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,j.css)({color:e.colors.text.secondary,fontStyle:"italic",padding:e.spacing(1,1.5,1,7)})});function ve(e){return Boolean(e.children&&e.children.length>0)}var be;const xe="350px";function ye(e){let{activeItem:t,navItems:n,searchBarHidden:s,onClose:i}=e;const r=(0,S.l4)(),o=we(r,s),l=r.transitions.duration.shortest,d=je(r,l),{chrome:c}=(0,C.p)(),u=c.useState(),h=(0,a.useRef)(null),p=(0,a.useRef)(null),{dialogProps:g}=(0,J.R)({},h),[m,f]=(0,a.useState)(!1),b=()=>f(!1),{overlayProps:x,underlayProps:y}=(0,X.Ir)({isDismissable:!0,isOpen:!0,onClose:b},h);return(0,a.useEffect)((()=>{u.megaMenuOpen&&f(!0)}),[u.megaMenuOpen]),(0,v.jsxs)(X.Xj,{children:[(0,v.jsx)(ee.Z,{nodeRef:h,in:m,unmountOnExit:!0,classNames:d.overlay,timeout:{enter:l,exit:0},onExited:i,children:(0,v.jsx)("div",Object.assign({"data-testid":"navbarmenu",ref:h},x,g,{className:o.container,children:(0,v.jsxs)(Y.MT,{contain:!0,autoFocus:!0,children:[(0,v.jsxs)("div",{className:o.mobileHeader,children:[be||(be=(0,v.jsx)(te.J,{name:"bars",size:"xl"})),(0,v.jsx)(ne.h,{"aria-label":"Close navigation menu",name:"times",onClick:b,size:"xl",variant:"secondary"})]}),(0,v.jsx)("nav",{className:o.content,children:(0,v.jsx)(F.$,{showScrollIndicators:!0,hideHorizontalTrack:!0,children:(0,v.jsx)("ul",{className:o.itemList,children:n.map((e=>(0,v.jsx)(me,{link:e,onClose:b,activeItem:t},e.text)))})})})]})}))}),(0,v.jsx)(ee.Z,{nodeRef:p,in:m,unmountOnExit:!0,classNames:d.backdrop,timeout:{enter:l,exit:0},children:(0,v.jsx)("div",Object.assign({ref:p,className:o.backdrop},y))})]})}ye.displayName="NavBarMenu";const we=(e,t)=>{const n=(t?se:80)+1;return{backdrop:(0,j.css)({backdropFilter:"blur(1px)",backgroundColor:e.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:t?0:se,zIndex:e.zIndex.modalBackdrop,[e.breakpoints.up("md")]:{top:n}}),container:(0,j.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:e.spacing(1.5),right:0,zIndex:e.zIndex.modal,position:"fixed",top:t?0:se,backgroundColor:e.colors.background.primary,boxSizing:"content-box",[e.breakpoints.up("md")]:{borderRight:`1px solid ${e.colors.border.weak}`,right:"unset",top:n}}),content:(0,j.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,j.css)({display:"flex",justifyContent:"space-between",padding:e.spacing(1,2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,j.css)({display:"grid",gridAutoRows:`minmax(${e.spacing(6)}, auto)`,gridTemplateColumns:"minmax(350px, auto)",minWidth:xe})}},je=(e,t)=>{const n={transitionDuration:`${t}ms`,transitionTimingFunction:e.transitions.easing.easeInOut,[e.breakpoints.down("md")]:{overflow:"hidden"}},s=Object.assign({},n,{transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}}),a=Object.assign({},n,{transitionProperty:"opacity"}),i={width:"100%",[e.breakpoints.up("md")]:{boxShadow:e.shadows.z3,width:xe}},r={opacity:1};return{backdrop:{enter:(0,j.css)({opacity:0}),enterActive:(0,j.css)(a,r),enterDone:(0,j.css)(r)},overlay:{enter:(0,j.css)({boxShadow:"none",width:0}),enterActive:(0,j.css)(s,i),enterDone:(0,j.css)(i)}}},Se=a.memo((e=>{let{onClose:t,searchBarHidden:n}=e;const s=(0,k.v9)((e=>e.navBarTree)),a=(0,S.l4)(),i=Ce(a),o=(0,r.TH)(),l=(0,N.cloneDeep)(s),d=[...l.filter((e=>e.section===O.yV.Core||e.section===O.yV.Plugin)).map((e=>U(e,!0))),...W(l.filter((e=>e.section===O.yV.Config&&e&&"help"!==e.id&&"profile"!==e.id)),o).map((e=>U(e,!0)))],c=Q(d,o.pathname);return(0,v.jsx)("div",{className:i.menuWrapper,children:(0,v.jsx)(ye,{activeItem:c,navItems:d,onClose:t,searchBarHidden:n})})}));Se.displayName="MegaMenu";const Ce=e=>({menuWrapper:(0,j.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:e.zIndex.sidemenu})});var ke,Ne=n(1696),Oe=n(33994);function Ie(e){const t=(0,S.wW)(Te);return(0,v.jsx)("li",{className:t.breadcrumbWrapper,children:e.isCurrent?(0,v.jsx)("span",{className:t.breadcrumb,"aria-current":"page",children:e.text}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("a",{className:(0,j.cx)(t.breadcrumb,t.breadcrumbLink),href:e.href,children:e.text}),(0,v.jsx)("div",{className:t.separator,"aria-hidden":!0,children:ke||(ke=(0,v.jsx)(te.J,{name:"angle-right"}))})]})})}const Te=e=>{const t=(0,j.css)({color:e.colors.text.secondary});return{breadcrumb:(0,j.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:e.spacing(0,.5),whiteSpace:"nowrap",color:e.colors.text.secondary}),breadcrumbLink:(0,j.css)({color:e.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,j.css)({alignItems:"center",color:e.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[e.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${t}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${t}`]:{display:"none"}}}}),separator:t}};function $e(e){let{breadcrumbs:t,className:n}=e;const s=(0,S.wW)(Re);return(0,v.jsx)("nav",{"aria-label":"Breadcrumbs",className:n,children:(0,v.jsx)("ol",{className:s.breadcrumbs,children:t.map(((e,n)=>(0,a.createElement)(Ie,Object.assign({},e,{isCurrent:n===t.length-1,key:n}))))})})}const Re=e=>({breadcrumbs:(0,j.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var Pe,De=n(61348),Ae=n(30881);function Me(e){let{actions:t,searchBarHidden:n,sectionNav:s,pageNav:a,onToggleMegaMenu:i,onToggleSearchBar:r,onToggleKioskMode:o}=e;const l=(0,k.v9)((e=>e.navIndex))[Oe.Qz],d=(0,S.wW)(Le),c=(0,De.t)(s,a,l);return(0,v.jsxs)("div",{className:d.pageToolbar,children:[(0,v.jsx)("div",{className:d.menuButton,children:(0,v.jsx)(ne.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:i})}),(0,v.jsx)($e,{breadcrumbs:c,className:d.breadcrumbs}),(0,v.jsxs)("div",{className:d.actions,children:[t,t&&(Pe||(Pe=(0,v.jsx)(Ae.M,{}))),n&&(0,v.jsx)(Ne.h,{onClick:o,narrow:!0,title:"Enable kiosk mode",icon:"monitor"}),(0,v.jsx)(Ne.h,{onClick:r,narrow:!0,title:"Toggle top search bar",children:(0,v.jsx)(te.J,{name:n?"angle-down":"angle-up",size:"xl"})})]})]})}const Le=e=>({breadcrumbs:(0,j.css)({maxWidth:"50%"}),pageToolbar:(0,j.css)({height:se,display:"flex",padding:e.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,j.css)({display:"flex",alignItems:"center",marginRight:e.spacing(1)}),actions:(0,j.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:e.spacing(1),flexGrow:1,gap:e.spacing(.5),minWidth:0})});var Fe,Ee=n(78080),Ve=n(68374),ze=n(88102),Be=n(16093),_e=n(81359),We=n(89050),Ue=n(38953),He=n(53543),qe=n(46479);function Ze(e){let{feedUrl:t}=e;const n=(0,S.wW)(Ge),{state:s,getNews:i}=(0,qe.j)(t);return(0,a.useEffect)((()=>{i()}),[i]),s.loading||s.error?(0,v.jsxs)("div",{className:n.innerWrapper,children:[s.loading&&(Fe||(Fe=(0,v.jsx)(Ue.u,{text:"Loading..."}))),s.error&&s.error.message]}):s.value?(0,v.jsx)(We.Z,{children:e=>{let{width:t}=e;return(0,v.jsx)("div",{style:{width:`${t}px`},children:s.value.map(((e,n)=>(0,v.jsx)(He.S,{index:n,showImage:!0,width:t,data:s.value},n)))})}}):null}const Ge=e=>({innerWrapper:j.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});var Qe;function Ke(e){let{className:t}=e;const[n,s]=(0,ze.Z)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Ne.h,{className:t,onClick:()=>{s(!0)},iconOnly:!0,icon:"rss","aria-label":"News"}),n&&(0,v.jsx)(Be.d,{title:(0,T.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:s,children:Qe||(Qe=(0,v.jsx)(Ze,{feedUrl:_e.k}))})]})}var Je=n(62847),Ye=n(6551),Xe=n(15013);function et(e){let{orgs:t,onSelectChange:n}=e;const s=(0,S.wW)(tt);return(0,v.jsx)(Xe.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:s.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:t.map((e=>({label:e.name,description:e.role,value:e}))),onChange:n,icon:"building"})}const tt=e=>({buttonCss:(0,j.css)({color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary}})});var nt,st=n(70917);function at(e){let{orgs:t,onSelectChange:n}=e;const s=(0,S.wW)(it),{orgName:i,orgId:r,orgRole:o}=R.Vt.user,[l,d]=(0,a.useState)((()=>({label:i,value:{role:o,orgId:r,name:i},description:o})));return(0,v.jsx)(st.Ph,{"aria-label":"Change organization",width:"auto",value:l,prefix:nt||(nt=(0,v.jsx)(te.J,{className:"prefix-icon",name:"building"})),className:s.select,options:t.map((e=>({label:e.name,description:e.role,value:e}))),onChange:e=>{d(e),n(e)}})}const it=e=>({select:(0,j.css)({border:"none",background:"none",color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary,"& .prefix-icon":(0,j.css)({color:e.colors.text.primary})}})});function rt(){const e=(0,S.l4)(),t=(0,k.I0)(),n=(0,k.v9)((e=>e.organization.userOrgs));(0,a.useEffect)((()=>{R.Vt.isSignedIn&&t((0,Ye.JE)())}),[t]);const s=e.breakpoints.values.sm,[i,r]=(0,a.useState)(window.matchMedia(`(max-width: ${s}px)`).matches);if((0,Je.e)({breakpoint:s,onChange:e=>{r(e.matches)}}),(null==n?void 0:n.length)<=1)return null;const l=i?et:at;return(0,v.jsx)(l,{orgs:n,onSelectChange:e=>{e.value&&((0,Ye.Q$)(e.value.orgId),o.E1.partial({orgId:e.value.orgId},!0),window.location.reload())}})}var ot,lt=n(16736);function dt(e){const t=[];for(const n of e)n.isCreateAction&&t.push(n),n.children&&t.push(...dt(n.children));return t}const ct=e=>{let{}=e;const t=(0,S.wW)(ut),n=(0,S.l4)(),s=(0,k.v9)((e=>e.navBarTree)),i=n.breakpoints.values.sm,[r,o]=(0,a.useState)(window.matchMedia(`(max-width: ${i}px)`).matches),l=(0,a.useMemo)((()=>dt(s)),[s]);(0,Je.e)({breakpoint:i,onChange:e=>{o(e.matches)}});return l.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Ee.L,{overlay:()=>(0,v.jsx)(lt.v,{children:l.map(((e,t)=>(0,v.jsx)(lt.v.Item,{url:e.url,label:e.text},t)))}),placement:"bottom-end",children:e=>r?ot||(ot=(0,v.jsx)(Ne.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"})):(0,v.jsx)(Ne.h,{iconOnly:!0,icon:"plus",isOpen:e,"aria-label":"New"})}),(0,v.jsx)(Ae.M,{className:t.separator})]}):null},ut=e=>({buttonContent:(0,j.css)({alignItems:"center",display:"flex"}),buttonText:(0,j.css)({[e.breakpoints.down("md")]:{display:"none"}}),separator:(0,j.css)({[e.breakpoints.down("sm")]:{display:"none"}})});function ht(){const e=(0,r.TH)(),t=(0,S.wW)(pt),n=I.u.getUrlForPartial(e,{forceLogin:"true"});return(0,v.jsx)("a",{className:t.link,href:n,target:"_self",children:"Sign in"})}const pt=()=>({link:(0,j.css)({whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var gt=n(21357);function mt(e){var t,n;let{node:s}=e;const a=(0,S.wW)(ft),i=(0,r.TH)(),o=W([(0,N.cloneDeep)(s)],i),l=U(o[0],!1);return l?(0,v.jsx)(lt.v,{header:(0,v.jsxs)("div",{onClick:e=>e.stopPropagation(),className:a.header,children:[(0,v.jsx)("div",{children:null!==(t=(0,ie.Y)(l.id))&&void 0!==t?t:l.text}),l.subTitle&&(0,v.jsx)("div",{className:a.subTitle,children:l.subTitle})]}),children:null===(n=l.children)||void 0===n?void 0:n.map((e=>{var t;const n=null!==(t=(0,ie.Y)(e.id))&&void 0!==t?t:e.text,s=/^https?:\/\//.test(e.url||"");return e.url?(0,v.jsx)(gt.s,{url:e.url,label:n,icon:s?"external-link-alt":void 0,target:e.target},e.id):(0,v.jsx)(gt.s,{icon:e.icon,onClick:e.onClick,label:n},e.id)}))}):null}const ft=e=>({header:(0,j.css)({fontSize:e.typography.h5.fontSize,fontWeight:e.typography.h5.fontWeight,padding:e.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,j.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize})});function vt(e){let{children:t,align:n="left"}=e;const s=(0,S.wW)(bt),i=(0,S.l4)().breakpoints.values.sm,[r,o]=(0,a.useState)(window.matchMedia(`(max-width: ${i}px)`).matches);return(0,Je.e)({breakpoint:i,onChange:e=>{o(e.matches)}}),r?(0,v.jsx)(v.Fragment,{children:t}):(0,v.jsx)("div",{"data-test-id":"wrapper",className:(0,j.cx)(s.wrapper,{[s[n]]:"right"===n}),children:t})}const bt=e=>({wrapper:(0,j.css)({display:"flex",gap:e.spacing(.5),alignItems:"center"}),right:(0,j.css)({justifyContent:"flex-end"}),left:(0,j.css)({}),center:(0,j.css)({})});var xt,yt,wt,jt,St,Ct,kt=n(39106),Nt=n(36769);function Ot(){var e;const t=(0,S.l4)(),n=(0,Nt.hD)(),s=n.useState(),i=t.breakpoints.values.sm,[r,l]=(0,a.useState)(window.matchMedia(`(max-width: ${i}px)`).matches);(0,Je.e)({breakpoint:i,onChange:e=>{l(e.matches)}});const d=()=>{o.E1.partial({search:"open"})};return r?(0,v.jsx)(Ne.h,{iconOnly:!0,icon:"search","aria-label":"Search Grafana",onClick:d}):(0,v.jsx)(kt.H,{onClick:d,placeholder:(0,T.t)("nav.search.placeholder","Search Grafana"),value:null!==(e=s.query)&&void 0!==e?e:"",onChange:e=>{n.onQueryChange(e),e&&d()}})}function It(){var e,t;const n=(0,S.wW)(Tt),s=(0,k.v9)((e=>e.navIndex)),a=s.help,i=s.profile;return(0,v.jsxs)("div",{className:n.layout,children:[(0,v.jsxs)(vt,{children:[(0,v.jsx)("a",{className:n.logo,href:"/",title:"Go to home",children:xt||(xt=(0,v.jsx)(te.J,{name:"grafana",size:"xl"}))}),yt||(yt=(0,v.jsx)(rt,{}))]}),wt||(wt=(0,v.jsx)(vt,{children:(0,v.jsx)(Ot,{})})),(0,v.jsxs)(vt,{align:"right",children:[jt||(jt=(0,v.jsx)(ct,{})),a&&(0,v.jsx)(Ee.L,{overlay:()=>e||(e=(0,v.jsx)(mt,{node:a})),placement:"bottom-end",children:St||(St=(0,v.jsx)(Ne.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"}))}),(0,v.jsx)(Ke,{className:n.newsButton}),!Ve.Vt.user.isSignedIn&&(Ct||(Ct=(0,v.jsx)(ht,{}))),i&&(0,v.jsx)(Ee.L,{overlay:()=>t||(t=(0,v.jsx)(mt,{node:i})),placement:"bottom-end",children:(0,v.jsx)(Ne.h,{className:n.profileButton,imgSrc:Ve.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"})})]})]})}const Tt=e=>({layout:(0,j.css)({height:se,display:"flex",gap:e.spacing(1),alignItems:"center",padding:e.spacing(0,2),borderBottom:`1px solid ${e.colors.border.weak}`,justifyContent:"space-between",[e.breakpoints.up("sm")]:{gridTemplateColumns:"1fr 1fr 1fr",display:"grid",justifyContent:"flex-start"}}),logo:(0,j.css)({display:"flex"}),profileButton:(0,j.css)({img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,j.css)({[e.breakpoints.down("sm")]:{display:"none"}})});var $t;function Rt(e){let{children:t}=e;const n=(0,S.wW)(Pt),{chrome:s}=(0,C.p)(),a=s.useState();if(!l.v.featureToggles.topnav||l.v.isPublicDashboardView)return(0,v.jsx)("main",{className:"main-view",children:t});const i=a.searchBarHidden||a.kioskMode===k.UX.TV,r=(0,j.cx)({[n.content]:!0,[n.contentNoSearchBar]:i,[n.contentChromeless]:a.chromeless});return(0,v.jsxs)("main",{className:"main-view",children:[!a.chromeless&&(0,v.jsxs)("div",{className:(0,j.cx)(n.topNav),children:[!i&&($t||($t=(0,v.jsx)(It,{}))),(0,v.jsx)(Me,{searchBarHidden:i,sectionNav:a.sectionNav,pageNav:a.pageNav,actions:a.actions,onToggleSearchBar:s.onToggleSearchBar,onToggleMegaMenu:s.onToggleMegaMenu,onToggleKioskMode:s.onToggleKioskMode})]}),(0,v.jsx)("div",{className:r,children:t}),!a.chromeless&&(0,v.jsx)(Se,{searchBarHidden:i,onClose:()=>s.setMegaMenu(!1)})]})}const Pt=e=>{const t=e.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,j.css)({display:"flex",flexDirection:"column",paddingTop:80,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,j.css)({paddingTop:se}),contentChromeless:(0,j.css)({paddingTop:0}),topNav:(0,j.css)({display:"flex",position:"fixed",zIndex:e.zIndex.navbarFixed,left:0,right:0,boxShadow:t,background:e.colors.background.primary,flexDirection:"column"})}};var Dt=n(94025),At=n(54761),Mt=n(93686),Lt=n(11035),Ft=n(47900),Et=n(31423),Vt=n(2843);function zt(e){let{appNotification:t,onClearNotification:n}=e;const s=(0,S.wW)(Bt);(0,Et.Z)((()=>{setTimeout((()=>{n(t.id)}),k.Bi[t.severity])}));const a=l.v.featureToggles.tracing&&t.traceId;return(0,v.jsx)(Vt.b,{severity:t.severity,title:t.title,onRemove:()=>n(t.id),elevated:!0,children:(0,v.jsxs)("div",{className:s.wrapper,children:[(0,v.jsx)("span",{children:t.component||t.text}),a&&(0,v.jsxs)("span",{className:s.trace,children:["Trace ID: ",t.traceId]})]})})}function Bt(e){return{wrapper:(0,j.css)({display:"flex",flexDirection:"column"}),trace:(0,j.css)({fontSize:e.typography.pxToRem(10)})}}const _t={notifyApp:Mt.$l,hideAppNotification:Mt.ad},Wt=(0,i.connect)(((e,t)=>({appNotifications:(0,Lt.vo)(e.appNotifications)})),_t);class Ut extends a.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{this.props.hideAppNotification(e)},(t="onClearAppNotification")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}componentDidMount(){const{notifyApp:e}=this.props;D.Z.on(Dt.SI.alertWarning,(t=>e((0,Ft.ZR)(...t)))),D.Z.on(Dt.SI.alertSuccess,(t=>e((0,Ft.AT)(...t)))),D.Z.on(Dt.SI.alertError,(t=>e((0,Ft.t_)(...t))))}render(){const{appNotifications:e}=this.props;return(0,v.jsx)("div",{className:"page-alert-list",children:(0,v.jsx)(At.wc,{children:e.map(((e,t)=>(0,v.jsx)(zt,{appNotification:e,onClearNotification:e=>this.onClearAppNotification(e)},`${e.id}-${t}`)))})})}}const Ht=Wt(Ut);var qt=n(13776),Zt=n(96244),Gt=n(9815),Qt=n(42066),Kt=n(92183),Jt=n(35853);const Yt=(0,a.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Xt(){return(0,a.useContext)(Yt)}const en=(0,a.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function tn(){return(0,a.useContext)(en)}function nn(e){let{item:t,state:n,onNavigate:s}=e;const{onClose:i,onLeft:r}=Xt(),{setMenuIdOpen:o}=tn(),{key:l,rendered:d}=t,c=(0,a.useRef)(null),u=n.disabledKeys.has(l),[h,p]=(0,a.useState)(!1),{focusProps:g}=(0,Jt.KK)({onFocusChange:p,isDisabled:u}),m=function(e,t,n){let s="transparent";t?s=e.colors.action.hover:n&&(s=e.colors.background.secondary);return{menuItem:j.css`
      background-color: ${s};
      color: ${e.colors.text.primary};

      &:focus-visible {
        background-color: ${e.colors.action.hover};
        box-shadow: none;
        color: ${e.colors.text.primary};
        outline: 2px solid ${e.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}((0,S.l4)(),h,"section"===t.value.menuItemType);let{menuItemProps:f}=(0,Gt.iX)({isDisabled:u,"aria-label":t["aria-label"],key:l,closeOnSelect:!0,onClose:i,onAction:()=>{o(void 0),s(t.value),i()}},n,c);const{keyboardProps:b}=(0,Jt.v5)({onKeyDown:e=>{"ArrowLeft"===e.key&&r(),e.continuePropagation()}});return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("li",Object.assign({},(0,Qt.dG)(f,g,b),{ref:c,className:m.menuItem,children:d}))})}const sn=["reverseMenuDirection","adjustHeightForBorder","disabledKeys","onNavigate"];function an(e){const{reverseMenuDirection:t,disabledKeys:n,onNavigate:s}=e,i=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,sn),r=Xt(),o=Object.assign({},(0,Qt.dG)(r,i)),{menuHasFocus:l,menuProps:d={}}=r,c=function(e,t){return{menu:j.css`
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${e.transitions.create("opacity")};
      z-index: ${e.zIndex.sidemenu};
    `,subtitle:j.css`
      background-color: transparent;
      border-${t?"bottom":"top"}: 1px solid ${e.colors.border.weak};
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      padding: ${e.spacing(1)} ${e.spacing(2)} ${e.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:j.css`
      font-style: italic;
      padding: ${e.spacing(.5,2)};
    `}}((0,S.l4)(),t),u=(0,Kt.D)(Object.assign({},i,{disabledKeys:n})),h=(0,a.useRef)(null),{menuProps:p}=(0,Gt.H9)(o,Object.assign({},u),h),g=[...u.collection],m=g.filter((e=>e.value.menuItemType===O.VO.Item)),f=g.find((e=>e.value.menuItemType===O.VO.Section));if((0,a.useEffect)((()=>{var e;l&&!u.selectionManager.isFocused?(u.selectionManager.setFocusedKey(null!==(e=null==f?void 0:f.key)&&void 0!==e?e:""),u.selectionManager.setFocused(!0)):l||(u.selectionManager.setFocused(!1),u.selectionManager.setFocusedKey(""),u.selectionManager.clearSelection())}),[l,u.selectionManager,t,null==f?void 0:f.key]),!f)return null;const b=f.value.subTitle,x=(0,v.jsx)(nn,{item:f,state:u,onNavigate:s},f.key),y=m.map((e=>(0,v.jsx)(nn,{item:e,state:u,onNavigate:s},K(e.value))));if(0===y.length&&f.value.emptyMessageId){const e=(0,ie.Y)(f.value.emptyMessageId);y.push((0,v.jsx)("div",{className:c.emptyMessage,children:e},"empty-message"))}const w=[y,b&&(0,v.jsx)("li",{className:c.subtitle,children:b},b)],C=[x,(0,v.jsx)(F.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,children:t?w.reverse():w},"scrollContainer")];return(0,v.jsx)("ul",Object.assign({className:c.menu,ref:h},(0,Qt.dG)(p,d),{tabIndex:-1,children:t?C.reverse():C}))}var rn=n(35210),on=n(91053);const ln="navbar-menu-portal-container",dn=()=>{const e=(0,S.l4)(),t=cn(e);return(0,v.jsx)("div",{className:t.menuPortalContainer,id:ln})};dn.displayName="NavBarMenuPortalContainer";const cn=e=>({menuPortalContainer:(0,j.css)({left:0,position:"fixed",right:0,top:0,zIndex:e.zIndex.sidemenu})}),un=["item","isActive","label","children","reverseMenuDirection"];function hn(e){const{item:t,isActive:n,label:s,children:i,reverseMenuDirection:r}=e,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,un),[l,c]=(0,a.useState)(!1),{menuIdOpen:u,setMenuIdOpen:h}=tn(),p=(0,S.l4)(),g=pn(p,n),m=(0,on.W)(Object.assign({},o)),f=a.useRef(null),{menuTriggerProps:b,menuProps:x}=(0,Gt.u4)({},m,f);(0,a.useEffect)((()=>{t.highlightId&&(0,d.SZ)(`feature-highlights-${t.highlightId}-nav`,"test","")}),[t.highlightId]);const{hoverProps:y}=(0,Jt.XI)({onHoverChange:e=>{e?(m.open(),h(t.id)):(m.close(),h(void 0))}});(0,a.useEffect)((()=>{u!==t.id?(m.close(),c(!1)):m.open()}),[u,m,t.id]);const{keyboardProps:w}=(0,Jt.v5)({onKeyDown:e=>{switch(e.key){case"ArrowRight":m.isOpen||(m.open(),h(t.id)),c(!0);break;case"Tab":h(void 0)}}}),{buttonProps:C}=(0,rn.U)(b,f),k=t.highlightText?ue:a.Fragment,N=(0,v.jsx)(k,{children:(0,v.jsx)("span",{className:g.icon,children:(0,v.jsx)(ce,{link:t})})});let O=(0,v.jsx)("button",Object.assign({className:g.element},C,w,y,{ref:f,onClick:null==t?void 0:t.onClick,"aria-label":s,children:N}));null!=t&&t.url&&(O=!t.target&&t.url.startsWith("/")?(0,v.jsx)(re.r,Object.assign({},C,w,y,{ref:f,href:t.url,target:t.target,onClick:null==t?void 0:t.onClick,className:g.element,"aria-label":s,children:N})):(0,v.jsx)("a",Object.assign({href:t.url,target:t.target,onClick:null==t?void 0:t.onClick},C,w,y,{ref:f,className:g.element,"aria-label":s,children:N})));const I=a.useRef(null),{dialogProps:T}=(0,J.R)({},I),{overlayProps:$}=(0,X.Ir)({onClose:()=>{m.close(),h(void 0)},isOpen:m.isOpen,isDismissable:!0},I);let{overlayProps:R}=(0,X.tN)({targetRef:f,overlayRef:I,placement:r?"right bottom":"right top",isOpen:m.isOpen});const{focusWithinProps:P}=(0,Jt.L_)({onFocusWithin:e=>{var n,s,a;e.target.id===(null===(n=f.current)||void 0===n?void 0:n.id)&&(h(t.id),m.open()),null===(s=(a=e.target).scrollIntoView)||void 0===s||s.call(a,{block:"nearest"})},onBlurWithin:e=>{var t,n;"menuitem"!==(null===(t=e.target)||void 0===t?void 0:t.getAttribute("role"))||null!==(n=I.current)&&void 0!==n&&n.contains(e.relatedTarget)||h(void 0)}});return(0,v.jsxs)("div",Object.assign({className:(0,j.cx)(g.element,"dropdown")},P,{children:[O,m.isOpen&&(0,v.jsx)(X.Xj,{portalContainer:null!==(D=document.getElementById(ln))&&void 0!==D?D:document.body,children:(0,v.jsx)(Yt.Provider,{value:{menuProps:x,menuHasFocus:l,onClose:()=>m.close(),onLeft:()=>{var e;c(!1),null===(e=f.current)||void 0===e||e.focus()}},children:(0,v.jsx)(Y.MT,{restoreFocus:!0,children:(0,v.jsxs)("div",Object.assign({},$,R,T,y,{ref:I,children:[(0,v.jsx)(X.U4,{onDismiss:()=>m.close()}),i,(0,v.jsx)(X.U4,{onDismiss:()=>m.close()})]}))})})})]}));var D}const pn=(e,t)=>({element:(0,j.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:e.spacing(6),width:e.spacing(7),"&::before":{display:t?"block":"none",content:'" "',position:"absolute",left:e.spacing(1),top:e.spacing(1.5),bottom:e.spacing(1.5),width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:e.colors.action.hover,boxShadow:"none",color:e.colors.text.primary,outline:`${e.shape.borderRadius(1)} solid ${e.colors.primary.main}`,outlineOffset:`-${e.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,j.css)({height:"100%",width:"100%"})});function gn(e){var t,n,s;let{label:a,children:i,url:r,target:o,isActive:l=!1,onClick:d,highlightText:c,className:u,elClassName:h}=e;const p=mn((0,S.l4)(),l),g=c?(0,v.jsx)(ue,{children:(0,v.jsx)("div",{className:p.icon,children:i})}):(0,v.jsx)("div",{className:p.icon,children:i}),m=(0,j.cx)(p.element,h);return(0,v.jsx)("div",{className:(0,j.cx)(p.container,u),children:r?!o&&r.startsWith("/")?n||(n=(0,v.jsx)(re.r,{className:m,href:r,target:o,"aria-label":a,onClick:d,"aria-haspopup":"true",children:g})):s||(s=(0,v.jsx)("a",{href:r,target:o,className:m,onClick:d,"aria-label":a,children:g})):t||(t=(0,v.jsx)("button",{className:m,onClick:d,"aria-label":a,children:g}))})}function mn(e,t){return{container:(0,j.css)({position:"relative",color:t?e.colors.text.primary:e.colors.text.secondary,display:"grid","&:hover":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary}}),element:(0,j.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:t?"block":"none",content:"' '",position:"absolute",left:e.spacing(1),top:e.spacing(1.5),bottom:e.spacing(1.5),width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:e.colors.action.hover,boxShadow:"none",color:e.colors.text.primary,outline:`${e.shape.borderRadius(1)} solid ${e.colors.primary.main}`,outlineOffset:`-${e.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,j.css)({height:"100%",width:"100%"})}}function fn(e){let{icon:t,isActive:n,isDivider:s,onClick:a,styleOverrides:i,target:r,text:o,url:l,isMobile:d=!1}=e;const c=(0,S.l4)(),u=vn(c,n),h=(0,j.cx)(u.element,i),p=(0,v.jsxs)("div",{className:u.linkContent,children:[t&&(0,v.jsx)(te.J,{"data-testid":"dropdown-child-icon",name:t}),(0,v.jsx)("div",{className:u.linkText,children:o}),"_blank"===r&&(0,v.jsx)(te.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:u.externalLinkIcon})]});let g=(0,v.jsx)("button",{className:h,onClick:a,tabIndex:-1,children:p});return l&&(g=!r&&l.startsWith("/")?(0,v.jsx)(re.r,{className:h,href:l,target:r,onClick:a,tabIndex:d?0:-1,children:p}):(0,v.jsx)("a",{href:l,target:r,className:h,onClick:a,tabIndex:d?0:-1,children:p})),d?s?(0,v.jsx)("div",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,v.jsx)("li",{className:u.listItem,children:g}):s?(0,v.jsx)("div",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,v.jsx)("div",{style:{position:"relative"},children:g})}fn.displayName="NavBarMenuItem";const vn=(e,t)=>({linkContent:(0,j.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,j.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,j.css)({color:e.colors.text.secondary,gridColumnStart:3}),element:(0,j.css)({alignItems:"center",background:"none",border:"none",color:t?e.colors.text.primary:e.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:e.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:t?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}}),listItem:(0,j.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:e.colors.text.primary,"> *:first-child::after":{backgroundColor:e.colors.action.hover}}}),divider:(0,j.css)({borderBottom:`1px solid ${e.colors.border.weak}`,height:"1px",margin:`${e.spacing(1)} 0`,overflow:"hidden"})}),bn=e=>{var t,n;let{isActive:s=!1,className:a,reverseMenuDirection:i=!1,link:r}=e;const l=(0,S.l4)(),d=null!==(t=r.children)&&void 0!==t?t:[],{menuIdOpen:c}=tn(),u=(i?[...d].reverse():d).filter((e=>!e.hideFromMenu)).map((e=>Object.assign({},e,{menuItemType:O.VO.Item}))),h=0===u.length,p=xn(l,h,s),g=Object.assign({},r,{children:u,menuItemType:O.VO.Section}),m=[g].concat(u),f=null!==(n=(0,ie.Y)(r.id))&&void 0!==n?n:r.text;return(0,v.jsx)("li",{className:(0,j.cx)(p.container,{[p.containerHover]:g.id===c},a),children:(0,v.jsx)(hn,{item:g,isActive:s,label:f,reverseMenuDirection:i,children:(0,v.jsx)(an,{items:m,reverseMenuDirection:i,adjustHeightForBorder:h,disabledKeys:["divider","subtitle"],"aria-label":g.text,onNavigate:e=>{const{url:t,target:n,onClick:s}=e;null==s||s(),t&&(!n&&t.startsWith("/")?o.E1.push(I.u.stripBaseFromUrl(t)):window.open(t,n))},children:e=>{var t;const n=null!==(t=(0,ie.Y)(e.id))&&void 0!==t?t:e.text,s=e.menuItemType===O.VO.Section,a=e.icon?(0,ae.iJ)(e.icon):void 0,i=e.showIconInNavbar&&!s?a:void 0;return(0,v.jsx)(Zt.ck,{textValue:e.text,children:(0,v.jsx)(fn,{isDivider:!s&&e.divider,icon:i,target:e.target,text:n,url:e.url,onClick:e.onClick,styleOverrides:(0,j.cx)(p.primaryText,{[p.header]:s})})},K(e))}})})})},xn=(e,t,n)=>Object.assign({},mn(e,n),{containerHover:(0,j.css)({backgroundColor:e.colors.action.hover,color:e.colors.text.primary}),primaryText:(0,j.css)({color:e.colors.text.primary}),header:(0,j.css)({height:`calc(${e.spacing(6)} - ${t?2:1}px)`,fontSize:e.typography.h4.fontSize,fontWeight:e.typography.h4.fontWeight,padding:`${e.spacing(1)} ${e.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var yn=n(53257),wn=n(75342),jn=n(9085),Sn=n.n(jn);const Cn=e=>{let{className:t,isExpanded:n,onClick:s}=e;const a=(0,S.l4)(),i=kn(a);return(0,v.jsx)(ne.h,{"aria-label":n?"Close navigation menu":"Open navigation menu",name:n?"angle-left":"angle-right",className:Sn()(t,i.icon),size:"xl",onClick:s})};Cn.displayName="NavBarToggle";const kn=e=>({icon:(0,j.css)({backgroundColor:e.colors.background.secondary,border:`1px solid ${e.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:e.zIndex.sidemenu+1,[e.breakpoints.down("md")]:{display:"none"}})});var Nn;const On="350px";function In(e){let{activeItem:t,isOpen:n,navItems:s,onClose:i,setMenuAnimationInProgress:r}=e;const o=(0,S.l4)(),l=Tn(o),c=o.transitions.duration.standard,u=$n(o,c),h=(0,a.useRef)(null),p=(0,a.useRef)(null),{dialogProps:g}=(0,J.R)({},h),{overlayProps:m,underlayProps:f}=(0,X.Ir)({isDismissable:!0,isOpen:n,onClose:i},h);return(0,v.jsxs)(X.Xj,{children:[(0,v.jsx)(Y.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,v.jsx)(ee.Z,{nodeRef:h,onEnter:()=>r(!0),onExited:()=>r(!1),appear:n,in:n,classNames:u.overlay,timeout:c,children:(0,v.jsxs)("div",Object.assign({"data-testid":"navbarmenu",ref:h},m,g,{className:l.container,children:[(0,v.jsxs)("div",{className:l.mobileHeader,children:[Nn||(Nn=(0,v.jsx)(te.J,{name:"bars",size:"xl"})),(0,v.jsx)(ne.h,{"aria-label":"Close navigation menu",name:"times",onClick:i,size:"xl",variant:"secondary"})]}),(0,v.jsx)(Cn,{className:l.menuCollapseIcon,isExpanded:n,onClick:()=>{(0,d.ff)("grafana_navigation_collapsed"),i()}}),(0,v.jsx)("nav",{className:l.content,children:(0,v.jsx)(F.$,{hideHorizontalTrack:!0,children:(0,v.jsx)("ul",{className:l.itemList,children:s.map((e=>(0,v.jsx)(Rn,{link:e,onClose:i,activeItem:t},e.text)))})})})]}))})}),(0,v.jsx)(ee.Z,{nodeRef:p,appear:n,in:n,classNames:u.backdrop,timeout:c,children:(0,v.jsx)("div",Object.assign({className:l.backdrop},f,{ref:p}))})]})}In.displayName="NavBarMenu";const Tn=e=>({backdrop:(0,j.css)({backdropFilter:"blur(1px)",backgroundColor:e.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:e.zIndex.modalBackdrop}),container:(0,j.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:e.spacing(1),marginRight:e.spacing(1.5),right:0,zIndex:e.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[e.breakpoints.up("md")]:{borderRight:`1px solid ${e.colors.border.weak}`,right:"unset"}}),content:(0,j.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,j.css)({borderBottom:`1px solid ${e.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:e.spacing(1,2,2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,j.css)({display:"grid",gridAutoRows:`minmax(${e.spacing(6)}, auto)`,minWidth:On}),menuCollapseIcon:(0,j.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),$n=(e,t)=>{const n={transitionDuration:`${t}ms`,transitionTimingFunction:e.transitions.easing.easeInOut,[e.breakpoints.down("md")]:{overflow:"hidden"}},s=Object.assign({},n,{transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}}),a=Object.assign({},n,{transitionProperty:"opacity"}),i={backgroundColor:e.colors.background.canvas,boxShadow:e.shadows.z3,width:"100%",[e.breakpoints.up("md")]:{width:On}},r={boxShadow:"none",width:0,[e.breakpoints.up("md")]:{backgroundColor:e.colors.background.primary,width:e.spacing(7)}},o={opacity:1},l={opacity:0};return{backdrop:{appear:(0,j.css)(l),appearActive:(0,j.css)(a,o),appearDone:(0,j.css)(o),exit:(0,j.css)(o),exitActive:(0,j.css)(a,l)},overlay:{appear:(0,j.css)(r),appearActive:(0,j.css)(s,i),appearDone:(0,j.css)(i),exit:(0,j.css)(i),exitActive:(0,j.css)(s,r)}}};function Rn(e){let{link:t,activeItem:n,onClose:s}=e;const i=(0,S.wW)(Pn);if(function(e){return Boolean(e.children&&e.children.length>0)}(t))return(0,v.jsx)(Dn,{onClose:s,link:t,isActive:H(t,n),children:(0,v.jsx)("ul",{className:i.children,children:t.children.map((e=>{var a;const r=e.icon?(0,ae.iJ)(e.icon):void 0;return!e.divider&&(0,v.jsx)(fn,{isActive:n===e,isDivider:e.divider,icon:e.showIconInNavbar?r:void 0,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),s()},styleOverrides:i.item,target:e.target,text:null!==(a=(0,ie.Y)(e.id))&&void 0!==a?a:e.text,url:e.url,isMobile:!0},`${t.text}-${e.text}`)}))})});if(t.emptyMessageId){const e=(0,ie.Y)(t.emptyMessageId);return(0,v.jsx)(Dn,{onClose:s,link:t,isActive:H(t,n),children:(0,v.jsx)("ul",{className:i.children,children:(0,v.jsx)("div",{className:i.emptyMessage,children:e})})})}{var r;const e=t.highlightText?ue:a.Fragment;return(0,v.jsx)("li",{className:i.flex,children:(0,v.jsx)(gn,{className:i.itemWithoutMenu,elClassName:i.fullWidth,label:t.text,url:t.url,target:t.target,onClick:()=>{var e;null===(e=t.onClick)||void 0===e||e.call(t),s()},isActive:t===n,children:(0,v.jsxs)("div",{className:i.itemWithoutMenuContent,children:[(0,v.jsx)("div",{className:i.iconContainer,children:(0,v.jsx)(e,{children:(0,v.jsx)(ce,{link:t})})}),(0,v.jsx)("span",{className:i.linkText,children:null!==(r=(0,ie.Y)(t.id))&&void 0!==r?r:t.text})]})})})}}const Pn=e=>({children:(0,j.css)({display:"flex",flexDirection:"column"}),item:(0,j.css)({padding:`${e.spacing(1)} ${e.spacing(1.5)}`,width:`calc(100% - ${e.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,j.css)({display:"flex"}),itemWithoutMenu:(0,j.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,j.css)({height:"100%",width:"100%"}),iconContainer:(0,j.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,j.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,j.css)({fontSize:e.typography.pxToRem(14),justifySelf:"start",padding:e.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,j.css)({color:e.colors.text.secondary,fontStyle:"italic",padding:e.spacing(1,1.5)})});function Dn(e){var t;let{link:n,isActive:s,children:i,className:r,onClose:o}=e;const l=(0,S.wW)(An),[d,c]=(0,yn.Z)(`grafana.navigation.expanded[${n.text}]`,!1),u=n.highlightText?ue:a.Fragment;return(0,v.jsxs)("li",{className:(0,j.cx)(l.menuItem,r),children:[(0,v.jsx)(gn,{isActive:s,label:n.text,url:n.url,target:n.target,onClick:()=>{var e;null===(e=n.onClick)||void 0===e||e.call(n),o()},className:l.collapsibleMenuItem,elClassName:l.collapsibleIcon,children:(0,v.jsx)(u,{children:(0,v.jsx)(ce,{link:n})})}),(0,v.jsx)("div",{className:l.collapsibleSectionWrapper,children:(0,v.jsx)(wn.s,{isOpen:Boolean(d),onToggle:e=>c(e),className:l.collapseWrapper,contentClassName:l.collapseContent,label:(0,v.jsx)("div",{className:(0,j.cx)(l.labelWrapper,{[l.primary]:s}),children:(0,v.jsx)("span",{className:l.linkText,children:null!==(t=(0,ie.Y)(n.id))&&void 0!==t?t:n.text})}),children:i})})]})}const An=e=>({menuItem:(0,j.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} minmax(calc(350px - ${e.spacing(7)}), auto)`}),collapsibleMenuItem:(0,j.css)({height:e.spacing(6),width:e.spacing(7),display:"grid"}),collapsibleIcon:(0,j.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,j.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,j.css)({paddingLeft:e.spacing(.5),paddingRight:e.spacing(4.25),minHeight:e.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:e.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,j.css)({padding:0}),labelWrapper:(0,j.css)({fontSize:"15px"}),primary:(0,j.css)({color:e.colors.text.primary}),linkText:(0,j.css)({fontSize:e.typography.pxToRem(14),justifySelf:"start"})});var Mn,Ln;const Fn=()=>{o.E1.partial({search:"open"})},En=a.memo((()=>{const e=(0,k.v9)((e=>e.navBarTree)),t=(0,S.l4)(),n=Vn(t),s=(0,r.TH)(),[i,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(void 0),m=U({id:"search",onClick:Fn,text:"Search dashboards",icon:"search"},i),f=U({id:"home",text:"Home",url:l.v.bootData.user.isSignedIn?l.v.appSubUrl||"/":"/login",icon:"grafana"},i),b=(0,N.cloneDeep)(e).filter((e=>!0!==e.hideFromMenu)),x=b.filter((e=>e.section===O.yV.Core)).map((e=>U(e,i))),y=b.filter((e=>e.section===O.yV.Plugin)).map((e=>U(e,i))),w=W(b.filter((e=>e.section===O.yV.Config)),s).map((e=>U(e,i))),C=(e=>"open"===new URLSearchParams(e.search).get("search"))(s)?m:Q(b,s.pathname);return function(e){const t=(0,o.Ox)(e.search);if((0,qt.U)(t))return!0;if(0===e.pathname.indexOf("/d/")&&t.editview||t.editPanel)return!0;return!1}(s)?null:(0,v.jsxs)("div",{className:n.navWrapper,children:[(0,v.jsx)("nav",{className:(0,j.cx)(n.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu",children:(0,v.jsx)(en.Provider,{value:{menuIdOpen:p,setMenuIdOpen:g},children:(0,v.jsxs)(Y.MT,{children:[(0,v.jsx)("div",{className:n.mobileSidemenuLogo,onClick:()=>c(!i),children:Mn||(Mn=(0,v.jsx)(te.J,{name:"bars",size:"xl"}))},"hamburger"),(0,v.jsx)(Cn,{className:n.menuExpandIcon,isExpanded:i,onClick:()=>{(0,d.ff)("grafana_navigation_expanded"),c(!0)}}),Ln||(Ln=(0,v.jsx)(dn,{})),(0,v.jsx)(gn,{elClassName:n.grafanaLogoInner,label:f.text,className:n.grafanaLogo,url:f.url,onClick:f.onClick,children:(0,v.jsx)(ce,{link:f})}),(0,v.jsx)(F.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,children:(0,v.jsxs)("ul",{className:n.itemList,children:[(0,v.jsx)(bn,{className:n.search,isActive:C===m,link:m}),x.map(((e,t)=>(0,v.jsx)(bn,{isActive:H(e,C),link:Object.assign({},e,{subTitle:void 0})},`${e.id}-${t}`))),y.length>0&&y.map(((e,t)=>(0,v.jsx)(bn,{isActive:H(e,C),link:e},`${e.id}-${t}`))),w.map(((e,t)=>(0,v.jsx)(bn,{isActive:H(e,C),reverseMenuDirection:!0,link:e,className:(0,j.cx)({[n.verticalSpacer]:0===t})},`${e.id}-${t}`)))]})})]})})}),(i||u)&&(0,v.jsx)("div",{className:n.menuWrapper,children:(0,v.jsx)(In,{activeItem:C,isOpen:i,setMenuAnimationInProgress:h,navItems:[f,m,...x,...y,...w],onClose:()=>c(!1)})})]})}));En.displayName="NavBar";const Vn=e=>({navWrapper:(0,j.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,j.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:e.colors.background.primary,zIndex:e.zIndex.sidemenu,padding:`${e.spacing(1)} 0`,position:"relative",width:e.components.sidemenu.width,borderRight:`1px solid ${e.colors.border.weak}`,[e.breakpoints.down("md")]:{height:e.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,j.css)({alignItems:"center",cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:e.spacing(2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,j.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[e.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,j.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:e.spacing(6),justifyContent:"stretch",[e.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,j.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,j.css)({display:"none",marginTop:0,[e.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,j.css)({marginTop:"auto"}),hideFromMobile:(0,j.css)({[e.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,j.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:e.zIndex.sidemenu}),menuExpandIcon:(0,j.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,j.css)({zIndex:e.zIndex.sidemenu})});var zn,Bn,_n,Wn,Un=n(13426),Hn=n.n(Un),qn=n(66976),Zn=n(50191),Gn=n(37417);function Qn(e){let{error:t,errorInfo:n}=e;const s=(0,r.TH)(),i="ChunkLoadError"===(null==t?void 0:t.name);return(0,a.useEffect)((()=>{i&&-1===s.search.indexOf("chunkNotFound")&&(window.location.href=I.u.getUrlForPartial(s,{chunkNotFound:!0}))}),[s,i]),(0,v.jsx)(Gn.T,{navId:"error",layout:O.Qz.Canvas,children:(0,v.jsxs)("div",{className:Kn(),children:[i&&(0,v.jsxs)("div",{children:[zn||(zn=(0,v.jsx)("h2",{children:"Unable to find application file"})),Bn||(Bn=(0,v.jsx)("br",{})),_n||(_n=(0,v.jsx)("h2",{className:"page-heading",children:"Grafana has likely been updated. Please try reloading the page."})),Wn||(Wn=(0,v.jsx)("br",{})),(0,v.jsx)("div",{className:"gf-form-group",children:(0,v.jsx)(E.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:"Reload"})}),(0,v.jsx)(qn.X,{title:"Error details",error:t,errorInfo:n})]}),!i&&(0,v.jsx)(qn.X,{title:"An unexpected error happened",error:t,errorInfo:n})]})})}const Kn=(0,Zn.B)((()=>j.css`
    width: 500px;
    margin: 64px auto;
  `));var Jn;function Yn(){const e=(0,S.wW)(Xn);return(0,v.jsx)("div",{className:e.loadingPage,children:Jn||(Jn=(0,v.jsx)(Ue.u,{text:"Loading..."}))})}const Xn=()=>({loadingPage:(0,j.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});var es;function ts(e){const{chrome:t,keybindings:n}=(0,C.p)();return t.setMatchedRoute(e.route),(0,a.useEffect)((()=>(n.clearAndInitGlobalBindings(),ss(e.route),as(),(0,o.GQ)("GrafanaRoute",!1,"Mounted",e.match),()=>{(0,o.GQ)("GrafanaRoute",!1,"Unmounted",e.route),ss(e.route,!0)})),[]),(0,a.useEffect)((()=>{as(),(0,d.sm)(),(0,o.GQ)("GrafanaRoute",!1,"Updated",e)})),(0,o.GQ)("GrafanaRoute",!1,"Rendered",e.route),(0,v.jsx)(c.SV,{children:t=>{let{error:n,errorInfo:s}=t;return n?(0,v.jsx)(Qn,{error:n,errorInfo:s}):(0,v.jsx)(a.Suspense,{fallback:es||(es=(0,v.jsx)(Yn,{})),children:(0,v.jsx)(e.route.component,Object.assign({},e,{queryParams:(0,o.Ox)(e.location.search)}))})}})}function ns(e){return e.pageClass?e.pageClass.split(" "):[]}function ss(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n of ns(e))t?document.body.classList.remove(n):document.body.classList.add(n)}function as(){var e;document.body.classList.remove("sidemenu-open--xs");const t=document.getElementById("tooltip");null==t||null===(e=t.parentElement)||void 0===e||e.removeChild(t);const n=document.querySelectorAll(".tooltip");for(let e=0;e<n.length;e++){var s;const t=n[e];null===(s=t.parentElement)||void 0===s||s.removeChild(t)}for(const e of Hn().drops)e.destroy()}var is=n(72122);const rs=a.forwardRef(((e,t)=>{var n;let{action:s,active:i,currentRootActionId:r}=e;const o=a.useMemo((()=>{if(!r)return s.ancestors;const e=s.ancestors.findIndex((e=>e.id===r));return s.ancestors.slice(e+1)}),[s.ancestors,r]),l=(0,S.l4)(),d=os(l,i);return(0,v.jsxs)("div",{ref:t,className:d.row,children:[(0,v.jsxs)("div",{className:d.actionContainer,children:[s.icon,(0,v.jsx)("div",{className:d.textContainer,children:(0,v.jsxs)("div",{children:[o.length>0&&o.map((e=>(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)("span",{className:d.breadcrumbAncestor,children:e.name}),(0,v.jsx)("span",{className:d.breadcrumbAncestor,children:"›"})]},e.id))),(0,v.jsx)("span",{children:s.name})]})}),s.subtitle&&(0,v.jsx)("span",{className:d.subtitleText,children:s.subtitle})]}),null!==(n=s.shortcut)&&void 0!==n&&n.length?(0,v.jsx)("div",{"aria-hidden":!0,className:d.shortcutContainer,children:s.shortcut.map((e=>(0,v.jsx)("kbd",{className:d.shortcut,children:e},e)))}):null]})}));rs.displayName="ResultItem";const os=(e,t)=>{const n=t?e.colors.text.maxContrast:e.colors.text.primary,s=t?e.colors.background.primary:"transparent",a=t?e.colors.background.secondary:e.colors.background.primary;return{row:(0,j.css)({color:n,padding:e.spacing(1,2),background:s,display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer","&:before":{display:t?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}}),actionContainer:(0,j.css)({display:"flex",gap:e.spacing(2),alignitems:"center",fontsize:e.typography.fontSize}),textContainer:(0,j.css)({display:"flex",flexDirection:"column"}),shortcut:(0,j.css)({padding:e.spacing(0,1),background:a,borderRadius:e.shape.borderRadius(),fontsize:e.typography.fontSize}),breadcrumbAncestor:(0,j.css)({opacity:.5,marginRight:e.spacing(1)}),subtitleText:(0,j.css)({fontSize:e.typography.fontSize-2}),shortcutContainer:(0,j.css)({display:"grid",gridAutoFlow:"column",gap:e.spacing(1)})}};var ls=n(20425);const ds=async e=>{const t=await async function(e){return(await(0,ls.O)().search({kind:["dashboard"],query:"*",limit:500})).view.map((t=>{const{url:n,name:s}=t;return{parent:e,id:`go/dashboard/${n}`,name:`${s}`,perform:()=>{o.E1.push(I.u.stripBaseFromUrl(n))}}}))}(e);return t};var cs=n(63092);const us=[{url:"/alerting/list",actions:[{id:"go/alerting",name:"Go to alerting",keywords:"alerting navigate",perform:()=>o.E1.push("/alerting"),section:"Navigation",priority:s.Priority.NORMAL}]},{url:"/alerting/list",actions:[{id:"go/alerting/rules",name:"Go to alert rules",keywords:"alerting navigate rules",perform:()=>o.E1.push("/alerting/list"),section:"Navigation",parent:"go/alerting"}]},{url:"/alerting/notifications",actions:[{id:"go/alerting/contact-points",name:"Go to contact points",keywords:"alerting navigate contact-points",perform:()=>o.E1.push("/alerting/notifications"),parent:"go/alerting"}]},{url:"/alerting/routes",actions:[{id:"go/alerting/notification-policies",name:"Go to notification policies",keywords:"alerting navigate notification-policies",perform:()=>o.E1.push("/alerting/routes"),parent:"go/alerting"}]},{url:"/alerting/silences",actions:[{id:"go/alerting/silences",name:"Go to silences",keywords:"alerting navigate silences",perform:()=>o.E1.push("/alerting/silences"),parent:"go/alerting"}]}];var hs;const ps=()=>{const e=(0,S.wW)(ms),[t,n]=(0,a.useState)([]),[i,r]=(0,a.useState)([]),{query:l,showing:c}=(0,s.useKBar)((e=>({showing:e.visualState===s.VisualState.showing}))),u="/login"!==o.E1.getLocation().pathname,{navBarTree:h}=(0,k.v9)((e=>({navBarTree:e.navBarTree}))),p=(0,a.useRef)(null),{overlayProps:g}=(0,X.Ir)({isOpen:c,onClose:()=>l.setVisualState(s.VisualState.animatingOut)},p),{dialogProps:m}=(0,J.R)({},p);return(0,a.useEffect)((()=>{if(u){const e=(e=>{const t=[{id:"go/search",name:"Go to dashboard search",keywords:"navigate",perform:()=>o.E1.push("?search=open"),section:"Navigation",shortcut:["s","o"]},{id:"go/dashboard",name:"Go to dashboard...",keywords:"navigate",section:"Navigation",priority:s.Priority.NORMAL},{id:"preferences/theme",name:"Change theme...",keywords:"interface color dark light",section:"Preferences",shortcut:["c","t"]},{id:"preferences/dark-theme",name:"Dark",keywords:"dark theme",section:"",perform:()=>(0,cs.L)("dark"),parent:"preferences/theme"},{id:"preferences/light-theme",name:"Light",keywords:"light theme",section:"",perform:()=>(0,cs.L)("light"),parent:"preferences/theme"}],n=[{url:"/dashboard/new",actions:[{id:"management/create-folder",name:"Create folder",keywords:"new add",perform:()=>o.E1.push("/dashboards/folder/new"),section:"Management"},{id:"management/create-dashboard",name:"Create dashboard",keywords:"new add",perform:()=>o.E1.push("/dashboard/new"),section:"Management"}]},{url:"/",actions:[{id:"go/home",name:"Go to home",keywords:"navigate",perform:()=>o.E1.push("/"),section:"Navigation",shortcut:["g","h"],priority:s.Priority.HIGH}]},{url:"/explore",actions:[{id:"go/explore",name:"Go to explore",keywords:"navigate",perform:()=>o.E1.push("/explore"),section:"Navigation",priority:s.Priority.NORMAL}]},...us,{url:"/profile",actions:[{id:"go/profile",name:"Go to profile",keywords:"navigate preferences",perform:()=>o.E1.push("/profile"),section:"Navigation",shortcut:["g","p"],priority:s.Priority.LOW}]},{url:"/datasources",actions:[{id:"go/configuration",name:"Go to data sources configuration",keywords:"navigate settings ds",perform:()=>o.E1.push("/datasources"),section:"Navigation"}]}],a=[],i=(0,N.flatMapDeep)(e,(e=>e.children)).map((e=>null==e?void 0:e.url)).filter((e=>void 0!==e));return n.forEach((e=>{i.find((t=>e.url===t))&&a.push(...e.actions)})),[...t,...a]})(h);r(e),n([...e])}}),[u,h]),(0,a.useEffect)((()=>{c&&((0,d.ff)("command_palette_opened"),ds("go/dashboard").then((e=>{n([...i,...e])})))}),[c,i]),(0,s.useRegisterActions)(t,[t]),t.length>0?(0,v.jsx)(s.KBarPortal,{children:(0,v.jsx)(s.KBarPositioner,{className:e.positioner,children:(0,v.jsx)(s.KBarAnimator,{className:e.animator,children:(0,v.jsx)(Y.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,v.jsxs)("div",Object.assign({},g,m,{children:[(0,v.jsx)(s.KBarSearch,{className:e.search}),hs||(hs=(0,v.jsx)(gs,{}))]}))})})})}):null},gs=()=>{const{results:e,rootActionId:t}=(0,s.useMatches)(),n=(0,S.wW)(ms);return(0,v.jsx)("div",{className:n.resultsContainer,children:(0,v.jsx)(s.KBarResults,{items:e,onRender:e=>{let{item:s,active:a}=e;return"string"==typeof s?(0,v.jsx)("div",{className:n.sectionHeader,children:s}):(0,v.jsx)(rs,{action:s,active:a,currentRootActionId:t})}})})},ms=e=>({positioner:(0,j.css)({zIndex:e.zIndex.portal,marginTop:"0px","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:e.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,j.css)({maxWidth:e.breakpoints.values.sm,width:"100%",background:e.colors.background.canvas,color:e.colors.text.primary,borderRadius:e.shape.borderRadius(4),overflow:"hidden",boxShadow:e.shadows.z3}),search:(0,j.css)({padding:e.spacing(2,3),fontSize:e.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",background:e.colors.background.canvas,color:e.colors.text.primary,borderBottom:`1px solid ${e.colors.border.weak}`}),sectionHeader:(0,j.css)({padding:e.spacing(1,2),fontSize:e.typography.h6.fontSize,fontWeight:e.typography.body.fontWeight,color:e.colors.text.secondary}),resultsContainer:(0,j.css)({padding:e.spacing(2,0)})});var fs=n(98251);function vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class bs extends a.PureComponent{constructor(){super(...arguments),vs(this,"subscription",void 0),vs(this,"styles",xs(l.v.theme2)),vs(this,"state",{}),vs(this,"initListener",(()=>{const e=(0,fs.gj)();e&&(this.subscription=e.getConnectionState().subscribe({next:e=>{this.setState({show:!e})}}))}))}componentDidMount(){0}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:e}=this.state;return e&&R.Vt.isSignedIn&&l.v.liveEnabled&&""!==R.Vt.user.orgRole?(0,v.jsx)("div",{className:this.styles.foot,children:(0,v.jsx)(Vt.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})}):null}}const xs=(0,Zn.B)((e=>({foot:j.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:j.css`
      border: 2px solid ${e.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `})));var ys,ws,js,Ss,Cs,ks,Ns,Os,Is,Ts;let $s=[],Rs=[];function Ps(e){$s.push(e)}function Ds(e){Rs.push(e)}class As extends a.Component{constructor(e){var t,n,s;super(e),s=e=>{const t=e.roles?e.roles():[];return(0,v.jsx)(r.AW,{exact:void 0===e.exact||e.exact,path:e.path,render:n=>((0,o.GQ)("AppWrapper",!1,"Rendering route",e,"with match",n.location),null!=t&&t.length&&!t.some((e=>R.Vt.hasRole(e)))?ys||(ys=(0,v.jsx)(r.l_,{to:"/"})):(0,v.jsx)(ts,Object.assign({},n,{route:e})))},e.path)},(n="renderRoute")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.state={}}async componentDidMount(){await async function(){if(l.v.angularSupportEnabled){const{AngularApp:e}=await Promise.all([n.e(7796),n.e(3697),n.e(4704)]).then(n.bind(n,93697)),t=new e;t.init(),t.bootstrap()}else(0,x.W)({load:(e,t,n)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return(0,v.jsx)(r.rs,{children:(0,m.eU)().map((e=>this.renderRoute(e)))})}renderNavBar(){return l.v.isPublicDashboardView||!this.state.ready||l.v.featureToggles.topnav?null:ws||(ws=(0,v.jsx)(En,{}))}commandPaletteEnabled(){return l.v.featureToggles.commandPalette&&!l.v.isPublicDashboardView}searchBarEnabled(){return!l.v.isPublicDashboardView}render(){const{app:e}=this.props,{ready:t}=this.state;(0,o.GQ)("AppWrapper",!1,"rendering");return(0,v.jsx)(a.StrictMode,{children:(0,v.jsx)(i.Provider,{store:f.h,children:(0,v.jsx)(c.z4,{style:"page",children:(0,v.jsx)(C.h.Provider,{value:e.context,children:(0,v.jsx)(is.f,{value:l.v.theme2,children:(0,v.jsx)(s.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:e=>{(0,d.ff)("command_palette_action_selected",{actionId:e.id,actionName:e.name})}}},children:(0,v.jsxs)(u.$i,{children:[js||(js=(0,v.jsx)(h.n,{})),this.commandPaletteEnabled()&&(Ss||(Ss=(0,v.jsx)(ps,{}))),(0,v.jsx)("div",{className:"grafana-app",children:(0,v.jsxs)(r.F0,{history:o.E1.getHistory(),children:[this.renderNavBar(),(0,v.jsxs)(Rt,{children:[Rs.map(((e,t)=>(0,v.jsx)(e,{},t.toString()))),Cs||(Cs=(0,v.jsx)(b,{})),ks||(ks=(0,v.jsx)(Ht,{})),this.searchBarEnabled()&&(Ns||(Ns=(0,v.jsx)(g._,{}))),t&&this.renderRoutes(),$s.map(((e,t)=>(0,v.jsx)(e,{},t.toString())))]})]})}),Os||(Os=(0,v.jsx)(bs,{})),Is||(Is=(0,v.jsx)(u.Y0,{})),Ts||(Ts=(0,v.jsx)(p.lO,{}))]})})})})})})})}}},32280:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o,hF:()=>i,rb:()=>r});var s=n(93964),a=n.n(s);const i=a().module("grafana.core",["ngRoute"]),r=[i,a().module("grafana.controllers",[]),a().module("grafana.directives",[]),a().module("grafana.factories",[]),a().module("grafana.services",[]),a().module("grafana.filters",[]),a().module("grafana.routes",[])],o=i},73505:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,Z:()=>i});var s=n(82897);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){if(a(this,"columns",void 0),a(this,"rows",void 0),a(this,"type",void 0),a(this,"columnMap",void 0),a(this,"refId",void 0),a(this,"meta",void 0),this.columns=[],this.columnMap={},this.rows=[],this.type="table",e){if(e.columns)for(const t of e.columns)this.addColumn(t);if(e.rows)for(const t of e.rows)this.addRow(t)}}sort(e){null===e.col||void 0===e.col||this.columns.length<=e.col||(this.rows.sort(((t,n)=>+(null==(t=t[e.col]))-+(null==(n=n[e.col]))||+(t>n)||-(t<n))),e.desc&&this.rows.reverse(),this.columns[e.col].sort=!0,this.columns[e.col].desc=e.desc)}addColumn(e){this.columnMap[e.text]||(this.columns.push(e),this.columnMap[e.text]=e)}addRow(e){this.rows.push(e)}}function r(e,t,n){let s=!1;for(let a=0;a<e.length;a++)if(void 0!==t[a]&&void 0!==n[a]){if(t[a]!==n[a])return!1}else void 0!==t[a]&&void 0!==n[a]||(s=!0);return s}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const o=e||new i;if(1===arguments.length)return o;if(2===arguments.length)return o.columns=n[0].hasOwnProperty("columns")?[...n[0].columns]:[],o.rows=n[0].hasOwnProperty("rows")?[...n[0].rows]:[],o;const l=n.filter((e=>!!e.columns)),d={},c=l.slice().reduce(((e,t)=>(t.columns.forEach((t=>{const{text:n}=t;void 0===d[n]&&(d[n]=e.length,e.push(t))})),e)),[]),u=l.map((e=>e.columns.map((e=>d[e.text])))),h=l.reduce(((e,t,n)=>{const s=u[n];return t.rows.forEach((t=>{const n=[];s.forEach(((e,s)=>{n[e]=t[s]})),e.push(n)})),e}),[]),p={},g=h.reduce(((e,t,n)=>{if(!p[n]){let a=n+1;for(;a<h.length;){const e=(0,s.findIndex)(h,(e=>r(c,t,e)),a);if(!(e>-1))break;{const n=h[e];for(let e=0;e<c.length;e++)void 0===t[e]&&void 0!==n[e]&&(t[e]=n[e]);p[e]=n,a=e+1}}e.push(t)}return e}),[]);return o.columns=c,o.rows=g,o}},40264:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});const s=(0,n(23067).PH)("core/cleanUpState")},93686:(e,t,n)=>{"use strict";n.d(t,{$l:()=>s.$l,H7:()=>a.H7,RL:()=>a.RL,ad:()=>s.ad});var s=n(11035),a=n(33994)},2247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,h:()=>s});const s=new(n(25317).F),a=s},58117:(e,t,n)=>{"use strict";n.d(t,{P:()=>A});var s=n(82897),a=n(68404),i=n(8006),r=n(34393),o=n(42200),l=n(3218),d=n(54761),c=n(70917),u=n(26006),h=n(36259),p=n(15082),g=n(23539);let m;!function(e){e.None="None",e.Team="Team",e.User="User",e.BuiltInRole="builtInRole"}(m||(m={}));var f=n(45916);const v=e=>{let{title:t="Add Permission For",permissions:n,assignments:s,onAdd:r,onCancel:o}=e;const[v,b]=(0,a.useState)(m.None),[x,y]=(0,a.useState)(0),[w,j]=(0,a.useState)(0),[S,C]=(0,a.useState)(""),[k,N]=(0,a.useState)(""),O=(0,a.useMemo)((()=>{const e=[];return s.users&&e.push({value:m.User,label:"User"}),s.teams&&e.push({value:m.Team,label:"Team"}),s.builtInRoles&&e.push({value:m.BuiltInRole,label:"Role"}),e}),[s]);(0,a.useEffect)((()=>{n.length>0&&N(n[0])}),[n]);return(0,f.jsxs)("div",{className:"cta-form","aria-label":"Permissions slider",children:[(0,f.jsx)(u.P,{onClick:o}),(0,f.jsx)("h5",{children:t}),(0,f.jsx)(l.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>r({userId:w,teamId:x,builtInRole:S,permission:k,target:v}),children:()=>(0,f.jsxs)(d.Lh,{children:[(0,f.jsx)(c.Ph,{"aria-label":"Role to add new permission to",value:v,options:O,onChange:e=>b(e.value),disabled:0===O.length}),v===m.User&&(0,f.jsx)(p.f,{onSelected:e=>j(e.value||0),className:"width-20"}),v===m.Team&&(0,f.jsx)(h.c,{onSelected:e=>{var t;return y((null===(t=e.value)||void 0===t?void 0:t.id)||0)},className:"width-20"}),v===m.BuiltInRole&&(0,f.jsx)(c.Ph,{"aria-label":"Built-in role picker",options:Object.values(g.B5).map((e=>({value:e,label:e}))),onChange:e=>C(e.value||""),width:40}),(0,f.jsx)(c.Ph,{"aria-label":"Permission Level",width:25,value:n.find((e=>e===k)),options:n.map((e=>({label:e,value:e}))),onChange:e=>N(e.value||"")}),(0,f.jsx)(i.zx,{type:"submit",disabled:!(v===m.Team&&x>0||v===m.User&&w>0||m.BuiltInRole&&g.B5.hasOwnProperty(S)),children:"Save"})]})})]})};var b,x,y,w,j,S=n(21888),C=n(99500);const k=e=>{let{item:t,permissionLevels:n,canSet:s,onRemove:a,onChange:r}=e;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{width:"1%"},children:N(t)}),(0,f.jsx)("td",{style:{width:"90%"},children:I(t)}),(0,f.jsx)("td",{children:t.isInherited&&(b||(b=(0,f.jsx)("em",{className:"muted no-wrap",children:"Inherited from folder"})))}),(0,f.jsx)("td",{children:(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(c.Ph,{className:"width-20",disabled:!s||!t.isManaged,onChange:e=>r(t,e.value),value:n.find((e=>e===t.permission)),options:n.map((e=>({value:e,label:e})))})})}),(0,f.jsx)("td",{children:(0,f.jsx)(S.u,{content:T(t),children:x||(x=(0,f.jsx)(C.J,{name:"info-circle"}))})}),(0,f.jsx)("td",{children:t.isManaged?(0,f.jsx)(i.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!s,onClick:()=>a(t),"aria-label":`Remove permission for ${O(t)}`}):(0,f.jsx)(S.u,{content:t.isInherited?"Inherited Permission":"Provisioned Permission",children:y||(y=(0,f.jsx)(i.zx,{size:"sm",icon:"lock"}))})})]})},N=e=>e.teamId?(0,f.jsx)("img",{className:"filter-table__avatar",src:e.teamAvatarUrl,alt:`Avatar for team ${e.teamId}`}):e.userId?(0,f.jsx)("img",{className:"filter-table__avatar",src:e.userAvatarUrl,alt:`Avatar for user ${e.userId}`}):w||(w=(0,f.jsx)(C.J,{size:"xl",name:"shield"})),O=e=>e.userId?e.userLogin:e.teamId?e.team:e.builtInRole,I=e=>e.userId?(0,f.jsxs)("span",{children:[e.userLogin," "]},"name"):e.teamId?(0,f.jsxs)("span",{children:[e.team," "]},"name"):e.builtInRole?(0,f.jsxs)("span",{children:[e.builtInRole," "]},"name"):j||(j=(0,f.jsx)("span",{},"name")),T=e=>`Actions: ${[...new Set(e.actions)].sort().join(" ")}`;var $;const R=e=>{let{title:t,items:n,compareKey:s,permissionLevels:i,canSet:r,onRemove:o,onChange:l}=e;const d=(0,a.useMemo)((()=>{const e={};for(let t of n){const n=t[s];e[n]?t.actions.length>e[n].actions.length&&(e[n]=t):e[n]=t}return Object.keys(e).map((t=>e[t]))}),[n,s]);return 0===d.length?null:(0,f.jsx)("div",{children:(0,f.jsxs)("table",{className:"filter-table gf-form-group",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{style:{width:"1%"}}),(0,f.jsx)("th",{children:t}),(0,f.jsx)("th",{style:{width:"1%"}}),$||($=(0,f.jsx)("th",{children:"Permission"})),(0,f.jsx)("th",{style:{width:"1%"}}),(0,f.jsx)("th",{style:{width:"1%"}})]})}),(0,f.jsx)("tbody",{children:d.map(((e,t)=>(0,f.jsx)(k,{item:e,onRemove:o,onChange:l,canSet:r,permissionLevels:i},`${t}-${e.userId}`)))})]})})};var P;const D={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},A=e=>{let{title:t="Permissions",buttonLabel:n="Add a permission",emptyLabel:o="There are no permissions",resource:l,resourceId:d,canSetPermissions:c,addPermissionTitle:u}=e;const[h,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)([]),[x,y]=(0,a.useState)(D),w=(0,a.useCallback)((()=>L(l,d).then((e=>b(e)))),[l,d]);(0,a.useEffect)((()=>{M(l).then((e=>(y(e),w())))}),[l,d,w]);const j=e=>{let t=null;e.target===m.User?t=F(l,d,e.userId,e.permission):e.target===m.Team?t=E(l,d,e.teamId,e.permission):e.target===m.BuiltInRole&&(t=V(l,d,e.builtInRole,e.permission)),null!==t&&t.then(w)},S=e=>{let t=null;e.userId?t=F(l,d,e.userId,""):e.teamId?t=E(l,d,e.teamId,""):e.builtInRole&&(t=V(l,d,e.builtInRole,"")),null!==t&&t.then(w)},C=(e,t)=>{e.permission!==t&&(e.userId?j({permission:t,userId:e.userId,target:m.User}):e.teamId?j({permission:t,teamId:e.teamId,target:m.Team}):e.builtInRole&&j({permission:t,builtInRole:e.builtInRole,target:m.BuiltInRole}))},k=(0,a.useMemo)((()=>(0,s.sortBy)(g.filter((e=>e.teamId)),["team","isManaged"])),[g]),N=(0,a.useMemo)((()=>(0,s.sortBy)(g.filter((e=>e.userId)),["userLogin","isManaged"])),[g]),O=(0,a.useMemo)((()=>(0,s.sortBy)(g.filter((e=>e.builtInRole)),["builtInRole","isManaged"])),[g]);return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"page-action-bar",children:[(0,f.jsx)("h3",{className:"page-sub-heading",children:t}),P||(P=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),c&&(0,f.jsx)(i.zx,{variant:"primary",onClick:()=>p(!0),children:n},"add-permission")]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(r.s,{in:h,children:(0,f.jsx)(v,{title:u,onAdd:j,permissions:x.permissions,assignments:x.assignments,onCancel:()=>p(!1)})}),0===g.length&&(0,f.jsx)("table",{className:"filter-table gf-form-group",children:(0,f.jsx)("tbody",{children:(0,f.jsx)("tr",{children:(0,f.jsx)("th",{children:o})})})}),(0,f.jsx)(R,{title:"Role",items:O,compareKey:"builtInRole",permissionLevels:x.permissions,onChange:C,onRemove:S,canSet:c}),(0,f.jsx)(R,{title:"User",items:N,compareKey:"userLogin",permissionLevels:x.permissions,onChange:C,onRemove:S,canSet:c}),(0,f.jsx)(R,{title:"Team",items:k,compareKey:"team",permissionLevels:x.permissions,onChange:C,onRemove:S,canSet:c})]})]})},M=async e=>{try{return await(0,o.i)().get(`/api/access-control/${e}/description`)}catch(e){return console.error("failed to load resource description: ",e),D}},L=(e,t)=>(0,o.i)().get(`/api/access-control/${e}/${t}`),F=(e,t,n,s)=>z(e,t,"users",n,s),E=(e,t,n,s)=>z(e,t,"teams",n,s),V=(e,t,n,s)=>z(e,t,"builtInRoles",n,s),z=(e,t,n,s,a)=>(0,o.i)().post(`/api/access-control/${e}/${t}/${n}/${s}`,{permission:a})},34393:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});n(68404);var s=n(41141),a=n(45916);const i="200px",r={transition:"max-height 200ms ease-in-out",overflow:"hidden"},o=e=>{let{children:t,in:n,maxHeight:o=i,style:l=r}=e;const d={exited:{maxHeight:0},entering:{maxHeight:o},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,a.jsx)(s.ZP,{in:n,timeout:200,children:e=>(0,a.jsx)("div",{style:Object.assign({},l,d[e]),children:t})})}},14143:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(68404),a=n(39321);const i=s.memo((e=>{let{actions:t}=e;const{chrome:n}=(0,a.p)();return(0,s.useEffect)((()=>{n.update({actions:t})})),null}));i.displayName="TopNavUpdate"},30881:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var s=n(52423),a=(n(68404),n(65737)),i=n(16755),r=n(45916);function o(e){let{className:t,leftActionsSeparator:n}=e;const o=(0,i.wW)(l);return n?(0,r.jsx)("div",{className:(0,s.cx)(t,o.leftActionsSeparator)}):a.v.featureToggles.topnav?(0,r.jsx)("div",{className:(0,s.cx)(t,o.line)}):null}const l=e=>({leftActionsSeparator:(0,s.css)({display:"flex",flexGrow:1}),line:(0,s.css)({width:1,backgroundColor:e.colors.border.medium,height:24})})},65632:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var s=n(52423),a=(n(68404),n(66876)),i=n(16755),r=n(58906),o=n(45916);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{}l(d,"LoginLogo",(e=>{let{className:t,logo:n}=e;return(0,o.jsx)("img",{className:t,src:`${n||"public/img/grafana_icon.svg"}`,alt:"Grafana"})})),l(d,"LoginBackground",(e=>{let{className:t,children:n}=e;const a=(0,i.l4)(),l=s.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${a.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${r.mediaUp(a.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return(0,o.jsx)("div",{className:(0,s.cx)(l,t),children:n})})),l(d,"MenuLogo",(e=>{let{className:t}=e;return(0,o.jsx)("img",{className:t,src:"public/img/grafana_icon.svg",alt:"Grafana"})})),l(d,"LoginBoxBackground",(()=>{const e=(0,i.l4)();return s.css`
    background: ${a.alpha(e.colors.background.primary,.7)};
    background-size: cover;
  `})),l(d,"AppTitle","Grafana"),l(d,"LoginTitle","Welcome to Grafana"),l(d,"GetLoginSubTitle",(()=>null))},61348:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var s=n(61264);function a(e,t,n){const a=[];let i=!1;function r(e){var t,o;const l=new URLSearchParams(null===(t=e.url)||void 0===t?void 0:t.split("?")[1]);let d=`${null===(o=e.url)||void 0===o?void 0:o.split("?")[0]}`;var c,u,h,p;(l.has("editview")&&(d+=`?editview=${l.get("editview")}`),i||e.hideFromBreadcrumbs)||(n&&d===n.url?(a.unshift({text:null!==(c=(0,s.Y)(n.id))&&void 0!==c?c:n.text,href:null!==(u=e.url)&&void 0!==u?u:""}),i=!0):a.unshift({text:null!==(h=(0,s.Y)(e.id))&&void 0!==h?h:e.text,href:null!==(p=e.url)&&void 0!==p?p:""}));e.parentItem&&r(e.parentItem)}return t&&r(t),r(e),a}},40768:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var s=n(52423),a=n(68404),i=n(16755),r=n(99500),o=n(45916);const l=["icon","children","onClick"];const d=a.forwardRef(((e,t)=>{let{icon:n,children:s,onClick:a}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const u=(0,i.wW)(c);return(0,o.jsxs)("button",Object.assign({},d,{className:u.action,onClick:a,children:[(0,o.jsx)(r.J,{name:n,size:"xl"}),s]}))}));d.displayName="CardButton";const c=e=>({action:s.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(1)};
      color: ${e.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `})},26006:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(23734),r=n(45916);const o=e=>{let{onClick:t,"aria-label":n,style:s}=e;const o=(0,a.wW)(l);return(0,r.jsx)(i.h,{"aria-label":null!=n?n:"Close",className:o,name:"times",onClick:t,style:s})},l=e=>s.css`
    position: absolute;
    right: ${e.spacing(.5)};
    top: ${e.spacing(1)};
  `},75442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s,a=n(52423),i=(n(68404),n(25004)),r=n(99500),o=n(8006),l=n(334),d=n(45916);const c=a.css`
  text-align: center;
`,u=a.css`
  max-width: 700px;
  margin: 0 auto;
`,h=e=>{var t,n,h;let{title:p,buttonIcon:g,buttonLink:m,buttonTitle:f,buttonDisabled:v,onClick:b,proTip:x,proTipLink:y,proTipLinkTitle:w,proTipTarget:j,infoBox:S,infoBoxTitle:C}=e;const k=()=>(0,d.jsxs)(d.Fragment,{children:[x?(0,d.jsxs)("span",{children:[s||(s=(0,d.jsx)(r.J,{name:"rocket"})),(0,d.jsxs)(d.Fragment,{children:[" ProTip: ",x," "]}),y&&(t||(t=(0,d.jsx)("a",{href:y,target:j,className:"text-link",children:w})))]},"proTipFooter"):"",S?(0,d.jsxs)("div",{className:`grafana-info-box ${u}`,children:[C&&(n||(n=(0,d.jsx)("h5",{children:C}))),h||(h=(0,d.jsx)("div",{dangerouslySetInnerHTML:S}))]},"infoBoxHtml"):""]}),N=k()?"":a.css`
        margin-bottom: 20px;
      `,O=m?o.Qj:o.zx,I=(0,d.jsx)(O,{size:"lg",onClick:b,href:m,icon:g,className:N,"data-testid":i.wl.components.CallToActionCard.buttonV2(f),disabled:v,children:f});return(0,d.jsx)(l._,{className:c,message:p,footer:k(),callToActionElement:I})}},58226:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,m:()=>p});n(68404);var s,a,i,r,o,l,d=n(65737),c=n(99500),u=n(37417),h=n(45916);function p(){return(0,h.jsx)(u.T,{navId:"not-found",children:(0,h.jsx)(u.T.Contents,{children:(0,h.jsx)("div",{className:"page-container page-body",children:(0,h.jsxs)("div",{className:"panel-container error-container",children:[s||(s=(0,h.jsx)("div",{className:"error-column graph-box",children:(0,h.jsxs)("div",{className:"error-row",children:[(0,h.jsxs)("div",{className:"error-column error-space-between graph-percentage",children:[(0,h.jsx)("p",{children:"100%"}),(0,h.jsx)("p",{children:"80%"}),(0,h.jsx)("p",{children:"60%"}),(0,h.jsx)("p",{children:"40%"}),(0,h.jsx)("p",{children:"20%"}),(0,h.jsx)("p",{children:"0%"})]}),(0,h.jsxs)("div",{className:"error-column image-box",children:[(0,h.jsx)("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),(0,h.jsxs)("div",{className:"error-row error-space-between",children:[(0,h.jsx)("p",{className:"graph-text",children:"Then"}),(0,h.jsx)("p",{className:"graph-text",children:"Now"})]})]})]})})),(0,h.jsxs)("div",{className:"error-column info-box",children:[a||(a=(0,h.jsx)("div",{className:"error-row current-box",children:(0,h.jsx)("p",{className:"current-text",children:"current"})})),(0,h.jsxs)("div",{className:"error-row",style:{flex:1},children:[i||(i=(0,h.jsx)(c.J,{name:"minus-circle",className:"error-minus"})),(0,h.jsxs)("div",{className:"error-column error-space-between error-full-width",children:[r||(r=(0,h.jsxs)("div",{className:"error-row error-space-between",children:[(0,h.jsx)("p",{children:"Chances you are on the page you are looking for."}),(0,h.jsx)("p",{className:"left-margin",children:"0%"})]})),(0,h.jsxs)("div",{children:[o||(o=(0,h.jsx)("h3",{children:"Sorry for the inconvenience"})),(0,h.jsxs)("p",{children:["Please go back to your"," ",(0,h.jsx)("a",{href:d.v.appSubUrl,className:"error-link",children:"home dashboard"})," ","and try again."]}),l||(l=(0,h.jsxs)("p",{children:["If the error persists, seek help on the"," ",(0,h.jsx)("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link",children:"community site"}),"."]}))]})]})]})]})]})})})})}const g=p},61533:(e,t,n)=>{"use strict";n.d(t,{$_:()=>u,Dv:()=>c,dP:()=>l});var s=n(68404),a=n(65737),i=n(99500),r=n(35448),o=n(45916);let l=()=>[{target:"_blank",id:"documentation",text:(0,r.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,r.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,r.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];let d=()=>{const{buildInfo:e,licenseInfo:t}=a.v,n=[],s=t.stateInfo?` (${t.stateInfo})`:"";if(n.push({target:"_blank",id:"version",text:`${e.edition}${s}`,url:t.licenseUrl}),e.hideVersion)return n;const{hasReleaseNotes:i}={hasReleaseNotes:!0,isBeta:e.version.includes("-beta")};return n.push({target:"_blank",id:"version",text:`v${e.version} (${e.commit})`,url:i?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),e.hasUpdate&&n.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),n};function c(e){l=e}const u=s.memo((e=>{let{customLinks:t}=e;const n=(t||l()).concat(d());return(0,o.jsx)("footer",{className:"footer",children:(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("ul",{children:n.map((e=>(0,o.jsx)("li",{children:(0,o.jsx)(h,{item:e})},e.text)))})})})}));function h(e){let{item:t}=e;const n=t.url?(0,o.jsx)("a",{href:t.url,target:t.target,rel:"noopener noreferrer",id:t.id,children:t.text}):t.text;return(0,o.jsxs)(o.Fragment,{children:[t.icon&&(0,o.jsx)(i.J,{name:t.icon})," ",n]})}u.displayName="Footer"},15315:(e,t,n)=>{"use strict";n.d(t,{G:()=>p});n(68404);var s,a=n(25004),i=n(3218),r=n(65678),o=n(54761),l=n(8006),d=n(21888),c=n(91841),u=n(96961),h=n(45916);const p=e=>{let{onSubmit:t,onSkip:n}=e;return(0,h.jsx)(i.l,{onSubmit:e=>{t(e.newPassword)},children:e=>{var t,i;let{errors:p,register:g,getValues:m}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.g,{label:"New password",invalid:!!p.newPassword,error:null==p||null===(t=p.newPassword)||void 0===t?void 0:t.message,children:(0,h.jsx)(u.Z,Object.assign({id:"new-password",autoFocus:!0,autoComplete:"new-password"},g("newPassword",{required:"New Password is required"})))}),(0,h.jsx)(r.g,{label:"Confirm new password",invalid:!!p.confirmNew,error:null==p||null===(i=p.confirmNew)||void 0===i?void 0:i.message,children:(0,h.jsx)(u.Z,Object.assign({id:"confirm-new-password",autoComplete:"new-password"},g("confirmNew",{required:"Confirmed Password is required",validate:e=>e===m().newPassword||"Passwords must match!"})))}),(0,h.jsxs)(o.wc,{children:[s||(s=(0,h.jsx)(l.zx,{type:"submit",className:c.F,children:"Submit"})),n&&(0,h.jsx)(d.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom",children:(0,h.jsx)(l.zx,{fill:"text",onClick:n,type:"button","aria-label":a.wl.pages.Login.skip,children:"Skip"})})]})]})}})}},30418:(e,t,n)=>{"use strict";n.d(t,{X:()=>c});var s=n(52423),a=n(68404),i=n(16755),r=n(99500),o=n(4645),l=n(31625),d=n(45916);const c=e=>{let{name:t,onChange:n,verifyLayerNameUniqueness:s}=e;const c=(0,i.wW)(u),[h,p]=(0,a.useState)(!1),[g,m]=(0,a.useState)(null),f=e=>{p(!1),g?m(null):t!==e&&n(e)};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:c.wrapper,children:[!h&&(0,d.jsxs)("button",{className:c.layerNameWrapper,title:"Edit layer name",onClick:e=>{p(!0)},"data-testid":"layer-name-div",children:[(0,d.jsx)("span",{className:c.layerName,children:t}),(0,d.jsx)(r.J,{name:"pen",className:c.layerEditIcon,size:"sm"})]}),h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.I,{type:"text",defaultValue:t,onBlur:e=>{f(e.currentTarget.value.trim())},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f(e.currentTarget.value)},onFocus:e=>{e.target.select()},invalid:null!==g,onChange:e=>{const n=e.currentTarget.value.trim();0!==n.length?!s||s(n)||n===t?g&&m(null):m("Layer name already exists"):m("An empty layer name is not allowed")},className:c.layerNameInput,"data-testid":"layer-name-input"}),g&&(0,d.jsx)(l.S,{horizontal:!0,children:g})]})]})})},u=e=>({wrapper:s.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${e.spacing(.5)};
    `,layerNameWrapper:s.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${e.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${e.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${e.colors.action.hover};
        border: 1px dashed ${e.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${e.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:s.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${e.spacing(.5)};
    `,layerEditIcon:(0,s.cx)(s.css`
        margin-left: ${e.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:s.css`
      max-width: 300px;
      margin: -4px 0;
    `})},66803:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var s=n(68404),a=n(78130),i=n(45916);const r=e=>{const{children:t,storageKey:n,defaultValue:r}=e,[o,l]=(0,s.useState)({value:a.Z.getObject(e.storageKey,e.defaultValue)});(0,s.useEffect)((()=>{const t=t=>{t.key===n&&l({value:a.Z.getObject(e.storageKey,e.defaultValue)})};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}));return(0,i.jsx)(i.Fragment,{children:t(o.value,(e=>{try{a.Z.setObject(n,e)}catch(e){console.error(e)}l({value:e})}),(()=>{try{a.Z.delete(n)}catch(e){console.log(e)}l({value:r})}))})}},78983:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(68404),a=n(94025),i=n(93570),r=n(2247),o=n(46782),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends s.PureComponent{constructor(e){super(e),d(this,"result",{}),d(this,"changePassword",(e=>{const t={newPassword:e,confirmNew:e,oldPassword:"admin"};if(this.props.resetCode){const t={code:this.props.resetCode,newPassword:e,confirmPassword:e};(0,i.i)().post("/api/user/password/reset",t).then((()=>{this.toGrafana()}))}else(0,i.i)().put("/api/user/password",t).then((()=>{this.toGrafana()})).catch((e=>console.error(e)))})),d(this,"login",(e=>{this.setState({isLoggingIn:!0}),(0,i.i)().post("/login",e).then((t=>{this.result=t,"admin"!==e.password||o.ZP.ldapEnabled||o.ZP.authProxyEnabled?this.toGrafana():this.changeView()})).catch((()=>{this.setState({isLoggingIn:!1})}))})),d(this,"changeView",(()=>{this.setState({isChangingPassword:!0})})),d(this,"toGrafana",(()=>{this.result.redirectUrl?""===o.ZP.appSubUrl||this.result.redirectUrl.startsWith(o.ZP.appSubUrl)?window.location.assign(this.result.redirectUrl):window.location.assign(o.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(o.ZP.appSubUrl+"/")})),this.state={isLoggingIn:!1,isChangingPassword:!1},o.ZP.loginError&&r.Z.emit(a.SI.alertWarning,["Login Failed",o.ZP.loginError])}render(){const{children:e}=this.props,{isLoggingIn:t,isChangingPassword:n}=this.state,{login:s,toGrafana:a,changePassword:i}=this,{loginHint:r,passwordHint:d,disableLoginForm:c,disableUserSignUp:u}=o.ZP;return(0,l.jsx)(l.Fragment,{children:e({isOauthEnabled:!!o.ZP.oauth&&Object.keys(o.ZP.oauth).length>0,loginHint:r,passwordHint:d,disableLoginForm:c,disableUserSignUp:u,login:s,isLoggingIn:t,changePassword:i,skipPasswordChange:a,isChangingPassword:n})})}}const u=c},91841:(e,t,n)=>{"use strict";n.d(t,{F:()=>h,U:()=>p});var s=n(52423),a=(n(68404),n(25004)),i=n(3218),r=n(65678),o=n(4645),l=n(8006),d=n(96961),c=n(45916);const u=s.css`
  width: 100%;
  padding-bottom: 16px;
`,h=s.css`
  justify-content: center;
  width: 100%;
`,p=e=>{let{children:t,onSubmit:n,isLoggingIn:s,passwordHint:p,loginHint:g}=e;return(0,c.jsx)("div",{className:u,children:(0,c.jsx)(i.l,{onSubmit:n,validateOn:"onChange",children:e=>{var n,i;let{register:u,errors:m}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.g,{label:"Email or username",invalid:!!m.user,error:null===(n=m.user)||void 0===n?void 0:n.message,children:(0,c.jsx)(o.I,Object.assign({},u("user",{required:"Email or username is required"}),{autoFocus:!0,autoCapitalize:"none",placeholder:g,"aria-label":a.wl.pages.Login.username}))}),(0,c.jsx)(r.g,{label:"Password",invalid:!!m.password,error:null===(i=m.password)||void 0===i?void 0:i.message,children:(0,c.jsx)(d.Z,Object.assign({id:"current-password",autoComplete:"current-password",passwordHint:p},u("password",{required:"Password is required"})))}),(0,c.jsx)(l.zx,{type:"submit","aria-label":a.wl.pages.Login.submit,className:h,disabled:s,children:s?"Logging in...":"Log in"}),t]})}})})}},3209:(e,t,n)=>{"use strict";n.d(t,{$s:()=>c,dd:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(58906),o=n(65632),l=n(61533),d=n(45916);const c=e=>{let{children:t,enterAnimation:n=!0}=e;const a=(0,i.wW)(p);return(0,d.jsx)("div",{className:(0,s.cx)(a.loginInnerBox,n&&a.enterAnimation),children:t})},u=e=>{var t,n;let{children:r,branding:c}=e;const u=(0,i.wW)(p),[h,g]=(0,a.useState)(!1),m=null!==(t=null==c?void 0:c.loginSubtitle)&&void 0!==t?t:o.c.GetLoginSubTitle(),f=null!==(n=null==c?void 0:c.loginTitle)&&void 0!==n?n:o.c.LoginTitle,v=(null==c?void 0:c.loginBoxBackground)||o.c.LoginBoxBackground(),b=null==c?void 0:c.loginLogo;return(0,a.useEffect)((()=>g(!0)),[]),(0,d.jsxs)(o.c.LoginBackground,{className:(0,s.cx)(u.container,h&&u.loginAnim,null==c?void 0:c.loginBackground),children:[(0,d.jsxs)("div",{className:(0,s.cx)(u.loginContent,v,"login-content-box"),children:[(0,d.jsxs)("div",{className:u.loginLogoWrapper,children:[(0,d.jsx)(o.c.LoginLogo,{className:u.loginLogo,logo:b}),(0,d.jsxs)("div",{className:u.titleWrapper,children:[(0,d.jsx)("h1",{className:u.mainTitle,children:f}),m&&(0,d.jsx)("h3",{className:u.subTitle,children:m})]})]}),(0,d.jsx)("div",{className:u.loginOuterBox,children:r})]}),(0,d.jsx)(l.$_,{customLinks:null==c?void 0:c.footerLinks})]})},h=s.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,p=e=>({container:(0,s.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:s.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:s.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:s.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${r.mediaUp(e.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:s.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${e.spacing(3)};
    `,titleWrapper:s.css`
      text-align: center;
    `,mainTitle:s.css`
      font-size: 22px;

      @media ${r.mediaUp(e.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:s.css`
      font-size: ${e.typography.size.md};
      color: ${e.colors.text.secondary};
    `,loginContent:s.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${e.shape.borderRadius(4)};
      padding: ${e.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${r.mediaUp(e.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:s.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:s.css`
      padding: ${e.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:s.css`
      animation: ${h} ease-out 0.2s;
    `})},61264:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,Y:()=>i});var s=n(65737),a=n(35448);function i(e){switch(e){case"home":return(0,a.t)("nav.home.title","Home");case"create":return(0,a.t)("nav.create.title","Create");case"create-dashboard":return(0,a.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,a.t)("nav.create-folder.title","Folder");case"import":return(0,a.t)("nav.create-import.title","Import");case"alert":return(0,a.t)("nav.create-alert.title","New alert rule");case"starred":return(0,a.t)("nav.starred.title","Starred");case"starred-empty":return(0,a.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,a.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return s.v.featureToggles.topnav?(0,a.t)("nav.dashboards.title","Dashboards"):(0,a.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,a.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,a.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,a.t)("nav.library-panels.title","Library panels");case"dashboards/new":return(0,a.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,a.t)("nav.new-folder.title","New folder");case"scenes":return(0,a.t)("nav.scenes.title","Scenes");case"explore":return(0,a.t)("nav.explore.title","Explore");case"alerting":return(0,a.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,a.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-list":return(0,a.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,a.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,a.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,a.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,a.t)("nav.alerting-silences.title","Silences");case"groups":return(0,a.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,a.t)("nav.alerting-admin.title","Admin");case"cfg":return s.v.featureToggles.topnav?(0,a.t)("nav.config.title","Administration"):(0,a.t)("nav.config.titleBeforeTopnav","Configuration");case"admin/general":return(0,a.t)("nav.admin-general.title","General");case"admin/plugins":return(0,a.t)("nav.admin-plugins.title","Plugins and data");case"admin/access":return(0,a.t)("nav.admin-access.title","Users and access");case"datasources":return(0,a.t)("nav.datasources.title","Data sources");case"correlations":return(0,a.t)("nav.correlations.title","Correlations");case"users":return(0,a.t)("nav.users.title","Users");case"teams":return(0,a.t)("nav.teams.title","Teams");case"plugins":return(0,a.t)("nav.plugins.title","Plugins");case"org-settings":return s.v.featureToggles.topnav?(0,a.t)("nav.org-settings.title","Default preferences"):(0,a.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,a.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,a.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,a.t)("nav.admin.title","Server admin");case"global-users":return s.v.featureToggles.topnav?(0,a.t)("nav.global-users.title","Users (All orgs)"):(0,a.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,a.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,a.t)("nav.server-settings.title","Settings");case"storage":return(0,a.t)("nav.storage.title","Storage");case"upgrading":return(0,a.t)("nav.upgrading.title","Stats and license");case"live":return(0,a.t)("nav.live.title","Event streaming");case"live-status":return(0,a.t)("nav.live-status.title","Status");case"live-pipeline":return(0,a.t)("nav.live-pipeline.title","Pipeline");case"live-cloud":return(0,a.t)("nav.live-cloud.title","Cloud");case"monitoring":return(0,a.t)("nav.monitoring.title","Monitoring");case"apps":return(0,a.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,a.t)("nav.alerts-and-incidents.title","Alerts & incidents");case"help":return(0,a.t)("nav.help.title","Help");case"profile/settings":return(0,a.t)("nav.profile/settings.title","Preferences");case"profile/notifications":return(0,a.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,a.t)("nav.profile/password.title","Change password");case"sign-out":return(0,a.t)("nav.sign-out.title","Sign out");case"search":return(0,a.t)("nav.search-dashboards.title","Search dashboards");default:return}}function r(e){switch(e){case"dashboards":return(0,a.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return s.v.featureToggles.topnav?(0,a.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"dashboards/playlists":return(0,a.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,a.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,a.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,a.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,a.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,a.t)("nav.alerting-receivers.subtitle","Decide how your contacts are notified when an alert fires");case"am-routes":return(0,a.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,a.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,a.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,a.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,a.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,a.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,a.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,a.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,a.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,a.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,a.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,a.t)("nav.global-users.subtitle","Manage and create users across the whole Grafana server");case"global-orgs":return(0,a.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,a.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,a.t)("nav.storage.subtitle","Manage file storage");case"admin":return s.v.featureToggles.topnav?(0,a.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,a.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,a.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,a.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},92155:(e,t,n)=>{"use strict";n.d(t,{Y:()=>d});var s=n(82897),a=n(68404),i=n(4645),r=n(65678),o=n(45916);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends a.PureComponent{constructor(){super(...arguments),l(this,"state",{text:"",inputCorrected:!1}),l(this,"inputRef",a.createRef()),l(this,"updateValue",(()=>{var e;const t=null===(e=this.inputRef.current)||void 0===e?void 0:e.value;let n=!1,s="";const a=this.props.min,i=this.props.max;let r=""!==t?Number(t):void 0;r&&!Number.isNaN(r)&&(null!=a&&r<a?(s=a.toString(),n=!0):null!=i&&r>i?(s=i.toString(),n=!0):s=null!=t?t:"",this.setState({text:s,inputCorrected:n})),n&&this.updateValueDebounced(),Number.isNaN(r)||r===this.props.value||this.props.onChange(r)})),l(this,"updateValueDebounced",(0,s.debounce)(this.updateValue,500)),l(this,"onChange",(e=>{this.setState({text:e.currentTarget.value}),this.updateValueDebounced()})),l(this,"onKeyPress",(e=>{"Enter"===e.key&&this.updateValue()}))}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(e){if(this.props.value!==e.value){const e=isNaN(this.props.value)?"":`${this.props.value}`;e!==this.state.text&&this.setState({text:e})}}renderInput(){return(0,o.jsx)(i.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:e}=this.state;if(e){let t="",{min:n,max:s}=this.props;return null==s?null!=n&&(t=`< ${n}`):t=null!=n?`${n} < > ${s}`:`> ${s}`,(0,o.jsx)(r.g,{invalid:e,error:`Out of range ${t}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"},children:this.renderInput()})}return this.renderInput()}}},17375:(e,t,n)=>{"use strict";n.d(t,{B:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(32933),r=n(16944),o=n(45916);const l=e=>{let{value:t,onChange:n}=e;const s=(0,a.l4)(),l=(0,a.wW)(d);return(0,o.jsx)(i.zH,{color:null!=t?t:"",onChange:n,enableNamedColors:!0,children:e=>{let{ref:n,showColorPicker:a,hideColorPicker:i}=e;return(0,o.jsx)("div",{className:l.spot,children:(0,o.jsx)("div",{className:l.colorPicker,children:(0,o.jsx)(r.b,{ref:n,onClick:a,onMouseLeave:i,color:t?s.visualization.getColorByName(t):s.components.input.borderColor})})})}})},d=e=>({spot:s.css`
      color: ${e.colors.text};
      background: ${e.components.input.background};
      padding: 3px;
      height: ${e.v1.spacing.formInputHeight}px;
      border: 1px solid ${e.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${e.components.input.borderHover};
      }
    `,colorPicker:s.css`
      padding: 0 ${e.spacing(1)};
    `,colorText:s.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:s.css`
      cursor: pointer;
      color: ${e.colors.text.secondary};
      &:hover {
        color: ${e.colors.text};
      }
    `})},8773:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var s=n(68404),a=n(92155),i=n(45916);const r=e=>{let{value:t,onChange:n,item:r}=e;const{settings:o}=r,l=(0,s.useCallback)((e=>{n(null!=o&&o.integer&&void 0!==e?Math.floor(e):e)}),[n,null==o?void 0:o.integer]);return(0,i.jsx)(a.Y,{value:t,min:null==o?void 0:o.min,max:null==o?void 0:o.max,step:null==o?void 0:o.step,placeholder:null==o?void 0:o.placeholder,onChange:l})}},3404:(e,t,n)=>{"use strict";n.d(t,{u:()=>Re,l:()=>Pe});var s=n(68404),a=n(68959),i=n(97859),r=n(27843),o=n(87602),l=n(70800),d=n(37625),c=n(82261),u=n(90261),h=n(52423),p=n(82897),g=n(84542),m=n(57971),f=n(4645),v=n(32933),b=n(23734),x=n(16755),y=n(8006),w=n(83744),j=n(50191),S=n(45916);const C=["key"];var k;function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=[{value:o.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:o.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class I extends s.PureComponent{constructor(e){super(e),N(this,"latestThresholdInputRef",void 0),N(this,"onAddThreshold",(()=>{const{steps:e}=this.state;let t=0;e.length>1&&(t=e[e.length-1].value+10);let n=m.O9.filter((t=>!e.some((e=>e.color===t))))[1];n||(n="#CCCCCC");const s={value:t,color:n,key:T++},a=[...e,s];(0,g.bP)(a),this.setState({steps:a},(()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()}))})),N(this,"onRemoveThreshold",(e=>{const{steps:t}=this.state;t.length&&e.key!==t[0].key&&this.setState({steps:t.filter((t=>t.key!==e.key))},this.onChange)})),N(this,"onChangeThresholdValue",((e,t)=>{const n=e.target.value.replace(/,/g,"."),s=parseFloat(n),a=isNaN(s)?"":s,i=this.state.steps.map((e=>(e.key===t.key&&(e=Object.assign({},e,{value:a})),e)));i.length&&(i[0].value=-1/0),(0,g.bP)(i),this.setState({steps:i})})),N(this,"onChangeThresholdColor",((e,t)=>{const{steps:n}=this.state,s=n.map((n=>(n.key===e.key&&(n=Object.assign({},n,{color:t})),n)));this.setState({steps:s},this.onChange)})),N(this,"onBlur",(()=>{const e=[...this.state.steps];(0,g.bP)(e),this.setState({steps:e},this.onChange)})),N(this,"onChange",(()=>{this.props.onChange(function(e,t){var n;return{mode:null!==(n=e.mode)&&void 0!==n?n:o.H.Absolute,steps:t.map((e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,C)))}}(this.props.thresholds,this.state.steps))})),N(this,"onModeChanged",(e=>{this.props.onChange(Object.assign({},this.props.thresholds,{mode:e}))}));const t=function(e){e&&0!==e.length||(e=[{value:-1/0,color:"green"}]);return e.filter(((e,t)=>(0,p.isNumber)(e.value)||0===t)).map((e=>({color:e.color,value:null===e.value?-1/0:e.value,key:T++})))}(e.thresholds.steps);t[0].value=-1/0,this.state={steps:t},this.latestThresholdInputRef=s.createRef()}renderInput(e,t,n){const s=this.props.thresholds.mode===o.H.Percentage,a=`Threshold ${n+1}`;return isFinite(e.value)?(0,S.jsx)(f.I,{type:"number",step:"0.0001",onChange:t=>this.onChangeThresholdValue(t,e),value:e.value,"aria-label":a,ref:0===n?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,S.jsxs)("div",{className:t.inputPrefix,children:[(0,S.jsx)("div",{className:t.colorPicker,children:(0,S.jsx)(v.zH,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})}),s&&(0,S.jsx)("div",{className:t.percentIcon,children:"%"})]}),suffix:(0,S.jsx)(b.h,{"aria-label":`Remove ${a}`,className:t.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(e)})},s.toString()):(0,S.jsx)(f.I,{type:"text",value:"Base","aria-label":a,disabled:!0,prefix:(0,S.jsx)("div",{className:t.colorPicker,children:(0,S.jsx)(v.zH,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})})})}render(){const{thresholds:e}=this.props,{steps:t}=this.state;return(0,S.jsx)(x.Ni.Consumer,{children:n=>{const s=$(n);return(0,S.jsxs)("div",{className:s.wrapper,children:[(0,S.jsx)(y.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:s.addButton,fullWidth:!0,children:"Add threshold"}),(0,S.jsx)("div",{className:s.thresholds,children:t.slice(0).reverse().map(((e,t)=>(0,S.jsx)("div",{className:s.item,children:this.renderInput(e,s,t)},`${e.key}`)))}),(0,S.jsxs)("div",{children:[k||(k=(0,S.jsx)(w._,{description:"Percentage means thresholds relative to min & max",children:"Thresholds mode"})),(0,S.jsx)(d.S,{options:O,onChange:this.onModeChanged,value:e.mode})]})]})}})}}let T=100;const $=(0,j.B)((e=>({wrapper:h.css`
      display: flex;
      flex-direction: column;
    `,thresholds:h.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${e.spacing(2)};
    `,item:h.css`
      margin-bottom: ${e.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:h.css`
      padding: 0 ${e.spacing(1)};
    `,addButton:h.css`
      margin-bottom: ${e.spacing(1)};
    `,percentIcon:h.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `,inputPrefix:h.css`
      display: flex;
      align-items: center;
    `,trashIcon:h.css`
      color: ${e.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${e.colors.text};
      }
    `})));class R extends s.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t={mode:o.H.Percentage,steps:[]}),(0,S.jsx)(I,{thresholds:t,onChange:e})}}var P,D=n(12812),A=n(54761),M=n(99500),L=n(78941),F=n(7916),E=n(85436),V=n(19677),z=n(15013),B=n(70917);function _(e){var t,n;let{mapping:a,index:i,onChange:r,onRemove:o,onDuplicate:l,showIconPicker:d}=e;const{key:c,result:u,id:h}=a,p=(0,x.wW)(W),g=(0,s.useRef)(null),m=(0,s.useCallback)((e=>{const t=Object.assign({},a,{result:Object.assign({},a.result)});e(t),r(i,t)}),[a,i,r]);(0,s.useEffect)((()=>{g.current&&a.isNew&&(g.current.focus(),m((e=>{e.isNew=!1})))}),[a,g,m]);const w=e=>{m((t=>{t.result.color=e}))},j=()=>{m((e=>{e.result.color=void 0}))},C=e=>{m((t=>{t.result.icon=e}))},k=()=>{m((e=>{e.result.icon=void 0}))},N=e=>{m((t=>{t.key=e.currentTarget.value}))},O=e=>{m((t=>{t.result.text=e.currentTarget.value}))},I=e=>{m((t=>{t.from=parseFloat(e.currentTarget.value)}))},T=e=>{m((t=>{t.to=parseFloat(e.currentTarget.value)}))},$=e=>{m((t=>{t.pattern=e.currentTarget.value}))},R=e=>{m((t=>{t.specialMatch=e.value}))},L=[{label:"Null",value:D.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:D.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:D.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:D.e.True,description:"Boolean true values"},{label:"False",value:D.e.False,description:"Boolean false values"},{label:"Empty",value:D.e.Empty,description:"Empty string"}];return(0,S.jsx)(V._l,{draggableId:h,index:i,children:e=>{var s,r,h,m;return(0,S.jsxs)("tr",Object.assign({className:p.dragRow,ref:e.innerRef},e.draggableProps,{children:[(0,S.jsx)("td",{children:(0,S.jsx)("div",Object.assign({className:p.dragHandle},e.dragHandleProps,{children:P||(P=(0,S.jsx)(M.J,{name:"draggabledots",size:"lg"}))}))}),(0,S.jsx)("td",{className:p.typeColumn,children:a.type}),(0,S.jsxs)("td",{children:[a.type===D.H.ValueToText&&(0,S.jsx)(f.I,{ref:g,type:"text",value:null!=c?c:"",onChange:N,placeholder:"Exact value to match"}),a.type===D.H.RangeToText&&(0,S.jsxs)("div",{className:p.rangeInputWrapper,children:[(0,S.jsx)(f.I,{type:"number",value:null!==(s=a.from)&&void 0!==s?s:"",placeholder:"Range start",onChange:I,prefix:"From"}),(0,S.jsx)(f.I,{type:"number",value:null!==(r=a.to)&&void 0!==r?r:"",placeholder:"Range end",onChange:T,prefix:"To"})]}),a.type===D.H.RegexToText&&(0,S.jsx)(f.I,{type:"text",value:null!==(h=a.pattern)&&void 0!==h?h:"",placeholder:"Regular expression",onChange:$}),a.type===D.H.SpecialValue&&(0,S.jsx)(B.Ph,{value:L.find((e=>e.value===a.specialMatch)),options:L,onChange:R})]}),(0,S.jsx)("td",{children:(0,S.jsx)(f.I,{type:"text",value:null!==(m=u.text)&&void 0!==m?m:"",onChange:O,placeholder:"Optional display text"})}),(0,S.jsxs)("td",{className:p.textAlignCenter,children:[u.color&&(0,S.jsxs)(A.Lh,{spacing:"sm",justify:"center",children:[(0,S.jsx)(v.zH,{color:u.color,onChange:w,enableNamedColors:!0}),t||(t=(0,S.jsx)(b.h,{name:"times",onClick:j,tooltip:"Remove color",tooltipPlacement:"top"}))]}),!u.color&&(0,S.jsx)(v.zH,{color:"gray",onChange:w,enableNamedColors:!0,children:e=>(0,S.jsx)(y.zx,{variant:"primary",fill:"text",onClick:e.showColorPicker,ref:e.ref,size:"sm",children:"Set color"})})]}),d&&(0,S.jsx)("td",{className:p.textAlignCenter,children:(0,S.jsxs)(A.Lh,{spacing:"sm",justify:"center",children:[(0,S.jsx)(E.E,{onChange:C,onClear:k,value:u.icon,size:F.zc.SMALL,folderName:F.QS.Icon,mediaType:F.DD.Icon,color:u.color}),u.icon&&(n||(n=(0,S.jsx)(b.h,{name:"times",onClick:k,tooltip:"Remove icon",tooltipPlacement:"top"})))]})}),(0,S.jsx)("td",{className:p.textAlignCenter,children:(0,S.jsxs)(A.Lh,{spacing:"sm",children:[(0,S.jsx)(b.h,{name:"copy",onClick:()=>l(i),"data-testid":"duplicate-value-mapping"}),(0,S.jsx)(b.h,{name:"trash-alt",onClick:()=>o(i),"data-testid":"remove-value-mapping"})]})})]}))}},h)}const W=e=>({dragRow:(0,h.css)({position:"relative"}),dragHandle:(0,h.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,h.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),regexInputWrapper:(0,h.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),typeColumn:(0,h.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,h.css)({textAlign:"center"})});function U(e){let{value:t,onChange:n,onClose:a,showIconPicker:i}=e;const r=(0,x.wW)(H),[o,l]=(0,s.useState)([]);(0,s.useEffect)((()=>{l(Q(t))}),[t]);const d=(e,t)=>{const n=[...o];n.splice(e,1,t),l(n)},c=e=>{const t=[...o];t.splice(e,1),l(t)},u=[{label:"Value",value:D.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:D.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:D.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:D.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],h=e=>{l([...o,Z({type:e.value,result:{},isNew:!0})])},p=e=>{const t=(n=o[e],Object.assign({},Z(n),{id:q()}));var n;const s=[...o];s.splice(e,0,Object.assign({},t));for(let t=e;t<o.length;t++)s[t].result.index=t;l(s)};return(0,s.useEffect)((()=>{null!=t&&t.length||h({value:D.H.ValueToText})}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:r.tableWrap,children:(0,S.jsxs)("table",{className:r.editTable,children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{style:{width:"1%"}}),(0,S.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:"Condition"}),(0,S.jsx)("th",{style:{textAlign:"left"},children:"Display text"}),(0,S.jsx)("th",{style:{width:"10%"},children:"Color"}),i&&(0,S.jsx)("th",{style:{width:"10%"},children:"Icon"}),(0,S.jsx)("th",{style:{width:"1%"}})]})}),(0,S.jsx)(V.Z5,{onDragEnd:e=>{if(!t||!e.destination)return;const n=[...o],s=n[e.source.index];n.splice(e.source.index,1),n.splice(e.destination.index,0,s),l(n)},children:(0,S.jsx)(V.bK,{droppableId:"sortable-field-mappings",direction:"vertical",children:e=>(0,S.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[o.map(((e,t)=>(0,S.jsx)(_,{mapping:e,index:t,onChange:d,onRemove:c,onDuplicate:p,showIconPicker:i},e.id))),e.placeholder]}))})})]})}),(0,S.jsxs)(L.u.ButtonRow,{leftItems:(0,S.jsx)(z.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:u,onChange:h}),children:[(0,S.jsx)(y.zx,{variant:"secondary",fill:"outline",onClick:a,children:"Cancel"}),(0,S.jsx)(y.zx,{variant:"primary",onClick:()=>{n(G(o)),a()},children:"Update"})]})]})}const H=e=>({tableWrap:h.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,h.css)({width:"100%",marginBottom:e.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:e.colors.action.hover}," th, td":{padding:e.spacing(1)}})});function q(){return(0,p.uniqueId)("mapping-")}function Z(e){return Object.assign({type:D.H.ValueToText,result:{},id:q()},e)}function G(e){const t=[],n={type:D.H.ValueToText,options:{}};return e.forEach(((e,s)=>{const a=Object.assign({},e.result,{index:s});switch(a.text&&0!==a.text.trim().length||(a.text=void 0),e.type){case D.H.ValueToText:null!=e.key&&(n.options[e.key]=a);break;case D.H.RangeToText:null!=e.from&&null!=e.to&&t.push({type:e.type,options:{from:e.from,to:e.to,result:a}});break;case D.H.RegexToText:null!=e.pattern&&t.push({type:e.type,options:{pattern:e.pattern,result:a}});break;case D.H.SpecialValue:t.push({type:e.type,options:{match:e.specialMatch,result:a}})}})),Object.keys(n.options).length>0&&t.unshift(n),t}function Q(e){var t,n,s;const a=[];if(e)for(const i of e)switch(i.type){case D.H.ValueToText:for(const e of Object.keys(i.options))a.push(Z({type:i.type,result:i.options[e],key:e}));break;case D.H.RangeToText:a.push(Z({type:i.type,result:i.options.result,from:null!==(t=i.options.from)&&void 0!==t?t:0,to:null!==(n=i.options.to)&&void 0!==n?n:0}));break;case D.H.RegexToText:a.push(Z({type:i.type,result:i.options.result,pattern:i.options.pattern}));break;case D.H.SpecialValue:a.push(Z({type:i.type,result:i.options.result,specialMatch:null!==(s=i.options.match)&&void 0!==s?s:D.e.Null}))}return a.sort(((e,t)=>{var n,s;return(null!==(n=e.result.index)&&void 0!==n?n:0)>(null!==(s=t.result.index)&&void 0!==s?s:0)?1:-1})),a}var K,J,Y;const X=s.memo((e=>{var t;const{value:n,onChange:a,item:i}=e,r=(0,x.wW)(ee),o=null===(t=i.settings)||void 0===t?void 0:t.icon,[l,d]=(0,s.useState)(!1),c=(0,s.useCallback)((()=>{d(!1)}),[d]),u=(0,s.useMemo)((()=>Q(n)),[n]),h=(0,s.useCallback)(((e,t)=>{u[t].result.color=e,a(G(u))}),[u,a]),p=(0,s.useCallback)(((e,t)=>{u[t].result.icon=e,a(G(u))}),[u,a]);return(0,S.jsxs)(A.wc,{children:[(0,S.jsx)("table",{className:r.compactTable,children:(0,S.jsx)("tbody",{children:u.map(((e,t)=>(0,S.jsxs)("tr",{children:[(0,S.jsxs)("td",{children:[e.type===D.H.ValueToText&&e.key,e.type===D.H.RangeToText&&(0,S.jsxs)("span",{children:["[",e.from," - ",e.to,"]"]}),e.type===D.H.RegexToText&&e.pattern,e.type===D.H.SpecialValue&&e.specialMatch]}),K||(K=(0,S.jsx)("td",{children:(0,S.jsx)(M.J,{name:"arrow-right"})})),(0,S.jsx)("td",{children:e.result.text}),e.result.color&&(0,S.jsx)("td",{children:(0,S.jsx)(v.zH,{color:e.result.color,onChange:e=>h(e,t),enableNamedColors:!0})}),o&&e.result.icon&&(0,S.jsx)("td",{"data-testid":"iconPicker",children:(0,S.jsx)(E.E,{onChange:e=>p(e,t),value:e.result.icon,size:F.zc.SMALL,folderName:F.QS.Icon,mediaType:F.DD.Icon,color:e.result.color})})]},t.toString())))})}),(0,S.jsxs)(y.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>d(!0),children:[u.length>0&&(J||(J=(0,S.jsx)("span",{children:"Edit value mappings"}))),0===u.length&&(Y||(Y=(0,S.jsx)("span",{children:"Add value mappings"})))]}),(0,S.jsx)(L.u,{isOpen:l,title:"Value mappings",onDismiss:c,className:r.modal,closeOnBackdropClick:!1,children:(0,S.jsx)(U,{value:n,onChange:a,onClose:c,showIconPicker:o})})]})}));X.displayName="ValueMappingsEditor";const ee=e=>({modal:(0,h.css)({width:"980px"}),compactTable:(0,h.css)({width:"100%","tbody td":{padding:e.spacing(.5)}})});var te=n(71438);const ne=e=>{var t;let{value:n,onChange:a,item:i}=e;const{placeholder:r,isClearable:o}=null!==(t=null==i?void 0:i.settings)&&void 0!==t?t:{},l=(0,s.useCallback)((e=>{var t;a(null==e||null===(t=e.value)||void 0===t?void 0:t.uid)}),[a]);return(0,S.jsx)(te.o,{isClearable:o,defaultOptions:!0,onChange:l,placeholder:r,value:n})};var se=n(17375),ae=n(31319),ie=n(663),re=n(65678);const oe=e=>{var t,n,s;let{value:a,onChange:i,item:r,id:o}=e;const l=(0,x.l4)(),c=(0,x.wW)(de),u=(0,ae.QY)(null==a?void 0:a.mode),h=(null!==(t=r.settings)&&void 0!==t&&t.byValueSupport?ae.WO.list():ae.WO.list().filter((e=>!e.isByValue))).map((e=>{var t;let n=e.isByValue?" (by value)":"";return{value:e.id,label:`${e.name}${n}`,description:e.description,isContinuous:e.isContinuous,isByValue:e.isByValue,component:()=>t||(t=(0,S.jsx)(le,{mode:e,theme:l}))}})),p=e=>{i(Object.assign({},a,{mode:e.value}))},g=e=>{i(Object.assign({},a,{mode:f,fixedColor:e}))},m=e=>{i(Object.assign({},a,{mode:f,seriesBy:e}))},f=null!==(n=null==a?void 0:a.mode)&&void 0!==n?n:ie.S.Thresholds;if(f===ie.S.Fixed)return(0,S.jsxs)("div",{className:c.group,children:[(0,S.jsx)(B.Ph,{minMenuHeight:200,options:h,value:f,onChange:p,className:c.select,inputId:o}),(0,S.jsx)(se.B,{value:null==a?void 0:a.fixedColor,onChange:g})]});if(null!==(s=r.settings)&&void 0!==s&&s.bySeriesSupport&&u.isByValue){var v;const e=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{marginBottom:l.spacing(2)},children:(0,S.jsx)(B.Ph,{minMenuHeight:200,options:h,value:f,onChange:p,inputId:o})}),(0,S.jsx)(re.g,{label:"Color series by",children:(0,S.jsx)(d.S,{value:null!==(v=null==a?void 0:a.seriesBy)&&void 0!==v?v:"last",options:e,onChange:m})})]})}return(0,S.jsx)(B.Ph,{minMenuHeight:200,options:h,value:f,onChange:p,inputId:o})},le=e=>{let{mode:t,theme:n}=e;if(!t.getColors)return null;const s=t.getColors(n).map(n.visualization.getColorByName),a={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(t.isContinuous)a.background=`linear-gradient(90deg, ${s.join(",")})`;else{let e="",t="";for(let n=0;n<s.length;n++){const a=s[n];if(""===e)e=`linear-gradient(90deg, ${a} 0%`;else{const i=100*(n/(s.length-1));e+=`, ${t} ${i}%, ${a} ${i}%`}t=a}a.background=e}return(0,S.jsx)("div",{style:a})},de=e=>({group:h.css`
      display: flex;
    `,select:h.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var ce=n(66358),ue=n(21590);const he=e=>{let{value:t,onChange:n,context:s}=e;return(0,S.jsx)(ue.d,{links:t,onChange:n,data:s.data,getSuggestions:()=>s.getSuggestions?s.getSuggestions(ce.o.Values):[]})};function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ge extends s.PureComponent{constructor(){super(...arguments),pe(this,"state",{isLoading:!0,options:[]}),pe(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:n}=t;let s=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=n&&n.getOptions&&(s=await n.getOptions(this.props.context)),this.state.options!==s&&this.setState({isLoading:!1,options:s})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,n;const s=null===(t=e.item)||void 0===t?void 0:t.settings,a=null===(n=this.props.item)||void 0===n?void 0:n.settings;if(s!==a)this.updateOptions();else if(null!=a&&a.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:n,onChange:s,item:a}=this.props,{settings:i}=a;return(0,S.jsx)(B.NU,{isLoading:t,value:n,defaultValue:n,allowCustomValue:null==i?void 0:i.allowCustomValue,onChange:e=>{s(e.map((e=>e.value)).flatMap((e=>void 0!==e?[e]:[])))},options:e})}}var me=n(8773);function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ve extends s.PureComponent{constructor(){super(...arguments),fe(this,"state",{isLoading:!0,options:[]}),fe(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:n}=t;let s=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=n&&n.getOptions&&(s=await n.getOptions(this.props.context)),this.state.options!==s&&this.setState({isLoading:!1,options:s})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,n;const s=null===(t=e.item)||void 0===t?void 0:t.settings,a=null===(n=this.props.item)||void 0===n?void 0:n.settings;if(s!==a)this.updateOptions();else if(null!=a&&a.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:n,onChange:s,item:a}=this.props,{settings:i}=a;let r=e.find((e=>e.value===n));return!r&&n&&(r={label:`${n}`,value:n}),(0,S.jsx)(B.Ph,{isLoading:t,value:r,defaultValue:n,allowCustomValue:null==i?void 0:i.allowCustomValue,isClearable:null==i?void 0:i.isClearable,onChange:e=>s(null==e?void 0:e.value),options:e})}}var be=n(76497),xe=n(4116);const ye=e=>{var t,n;let{value:s,onChange:a,item:i,id:r}=e;return(0,S.jsx)(xe.m,{stats:s,onChange:a,allowMultiple:!(null===(t=i.settings)||void 0===t||!t.allowMultiple),defaultStat:null===(n=i.settings)||void 0===n?void 0:n.defaultStat,inputId:r})};var we,je=n(46272),Se=n(65737);function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ke extends s.PureComponent{constructor(){super(...arguments),Ce(this,"state",{showAdd:!1}),Ce(this,"onRemoveString",(e=>{const{value:t,onChange:n}=this.props,s=[...t];s.splice(e,1),n(s)})),Ce(this,"onValueChange",((e,t)=>{const n=e;if(e.hasOwnProperty("key")&&"Enter"!==n.key)return;const{value:s,onChange:a}=this.props,i=n.currentTarget.value.trim();if(t<0)return i&&(n.currentTarget.value="",a([...s,i])),void this.setState({showAdd:!1});if(!i)return this.onRemoveString(t);const r=[...s];r[t]=i,a(r)}))}render(){var e;const{value:t,item:n}=this.props,{showAdd:s}=this.state,a=Ne(Se.v.theme2),i=(null===(e=n.settings)||void 0===e?void 0:e.placeholder)||"Add text";return(0,S.jsxs)("div",{children:[t.map(((e,t)=>(0,S.jsx)(f.I,{className:a.textInput,defaultValue:e||"",onBlur:e=>this.onValueChange(e,t),onKeyDown:e=>this.onValueChange(e,t),suffix:(0,S.jsx)(M.J,{className:a.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(t)})},`${t}/${e}`))),s?(0,S.jsx)(f.I,{autoFocus:!0,className:a.textInput,placeholder:i,defaultValue:"",onBlur:e=>this.onValueChange(e,-1),onKeyDown:e=>this.onValueChange(e,-1),suffix:we||(we=(0,S.jsx)(M.J,{name:"plus-circle"}))}):(0,S.jsx)(y.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:i})]})}}const Ne=(0,j.B)((e=>({textInput:h.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${e.components.input.borderHover};
      }
    `,trashIcon:h.css`
      color: ${e.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `})));var Oe=n(76234);function Ie(e){var t;let{value:n,onChange:s,item:a}=e;const i=(0,x.wW)(Te);return null!=a&&null!==(t=a.settings)&&void 0!==t&&t.isClearable&&null!=n?(0,S.jsxs)("div",{className:i.wrapper,children:[(0,S.jsx)("span",{className:i.first,children:(0,S.jsx)(Oe.n,{value:n,onChange:s})}),(0,S.jsx)(b.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>s(void 0)})]}):(0,S.jsx)(Oe.n,{value:n,onChange:s})}const Te=e=>({wrapper:h.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:h.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),$e=["id"];const Re=()=>{const e={id:"number",name:"Number",description:"Allows numeric values input",editor:me.w},t={id:"slider",name:"Slider",description:"Allows numeric values input",editor:be.p},n={id:"text",name:"Text",description:"Allows string values input",editor:je.A},s={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:ge},a={id:"color",name:"Color",description:"Allows color selection",editor:e=>(0,S.jsx)(se.B,{value:e.value,onChange:e.onChange})},i={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:oe};return[n,e,t,{id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(e){const t=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,$e);return(0,S.jsx)(l.r,Object.assign({},t,{onChange:t=>e.onChange(t.currentTarget.checked)}))}},{id:"radio",name:"Radio",description:"Allows option selection",editor(e){var t;return(0,S.jsx)(d.S,Object.assign({},e,{options:null===(t=e.item.settings)||void 0===t?void 0:t.options}))}},{id:"select",name:"Select",description:"Allows option selection",editor:ve},{id:"unit",name:"Unit",description:"Allows unit input",editor:Ie},{id:"links",name:"Links",description:"Allows defining data links",editor:he},{id:"stats-picker",name:"Stats Picker",editor:ye,description:""},{id:"strings",name:"String array",description:"An array of strings",editor:ke},{id:"timezone",name:"Time zone",description:"Time zone selection",editor:c.O},i,a,s,{id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:u.b},{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ne},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:X},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:R}]},Pe=()=>{const e=["Standard options"],t={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:i.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:e},n={id:"unit",path:"unit",name:"Unit",description:"",editor:a.S.get("unit").editor,override:a.S.get("unit").editor,process:i.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:e},s={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:e=>e.type===r.fS.number,category:e},l={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:e=>e.type===r.fS.number,category:e},d={id:"decimals",path:"decimals",name:"Decimals",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:e=>e.type===r.fS.number,category:e},c={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:i.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:e},u={id:"links",path:"links",name:"Data links",editor:a.S.get("links").editor,override:a.S.get("links").editor,process:i.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:e=>e?e.length:0};return[n,s,l,d,t,{id:"color",path:"color",name:"Color scheme",editor:a.S.get("fieldColor").editor,override:a.S.get("fieldColor").editor,process:i.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:e},c,u,{id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:a.S.get("mappings").editor,override:a.S.get("mappings").editor,process:i.uj,settings:{},defaultValue:[],shouldApply:e=>e.type!==r.fS.time,category:["Value mappings"],getItemsCount:e=>e?e.length:0},{id:"thresholds",path:"thresholds",name:"Thresholds",editor:a.S.get("thresholds").editor,override:a.S.get("thresholds").editor,process:i.ZN,settings:{},defaultValue:{mode:o.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:e=>e?e.steps.length:0}]}},76497:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var s=n(52423),a=n(78966),i=n(27619),r=n(68404),o=n(16755),l=n(90754),d=n(92155),c=n(45916);const u=e=>{let{value:t,onChange:n,item:u}=e;const p=(0,r.useRef)(null),{settings:g}=u,m=(null==g?void 0:g.min)||0,f=(null==g?void 0:g.max)||100,v=null==g?void 0:g.step,b=(null==g?void 0:g.marks)||{[m]:m,[f]:f},x=null==g?void 0:g.included,y=null==g?void 0:g.ariaLabelForHandle,w=!0,j=(0,o.l4)(),[S,C]=(0,r.useState)(null!=t?t:m),[k,N]=(0,r.useState)(75);(0,r.useEffect)((()=>{null!=t&&t!==S&&C(t)}),[t,S]),(0,r.useEffect)((()=>{const e=getComputedStyle(p.current),t=e.getPropertyValue("font-weight")||"normal",n=e.getPropertyValue("font-size")||"16px",s=e.getPropertyValue("font-family")||"Arial",a=Math.max((f+(v||0)).toString().length,(f-(v||0)).toString().length)+4,i=function(e,t){const n=document.createElement("canvas").getContext("2d");if(n){n.font=t;return n.measureText(e).width}return null}("0".repeat(a),`${t} ${n} ${s}`);i&&N(i+16)}),[f,v]);const O=(0,r.useCallback)((e=>{const t="number"==typeof e?e:e[0];C(t),n&&n(t)}),[C,n]),I=(0,r.useCallback)((e=>{let t=e;!Number.isNaN(t)&&t||(t=0),C(t),n&&n(t)}),[n]),T=(0,l.W)(j,w,Boolean(b)),$=h(j,k),R=[];return(0,c.jsxs)("div",{className:(0,s.cx)(T.container,T.slider),children:[(0,c.jsx)(a.Global,{styles:T.slider}),(0,c.jsxs)("label",{className:(0,s.cx)(T.sliderInput,...R),children:[(0,c.jsx)(i.Z,{min:m,max:f,step:v,defaultValue:t,value:S,onChange:O,vertical:!1,reverse:!1,ariaLabelForHandle:y,marks:b,included:x}),(0,c.jsx)("span",{className:$.numberInputWrapper,ref:p,children:(0,c.jsx)(d.Y,{value:S,onChange:I,max:f,min:m,step:v})})]})]})};const h=(e,t)=>({numberInputWrapper:s.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${t}px;
      min-width: ${t}px;
      overflow: visible;
      width: 100%;
    `})},46272:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(68404),a=n(93194),i=n(4645),r=n(45916);const o=e=>{var t,n,o,l;let{value:d,onChange:c,item:u,suffix:h}=e;const p=null!==(t=u.settings)&&void 0!==t&&t.useTextarea?a.K:i.I,g=(0,s.useCallback)((e=>{let t=null!=d?d:"";if(e.hasOwnProperty("key")){var n;const s=e;"Enter"!==s.key||null!==(n=u.settings)&&void 0!==n&&n.useTextarea||(t=s.currentTarget.value.trim())}else{t=e.currentTarget.value.trim()}t!==d&&c(""===t?void 0:t)}),[d,null===(n=u.settings)||void 0===n?void 0:n.useTextarea,c]);return(0,r.jsx)(p,{placeholder:null===(o=u.settings)||void 0===o?void 0:o.placeholder,defaultValue:d||"",rows:(null===(l=u.settings)||void 0===l?void 0:l.useTextarea)&&u.settings.rows||5,onBlur:g,onKeyDown:g,suffix:h})}},37417:(e,t,n)=>{"use strict";n.d(t,{T:()=>x});var s=n(52423),a=(n(68404),n(97370)),i=n(65737),r=n(16755),o=n(22222),l=n(61533),d=n(50038),c=n(84640),u=n(45916);var h,p=n(71031);var g,m=n(49284),f=n(44780);const v=["navId","navModel","pageNav","children","className","toolbar","scrollRef","scrollTop","layout","renderTitle","subTitle","actions","info"];const b=e=>{let{navId:t,navModel:n,pageNav:i,children:c,className:h,toolbar:p,scrollRef:b,scrollTop:x,layout:w=a.Qz.Standard,renderTitle:j,subTitle:S,actions:C,info:k}=e,N=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,v);const O=(0,r.wW)(y),I=(0,m.P)(t,n);(0,f.T)(I,i);const T=null!=i?i:null==I?void 0:I.main;return(0,u.jsxs)("div",Object.assign({className:(0,s.cx)(O.wrapper,h)},N,{children:[w===a.Qz.Standard&&(0,u.jsx)(o.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:b,children:(0,u.jsxs)("div",{className:(0,s.cx)("page-scrollbar-content",h),children:[T&&(0,u.jsx)(d.m,{actions:C,info:k,navItem:T,renderTitle:j,subTitle:S}),c,g||(g=(0,u.jsx)(l.$_,{}))]})}),w===a.Qz.Canvas&&(0,u.jsxs)(u.Fragment,{children:[p,(0,u.jsx)("div",{className:O.scrollWrapper,children:(0,u.jsx)(o.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:b,children:(0,u.jsx)("div",{className:(0,s.cx)(O.content,!p&&O.contentWithoutToolbar),children:c})})})]}),w===a.Qz.Custom&&(0,u.jsxs)(u.Fragment,{children:[p,c]})]}))};b.Contents=e=>{let{isLoading:t,children:n,className:a}=e;return(0,u.jsx)("div",{className:(0,s.cx)("page-container","page-body",a),children:t?h||(h=(0,u.jsx)(p.Z,{})):n})},b.OldNavOnly=function(e){let{children:t}=e;return(0,u.jsx)(u.Fragment,{children:t})};const x=i.v.featureToggles.topnav?c.T:b,y=e=>({wrapper:(0,s.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,s.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,s.css)({display:"flex",flexDirection:"column",padding:e.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,s.css)({padding:e.spacing(2)})})},49284:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var s=n(58565),a=n(85829),i=n(63454),r=n(64850);function o(e,t){return t||(e&&i.h?(0,r.v9)((0,s.P1)(l,(t=>(0,a.ht)(t,null!=e?e:"home")))):void 0)}function l(e){return e.navIndex}},44780:(e,t,n)=>{"use strict";n.d(t,{T:()=>l});var s=n(68404),a=n(33994),i=n(64850),r=n(65632),o=n(61348);function l(e,t){var n;const l=null===(n=(0,i.v9)((e=>e.navIndex)))||void 0===n?void 0:n[a.Qz];(0,s.useEffect)((()=>{var n;const s=null!==(n=(null==e?void 0:e.node)!==(null==e?void 0:e.main)?null==e?void 0:e.node:null==e?void 0:e.main)&&void 0!==n?n:{text:"Grafana"},a=(0,o.t)(s,t,l).map((e=>e.text)).reverse();a[a.length-1]=r.c.AppTitle,document.title=a.join(" - ")}),[l,e,t])}},50038:(e,t,n)=>{"use strict";n.d(t,{m:()=>m});var s=n(52423),a=(n(68404),n(10453)),i=n(87152),r=n(16755),o=n(42454),l=n(99500),d=n(73320),c=n(47199),u=n(53277),h=n(45916);const p=e=>{let{children:t,customCss:n}=e;if(!t||0===t.length)return null;const s=t.find((e=>!0===e.active));return(0,h.jsx)("div",{className:`gf-form-select-wrapper width-20 ${n}`,children:(0,h.jsxs)("div",{className:"dropdown",children:[(0,h.jsx)("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"},children:null==s?void 0:s.text}),(0,h.jsx)("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu",children:t.map((e=>e.hideFromTabs?null:(0,h.jsx)(d.u,{iconClassName:e.icon,text:e.text,href:e.url},e.url)))})]})})},g=e=>{let{children:t}=e;return t&&0!==t.length?(0,h.jsxs)("nav",{children:[(0,h.jsx)(p,{customCss:"page-header__select-nav",children:t}),(0,h.jsx)(a.J,{className:"page-header__tabs",hideBorder:!0,children:t.map(((e,t)=>!e.hideFromTabs&&(0,h.jsx)(i.O,{label:e.text,active:e.active,icon:e.icon,href:e.url,suffix:e.tabSuffix},`${e.url}-${t}`)))})]}):null},m=e=>{var t;let{navItem:n,renderTitle:a,actions:i,info:d,subTitle:u}=e;const p=(0,r.wW)(v);if(!n)return null;return(0,h.jsx)("div",{className:p.headerCanvas,children:(0,h.jsx)("div",{className:"page-container",children:(0,h.jsxs)("div",{className:"page-header",children:[(e=>{var n;const r="grafana"===e.icon?12:14,g=e.icon&&(0,o.iJ)(e.icon),m=null!=u?u:e.subTitle;return(0,h.jsxs)("div",{className:"page-header__inner",children:[(0,h.jsxs)("span",{className:"page-header__logo",children:[g&&(0,h.jsx)(l.J,{name:g,size:"xxxl",style:{marginTop:r}}),e.img&&(0,h.jsx)("img",{className:"page-header__img",src:e.img,alt:`logo of ${e.text}`})]}),(0,h.jsxs)("div",{className:(0,s.cx)("page-header__info-block",p.headerText),children:[a?a(e.text):f(e.text,null!==(n=e.breadcrumbs)&&void 0!==n?n:[],e.highlightText),d&&(t||(t=(0,h.jsx)(c.S,{info:d}))),m&&(0,h.jsx)("div",{className:"page-header__sub-title",children:m}),i&&(0,h.jsx)("div",{className:p.actions,children:i})]})]})})(n),n.children&&n.children.length>0&&(0,h.jsx)(g,{children:n.children})]})})})};function f(e,t,n){if(!(e||t&&0!==t.length))return null;if(!t||0===t.length)return(0,h.jsxs)("h1",{className:"page-header__title",children:[e,n&&(0,h.jsx)(u.Z,{text:n,className:s.css`
              vertical-align: middle;
            `})]});const a=[];for(const e of t)e.url?a.push((0,h.jsx)("a",{className:"page-header__link",href:e.url,children:e.title},a.length)):a.push((0,h.jsxs)("span",{children:[" / ",e.title]},a.length));return a.push((0,h.jsxs)("span",{children:[" / ",e]},t.length+1)),(0,h.jsx)("h1",{className:"page-header__title",children:a})}const v=e=>({actions:(0,s.css)({display:"flex",flexDirection:"row",gap:e.spacing(1)}),headerText:(0,s.css)({display:"flex",flexDirection:"column",gap:e.spacing(1)}),headerCanvas:s.css`
    background: ${e.colors.background.canvas};
  `})},47199:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var s=n(52423),a=n(68404),i=n(16755),r=n(45916);function o(e){let{info:t}=e;const n=(0,i.wW)(l);return(0,r.jsx)("div",{className:n.container,children:t.map(((e,s)=>(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("div",{className:n.infoItem,children:[(0,r.jsx)("div",{className:n.label,children:e.label}),e.value]}),s+1<t.length&&(0,r.jsx)("div",{"data-testid":"page-info-separator",className:n.separator})]},s)))})}const l=e=>({container:(0,s.css)({display:"flex",flexDirection:"row",gap:e.spacing(1.5),overflow:"auto"}),infoItem:(0,s.css)(Object.assign({},e.typography.bodySmall,{display:"flex",flexDirection:"column",gap:e.spacing(.5)})),label:(0,s.css)({color:e.colors.text.secondary}),separator:(0,s.css)({borderLeft:`1px solid ${e.colors.border.weak}`})})},71031:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(68404);var s=n(38953),a=n(45916);const i=e=>{let{pageName:t=""}=e;const n=`Loading ${t}...`;return(0,a.jsx)("div",{className:"page-loader-wrapper",children:(0,a.jsx)(s.u,{text:n})})}},84640:(e,t,n)=>{"use strict";n.d(t,{T:()=>E});var s,a=n(52423),i=n(68404),r=n(97370),o=n(16755),l=n(22222),d=n(39321),c=n(61533),u=n(49284),h=n(44780),p=n(71031),g=n(45916);var m=n(61264),f=n(47199);function v(e){var t,n;let{navItem:s,renderTitle:a,actions:i,info:r,subTitle:l}=e;const d=(0,o.wW)(b),c=null!==(t=null!=l?l:(0,m.L)(s.id))&&void 0!==t?t:s.subTitle,u=null!==(n=(0,m.Y)(s.id))&&void 0!==n?n:s.text,h=a?a(u):(0,g.jsx)("h1",{className:d.pageTitle,children:u});return(0,g.jsxs)("div",{className:d.pageHeader,children:[(0,g.jsxs)("div",{className:d.topRow,children:[(0,g.jsxs)("div",{className:d.titleInfoContainer,children:[(0,g.jsxs)("div",{className:d.title,children:[s.img&&(0,g.jsx)("img",{className:d.img,src:s.img,alt:`logo for ${s.text}`}),h]}),r&&(0,g.jsx)(f.S,{info:r})]}),(0,g.jsx)("div",{className:d.actions,children:i})]}),c&&(0,g.jsx)("div",{className:d.subTitle,children:c})]})}const b=e=>({topRow:(0,a.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:e.spacing(1,2)}),title:(0,a.css)({display:"flex",flexDirection:"row"}),actions:(0,a.css)({display:"flex",flexDirection:"row",gap:e.spacing(1)}),titleInfoContainer:(0,a.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:e.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,a.css)({label:"page-header",display:"flex",flexDirection:"column",gap:e.spacing(1),marginBottom:e.spacing(2)}),pageTitle:(0,a.css)({display:"flex",marginBottom:0}),subTitle:(0,a.css)({position:"relative",color:e.colors.text.secondary}),img:(0,a.css)({width:"32px",height:"32px",marginRight:e.spacing(2)})});var x=n(10453),y=n(42454),w=n(87152);function j(e){let{navItem:t}=e;const n=(0,o.wW)(S);return(0,g.jsx)("div",{className:n.tabsWrapper,children:(0,g.jsx)(x.J,{children:t.children.map(((e,t)=>{const n=e.icon?(0,y.iJ)(e.icon):void 0;return!e.hideFromTabs&&(0,g.jsx)(w.O,{label:e.text,active:e.active,icon:n,href:e.url,suffix:e.tabSuffix},`${e.url}-${t}`)}))})})}const S=e=>({tabsWrapper:(0,a.css)({paddingBottom:e.spacing(3)})});var C=n(53257),k=n(25004),N=n(99500);function O(e){var t,n,s;let{item:i,isSectionRoot:r=!1}=e;const l=(0,o.wW)(I),d=null===(t=i.children)||void 0===t?void 0:t.filter((e=>!e.hideFromTabs)),c=Boolean((null==d?void 0:d.length)&&d.find((e=>e.active))),u=r&&Boolean(null===(n=i.children[0].children)||void 0===n?void 0:n.length),h=(0,a.cx)({[l.link]:!0,[l.activeStyle]:i.active,[l.isSection]:Boolean(null==d?void 0:d.length)||i.isSection,[l.hasActiveChild]:c,[l.isSectionRoot]:r,[l.noRootMargin]:u});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("a",{href:i.url,className:h,"aria-label":k.wl.components.Tab.title(i.text),role:"tab","aria-selected":i.active,children:[r&&i.icon&&(0,g.jsx)(N.J,{name:i.icon}),r&&i.img&&(0,g.jsx)("img",{className:l.sectionImg,src:i.img,alt:`logo of ${i.text}`}),null!==(s=(0,m.Y)(i.id))&&void 0!==s?s:i.text,i.tabSuffix&&(0,g.jsx)(i.tabSuffix,{className:l.suffix})]}),null==d?void 0:d.map(((e,t)=>(0,g.jsx)(O,{item:e},t)))]})}const I=e=>({link:a.css`
      padding: ${e.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${e.shape.borderRadius(2)};
      gap: ${e.spacing(1)};
      height: 100%;
      position: relative;
      color: ${e.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:a.css`
      label: activeTabStyle;
      color: ${e.colors.text.primary};
      background: ${e.colors.emphasize(e.colors.background.canvas,.03)};
      font-weight: ${e.typography.fontWeightMedium};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: ${e.colors.gradients.brandVertical};
      }
    `,suffix:a.css`
      margin-left: ${e.spacing(1)};
    `,sectionImg:(0,a.css)({height:18}),isSectionRoot:(0,a.css)({color:e.colors.text.primary,fontSize:e.typography.h4.fontSize,marginTop:0,marginBottom:e.spacing(2),fontWeight:e.typography.fontWeightMedium}),isSection:(0,a.css)({fontSize:e.typography.h5.fontSize,marginTop:e.spacing(2),fontWeight:e.typography.fontWeightMedium}),noRootMargin:(0,a.css)({marginBottom:0}),hasActiveChild:(0,a.css)({color:e.colors.text.primary})});var T=n(9085),$=n.n(T),R=n(23734);const P=e=>{let{className:t,isExpanded:n,onClick:s}=e;const a=(0,o.l4)(),i=D(a);return(0,g.jsx)(R.h,{tooltip:"Toggle section navigation","aria-label":n?"Close section navigation":"Open section navigation",name:n?"angle-left":"angle-right",className:$()(t,i.icon),size:"xl",onClick:s})};P.displayName="SectionNavToggle";const D=e=>({icon:(0,a.css)({backgroundColor:e.colors.background.secondary,border:`1px solid ${e.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:1})});function A(e){var t,n;let{model:s}=e;const r=(0,o.wW)(M),{isExpanded:d,onToggleSectionNav:c}=function(){const e=(0,o.l4)(),t=window.matchMedia(`(max-width: ${e.breakpoints.values.lg}px)`).matches,[n,s]=(0,C.Z)("grafana.sectionNav.expanded",!t),[a,r]=(0,i.useState)(!t&&n);(0,i.useEffect)((()=>{const t=window.matchMedia(`(max-width: ${e.breakpoints.values.lg}px)`),s=e=>r(!e.matches&&n);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)}),[n,e.breakpoints.values.lg]);return{isExpanded:a,onToggleSectionNav:()=>{s(!a),r(!a)}}}();return Boolean(null===(t=s.main)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("nav",{className:(0,a.cx)(r.nav,{[r.navExpanded]:d}),children:(0,g.jsx)(l.$,{showScrollIndicators:!0,children:(0,g.jsx)("div",{className:r.items,role:"tablist",children:(0,g.jsx)(O,{item:s.main,isSectionRoot:!0})})})}),(0,g.jsx)(P,{className:r.collapseIcon,isExpanded:Boolean(d),onClick:c})]}):null}const M=e=>({nav:(0,a.css)({display:"flex",flexDirection:"column",background:e.colors.background.canvas,flexShrink:0,transition:e.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[e.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,a.css)({maxHeight:"50vh",visibility:"visible",[e.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,a.css)({display:"flex",flexDirection:"column",padding:e.spacing(2,1,2,2),minWidth:"250px",[e.breakpoints.up("md")]:{padding:e.spacing(4.5,1,2,2)}}),collapseIcon:(0,a.css)({border:`1px solid ${e.colors.border.weak}`,left:"50%",transform:"translate(-50%, 50%) rotate(90deg)",top:e.spacing(0),[e.breakpoints.up("md")]:{transform:"translateX(50%)",top:e.spacing(8),left:e.spacing(1),right:e.spacing(-1)}})});var L;const F=["navId","navModel","pageNav","renderTitle","actions","subTitle","children","className","info","layout","toolbar","scrollTop","scrollRef"];const E=e=>{let{navId:t,navModel:n,pageNav:s,renderTitle:p,actions:m,subTitle:f,children:b,className:x,info:y,layout:w=r.Qz.Standard,toolbar:S,scrollTop:C,scrollRef:k}=e,N=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,F);const O=(0,o.wW)(V),I=(0,u.P)(t,n),{chrome:T}=(0,d.p)();(0,h.T)(I,s);const $=null!=s?s:null==I?void 0:I.node;return(0,i.useEffect)((()=>{I&&T.update({sectionNav:I.node,pageNav:s})}),[I,s,T]),(0,g.jsxs)("div",Object.assign({className:(0,a.cx)(O.wrapper,x)},N,{children:[w===r.Qz.Standard&&(0,g.jsxs)("div",{className:O.panes,children:[I&&(0,g.jsx)(A,{model:I}),(0,g.jsx)("div",{className:O.pageContainer,children:(0,g.jsxs)(l.$,{autoHeightMin:"100%",scrollTop:C,scrollRefCallback:k,children:[(0,g.jsxs)("div",{className:O.pageInner,children:[$&&(0,g.jsx)(v,{actions:m,navItem:$,renderTitle:p,info:y,subTitle:f}),s&&s.children&&(0,g.jsx)(j,{navItem:s}),(0,g.jsx)("div",{className:O.pageContent,children:b})]}),L||(L=(0,g.jsx)(c.$_,{}))]})})]}),w===r.Qz.Canvas&&(0,g.jsx)(l.$,{autoHeightMin:"100%",scrollTop:C,scrollRefCallback:k,children:(0,g.jsxs)("div",{className:O.canvasContent,children:[S,b]})}),w===r.Qz.Custom&&(0,g.jsxs)(g.Fragment,{children:[S,b]})]}))};E.Contents=e=>{let{isLoading:t,children:n,className:a}=e,i=a?(0,g.jsx)("div",{className:a,children:n}):n;return(0,g.jsx)(g.Fragment,{children:t?s||(s=(0,g.jsx)(p.Z,{})):i})},E.OldNavOnly=function(){return null};const V=e=>{const t=e.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:(0,a.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,a.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,a.css)({label:"page-container",flexGrow:1}),pageContent:(0,a.css)({label:"page-content",flexGrow:1}),pageInner:(0,a.css)({label:"page-inner",padding:e.spacing(2),boxShadow:t,background:e.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:e.spacing(0,0,0,0),[e.breakpoints.up("sm")]:{margin:e.spacing(0,1,1,1)},[e.breakpoints.up("md")]:{margin:e.spacing(2,2,2,1),padding:e.spacing(3)}}),canvasContent:(0,a.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:e.spacing(2),flexBasis:"100%",flexGrow:1})}}},96961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(68404),a=n(25004),i=n(4645),r=n(23734),o=n(45916);const l=["autoComplete","autoFocus","id","passwordHint"];const d=s.forwardRef(((e,t)=>{let{autoComplete:n,autoFocus:d,id:c,passwordHint:u}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const[p,g]=(0,s.useState)(!1);return(0,o.jsx)(i.I,Object.assign({id:c,autoFocus:d,autoComplete:n},h,{type:p?"text":"password",placeholder:u,"aria-label":a.wl.pages.Login.password,ref:t,suffix:(0,o.jsx)(r.h,{name:p?"eye-slash":"eye",type:"button","aria-controls":c,role:"switch","aria-checked":p,"aria-label":"Show password",onClick:()=>{g(!p)}})}))}));d.displayName="PasswordField"},85112:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var s,a=n(52423),i=n(68404),r=n(3218),o=n(54761),l=n(70917),d=n(8006),c=n(50191),u=n(36259),h=n(15082),p=n(46782),g=n(23539),m=n(26006),f=n(45916);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends i.Component{constructor(e){super(e),v(this,"onTypeChanged",(e=>{const t=e.value;switch(t){case g.pC.User:case g.pC.Team:this.setState({type:t,userId:0,teamId:0,role:void 0});break;case g.pC.Editor:this.setState({type:t,userId:0,teamId:0,role:g.B5.Editor});break;case g.pC.Viewer:this.setState({type:t,userId:0,teamId:0,role:g.B5.Viewer})}})),v(this,"onUserSelected",(e=>{this.setState({userId:e&&!Array.isArray(e)?e.id:0})})),v(this,"onTeamSelected",(e=>{var t;this.setState({teamId:null!==(t=e.value)&&void 0!==t&&t.id&&!Array.isArray(e.value)?e.value.id:0})})),v(this,"onPermissionChanged",(e=>{this.setState({permission:e.value})})),v(this,"onSubmit",(async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())})),this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:g.pC.Team,permission:g.V5.View}}isValid(){switch(this.state.type){case g.pC.Team:return this.state.teamId>0;case g.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:e}=this.props,t=this.state,n="min-width-20",a=this.isValid(),i=x(p.ZP.theme2);return(0,f.jsxs)("div",{className:"cta-form",children:[(0,f.jsx)(m.P,{onClick:e}),s||(s=(0,f.jsx)("h5",{children:"Add Permission For"})),(0,f.jsx)(r.l,{maxWidth:"none",onSubmit:this.onSubmit,children:()=>(0,f.jsxs)(o.Lh,{children:[(0,f.jsx)(l.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:g.BL,onChange:this.onTypeChanged}),t.type===g.pC.User?(0,f.jsx)(h.f,{onSelected:this.onUserSelected,className:n}):null,t.type===g.pC.Team?(0,f.jsx)(u.c,{onSelected:this.onTeamSelected,className:n}):null,(0,f.jsx)("span",{className:i.label,children:"Can"}),(0,f.jsx)(l.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:g.vT,onChange:this.onPermissionChanged,width:25}),(0,f.jsx)(d.zx,{"data-save-permission":!0,type:"submit",disabled:!a,children:"Save"})]})})]})}}v(b,"defaultProps",{showPermissionLevels:!0});const x=(0,c.B)((e=>({label:a.css`
    color: ${e.colors.primary.text};
    font-weight: bold;
  `}))),y=b},99857:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var s,a,i,r,o,l,d,c,u,h,p,g=n(68404),m=n(99500),f=n(70917),v=n(8006),b=n(23539),x=n(45916);class y extends g.Component{render(){const{item:e}=this.props,t=b.vT.find((t=>t.value===e.permission));return(0,x.jsxs)("tr",{className:"gf-form-disabled",children:[(0,x.jsx)("td",{style:{width:"1%"},children:s||(s=(0,x.jsx)(m.J,{size:"lg",name:"shield"}))}),(0,x.jsxs)("td",{style:{width:"90%"},children:[e.name,a||(a=(0,x.jsx)("span",{className:"filter-table__weak-italic",children:" (Role)"}))]}),i||(i=(0,x.jsx)("td",{})),r||(r=(0,x.jsx)("td",{className:"query-keyword",children:"Can"})),(0,x.jsx)("td",{children:(0,x.jsx)("div",{className:"gf-form",children:(0,x.jsx)(f.Ph,{"aria-label":`Permission level for "${e.name}"`,options:b.vT,onChange:()=>{},disabled:!0,value:t})})}),(0,x.jsx)("td",{children:(0,x.jsx)(v.zx,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",icon:"lock",disabled:!0})})]})}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){let{item:t}=e;return t.userAvatarUrl?(0,x.jsx)("img",{className:"filter-table__avatar",src:t.userAvatarUrl,alt:"User avatar"}):t.teamAvatarUrl?(0,x.jsx)("img",{className:"filter-table__avatar",src:t.teamAvatarUrl,alt:"Team avatar"}):"Editor"===t.role?o||(o=(0,x.jsx)(m.J,{size:"lg",name:"edit"})):l||(l=(0,x.jsx)(m.J,{size:"lg",name:"eye"}))}function S(e){let{item:t}=e;return t.userId?d||(d=(0,x.jsx)("span",{className:"filter-table__weak-italic",children:"(User)"})):t.teamId?c||(c=(0,x.jsx)("span",{className:"filter-table__weak-italic",children:"(Team)"})):u||(u=(0,x.jsx)("span",{className:"filter-table__weak-italic",children:"(Role)"}))}class C extends g.PureComponent{constructor(){super(...arguments),w(this,"onPermissionChanged",(e=>{this.props.onPermissionChanged(this.props.item,e.value)})),w(this,"onRemoveItem",(()=>{this.props.onRemoveItem(this.props.item)}))}render(){const{item:e,folderInfo:t}=this.props,n=-1===e.dashboardId&&!e.inherited,s=b.vT.find((t=>t.value===e.permission));return(0,x.jsxs)("tr",{className:(a=Boolean(null==e?void 0:e.inherited),a?"gf-form-disabled":""),children:[(0,x.jsx)("td",{style:{width:"1%"},children:(0,x.jsx)(j,{item:e})}),(0,x.jsxs)("td",{style:{width:"90%"},children:[e.name," ",(0,x.jsx)(S,{item:e})]}),(0,x.jsxs)("td",{children:[e.inherited&&t&&(0,x.jsxs)("em",{className:"muted no-wrap",children:["Inherited from folder"," ",t.canViewFolderPermissions?(0,x.jsx)("a",{className:"text-link",href:`${t.url}/permissions`,children:t.title}):t.title]}),n&&(h||(h=(0,x.jsx)("em",{className:"muted no-wrap",children:"Default Permission"})))]}),p||(p=(0,x.jsx)("td",{className:"query-keyword",children:"Can"})),(0,x.jsx)("td",{children:(0,x.jsx)(f.Ph,{"aria-label":`Permission level for "${e.name}"`,isSearchable:!1,options:b.vT,onChange:this.onPermissionChanged,disabled:e.inherited,value:s,width:25})}),(0,x.jsx)("td",{children:e.inherited?(0,x.jsx)(v.zx,{"aria-label":`Remove permission for "${e.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):(0,x.jsx)(v.zx,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})})]});var a}}var k,N;class O extends g.PureComponent{render(){const{items:e,onRemoveItem:t,onPermissionChanged:n,isFetching:s,folderInfo:a}=this.props;return(0,x.jsx)("table",{className:"filter-table gf-form-group",children:(0,x.jsxs)("tbody",{children:[(0,x.jsx)(y,{item:{name:"Admin",permission:4}},0),e.map(((e,s)=>(0,x.jsx)(C,{item:e,onRemoveItem:t,onPermissionChanged:n,folderInfo:a},s+1))),!0===s&&e.length<1?k||(k=(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:4,children:(0,x.jsx)("em",{children:"Loading permissions..."})})})):null,!1===s&&e.length<1?N||(N=(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:4,children:(0,x.jsx)("em",{children:"No permissions are set. Will only be accessible by admins."})})})):null]})})}}const I=O},8129:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(68404);var s,a=n(45916);const i=()=>s||(s=(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{children:"What are Permissions?"}),(0,a.jsx)("p",{children:"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."})]}))},86495:(e,t,n)=>{"use strict";n.d(t,{h:()=>d});var s=n(52423),a=n(68404),i=n(42870),r=n(16755),o=n(45916);const l=["className","children","markdown","onRemove"];const d=a.memo(a.forwardRef(((e,t)=>{let{className:n,children:a,markdown:i}=e,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const h=(0,r.wW)(u);return(0,o.jsxs)("div",Object.assign({className:(0,s.cx)(h.wrapper,n)},d,{ref:t,children:[i&&c(i),a]}))})));function c(e){const t=(0,i.a)(e);return(0,o.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:t}})}d.displayName="OperationRowHelp";const u=e=>{const t=e.shape.borderRadius();return{wrapper:s.css`
      padding: ${e.spacing(2)};
      border: 2px solid ${e.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${t} ${t};
      position: relative;
      top: -4px;
    `}}},9735:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var s=n(52423),a=(n(68404),n(25004)),i=n(16755),r=n(23734),o=n(45916);const l=e=>{let{icon:t,active:n,disabled:l,title:c,onClick:u}=e;const h=(0,i.wW)(d);return(0,o.jsx)("div",{className:(0,s.cx)(h.icon,n&&h.active),children:(0,o.jsx)(r.h,{name:t,tooltip:c,className:h.icon,disabled:!!l,onClick:u,type:"button","aria-label":a.wl.components.QueryEditorRow.actionButton(c)})})};l.displayName="QueryOperationAction";const d=e=>({icon:s.css`
      display: flex;
      position: relative;
      color: ${e.colors.text.secondary};
    `,active:s.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `})},17690:(e,t,n)=>{"use strict";n.d(t,{t:()=>m});var s=n(52423),a=n(68404),i=n(19677),r=n(56330),o=n(31181),l=n(16755),d=n(32714),c=n(23734),u=n(99500),h=n(45916);const p=e=>{let{actionsElement:t,disabled:n,draggable:a,dragHandleProps:i,headerElement:r,isContentVisible:o,onRowToggle:d,reportDragMousePosition:p,titleElement:m,id:f}=e;const v=(0,l.wW)(g);return(0,h.jsxs)("div",{className:v.header,children:[(0,h.jsxs)("div",{className:v.column,children:[(0,h.jsx)(c.h,{name:o?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:v.collapseIcon,onClick:d,type:"button","aria-expanded":o,"aria-controls":f}),m&&(0,h.jsx)("div",{className:v.titleWrapper,onClick:d,"aria-label":"Query operation row title",children:(0,h.jsx)("div",{className:(0,s.cx)(v.title,n&&v.disabled),children:m})}),r]}),(0,h.jsxs)("div",{className:v.column,children:[t,a&&(0,h.jsx)(u.J,Object.assign({title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:v.dragIcon,onMouseMove:p},i))]})]})},g=e=>({header:s.css`
    label: Header;
    padding: ${e.spacing(.5,.5)};
    border-radius: ${e.shape.borderRadius(1)};
    background: ${e.colors.background.secondary};
    min-height: ${e.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:s.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:s.css`
    cursor: grab;
    color: ${e.colors.text.disabled};
    margin: ${e.spacing(0,.5)};
    &:hover {
      color: ${e.colors.text};
    }
  `,collapseIcon:s.css`
    margin-left: ${e.spacing(.5)};
    color: ${e.colors.text.disabled};
    }
  `,titleWrapper:s.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${e.spacing(.5)};
  `,title:s.css`
    font-weight: ${e.typography.fontWeightBold};
    color: ${e.colors.text.link};
    margin-left: ${e.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:s.css`
    color: ${e.colors.text.disabled};
  `});function m(e){let{children:t,actions:n,title:s,headerElement:c,onClose:u,onOpen:g,isOpen:m,disabled:v,draggable:b,index:x,id:y}=e;const[w,j]=(0,a.useState)(void 0===m||m),S=(0,l.wW)(f),C=(0,a.useCallback)((()=>{j(!w)}),[w,j]),k=(0,a.useCallback)((e=>{if(e.defaultPrevented){const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top;(0,o.ff)("query_row_reorder_drag_position",{x:n/t.width,y:s/t.height,width:t.width,height:t.height})}}),[]);(0,r.Z)((()=>{w?g&&g():u&&u()}),[w]);const N={isOpen:w,onOpen:()=>{j(!0)},onClose:()=>{j(!1)}},O=s&&d.renderOrCallToRender(s,N),I=n&&d.renderOrCallToRender(n,N),T=c&&d.renderOrCallToRender(c,N);return b?(0,h.jsx)(i._l,{draggableId:y,index:x,children:e=>(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",Object.assign({ref:e.innerRef,className:S.wrapper},e.draggableProps,{children:[(0,h.jsx)("div",{children:(0,h.jsx)(p,{id:y,actionsElement:I,disabled:v,draggable:!0,dragHandleProps:e.dragHandleProps,headerElement:T,isContentVisible:w,onRowToggle:C,reportDragMousePosition:k,titleElement:O})}),w&&(0,h.jsx)("div",{className:S.content,children:t})]}))})}):(0,h.jsxs)("div",{className:S.wrapper,children:[(0,h.jsx)(p,{id:y,actionsElement:I,disabled:v,draggable:!1,headerElement:T,isContentVisible:w,onRowToggle:C,reportDragMousePosition:k,titleElement:O}),w&&(0,h.jsx)("div",{className:S.content,children:t})]})}p.displayName="QueryOperationRowHeader";const f=e=>({wrapper:s.css`
      margin-bottom: ${e.spacing(2)};
    `,content:s.css`
      margin-top: ${e.spacing(.5)};
      margin-left: ${e.spacing(3)};
    `});m.displayName="QueryOperationRow"},81135:(e,t,n)=>{"use strict";n.d(t,{I:()=>G});var s=n(68404),a=n(54761),i=n(81691),r=n(55910),o=n(52423),l=n(16755),d=n(99500),c=n(21888),u=n(4645),h=n(50578),p=n(58906),g=n(68570),m=n(45916);const f=(0,s.forwardRef)(((e,t)=>{let{children:n,iconName:s}=e;const a=(0,l.wW)(v);return(0,m.jsxs)("div",{className:a.container,ref:t,children:[s&&(0,m.jsx)(d.J,{name:s,size:"xs"}),n]})}));f.displayName="ValueContainer";const v=e=>{const{prefix:t}=(0,u.H)({theme:e}),{multiValueContainer:n}=(0,g.D)(e);return{container:(0,o.cx)(t,n,o.css`
        position: relative;
        padding: ${e.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${e.spacing(.5)};
        }
      `)}},b=360;var x;const y=["appliedRoles","basicRole","disabled","isFocused","query","showBasicRole","onOpen","onClose","onQueryChange"];const w=e=>e.stopPropagation(),j=e=>{let{appliedRoles:t,basicRole:n,disabled:a,isFocused:i,query:r,showBasicRole:c,onOpen:u,onClose:h,onQueryChange:p}=e,g=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,y);const v=(0,l.wW)((e=>C(e,!1,!!i,!!a,!1))),b=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e;i&&(null===(e=b.current)||void 0===e||e.focus())}));const x=t.length;return i?(0,m.jsxs)("div",{className:v.wrapper,children:[c&&(0,m.jsx)(f,{children:n}),t.map((e=>(0,m.jsx)(f,{children:e.displayName},e.uid))),!a&&(0,m.jsx)("input",Object.assign({},g,{className:v.input,ref:b,onMouseDown:w,onChange:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;p(n)},"data-testid":"role-picker-input",placeholder:i?"Select role":"",value:r})),(0,m.jsx)("div",{className:v.suffix,children:(0,m.jsx)(d.J,{name:"angle-up",className:v.dropdownIndicator,onMouseDown:h})})]}):(0,m.jsxs)("div",{className:(0,o.cx)(v.wrapper,v.selectedRoles),onMouseDown:u,children:[c&&(0,m.jsx)(f,{children:n}),(0,m.jsx)(S,{appliedRoles:t,numberOfRoles:x,showBuiltInRole:c})]})};j.displayName="RolePickerInput";const S=e=>{let{showBuiltInRole:t,numberOfRoles:n,appliedRoles:s}=e;const a=(0,l.wW)((e=>k(e)));return(0,m.jsx)(m.Fragment,{children:n?(0,m.jsx)(c.u,{content:(0,m.jsx)("div",{className:a.tooltip,children:null==s?void 0:s.map((e=>(0,m.jsx)("p",{children:e.displayName},e.uid)))}),children:(0,m.jsx)(f,{children:`${t?"+":""}${n} role${n>1?"s":""}`})}):!t&&(x||(x=(0,m.jsx)(f,{children:"No roles assigned"})))})},C=(e,t,n,s,a)=>{const i=(0,u.H)({theme:e,invalid:t});return{wrapper:(0,o.cx)(i.wrapper,(0,h.RK)(e,t),n&&o.css`
          ${p.focusCss(e.v1)}
        `,s&&i.inputDisabled,o.css`
        min-width: ${b}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,a&&o.css`
          padding-left: 0;
        `),input:(0,o.cx)((0,h.RK)(e,t),o.css`
        max-width: 120px;
        border: none;
        cursor: ${n?"default":"pointer"};
      `),suffix:i.suffix,dropdownIndicator:o.css`
      cursor: pointer;
    `,selectedRoles:o.css`
      display: flex;
      align-items: center;
      cursor: ${s?"not-allowed":"pointer"};
    `,tooltip:o.css`
      p {
        margin-bottom: ${e.spacing(.5)};
      }
    `}},k=e=>({tooltip:o.css`
    p {
      margin-bottom: ${e.spacing(.5)};
    }
  `});var N,O=n(22222),I=n(37625),T=n(8006),$=n(12310),R=n(48717),P=n(64850);!function(e){e.fixed="fixed",e.custom="custom"}(N||(N={}));const D=Object.values(P.B5).map((e=>({label:e,value:e}))),A={ldap:"LDAP",current:"Current org"},M=e=>{let{basicRole:t,options:n,appliedRoles:i,showGroups:r,basicRoleDisabled:d,showBasicRole:c,onSelect:u,onBasicRoleSelect:h,onUpdate:p,updateDisabled:f,offset:v,apply:b}=e;const[x,y]=(0,s.useState)(i),[w,j]=(0,s.useState)(t),[S,C]=(0,s.useState)(!1),[k,$]=(0,s.useState)(""),[R,P]=(0,s.useState)([]),A=(0,s.useRef)(null),M=(0,l.l4)(),W=(0,g.D)(M),Z=(0,l.wW)(q);(0,s.useEffect)((()=>{u(x)}),[x,u]),(0,s.useEffect)((()=>{h&&w&&h(w)}),[w,h]);const G=n.filter(L).sort(U),Q=n.filter(F).sort(U),K=E(n),J=e=>{const t=[];for(const n of x)_(n)===e&&t.push(n);return t},Y=(e,t)=>{const n=J(t),s=K[e].find((e=>e.value===t));return n.length>0&&n.length>=s.options.length},X=(e,t)=>{const n=J(t),s=K[e].find((e=>e.value===t));return n.length>0&&n.length<s.options.length},ee=e=>{x.find((t=>t.uid===e.uid))?y(x.filter((t=>t.uid!==e.uid))):y([...x,e])},te=(e,t)=>{const n=K[e].find((e=>e.value===t));if(Y(e,t)||X(e,t))n&&y(x.filter((e=>!n.options.find((t=>e.uid===t.uid)))));else if(n){const e=n.options.filter((e=>e.delegatable)),t=x.filter((e=>!n.options.find((t=>e.uid===t.uid))));y([...t,...e])}},ne=(e,t)=>{$(t),C(!0);const n=K[e].find((e=>e.value===t));n&&P(n.options)},se=e=>{C(!1),$(""),P([])},ae=()=>{const e=x.filter((e=>_(e)!==k));y(e)};return(0,m.jsxs)("div",{className:(0,o.cx)(W.menu,Z.menuWrapper,{[Z.menuLeft]:v.horizontal>0},o.css`
          bottom: ${v.vertical>0?`${v.vertical}px`:"unset"};
          top: ${v.vertical<0?`${Math.abs(v.vertical)}px`:"unset"};
        `),children:[(0,m.jsxs)("div",{className:Z.menu,"aria-label":"Role picker menu",children:[(0,m.jsxs)(O.$,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,hideVerticalTrack:!0,children:[c&&(0,m.jsxs)("div",{className:Z.menuSection,children:[(0,m.jsx)("div",{className:Z.groupHeader,children:"Basic roles"}),(0,m.jsx)(I.S,{className:Z.basicRoleSelector,options:D,value:w,onChange:e=>{j(e)},fullWidth:!0,disabled:d})]}),!!Q.length&&(0,m.jsxs)("div",{className:Z.menuSection,children:[(0,m.jsx)("div",{className:Z.groupHeader,children:"Fixed roles"}),(0,m.jsx)("div",{className:W.optionBody,children:r&&K.fixed.length?K.fixed.map(((e,t)=>{var n;return(0,m.jsx)(B,{data:e,isSelected:Y(N.fixed,e.value)||X(N.fixed,e.value),partiallySelected:X(N.fixed,e.value),disabled:null===(n=e.options)||void 0===n?void 0:n.every(H),onChange:e=>te(N.fixed,e),onOpenSubMenu:e=>ne(N.fixed,e),onCloseSubMenu:se,root:null==A?void 0:A.current,isFocused:S&&k===e.value,children:S&&k===e.value&&(0,m.jsx)(V,{options:R,selectedOptions:x,onSelect:ee,onClear:ae,showOnLeft:v.horizontal>0})},t)})):Q.map(((e,t)=>(0,m.jsx)(z,{data:e,isSelected:!(!e.uid||!x.find((t=>t.uid===e.uid))),disabled:H(e),onChange:ee,hideDescription:!0},t)))})]}),!!G.length&&(0,m.jsxs)("div",{className:Z.menuSection,children:[(0,m.jsx)("div",{className:Z.groupHeader,children:"Custom roles"}),(0,m.jsx)("div",{className:W.optionBody,children:r&&K.custom.length?K.custom.map(((e,t)=>{var n;return(0,m.jsx)(B,{data:e,isSelected:Y(N.custom,e.value)||X(N.custom,e.value),partiallySelected:X(N.custom,e.value),disabled:null===(n=e.options)||void 0===n?void 0:n.every(H),onChange:e=>te(N.custom,e),onOpenSubMenu:e=>ne(N.custom,e),onCloseSubMenu:se,root:null==A?void 0:A.current,isFocused:S&&k===e.value,children:S&&k===e.value&&(0,m.jsx)(V,{options:R,selectedOptions:x,onSelect:ee,onClear:ae,showOnLeft:v.horizontal>0})},t)})):G.map(((e,t)=>(0,m.jsx)(z,{data:e,isSelected:!(!e.uid||!x.find((t=>t.uid===e.uid))),disabled:H(e),onChange:ee,hideDescription:!0},t)))})]})]}),(0,m.jsx)("div",{className:Z.menuButtonRow,children:(0,m.jsxs)(a.Lh,{justify:"flex-end",children:[(0,m.jsx)(T.zx,{size:"sm",fill:"text",onClick:async()=>{y([])},disabled:f,children:"Clear all"}),(0,m.jsx)(T.zx,{size:"sm",onClick:()=>{p(x,w)},disabled:f,children:b?"Apply":"Update"})]})})]}),(0,m.jsx)("div",{ref:A})]})},L=e=>{var t;return!(null!==(t=e.name)&&void 0!==t&&t.startsWith("fixed:"))},F=e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.startsWith("fixed:")},E=e=>{const t={},n={};e.forEach((e=>{const s=e.name.startsWith("fixed:")?t:n,a=_(e);s[a]||(s[a]=[]),s[a].push(e)}));const s=[];for(const e of Object.keys(t)){const n=t[e].sort(U);s.push({name:A[e]||W(e),value:e,options:n})}const a=[];for(const e of Object.keys(n)){const t=n[e].sort(U);a.push({name:W(e),value:e,options:t})}return{fixed:s.sort(((e,t)=>e.name.localeCompare(t.name))),custom:a.sort(((e,t)=>e.name.localeCompare(t.name)))}},V=e=>{let{options:t,selectedOptions:n,disabledOptions:s,onSelect:i,onClear:r,showOnLeft:d}=e;const c=(0,l.l4)(),u=(0,g.D)(c),h=(0,l.wW)(q);return(0,m.jsxs)("div",{className:(0,o.cx)(h.subMenu,{[h.subMenuLeft]:d}),"aria-label":"Role picker submenu",children:[(0,m.jsx)(O.$,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,children:(0,m.jsx)("div",{className:u.optionBody,children:t.map(((e,t)=>(0,m.jsx)(z,{data:e,isSelected:!(!e.uid||!(n.find((t=>t.uid===e.uid))||null!=s&&s.find((t=>t.uid===e.uid)))),disabled:!(!e.uid||null==s||!s.find((t=>t.uid===e.uid)))||H(e),onChange:i,hideDescription:!0},t)))})}),(0,m.jsx)("div",{className:h.subMenuButtonRow,children:(0,m.jsx)(a.Lh,{justify:"flex-end",children:(0,m.jsx)(T.zx,{size:"sm",fill:"text",onClick:async()=>{r&&r()},children:"Clear"})})})]})},z=s.forwardRef(((e,t)=>{let{data:n,isFocused:s,isSelected:a,disabled:i,onChange:r,hideDescription:u}=e;const h=(0,l.l4)(),p=(0,g.D)(h),f=(0,l.wW)(q),v=(0,o.cx)(p.option,s&&p.optionFocused,i&&f.menuOptionDisabled),b=e=>{i||(e.preventDefault(),e.stopPropagation(),r(n))};return(0,m.jsxs)("div",{ref:t,className:v,"aria-label":"Role picker option",onClick:b,children:[(0,m.jsx)($.X,{value:a,className:f.menuOptionCheckbox,onChange:b,disabled:i}),(0,m.jsxs)("div",{className:(0,o.cx)(p.optionBody,f.menuOptionBody),children:[(0,m.jsx)("span",{children:n.displayName||n.name}),!u&&n.description&&(0,m.jsx)("div",{className:p.optionDescription,children:n.description})]}),n.description&&(0,m.jsx)(c.u,{content:n.description,children:(0,m.jsx)(d.J,{name:"info-circle",className:f.menuOptionInfoSign})})]})}));z.displayName="RoleMenuOption";const B=s.forwardRef(((e,t)=>{let{data:n,isFocused:s,isSelected:a,partiallySelected:i,disabled:r,onChange:d,onClick:c,onOpenSubMenu:u,onCloseSubMenu:h,children:p,root:f}=e;const v=(0,l.l4)(),b=(0,g.D)(v),x=(0,l.wW)(q),y=(0,o.cx)(b.option,s&&b.optionFocused,r&&x.menuOptionDisabled);return(0,m.jsx)("div",{onMouseEnter:()=>{u&&u(n.value)},onMouseLeave:()=>{h&&h(n.value)},children:(0,m.jsxs)("div",{ref:t,className:y,"aria-label":"Role picker option",onClick:e=>{c&&c(n.value)},children:[(0,m.jsx)($.X,{value:a,className:(0,o.cx)(x.menuOptionCheckbox,{[x.checkboxPartiallyChecked]:i}),onChange:e=>{r||n.value&&d(n.value)},disabled:r}),(0,m.jsxs)("div",{className:(0,o.cx)(b.optionBody,x.menuOptionBody),children:[(0,m.jsx)("span",{children:n.displayName||n.name}),(0,m.jsx)("span",{className:x.menuOptionExpand})]}),f&&p&&(0,m.jsx)(R.h_,{className:x.subMenuPortal,root:f,children:p})]})})}));B.displayName="RoleMenuGroupOption";const _=e=>e.group||"Other",W=e=>e.slice(0,1).toUpperCase()+e.slice(1),U=(e,t)=>e.name.localeCompare(t.name),H=e=>void 0!==e.delegatable&&!e.delegatable,q=e=>({menuWrapper:o.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:o.css`
      min-width: ${260}px;

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,menuLeft:o.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:o.css`
      height: 100%;
      min-width: ${260}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${e.components.input.borderColor};

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,subMenuLeft:o.css`
      border-right: 1px solid ${e.components.input.borderColor};
      border-left: unset;
    `,groupHeader:o.css`
      padding: ${e.spacing(0,4)};
      display: flex;
      align-items: center;
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightBold};
    `,container:o.css`
      padding: ${e.spacing(1)};
      border: 1px ${e.colors.border.weak} solid;
      border-radius: ${e.shape.borderRadius(1)};
      background-color: ${e.colors.background.primary};
      z-index: ${e.zIndex.modal};
    `,menuSection:o.css`
      margin-bottom: ${e.spacing(2)};
    `,menuOptionCheckbox:o.css`
      display: flex;
      margin: ${e.spacing(0,1,0,.25)};
    `,menuButtonRow:o.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,menuOptionBody:o.css`
      font-weight: ${e.typography.fontWeightRegular};
      padding: ${e.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:o.css`
      color: ${e.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:o.css`
      position: absolute;
      right: ${e.spacing(1.25)};
      color: ${e.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:o.css`
      color: ${e.colors.text.disabled};
    `,basicRoleSelector:o.css`
      margin: ${e.spacing(1,1.25,1,1)};
    `,subMenuPortal:o.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:o.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,checkboxPartiallyChecked:o.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `});var Z;const G=e=>{let{basicRole:t,appliedRoles:n,roleOptions:o,disabled:l,isLoading:d,basicRoleDisabled:c,showBasicRole:u,onRolesChange:h,onBasicRoleChange:p,canUpdateRoles:g=!0,apply:f=!1,maxWidth:v=b}=e;const[x,y]=(0,s.useState)(!1),[w,S]=(0,s.useState)(n),[C,k]=(0,s.useState)(t),[N,O]=(0,s.useState)(""),[I,T]=(0,s.useState)({vertical:0,horizontal:0}),$=(0,s.useRef)(null);(0,s.useEffect)((()=>{k(t),S(n)}),[n,t]),(0,s.useEffect)((()=>{var e;const t=null==$||null===(e=$.current)||void 0===e?void 0:e.getBoundingClientRect();if(!t||!x)return;const{bottom:n,top:s,left:a,right:i,width:r}=t,o=n-s+10,l=i-a;let d=-l,c=-o;window.innerHeight-n<320&&(c=o),window.innerWidth-i<r&&r<520&&(d=l),T({horizontal:d,vertical:c})}),[x,w]);const R=(0,s.useCallback)((e=>{l||(e.preventDefault(),e.stopPropagation(),y(!0))}),[y,l]),P=(0,s.useCallback)((()=>{y(!1),O(""),S(n),k(t)}),[n,t]);return d?Z||(Z=(0,m.jsxs)(a.Lh,{justify:"center",children:[(0,m.jsx)("span",{children:"Loading..."}),(0,m.jsx)(i.$,{size:16})]})):(0,m.jsx)("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:v},ref:$,children:(0,m.jsxs)(r.L,{onClick:()=>x&&P(),children:[(0,m.jsx)(j,{basicRole:C,appliedRoles:w,query:N,onQueryChange:e=>{O(e||"")},onOpen:R,onClose:P,isFocused:x,disabled:l,showBasicRole:u}),x&&(0,m.jsx)(M,{options:(()=>{const e=o.map((e=>Object.assign({},e,{delegatable:g&&e.delegatable})));return N&&""!==N.trim()?e.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(N.toLowerCase())})):e})(),basicRole:C,appliedRoles:n,onBasicRoleSelect:e=>{k(e)},onSelect:e=>{S(e)},onUpdate:(e,n)=>{p&&n&&n!==t&&p(n),g&&h(e),O(""),y(!1)},showGroups:0===N.length||""===N.trim(),basicRoleDisabled:c,showBasicRole:u,updateDisabled:c&&!g,apply:f,offset:I})]})})}},41455:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var s=n(68404),a=n(7197),i=n(68374),r=n(64850),o=n(81135),l=n(97928),d=n(45916);const c=e=>{let{basicRole:t,userId:n,orgId:c,onBasicRoleChange:u,roleOptions:h,disabled:p,basicRoleDisabled:g,apply:m=!1,onApplyRoles:f,pendingRoles:v,maxWidth:b}=e;const[{loading:x,value:y=[]},w]=(0,a.Z)((async()=>{try{if(m&&Boolean(null==v?void 0:v.length))return v;if(i.Vt.hasPermission(r.bW.ActionUserRolesList))return await(0,l.kt)(n,c)}catch(e){console.error("Error loading options")}return[]}),[c,n,v]);(0,s.useEffect)((()=>{c&&w()}),[c,w,v]);const j=i.Vt.hasPermission(r.bW.ActionUserRolesAdd)&&i.Vt.hasPermission(r.bW.ActionUserRolesRemove);return(0,d.jsx)(o.I,{appliedRoles:y,basicRole:t,onRolesChange:async e=>{m?f&&f(e,n,c):(await(0,l.hB)(e,n,c),await w())},onBasicRoleChange:u,roleOptions:h,isLoading:x,disabled:p,basicRoleDisabled:g,showBasicRole:!0,apply:m,canUpdateRoles:j,maxWidth:b})}},97928:(e,t,n)=>{"use strict";n.d(t,{_C:()=>o,hB:()=>r,kt:()=>i,u7:()=>l,ul:()=>a});var s=n(93570);const a=async(e,t)=>{let n="/api/access-control/roles?delegatable=true";e&&(n+=`&targetOrgId=${e}`);const a=await(0,s.i)().get(n);return a&&a.length?a:[]},i=async(e,t)=>{let n=`/api/access-control/users/${e}/roles`;t&&(n+=`?targetOrgId=${t}`);try{const e=await(0,s.i)().get(n);return e&&e.length?e:[]}catch(e){return(0,s.kW)(e)&&(e.isHandled=!0),[]}},r=(e,t,n)=>{let a=`/api/access-control/users/${t}/roles`;n&&(a+=`?targetOrgId=${n}`);const i=e.flatMap((e=>e.uid));return(0,s.i)().put(a,{orgId:n,roleUids:i})},o=async(e,t)=>{let n=`/api/access-control/teams/${e}/roles`;t&&(n+=`?targetOrgId=${t}`);try{const e=await(0,s.i)().get(n);return e&&e.length?e:[]}catch(e){return(0,s.kW)(e)&&(e.isHandled=!0),[]}},l=(e,t,n)=>{let a=`/api/access-control/teams/${t}/roles`;n&&(a+=`?targetOrgId=${n}`);const i=e.flatMap((e=>e.uid));return(0,s.i)().put(a,{orgId:n,roleUids:i})}},71438:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var s=n(99151),a=n.n(s),i=n(68404),r=n(70917),o=n(42200),l=n(45916);const d=["value","onChange","placeholder","noOptionsMessage"];const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"General",t=arguments.length>1?arguments[1]:void 0;return`${e}/${t}`};const u=a()((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.ae.search({type:"dash-db",query:e,limit:100}).then((e=>e.map((e=>({value:{uid:e.uid,title:e.title,folderTitle:e.folderTitle,folderUid:e.folderUid},label:c(null==e?void 0:e.folderTitle,e.title)})))))}),250,{leading:!0}),h=e=>{let{value:t,onChange:n,placeholder:s="Select dashboard",noOptionsMessage:a="No dashboards found"}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);const[p,g]=(0,i.useState)();(0,i.useEffect)((()=>{var e;t&&t!==(null==p||null===(e=p.value)||void 0===e?void 0:e.uid)&&(async()=>{const e=await o.ae.getDashboardByUid(t);var n;e.dashboard&&g({value:{uid:e.dashboard.uid,title:e.dashboard.title,folderTitle:e.meta.folderTitle,folderUid:e.meta.folderUid},label:c(null===(n=e.meta)||void 0===n?void 0:n.folderTitle,e.dashboard.title)})})()}),[t]);const m=(0,i.useCallback)((e=>{g(e),null==n||n(null==e?void 0:e.value)}),[n,g]);return(0,l.jsx)(r.qb,Object.assign({loadOptions:u,onChange:m,placeholder:s,noOptionsMessage:a,value:p,defaultOptions:!0},h))}},33257:(e,t,n)=>{"use strict";n.d(t,{Es:()=>y});var s=n(52423),a=n(99151),i=n.n(a),r=n(68404),o=n(66015),l=n(94025),d=n(25004),c=n(16755),u=n(4645),h=n(70917),p=n(2247),g=n(35448),m=n(59196),f=n(1671),v=n(64850),b=n(45916);const x=-10;function y(e){var t,n,s;const{dashboardId:a,allowEmpty:y,onChange:j,filter:S,enableCreateNew:C,inputId:k,onClear:N,enableReset:O,initialFolderId:I,initialTitle:T="",permissionLevel:$=v.bf.Edit,rootName:R="General",showRoot:P=!0,skipInitialLoad:D,accessControlMetadata:A,customAdd:M,folderWarning:L}=e,[F,E]=(0,r.useState)(null),[V,z]=(0,r.useState)(!1),[B,_]=(0,r.useState)(""),[W,U]=(0,r.useState)(null!==(t=null==F?void 0:F.title)&&void 0!==t?t:""),H=(0,c.wW)(w),q="function"==typeof N,Z=(0,r.useCallback)((async e=>{const t=function(e,t){return(t?t(e):e).map((e=>({label:e.title,value:e.id})))}(await(0,f.ZL)(e,$,A),S);return(m.Vt.hasAccess(v.bW.DashboardsWrite,m.Vt.isEditor)||m.Vt.hasAccess(v.bW.DashboardsCreate,m.Vt.isEditor))&&null!=R&&R.toLowerCase().startsWith(e.toLowerCase())&&P&&t.unshift({label:R,value:0}),O&&""===e&&""!==T&&!t.find((e=>e.label===T))&&t.unshift({label:T,value:I}),C&&Boolean(M)?[...t,{value:x,label:"+ Add new",title:e}]:t}),[O,I,T,$,R,P,A,S,C,M]),G=(0,r.useMemo)((()=>i()(Z,300,{leading:!0})),[Z]);(0,r.useEffect)((()=>{F&&F.value!==I&&!V&&F.value&&F.label&&j({id:F.value,title:F.label})}),[F,I]),(0,o.Z)((async()=>{if(D){const e=await async function(e){let{folderName:t,folderId:n,getFolder:s}=e;if(null==n||n<0)throw new Error("folderId should to be greater or equal to zero.");if(t)return{label:t,value:n};return{label:(await s(n)).title,value:n}}({getFolder:f.EW,folderId:I,folderName:T});E(e)}await(async()=>{const e={label:T,value:void 0},t={label:R,value:0},n=await Z("");let s=null;null!=I&&I>-1?s=n.find((e=>e.value===I))||null:O&&T?s=e:I&&(s=n.find((e=>e.id===I))||null),s||y||(s=m.Vt.isEditor?t:a?e:n.length>0?n[0]:e);!V&&E(s)})()}),[D,I,T]),(0,r.useEffect)((()=>{F&&F.id===x&&z(!0)}),[F]);const Q=(0,r.useCallback)(((e,t)=>{var n;if((null===(n=e)||void 0===n?void 0:n.value)===x)E({id:x,title:B}),U(B);else{if(e||(e={value:0,label:R}),"clear"===t.action&&N)return void N();E(e),j({id:e.value,title:e.label})}}),[j,N,R,B]),K=(0,r.useCallback)((async e=>{if(null!=L&&L.warningCondition(e))return!1;const t=await(0,f.L6)({title:e});let n={value:-1,label:"Not created"};return t.id>-1?(p.Z.emit(l.SI.alertSuccess,["Folder Created","OK"]),n={value:t.id,label:t.title},E(t),Q(n,{action:"create-option",option:n})):p.Z.emit(l.SI.alertError,["Folder could not be created"]),n}),[L,Q]),J=(0,r.useCallback)((e=>{const t=Boolean(null==M?void 0:M.disallowValues);if("Enter"!==e.key||!t||null!=M&&M.isAllowedValue(W))switch(e.key){case"Enter":K(null==F?void 0:F.title),z(!1);break;case"Escape":E({value:0,label:R}),z(!1)}else e.preventDefault()}),[null==M?void 0:M.disallowValues,null==M?void 0:M.isAllowedValue,W,K,null==F?void 0:F.title,R]),Y=e=>{const t=e.currentTarget.value;U(t),E({id:-1,title:t})},X=()=>{E({value:0,label:R}),z(!1)},ee=(e,t)=>{let{action:n}=t;"input-change"===n&&_((t=>e)),"menu-close"===n&&_((t=>e))},te=()=>null!=L&&L.warningCondition(W)?n||(n=(0,b.jsx)(L.warningComponent,{})):null,ne=()=>null!=L&&L.warningCondition(B)?s||(s=(0,b.jsx)(L.warningComponent,{})):null;return V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(te,{}),(0,b.jsx)("div",{className:H.newFolder,children:"Press enter to create the new folder."}),(0,b.jsx)(u.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:W,onChange:Y,onKeyDown:J,placeholder:"Press enter to confirm new folder.",onBlur:X})]}):(0,b.jsxs)("div",{"data-testid":d.wl.components.FolderPicker.containerV2,children:[(0,b.jsx)(ne,{}),(0,b.jsx)(h.qb,{inputId:k,"aria-label":d.wl.components.FolderPicker.input,loadingMessage:(0,g.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:F,inputValue:B,onInputChange:ee,value:F,allowCustomValue:C&&!Boolean(M),loadOptions:G,onChange:Q,onCreateOption:K,isClearable:q})]})}const w=e=>({newFolder:s.css`
    color: ${e.colors.warning.main};
    font-size: ${e.typography.bodySmall.fontSize};
    padding-bottom: ${e.spacing(1)};
  `})},23514:(e,t,n)=>{"use strict";n.d(t,{P:()=>v});n(68404);var s=n(66015),a=n(70917),i=n(99500),r=n(63939),o=n(82897),l=n(59196),d=n(38467),c=n(78130),u=n(86112),h=n(91955),p=n(42200);class g{getRecentDashboards(e){return this.queryForRecentDashboards().then((t=>{t.length>0&&(e.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:c.Z.getBool(`${r.qi}.recent`,!0),items:t,type:u.o.DashFolder})}))}queryForRecentDashboards(){return new Promise((e=>{d.Z.getDashboardOpened().then((t=>{const n=(0,o.take)(t,30);if(0===n.length)return e([]);p.ae.search({dashboardUIDs:n}).then((t=>e(n.map((e=>t.find((t=>t.uid===e)))).filter((e=>e&&!e.isStarred)))))}))}))}getStarred(e){return l.Vt.isSignedIn?p.ae.search({starred:!0,limit:30}).then((t=>{t.length>0&&(e.starred={title:"Starred",icon:"star",score:-2,expanded:c.Z.getBool(`${r.qi}.starred`,!0),items:t,type:u.o.DashFolder})})):Promise.resolve()}search(e){var t;const n={},s=[],a=(0,o.clone)(e),i=(0,h.L)(e)||(null===(t=a.folderIds)||void 0===t?void 0:t.length)>0;return a.folderIds=a.folderIds||[],a.layout===u.A.List?p.ae.search(Object.assign({},a,{type:u.o.DashDB})).then((e=>e.length?[{title:"",items:e}]:[])):(i||(a.folderIds=[0]),e.skipRecent||i||s.push(this.getRecentDashboards(n)),e.skipStarred||i||s.push(this.getStarred(n)),s.push(p.ae.search(a).then((e=>this.handleSearchResult(n,e)))),Promise.all(s).then((()=>(0,o.sortBy)((0,o.values)(n),"score"))))}handleSearchResult(e,t){if(0===t.length)return e;for(const n of t)"dash-folder"===n.type&&(e[n.uid]={uid:n.uid,title:n.title,expanded:!1,items:[],url:n.url,icon:"folder",score:(0,o.keys)(e).length,type:n.type});for(const n of t){if("dash-folder"===n.type)continue;let t=e[n.folderUid||0];t||(t=n.folderUid?{uid:n.folderUid,title:n.folderTitle,url:n.folderUrl,items:[],icon:"folder-open",score:(0,o.keys)(e).length,type:u.o.DashFolder}:{uid:"",title:"General",items:[],icon:"folder-open",score:(0,o.keys)(e).length,type:u.o.DashFolder},e[n.folderUid||0]=t),t.expanded=!0,t.items&&t.items.push(n)}}getDashboardTags(){return p.ae.get("/api/dashboards/tags")}getSortOptions(){return p.ae.get("/api/search/sorting")}}var m=n(45916);const f=()=>(new g).getSortOptions().then((e=>{let{sortOptions:t}=e;return t.map((e=>({label:e.displayName,value:e.name})))}));function v(e){var t,n;let{onChange:o,value:l,placeholder:d,filter:c,getSortOptions:u,isClearable:h}=e;const p=(0,s.Z)((async()=>{const e=await(null!=u?u:f)();return c?e.filter((e=>c.includes(e.value))):e}),[u,c]);if(p.loading)return null;const g=Boolean((null==l?void 0:l.includes("desc"))||(null==l?void 0:l.startsWith("-")));return(0,m.jsx)(a.Ph,{width:28,onChange:o,value:null!==(t=null===(n=p.value)||void 0===n?void 0:n.find((e=>e.value===l)))&&void 0!==t?t:null,options:p.value,"aria-label":"Sort",placeholder:null!=d?d:`Sort (Default ${r.yw.label})`,prefix:(0,m.jsx)(i.J,{name:g?"sort-amount-down":"sort-amount-up"}),isClearable:h},l)}},36259:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var s=n(82897),a=n(68404),i=n(93570),r=n(70917),o=n(45916);class l extends a.Component{constructor(e){var t,n,a;super(e),a=void 0,(n="debouncedSearch")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,s.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,s.isNil)(e)&&(e=""),(0,i.i)().get(`/api/teams/search?perpage=100&page=1&query=${e}`).then((e=>{const t=e.teams.map((e=>({value:e,label:e.name,imgUrl:e.avatarUrl})));return this.setState({isLoading:!1}),t}))}render(){const{onSelected:e,className:t}=this.props,{isLoading:n}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,o.jsx)(r.qb,{isLoading:n,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:e,className:t,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"})})}}},15082:(e,t,n)=>{"use strict";n.d(t,{f:()=>l});var s=n(82897),a=n(68404),i=n(93570),r=n(70917),o=n(45916);class l extends a.Component{constructor(e){var t,n,a;super(e),a=void 0,(n="debouncedSearch")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,s.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,s.isNil)(e)&&(e=""),(0,i.i)().get(`/api/org/users/lookup?query=${e}&limit=100`).then((e=>e.map((e=>({id:e.userId,value:e.userId,label:e.login,imgUrl:e.avatarUrl,login:e.login}))))).finally((()=>{this.setState({isLoading:!1})}))}render(){const{className:e,onSelected:t,inputId:n}=this.props,{isLoading:s}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,o.jsx)(r.qb,{isClearable:!0,className:e,inputId:n,isLoading:s,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:t,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"})})}}},69980:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var s=n(68404),a=n(14106),i=n(99500),r=n(45916);class o extends s.Component{constructor(e){super(e)}render(){const{label:e,removeIcon:t,count:n,onClick:s}=this.props,{color:o}=(0,a.Bx)(e),l={backgroundColor:o},d=0!==n&&(0,r.jsx)("span",{className:"tag-count-label",children:`(${n})`});return(0,r.jsxs)("span",{className:"label label-tag",style:l,children:[t&&(0,r.jsx)(i.J,{onClick:s,name:"times"}),e," ",d]})}}},89496:(e,t,n)=>{"use strict";n.d(t,{D:()=>f});var s=n(52423),a=n(68404),i=n(8887),r=n(56949),o=n(16755),l=n(70917),d=n(99500),c=n(69980),u=n(45916);const h=e=>{var t;let{data:n,className:a,label:i,isFocused:r,innerProps:l}=e;const d=(0,o.wW)(p);return(0,u.jsx)("div",Object.assign({className:(0,s.cx)(d.option,r&&d.optionFocused),"aria-label":"Tag option"},l,{children:(0,u.jsx)("div",{className:`tag-filter-option ${a||""}`,children:"string"==typeof i?(0,u.jsx)(c.e,{label:i,removeIcon:!1,count:null!==(t=n.count)&&void 0!==t?t:0}):i})}))},p=e=>({option:s.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,optionFocused:s.css`
      background: ${e.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `});var g;const m=(e,t)=>RegExp((0,r.GE)(t),"i").test(e.value),f=e=>{let{allowCustomValue:t=!1,formatCreateLabel:n,hideValues:s,inputId:r,isClearable:p,onChange:f,placeholder:b="Filter by tag",tagOptions:x,tags:y,width:w}=e;const j=(0,o.wW)(v),S=y.map((e=>({value:e,label:e,count:0}))),[C,k]=(0,a.useState)(S),[N,O]=(0,a.useState)(!1),[I,T]=(0,a.useState)(y),[$,R]=(0,a.useState)(S),P=(0,a.useMemo)((()=>y.join()),[y]),D=(0,a.useCallback)((async()=>(await x()).map((e=>y.includes(e.term)?{value:e.term,label:e.term,count:0}:{value:e.term,label:e.term,count:e.count}))),[x,y]),A=(0,a.useCallback)((async()=>{O(!0);const e=await D();t&&$.forEach((t=>e.push(t))),k(e),O(!1)}),[t,$,D]);(0,a.useEffect)((()=>{y.length>0&&0===C.length&&A()}),[A,C.length,y.length]),(0,a.useEffect)((()=>{y!==I&&(T(y),A())}),[A,I,y]);const M=e=>{e.forEach((e=>e.count=0)),f((e||[]).map((e=>e.value))),t&&R(e.filter((e=>!y.includes(e))))},L={key:P,onFocus:A,isLoading:N,options:C,allowCreateWhileLoading:!0,allowCustomValue:t,formatCreateLabel:n,defaultOptions:!0,filterOption:m,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,inputId:r,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:M,placeholder:b,value:S,width:w,components:{Option:h,MultiValueLabel:()=>null,MultiValueRemove(e){const{data:t}=e;return(0,u.jsx)(i.c.MultiValueRemove,Object.assign({},e,{children:(0,u.jsx)(c.e,{label:t.label,removeIcon:!0,count:t.count},t.label)}))},MultiValueContainer:s?()=>null:i.c.MultiValueContainer}};return(0,u.jsxs)("div",{className:j.tagFilter,children:[p&&y.length>0&&(0,u.jsx)("button",{className:j.clear,onClick:()=>M([]),children:"Clear tags"}),(0,u.jsx)(l.NU,Object.assign({},L,{prefix:g||(g=(0,u.jsx)(d.J,{name:"tag-alt"})),"aria-label":"Tag filter"}))]})};f.displayName="TagFilter";const v=e=>({tagFilter:s.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:s.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${e.colors.text.secondary};

    &:hover {
      color: ${e.colors.text.primary};
    }
  `})},34759:(e,t,n)=>{"use strict";n.d(t,{a:()=>d});var s=n(82897),a=(n(68404),n(85699)),i=n(88246),r=n(38424),o=n(66803),l=n(45916);const d=e=>(0,l.jsx)(o.G,{storageKey:"grafana.dashboard.timepicker.history",defaultValue:[],children:(t,n)=>{const o=function(e){return e.map((e=>({from:"string"==typeof e.from?e.from:e.from.toISOString(),to:"string"==typeof e.to?e.to:e.to.toISOString()})))}(t),d=function(e,t){return e.map((e=>a.convertRawToRange(e,t)))}(o,e.timeZone);return(0,l.jsx)(r.X,Object.assign({},e,{history:d,onChange:t=>{!function(e,t,n){if(!function(e){return(0,i.v9)(e.raw.from)||(0,i.v9)(e.raw.to)}(e))return;const a=function(e){return(0,s.uniqBy)(e,(e=>e.from+e.to)).slice(0,4)}([{from:"string"==typeof e.raw.from?e.raw.from:e.raw.from.toISOString(),to:"string"==typeof e.raw.to?e.raw.to:e.raw.to.toISOString()},...t]);n(a)}(t,o,n),e.onChange(t)}}))}})},53277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(52423),a=n(68404),i=n(31181),r=n(16755),o=n(45916);const l=["text","className","experimentId","eventVariant"];const d=e=>{let{text:t="PRO",className:n,experimentId:d,eventVariant:u=""}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);const p=(0,r.wW)(c);return(0,a.useEffect)((()=>{d&&(0,i.SZ)(d,"test",u)}),[d,u]),(0,o.jsx)("span",Object.assign({className:(0,s.cx)(p.badge,n)},h,{children:t}))},c=e=>({badge:s.css`
      margin-left: ${e.spacing(1.25)};
      border-radius: ${e.shape.borderRadius(5)};
      background-color: ${e.colors.success.main};
      padding: ${e.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.pxToRem(10)};
    `})},36149:(e,t,n)=>{"use strict";n.d(t,{TA:()=>p,Xz:()=>u,tM:()=>m});var s=n(52423),a=n(68404),i=n(31181),r=n(16755),o=n(99500),l=n(8006),d=n(45916);const c=["featureName","className","children","text","featureId","eventVariant","size"];const u=e=>{let{featureName:t,className:n,text:u,featureId:p,eventVariant:g="",size:m="md"}=e,f=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,c);const v=(0,r.wW)((e=>h(e,m)));return(0,a.useEffect)((()=>{(0,i.SZ)(`feature-highlights-${p}`,"test",g)}),[g,p]),(0,d.jsxs)("div",Object.assign({className:(0,s.cx)(v.box,n)},f,{children:[(0,d.jsx)(o.J,{name:"rocket",className:v.icon}),(0,d.jsxs)("div",{className:v.inner,children:[(0,d.jsxs)("p",{className:v.text,children:["You’ve discovered a Pro feature! ",u||`Get the Grafana Pro plan to access ${t}.`]}),(0,d.jsx)(l.Qj,{variant:"secondary",size:m,className:v.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer",children:"Upgrade"})]})]}))},h=(e,t)=>{const n=e.shape.borderRadius(2),a="md"===t?"body":"bodySmall";return{box:s.css`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${n};
      background: ${e.colors.success.transparent};
      padding: ${e.spacing(2)};
      color: ${e.colors.success.text};
      font-size: ${e.typography[a].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${e.spacing(0,"auto",3,"auto")};
      max-width: ${e.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:s.css`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:s.css`
      margin: 0;
    `,button:s.css`
      background-color: ${e.colors.success.main};
      font-weight: ${e.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${e.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${e.colors.text.primary};
        outline: 2px solid ${e.colors.primary.main};
      }
    `,icon:s.css`
      margin: ${e.spacing(.5,1,.5,.5)};
    `}},p=e=>{let{listItems:t,image:n,featureUrl:s,featureName:a,description:i,caption:c,action:u}=e;const h=(0,r.wW)(g);return(0,d.jsxs)("div",{className:h.container,children:[(0,d.jsxs)("div",{className:h.content,children:[(0,d.jsxs)("h3",{className:h.title,children:["Get started with ",a]}),i&&(0,d.jsx)("h6",{className:h.description,children:i}),(0,d.jsx)("ul",{className:h.list,children:t.map(((e,t)=>(0,d.jsxs)("li",{children:[(0,d.jsx)(o.J,{name:"check",size:"xl",className:h.icon})," ",e]},t)))}),(null==u?void 0:u.link)&&(0,d.jsx)(l.Qj,{variant:"primary",href:u.link,children:u.text}),(null==u?void 0:u.onClick)&&(0,d.jsx)(l.zx,{variant:"primary",onClick:u.onClick,children:u.text}),s&&(0,d.jsx)(l.Qj,{fill:"text",href:s,className:h.link,target:"_blank",rel:"noreferrer noopener",children:"Learn more"})]}),(0,d.jsxs)("div",{className:h.media,children:[(0,d.jsx)("img",{src:v(n),alt:"Feature screenshot"}),c&&(0,d.jsx)("p",{className:h.caption,children:c})]})]})},g=e=>({container:s.css`
      display: flex;
      justify-content: space-between;
    `,content:s.css`
      width: 45%;
      margin-right: ${e.spacing(4)};
    `,media:s.css`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:s.css`
      color: ${e.colors.text.maxContrast};
    `,description:s.css`
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightLight};
    `,list:s.css`
      list-style: none;
      margin: ${e.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${e.colors.text.primary};
        padding: ${e.spacing(1,0)};
      }
    `,icon:s.css`
      color: ${e.colors.success.main};
      margin-right: ${e.spacing(1)};
    `,link:s.css`
      margin-left: ${e.spacing(2)};
    `,caption:s.css`
      font-weight: ${e.typography.fontWeightLight};
      margin: ${e.spacing(1,0,0)};
    `}),m=e=>{let{featureName:t,description:n,featureUrl:s,image:a}=e;const i=(0,r.wW)(f);return(0,d.jsxs)("div",{className:i.container,children:[(0,d.jsxs)("h3",{className:i.title,children:["Get started with ",t]}),n&&(0,d.jsx)("h6",{className:i.description,children:n}),(0,d.jsx)(l.Qj,{fill:"text",href:s,target:"_blank",rel:"noreferrer noopener",children:"Learn more"}),(0,d.jsx)("div",{className:i.media,children:(0,d.jsx)("img",{src:v(a),alt:"Feature screenshot"})})]})},f=e=>({container:s.css`
      overflow: auto;
      height: 100%;
    `,title:s.css`
      color: ${e.colors.text.maxContrast};
    `,description:s.css`
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightLight};
    `,media:s.css`
      width: 100%;
      margin-top: ${e.spacing(2)};

      img {
        width: 100%;
      }
    `}),v=e=>e.startsWith("http")?e:"/public/img/enterprise/highlights/"+e},45560:(e,t,n)=>{"use strict";n.d(t,{B:()=>d});var s,a=n(52423),i=(n(68404),n(16755)),r=n(78941),o=n(45916);const l={Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["mod+k"],description:"Open command palette"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:["mod+s"],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:["mod+o"],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","←"],description:"Move time range back"},{keys:["t","→"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]},d=e=>{let{onDismiss:t}=e;const n=(0,i.wW)(c);return(0,o.jsxs)(r.u,{title:"Shortcuts",isOpen:!0,onDismiss:t,onClickBackdrop:t,children:[(0,o.jsxs)("div",{className:n.titleDescription,children:[(0,o.jsx)("span",{className:n.shortcutTableKey,children:"mod"})," =",s||(s=(0,o.jsx)("span",{children:" CTRL on windows or linux and CMD key on Mac"}))]}),(0,o.jsx)("div",{className:n.categories,children:Object.entries(l).map(((e,t)=>{let[s,a]=e;return(0,o.jsx)("div",{className:n.shortcutCategory,children:(0,o.jsx)("table",{className:n.shortcutTable,children:(0,o.jsxs)("tbody",{children:[(0,o.jsx)("tr",{children:(0,o.jsx)("th",{className:n.shortcutTableCategoryHeader,colSpan:2,children:s})}),a.map(((e,s)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:n.shortcutTableKeys,children:e.keys.map(((e,a)=>(0,o.jsx)("span",{className:n.shortcutTableKey,children:e},`${t}-${s}-${a}`)))}),(0,o.jsx)("td",{className:n.shortcutTableDescription,children:e.description})]},`${t}-${s}`)))]})})},t)}))})]})};function c(e){return{titleDescription:a.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      color: ${e.colors.text.disabled};
      padding-bottom: ${e.spacing(2)};
    `,categories:a.css`
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:a.css`
      width: 50%;
      font-size: ${e.typography.bodySmall.fontSize};
    `,shortcutTable:a.css`
      margin-bottom: ${e.spacing(2)};
    `,shortcutTableCategoryHeader:a.css`
      font-weight: normal;
      font-size: ${e.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:a.css`
      text-align: left;
      color: ${e.colors.text.disabled};
      width: 99%;
      padding: ${e.spacing(1,2)};
    `,shortcutTableKeys:a.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${e.colors.text.primary};
    `,shortcutTableKey:a.css`
      display: inline-block;
      text-align: center;
      margin-right: ${e.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${e.colors.border.medium};
      border-radius: ${e.shape.borderRadius(3)};
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.secondary};
    `}}},46782:(e,t,n)=>{"use strict";n.d(t,{Oh:()=>c,ZP:()=>l,iE:()=>d,vc:()=>r.v});var s,a,i=n(15546),r=n(65737);let o=r.v;const l=o,d=()=>o,c=Boolean((null===(s=r.v.panels)||void 0===s||null===(a=s.debug)||void 0===a?void 0:a.state)===i.BV.alpha)},42949:(e,t,n)=>{"use strict";n.d(t,{AV:()=>c,FL:()=>g,K3:()=>s,OA:()=>r,QO:()=>h,b0:()=>d,cz:()=>i,gN:()=>p,hD:()=>a,kh:()=>l,yM:()=>o,zF:()=>u});const s=30,a=8,i=24,r="v",o="h",l=4,d=250,c=3*s,u="panel-copy",h=2,p=40,g="VisualizationSelectPane.ListMode"},39321:(e,t,n)=>{"use strict";n.d(t,{h:()=>a,p:()=>i});var s=n(68404);const a=s.createContext(void 0);function i(){const e=(0,s.useContext)(a);if(!e)throw new Error("No GrafanaContext found");return e}},47900:(e,t,n)=>{"use strict";n.d(t,{AT:()=>u,ZR:()=>p,iG:()=>g,t_:()=>h});var s=n(68404),a=n(44288),i=n(17672),r=n(64850),o=n(93686);const l={title:"",text:"",severity:r.F1.Success,icon:"check"},d={title:"",text:"",severity:r.F1.Warning,icon:"exclamation-triangle"},c={title:"",text:"",severity:r.F1.Error,icon:"exclamation-triangle"},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.assign({},l,{title:e,text:t,id:(0,a.Z)(),timestamp:Date.now(),showing:!0})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object.assign({},c,{text:(0,i.i)(t),title:e,id:(0,a.Z)(),traceId:n,component:s,timestamp:Date.now(),showing:!0})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return Object.assign({},d,{title:e,text:t,traceId:n,id:(0,a.Z)(),timestamp:Date.now(),showing:!0})};function g(){const e=(0,r.I0)();return(0,s.useMemo)((()=>({success:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e((0,o.$l)(u(t,n)))},warning:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;e((0,o.$l)(p(t,n,s)))},error:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;e((0,o.$l)(h(t,n,s)))}})),[e])}},68374:(e,t,n)=>{"use strict";n.d(t,{Vt:()=>i.Vt,Wz:()=>r.W,h$:()=>s.Z,rv:()=>a.r});var s=n(2247),a=n(94080),i=n(59196),r=n(14186)},53018:(e,t,n)=>{"use strict";n.d(t,{H6:()=>c,ZP:()=>u});var s=n(82897),a=n(78130),i=n(836),r=n(8910);const o=e=>{const t=(0,r.F)().getInstanceSettings(e.datasourceName);return{id:e.ts.toString(),createdAt:e.ts,datasourceName:e.datasourceName,datasourceUid:(null==t?void 0:t.uid)||"",starred:e.starred,comment:e.comment,queries:e.queries}};var l=n(98771);const d="grafana.explore.richHistory",c=1e4;class u{async getRichHistory(e){const t=p().map(o),n=e.starred?t.filter((e=>!0===e.starred)):t,s=(0,l.ZX)(n,e.sortOrder,e.datasourceFilters,e.search,[e.from,e.to]);return{richHistory:s,total:s.length}}async addToRichHistory(e){const t=Date.now(),n=Object.assign({id:t.toString(),createdAt:t},e),o=(e=>{if(!(0,r.F)().getInstanceSettings({uid:e.datasourceUid}))throw new Error("Datasource not found.");return{ts:e.createdAt,datasourceName:e.datasourceName,starred:e.starred,comment:e.comment,queries:e.queries}})(n),u=function(e){const t=a.Z.getObject(l.hO.retentionPeriod,7),n=(0,l.Jo)(t,!1);return e.filter((e=>e.ts>n||!0===e.starred))||[]}(p()),h=o.queries.map((e=>(0,s.omit)(e,["key","refId"]))),g=u.length>0&&u[0].queries.map((e=>(0,s.omit)(e,["key","refId"])));if((0,s.isEqual)(h,g)){const e=new Error("Entry already exists");throw e.name=i.j.DuplicatedEntry,e}const{queriesToKeep:m,limitExceeded:f}=function(e){let t=!1,n=e.length-1;for(;n>=0&&e.length>=c;)e[n].starred||(e.splice(n,1),t=!0),n--;return{queriesToKeep:e,limitExceeded:t}}(u),v=[o,...m];try{a.Z.setObject(d,v)}catch(e){if(!(e instanceof Error&&"QuotaExceededError"===e.name))throw e;!function(e,t){const n=new Error(t);throw n.name=e,n}(i.j.StorageFull,`Saving rich history failed: ${e.message}`)}return f?{warning:{type:i.V.LimitExceeded,message:`Query history reached the limit of ${c}. Old, not-starred items have been removed.`},richHistoryQuery:n}:{richHistoryQuery:n}}async deleteAll(){a.Z.delete(d)}async deleteRichHistory(e){const t=parseInt(e,10),n=a.Z.getObject(d,[]).filter((e=>e.ts!==t));a.Z.setObject(d,n)}async updateStarred(e,t){return h(e,(e=>e.starred=t))}async updateComment(e,t){return h(e,(e=>e.comment=t))}async getSettings(){return{activeDatasourceOnly:a.Z.getObject(l.hO.activeDatasourceOnly,!1),retentionPeriod:a.Z.getObject(l.hO.retentionPeriod,7),starredTabAsFirstTab:a.Z.getBool(l.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.Z.getObject(l.hO.datasourceFilters,[]).map((e=>e.value))}}async updateSettings(e){a.Z.set(l.hO.activeDatasourceOnly,e.activeDatasourceOnly),a.Z.set(l.hO.retentionPeriod,e.retentionPeriod),a.Z.set(l.hO.starredTabAsFirstTab,e.starredTabAsFirstTab),a.Z.setObject(l.hO.datasourceFilters,(e.lastUsedDatasourceFilters||[]).map((e=>({value:e}))))}}function h(e,t){const n=parseInt(e,10),i=a.Z.getObject(d,[]),r=(0,s.find)(i,{ts:n});if(!r)throw new Error("Rich history item not found.");return t(r),a.Z.setObject(d,i),o(r)}function p(){return function(e){return e.map((e=>{const t=e.queries.map(((e,t)=>function(e,t,n){const s="ABCDEFGHIJKLMNOPQRSTUVXYZ";if("object"==typeof t)return t;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t))return JSON.parse(t);return{expr:t,refId:s[n]}}(0,e,t)));return Object.assign({},e,{queries:t})}))}(a.Z.getObject(d,[]))}},40325:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(3363),a=n(93570),i=n(8910),r=n(13498),o=n(56650);const l=e=>{const t=(0,i.F)().getInstanceSettings({uid:e.datasourceUid});return{id:e.uid,createdAt:1e3*e.createdAt,datasourceName:(null==t?void 0:t.name)||"",datasourceUid:e.datasourceUid,starred:e.starred,comment:e.comment,queries:e.queries}},d=e=>({uid:e.id,createdAt:Math.floor(e.createdAt/1e3),datasourceUid:e.datasourceUid,starred:e.starred,comment:e.comment,queries:e.queries});class c{constructor(){var e,t,n;n=void 0,(t="preferenceService")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.preferenceService=new r.y("user")}async addToRichHistory(e){const{result:t}=await(0,a.i)().post("/api/query-history",{dataSourceUid:e.datasourceUid,queries:e.queries});return{richHistoryQuery:l(t)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(e){(0,a.i)().delete(`/api/query-history/${e}`)}async getRichHistory(e){const t=function(e){let t=`${e.datasourceFilters.map((e=>{const t=(0,i.F)().getInstanceSettings(e).uid;return`datasourceUid=${encodeURIComponent(t)}`})).join("&")}`;e.search&&(t+=`&searchString=${e.search}`);e.sortOrder&&(t=t+"&sort="+(e.sortOrder===o.A.Ascending?"time-asc":"time-desc"));const n=0===e.from?"now":`now-${e.from}d`,s=0===e.to?"now":`now-${e.to}d`;t+=`&to=${n}`,t+=`&from=${s}`,t+="&limit=100",t+=`&page=${e.page||1}`,e.starred&&(t+=`&onlyStarred=${e.starred}`);return t}(e),n=(await(0,s.n)((0,a.i)().fetch({method:"GET",url:`/api/query-history?${t}`,requestId:"query-history-get-all"}))).data;return{richHistory:(n.result.queryHistory||[]).map(l),total:n.result.totalCount||0}}async getSettings(){var e;return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:"starred"===(null===(e=(await this.preferenceService.load()).queryHistory)||void 0===e?void 0:e.homeTab)}}async updateComment(e,t){const n=await(0,a.i)().patch(`/api/query-history/${e}`,{comment:t});return l(n.result)}updateSettings(e){return this.preferenceService.patch({queryHistory:{homeTab:e.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(e,t){let n;return n=t?await(0,a.i)().post(`/api/query-history/star/${e}`):await(0,a.i)().delete(`/api/query-history/star/${e}`),l(n.result)}async migrate(e){const t={queries:e.map(d)};await(0,s.n)((0,a.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:t,showSuccessAlert:!1}))}}},836:(e,t,n)=>{"use strict";let s,a;n.d(t,{V:()=>a,j:()=>s}),function(e){e.StorageFull="StorageFull",e.DuplicatedEntry="DuplicatedEntry"}(s||(s={})),function(e){e.LimitExceeded="LimitExceeded"}(a||(a={}))},98771:(e,t,n)=>{"use strict";n.d(t,{Jo:()=>r,ZX:()=>i,hO:()=>l});var s=n(82897),a=n(56650);function i(e,t,n,a,i){const l=function(e,t){return t.length>0?e.filter((e=>t.includes(e.datasourceName))):e}(e,n),d=function(e,t){return e.filter((e=>{if(e.comment.includes(t))return!0;return e.queries.filter((e=>Object.values((0,s.omit)(e,["datasource","key","refId","hide","queryType"])).some((e=>null==e?void 0:e.toString().includes(t))))).length>0}))}(l,a),c=i?function(e,t){const n=r(t[0],!0),s=r(t[1],!1);return e.filter((e=>e.createdAt<n&&e.createdAt>s))}(d,i):d;return o(c,t)}const r=(e,t)=>{const n=new Date,s=new Date(n.setDate(n.getDate()-e));return t?s.setHours(24,0,0,0):s.setHours(0,0,0,0)};const o=(e,t)=>{let n;return t===a.A.Ascending&&(n=(e,t)=>e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0),t===a.A.Descending&&(n=(e,t)=>e.createdAt<t.createdAt?1:e.createdAt>t.createdAt?-1:0),t===a.A.DatasourceZA&&(n=(e,t)=>e.datasourceName<t.datasourceName?-1:e.datasourceName>t.datasourceName?1:0),t===a.A.DatasourceAZ&&(n=(e,t)=>e.datasourceName<t.datasourceName?1:e.datasourceName>t.datasourceName?-1:0),e.sort(n)},l={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},83821:(e,t,n)=>{"use strict";n.d(t,{X:()=>u,b:()=>c});var s=n(65737),a=n(68374),i=n(56650),r=n(53018),o=n(40325);const l=new r.ZP,d=new o.Z,c=()=>s.v.queryHistoryEnabled?d:l,u=()=>s.v.queryHistoryEnabled?{availableFilters:[i.A.Descending,i.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.Vt.isSignedIn}:{availableFilters:[i.A.Descending,i.A.Ascending,i.A.DatasourceAZ,i.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},19200:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var s=n(68404),a=n(64850),i=n(40264);function r(e){const t=(0,a.I0)(),n=(0,s.useRef)(e);n.current=e,(0,s.useEffect)((()=>()=>{t((0,i.e)({cleanupAction:n.current}))}),[t])}},62847:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var s=n(68404);function a(e){let{breakpoint:t,onChange:n}=e;(0,s.useEffect)((()=>{const e=window.matchMedia(`(max-width: ${t}px)`),s=e=>n(e);return e.addEventListener("change",s),()=>e.removeEventListener("change",s)}),[t,n])}},40901:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var s=n(64850),a=n(85829);const i=e=>{const t=(0,s.v9)((e=>e.navIndex));return(0,a.ht)(t,e)}},19512:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var s=n(68404),a=n(70356),i=n(80795);function r(){const{search:e}=(0,a.TH)();return[(0,s.useMemo)((()=>(0,i.Ox)(e||"")),[e]),(0,s.useCallback)(((e,t)=>i.E1.partial(e,t)),[])]}},89103:(e,t,n)=>{"use strict";n.d(t,{ZW:()=>a,cI:()=>r,lE:()=>i});const s="en-US",a=s,i=[{code:s,name:"English",loader:()=>Promise.resolve({})},{code:"fr-FR",name:"Français",loader:()=>n.e(6419).then(n.t.bind(n,58756,19))},{code:"es-ES",name:"Español",loader:()=>n.e(6008).then(n.t.bind(n,4253,19))},{code:"de-DE",name:"Deutsch",loader:()=>n.e(810).then(n.t.bind(n,90810,19))},{code:"zh-Hans",name:"中文（简体）",loader:()=>n.e(5001).then(n.t.bind(n,35001,19))}];const r=i.map((e=>e.code))},35448:(e,t,n)=>{"use strict";n.d(t,{$q:()=>h,cC:()=>c,t:()=>u,uC:()=>d});var s=n(36509),a=(n(68404),n(4696)),i=n(45710),r=n(89103),o=n(45916);const l={type:"backend",init(){},async read(e,t,n){const s=r.lE.find((t=>t.code===e));if(!s)return n(new Error("No message loader available for "+e),null);n(null,await s.loader())}};function d(e){const t=r.cI.includes(e)?e:r.ZW;s.ZP.use(l).use(a.Db).init({lng:t,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"}),u("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source")}const c=e=>(0,o.jsx)(i.c,Object.assign({},e)),u=(e,t,n)=>s.ZP.t(e,t,n),h=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)return h(new Date(e),n);const a=null!==(t=s.ZP.options.lng)&&void 0!==t?t:r.ZW,i=new Intl.DateTimeFormat(a,n);return i.format(e)}},57322:(e,t,n)=>{"use strict";n.d(t,{Qp:()=>N,aB:()=>E,UW:()=>M,nu:()=>L,Bz:()=>W});var s=n(82897),a=n(46060),i=n(36683),r=n(85526),o=n(93246),l=n(68633),d=n(26222),c=n(27843),u=n(663),h=n(41785),p=n(88246),g=n(76093),m=n(6432),f=n(85699),v=n(57171),b=n(28173),x=n(87726),y=n(27864),w=n(57971),j=n(2525),S=n(46782);var C=n(97281);const k="Line limit",N="Common labels",O={[o.in.critical]:w.O9[7],[o.in.warning]:w.O9[1],[o.in.error]:w.O9[4],[o.in.info]:w.O9[0],[o.in.debug]:w.O9[5],[o.in.trace]:w.O9[2],[o.in.unknown]:(I="#8e8e8e",T="#bdc4cd",S.ZP.bootData.user.lightTheme?T:I)};var I,T;const $=1e3,R=6e4,P=36e5,D=24*P,A=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function M(e,t){return t===o.Y4.none?e:e.reduce(((e,n,s)=>{const a=Object.assign({},n),i=e[e.length-1];return s>0&&function(e,t,n){switch(n){case o.Y4.exact:return e.entry.replace(A,"")===t.entry.replace(A,"");case o.Y4.numbers:return e.entry.replace(/\d/g,"")===t.entry.replace(/\d/g,"");case o.Y4.signature:return e.entry.replace(/\w/g,"")===t.entry.replace(/\w/g,"");default:return!1}}(n,i,t)?i.duplicates++:(a.duplicates=0,e.push(a)),e}),[])}function L(e,t){return 0===t.size?e:e.filter((e=>!t.has(e.logLevel)))}function F(e){return e.fields.some((e=>e.type===c.fS.time))&&e.fields.some((e=>e.type===c.fS.string))}function E(e,t,n,a){const{logSeries:i}=function(e){const t=[],n=[];for(const s of e)!F(s)&&s.fields.length?s.length>0&&t.push(s):n.push(s);return{logSeries:n,metricSeries:t}}(e),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)return;const n=[];let a=[];const i=e.filter((e=>e.fields.length));i.length&&i.forEach((e=>{var t,s;const i=new d.N(e),r=i.getFirstFieldOfType(c.fS.string),o=i.getFirstFieldOfType(c.fS.time),l="LabeledTimeValues"===(null===(t=e.meta)||void 0===t||null===(s=t.custom)||void 0===s?void 0:s.frameType)?i.getFieldByName("labels"):void 0;if(void 0!==r&&void 0!==o){const t={series:e,timeField:o,labelsField:l,timeNanosecondField:i.getFieldByName("tsNs"),stringField:r,logLevelField:i.getFieldByName("level"),idField:B(i)};a.push(t);const s=V(t);s.length>0&&n.push(s)}}));const r=n.flat(),l=r.length>0?(0,h.FT)(r):{},u=[];let f=!1;for(const e of a){const{timeField:n,timeNanosecondField:s,stringField:a,logLevelField:i,idField:r,series:d}=e;for(let c=0;c<d.length;c++){var v,b,y;const x=n.values.get(c),w=(0,p.zh)(x),S=s?s.values.get(c):void 0,k=S||w.valueOf()+"000000",N=null!==(v=a.values.get(c))&&void 0!==v?v:"",O="string"==typeof N?N:JSON.stringify(N),I=g.QX.hasAnsiCodes(O),T=!!O.match(/\\n|\\t|\\r/),$=d.meta&&d.meta.searchWords?d.meta.searchWords:[],R=I?j._J.strip(O):O,P=z(e,c),D=(0,h.IU)(P,l);Object.keys(D).length>0&&(f=!0);let A=o.in.unknown;const M=i&&i.values.get(c)||P&&P.level;A=M?(0,C.jx)(M):(0,C.ZO)(R);const L=null===(b=t.find((e=>e.refId===d.refId)))||void 0===b||null===(y=b.datasource)||void 0===y?void 0:y.type;u.push({entryFieldIndex:a.index,rowIndex:c,dataFrame:d,logLevel:A,timeFromNow:(0,m.E8)(x),timeEpochMs:w.valueOf(),timeEpochNs:k,timeLocal:(0,m.dq)(x,{timeZone:"browser"}),timeUtc:(0,m.dq)(x,{timeZone:"utc"}),uniqueLabels:D,hasAnsi:I,hasUnescapedContent:T,searchWords:$,entry:R,raw:O,labels:P||{},uid:r?r.values.get(c):c.toString(),datasourceType:L})}}const w=[];(0,s.size)(l)>0&&w.push({label:N,value:l,kind:o.Ku.LabelsMap});const S=e.filter((e=>e.meta&&e.meta.limit)).reduce(((e,t)=>{var n,s,a;return e[null!==(n=t.refId)&&void 0!==n?n:""]=null!==(s=null===(a=t.meta)||void 0===a?void 0:a.limit)&&void 0!==s?s:0,e}),{}),O=Object.values(S).reduce(((e,t)=>e+t),0);O>0&&w.push({label:k,value:O,kind:o.Ku.Number});let I=0;const T={};let $=!1;for(const t of e){var R,P,D,A;const e=null===(R=t.meta)||void 0===R||null===(P=R.custom)||void 0===P?void 0:P.lokiQueryStatKey,{refId:n}=t;var M;if(!$&&null!==(D=t.meta)&&void 0!==D&&null!==(A=D.custom)&&void 0!==A&&A.error)w.push({label:"",value:null===(M=t.meta)||void 0===M?void 0:M.custom.error,kind:o.Ku.Error}),$=!0;if(n&&!T[n]){var L;if(e&&null!==(L=t.meta)&&void 0!==L&&L.stats){const n=t.meta.stats.find((t=>t.displayName===e));n&&(I+=n.value)}T[n]=!0}}if(I>0){const{text:e,suffix:t}=(0,x.i7)("B")(I);w.push({label:"Total bytes processed",value:`${e} ${t}`,kind:o.Ku.String})}return{hasUniqueLabels:f,meta:w,rows:u}}(i,a);if(r){if(t&&r.rows.length>0){const e=r.rows.sort(C.DA),{visibleRange:s,bucketSize:a,visibleRangeMs:i,requestedRangeMs:h}=function(e,t,n){let s,a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=n,l=t,d=Math.max(l*i,r);if(n){const t=e[0].timeEpochMs;if(a=n.to-n.from,s=n.to-t,s>0){l*=s/a,d=Math.max(Math.ceil(l*i),r);o={from:Math.floor(t/d)*d,to:n.to}}else s=1}return{bucketSize:d,visibleRange:o,visibleRangeMs:s,requestedRangeMs:a}}(e,t,n);r.visibleRange=s,r.series=function(e,t){const n={},s=[];for(const a of e){let e=n[a.logLevel];e||(n[a.logLevel]=e={lastTs:null,datapoints:[],target:a.logLevel,color:O[a.logLevel]},s.push(e));const i=Math.floor(a.timeEpochMs/t)*t;i===e.lastTs?e.datapoints[e.datapoints.length-1][0]++:(e.datapoints.push([1,i]),e.lastTs=i);for(const t of s)t!==e&&t.lastTs!==i&&(t.datapoints.push([0,i]),t.lastTs=i)}return s.map(((e,t)=>{e.datapoints.sort(((e,t)=>e[1]-t[1]));const n=(0,l.g0)(e),s=new d.N(n).getFirstFieldOfType(c.fS.number);return n.fields[s.index].config.min=0,n.fields[s.index].config.decimals=0,n.fields[s.index].config.color={mode:u.S.Fixed,fixedColor:e.color},n.fields[s.index].config.custom={drawStyle:y.l8.Bars,barAlignment:y.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:e.color,pointColor:e.color,fillColor:e.color,lineWidth:0,fillOpacity:100,stacking:{mode:y.o0.Normal,group:"A"}},n}))}(e,a),r.meta&&(r.meta=function(e,t,n){var s;let a=[...e.meta];const i=a.findIndex((e=>e.label===k)),r=i>=0&&(null===(s=a[i])||void 0===s?void 0:s.value);if(r&&r>0){let s;if(r===e.rows.length&&t&&n){s=`${r} reached, received logs cover ${(t/n*100).toFixed(2)}% (${f.msRangeToTimeString(t)}) of your selected time range (${f.msRangeToTimeString(n)})`}else s=`${r} (${e.rows.length} returned)`;a[i]={label:k,value:s,kind:o.Ku.String}}return a}(r,i,h))}else r.series=[];return r.queries=a,r}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:a}}function V(e){const{stringField:t,labelsField:n}=e;return void 0!==n?n.values.toArray():[null!==(s=t.labels)&&void 0!==s?s:{}];var s}function z(e,t){const{stringField:n,labelsField:s}=e;return void 0!==s?s.values.get(t):null!==(a=n.labels)&&void 0!==a?a:{};var a}function B(e){const t=["id"];for(const n of t){const t=e.getFieldByName(n);if(t)return t}}function _(e,t){const n={};return e.forEach((e=>{const s=t(e);n[s]||(n[s]=[]),n[s].push(e)})),Object.keys(n).map((e=>function(e,t){const n=new v.v;if(!e.length)return n;const s=e[0].length,a=new d.N(e[0]).getFirstFieldOfType(c.fS.time);if(!a)return n;return n.addField({name:"Time",type:c.fS.time},s),n.addField({name:"Value",type:c.fS.number,config:t},s),e.forEach((e=>{e.fields.forEach((e=>{if(e.type===c.fS.number)for(let t=0;t<s;t++){const s=n.get(t).Value,i=e.values.get(t),r=null===s&&null===i?null:(s||0)+(i||0);n.set(t,{Value:r,Time:a.values.get(t)})}}))})),n}(n[e],function(e,t){const n=t&&e===o.in.unknown?"logs":e,s=O[e];return{displayNameFromDS:n,color:{mode:u.S.Fixed,fixedColor:s},custom:{drawStyle:y.l8.Bars,barAlignment:y.pu.Center,lineColor:s,pointColor:s,fillColor:s,lineWidth:1,fillOpacity:100,stacking:{mode:y.o0.Normal,group:"A"}}}}(e,1===Object.keys(n).length))))}function W(e,t,n){const s=n.range.to.valueOf()-n.range.from.valueOf(),o=function(e,t){if(e.__interval){let n=e.__interval_ms.value,s="";return t<5e3?(n=1,s="1ms"):n>P?(n=D,s="1d"):n>R?(n=P,s="1h"):n>$?(n=R,s="1m"):(n=$,s="1s"),{interval:s,intervalMs:n}}return{interval:"$__interval"}}(t.scopedVars,s);return t.interval=o.interval,t.scopedVars.__interval={value:o.interval,text:o.interval},void 0!==o.intervalMs&&(t.intervalMs=o.intervalMs,t.scopedVars.__interval_ms={value:o.intervalMs,text:o.intervalMs}),t.hideFromInspector=!0,new a.y((s=>{let a=[];s.next({state:b.Gu.Loading,error:void 0,data:[]});const o=e.query(t),d=((0,i.b)(o)?o:(0,r.D)(o)).subscribe({complete:()=>{const e=_(a,n.extractLevel);e[0]&&(e[0].meta={custom:{targets:n.targets,absoluteRange:{from:n.range.from.valueOf(),to:n.range.to.valueOf()}}}),s.next({state:b.Gu.Done,error:void 0,data:e}),s.complete()},next:e=>{const{error:t}=e;void 0!==t?(s.next({state:b.Gu.Error,error:t,data:[]}),s.error(t)):a=a.concat(e.data.map(l.g0))},error:e=>{s.next({state:b.Gu.Error,error:e,data:[]}),s.error(e)}});return()=>{null==d||d.unsubscribe()}}))}},13776:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var s=n(64850);function a(e){switch(e.kiosk){case"tv":return s.UX.TV;case"1":case!0:return s.UX.Full;default:return null}}},94080:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{r:()=>a});const a=new class{constructor(){s(this,"panelsRendered",0),s(this,"enabled",void 0)}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}},11035:(e,t,n)=>{"use strict";n.d(t,{$l:()=>d,Av:()=>m,F6:()=>h,Jk:()=>p,VW:()=>g,ad:()=>c,hS:()=>u,mE:()=>f,vo:()=>v});var s,a=n(23067),i=n(64850);const r="notifications",o={byId:function(){const e=window.localStorage.getItem(r);if(!e)return{};const t=JSON.parse(e);if(!Object.values(t).every((e=>{return"object"==typeof(t=e)&&null!==t&&"id"in t&&"icon"in t&&"title"in t&&"text"in t;var t})))return{};return t}(),lastRead:Number.parseInt(null!==(s=window.localStorage.getItem("notifications/lastRead"))&&void 0!==s?s:`${Date.now()}`,10)},l=(0,a.oM)({name:"appNotifications",initialState:o,reducers:{notifyApp:(e,t)=>{let{payload:n}=t;Object.values(e.byId).some((e=>{return s=e,(t=n).icon===s.icon&&t.severity===s.severity&&t.text===s.text&&t.title===s.title&&e.showing;var t,s}))||(e.byId[n.id]=n,x(e.byId))},hideAppNotification:(e,t)=>{let{payload:n}=t;n in e.byId&&(e.byId[n].showing=!1,x(e.byId))},clearNotification:(e,t)=>{let{payload:n}=t;delete e.byId[n],x(e.byId)},clearAllNotifications:e=>{e.byId={},x(e.byId)},readAllNotifications:(e,t)=>{let{payload:n}=t;e.lastRead=n}}}),{notifyApp:d,hideAppNotification:c,clearNotification:u,clearAllNotifications:h,readAllNotifications:p}=l.actions,g=l.reducer,m=e=>e.lastRead,f=e=>(e=>Object.values(e.byId).sort(((e,t)=>t.timestamp-e.timestamp)))(e).filter(b),v=e=>Object.values(e.byId).filter((e=>e.showing));function b(e){return e.severity===i.F1.Warning||e.severity===i.F1.Error}function x(e){const t=Object.values(e).filter(b).sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,25).reduce(((e,t)=>(e[t.id]={id:t.id,severity:t.severity,icon:t.icon,title:t.title,text:t.text,traceId:t.traceId,timestamp:t.timestamp,showing:t.showing},e)),{});try{window.localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error("Unable to persist notifications to local storage"),console.error(e)}}},26056:(e,t,n)=>{"use strict";n.d(t,{OQ:()=>d,V4:()=>u,gd:()=>c});var s,a,i=n(23067);const r=null!==(s=null===(a=n(65737).v.bootData)||void 0===a?void 0:a.navTree)&&void 0!==s?s:[],o="starred/",l=(0,i.oM)({name:"navBarTree",initialState:r,reducers:{setStarred:(e,t)=>{const n=e.find((e=>"starred"===e.id)),{id:s,title:a,url:i,isStarred:r}=t.payload;if(n)if(r){n.children||(n.children=[]);const e={id:o+s,text:a,url:i};n.children.push(e),n.children.sort(((e,t)=>e.text.localeCompare(t.text)))}else{var l,d;const e=null!==(l=null===(d=n.children)||void 0===d?void 0:d.findIndex((e=>e.id===o+s)))&&void 0!==l?l:-1;var c;if(e>-1)null==n||null===(c=n.children)||void 0===c||c.splice(e,1)}},updateDashboardName:(e,t)=>{const{id:n,title:s,url:a}=t.payload,i=e.find((e=>"starred"===e.id));if(i){var r;const e=null===(r=i.children)||void 0===r?void 0:r.find((e=>e.id===n));var o;if(e)e.text=s,e.url=a,null===(o=i.children)||void 0===o||o.sort(((e,t)=>e.text.localeCompare(t.text)))}}}}),{setStarred:d,updateDashboardName:c}=l.actions,u=l.reducer},33994:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>o,G4:()=>g,H7:()=>h,Qz:()=>r,RL:()=>u});var s=n(23067),a=n(82897),i=n(46782);const r="home";function o(){const e={},t=(0,a.cloneDeep)(i.ZP.bootData.navTree),n=t.find((e=>e.id===r)),s=t.filter((e=>e.id!==r));return n&&l(e,[n]),l(e,s,n),e}function l(e,t,n){for(const s of t)s.parentItem=n,s.id&&(e[s.id]=s),s.children&&l(e,s.children,s);e["not-found"]=Object.assign({},d("Page not found","404 Error").node),e.error=Object.assign({},d("Page error","An unexpected error").node)}function d(e,t){const n={text:e,subTitle:t,icon:"exclamation-triangle"};return{node:n,main:n}}const c={},u=(0,s.PH)("navIndex/updateNavIndex"),h=(0,s.PH)("navIndex/updateConfigurationSubtitle"),p=(e,t)=>{var n,s;return Object.assign({},e,{parentItem:Object.assign({},e.parentItem,{text:null!==(n=null===(s=e.parentItem)||void 0===s?void 0:s.text)&&void 0!==n?n:"",subTitle:t})})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;if(u.match(t)){const n={},s=t.payload;for(const e of s.children)n[e.id]=Object.assign({},e,{parentItem:s});return Object.assign({},e,n)}if(h.match(t)){const n=`Organization: ${t.payload}`;return Object.assign({},e,{cfg:Object.assign({},e.cfg,{subTitle:n}),datasources:p(e.datasources,n),correlations:p(e.correlations,n),users:p(e.users,n),teams:p(e.teams,n),plugins:p(e.plugins,n),"org-settings":p(e["org-settings"],n),apikeys:p(e.apikeys,n)})}return e}},85829:(e,t,n)=>{"use strict";n.d(t,{ht:()=>i,vw:()=>r});var s=n(33994);const a=()=>{const e={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:e,main:e}},i=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e[t]){const n=e[t];return{node:n,main:o(s?n:r(n),t)}}return n||a()};function r(e){return e.parentItem&&e.parentItem.id!==s.Qz?r(e.parentItem):e}function o(e,t){return e.id===t?Object.assign({},e,{active:!0}):e.children&&e.children.length>0?Object.assign({},e,{children:e.children.map((e=>o(e,t)))}):e}},13498:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var s=n(42200);class a{constructor(e){this.resourceUri=e}update(e){return s.ae.put(`/api/${this.resourceUri}/preferences`,e)}patch(e){return s.ae.patch(`/api/${this.resourceUri}/preferences`,e)}load(){return s.ae.get(`/api/${this.resourceUri}/preferences`)}}},62806:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var s=n(68404),a=n(96209),i=n(80589);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e){r(this,"_subject",new a.x),r(this,"_state",void 0),this._state=e}useState(){return function(e){const t=(0,i.N)();return(0,s.useEffect)((()=>{const n=e.subscribeToState({next:t});return()=>n.unsubscribe()}),[e,t]),e.state}(this)}get state(){return this._state}setState(e){this._state=Object.assign({},this._state,e),this._subject.next(this._state)}subscribeToState(e){return this._subject.subscribe(e)}}},42200:(e,t,n)=>{"use strict";n.d(t,{y$:()=>X,ae:()=>ee,i:()=>te});var s,a=n(96209),i=n(3363),r=n(46060),o=n(95484),l=n(16313),d=n(37537),c=n(53786),u=n(85526),h=n(42335),p=n(2101),g=n(14542),m=n(29236),f=n(94514),v=n(98356),b=n(44962),x=n(47994),y=n(67305),w=n(80136),j=n(44288),S=n(94025),C=n(23214),k=n(65737),N=n(2247),O=n(46782),I=n(77341),T=n(81508),$=n(52423),R=(n(68404),n(16755)),P=n(48717),D=n(89902),A=n(8006),M=n(50191),L=n(18714),F=n(45916);const E=e=>{const t=(0,R.l4)(),n=V(t),a=(0,L.J)(t),i=Boolean(e.maxConcurrentSessions);return(0,F.jsxs)(P.h_,{children:[(0,F.jsx)("div",{className:a.modal,children:(0,F.jsxs)(D.v,{title:"You have been automatically signed out",severity:"warning",className:n.infobox,children:[(0,F.jsxs)("div",{className:n.text,children:[(0,F.jsxs)("p",{children:["Your session token was automatically revoked because you have reached",(0,F.jsx)("strong",{children:` the maximum number of ${i?e.maxConcurrentSessions:""} concurrent sessions `}),"for your account."]}),s||(s=(0,F.jsxs)("p",{children:[(0,F.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]}))]}),(0,F.jsx)(A.zx,{size:"md",variant:"primary",onClick:()=>{window.location.reload()},children:"Sign in"})]})}),(0,F.jsx)("div",{className:(0,$.cx)(a.modalBackdrop,n.backdrop)})]})},V=(0,M.B)((e=>({infobox:$.css`
      margin-bottom: 0;
    `,text:$.css`
      margin: ${e.spacing(1,0,2)};
    `,backdrop:$.css`
      background-color: ${e.colors.background.canvas};
      opacity: 0.8;
    `})));var z=n(8105),B=n(40225),_=n(52253);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let U;!function(e){e[e.Pending=0]="Pending",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done"}(U||(U={}));class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];W(this,"state",{}),W(this,"queue",new a.x),W(this,"updates",new a.x),W(this,"add",((e,t)=>this.queue.next({id:e,options:t,state:U.Pending}))),W(this,"setInProgress",(e=>this.queue.next({id:e,state:U.InProgress}))),W(this,"setDone",(e=>this.queue.next({id:e,state:U.Done}))),W(this,"getUpdates",(()=>this.updates.asObservable())),W(this,"getUpdate",(e=>{const t=Object.keys(e).filter((t=>e[t].state===U.InProgress)).length;return{noOfPending:Object.keys(e).filter((t=>e[t].state===U.Pending)).length,noOfInProgress:t,state:e}})),W(this,"publishUpdate",((e,t)=>{this.printState(e,t),this.updates.next(e)})),W(this,"printState",((e,t)=>{if(!t)return;const n=Object.keys(e.state).reduce(((t,n)=>{const s={id:n,state:e.state[n].state};return t.push(s),t}),[]);console.log("FetchQueue noOfStarted",e.noOfInProgress),console.log("FetchQueue noOfNotStarted",e.noOfPending),console.log("FetchQueue state",n)})),this.queue.subscribe((t=>{const{id:n,state:s,options:a}=t;if(this.state[n]||(this.state[n]={state:U.Pending,options:{}}),s===U.Done){delete this.state[n];const t=this.getUpdate(this.state);return void this.publishUpdate(t,e)}this.state[n].state=s,a&&(this.state[n].options=a);const i=this.getUpdate(this.state);this.publishUpdate(i,e)}))}}var q=n(39409);class Z{constructor(e,t,n){const s=null!=n&&n.http2Enabled?1e3:5;e.getUpdates().pipe((0,g.h)((e=>{let{noOfPending:t}=e;return t>0})),(0,q.b)((e=>{let{state:t,noOfInProgress:n}=e;const a=Object.keys(t).filter((e=>t[e].state===U.Pending&&!(0,_.mu)(t[e].options.url))).reduce(((e,n)=>{const s={id:n,options:t[n].options};return e.push(s),e}),[]),i=Object.keys(t).filter((e=>t[e].state===U.Pending&&(0,_.mu)(t[e].options.url))).reduce(((e,n)=>{const s={id:n,options:t[n].options};return e.push(s),e}),[]),r=Math.max(s-n-a.length,0),o=i.slice(0,r);return a.concat(o)}))).subscribe((e=>{let{id:n,options:s}=e;t.add(n,s)}))}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Q{constructor(e,t){G(this,"queue",new a.x),G(this,"responses",new a.x),G(this,"add",((e,t)=>{this.queue.next({id:e,options:t})})),G(this,"getResponses",(e=>this.responses.asObservable().pipe((0,g.h)((t=>t.id===e))))),this.queue.subscribe((n=>{const{id:s,options:a}=n;e.setInProgress(s),this.responses.next({id:s,observable:t(a)})}))}}var K=n(59196);function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y="cancel_all_requests_request_id";class X{constructor(e){J(this,"inFlightRequests",new a.x),J(this,"HTTP_REQUEST_CANCELED",-1),J(this,"noBackendCache",void 0),J(this,"inspectorStream",new a.x),J(this,"fetchQueue",void 0),J(this,"responseQueue",void 0),J(this,"dependencies",{fromFetch:h.U,appEvents:N.Z,contextSrv:K.Vt,logout:()=>{K.Vt.setLoggedOut(),window.location.reload()}}),e&&(this.dependencies=Object.assign({},this.dependencies,e)),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new H,this.responseQueue=new Q(this.fetchQueue,this.internalFetch),new Z(this.fetchQueue,this.responseQueue,(0,O.iE)())}async request(e){return await(0,i.n)(this.fetch(e).pipe((0,p.U)((e=>e.data))))}fetch(e){const t=(0,j.Z)(),n=this.fetchQueue;return new r.y((s=>{const a=new o.w0;return a.add(this.responseQueue.getResponses(t).subscribe((e=>{a.add(e.observable.subscribe(s))}))),this.fetchQueue.add(t,e),function(){n.setDone(t),a.unsubscribe()}}))}internalFetch(e){e.requestId&&this.inFlightRequests.next(e.requestId),e=this.parseRequestOptions(e);const t=(0,I.v)();null!==t&&""!==t&&(e.headers||(e.headers={}),k.v.jwtUrlLogin&&k.v.jwtHeaderName&&(e.headers[k.v.jwtHeaderName]=`${t}`));const n=this.getFromFetchStream(e),s=n.pipe(this.toFailureStream(e)),a=n.pipe((0,g.h)((e=>!0===e.ok)),(0,m.b)((e=>{this.showSuccessAlert(e),this.inspectorStream.next(e)})));return(0,l.T)(a,s).pipe((0,f.K)((t=>(0,d._)(this.processRequestError(e,t)))),this.handleStreamCancellation(e))}resolveCancelerIfExists(e){this.inFlightRequests.next(e)}cancelAllInFlightRequests(){this.inFlightRequests.next(Y)}async datasourceRequest(e){return(0,i.n)(this.fetch(e))}parseRequestOptions(e){var t,n;const s=null===(t=this.dependencies.contextSrv.user)||void 0===t?void 0:t.orgId;if(e.retry=null!==(n=e.retry)&&void 0!==n?n:0,(0,_.R8)(e.url)){var a,i,r;if(s)e.headers=null!==(i=e.headers)&&void 0!==i?i:{},e.headers["X-Grafana-Org-Id"]=s;if(e.url.startsWith("/")&&(e.url=e.url.substring(1)),null!==(a=e.headers)&&void 0!==a&&a.Authorization&&(e.headers["X-DS-Authorization"]=e.headers.Authorization,delete e.headers.Authorization),this.noBackendCache)e.headers=null!==(r=e.headers)&&void 0!==r?r:{},e.headers["X-Grafana-NoCache"]="true"}return void 0===e.hideFromInspector&&(e.hideFromInspector=(0,_.R8)(e.url)&&!(0,_.mu)(e.url)),e}getFromFetchStream(e){const t=(0,B.Xv)(e),n=(0,B.nS)(e);return this.dependencies.fromFetch(t,n).pipe((0,v.z)((async t=>{var n;const{status:s,statusText:a,ok:i,headers:r,url:o,type:l,redirected:d}=t,c=null!==(n=e.responseType)&&void 0!==n?n:(0,B.rZ)(r)?"json":void 0;return{status:s,statusText:a,ok:i,data:await(0,B.aO)(t,c),headers:r,url:o,type:l,redirected:d,config:e}})),(0,b.B)())}toFailureStream(e){const{isSignedIn:t}=this.dependencies.contextSrv.user;return n=>n.pipe((0,g.h)((e=>!1===e.ok)),(0,v.z)((t=>{const{status:n,statusText:s,data:a}=t,i={status:n,statusText:s,data:a,config:e};return(0,d._)(i)})),(0,x.a)((n=>n.pipe((0,v.z)(((n,s)=>{const a=0===s&&0===e.retry;var i,r,o,l;return 401===n.status&&(0,_.R8)(e.url)&&a&&t?"ERR_TOKEN_REVOKED"===(null===(i=n.data)||void 0===i||null===(r=i.error)||void 0===r?void 0:r.id)?(this.dependencies.appEvents.publish(new z.Dn({component:E,props:{maxConcurrentSessions:null===(o=n.data)||void 0===o||null===(l=o.error)||void 0===l?void 0:l.maxConcurrentSessions}})),(0,c.of)({})):(0,u.D)(this.loginPing()).pipe((0,f.K)((e=>401===e.status?(this.dependencies.logout(),(0,d._)(e)):(0,d._)(e)))):(0,d._)(n)}))))))}showApplicationErrorAlert(e){}showSuccessAlert(e){const{config:t}=e;if(!1===t.showSuccessAlert)return;if(void 0===t.showSuccessAlert&&("GET"===t.method||(0,_.mu)(t.url)||!(0,_.R8)(t.url)))return;const n=e.data;null!=n&&n.message&&this.dependencies.appEvents.emit(S.SI.alertSuccess,[n.message])}showErrorAlert(e,t){if(!1===e.showErrorAlert)return;if(void 0===e.showErrorAlert&&((0,_.mu)(e.url)||!(0,_.R8)(e.url)))return;let n="",s=t.data.message;s.length>80&&(n=s,s="Error"),422===t.status&&(s="Validation failed"),this.dependencies.appEvents.emit(t.status<500?S.SI.alertWarning:S.SI.alertError,[s,n,t.data.traceID])}processRequestError(e,t){var n;return t.data=null!==(n=t.data)&&void 0!==n?n:{message:"Unexpected error"},"string"==typeof t.data&&(t.data={message:t.data,error:t.statusText,response:t.data}),t.data&&!t.data.message&&"string"==typeof t.data.error&&(t.data.message=t.data.error),t.data.message&&setTimeout((()=>{t.isHandled||this.showErrorAlert(e,t)}),50),this.inspectorStream.next(t),t}handleStreamCancellation(e){return t=>t.pipe((0,y.R)(this.inFlightRequests.pipe((0,g.h)((t=>{let n=!1;return e&&e.requestId&&e.requestId===t&&(n=!0),t===Y&&(n=!0),n})))),(0,w.T)((()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:e}))))}getInspectorStream(){return this.inspectorStream}async get(e,t,n,s){return this.request(Object.assign({},s,{method:"GET",url:e,params:t,requestId:n}))}async delete(e,t,n){return this.request(Object.assign({},n,{method:"DELETE",url:e,data:t}))}async post(e,t,n){return this.request(Object.assign({},n,{method:"POST",url:e,data:t}))}async patch(e,t,n){return this.request(Object.assign({},n,{method:"PATCH",url:e,data:t}))}async put(e,t,n){return this.request(Object.assign({},n,{method:"PUT",url:e,data:t}))}withNoBackendCache(e){return this.noBackendCache=!0,e().finally((()=>{this.noBackendCache=!1}))}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(e){return this.get("/api/search",e)}getDashboardByUid(e){return e.indexOf("/")>0&&k.v.featureToggles.dashboardsFromStorage?(0,T.$)().getDashboard(e):this.get(`/api/dashboards/uid/${e}`)}validateDashboard(e){const t=JSON.stringify(e,ne,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:t},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(e){return this.get(`/api/public/dashboards/${e}`)}getFolderByUid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URLSearchParams;return t.withAccessControl&&n.set("accesscontrol","true"),this.get(`/api/folders/${e}?${n.toString()}`)}}const ee=new X,te=()=>ee;function ne(e,t){if("number"!=typeof t||Number.isFinite(t))return t}},59196:(e,t,n)=>{"use strict";n.d(t,{Vt:()=>u});var s=n(82897),a=n(85699),i=n(93570),r=n(72677),o=n(64850),l=n(46782);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c{constructor(){d(this,"isSignedIn",void 0),d(this,"id",void 0),d(this,"login",void 0),d(this,"email",void 0),d(this,"name",void 0),d(this,"externalUserId",void 0),d(this,"lightTheme",void 0),d(this,"orgCount",void 0),d(this,"orgId",void 0),d(this,"orgName",void 0),d(this,"orgRole",void 0),d(this,"isGrafanaAdmin",void 0),d(this,"gravatarUrl",void 0),d(this,"timezone",void 0),d(this,"weekStart",void 0),d(this,"locale",void 0),d(this,"helpFlags1",void 0),d(this,"hasEditPermissionInFolders",void 0),d(this,"permissions",void 0),d(this,"fiscalYearStartMonth",void 0),this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.lightTheme=!1,this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.weekStart="",this.gravatarUrl="",l.ZP.bootData.user&&(0,s.extend)(this,l.ZP.bootData.user)}}let u=new class{constructor(){d(this,"pinned",void 0),d(this,"version",void 0),d(this,"user",void 0),d(this,"isSignedIn",void 0),d(this,"isGrafanaAdmin",void 0),d(this,"isEditor",void 0),d(this,"sidemenuSmallBreakpoint",!1),d(this,"hasEditPermissionInFolders",void 0),d(this,"minRefreshInterval",void 0),l.ZP.bootData||(l.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new c,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=l.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,i.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(e){console.error(e)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(e){return"ServerAdmin"===e?this.isGrafanaAdmin:this.user.orgRole===e}accessControlEnabled(){return l.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,r.v)("accesscontrol")&&l.ZP.rbacEnabled}hasPermissionInMetadata(e,t){var n;return!this.accessControlEnabled()||!(null===(n=t.accessControl)||void 0===n||!n[e])}hasPermission(e){var t;return!this.accessControlEnabled()||!(null===(t=this.user.permissions)||void 0===t||!t[e])}isGrafanaVisible(){return void 0===document.visibilityState||"visible"===document.visibilityState}isAllowedInterval(e){return!l.ZP.minRefreshInterval||a.intervalToMs(e)>=a.intervalToMs(l.ZP.minRefreshInterval)}getValidInterval(e){return this.isAllowedInterval(e)?e:l.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(o.bW.DataSourcesExplore)&&l.ZP.exploreEnabled:(this.isEditor||l.ZP.viewersCanEdit)&&l.ZP.exploreEnabled}hasAccess(e,t){return this.accessControlEnabled()?this.hasPermission(e):t}hasAccessInMetadata(e,t,n){return this.accessControlEnabled()?this.hasPermissionInMetadata(e,t):n}evaluatePermission(e,t){return this.accessControlEnabled()?t.some((e=>this.hasPermission(e)))?[]:["Reject"]:e()}}},38467:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(82897),a=n(93570),i=n(46782),r=n(78130);const o=new class{constructor(){}addDashboardImpression(e){const t=this.impressionKey();let n=[];r.Z.exists(t)&&(n=JSON.parse(r.Z.get(t)),(0,s.isArray)(n)||(n=[])),n=n.filter((t=>e!==t)),n.unshift(e),n.length>50&&n.pop(),r.Z.set(t,JSON.stringify(n))}async convertToUIDs(){let e=this.getImpressions();const t=(0,s.filter)(e,(e=>(0,s.isNumber)(e)));if(!t.length)return;const n=await(0,a.i)().get(`/api/dashboards/ids/${t.join(",")}`);r.Z.set(this.impressionKey(),JSON.stringify([...(0,s.filter)(e,(e=>(0,s.isString)(e))),...n]))}getImpressions(){const e=r.Z.get(this.impressionKey())||"[]";return JSON.parse(e)}async getDashboardOpened(){try{await this.convertToUIDs()}catch(e){}return(0,s.filter)(this.getImpressions(),(e=>(0,s.isString)(e)))}impressionKey(){return"dashboard_impressions-"+i.ZP.bootData.user.orgId}}},63092:(e,t,n)=>{"use strict";n.d(t,{L:()=>d,X:()=>c});var s=n(35765),a=n(38251),i=n(2247),r=n(46782),o=n(68374),l=n(13498);async function d(e,t){const n=(0,s.j)({colors:{mode:e}});if(i.Z.publish(new a.hD(n)),r.vc.theme2.isDark=n.isDark,t)return;const d=document.createElement("link");if(d.rel="stylesheet",d.href=r.vc.bootData.themePaths[n.colors.mode],d.onload=()=>{const e=document.getElementsByTagName("link");for(let t=0;t<e.length;t++){const s=e[t];s.href&&s.href.includes("build/grafana."+(n.isDark?"light":"dark"))&&s.remove()}},document.body.appendChild(d),!o.Vt.isSignedIn)return;const c=new l.y("user"),u=await c.load();await c.update(Object.assign({},u,{theme:n.colors.mode}))}async function c(e){d(r.vc.theme2.isDark?"light":"dark",e)}},78130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=new class{get(e){return window.localStorage[e]}set(e,t){window.localStorage[e]=t}getBool(e,t){return void 0===t||this.exists(e)?"true"===window.localStorage[e]:t}getObject(e,t){let n=t;if(this.exists(e)){const s=window.localStorage[e];try{n=JSON.parse(s)}catch(n){console.error(`Error parsing store object: ${e}. Returning default: ${t}. [${n}]`)}}return n}setObject(e,t){let n;try{n=JSON.stringify(t)}catch(t){throw new Error(`Could not stringify object: ${e}. [${t}]`)}try{this.set(e,n)}catch(t){const n=new Error(`Could not save item in localStorage: ${e}. [${t}]`);throw t instanceof Error&&(n.name=t.name),n}return!0}exists(e){return void 0!==window.localStorage[e]}delete(e){window.localStorage.removeItem(e)}}},14186:(e,t,n)=>{"use strict";n.d(t,{W:()=>l,Z:()=>d});var s=n(82897),a=n(56949),i=n(55343);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!e)return!1;if("/"===e[0]){const n=(0,a.jO)(e);return null!=t.match(n)}return e===t}function l(e,t,n){for(let n=0;n<e.length;n++){const a=e[n],r=t.yaxes[(a.yaxis||1)-1],o=(0,i.Cf)(r.format);(0,s.isNumber)(t.decimals)?a.updateLegendValues(o,t.decimals):(0,s.isNumber)(r.decimals)?a.updateLegendValues(o,r.decimals+1):a.updateLegendValues(o,null)}}class d{constructor(e){r(this,"datapoints",void 0),r(this,"id",void 0),r(this,"dataFrameIndex",void 0),r(this,"fieldIndex",void 0),r(this,"label",void 0),r(this,"alias",void 0),r(this,"aliasEscaped",void 0),r(this,"color",void 0),r(this,"valueFormater",void 0),r(this,"stats",void 0),r(this,"legend",void 0),r(this,"hideTooltip",void 0),r(this,"allIsNull",void 0),r(this,"allIsZero",void 0),r(this,"decimals",void 0),r(this,"hasMsResolution",void 0),r(this,"isOutsideRange",void 0),r(this,"lines",void 0),r(this,"hiddenSeries",void 0),r(this,"dashes",void 0),r(this,"bars",void 0),r(this,"points",void 0),r(this,"yaxis",void 0),r(this,"zindex",void 0),r(this,"stack",void 0),r(this,"nullPointMode",void 0),r(this,"fillBelowTo",void 0),r(this,"transform",void 0),r(this,"flotpairs",void 0),r(this,"unit",void 0),this.datapoints=e.datapoints,this.label=e.alias,this.id=e.alias,this.alias=e.alias,this.aliasEscaped=(0,s.escape)(e.alias),this.color=e.color,this.bars={fillColor:e.color},this.valueFormater=(0,i.Cf)("none"),this.stats={},this.legend=!0,this.unit=e.unit,this.dataFrameIndex=e.dataFrameIndex,this.fieldIndex=e.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(e){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let s=0;s<e.length;s++){const a=e[s];o(a.alias,this.alias)&&(void 0!==a.lines&&(this.lines.show=a.lines),void 0!==a.dashes&&(this.dashes.show=a.dashes,this.lines.lineWidth=0),void 0!==a.points&&(this.points.show=a.points),void 0!==a.bars&&(this.bars.show=a.bars),void 0!==a.fill&&(this.lines.fill=0===(n=a.fill)?.001:n/10),void 0!==a.fillGradient&&(this.lines.fillColor=(t=a.fillGradient)?{colors:[{opacity:0},{opacity:t/10}]}:null),void 0!==a.stack&&(this.stack=a.stack),void 0!==a.linewidth&&(this.lines.lineWidth=this.dashes.show?0:a.linewidth,this.dashes.lineWidth=a.linewidth),void 0!==a.dashLength&&(this.dashes.dashLength[0]=a.dashLength),void 0!==a.spaceLength&&(this.dashes.dashLength[1]=a.spaceLength),void 0!==a.nullPointMode&&(this.nullPointMode=a.nullPointMode),void 0!==a.pointradius&&(this.points.radius=a.pointradius),void 0!==a.steppedLine&&(this.lines.steps=a.steppedLine),void 0!==a.zindex&&(this.zindex=a.zindex),void 0!==a.fillBelowTo&&(this.fillBelowTo=a.fillBelowTo),void 0!==a.color&&this.setColor(a.color),void 0!==a.transform&&(this.transform=a.transform),void 0!==a.legend&&(this.legend=a.legend),void 0!==a.hideTooltip&&(this.hideTooltip=a.hideTooltip),void 0!==a.yaxis&&(this.yaxis=a.yaxis),void 0!==a.hiddenSeries&&(this.hiddenSeries=a.hiddenSeries))}var t,n}getFlotPairs(e){const t=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const n="connected"===e,a="null as zero"===e;let i,r,o,l=0,d=0,c=!0;for(let e=0;e<this.datapoints.length;e++){if(r=this.datapoints[e][0],i=this.datapoints[e][1],void 0!==o){const e=i-o;e<this.stats.timeStep&&(this.stats.timeStep=e)}if(o=i,null===r){if(n)continue;a&&(r=0)}null!==r&&((0,s.isNumber)(r)&&(this.stats.total+=r,this.allIsNull=!1,l++),r>this.stats.max&&(this.stats.max=r),r<this.stats.min&&(this.stats.min=r),null===this.stats.first?this.stats.first=r:d>r?(c=!1,e===this.datapoints.length-1&&(this.stats.delta+=r)):(this.stats.delta+=c?r-d:r,c=!0),d=r,r<this.stats.logmin&&r>0&&(this.stats.logmin=r),0!==r&&(this.allIsZero=!1)),t.push([i,r])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),t.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/l,this.stats.current=t[t.length-1][1],null===this.stats.current&&t.length>1&&(this.stats.current=t[t.length-2][1])),null!==this.stats.max&&null!==this.stats.min&&(this.stats.range=this.stats.max-this.stats.min),null!==this.stats.current&&null!==this.stats.first&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=t.length,t}updateLegendValues(e,t){this.valueFormater=e,this.decimals=t}formatValue(e){return(0,s.isFinite)(e)||(e=null),(0,i.zc)(this.valueFormater(e,this.decimals))}isMsResolutionNeeded(){for(let e=0;e<this.datapoints.length;e++)if(null!==this.datapoints[e][1]&&void 0!==this.datapoints[e][1]){const t=this.datapoints[e][1].toString();if(13===t.length&&t%1e3!=0)return!0}return!1}hideFromLegend(e){return!(!e.hideEmpty||!this.allIsNull)||(!this.legend||!(!e.hideZero||!this.allIsZero))}setColor(e){this.color=e,this.bars.fillColor=e}}},72122:(e,t,n)=>{"use strict";n.d(t,{E:()=>d,f:()=>l});var s=n(68404),a=n(38251),i=n(16755),r=n(68374),o=n(45916);const l=e=>{let{children:t,value:n}=e;const[l,d]=(0,s.useState)(n);return(0,s.useEffect)((()=>{const e=r.h$.subscribe(a.hD,(e=>{d(e.payload)}));return()=>e.unsubscribe()}),[]),(0,o.jsx)(i.Ni.Provider,{value:l,children:t})},d=(e,t)=>function(n){return(0,o.jsx)(l,{value:t,children:s.createElement(e,Object.assign({},n))})}},2182:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});class s extends window.Worker{constructor(e,t){const n=e.toString(),s=n.split("/");s.pop();const a=`${s.join("/")}/`,i=`importScripts('${n}');`,r=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${a}'; ${i}`],{type:"application/javascript"}));super(r,t),URL.revokeObjectURL(r)}}},83997:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var s=n(46782);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.ZP.rbacEnabled?Object.assign({},e,{accesscontrol:!0}):e}},23188:(e,t,n)=>{"use strict";function s(e){return e.map(a).sort(((e,t)=>t.sortRank-e.sortRank||e.name.localeCompare(t.name)))}function a(e){const t=e;return t.sortRank=0,t.userId>0?(t.name=t.userLogin,t.sortRank=10):t.teamId>0?(t.name=t.team,t.sortRank=20):t.role&&(t.icon="fa fa-fw fa-street-view",t.name=t.role,t.sortRank=30,"Editor"===t.role&&(t.sortRank+=1)),t.inherited&&(t.sortRank+=100),t}n.d(t,{A:()=>s})},17549:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});const s=(e,t,n)=>(e.splice(n,0,e.splice(t,1)[0]),e)},17672:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var s=n(82897);function a(e){return e&&!(0,s.isString)(e)?e.message?e.message:e.data&&e.data.message?e.data.message:e.statusText?e.statusText:JSON.stringify(e):e}},11848:(e,t,n)=>{"use strict";n.d(t,{$$:()=>F,F3:()=>_,H6:()=>w,I$:()=>y,J5:()=>I,OQ:()=>E,Oy:()=>B,RZ:()=>W,UI:()=>x,Xh:()=>N,Xk:()=>$,Z8:()=>D,Zf:()=>j,_Q:()=>L,_o:()=>P,fR:()=>R,n9:()=>U,uC:()=>S,vP:()=>z,xq:()=>O,z_:()=>M});var s=n(82897),a=n(44288),i=n(93246),r=n(274),o=n(54316),l=n(12717),d=n(85699),c=n(88246),u=n(42914),h=n(8910),p=n(21162),g=n(78130),m=n(75334),f=n(46782),v=n(52253);const b=["key"];const x={from:"now-1h",to:"now"},y=(i.Y4.none,e=>`grafana.explore.datasource.${e}`);async function w(e){var t;const{panel:n,datasourceSrv:a,timeSrv:i}=e;let o,l=await a.get(n.datasource),d=n.targets.map((e=>(0,s.omit)(e,"legendFormat")));if(!1===f.vc.featureToggles.exploreMixedDatasource&&"mixed"===(null===(t=l.meta)||void 0===t?void 0:t.id)&&d)for(const e of d){const t=await a.get(e.datasource||void 0);if(t){l=t,d=n.targets.filter((e=>e.datasource===t.name));break}}if(l){let e={range:i.timeRangeForUrl()};if(l.interpolateVariablesInQueries){const t=n.scopedVars||{};e=Object.assign({},e,{datasource:l.name,context:"explore",queries:l.interpolateVariablesInQueries(d,t)})}else e=Object.assign({},e,{datasource:l.name,context:"explore",queries:d});const t=JSON.stringify(e);o=r.Cj.renderUrl("/explore",{left:t})}return o}function j(e,t,n,s,a,i){const r=t.reduce(((e,t)=>e+=t.key),""),{interval:c,intervalMs:u}=function(e,t,n){if(!n)return{interval:"1s",intervalMs:1e3};return d.calculateInterval(e,n,t)}(s,n.minInterval,n.maxDataPoints),h=`${r}`;return{queries:t,request:{app:o.zj.Explore,dashboardId:0,timezone:i||l.Ys,startTime:Date.now(),interval:c,intervalMs:u,panelId:h,targets:t,range:s,requestId:"explore_"+e,rangeRaw:s.raw,scopedVars:{__interval:{text:c,value:c},__interval_ms:{text:u,value:u}},maxDataPoints:n.maxDataPoints,liveStreaming:n.liveStreaming},scanning:a,id:T(),done:!1}}const S=e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,b),C=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.some((t=>e.hasOwnProperty(t)))};var k;!function(e){e[e.RangeFrom=0]="RangeFrom",e[e.RangeTo=1]="RangeTo",e[e.Datasource=2]="Datasource",e[e.SegmentsStart=3]="SegmentsStart"}(k||(k={}));const N=(e,t)=>{if(!e)return"";try{return JSON.stringify(e,null,t)}catch(e){console.error(e)}return""},O=e=>{const t=m.f.find((t=>t===e));return null!=t?t:"lines"};function I(e){var t;const n=(e=>{if(e)try{return JSON.parse(e)}catch(e){console.error(e)}})(e),s={datasource:null,queries:[],range:x,mode:null};if(!n)return s;if(!Array.isArray(n))return n;if(n.length<=k.SegmentsStart)return console.error("Error parsing compact URL state for Explore."),s;const a={from:n[k.RangeFrom],to:n[k.RangeTo]},i=n[k.Datasource],r=n.slice(k.SegmentsStart);return{datasource:i,queries:r.filter((e=>!C(e,"ui","mode","__panelsState"))),range:a,panelsState:null===(t=r.find((e=>C(e,"__panelsState"))))||void 0===t?void 0:t.__panelsState}}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return`Q-${(0,a.Z)()}-${e}`}async function $(e){let t,n,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(i)n=i;else if(e.length>0&&e[e.length-1].datasource)n=e[e.length-1].datasource;else{var r,l;t=await(0,h.F)().get(),s=null===(r=(l=t).getDefaultQuery)||void 0===r?void 0:r.call(l,o.zj.Explore),n=t.getRef()}var d,c;t||(t=await(0,h.F)().get(n),s=null===(d=(c=t).getDefaultQuery)||void 0===d?void 0:d.call(c,o.zj.Explore));return Object.assign({refId:(0,v.Hs)(e),key:T(a),datasource:n},s)}const R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=T(n),a=e.refId||(0,v.Hs)(t);return Object.assign({},e,{refId:a,key:s})},P=e=>{const t=e.map((e=>{var t;return null===(t=e.datasource)||void 0===t?void 0:t.uid}));return{allHaveDatasource:t.length===e.length,noneHaveDatasource:0===t.length,allDatasourceSame:t.every(((e,t,n)=>e===n[0]))}};async function D(e,t){if(e&&"object"==typeof e&&e.length>0){const t=[];for(let n=0;n<e.length;n++){const s=e[n],a=T(n);let i=s.refId;i||(i=(0,v.Hs)(t));let r=!0;if(s.datasource)try{await(0,h.F)().get(s.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),r=!1}r&&t.push(Object.assign({},s,{refId:i,key:a}))}return t}try{const n=null!=t?t:(await(0,h.F)().get()).getRef();return[await $(null!=e?e:[],void 0,n)]}catch{return[]}}const A=["refId","key","context","datasource"];function M(e){return e&&e.some((e=>Object.keys(e).filter((e=>-1===A.indexOf(e))).map((t=>e[t])).filter((e=>e)).length>0))}function L(e,t,n){const s=Date.now();let a=e;n.forEach((e=>{a=[{query:e,ts:s},...a]})),a.length>100&&(a=a.slice(0,100));const i=`grafana.explore.history.${t}`;try{return g.Z.setObject(i,a),a}catch(t){return console.error(t),e}}const F=e=>e.reduce(((e,t,n)=>{var s;const a=(null===(s=t.datasource)||void 0===s?void 0:s.uid)||t.key;return e.concat(`${a}-${n}`)}),[]),E=(e,t,n)=>{let s=d.convertRawToRange(t,e,n);return s.to.isBefore(s.from)&&(s=d.convertRawToRange({from:s.raw.to,to:s.raw.from},e,n)),s},V=e=>{if(null===e)return null;if((0,c.v9)(e))return e;if(-1!==e.indexOf("now"))return e;if(8===e.length)return(0,c.zh)(e,"YYYYMMDD");if(15===e.length)return(0,c.zh)(e,"YYYYMMDDTHHmmss");if(19===e.length)return(0,c.zh)(e,"YYYY-MM-DD HH:mm:ss");if(e.match(/^\d+$/)){const t=parseInt(e,10);return(0,c.zh)(t)}const t=(0,c.zh)(e);return t.isValid()?t:null},z=(e,t,n)=>{const s={from:V(e.from),to:V(e.to)};return{from:u.parse(s.from,!1,t),to:u.parse(s.to,!0,t),raw:s}},B=e=>p.dP.isLive(e)?i.UV.Ascending:i.UV.Descending,_=e=>{let t=`${"https:"===window.location.protocol?"wss://":"ws://"}${window.location.host}${f.vc.appSubUrl}`;return t.endsWith("/")&&(t=t.slice(0,-1)),`${t}${e}`},W=e=>{e&&e.unsubscribe()};const U=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},40225:(e,t,n)=>{"use strict";n.d(t,{Xv:()=>p,aO:()=>u,nS:()=>i,rZ:()=>d,tW:()=>h});var s=n(82897),a=n(61069);const i=e=>{const t=e.method,n=l(e),s=d(n);return{method:t,headers:n,body:c(e,s),credentials:g(e)}},r=e=>({canParse:t=>(null!=t&&t.method?null==t?void 0:t.method.toLowerCase():"")===e,parse:e=>(e.get("content-type")||e.set("content-type","application/json"),e)}),o=[r("post"),r("put"),r("patch"),{canParse:()=>!0,parse:e=>(e.get("accept")||e.set("accept","application/json, text/plain, */*"),e)}],l=e=>{const t=null!=e&&e.headers?new Headers(e.headers):new Headers;return o.filter((t=>t.canParse(e))).reduce(((e,t)=>t.parse(e)),t)},d=e=>{if(!e)return!1;const t=e.get("content-type");return!(!t||"application/json"!==t.toLowerCase())},c=(e,t)=>e?e.data&&"string"!=typeof e.data?t?JSON.stringify(e.data):new URLSearchParams(e.data):e.data:e;async function u(e,t){if(t)switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return"0"===e.headers.get("Content-Length")?(console.warn(`${e.url} returned an invalid JSON`),{}):await e.json();case"text":return e.text()}const n=await e.text();try{return JSON.parse(n)}catch{}return n}function h(e){return Object.keys(e).map((t=>{const n=e[t];return Array.isArray(n)?n.map((e=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"):`${encodeURIComponent(t)}=${encodeURIComponent(n)}`})).join("&")}const p=e=>{const t=h((0,s.omitBy)(e.params,(e=>void 0===e||e&&0===e.length)));return e.params&&t.length?`${e.url}?${t}`:e.url},g=e=>e?e.credentials?e.credentials:e.withCredentials?((0,a.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin":e},9814:(e,t,n)=>{"use strict";function s(e,t){const n=(t=t||{}).delimiter||".";let s=t.maxDepth||3,a=1;const i={};return function e(r,o){Object.keys(r).forEach((l=>{var d,c;const u=r[l],h=(null===(d=t)||void 0===d?void 0:d.safe)&&Array.isArray(u),p="[object Object]"===Object.prototype.toString.call(u),g=o?o+n+l:l;if(null!==(c=t)&&void 0!==c&&c.maxDepth||(s=a+1),!h&&p&&Object.keys(u).length&&a<s)return++a,e(u,g);i[g]=u}))}(e,null),i}n.r(t),n.d(t,{default:()=>s})},82782:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(61069),a=n(85699),i=n(56949),r=n(55343);const o={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:e=>e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&"),roundInterval:e=>((0,s.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),a.roundInterval(e)),secondsToHms:e=>((0,s.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),a.secondsToHms(e)),secondsToHhmmss:e=>{const t=[],n=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return n>9?t.push(""+n):t.push("0"+n),s>9?t.push(""+s):t.push("0"+s),a>9?t.push(""+a):t.push("0"+a),t.join(":")},toPercent:(e,t)=>Math.floor(e/t*1e4)/100+"%",addSlashes:e=>e.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:e=>((0,s.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),a.describeInterval(e)),intervalToSeconds:e=>((0,s.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),a.intervalToSeconds(e)),intervalToMs:e=>((0,s.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),a.intervalToMs(e)),calculateInterval:(e,t,n)=>((0,s.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),a.calculateInterval(e,t,n)),queryColorDot:(e,t)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+e,"font-size:"+t+"px"].join(";")+'"></div>',slugifyForUrl:e=>e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:e=>((0,s.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,i.jO)(e)),toFixed:(e,t)=>{if(null===e)return"";const n=t?Math.pow(10,Math.max(0,t)):1,s=String(Math.round(e*n)/n);if(-1!==s.indexOf("e")||0===e)return s;if(null!=t){const e=s.indexOf("."),a=-1===e?0:s.length-e-1;if(a<t)return(a?s:s+".")+String(n).slice(1,t-a+1)}return s},toFixedScaled:(e,t,n,s,a)=>null===n?o.toFixed(e,t)+a:o.toFixed(e,n+s)+a,roundValue:(e,t)=>{if(null===e)return null;const n=Math.pow(10,t),s=(n*e).toFixed(t);return Math.round(parseFloat(s))/n},getUnitFormats:r.QW};"undefined"!=typeof Proxy?o.valueFormats=new Proxy(o.valueFormats,{get(e,t,n){if("string"!=typeof t)throw{message:`Value format ${String(t)} is not a string`};const s=(0,r.Cf)(t);return s?(e,t,n,a)=>(0,r.zc)(s(e,t,n,a?"utc":"browser")):Reflect.get(e,t,n)}}):o.valueFormats=(0,r.Td)();const l=o},52253:(e,t,n)=>{"use strict";n.d(t,{DI:()=>i,Hs:()=>s,R8:()=>o,mu:()=>r,sB:()=>d,vH:()=>a});const s=e=>{for(let t=0;;t++){const n=l(t);if(!e.some((e=>e.refId===n)))return n}};function a(e){const t=["refId","hide","key","queryType","datasource"];for(const n in e)if("label"!==n&&!t.includes(n))return!1;return!0}function i(e,t,n){const a=t||{};return a.refId=s(e),a.hide=!1,!a.datasource&&n&&(a.datasource=n),[...e,a]}function r(e){return-1!==e.indexOf("api/datasources/proxy")||-1!==e.indexOf("api/ds/query")}function o(e){return!e.match(/^http/)}function l(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e<t.length?t[e]:l(Math.floor(e/t.length)-1)+t[e%t.length]}function d(e){return e||void 0}},36501:(e,t,n)=>{"use strict";n.d(t,{As:()=>m.A,DR:()=>R,HK:()=>y,OH:()=>T,VI:()=>w,au:()=>f,bQ:()=>O,di:()=>x,gt:()=>j,k4:()=>$,kg:()=>b,rq:()=>k,rv:()=>C,t2:()=>N,ub:()=>v,y9:()=>S});var s=n(82897),a=n(274),i=n(6432),r=n(8910),o=n(93686),l=n(47900),d=n(63454),c=n(46782),u=n(53018),h=n(40325),p=n(836),g=n(83821),m=n(56650);async function f(e,t,n,a,i,r,c){const u=n&&n.filter((e=>function(e){const t=(0,s.omit)(e,["key","refId","datasource"]);if(Object.keys(t).length>0)return!0;return!1}(e)));if(u.length>0){let n,s=!1,h=!1;try{n=(await(0,g.b)().addToRichHistory({datasourceUid:e,datasourceName:null!=t?t:"",queries:u,starred:a,comment:null!=i?i:""})).warning}catch(e){return e instanceof Error&&(e.name===p.j.StorageFull?(s=!0,r&&(0,d.WI)((0,o.$l)((0,l.t_)(e.message)))):e.name!==p.j.DuplicatedEntry&&(0,d.WI)((0,o.$l)((0,l.t_)("Rich History update failed",e.message)))),{richHistoryStorageFull:s,limitExceeded:h}}return n&&n.type===p.V.LimitExceeded&&(h=!0,c&&(0,d.WI)((0,o.$l)((0,l.ZR)(n.message)))),{richHistoryStorageFull:s,limitExceeded:h}}return{}}async function v(e){return await(0,g.b)().getRichHistory(e)}async function b(e){await(0,g.b)().updateSettings(e)}async function x(){return await(0,g.b)().getSettings()}async function y(){return(0,g.b)().deleteAll()}async function w(e,t){try{return await(0,g.b)().updateStarred(e,t)}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}async function j(e,t){try{return await(0,g.b)().updateComment(e,t)}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}async function S(e){try{return await(0,g.b)().deleteRichHistory(e),e}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}let C;async function k(){const e=new u.ZP,t=new h.Z;try{const{richHistory:n}=await e.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:m.A.Descending,starred:!1,to:14});return 0===n.length?{status:C.NotNeeded}:(await t.migrate(n),(0,d.WI)((0,o.$l)((0,l.AT)("Query history successfully migrated from local storage"))),{status:C.Successful})}catch(e){const t=e instanceof Error?e:new Error("Uknown error occurred.");return(0,d.WI)((0,o.$l)((0,l.ZR)(`Query history migration failed. ${t.message}`))),{status:C.Failed,error:t}}}!function(e){e.Successful="successful",e.Failed="failed",e.NotNeeded="not-needed"}(C||(C={}));const N=e=>{const t={range:{from:"now-1h",to:"now"},datasource:e.datasourceName,queries:e.queries,context:"explore"},n=(0,a.S)(t),s=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return a.Cj.renderUrl(`${s}/explore`,{left:n})},O=e=>{let t;switch(e){case 0:t="today";break;case 1:t="yesterday";break;case 7:t="a week ago";break;case 14:t="two weeks ago";break;default:t=`${e} days ago`}return t};function I(e,t){let n="";var s;return t===m.A.DatasourceAZ||t===m.A.DatasourceZA?n=e.datasourceName:(s=e.createdAt,n=(0,i.dq)(s,{format:"MMMM D"})),n}function T(e,t){return null!=t&&t.getQueryDisplayText?t.getQueryDisplayText(e):function(e){const t=(0,s.omit)(e,["key","refId","datasource"]);return JSON.stringify(t)}(e)}function $(e,t){let n={};return e.forEach((e=>{let s=I(e,t);n[s]=s in n?[...n[s],e]:[e]})),n}function R(){return(0,r.F)().getList({mixed:!0===c.vc.featureToggles.exploreMixedDatasource}).map((e=>({name:e.name,uid:e.uid,imgUrl:e.meta.info.logos.small})))}},56650:(e,t,n)=>{"use strict";let s;n.d(t,{A:()=>s}),function(e){e.Descending="Descending",e.Ascending="Ascending",e.DatasourceAZ="Datasource A-Z",e.DatasourceZA="Datasource Z-A"}(s||(s={}))},40078:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,L:()=>h});var s=n(58635),a=n(65737),i=n(93570),r=n(93686),o=n(47900),l=n(63454),d=n(11848);function c(e){let t=e.replace(`${window.location.protocol}//${window.location.host}${a.v.appSubUrl}`,"");return t.startsWith("/")?t.substring(1,t.length):t}const u=(0,s.Z)((async function(e){try{return(await(0,i.i)().post("/api/short-urls",{path:c(e)})).url}catch(e){console.error("Error when creating shortened link: ",e),(0,l.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}})),h=async e=>{const t=await u(e);t?((0,d.n9)(t),(0,l.WI)((0,r.$l)((0,o.AT)("Shortened link copied to clipboard")))):(0,l.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}},92720:(e,t,n)=>{"use strict";function s(e,t,n){const s=Math.sqrt(50),a=Math.sqrt(10),i=Math.sqrt(2),r=Math.abs(t-e)/Math.max(0,n);let o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10));const l=r/o;return l>=s?o*=10:l>=a?o*=5:l>=i&&(o*=2),t<e?-o:o}function a(e,t){return e-Math.floor(Math.log(t)/Math.LN10)}function i(e,t,n,s){const a=(t-e)/n;let i=-Math.floor(Math.log(a)/Math.LN10);const r=s,o=Math.pow(10,-i),l=a/o;let d;return l<1.5?d=1:l<3?(d=2,l>2.25&&(null==r||i+1<=r)&&(d=2.5,++i)):d=l<7.5?5:10,d*=o,d}function r(e,t,n,s){let a=+(null!=e?e:n),i=+(null!=t?t:s);const r=i-a;if(0===r){const n=.25,s=Math.abs(0===i?1:i*n);null===e&&(a-=s),null!=t&&null==e||(i+=s)}else{const o=.02;null!=o&&(null==e&&(a-=r*o,a<0&&null!=n&&n>=0&&(a=0)),null==t&&(i+=r*o,i>0&&null!=s&&s<=0&&(i=0)))}return{min:a,max:i}}function o(e,t,n,s){const{min:a,max:i}=r(n.min,n.max,e,t),o=(i-a)/(.3*Math.sqrt(s)),l=-Math.floor(Math.log(o)/Math.LN10),d=Math.pow(10,-l),c=o/d;let u;c<1.5?u=1:c<3?(u=2,c>2.25&&(u=2.5)):u=c<7.5?5:10,u*=d;const h=Math.max(0,1-Math.floor(Math.log(o)/Math.LN10));return{tickDecimals:h,scaledDecimals:h-Math.floor(Math.log(u)/Math.LN10)}}function l(e,t,n){if(t&&n&&e){const s=n-t,a=s/e/1e3,i=864e5,r=31536e6;return a<=45?"HH:mm:ss":a<=7200||s<=i?"HH:mm":a<=8e4?"MM/DD HH:mm":a<=2419200||s<=r?"MM/DD":"YYYY-MM"}return"HH:mm"}function d(e,t){return Math.log(e)/Math.log(t)}function c(e){return u(e.toString())}function u(e){if(isNaN(e))return 0;const t=e.indexOf(".");return-1===t?0:e.length-t-1}n.r(t),n.d(t,{getFlotRange:()=>r,getFlotTickDecimals:()=>o,getFlotTickSize:()=>i,getPrecision:()=>c,getScaledDecimals:()=>a,getStringPrecision:()=>u,grafanaTimeFormat:()=>l,logp:()=>d,tickStep:()=>s})},22342:(e,t,n)=>{"use strict";n.d(t,{e:()=>a,h:()=>i});var s=n(88246);const a=(e,t)=>{const n={from:(0,s.zh)(t.from),to:(0,s.zh)(t.to)},a=(n.to.valueOf()-n.from.valueOf())/2;let i,r;return-1===e?(i=n.to.valueOf()-a,r=n.from.valueOf()-a):1===e?(i=n.to.valueOf()+a,r=n.from.valueOf()+a,i>Date.now()&&n.to.valueOf()<Date.now()&&(i=Date.now(),r=n.from.valueOf())):(i=n.to.valueOf(),r=n.from.valueOf()),{from:r,to:i}},i=(e,t)=>{const n=e.to.valueOf()-e.from.valueOf(),s=e.to.valueOf()-n/2,a=0===n?3e4:n*t;return{from:s-a/2,to:s+a/2}}},77341:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});let s="";const a=()=>{const e=new URLSearchParams(window.location.search).get("auth_token");return null!==e&&""!==e?(s=e,e):s}},48602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addExtensionReducers:()=>qd,init:()=>Qd});var s=n(72677),a=n(65737),i=n(31181),r=n(68374),o=n(34819),l=n(75971),d=n(64850),c=n(45339),u=n(68404),h=n(70917),p=n(99500);const g="licensedRole";var m,f=n(45916);const v=[{value:"server_admin",label:"Server admin"},{value:"admin_editor",label:"Admin/editor"},{value:"viewer",label:"Viewer"}],b=e=>{var t;let{filters:n,onChange:s,className:a}=e;return(0,f.jsx)(h.NU,{value:null===(t=n.find((e=>e.name===g)))||void 0===t?void 0:t.value,options:v,onChange:e=>{s({name:g,value:e})},prefix:m||(m=(0,f.jsx)(p.J,{name:"filter"})),width:64,placeholder:"Filter by licensed role",menuShouldPortal:!0,className:a})};var x,y,w,j=n(34371),S=n(52423),C=n(16755),k=n(23734),N=n(54209);class O extends N.R{}let I;function T(){var e;const[t,n]=(0,u.useState)(),s=function(e){const t=(0,C.l4)();return(0,u.useMemo)((()=>{switch(e){case I.error:return{icon:"exclamation-triangle",background:t.colors.error.main,text:t.colors.error.contrastText};case I.warning:return{icon:"exclamation-triangle",background:t.colors.warning.main,text:t.colors.warning.contrastText};case I.info:default:return{icon:"info-circle",background:t.colors.info.main,text:t.colors.info.contrastText}}}),[t,e])}(null==t?void 0:t.severity),a=(0,C.wW)((e=>function(e,t){return{banner:S.css`
      flex-grow: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      background-color: ${t.background};
      border-radius: 2px;
      height: 52px;
    `,icon:S.css`
      padding: ${e.spacing(0,2)};
      color: ${t.text};
      display: flex;
    `,content:S.css`
      flex-grow: 1;
      display: flex;
      align-items: center;
      color: ${t.text};
    `,close:S.css`
      color: ${t.text};
    `}}(e,s)));(0,u.useEffect)((()=>r.h$.subscribe(O,(e=>{n(e.payload)})).unsubscribe),[n]);const i=(0,u.useCallback)((()=>{n(void 0),null!=t&&t.onClose&&t.onClose()}),[t]);if(!t)return null;const o=t.body;return(0,f.jsxs)("div",{className:a.banner,children:[(0,f.jsx)("div",{className:a.icon,children:(0,f.jsx)(p.J,{size:"xl",name:s.icon})}),(0,f.jsx)("div",{className:a.content,children:(0,f.jsx)(o,{severity:null!==(e=t.severity)&&void 0!==e?e:I.info})}),(null==t?void 0:t.onClose)&&(0,f.jsx)("div",{className:a.icon,children:(0,f.jsx)(k.h,{size:"xl",name:"times",onClick:i,className:a.close})})]})}w="page-banner-display",(y="type")in(x=O)?Object.defineProperty(x,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[y]=w,function(e){e[e.info=0]="info",e[e.warning=1]="warning",e[e.error=2]="error"}(I||(I={}));var $=n(36635),R=n(54761),P=n(37417),D=n(36149),A=n(85829),M=n(54168),L=n(5316),F=n(93220);const E=Array.from(Array(31),((e,t)=>{const n=(t+1).toString();return{value:n,label:n}}));E.unshift({value:"last",label:"Last"});let V,z,B,_;!function(e){e.Monthly="monthly",e.Weekly="weekly",e.Daily="daily",e.Hourly="hourly",e.Never="never",e.Custom="custom",e.Once="once"}(V||(V={})),function(e){e.Hours="hours",e.Days="days",e.Weeks="weeks",e.Months="months"}(z||(z={})),function(e){e.Default="",e.SentBy="sent-by",e.None="none"}(B||(B={})),function(e){e.Paused="paused",e.Scheduled="scheduled",e.Expired="expired",e.Draft="draft",e.Never="not scheduled"}(_||(_={}));const W=[{value:"landscape",label:"Landscape",icon:"gf-landscape"},{value:"portrait",label:"Portrait",icon:"gf-portrait"}],U=[{value:"grid",label:"Grid",icon:"gf-grid"},{value:"simple",label:"Simple",icon:"gf-layout-simple"}];let H,q,Z;!function(e){e.SelectDashboard="select-dashboard",e.FormatReport="format-report",e.Schedule="schedule",e.Share="share",e.Confirm="confirm"}(H||(H={})),function(e){e.Stats="stats",e.Users="users",e.PublicDashboards="public-dashboards"}(q||(q={})),function(e){e.ReportingCreate="reports:create",e.ReportingWrite="reports:write",e.ReportingDelete="reports:delete",e.ReportingRead="reports:read",e.ReportingSend="reports:send",e.ReportingSettingsWrite="reports.settings:write",e.ReportingSettingsRead="reports.settings:read",e.DataSourcesPermissionsRead="datasources.permissions:read",e.DataSourcesPermissionsWrite="datasources.permissions:write",e.DataSourcesCachingWrite="datasources.caching:write",e.LicensingRead="licensing:read",e.LicensingWrite="licensing:write",e.LicensingReportsRead="licensing.reports:read",e.DashboardsInsightsRead="dashboards.insights:read"}(Z||(Z={}));var G=n(75442);var Q=n(8006),K=n(2024);const J=e=>{const{cleanCache:t,dataSource:n,pageId:s}=e,[a,i]=(0,u.useState)(!1),o=e=>()=>{i(e)},l=r.Vt.hasPermissionInMetadata(Z.DataSourcesCachingWrite,n);return(0,f.jsxs)("div",{children:[(0,f.jsx)(Q.zx,{variant:"destructive",onClick:o(!0),disabled:!l,children:"Clear cache"}),(0,f.jsx)(K.s,{isOpen:a,title:"Clear cache",body:"Warning: This action impacts all cache-enabled data sources. If you are using Memcached, the system clears all data from the Memcached instance. Do you want to continue?",confirmText:"Clear cache",onConfirm:()=>{t(s),i(!1)},onDismiss:o(!1)})]})};var Y=n(65678),X=n(70800),ee=n(4645),te=n(83744),ne=n(21888);const se=e=>{const{disableDataSourceCache:t,dataSource:n,pageId:s}=e,a=r.Vt.hasPermissionInMetadata(Z.DataSourcesCachingWrite,n);return(0,f.jsx)(Q.zx,{variant:"destructive",onClick:()=>t(s),disabled:!a,children:"Disable"})};var ae;var ie=n(42200);let re;!function(e){e.LoadDataSourceCache="LOAD_DATA_SOURCE_CACHE"}(re||(re={}));const oe=e=>({type:re.LoadDataSourceCache,payload:e});var le,de,ce;const ue={disableDataSourceCache:function(e){return async t=>{const n=await(0,ie.i)().post(`/api/datasources/${e}/cache/disable`,{});t(oe(n))}},updateDataSourceCache:function(e,t){return async n=>{const s=await(0,ie.i)().post(`/api/datasources/${e}/cache`,t);n(oe(s))}},enableDataSourceCache:function(e){return async t=>{const n=await(0,ie.i)().post(`/api/datasources/${e}/cache/enable`,{});t(oe(n))}},loadDataSourceCache:function(e){return async t=>{const n=await(0,ie.i)().get(`/api/datasources/${e}/cache`);t(oe(n))}},loadDataSource:L.gv,cleanCache:function(e){return async t=>{const n=await(0,ie.i)().post(`/api/datasources/${e}/cache/clean`,{});t(oe(n))}},loadDataSourceMeta:L.b2},he=(0,$.connect)((function(e,t){const n=t.match.params.uid,s=(0,F.xG)("cache");return Object.assign({},e.dataSourceCache,{navModel:(0,A.ht)(e.navIndex,`datasource-cache-${n}`,s),pageId:n,dataSource:e.dataSources.dataSource})}),ue),pe=e=>{let{action:t}=e;const n=(0,C.l4)();return(0,f.jsx)(D.TA,{action:t,listItems:["Load dashboards in less than a second from the cache, even when they include big queries and lots of users are looking at once","Save money and avoid rate limiting by reducing the number of API calls you make to data sources like Splunk, CloudWatch and Github","Author dashboards more smoothly by caching the data used to construct queries, like fields in ServiceNow or metrics available from Datadog"],image:`query-caching-${n.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/query-caching",featureName:"query caching",description:"With query caching, you can load dashboards faster and reduce costly queries to data sources by temporarily storing query results in memory, Redis, or Memcached."})},ge=he((e=>{const[t,n]=(0,u.useState)(e.enabled),[s,a]=(0,u.useState)(!0),[i,o]=(0,u.useState)(e.useDefaultTTL),[l,d]=(0,u.useState)(e.ttlQueriesMs),[c,h]=(0,u.useState)(e.ttlResourcesMs),{navModel:g,pageId:m,dataSource:v,loadDataSource:b,loadDataSourceCache:x,loadDataSourceMeta:y,enableDataSourceCache:w}=e;(0,u.useEffect)((()=>{n(e.enabled),o(e.useDefaultTTL),d(e.ttlQueriesMs),h(e.ttlResourcesMs),a(!1)}),[e.useDefaultTTL,e.ttlQueriesMs,e.ttlResourcesMs,e.enabled]),(0,u.useEffect)((()=>{b(m).then(y),x(m)}),[x,b,y,m]);const j=r.Vt.hasPermissionInMetadata(Z.DataSourcesCachingWrite,v),S=t?(e=>{const{updateDataSourceCache:t,pageId:n,useDefaultTTL:s,setUseDefaultTTL:a,defaultTTLMs:i,ttlQueriesMs:o,setTtlQueriesMs:l,ttlResourcesMs:d,setTtlResourcesMs:c,loading:u,enabled:h,dataSource:g,dataSourceID:m,dataSourceUID:v}=e,b=r.Vt.hasPermissionInMetadata(Z.DataSourcesCachingWrite,g);return(0,f.jsxs)("div",{children:[(0,f.jsx)(Y.g,{description:`Enable this to use the default TTL set in Grafana's configuration (${i} ms)`,label:"Use default TTL",disabled:u||!b,children:(0,f.jsx)(X.r,{value:s,onChange:()=>{a(!s)}})}),(0,f.jsx)(Y.g,{description:"The time-to-live for a query cache item in milliseconds. Example: 5000",label:"Query TTL",disabled:u||s||!b,children:(0,f.jsx)(ee.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(s?i:o)||0,onChange:e=>{l(e.currentTarget.valueAsNumber)}})}),(0,f.jsx)(Y.g,{description:"The time-to-live for resources cache items in milliseconds. Example: 5000",label:ae||(ae=(0,f.jsxs)(te._,{children:[(0,f.jsx)("span",{children:"Resource TTL"}),(0,f.jsx)(ne.u,{content:(0,f.jsxs)("div",{children:["Resources are dynamic values that Grafana data source plugins retrieve from data sources for use in the query editor. Examples are Splunk namespaces, Prometheus labels, and CloudWatch metric names. Since these values update less frequently, you might prefer a longer cache TTL for Resources than queries. See the ",(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",children:"docs"})," ","for more info."]}),children:(0,f.jsx)(p.J,{name:"question-circle"})})]})),disabled:u||s||!b,children:(0,f.jsx)(ee.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(s?i:d)||0,onChange:e=>{c(e.currentTarget.valueAsNumber)}})}),(0,f.jsxs)(R.Lh,{spacing:"md",align:"flex-start",justify:"flex-start",children:[(0,f.jsx)(se,Object.assign({},e)),(0,f.jsx)(Q.zx,{disabled:u||!b,onClick:()=>t(n,{dataSourceID:m,dataSourceUID:v,enabled:h,defaultTTLMs:i,ttlQueriesMs:o,ttlResourcesMs:d,useDefaultTTL:s}),children:"Save"})]})]})})(Object.assign({},e,{loading:s,useDefaultTTL:i,setUseDefaultTTL:o,ttlQueriesMs:l,setTtlQueriesMs:d,ttlResourcesMs:c,setTtlResourcesMs:h})):(0,M.d5)()?(0,f.jsx)(pe,{action:j?{text:"Enable caching",onClick:()=>{w(m)}}:void 0}):(e=>{const{enableDataSourceCache:t,dataSource:n,pageId:s}=e,a=r.Vt.hasPermissionInMetadata(Z.DataSourcesCachingWrite,n);return(0,f.jsx)(G.Z,{title:"Caching is not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"database",onClick:()=>{t(s)},proTip:"Enabling caching can reduce the amount of redundant requests sent to the data source.",proTipLink:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",proTipLinkTitle:"Learn more",buttonDisabled:!a})})(e);return(0,f.jsx)(P.T,{navId:"datasources",pageNav:g.main,children:(0,f.jsxs)(P.T.Contents,{children:[(0,M.d5)()&&(le||(le=(0,f.jsx)(D.Xz,{featureId:"query-caching",eventVariant:"trial",featureName:"query caching",text:"Enable query caching for free during your trial of Grafana Pro."}))),(0,f.jsxs)("div",{className:"page-action-bar",children:[t&&!(0,M.d5)()&&(de||(de=(0,f.jsx)("h3",{className:"page-sub-heading",children:"Caching"}))),ce||(ce=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),(0,f.jsx)(R.Lh,{spacing:"md",align:"flex-end",justify:"flex-end",children:t&&(0,f.jsx)(J,Object.assign({},e))})]}),S]})})}));var me;const fe=he((e=>{let{navModel:t,pageId:n,loadDataSource:s,loadDataSourceMeta:a}=e;return(0,u.useEffect)((()=>{s(n).then(a)}),[n,a,s]),(0,f.jsx)(P.T,{navId:"datasources",pageNav:t.main,children:me||(me=(0,f.jsxs)(P.T.Contents,{children:[(0,f.jsx)(D.Xz,{featureName:"query caching",featureId:"query-caching"}),(0,f.jsx)(pe,{})]}))})})),ve={enabled:!1,dataSourceID:0,dataSourceUID:"",ttlQueriesMs:0,ttlResourcesMs:0,defaultTTLMs:0,useDefaultTTL:!0},be={dataSourceCache:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;return t.type===re.LoadDataSourceCache?Object.assign({},t.payload):e}};var xe=n(88246),ye=n(59196),we=n(78130),je=n(2843);const Se=e=>{let{title:t,subTitle:n,severity:s,onButtonClick:a,buttonText:i}=e;const r=(0,C.yK)($e);return(0,f.jsx)("div",{className:r.container,children:(0,f.jsx)("div",{className:"page-container",children:(0,f.jsx)(je.b,{title:t,severity:s,buttonContent:i,onRemove:a,children:n})})})},Ce=e=>{let{isLicensingReader:t,children:n}=e;return t?(0,f.jsx)("a",{href:"/admin/licensing",children:n}):(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",target:"_blank",rel:"noreferrer noopener",children:n})},ke=e=>{let{isLicensingReader:t}=e;return(0,f.jsx)(Se,{title:"Your Grafana Enterprise license has expired",subTitle:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ce,{isLicensingReader:t,children:"Some features"})," have been disabled."]}),severity:"error"})},Ne=e=>{let{isLicensingReader:t}=e;return(0,f.jsx)(Se,{title:"Your Grafana Enterprise license is invalid",subTitle:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ce,{isLicensingReader:t,children:"Some features"})," have been disabled."]}),severity:"error"})},Oe=e=>{let{days:t,onCloseWarning:n,isLicensingReader:s}=e;return(0,f.jsx)(Se,{onButtonClick:n,title:"Your Grafana Enterprise license will expire soon",subTitle:(0,f.jsxs)(f.Fragment,{children:[t," days remaining, after which"," ",(0,f.jsx)(Ce,{isLicensingReader:s,children:"Enterprise features will be disabled."})]}),severity:"info",buttonText:"Dismiss"})},Ie=e=>{let{days:t,onCloseWarning:n,isLicensingReader:s}=e;return(0,f.jsx)(Se,{onButtonClick:n,title:"Your Grafana Enterprise token needs to be renewed",subTitle:(0,f.jsxs)(f.Fragment,{children:["Your license token has ",t," days remaining, after which"," ",(0,f.jsx)(Ce,{isLicensingReader:s,children:"Enterprise features will be disabled."})]}),severity:"info",buttonText:"Dismiss"})},Te=e=>{let{activeUsers:t,maxUsers:n,slug:s,onRefreshWarning:a}=e;return(0,f.jsx)(Se,{onButtonClick:a,title:"You have exceeded the included number of active users",subTitle:(0,f.jsxs)(f.Fragment,{children:["Your Grafana Enterprise license includes ",n," active users; you currently have ",t," active users. Please"," ",s?(0,f.jsx)("a",{href:"https://grafana.com/orgs/"+s+"/licenses",target:"_blank",rel:"noreferrer noopener",children:"upgrade your license."}):"upgrade your license."]}),severity:"error",buttonText:"Refresh"})},$e=e=>({container:S.css`
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 3;
    `}),Re=1,Pe=5,De="grafana.licence.warning.dismissUntil",Ae="users",Me="AWS/Marketplace",Le=async()=>(0,ie.i)().get("/api/licensing/token"),Fe=async()=>(0,ie.i)().get("/api/licensing/refresh-stats");function Ee(){(0,j.b4)(Ve)}function Ve(){const[e,t]=(0,u.useState)(!1),[n,s]=(0,u.useState)(a.v.licensing),i=we.Z.get(De),r=i&&i>(0,xe.CQ)().valueOf(),o=ye.Vt.hasAccess(Z.LicensingRead,ye.Vt.hasRole(d.B5.Admin)),l=ye.Vt.hasAccess(Z.LicensingRead,ye.Vt.isGrafanaAdmin),c=o&&function(){const{licenseExpiry:e,licenseExpiryWarnDays:t=30}=a.v.licensing;return e>0&&(0,xe.CQ)(1e3*e)<(0,xe.CQ)().add(t,"d")}()&&!r,h=o&&function(){const{tokenExpiry:e,tokenExpiryWarnDays:t=3}=a.v.licensing;return e>0&&(0,xe.CQ)(1e3*e)<(0,xe.CQ)().add(t,"d")}()&&!r,p=!a.v.licensing.usageBilling;let g=!1,m=0,v=0;if(n.limitBy===Ae){const e=function(e,t){if(void 0===e||void 0===t)return!1;return-1!==e&&t>e}(n.includedUsers,n.activeUsers);g=p&&e&&(o||l),m=n.activeUsers,v=n.includedUsers}if(function(){const e=/\/d-solo\//,t=window.location.pathname;return e.test(t)}()||function(){const e=/\/admin\/licensing$/,t=window.location.pathname;return e.test(t)}())return null;const b=()=>{const e=(0,xe.CQ)().add(5,"d").valueOf();we.Z.set(De,e),t(!0)},x=async()=>{const e=await Fe().catch((e=>null));if(e){const t=Object.assign({},n,{activeUsers:e.active_users});a.v.licensing=t,s(t)}};if(e)return null;if(function(){const{expiry:e,hasLicense:t}=a.v.licenseInfo;return t&&!e}())return(0,f.jsx)(Ne,{isLicensingReader:l});if(function(){const{licenseExpiry:e}=a.v.licensing;return e>0&&(0,xe.CQ)(1e3*e)<(0,xe.CQ)()}())return(0,f.jsx)(ke,{isLicensingReader:l});if(g)return(0,f.jsx)(Te,{activeUsers:m,maxUsers:v,slug:n.slug,onRefreshWarning:o?x:void 0});if(c){const e=function(){const{licenseExpiry:e}=a.v.licensing;return Math.ceil((e-(0,xe.CQ)().unix())/3600/24)}();return setTimeout(b,36e5),(0,f.jsx)(Oe,{days:e,onCloseWarning:b,isLicensingReader:l})}if(h){const e=function(){const{tokenExpiry:e}=a.v.licensing;return Math.ceil((e-(0,xe.CQ)().unix())/3600/24)}();return setTimeout(b,36e5),(0,f.jsx)(Ie,{days:e,onCloseWarning:b,isLicensingReader:l})}return null}var ze=n(70014),Be=n(6432),_e=n(80795),We=n(10244),Ue=n(37434);const He=e=>{let{orgSlug:t,licenseId:n}=e,s="https://grafana.com/contact";return t&&n&&(s=`https://grafana.com/orgs/${t}/tickets?support=licensing&licenseId=${n}`),(0,f.jsx)(Q.Qj,{href:s,target:"_blank",rel:"noopener noreferrer",children:"Contact customer support"})};var qe,Ze=n(78748),Ge=n(50191);const Qe=e=>{let{title:t,children:n,footer:s,state:a,status:i,className:r}=e;const o=(0,C.l4)(),l=Ke(o,a);return(0,f.jsx)(Ze._,{className:(0,S.cx)(l.container,r),disableHover:!0,children:(0,f.jsxs)("div",{className:l.inner,children:[(t||i)&&(0,f.jsxs)("div",{className:l.row,children:[t&&(0,f.jsx)("h3",{className:l.title,children:t}),i&&(0,f.jsx)(Je,{state:a,status:i})]}),(0,f.jsx)("div",{className:l.content,children:n}),s&&(0,f.jsx)("div",{className:l.footer,children:s})]})})},Ke=(0,Ge.B)(((e,t)=>({container:S.css`
      padding: ${e.spacing(2)};
      margin-bottom: 0;
      ${t&&`border: 1px solid ${e.colors[t].border}`};
    `,inner:S.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,title:S.css`
      font-size: ${e.typography.h3.fontSize};
      color: ${e.colors.text.secondary};
      margin-bottom: 0;
    `,row:S.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${e.spacing(2)};
      align-items: center;
    `,content:S.css`
      display: flex;
      flex-direction: column;
      flex: 1 0 auto;
      width: 100%;
    `,footer:S.css`
      display: flex;
      flex-direction: column;
      align-items: self-start;
      margin-top: ${e.spacing(2)};
    `}))),Je=e=>{let{state:t,status:n}=e;const s=new Map([["warning","bell"],["error","exclamation-triangle"]]),a=(0,C.l4)(),i=Ye(a,t);return t&&s.has(t)?(0,f.jsxs)("div",{role:"alert",className:i.container,children:[(0,f.jsx)(p.J,{name:s.get(t)}),n]}):null},Ye=(e,t)=>({container:S.css`
      background-color: ${e.colors.background.primary};
      color: ${t&&e.colors[t].text};
      padding: ${e.spacing(.5)} ${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(1)};
      }
    `}),Xe=e=>{let{state:t,title:n,orgSlug:s,licenseId:a}=e;const i=(0,C.wW)(et);return t?(0,f.jsx)(je.b,{title:n,severity:t,className:i.container,children:(0,f.jsx)(He,{orgSlug:s,licenseId:a})}):null},et=e=>({container:S.css`
      background: ${e.colors.secondary.main};
      margin-bottom: ${e.spacing(3)};
    `}),tt=e=>{let{content:t,state:n}=e;const s=(0,C.l4)(),a=nt(s,n);return(0,f.jsx)(f.Fragment,{children:t.map((e=>e?(0,f.jsxs)("div",{className:a.row,children:[(0,f.jsxs)("span",{children:[e.name,e.tooltip&&(0,f.jsx)(ne.u,{placement:"top",content:e.tooltip,theme:"info",children:qe||(qe=(0,f.jsx)(p.J,{name:"info-circle",size:"sm"}))})]}),(0,f.jsx)("span",{className:e.highlight?a.highlight:"",children:e.value})]},e.name):null))})},nt=(e,t)=>({row:S.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${e.spacing(2)};
      align-items: center;
      svg {
        margin-left: ${e.spacing(.5)};
        cursor: pointer;
      }
    `,highlight:S.css`
      background-color: ${e.colors.background.primary};
      color: ${t&&e.colors[t].text};
      padding: ${e.spacing(.5)} ${e.spacing(1)};
      margin-right: -${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(1)};
      }
    `});var st,at,it=n(29792);const rt=e=>{let{isUploading:t,title:n,onFileUpload:s,isDisabled:a,licensedUrl:i}=e;const r=ot();return(0,f.jsxs)(f.Fragment,{children:[n&&(0,f.jsx)("h2",{className:r.title,children:n}),t?st||(st=(0,f.jsx)(Q.zx,{disabled:!0,children:"Uploading…"})):a?at||(at=(0,f.jsx)(Q.zx,{disabled:!0,children:"Upload a new token"})):(0,f.jsx)(it.p,{onFileUpload:s,accept:".jwt",children:"Upload a new token"}),i&&(0,f.jsxs)("p",{className:r.instanceUrl,children:["Instance URL: ",(0,f.jsx)("code",{children:i})]})]})},ot=(0,Ge.B)((()=>({title:S.css`
      margin-top: 30px;
      margin-bottom: 20px;
    `,instanceUrl:S.css`
      margin-top: 10px;
    `}))),lt=e=>Math.ceil((e.exp-(0,xe.CQ)().unix())/3600/24),dt=e=>e?(e=>(0,xe.CQ)(1e3*e.exp)<(0,xe.CQ)())(e)?{state:"error",status:"Expired",title:"Token expired",message:"Contact support to renew your token, or visit the Cloud portal to learn more."}:(e=>(0,xe.CQ)(1e3*e.exp)<(0,xe.CQ)().add(a.v.licensing.tokenExpiryWarnDays,"d"))(e)?{state:"warning",status:` Expiring in ${lt(e)} day(s)`,title:"Token expires soon",message:`Your token expires in ${lt(e)} day(s). Contact support to renew your token.`}:{state:"",status:"",title:"",message:""}:{state:"",status:"",title:"",message:""},ct=e=>e.trial_exp?Math.ceil((e.trial_exp-(0,xe.CQ)().unix())/3600/24):0,ut=e=>e&&e.trial&&e.trial_exp?(e=>e.trial_exp&&(0,xe.CQ)(1e3*e.trial_exp)<(0,xe.CQ)())(e)?{state:"error",status:"Expired",title:"Trial expired",message:"Your trial period has expired, please contact sales to purchase a license."}:{state:"info",status:` Trial expiring in ${ct(e)} day(s)`,title:"Trial active",message:`Your trial expires in ${ct(e)} day(s), please contact sales to purchase a license.`}:{state:"",status:"",title:"",message:""},ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 100*t/e},pt=(e,t)=>{let n="",s="",a="",i="";if(!e)return{state:n,status:s,title:a,message:i};if(e.limit_by===Ae){const r=null==t?void 0:t.active_users,o=e.included_users;let l=0;"number"==typeof r&&(l=ht(o,r)),l>100?(n="error",s="Quota exceeded: active users",a="User limit exceeded",i=`There are more than ${o} active users using Grafana.`,i+=" Contact support to increase the quotas."):l>=80&&(n="warning",l>=100?(s="Limit reached",a="User utilization limit reached",i=`You are at your limit of ${o} active users.`):(s="Reaching limit",a="User utilization reaching limit",i=`There are ${r} active users.`,i+=` You are approaching your limit of ${o} active users.`),s+=": active users",i+=" Contact support to increase the quotas.")}return{state:n,status:s,title:a,message:i}};var gt,mt,ft,vt,bt,xt,yt,wt;const jt=e=>{var t,n,s,a,i;let{token:r,stats:o,tokenRenewed:l,tokenUpdated:d,isLoading:c,licensedUrl:h}=e;const[g,m]=(0,u.useState)(!1),[v,b]=(0,u.useState)(!1),x=dt(r).state,y=pt(r,o).state,w=ye.Vt.hasAccess(Z.LicensingWrite,ye.Vt.isGrafanaAdmin),j=(0,C.wW)(St),S=e=>{var t,n;const s=null===(t=e.currentTarget)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];if(s){_e.E1.partial({tokenUpdated:null,tokenRenewed:null});const e=new FileReader,t=()=>async e=>{m(!0);try{await(async e=>(0,ie.i)().post("/api/licensing/token",{token:e}))(e.target.result),_e.E1.partial({tokenUpdated:!0}),setTimeout((()=>{location.reload()}),1e3)}catch(e){throw m(!1),e}};e.onload=t(),e.readAsText(s)}};if(!ye.Vt.hasAccess(Z.LicensingRead,ye.Vt.isGrafanaAdmin))return null;if(c)return gt||(gt=(0,f.jsx)(Ue.a,{text:"Loading licensing info..."}));let k="You are running Grafana Enterprise without a license. The Enterprise features are disabled.";return r&&![Re,Pe].includes(r.status)&&(k="There is a problem with your Enterprise license token. The Enterprise features are disabled."),r&&[Re,Pe].includes(r.status)?(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:j.title,children:"License details"}),(0,f.jsx)(Ct,Object.assign({},pt(r,o),{orgSlug:r.slug,licenseId:r.lid})),(0,f.jsx)(Ct,Object.assign({},dt(r),{orgSlug:r.slug,licenseId:r.lid})),(0,f.jsx)(Ct,Object.assign({},ut(r),{orgSlug:r.slug,licenseId:r.lid})),d&&(0,f.jsx)(je.b,{title:"License token uploaded. Restart Grafana for the changes to take effect.",severity:"success",onRemove:()=>_e.E1.partial({tokenUpdated:null})}),l&&(0,f.jsx)(je.b,{title:"License token renewed.",severity:"success",onRemove:()=>_e.E1.partial({tokenRenewed:null})}),(0,f.jsxs)("div",{className:j.row,children:[(0,f.jsx)(Qe,{title:"License",className:j.licenseCard,footer:(0,f.jsx)(Q.Qj,{variant:"secondary",href:r.details_url||`${r.iss}/licenses/${r.lid}`,"aria-label":"View details about your license in Grafana Cloud",target:"_blank",rel:"noopener noreferrer",children:"License details"}),children:(0,f.jsx)(tt,{content:[{name:(null===(t=r.prod)||void 0===t?void 0:t.length)<=1?"Product":"Products",value:(null===(n=r.prod)||void 0===n?void 0:n.length)<=1?r.prod[0]||"None":(0,f.jsx)("ul",{children:null===(s=r.prod)||void 0===s?void 0:s.map((e=>(0,f.jsx)("li",{children:e},e)))})},r.iss===Me&&r.account?{name:"AWS Account",value:r.account}:{name:"Company",value:r.company},{name:"License ID",value:r.lid},r.iss===Me?null:{name:"URL",value:r.sub,tooltip:"License URL is the root URL of your Grafana instance. The license will not work on an instance of Grafana with a different root URL."},{name:"Purchase date",value:(0,Be.dq)(1e3*r.nbf)},r.iss===Me?null:{name:"License expires",value:(0,Be.dq)(1e3*r.lexp),highlight:!(null===(a=dt(r))||void 0===a||!a.state),tooltip:"The license expiration date is the date when the current license is no longer active. As the license expiration date approaches, Grafana Enterprise displays a banner."},r.iss===Me?null:{name:"Usage billing",value:r.usage_billing?"On":"Off",tooltip:"You can request Grafana Labs to turn on usage billing to allow an unlimited number of active users. When usage billing is enabled, Grafana does not enforce active user limits or display warning banners. Instead, you are charged for active users above the limit, according to your customer contract."}]})}),(0,f.jsx)(Qe,Object.assign({},dt(r),{title:"Token",footer:(0,f.jsxs)("div",{className:j.row,children:[r.iss!==Me&&(0,f.jsx)(rt,{onFileUpload:S,isUploading:g,isDisabled:!w}),v?mt||(mt=(0,f.jsx)("span",{children:" (Renewing...)"})):(0,f.jsx)(Q.zx,{variant:"secondary",onClick:async()=>{_e.E1.partial({tokenUpdated:null,tokenRenewed:null}),b(!0);try{await(async()=>(0,ie.i)().post("/api/licensing/token/renew",{}))(),_e.E1.partial({tokenRenewed:!0}),setTimeout((()=>{location.reload()}),1e3)}catch(e){throw b(!1),e}},disabled:!w,children:"Renew token"})]}),children:(0,f.jsxs)(f.Fragment,{children:[x&&(0,f.jsx)(Xe,{title:"Contact support to renew your token, or visit the Cloud portal to learn more.",state:x,orgSlug:r.slug,licenseId:r.lid}),(0,f.jsxs)("div",{className:j.message,children:[ft||(ft=(0,f.jsx)(p.J,{name:"document-info"})),"Read about"," ",vt||(vt=(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-expiration/",target:"_blank",rel:"noreferrer noopener",children:"license expiration"}))," ","and"," ",bt||(bt=(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/activate-license/",target:"_blank",rel:"noreferrer noopener",children:"license activation"})),"."]}),(0,f.jsx)(tt,{content:[{name:"Token ID",value:r.jti},{name:"Token issued",value:(0,Be.dq)(1e3*r.iat)},{name:"Token expires",value:(0,Be.dq)(1e3*r.exp),highlight:!(null===(i=dt(r))||void 0===i||!i.state),tooltip:"Grafana automatically updates the token before it expires. If your token is not updating, contact support."}],state:x})]})})),(0,f.jsx)(Qe,Object.assign({},pt(r,o),{title:"Utilization",footer:(0,f.jsx)("small",{className:j.footerText,children:"Utilization of licenced users is determined based on signed-in users' activity in the past 30 days."}),children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:j.message,children:[xt||(xt=(0,f.jsx)(p.J,{name:"document-info"})),"Read about"," ",yt||(yt=(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#active-users-limit",target:"_blank",rel:"noreferrer noopener",children:"active user limits"}))," ","and"," ",wt||(wt=(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#concurrent-sessions-limit",target:"_blank",rel:"noreferrer noopener",children:"concurrent session limits"})),"."]}),r.limit_by===Ae&&(0,f.jsx)(tt,{content:[{name:"Users",value:(N=r.included_users,O=null==o?void 0:o.active_users,(O?`${O} of `:"")+(N>0?N:"unlimited")),highlight:ht(r.included_users,null==o?void 0:o.active_users)>=80}],state:y})]})}))]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(We.UpgradeInfo,{editionNotice:k}),(0,f.jsx)("div",{className:j.uploadWrapper,children:(0,f.jsx)(rt,{title:"Have a license?",onFileUpload:S,isUploading:g,isDisabled:!w,licensedUrl:h})})]});var N,O},St=e=>({title:S.css`
      margin: ${e.spacing(4)} 0;
    `,infoText:S.css`
      font-size: ${e.typography.size.sm};
    `,uploadWrapper:S.css`
      margin-left: 79px;
    `,row:S.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      gap: ${e.spacing(2)};

      & > div {
        flex: 1 1 340px;
      }
    `,footerText:S.css`
      margin-bottom: ${e.spacing(2)};
    `,licenseCard:S.css`
      background: url('/public/img/licensing/card-bg-${e.isLight?"light":"dark"}.svg') center no-repeat;
      background-size: cover;
    `,message:S.css`
      height: 70px;
      a {
        color: ${e.colors.text.link};

        &:hover {
          text-decoration: underline;
        }
      }

      svg {
        margin-right: ${e.spacing(.5)};
      }
    `}),Ct=e=>{let{state:t,message:n,title:s,orgSlug:a,licenseId:i}=e;const r=(0,C.wW)(kt);return t?(0,f.jsx)(je.b,{title:s,severity:t||void 0,children:(0,f.jsxs)("div",{className:r.container,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:n}),(0,f.jsx)("a",{className:r.link,href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/",target:"_blank",rel:"noopener noreferrer",children:"Learn about Enterprise licenses"})]}),(0,f.jsx)(He,{orgSlug:a,licenseId:i})]})}):null},kt=e=>({container:S.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
    `,link:S.css`
      font-size: ${e.typography.bodySmall.fontSize};
      text-decoration: underline;
      color: ${e.colors.text.secondary};

      &:hover {
        color: ${e.colors.text.primary};
      }
    `});var Nt;const Ot=(0,$.connect)((e=>({navModel:(0,A.ht)(e.navIndex,"licensing")})),{}),It=Ot((e=>{var t;let{navModel:n,queryParams:s}=e;const[i,r]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),[d,c]=(0,u.useState)(!1),{tokenUpdated:h,tokenRenewed:p}=s;return(0,u.useEffect)((()=>{if(!ye.Vt.hasAccess(Z.LicensingRead,ye.Vt.isGrafanaAdmin))return;c(!0);return(async()=>{const e=await Le().catch((()=>null)),t=await Fe().catch((()=>null));r(e),l(t),c(!1)})(),Ee}),[]),(0,f.jsx)(P.T,{navModel:n,children:(0,f.jsxs)(P.T.Contents,{children:[Nt||(Nt=(0,f.jsx)(ze.ServerStats,{})),(0,f.jsx)(jt,{token:i,stats:o,tokenUpdated:h,tokenRenewed:p,isLoading:d,licensedUrl:null===(t=a.v.licenseInfo)||void 0===t?void 0:t.appUrl})]})})}));var Tt=n(74903),$t=n(46782),Rt=n(1696),Pt=n(16093),Dt=n(95628);let At;!function(e){e.Test="test",e.Control="control"}(At||(At={}));const Mt=e=>"feature-highlights"+(e?`-${e}`:"");var Lt=n(23067);const Ft={isDrawerOpen:!1,drawerTab:q.Stats},Et=(0,Lt.oM)({name:"metaAnalytics",initialState:Ft,reducers:{setDrawerOpen:(e,t)=>Object.assign({},e,{isDrawerOpen:t.payload}),setDrawerTab:(e,t)=>Object.assign({},e,{drawerTab:t.payload})}}),{setDrawerOpen:Vt,setDrawerTab:zt}=Et.actions,Bt={metaAnalytics:Et.reducer};var _t=n(10453),Wt=n(87152),Ut=n(71873),Ht=n(93570);const qt="YYYY-MM-DD",Zt=e=>{const t=[];for(let n in e)t.push(e[n]);return t.sort(((e,t)=>(0,xe.CQ)(e.day,qt).valueOf()-(0,xe.CQ)(t.day,qt).valueOf())),t},Gt=(0,Ge.B)((e=>{const t=e.colors.background.secondary;return{tabContent:S.css`
      height: 100%;
    `,tabsBar:S.css`
      padding-left: ${e.spacing(2)};
      margin: ${e.spacing(3,-1,-3,-3)};
    `,graphContainer:S.css`
      margin-top: ${e.spacing(2)};
      background-color: ${t};
    `,panelContent:S.css`
      contain: none;
    `,userBoxesContainer:S.css`
      display: flex;
      margin-top: ${e.spacing(3)};

      > div + div {
        margin-left: ${e.spacing(2)};
      }
    `,userBox:S.css`
      padding: ${e.spacing(2)};
      flex: 1;
      text-align: center;
      background-color: ${t};
      border-radius: 3px;

      button,
      img {
        margin: ${e.spacing(0,0,1,0)};
      }
    `,userName:S.css`
      font-weight: ${e.typography.fontWeightBold};
    `,tableContainer:S.css`
      margin-top: ${e.spacing(3)};
      background-color: ${t};
      padding-bottom: ${e.spacing(1)};
      border-radius: 3px;

      [role='cell']:first-child > div {
        padding: 4px;
      }
      [role='columnheader']:first-child {
        height: 33px;
      }
      [role='row']:not(:only-child):nth-child(odd) {
        background-color: ${e.colors.background.primary};
      }
    `,tableHeader:S.css`
      padding: ${e.spacing(0,2,.5,2)};
      display: flex;
      justify-content: space-between;
      align-items: center;

      h4 {
        margin-bottom: 0px;
        padding: ${e.spacing(3,0)};
      }
    `,userIcon:S.css`
      margin: 0 0;
      width: 26px;
      height: 26px;
    `}}));var Qt=n(89050),Kt=n(27843),Jt=n(94582),Yt=n(27864),Xt=n(89164),en=n(45432),tn=n(43917),nn=n(68633),sn=n(85449),an=n(28173),rn=n(34784),on=n(663),ln=n(20729),dn=n(74333),cn=n(32934),un=n(57971);const hn=(e,t,n,s,i,r)=>{var o;const l=[],d=(0,tn.U)({field:{config:{unit:null==r||null===(o=r.defaults)||void 0===o?void 0:o.unit,decimals:i.decimals}},theme:a.v.theme2,timeZone:t});let c=-1;for(const s of e){const{timeField:o}=(0,nn.sV)(s);if(o)for(const h of s.fields){if(h.type!==Kt.fS.number)continue;c++;const p=(0,sn.k)({xField:o,yField:h,nullValueMode:an.Gl.Null});if(p.length>0){var u;const g=(0,rn.Kx)({field:h,reducers:i.stats||[]});let m,f=[];i.stats&&(f=i.stats.map((e=>{const t=d(g[e]);return Object.assign({},t,{title:e})}))),m=n[h.name]&&n[h.name].color?{mode:on.S.Fixed,fixedColor:n[h.name].color}:h.config&&h.config.color?h.config.color:{mode:on.S.Fixed,fixedColor:un.O9[l.length%un.O9.length]},h.config=r?Object.assign({},h.config,{unit:r.defaults.unit,decimals:r.defaults.decimals,color:m}):Object.assign({},h.config,{color:m}),h.display=(0,tn.U)({field:h,timeZone:t,theme:a.v.theme2});const v=(0,ln.e)(o),b=(0,ln.f)(o);o.display=(0,tn.U)({timeZone:t,field:Object.assign({},o,{type:o.type,config:{unit:dn.U6.getTimeFieldUnit(b)}}),theme:a.v.theme2}),l.push({label:(0,cn.C)(h,s,e),data:p,color:null===(u=h.config.color)||void 0===u?void 0:u.fixedColor,info:f,isVisible:!0,yAxis:{index:n[h.name]&&n[h.name].yAxis||1},seriesIndex:c,timeField:Object.assign({},o),valueField:Object.assign({},h),timeStep:v})}}}return l};class pn extends u.PureComponent{convertSummariesToDataFrame(e,t,n,s){const a=new Jt.G([]),i=new Jt.G([]);return e.forEach((e=>{a.buffer.push((0,xe.CQ)(e.day,qt).valueOf()),i.buffer.push(e[t])})),{fields:[{name:"Time",type:Kt.fS.time,config:{},values:a},{name:t,type:n,config:{displayName:null!=s?s:t},values:i}],length:e.length}}buildTimeRange(){const{dailySummaries:e}=this.props,t=(0,xe.CQ)(e[0].day),n=(0,xe.CQ)(e[e.length-1].day).add(12,"hours");return{from:t,to:n,raw:{from:t,to:n}}}renderChart(e){const{dailySummaries:t,theme:n}=this.props,{showBars:s,showLines:a,timeRange:i,title:r,width:o,fields:l,isStacked:d=!1}=e,c=Gt(n),u=l.map((e=>this.convertSummariesToDataFrame(t,e.name,e.type,e.label))),h=l.reduce(((e,t)=>{var n;return Object.assign({},e,{[t.name]:{color:null!==(n=t.color)&&void 0!==n?n:""}})}),{}),p=hn(u,"browser",h,0,{placement:"bottom",displayMode:Yt.jK.List,showLegend:!1});return(0,f.jsxs)("div",{className:(0,S.cx)(c.graphContainer,"panel-container"),"aria-label":"Graph container",children:[(0,f.jsx)("div",{className:"panel-title",children:r}),(0,f.jsx)("div",{className:(0,S.cx)("panel-content",c.panelContent),children:(0,f.jsx)(Xt.U,{height:150,width:o,timeRange:i,showBars:s,showLines:a,showPoints:!1,series:p,isStacked:d,timeZone:"browser",legendVisibility:p.length>1,onToggleSort:()=>{},legendDisplayMode:Yt.jK.List,placement:"bottom",children:(0,f.jsx)(en.I,{mode:Yt.f3.Multi})})})]})}}var gn;const mn={setDrawerOpen:Vt},fn=(0,C.HE)((0,$.connect)(null,mn)(class extends pn{render(){const{dailySummaries:e,theme:t}=this.props;if(e&&e.length>0){const e=this.buildTimeRange();return(0,f.jsx)(Qt.Z,{disableHeight:!0,children:n=>{let{width:s}=n;return 0===s?null:(0,f.jsxs)("main",{style:{width:s},children:[this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Kt.fS.number},{name:"cachedQueries",type:Kt.fS.number,label:"cached queries"}],width:s,timeRange:e,showBars:!1,showLines:!0}),this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Kt.fS.number}],width:s,timeRange:e,showBars:!0,showLines:!1}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Kt.fS.number,color:t.colors.error.border}],width:s,timeRange:e,showBars:!1,showLines:!0})]})}})}return gn||(gn=(0,f.jsx)("span",{children:"No data."}))}}));var vn;const bn=(0,C.HE)(class extends pn{render(){const{dailySummaries:e,theme:t}=this.props;if(e&&e.length>0){const e=this.buildTimeRange();return(0,f.jsx)(Qt.Z,{disableHeight:!0,children:n=>{let{width:s}=n;return 0===s?null:(0,f.jsxs)("main",{style:{width:s},children:[this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Kt.fS.number},{name:"cachedQueries",type:Kt.fS.number,label:"cached queries"}],width:s,timeRange:e,showBars:!1,showLines:!0}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Kt.fS.number,color:t.colors.error.border}],width:s,timeRange:e,showBars:!1,showLines:!0})]})}})}return vn||(vn=(0,f.jsx)("span",{children:"No data."}))}});var xn,yn=n(71855),wn=n(41345);const jn=e=>`0 0 0 1px ${e}`,Sn=(0,Ge.B)(((e,t,n)=>{const s=t?e.palette.blue80:e.colors.border2,a=t?e.palette.blue95:e.colors.border3,i=n?e.colors.dashboardBg:"transparent";return{icon:S.css`
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin-left: -6px;
      border: 3px ${i} solid;
      box-shadow: ${jn(s)};
      background-clip: padding-box;
      &:hover {
        background-clip: padding-box;
        box-shadow: ${jn(a)};
      }
    `,textIcon:S.css`
      padding: 0px;
      text-align: center;
      line-height: 22px;
      justify-content: center;
      color: ${e.colors.textSemiWeak};
      cursor: auto;
      font-size: ${e.typography.size.sm};
      background: ${e.isDark?e.palette.dark9:e.palette.gray90};
      &:focus {
        box-shadow: ${jn(s)};
      }
      &:hover {
        background: ${e.isDark?e.palette.dark10:e.palette.gray95};
      }
    `,tooltipContainer:S.css`
      text-align: center;
      padding: 0px ${e.spacing.sm};
    `,tooltipName:S.css`
      font-weight: ${e.typography.weight.bold};
    `,tooltipDate:S.css`
      font-weight: ${e.typography.weight.regular};
    `,dot:S.css`
      height: 6px;
      width: 6px;
      background-color: ${e.palette.blue80};
      border-radius: 50%;
      display: inline-block;
      margin-left: 6px;
      margin-bottom: 1px;
    `}})),Cn=e=>{const t=(0,xe.CQ)(e).diff((0,xe.CQ)(),"hours",!1);return`Active last ${24*(Math.floor(-t/24)+1)}h`},kn=e=>{var t,n;let{userView:s,showTooltip:a=!0,showBorder:i=!1,className:r}=e;const{user:o,viewed:l}=s,d=(0,xe.CQ)(l).diff((0,xe.CQ)(),"minutes",!0)>=-15,c=(0,C.Fg)(),u=Sn(c,d,i),h=o.name||o.login,p=h.split(" "),g=(((null===(t=p.shift())||void 0===t?void 0:t.slice(0,1))||"")+((null===(n=p.pop())||void 0===n?void 0:n.slice(0,1))||"")).toUpperCase(),m=o.avatarUrl&&o.hasCustomAvatar?(0,f.jsx)("img",{className:(0,S.cx)(u.icon,r),src:o.avatarUrl,"aria-label":"Avatar icon",alt:`${g} avatar`}):(0,f.jsx)(Q.zx,{variant:"secondary",className:(0,S.cx)(u.textIcon,u.icon,r),"aria-label":"Initials icon",children:g});if(a){const e=(0,f.jsxs)("div",{className:u.tooltipContainer,children:[(0,f.jsx)("div",{className:u.tooltipName,children:h}),(0,f.jsx)("div",{className:u.tooltipDate,children:d?(0,f.jsxs)(f.Fragment,{children:[xn||(xn=(0,f.jsx)("span",{children:"Active last 15m"})),(0,f.jsx)("span",{className:u.dot})]}):Cn(l)})]});return(0,f.jsx)(ne.u,{content:e,children:m},`recent-user-${o.id}`)}return m};var Nn;const On={setDrawerOpen:Vt},In=(0,C.HE)((0,$.connect)(null,On)(class extends pn{constructor(e){super(e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"onOpenVersionHistory",(()=>{const{setDrawerOpen:e}=this.props;e(!1),_e.E1.partial({editview:"versions"})})),this.state={dashboardUsersInfo:null}}async componentDidMount(){const{dashboard:e}=this.props;try{const t=await(async e=>await(0,Ht.i)().get(`/api/usage/dashboard/${e}/info`))(e.id);this.setState({dashboardUsersInfo:t})}catch(e){console.log("Error getting dashboard users info",e)}}formatDate(e){const t=e.diff((0,xe.CQ)().startOf("day"),"days",!0);if(t<-6)return e.format("YYYY-MM-DD");if(t<-1)return e.locale("en").format("dddd");if(t<0)return"Yesterday";{const t=e.diff((0,xe.CQ)(),"minutes",!0);return t<-60?"Today":t<-15?"Last hour":"Currently viewing"}}renderUserBox(e,t,n){return(0,f.jsxs)("div",{className:n.userBox,"aria-label":"User information box",children:[(0,f.jsx)("h6",{"aria-label":"User box title",children:e}),(0,f.jsx)(kn,{userView:t,showTooltip:!1}),(0,f.jsx)("div",{className:n.userName,children:t.user.name||t.user.login}),(0,f.jsx)("div",{children:(0,xe.CQ)(t.viewed).format("YYYY-MM-DD")})]})}renderViewsChart(){const e=this.buildTimeRange();return(0,f.jsx)(Qt.Z,{disableHeight:!0,children:t=>{let{width:n}=t;return 0===n?null:(0,f.jsx)("main",{style:{width:n},children:this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Kt.fS.number}],width:n,timeRange:e,showBars:!0,showLines:!1})})}})}convertUserViewsToDataFrame(e,t){const{userViews:n}=this.props;if(n&&n.length>0){const s=new Jt.G([]),a=new Jt.G([]),i=new Jt.G([]);n.forEach((t=>{s.buffer.push(this.formatDate((0,xe.CQ)(t.viewed))),a.buffer.push(t.user.name||t.user.login),i.buffer.push((0,f.jsx)(kn,{className:e.userIcon,userView:t,showTooltip:!1}))}));const r={displayName:" ",filterable:!1,custom:{width:50,align:"center",minWidth:50,displayMode:Yt.h2.ColorText,inspect:!1}},o=[{fields:[{name:" ",type:Kt.fS.other,config:r,values:i},{name:"User",type:Kt.fS.string,config:{},values:a},{name:"When",type:Kt.fS.string,config:{},values:s}],length:n.length}],l=(0,yn.SM)({data:o,theme:t,replaceVariables:e=>e,fieldConfig:{}});return l.length>0?l[0]:null}return null}render(){const{dailySummaries:e,dashboard:t,theme:n,userViews:s}=this.props,{dashboardUsersInfo:a}=this.state,i=Gt(n),r=this.convertUserViewsToDataFrame(i,n);return(0,f.jsxs)("div",{children:[e&&e.length>0&&this.renderViewsChart(),(0,f.jsxs)("div",{className:i.userBoxesContainer,children:[(null==a?void 0:a.creator)&&this.renderUserBox("Created",a.creator,i),(null==a?void 0:a.lastEditor)&&this.renderUserBox("Last edited",a.lastEditor,i),(null==s?void 0:s.length)>0&&this.renderUserBox("Last viewed",s[0],i)]}),(null==s?void 0:s.length)>0&&(0,f.jsxs)("div",{className:i.tableContainer,children:[(0,f.jsxs)("div",{className:i.tableHeader,children:[Nn||(Nn=(0,f.jsx)("h4",{children:"Last 30 dashboard viewers"})),t.meta.showSettings&&(0,f.jsx)(Q.zx,{icon:"history",variant:"secondary",onClick:this.onOpenVersionHistory,"aria-label":"Version history button",children:"Dashboard version history"})]}),(0,f.jsx)(Qt.Z,{disableHeight:!0,children:e=>{let{width:t}=e;if(0===t)return null;const n=35*(r.length+1);return(0,f.jsx)("main",{style:{width:t},children:(0,f.jsx)(wn.i,{data:r,height:n,width:t,"aria-label":"Recent users table"})})}})]})]})}}));var Tn;class $n extends u.PureComponent{constructor(e){super(e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"onSelectTab",(e=>{this.props.setDrawerTab(e.value||q.Stats)})),this.state={drawerWidth:"50%",dailySummaries:[],publicDailySummaries:[],userViews:[]}}async componentDidMount(){const{dashboard:e}=this.props,t=[];for(let e=0;e<30;e++)t.push((0,xe.CQ)(Date.now()).subtract(e,"days").format(qt));if(null!=e&&e.id&&e.meta.url){const n=await(async(e,t)=>{const n=await(0,Ht.i)().get(`/api/usage/dashboard/${e}/daily`,{days:t});return Zt(n)})(e.id,t),s=await(async(e,t)=>await(0,Ht.i)().get(`/api/usage/dashboard/${e}/views?limit=${t}`))(e.id,30);let a=[];(0,$t.iE)().featureToggles.publicDashboards&&(a=await(async(e,t)=>{const n=await(0,Ht.i)().get(`/api/usage/dashboard/${e}/public/daily`,{days:t});return Zt(n)})(e.id,t)),this.setState({dailySummaries:n,userViews:s,publicDailySummaries:a})}}renderHeader(e){const t=[{label:"Stats",value:q.Stats},{label:"Users and activity",value:q.Users}];return(0,$t.iE)().featureToggles.publicDashboards&&t.push({label:"Public dashboards",value:q.PublicDashboards}),(0,f.jsx)(_t.J,{className:e.tabsBar,children:t.map(((e,t)=>(0,f.jsx)(Wt.O,{label:e.label,active:e.value===this.props.drawerTab,onChangeTab:()=>this.onSelectTab(e)},`${e.value}-${t}`)))})}render(){const{dailySummaries:e,publicDailySummaries:t,drawerWidth:n,userViews:s}=this.state,{dashboard:a,drawerTab:i,setDrawerOpen:r,theme:o}=this.props,l=Gt(o);return(0,f.jsx)(Pt.d,{scrollableContent:!0,title:`${a.title} - analytics`,width:n,onClose:()=>r(!1),subtitle:this.renderHeader(l),expandable:!0,children:(0,f.jsxs)(Ut.I,{className:l.tabContent,children:[(0,M.d5)()&&(Tn||(Tn=(0,f.jsx)(D.Xz,{featureId:"dashboard-insights",eventVariant:"trial",featureName:"dashboard usage insights",text:"Get full access to usage insights for free during your trial of Grafana Pro."}))),i===q.Stats&&(0,f.jsx)(bn,{dashboard:a,dailySummaries:e}),i===q.Users&&(0,f.jsx)(In,{dashboard:a,dailySummaries:e,userViews:s}),(0,$t.iE)().featureToggles.publicDashboards&&i===q.PublicDashboards&&(0,f.jsx)(fn,{dashboard:a,dailySummaries:t})]})})}}const Rn={setDrawerOpen:Vt,setDrawerTab:zt},Pn=(0,C.HE)((0,$.connect)((function(e){return{drawerTab:e.metaAnalytics.drawerTab}}),Rn)($n));var Dn;const An=e=>{let{onClick:t,isHighlighted:n}=e;return(0,f.jsx)(Rt.h,{icon:"info-circle",tooltip:"Dashboard insights",onClick:t,isHighlighted:n})},Mn=e=>{let{dashboard:t,isDrawerOpen:n,setDrawerOpen:s}=e;const a=(null==t?void 0:t.id)&&t.meta.url,r=(0,M.d5)();return(0,u.useEffect)((()=>{a&&r&&(0,i.SZ)(Mt("dashboard-insights-dot"),At.Test,"trial")}),[a,r]),a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(An,{onClick:()=>{s(!0)},isHighlighted:r}),n&&(0,f.jsx)(Pn,{dashboard:t})]})};function Ln(e){return{isDrawerOpen:e.metaAnalytics.isDrawerOpen}}const Fn={setDrawerOpen:Vt},En=e=>{let{dashboard:t}=e;const n=(null==t?void 0:t.id)&&t.meta.url,[s,a]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{n&&(0,i.SZ)(Mt("dashboard-insights-dot"),At.Test,"")}),[n]),n&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(An,{isHighlighted:!0,onClick:()=>{a(!0)}}),s&&(0,f.jsx)(zn,{dashboard:t,onClose:()=>a(!1)})]})},Vn=()=>{(0,s.v)("analytics")?r.Vt.hasPermission(Z.DashboardsInsightsRead)&&(0,Dt.hf)({show:()=>!0,component:(0,$.connect)(Ln,Fn)(Mn),index:-1}):a.v.featureToggles.featureHighlights&&(0,Dt.hf)({show:()=>!0,component:En,index:-1})},zn=e=>{let{onClose:t,dashboard:n}=e;const s=(0,C.l4)();return(0,f.jsxs)(Pt.d,{onClose:t,title:`${null==n?void 0:n.title} - analytics`,width:"50%",children:[Dn||(Dn=(0,f.jsx)(D.Xz,{featureName:"dashboard usage insights",featureId:"dashboard-insights"})),(0,f.jsx)(D.tM,{featureName:"dashboard usage insights",image:`usage-insights-${s.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights",description:"Usage Insights provide detailed information about dashboard usage, like the number of views, queries, and errors users have experienced. You can use this to improve users’ experience and troubleshoot issues."})]})};function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _n{constructor(e){Bn(this,"buffer",[]),Bn(this,"supportedEvents",[Tt.ee.MetaAnalytics]),Bn(this,"addEvent",(e=>{this.buffer.push(e)})),Bn(this,"flush",(()=>{if(0===this.buffer.length)return;const e=[];for(const t of this.buffer)e.push(Object.assign({type:t.type},t.payload,{meta:t.meta}));this.buffer=[],this.options.url&&(0,Ht.i)().fetch({method:"POST",url:this.options.url,showSuccessAlert:!1,showErrorAlert:!1,data:e}).toPromise()})),this.options=e}}var Wn=n(82897);const Un=(0,Ge.B)(((e,t)=>({container:S.css`
      display: flex;
      justify-content: center;
      flex-direction: row-reverse;
      margin-left: ${e.spacing.sm};
    `,moreIcon:S.css`
      cursor: pointer;
      span {
        margin-bottom: ${t?"3px":"0px"};
      }
    `}))),Hn={openDrawer:function(e){return t=>{t(Vt(!0)),t(zt(e))}}},qn=(0,$.connect)(null,Hn);function Zn(e,t){const n=ye.Vt.user;(async(e,t)=>await(0,Ht.i)().get(`/api/usage/dashboard/${e}/views/recent?limit=${t}`))(e,14).then((e=>{const s=e.filter((e=>e.user.id!==n.id));t((e=>(0,Wn.isEqual)(s,e)?e:s))}))}const Gn=e=>{let{dashboard:t,openDrawer:n}=e;const s=null==t?void 0:t.id,[a,i]=(0,u.useState)([]),r=a.length-4+1,o=r>9,l=(0,C.Fg)(),d=Un(l,o),c=Sn(l,!1,!0);(0,u.useEffect)((()=>{if(!s||null==t||!t.meta.url)return;Zn(s,i);const e=setInterval((()=>Zn(s,i)),6e4);return()=>{clearInterval(e)}}),[s,t]);const h=a.length>4;return(0,f.jsx)(f.Fragment,{children:a.length>0&&(0,f.jsxs)("div",{className:d.container,"aria-label":"Presence indicators container",children:[h&&(0,f.jsx)(Q.zx,{variant:"secondary",className:(0,S.cx)(c.textIcon,c.icon,d.moreIcon),"aria-label":"More users icon",onClick:()=>n(q.Users),children:o?"...":`+${r}`}),a.slice(0,h?3:4).reverse().map((e=>(0,f.jsx)(kn,{userView:e,showBorder:!0},e.user.id)))]})})};const Qn=()=>{if((0,s.v)("analytics")){(0,Tt.e6)(new _n({url:Kn()}));ye.Vt.user.isSignedIn&&(ye.Vt.hasPermission(Z.DashboardsInsightsRead)&&(0,Dt.NN)({show:()=>!0,component:qn(Gn),index:"end"}),Vn())}else a.v.featureToggles.featureHighlights&&Vn()},Kn=()=>(0,$t.iE)().isPublicDashboardView?`api/public/ma/events/${function(){if((0,$t.iE)().isPublicDashboardView){const e=window.location.pathname.split("/");return e[e.length-1]}return""}()}`:"api/ma/events";var Jn,Yn,Xn,es=n(92554),ts=n(89902);const ns={loadDataSource:L.gv,loadDataSourceMeta:L.b2},ss=(0,$.connect)(((e,t)=>{const n=t.match.params.uid,s=(0,F.xG)("insights");return{navModel:(0,A.ht)(e.navIndex,`datasource-insights-${n}`,s),dataSourceUid:n}}),ns);class as extends u.PureComponent{constructor(e){super(e),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:e,loadDataSource:t,loadDataSourceMeta:n}=this.props;if(t(e).then(n),(0,s.v)("analytics")){let t=(0,xe.CQ)().subtract(30,"days").format(qt),n=(0,xe.CQ)().format(qt);const s=await(async(e,t,n)=>{const s=await(0,Ht.i)().get(`/api/usage/datasource/${e}/daily`,{from:t,to:n});return Zt(s)})(e,t,n);this.setState({dailySummaries:s,from:t,to:n})}}buildTimeRange(){const{from:e,to:t}=this.state;return{from:(0,xe.CQ)(e),to:(0,xe.CQ)(t).add(24,"hours"),raw:{from:e,to:t}}}convertDailySummariesToDataFrame(e,t,n){const s=new Jt.G([]),a=new Jt.G([]);return e.forEach((e=>{s.buffer.push((0,xe.CQ)(e.day,qt).valueOf());let n=e[t];"loadDuration"===t&&(n=e.queries?e.loadDuration/(1e6*e.queries):0),a.buffer.push(n)})),{name:t,fields:[{name:"Time",type:Kt.fS.time,config:{},values:s},{name:t,type:n,config:{},values:a}],length:e.length}}renderChart(e,t){const{dailySummaries:n}=this.state,{color:s,fieldType:a,showBars:i,showLines:r,timeRange:o,title:l,valueField:d,width:c}=e;let u=this.convertDailySummariesToDataFrame(n,d,a);const h=hn([u],"browser",{[d]:{color:s}},0,{placement:"bottom",displayMode:Yt.jK.List,showLegend:!1});return(0,f.jsxs)("div",{className:(0,S.cx)(t.graphContainer,"panel-container"),"aria-label":"Graph container",children:[(0,f.jsx)("div",{className:"panel-title",children:l}),(0,f.jsx)("div",{className:(0,S.cx)("panel-content",t.panelContent),children:(0,f.jsx)(es.k,{height:150,width:c,timeRange:o,showBars:i,showLines:r,showPoints:!1,series:h,timeZone:"browser",children:(0,f.jsx)(en.I,{mode:Yt.f3.Multi})})})]},e.valueField)}renderContent(){const{theme:e}=this.props,t=Gt(e),{dailySummaries:n}=this.state,s=this.buildTimeRange();return(null==n?void 0:n.length)>0?(0,f.jsx)(Qt.Z,{disableHeight:!0,children:n=>{let{width:a}=n;const i=[{title:"Queries last 30 days",valueField:"queries",fieldType:Kt.fS.number,width:a,timeRange:s,color:"",showBars:!0,showLines:!1},{title:"Errors last 30 days",valueField:"errors",fieldType:Kt.fS.number,width:a,timeRange:s,color:e.colors.error.border,showBars:!0,showLines:!1},{title:"Average load duration last 30 days (ms)",valueField:"loadDuration",fieldType:Kt.fS.number,width:a,timeRange:s,color:e.colors.primary.border,showBars:!0,showLines:!1}];return(0,f.jsx)("main",{style:{width:a},children:i.map((e=>this.renderChart(e,t)))})}}):Jn||(Jn=(0,f.jsx)("span",{children:"No available data for this data source."}))}render(){const{navModel:e}=this.props;return(0,f.jsx)(P.T,{navId:"datasources",pageNav:e.main,children:(0,f.jsx)(P.T.Contents,{children:(0,s.v)("analytics.writers")&&!(0,s.v)("analytics")?Yn||(Yn=(0,f.jsx)(ts.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration",children:(0,f.jsx)("span",{children:"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page."})})):(0,f.jsxs)(f.Fragment,{children:[(0,M.d5)()&&(Xn||(Xn=(0,f.jsx)(D.Xz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:"Enable data source usage insights for free during your trial of Grafana Pro."}))),this.renderContent()]})})})}}const is=ss((0,C.HE)(as));var rs;const os=ss((e=>{let{navModel:t,dataSourceUid:n,loadDataSource:s,loadDataSourceMeta:a}=e;const i=(0,C.l4)();return(0,u.useEffect)((()=>{s(n).then(a)}),[n,s,a]),(0,f.jsx)(P.T,{navId:"datasources",pageNav:t.main,children:(0,f.jsxs)(P.T.Contents,{children:[rs||(rs=(0,f.jsx)(D.Xz,{featureName:"data source usage insights",featureId:"data-source-insights"})),(0,f.jsx)(D.TA,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${i.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users’ experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"})]})})}));var ls,ds=n(58117);const cs={loadDataSource:L.gv,loadDataSourceMeta:L.b2},us=(0,$.connect)((function(e,t){const n=t.match.params.uid;return{resourceId:n,navModel:(0,A.ht)(e.navIndex,`datasource-permissions-${n}`,(0,F.xG)("permissions"))}}),cs),hs=us((e=>{let{resourceId:t,loadDataSource:n,navModel:s,loadDataSourceMeta:a}=e;(0,u.useEffect)((()=>{n(t)}),[t,n]);const i=r.Vt.hasPermission(Z.DataSourcesPermissionsWrite);return(0,u.useEffect)((()=>{n(t).then(a)}),[n,a,t]),(0,f.jsx)(P.T,{navId:"datasources",pageNav:s.main,children:(0,f.jsxs)(P.T.Contents,{children:[(0,M.d5)()&&(ls||(ls=(0,f.jsx)(D.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}))),(0,f.jsx)(ds.P,{resource:"datasources",resourceId:t,canSetPermissions:i})]})})}));var ps,gs=n(34393),ms=n(3218),fs=n(26006),vs=n(36259),bs=n(15082);function xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ys extends u.PureComponent{constructor(){super(...arguments),xs(this,"state",this.cleanState()),xs(this,"onTeamSelected",(e=>{const t=null==e?void 0:e.value;this.setState({teamId:t?t.id:0})})),xs(this,"onUserSelected",(e=>{this.setState({userId:e?e.id:0})})),xs(this,"onPermissionChanged",(e=>{this.setState({permission:e.value})})),xs(this,"onTypeChanged",(e=>{this.setState({type:e.value,userId:0,teamId:0})})),xs(this,"onSubmit",(async()=>{await this.props.onAddPermission(this.state),this.setState(this.cleanState())}))}cleanState(){return{userId:0,teamId:0,type:d.pC.Team,permission:d.zV.Query}}isValid(){switch(this.state.type){case d.pC.Team:return this.state.teamId>0;case d.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:e}=this.props,{type:t}=this.state,n="width-20",s=[{value:d.pC.Team,label:"Team"},{value:d.pC.User,label:"User"}];return(0,f.jsxs)("div",{className:"cta-form","aria-label":"Permissions slider",children:[(0,f.jsx)(fs.P,{onClick:e}),ps||(ps=(0,f.jsx)("h5",{children:"Add Permission For"})),(0,f.jsx)(ms.l,{name:"addPermission",maxWidth:"none",onSubmit:this.onSubmit,children:()=>(0,f.jsxs)(R.Lh,{children:[(0,f.jsx)(h.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:t,options:s,onChange:this.onTypeChanged,menuShouldPortal:!0}),t===d.pC.User&&(0,f.jsx)(bs.f,{onSelected:this.onUserSelected,className:n}),t===d.pC.Team&&(0,f.jsx)(vs.c,{onSelected:this.onTeamSelected,className:n}),(0,f.jsx)(h.Ph,{isSearchable:!1,options:d.nl,onChange:this.onPermissionChanged,value:d.nl.find((e=>e.value===this.state.permission)),width:25,menuShouldPortal:!0}),(0,f.jsx)(Q.zx,{type:"submit",disabled:!this.isValid(),children:"Save"})]})})]})}}var ws,js,Ss,Cs,ks,Ns,Os=n(52777),Is=n(23539);const{Select:Ts}=Os.vw6,$s={id:-1,datasourceId:-1,updated:"",created:"",permissionName:"Admin",builtInRole:"Admin",permission:Is.zV.Admin},Rs={label:"Admin",description:"",value:Is.zV.Admin},Ps=e=>{let{items:t,onRemoveItem:n}=e;const s=t.filter((e=>void 0!==e.userId)),a=t.filter((e=>void 0!==e.teamId)),i=[$s];return(0,f.jsxs)("div",{children:[(0,f.jsx)(Ds,{title:"Roles",items:i,onRemove:n}),(0,f.jsx)(Ds,{title:"Users",items:s,onRemove:n}),(0,f.jsx)(Ds,{title:"Teams",items:a,onRemove:n})]})},Ds=e=>{let{title:t,items:n,onRemove:s}=e;return 0===n.length?null:(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:t}),(0,f.jsx)("table",{className:"filter-table gf-form-group",children:(0,f.jsx)("tbody",{children:n.map(((e,t)=>(0,f.jsx)(As,{item:e,onRemove:s},`${t}-${e.id}`)))})})]})},As=e=>{let{item:t,onRemove:n}=e;const s=[...Is.nl,Rs];return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{width:"1%"},children:t.teamId?(0,f.jsx)("img",{className:"filter-table__avatar",src:t.teamAvatarUrl,alt:`Avatar for team ${t.teamId}`}):t.userId?(0,f.jsx)("img",{className:"filter-table__avatar",src:t.userAvatarUrl,alt:`Avatar for user ${t.userId}`}):ws||(ws=(0,f.jsx)(p.J,{size:"xl",name:"shield"}))}),(0,f.jsx)("td",{style:{width:"90%"},children:t.userId?(0,f.jsxs)("span",{children:[t.userLogin," "]},"name"):t.teamId?(0,f.jsxs)("span",{children:[t.team," "]},"name"):t.builtInRole?(0,f.jsxs)("span",{children:[t.builtInRole," "]},"name"):js||(js=(0,f.jsx)("span",{},"name"))}),Ss||(Ss=(0,f.jsx)("td",{})),Cs||(Cs=(0,f.jsx)("td",{className:"query-keyword",children:"Can"})),(0,f.jsx)("td",{children:(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsx)(Ts,{isDisabled:!0,onChange:()=>{},options:s,value:s.find((e=>e.value===t.permission))})})}),(0,f.jsx)("td",{children:t.builtInRole?ks||(ks=(0,f.jsx)("button",{className:"btn btn-inverse btn-small",children:(0,f.jsx)(p.J,{name:"lock",size:"sm"})})):(0,f.jsx)("button",{className:"btn btn-danger btn-small",onClick:()=>n(t),children:Ns||(Ns=(0,f.jsx)(p.J,{name:"times",size:"sm"}))})})]})};var Ms;const Ls=e=>{let{action:t}=e;const n=(0,C.l4)();return(0,f.jsx)(D.TA,{action:t,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users’ experience by hiding data sources they don’t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${n.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},Fs=us((e=>{let{navModel:t,loadDataSource:n,loadDataSourceMeta:s,resourceId:a}=e;return(0,u.useEffect)((()=>{n(a).then(s)}),[a,n,s]),(0,f.jsx)(P.T,{navId:"datasources",pageNav:t.main,children:Ms||(Ms=(0,f.jsxs)(P.T.Contents,{children:[(0,f.jsx)(D.Xz,{featureName:"data source permissions",featureId:"data-source-permissions"}),(0,f.jsx)(Ls,{})]}))})}));let Es;!function(e){e.LoadDataSourcePermissions="LOAD_DATA_SOURCE_PERMISSIONS"}(Es||(Es={}));function Vs(e){return async t=>{const n=await(0,ie.i)().get(`/api/datasources/${e}/permissions`);var s;t((s=n,{type:Es.LoadDataSourcePermissions,payload:s}))}}var zs,Bs,_s,Ws;function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hs={addDataSourcePermission:function(e,t){return async n=>{await(0,ie.i)().post(`/api/datasources/${e}/permissions`,t),n(Vs(e))}},enableDataSourcePermissions:function(e){return async t=>{await(0,ie.i)().post(`/api/datasources/${e}/enable-permissions`,{}),t(Vs(e))}},disableDataSourcePermissions:function(e){return async t=>{await(0,ie.i)().post(`/api/datasources/${e}/disable-permissions`,{}),t(Vs(e))}},loadDataSourcePermissions:Vs,loadDataSource:L.gv,loadDataSourceMeta:L.b2,removeDataSourcePermission:function(e,t){return async n=>{await(0,ie.i)().delete(`/api/datasources/${e}/permissions/${t}`),n(Vs(e))}}},qs=(0,$.connect)((function(e,t){const n=t.match.params.uid,s=(0,F.xG)("permissions");return{uid:n,enabled:e.dataSourcePermission.enabled,isDefault:e.dataSources.dataSource.isDefault,permissions:e.dataSourcePermission.permissions,navModel:(0,A.ht)(e.navIndex,`datasource-permissions-${n}`,s)}}),Hs);class Zs extends u.PureComponent{constructor(){super(...arguments),Us(this,"state",{datasourceId:0,isAdding:!1}),Us(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),Us(this,"onEnablePermissions",(()=>{const{enableDataSourcePermissions:e}=this.props;e(this.state.datasourceId)})),Us(this,"onDisablePermissions",(()=>{const{disableDataSourcePermissions:e}=this.props;e(this.state.datasourceId)})),Us(this,"onAddPermission",(e=>{const{addDataSourcePermission:t}=this.props,n={permission:e.permission};e.type===d.pC.Team?t(this.state.datasourceId,Object.assign(n,{teamId:e.teamId})):e.type===d.pC.User&&t(this.state.datasourceId,Object.assign(n,{userId:e.userId}))})),Us(this,"onRemovePermission",(e=>{this.props.removeDataSourcePermission(e.datasourceId,e.id)})),Us(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),Us(this,"isEnabled",(()=>this.props.enabled)),Us(this,"renderActions",(()=>{const e=[],{isAdding:t}=this.state;return this.isEnabled()&&(e.push((0,f.jsx)(Q.zx,{variant:"primary",onClick:this.onOpenAddPermissions,disabled:t,children:"Add a permission"},"add-permission")),e.push((0,f.jsx)(Q.zx,{variant:"destructive",onClick:this.onDisablePermissions,children:"Disable permissions"},"disable-permissions"))),e}))}componentDidMount(){this.fetchDataSource().then((e=>{this.props.loadDataSourceMeta(e),this.setState({datasourceId:e.id}),this.fetchDataSourcePermissions(e.id)}))}async fetchDataSource(){const{uid:e,loadDataSource:t}=this.props;return t(e)}async fetchDataSourcePermissions(e){const{loadDataSourcePermissions:t}=this.props;return t(e)}render(){const{permissions:e,navModel:t,isDefault:n}=this.props,{isAdding:s}=this.state;return(0,f.jsx)(P.T,{navId:"datasources",pageNav:t.main,children:(0,f.jsxs)(P.T.Contents,{children:[(0,M.d5)()&&(zs||(zs=(0,f.jsx)(D.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}))),(0,f.jsxs)("div",{className:"page-action-bar",children:[Bs||(Bs=(0,f.jsx)("h3",{className:"page-sub-heading",children:"Permissions"})),_s||(_s=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),this.renderActions()]}),n&&!this.isEnabled()&&(Ws||(Ws=(0,f.jsx)(je.b,{title:"Warning!",children:"Enabling permissions on the default data source makes it unavailable for users not listed in the permissions."}))),this.isEnabled()?(0,f.jsxs)("div",{children:[(0,f.jsx)(gs.s,{in:s,children:(0,f.jsx)(ys,{onAddPermission:e=>this.onAddPermission(e),onCancel:this.onCancelAddPermission})}),(0,f.jsx)(Ps,{items:e,onRemoveItem:this.onRemovePermission})]}):(0,M.d5)()?(0,f.jsx)(Ls,{action:{onClick:this.onEnablePermissions,text:"Enable permissions"}}):(0,f.jsx)(G.Z,{title:"Permissions not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"unlock",onClick:this.onEnablePermissions,proTip:"Only admins will be able to query the data source after you enable permissions.",proTipLink:"https://docs.grafana.org/permissions/datasource_permissions/",proTipLinkTitle:"Learn more"})]})})}}const Gs=qs(Zs),Qs={permissions:[],enabled:!1,datasourceId:0},Ks={dataSourcePermission:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs,t=arguments.length>1?arguments[1]:void 0;return t.type===Es.LoadDataSourcePermissions?{enabled:t.payload.enabled,permissions:t.payload.permissions,datasourceId:t.payload.datasourceId}:e}};var Js,Ys=n(18474),Xs=n(57157),ea=n(63454),ta=n(94025),na=n(8910),sa=n(78941),aa=n(12310),ia=n(2247),ra=n(31135),oa=n(94570),la=n(34117),da=n(5333),ca=n(46889);const ua=e=>{const{onChange:t,value:n}=e,s=(0,C.wW)(ha);return(0,f.jsxs)(la.Z,{className:s.filter,children:[Js||(Js=(0,f.jsx)(da.c,{width:"auto",children:"Filter by data source"})),(0,f.jsx)(ca._,{children:(0,f.jsx)(oa.q,{width:30,placeholder:"Select a data source",onChange:e=>{t({name:e.name,id:e.id,uid:e.uid})},noDefault:!0,current:n})}),(0,f.jsx)(ca._,{children:(0,f.jsx)(Q.zx,{className:s.button,icon:"trash-alt",variant:"secondary",onClick:()=>{t(void 0)}})})]})},ha=e=>({filter:S.css`
      margin-bottom: ${a.v.theme.spacing.md};
    `,button:S.css`
      color: ${e.colors.text.secondary};
    `});var pa=n(85699);const ga=e=>{var t,n;let{recordedQuery:s,buttons:a}=e;const i=(0,C.wW)(fa),r=null===(t=(0,na.F)())||void 0===t?void 0:t.getInstanceSettings(null===(n=s.queries[0])||void 0===n?void 0:n.datasource);return(0,f.jsxs)("div",{className:i.alert,children:[(null==r?void 0:r.meta)&&(0,f.jsx)("img",{className:i.media,src:r.meta.info.logos.small,alt:"Query logo"}),(0,f.jsx)("div",{className:i.body,children:(0,f.jsxs)("div",{className:i.info,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:i.heading,children:s.name}),(0,f.jsx)("p",{className:i.description,children:ma(s)})]}),(0,f.jsx)("div",{className:i.buttonWrapper,children:a.map(((e,t)=>(0,f.jsx)("div",{className:i.button,children:e},`button-${t}`)))})]})})]})},ma=e=>{var t,n;const s=[`Interval: ${(0,pa.secondsToHms)(e.interval)}`,`Range: Last ${(0,pa.secondsToHms)(e.range)}`],a=null===(t=(0,na.F)())||void 0===t?void 0:t.getInstanceSettings(null===(n=e.queries[0])||void 0===n?void 0:n.datasource);return void 0!==a&&s.unshift(a.name),""!==e.description&&s.push(`${e.description}`),s.join(" | ")},fa=e=>{const t=e.shape.borderRadius();return{info:S.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,heading:S.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${e.typography.size.md};
      letter-spacing: inherit;
      line-height: ${e.typography.body.lineHeight};
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightMedium};
    `,description:S.css`
      width: 100%;
      margin: ${e.spacing(1,0,0)};
      color: ${e.colors.text.secondary};
      line-height: ${e.typography.body.lineHeight};
    `,alert:S.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${t};
      display: flex;
      flex-direction: row;
      align-items: center;
      background: ${e.colors.background.secondary};
      box-shadow: ${e.shadows.z1};
      margin-bottom: ${e.spacing(1)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${e.colors.background.primary};
        z-index: -1;
      }
    `,body:S.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:S.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
      margin-left: 26px;
    `,media:S.css`
      margin-left: ${e.spacing(2)};
      width: 40px;
    `,buttonWrapper:S.css`
      padding: ${e.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
      margin-right: ${e.spacing()};
    `,button:S.css`
      margin-left: ${e.spacing()};
    `}};var va=n(3363);const ba=(0,Lt.oM)({name:"recorded-queries",initialState:{recordedQueries:[],isLoading:!1,errorRecordedQueryTestResponse:""},reducers:{loadRecordedQueries:e=>Object.assign({},e,{isLoading:!0}),endLoadRecordedQueries:e=>Object.assign({},e,{isLoading:!1}),loadedRecordedQueries:(e,t)=>{const n=t.payload;return Object.assign({},e,{recordedQueries:n})},updateRecordedQueries:(e,t)=>{const n=t.payload,s=e.recordedQueries.map((e=>e.id===n.id?n:e));return Object.assign({},e,{recordedQueries:s})},deleteRecordedQueries:(e,t)=>{const n=t.payload,s=e.recordedQueries.filter((e=>e.id!==n.id));return Object.assign({},e,{recordedQueries:s})},setPrometheusWriteTarget:(e,t)=>{const n=t.payload;return Object.assign({},e,{prometheusWriteTarget:n})}}}),{loadRecordedQueries:xa,endLoadRecordedQueries:ya,loadedRecordedQueries:wa,updateRecordedQueries:ja,deleteRecordedQueries:Sa,setPrometheusWriteTarget:Ca}=ba.actions,ka={recordedQueries:ba.reducer},Na="api/recording-rules";function Oa(){return async e=>{e(xa());try{const t=await(0,Ht.i)().get(Na);e(wa(t))}finally{e(ya())}}}function Ia(){return async e=>{try{const t=await(0,va.n)((0,Ht.i)().fetch({method:"GET",url:`${Na}/writer`,showSuccessAlert:!1,showErrorAlert:!1}));e(Ca(t.data))}catch(e){console.error(e)}}}const Ta=e=>e.recordedQueries,$a=e=>e.prometheusWriteTarget;var Ra;const Pa=e=>({expr:`${e.prom_name}{id="${e.id}", name="${e.name}"}`,legendFormat:"",interval:"",exemplar:!0,datasource:e.dest_data_source_uid});const Da={getRecordedQueriesAsync:Oa},Aa=(0,$.connect)((function(e){return{recordedQueries:Ta(e.recordedQueries)}}),Da),Ma=e=>{let{onQueryToggle:t,recordedQuery:n}=e;const[s,a]=(0,u.useState)(!1);return(0,f.jsx)(ga,{recordedQuery:n,buttons:[(0,f.jsx)(aa.X,{name:n.id,value:s,onChange:()=>{t(n,!s),a(!s)}},`${n.id}-checked`)]})},La=(e,t)=>{const n=(0,na.F)();return e.filter((e=>e.active)).filter((e=>!t||e.queries[0].datasource.uid===t.uid)).sort(((e,t)=>{var s,a,i,r;const o=null==n?void 0:n.getInstanceSettings(null===(s=e.queries[0])||void 0===s?void 0:s.datasource),l=null==n?void 0:n.getInstanceSettings(null===(a=t.queries[0])||void 0===a?void 0:a.datasource),d=null==o?void 0:o.meta.name.localeCompare(null!==(i=null==l?void 0:l.meta.name)&&void 0!==i?i:"");if(void 0!==d&&0!==d)return d;const c=null==o?void 0:o.name.localeCompare(null!==(r=null==l?void 0:l.name)&&void 0!==r?r:"");return void 0!==c&&0!==c?c:e.name.localeCompare(t.name)}))},Fa=e=>({modalButtons:S.css`
      display: flex;
      justify-content: end;
    `,openButton:S.css`
      margin-left: -8px;
    `,modalButton:S.css`
      margin-left: ${e.spacing(1)};
    `,modal:S.css`
      width: 750px;
    `,noQueries:S.css`
      margin-left: ${e.spacing(1)};
      margin-bottom: ${e.spacing(3)};
    `}),Ea=Aa((e=>{let{onAddQuery:t,getRecordedQueriesAsync:n,recordedQueries:s,onChangeDataSource:a,filterValue:r}=e;const[o,l]=(0,u.useState)(!1),[d,c]=(0,u.useState)(r),[h,g]=(0,u.useState)([]),m=(0,C.wW)(Fa);(0,u.useEffect)(n,[o,n]);const v=(e,t)=>{g(t?h.concat(e):h.filter((t=>!(0,Wn.isEqual)(t,e))))},b=La(s,d).map((e=>(0,f.jsx)(Ma,{onQueryToggle:v,recordedQuery:e},e.id))),x=()=>{l(!1),g([])};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Q.zx,{icon:"plus",onClick:()=>{(0,i.ff)("cloud_user_clicked_add_recorded_query_button"),l(!0)},variant:"secondary",className:m.openButton,children:"Recorded query"}),(0,f.jsxs)(sa.u,{isOpen:o,title:"Add recorded query",onDismiss:x,className:m.modal,children:[(0,f.jsx)(ua,{value:null==d?void 0:d.name,onChange:c}),Ra||(Ra=(0,f.jsxs)(je.b,{title:"",severity:"info",children:["To create a new Recorded Query, return to the query editor and use the "," ",(0,f.jsx)(p.J,{name:"record-audio"})," "," icon in the series bar."]})),b.length>0?b:d&&(0,f.jsxs)("div",{className:m.noQueries,children:["No recorded queries available for ",null==d?void 0:d.name]}),(0,f.jsxs)("div",{className:m.modalButtons,children:[(0,f.jsx)(Q.zx,{variant:"secondary",className:m.modalButton,onClick:x,children:"Cancel"}),(0,f.jsx)(Q.zx,{variant:"primary",className:m.modalButton,onClick:()=>{(0,i.ff)("cloud_user_clicked_add_selected_recorded_queries",{recorded_queries_selected:h.map((e=>e.name))});const e=(0,na.F)().getInstanceSettings(ra.D);null==a||a(e),h.map(Pa).forEach((e=>{null==t||t(e)})),l(!1),g([]),ia.Z.emit(ta.SI.alertSuccess,["Selected recorded queries added to the editor. The data source has been changed to mixed."])},disabled:0===h.length,children:"Add"})]})]})]})}));var Va=n(12717),za=n(35258),Ba=n(7567),_a=n(18714),Wa=n(9735),Ua=n(80025),Ha=n(96668),qa=n(84455),Za=n(72379);const Ga=[{label:"30 seconds",value:30},{label:"1 minute",value:60},{label:"5 minutes",value:300},{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"12 hours",value:43200},{label:"24 hours",value:86400},{label:"1 week",value:604800},{label:"1 month",value:2592e3}],Qa=e=>{let{label:t,description:n,value:s,onChange:a}=e;return(0,f.jsx)("div",{children:(0,f.jsx)(Y.g,{label:t,description:n,required:!0,children:(0,f.jsx)(h.Ph,{options:Ga,onChange:e=>{a(e.value)},value:s,"aria-label":`${t}-select`,menuShouldPortal:!0})})})},Ka=["ref","value","onChange"],Ja=["ref","value","onChange"];var Ya,Xa,ei,ti,ni,si;function ai(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const ii=(0,$.connect)((function(e){return{variables:(0,qa.ng)(e)}})),ri=e=>{let{href:t,trackingSource:n}=e;const s=(0,C.wW)(li);return(0,f.jsx)("a",{href:t,className:s.docsLink,target:"_blank",rel:"noreferrer",onClick:()=>(0,i.ff)("cloud_user_clicked_create_recorded_query_modal_documentation_icon",{source:n}),children:Ya||(Ya=(0,f.jsx)(p.J,{name:"info-circle"}))})},oi=e=>{let t="https://grafana.com/contact";return e&&e.slug&&e.lid&&(t=`https://grafana.com/orgs/${e.slug}/tickets?support=licensing&licenseId=${e.lid}`),(0,f.jsxs)(f.Fragment,{children:["To submit a support ticket to Grafana Labs, complete the ",(0,f.jsx)("a",{href:t,children:"Contact Grafana Labs"})]})},li=e=>({modal:S.css`
      width: 550px;
    `,testQuery:S.css`
      margin-top: ${e.spacing(3)};
    `,timeSelect:S.css`
      width: 50%;
    `,docsLink:S.css`
      margin-left: ${e.spacing(.5)};
    `}),di=ii((e=>{let{query:t,queries:n,dataSource:s,variables:a}=e;const[o,l]=(0,u.useState)(!1),[d,c]=(0,u.useState)(),[h,g]=(0,u.useState)("info"),[m,v]=(0,u.useState)(""),b=(0,C.wW)(_a.J),x=(0,C.wW)(li);(0,u.useEffect)((()=>{(async()=>{r.Vt.hasAccess(Z.LicensingRead,r.Vt.isGrafanaAdmin)&&c(await Le().catch((()=>{})))})()}),[]);const y=()=>{v(""),g("info"),l(!1)},w=async e=>{try{return await S(e,k)}catch(e){return g("error"),void((0,Ht.kW)(e)&&v(e.data.message))}},j=async e=>{const t=await w(e);t&&function(e){return(0,va.n)((0,Ht.i)().fetch({method:"POST",url:`${Na}/test`,data:e,showSuccessAlert:!1,showErrorAlert:!1}))}(t).then((e=>{g("info"),v(`Result: ${e.data.message}`)})).catch((e=>{g("error"),v(e.data.message)}))},S=async(e,a)=>{const i={target_ref_id:t?t.refId:"",name:e.name,description:e.description,interval:e.interval,range:e.range,count:e.isCount,active:!0},r=null==n?void 0:n.map((async e=>{const t=e.datasource||(null==s?void 0:s.name),n=await(0,na.F)().get(t),i=n.interpolateVariablesInQueries?n.interpolateVariablesInQueries([e],Object.assign({},a))[0]:e;return i.datasourceId=n?n.id:-1,void 0===i.datasource&&(void 0!==e.datasource&&null!==e.datasource?i.datasource=e.datasource:n&&(i.datasource={uid:n.uid,type:n.type})),i}));return i.queries=r?await Promise.all(r):[],i},k=null==a?void 0:a.filter((e=>e.hide!==Za.bU.hideVariable)),N=(0,f.jsxs)("h2",{className:b.modalHeaderTitle,children:["Create recorded query",Xa||(Xa=(0,f.jsx)(ri,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"modal-title"}))]}),O="success"!==h?ei||(ei=(0,f.jsx)("div",{"aria-label":"Test the recorded query",children:(0,f.jsx)(p.J,{name:"sync"})})):void 0,I="success"===h?(0,f.jsx)(Q.zx,{type:"button",variant:"primary",onClick:y,"aria-label":"Close recording query button",children:"Close"}):(0,f.jsx)(Q.zx,{type:"button",variant:"secondary",onClick:y,fill:"outline","aria-label":"Cancel recording query button",children:"Cancel"});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Wa.y,{title:"Create recorded query",icon:"record-audio",onClick:()=>{l(!0),(0,i.ff)("cloud_user_clicked_create_recorded_query_icon")}}),(0,f.jsx)(sa.u,{isOpen:o,title:N,onDismiss:y,className:x.modal,children:(0,f.jsx)(ms.l,{onSubmit:async e=>{const t=await w(e);t&&function(e){return(0,va.n)((0,Ht.i)().fetch({method:"POST",url:Na,data:e,showErrorAlert:!1}))}(t).then((()=>{g("success"),v("Your new recorded query is recording successfully!"),(0,i.ff)("cloud_user_created_recorded_query")})).catch((e=>{g("error"),v(`Result: ${e.data.message}`)}))},validateOn:"all",children:e=>{var t;let{register:n,errors:s,control:a,getValues:i}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.g,{label:"Name",description:"Give this query a name",invalid:!!s.name,error:null===(t=s.name)||void 0===t?void 0:t.message,required:!0,children:(0,f.jsx)(ee.I,Object.assign({},n("name",{required:{value:!0,message:"Name is required"}}),{id:"add-recorded-query-name",autoFocus:!0}))}),(0,f.jsx)(Y.g,{label:"Description",description:"Provide a description for this query",children:(0,f.jsx)(ee.I,Object.assign({},n("description"),{id:"add-recorded-query-desc"}))}),(0,f.jsx)("div",{className:x.timeSelect,children:(0,f.jsx)(za.g,{name:"interval",control:a,defaultValue:Ga[0].value,render:e=>{let{field:{value:t,onChange:n}}=e;ai(e.field,Ka);return(0,f.jsx)(Qa,{label:"Interval",description:"Decide how often to record this query",value:t,onChange:n})}})}),(0,f.jsx)("div",{className:x.timeSelect,children:(0,f.jsx)(za.g,{name:"range",control:a,defaultValue:(0,Va.Rr)().from,render:e=>{var t;let{field:{value:n,onChange:a}}=e;ai(e.field,Ja);const i=(0,f.jsxs)(f.Fragment,{children:["Select this query's relative time range",ti||(ti=(0,f.jsx)(ri,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/#time-units-and-relative-ranges",trackingSource:"time-range"}))]}),r=(0,f.jsx)(te._,{description:i,children:"Relative Time Range *"});return(0,f.jsx)(Y.g,{label:r,invalid:!!s.range,error:null===(t=s.name)||void 0===t?void 0:t.message,required:!0,children:(0,f.jsx)(Ba.x,{timeRange:{from:n,to:0},onChange:e=>a(e.from)})})}})}),(null==k?void 0:k.length)>0?(0,f.jsx)(Y.g,{label:"Template variables",description:"Select a value for each template variable",children:(0,f.jsx)(f.Fragment,{children:k.map((e=>{const{picker:t,setValue:n}=Ua.z.get(e.type);return(0,f.jsx)(ca._,{label:e.name,labelWidth:16,children:(0,f.jsx)(t,{onVariableChange:e=>{(0,Ha.eL)(e)&&n(e,e.current)},variable:e,readOnly:!1})},e.name)}))})}):null,(0,f.jsx)(Y.g,{label:"Count query results",description:(0,f.jsxs)(f.Fragment,{children:["Count the rows returned from this query",ni||(ni=(0,f.jsx)(ri,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"count-field"}))]}),children:(0,f.jsx)(X.r,Object.assign({},n("isCount"),{id:"add-recorded-query-count"}))}),(0,f.jsxs)(je.b,{className:x.testQuery,severity:h,title:"success"===h?m:"Test this recorded query",buttonContent:O,onRemove:"success"!==h?()=>j(i()):void 0,children:[(0,f.jsx)(f.Fragment,{children:"success"!==h&&m}),"An unknown issue is preventing the system from processing your query."===m&&oi(d)]}),(0,f.jsxs)(sa.u.ButtonRow,{children:[I,"success"!==h&&(si||(si=(0,f.jsx)(Q.zx,{type:"submit","aria-label":"Start recording query button",children:"Start recording query"})))]})]})}})})]})})),ci=()=>{const e=ea.h.getState().recordedQueries.prometheusWriteTarget;return Boolean(null==e?void 0:e.data_source_uid)&&Boolean(null==e?void 0:e.remote_write_path)};var ui,hi=n(71031),pi=n(334);const gi=()=>{const e=(0,C.wW)(mi);return(0,f.jsx)(pi._,{className:e.cta,message:"No recorded queries defined",footer:ui||(ui=(0,f.jsxs)("span",{children:[(0,f.jsx)(p.J,{name:"rocket"}),"ProTip: ","You can record queries from the query editor."]},"proTipFooter")),callToActionElement:(0,f.jsx)(f.Fragment,{})})},mi=e=>({cta:S.css`
      text-align: center;
    `});var fi,vi,bi;const xi={getRecordedQueriesAsync:Oa,updateRecordedQuery:function(e){return async t=>{await(0,Ht.i)().put(Na,e),t(ja(e))}},deleteRecordedQuery:function(e){return async t=>{await(0,Ht.i)().delete(`${Na}/${e.id}`),t(Sa(e))}}},yi=(0,$.connect)((function(e){return{navModel:(0,A.ht)(e.navIndex,"recordedQueries"),recordedQueries:Ta(e.recordedQueries),isLoading:e.recordedQueries.isLoading}}),xi),wi=e=>({header:S.css`
      display: flex;
    `,title:S.css`
      width: 100%;
    `}),ji=yi((e=>{let{navModel:t,isLoading:n,recordedQueries:s,getRecordedQueriesAsync:a,updateRecordedQuery:i,deleteRecordedQuery:r}=e;(0,u.useEffect)(a,[a]);const o=(0,C.wW)(wi),[l,d]=(0,u.useState)(),c=s.map((e=>{const t=[(0,f.jsx)(Q.zx,{onClick:async()=>{await i(Object.assign({},e,{active:!e.active}))},variant:e.active?"secondary":"primary",children:e.active?"Pause recording":"Resume recording"},"toggle-recorded-query-active"),(0,f.jsx)(Q.zx,{"aria-label":"Delete recorded query",onClick:()=>d(e),variant:"destructive",children:"Delete"},"delete-recorded-query")];return(0,f.jsx)(ga,{recordedQuery:e,buttons:t},e.id)}));return(0,f.jsx)(P.T,{navModel:t,children:(0,f.jsxs)(P.T.Contents,{children:[(0,f.jsxs)("div",{className:o.header,children:[(0,f.jsx)("h2",{className:o.title,children:"Recorded queries"}),bi||(bi=(0,f.jsx)(Q.Qj,{icon:"cog",href:"/recorded-queries/write-target",children:"Edit remote write target"}))]}),n?fi||(fi=(0,f.jsx)(hi.Z,{})):0===c.length?vi||(vi=(0,f.jsx)(gi,{})):c,l&&(0,f.jsx)(K.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:(0,f.jsxs)("div",{children:["Are you sure you want to delete '",l.name,"'?"]}),confirmText:"Delete",onDismiss:()=>d(void 0),onConfirm:async()=>{await r(l),d(void 0)}})]})})}));var Si;const Ci={getPrometheusWriteTarget:Ia},ki=(0,$.connect)((function(e){return{navModel:(0,A.ht)(e.navIndex,"recordedQueries"),prometheusWriteTarget:$a(e.recordedQueries)}}),Ci);const Ni=e=>({docsLink:S.css`
      margin-left: ${e.spacing(1)};
    `}),Oi=ki((e=>{let{navModel:t,prometheusWriteTarget:n,getPrometheusWriteTarget:s}=e;const[a,i]=(0,u.useState)(),[r,o]=(0,u.useState)(null==n?void 0:n.remote_write_path),l=(0,C.wW)(Ni);(0,u.useEffect)(s,[s]),(0,u.useEffect)((()=>{(async()=>{if(n){const e=await(0,na.F)().getInstanceSettings(n.data_source_uid);i(e)}})()}),[n]);const d=(0,f.jsxs)("span",{children:["Select the data source where metrics will be written",(0,f.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#remote-write-target",className:l.docsLink,target:"_blank",rel:"noreferrer",children:Si||(Si=(0,f.jsx)(p.J,{name:"info-circle"}))})]});return(0,f.jsx)(P.T,{navModel:t,children:(0,f.jsx)(P.T.Contents,{children:(0,f.jsx)(ms.l,{defaultValues:n,onSubmit:e=>{var t,n,s;t=null==a?void 0:a.uid,n=e.remote_write_path,(s={data_source_uid:t,remote_write_path:n},(0,va.n)((0,Ht.i)().fetch({method:"POST",url:`${Na}/writer`,data:s,showSuccessAlert:!1,showErrorAlert:!1}))).then((()=>{ia.Z.emit(ta.SI.alertSuccess,["Prometheus remote write target created"])})).catch((e=>{ia.Z.emit(ta.SI.alertError,[e.data.message])}))},children:e=>{let{register:t}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.g,{label:d,children:(0,f.jsx)(oa.q,{onChange:i,current:null==a?void 0:a.name,placeholder:"Select a data source",type:"prometheus",noDefault:!0,alerting:!0,"aria-label":"Write target config select data source"})}),(0,f.jsx)(Y.g,{label:"Remote write path",children:(0,f.jsx)(ee.I,Object.assign({},t("remote_write_path"),{onChange:e=>o(e.currentTarget.value),placeholder:"/api/v1/write","aria-label":"Write target config remote write path"}))}),(0,f.jsx)(Q.zx,{disabled:Boolean(!r||!a),type:"submit","aria-label":"Write target config save",children:"Save"})]})}},null==n?void 0:n.data_source_uid)})})}));var Ii,Ti,$i,Ri,Pi,Di,Ai=n(53277),Mi=n(60129),Li=n(274),Fi=n(53091),Ei=n(46076);const Vi=e=>({container:S.css`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    `,button:S.css`
      margin-right: ${e.spacing(2)};
    `,highlight:S.css`
      margin-bottom: ${e.spacing(3)};

      h6 {
        font-weight: ${e.typography.fontWeightLight};
      }
    `});var zi=n(59052),Bi=n(71980),_i=n(55591);const Wi="/reports",Ui={1:"1",2:"2",3:"3"};var Hi=n(37437),qi=n(90155);const Zi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hour:0,minute:0},n=arguments.length>2?arguments[2]:void 0;const s=`${t.hour}:${t.minute}:00`,a="string"==typeof e?Qi(e):e,i=new Date(`${(0,xe.CQ)(a).format("YYYY/MM/DD")} ${s}`),r=(0,Be.dq)(i.getTime(),{timeZone:n,format:"Z"});return Gi((0,xe.CQ)(i).format())+r},Gi=e=>e.includes("Z")?e.replace("Z",""):e.slice(0,-6),Qi=e=>e?(0,xe.CQ)(e.split("T")[0]).toDate():"",Ki=e=>1===String(e).length?`0${e}`:String(e),Ji=e=>{if(!e)return{hour:0,minute:0};const t=e.match(/T(\d+):(\d+)/);if(t){const[,e,n]=t;return{hour:parseInt(e,10),minute:parseInt(n,10)}}return{hour:0,minute:0}},Yi=e=>{if(!e)return{time:void 0,date:void 0};const{hour:t,minute:n}=Ji(e);return{date:(0,Be.dq)(e,{format:"MMMM DD, YYYY"}),time:`${Ki(t)}:${Ki(n)}`}},Xi=e=>{if(!e.from||!e.to)return"Dashboard time range";const t=parseInt(e.from,10),n=parseInt(e.to,10);return isNaN(t)||isNaN(n)?(0,pa.describeTimeRange)(e):(0,pa.describeTimeRange)({from:(0,xe.CQ)(t),to:(0,xe.CQ)(n)})},er=e=>null!=e&&e.length?Object.fromEntries(e.map((e=>{const{getValueForUrl:t}=Ua.z.get(e.type),n=t(e);return[e.name,Array.isArray(n)?n.join(","):n]}))):{},tr=()=>{const e="var-",t=new URLSearchParams(window.location.search),n={};for(const[s,a]of t.entries())if(s.startsWith(e)){const t=s.replace(e,"");n[t]=[...n[t]||[],a]}return Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,n.join(",")]})))},nr=e=>e.some((e=>(0,Ha.Xh)(e)&&e.refresh===Za.Bd.onTimeRangeChanged));var sr=n(98142);const ar=()=>{if(!window.Intl)return"";const e=window.Intl.DateTimeFormat();if(!e.resolvedOptions)return"";const t=e.resolvedOptions();return t.timeZone?t.timeZone:""},ir={from:(0,xe.CQ)(null),to:(0,xe.CQ)(null),raw:{from:"",to:""}},rr={id:0,name:"",recipients:"",replyTo:"",message:"Hi, \nPlease find attached a PDF status report. If you have any questions, feel free to contact me!\nBest,",dashboardId:void 0,dashboardName:"",dashboards:[{dashboard:void 0,timeRange:ir.raw}],schedule:{frequency:V.Weekly,timeZone:ar()},formats:["pdf"],scaleFactor:2,options:{orientation:"landscape",layout:"grid",timeRange:ir.raw},enableDashboardUrl:!0,state:_.Scheduled},or={reports:[],report:rr,hasFetchedList:!1,hasFetchedSingle:!1,searchQuery:"",reportCount:0,isLoading:!0,isUpdated:!1,visitedSteps:[],settings:{branding:{reportLogoUrl:"",emailLogoUrl:"",emailFooterMode:B.SentBy,emailFooterText:"",emailFooterLink:""}}},lr=(0,Lt.oM)({name:"reports",initialState:or,reducers:{reportsLoaded:(e,t)=>Object.assign({},e,{reports:t.payload,reportCount:t.payload.length,hasFetchedList:!0}),reportLoaded:(e,t)=>Object.assign({},e,{report:t.payload,hasFetchedSingle:!0,isLoading:!1}),updateReportProp:(e,t)=>Object.assign({},e,{isUpdated:!0,report:t.payload}),clearReportState:e=>Object.assign({},e,{isUpdated:!1,visitedSteps:[],report:rr}),reportLoadingBegin:e=>Object.assign({},e,{isLoading:!0}),reportLoadingEnd:e=>Object.assign({},e,{isLoading:!1}),testEmailSendBegin:e=>Object.assign({},e,{testEmailIsSending:!0}),testEmailSendEnd:e=>Object.assign({},e,{testEmailIsSending:!1}),setLastUid:(e,t)=>Object.assign({},e,{lastUid:(0,sr.mn)(t.payload)}),addVisitedStep:(e,t)=>Object.assign({},e,{visitedSteps:[...e.visitedSteps,...t.payload]})}}),{clearReportState:dr,reportLoaded:cr,reportsLoaded:ur,updateReportProp:hr,reportLoadingBegin:pr,reportLoadingEnd:gr,testEmailSendBegin:mr,testEmailSendEnd:fr,setLastUid:vr,addVisitedStep:br}=lr.actions,xr={reports:lr.reducer},yr="api/reports";function wr(){return async e=>{const t=await(0,Ht.i)().get(yr);e(ur(t))}}function jr(e,t,n){return async s=>{const a=await ie.ae.getDashboardByUid(e),i=new Hi.f(a.dashboard,a.meta);if(nr(i.templating.list)){const e=(e=>!e||!e.from||!e.to)(n)?null==i?void 0:i.time:n;(0,Fi.$t)().setTime(e)}const r=(o=i.templating.list,(l=t)&&Object.keys(l).length?o.map((e=>{const t=l[e.name];if(!t||!(0,Ha.eL)(e))return e;const n=t.split(","),s=n.map((t=>e.options.find((e=>e.value===t))||{text:t,value:t})).filter(Boolean);return Object.assign({},e,{current:Object.assign({},e.current,{text:s.map((e=>null==e?void 0:e.text)),value:s.map((e=>null==e?void 0:e.value))}),options:e.options.map((e=>Object.assign({},e,{selected:"string"==typeof e.value&&n.includes(e.value)})))})})):o);var o,l;await s((0,qi.LX)(a.dashboard.uid,Object.assign({},i,{templating:{list:r}}))),s(vr(e))}}function Sr(e){return async t=>{t(pr());try{const n=await(0,Ht.i)().get(`api/reports/${e}`);n.dashboards||(n.dashboards=[{dashboard:{uid:n.dashboardUid,id:n.dashboardId,name:n.dashboardName},reportVariables:n.templateVars,timeRange:n.options.timeRange}]);for(const e of n.dashboards)e.dashboard.uid&&await t(jr(e.dashboard.uid,e.reportVariables,e.timeRange));t(cr(n))}catch(e){t(gr())}}}function Cr(e){return async t=>{await(0,Ht.i)().delete(`api/reports/${e}`),t(wr())}}function kr(e){return async()=>{try{await(0,Ht.i)().post(yr,e)}catch(e){throw e}}}function Nr(e,t){return async n=>{const s=["hour","minute","day"];e=Object.assign({},e,{schedule:Object.fromEntries(Object.entries(e.schedule).filter((e=>{let[t,n]=e;return!s.includes(t)})))}),await(0,Ht.i)().put(`api/reports/${e.id}`,e),t&&n(wr())}}const Or=e=>(0,Wn.upperFirst)(e.map((e=>{switch(e){case"csv":case"pdf":return e.toUpperCase();case"image":return"embedded image"}})).join(", ")),Ir=e=>{const t=e.state,n=e.schedule.frequency===V.Never;return{isNever:n,showPlay:n||[_.Draft,_.Expired,_.Paused].includes(t),disableEdit:n||[_.Draft,_.Expired].includes(t),reportState:t}},Tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{time:t,startDate:n,endDate:s,endTime:a,timeZone:i,frequency:r,dayOfMonth:o,workdaysOnly:l,intervalFrequency:d,intervalAmount:c,sendTime:u}=e,h=!t&&n?Ji(String(n)):t,p=n&&"now"!==u?Zi(n,h,i):"",g=s&&![V.Once,V.Never].includes(r)?Zi(s,a,i):"",m={frequency:r,timeZone:i,workdaysOnly:l,intervalFrequency:d,intervalAmount:c?parseInt(c,10):0,startDate:p,endDate:g,dayOfMonth:o?"last":""};return Object.fromEntries(Object.entries(m).filter((e=>{let[t,n]=e;return n})))};function $r(e){const t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}const Rr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Hours;return e===V.Custom&&t===z.Hours},Pr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Hours;return[V.Hourly,V.Daily].includes(e)||Rr(e,t)};function Dr(e){let{startDate:t,endDate:n,intervalFrequency:s=z.Hours,intervalAmount:a=2,frequency:i,dayOfMonth:r,timeZone:o,workdaysOnly:l}=e;if(!t)return"";const d="en-US",{hour:c,minute:u}=Ji(t),h=Ki(u),p=Ki(c),g=(0,xe.CQ)(Qi(t)).locale(d).format("dddd"),m="last"===r?"the last":$r(Qi(t).getDate());let f,v;const b=(0,_i.k)(Date.now(),o),x=`at ${p}:${h}${b?` ${b}`:""}`,y=l&&Pr(i,s)?", Monday to Friday":"";switch(n&&(f=`${(0,xe.CQ)(Qi(t)).locale(d).format("LL")} - ${(0,xe.CQ)(Qi(n)).locale(d).format("LL")}`),i){case V.Monthly:v=`Monthly on ${m} day ${x}`;break;case V.Weekly:v=`Every ${g} ${x}`;break;case V.Daily:v=`Daily ${x}`;break;case V.Hourly:v=`Hourly at minute ${h}`;break;case V.Custom:v=`Every ${a} ${s}`;break;case V.Once:v=`Once on ${(0,xe.CQ)(Qi(t)).locale(d).format("LL")}`;break;case V.Never:v="Never"}return f&&v?`${v}, ${f}${y}`:(i===V.Custom&&(v+=", "+(s===z.Hours?`from ${p}:${h}${b?` ${b}`:""}`:`from ${(0,xe.CQ)(Qi(t)).locale(d).format("LL")}`)),v+y)}const Ar=new Map([[V.Monthly,"month"],[V.Daily,"day"],[V.Weekly,"week"],[V.Hourly,"hour"]]),Mr=e=>{const{frequency:t,intervalFrequency:n=z.Hours,intervalAmount:s="2"}=e;if(t===V.Never)return"The report will not be sent.";const a=e.workdaysOnly?", Monday to Friday.":".";if(!e.sendTime||"now"===e.sendTime){let e,i="The report will be sent immediately after it is saved";return Ar.has(t)?e=Ar.get(t):t===V.Custom&&(e=`${s}  ${n}`),e&&(i+=` and will be sent every ${e}`),`${i}${a}`}const i=Dr(Tr(e));return i?`The report will be sent: ${i}.`:""},Lr=e=>{const t=or.report.schedule;return Object.keys(t).length!==Object.keys(e).length||Object.entries(t).some((t=>{let[n,s]=t;return s!==e[n]}))},Fr=()=>{if(!window.location.search)return null;const e=new URLSearchParams(window.location.search);return{timeRange:{to:e.get("to")||"",from:e.get("from")||""},dashboard:{uid:e.get("db-uid"),id:e.get("db-id"),name:e.get("db-name")},variables:tr()}},Er=e=>{if(e.id)return e;const t=Fr();if(!t)return e;const{timeRange:n,dashboard:s,variables:a}=t;let i=[...or.report.dashboards];return null!=n&&n.from&&null!=n&&n.to&&(i[0]=Object.assign({},i[0],{timeRange:n})),s.name&&s.id&&s.uid&&(i[0]=Object.assign({},i[0],{dashboard:{uid:s.uid,id:Number(s.id),name:s.name}})),a&&Object.keys(a).length&&(i[0]=Object.assign({},i[0],{reportVariables:a})),Object.assign({},e,{dashboards:i})},Vr=(e,t)=>`/reports/${e}${t?"/"+t:""}`,zr=e=>!Array.isArray(e)||(null==e?void 0:e.length),Br=(e,t)=>{var n,s,a,i;const r=[{step:H.SelectDashboard,fields:["dashboards"]},{step:H.FormatReport,fields:["formats"]},{step:H.Share,fields:["name","recipients"]}],o=!(null!==(n=e.dashboards)&&void 0!==n&&null!==(s=n[0])&&void 0!==s&&null!==(a=s.dashboard)&&void 0!==a&&a.uid);if(!t){const t=r.flatMap((e=>e.fields));return(null==t?void 0:t.some((t=>!e[t]||!zr(e[t]))))||o}if(t===H.SelectDashboard)return o;const l=null===(i=r.find((e=>e.step===t)))||void 0===i?void 0:i.fields;return null==l?void 0:l.some((t=>!e[t]||!zr(e[t])))},_r=e=>{let{uid:t,name:n,className:s}=e;const i=(0,C.wW)(Wr);return t?(0,f.jsx)("a",{href:`${a.v.appUrl}d/${t}`,className:(0,S.cx)(i.link,s),target:"_blank",rel:"noreferrer",children:n||"View dashboard"}):null},Wr=e=>({link:S.css`
      display: inline-block;
      color: ${e.colors.text.link};
      margin-top: ${e.spacing(1)};
      font-size: ${e.typography.bodySmall.fontSize};

      :hover {
        text-decoration: underline;
      }
    `});var Ur,Hr=n(70356);const qr=e=>{let{confirmRedirect:t,onDiscard:n,onLocationChange:s}=e;const[a,i]=(0,u.useState)(!1),[r,o]=(0,u.useState)(null),[l,d]=(0,u.useState)(!1);(0,u.useEffect)((()=>{const e=e=>{t&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Hr.NL,{when:!0,message:e=>{const a=null==s?void 0:s(e);let r=t&&!l;return void 0!==a&&(r=r&&a),r?(i(!0),o(e),!1):(a&&n(),!0)}}),r&&l&&(0,f.jsx)(Hr.l_,{to:r}),(0,f.jsx)(Zr,{isOpen:a,onDiscard:()=>{i(!1),d(!0),n()},onBackToForm:()=>{i(!1),o(null)}})]})},Zr=e=>{let{onDiscard:t,onBackToForm:n,isOpen:s}=e;return(0,f.jsxs)(sa.u,{isOpen:s,title:"Leave page?",onDismiss:n,icon:"exclamation-triangle",className:S.css`
        width: 500px;
      `,children:[Ur||(Ur=(0,f.jsx)("h5",{children:"Changes that you made may not be saved."})),(0,f.jsxs)(sa.u.ButtonRow,{children:[(0,f.jsx)(Q.zx,{variant:"secondary",onClick:n,fill:"outline",children:"Continue editing"}),(0,f.jsx)(Q.zx,{variant:"destructive",onClick:t,children:"Discard unsaved changes"})]})]})},Gr=e=>{if(!e)return Zl[0];const t=Zl.findIndex((t=>t.id===e));return t===Zl.length-1?Zl[t]:Zl[t+1]},Qr=e=>{if(!e||e===Zl[0].id)return;const t=Zl.findIndex((t=>t.id===e));return Zl[t-1]},Kr=(0,u.forwardRef)(((e,t)=>{let{activeStep:n,existingReport:s,disabled:a,saveDraft:i,reportId:r}=e;const o=(0,C.wW)(Jr),l=(0,u.useRef)(null),d=Qr(n),c=Gr(n),h=c.id===n?s?"Update report":"Save report":`Next: ${c.name}`;return(0,u.useImperativeHandle)(t,(()=>({click:()=>{var e;null===(e=l.current)||void 0===e||e.click()}}))),(0,f.jsx)("div",{className:o.buttonRow,children:(0,f.jsxs)("div",{className:o.buttonRowInner,children:[(0,f.jsxs)("div",{children:[d&&(0,f.jsxs)(Q.zx,{variant:"secondary",onClick:()=>((e,t)=>{const n=Qr(e);n&&n.id!==e&&_e.E1.push(Vr(n.id,t))})(n,r),children:["Previous: ",d.name]}),(0,f.jsx)(Q.zx,{ref:l,disabled:a,type:"submit",children:h})]}),(0,f.jsx)(Q.zx,{variant:"secondary",onClick:i,children:"Save as draft"})]})})}));Kr.displayName="ButtonRow";const Jr=e=>({buttonRow:S.css`
      display: flex;
      padding: ${e.spacing(2,0,.5,0)};
      border-top: 1px solid ${e.colors.secondary.border};
      width: 100%;
      background-color: ${e.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${e.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:S.css`
      display: flex;
      justify-content: space-between;
      margin-left: calc(min(30%, 200px) + 72px); // align with form
      width: min(70%, 800px);
    `});var Yr=n(32889);const Xr=e=>{let{report:t,onStepChange:n,visitedSteps:s,reportId:a,activeStep:i=H.SelectDashboard}=e;const r=(0,C.wW)(eo),o=Zl[Zl.length-1];return(0,f.jsx)("ol",{className:r.container,children:Zl.map((e=>{const l=e.id===o.id,d=e.id===i,c=s.includes(e.id)||i===o.id,u=Br(t,e.id),h=!d&&!l&&c&&!u,g=!d&&!l&&c&&u,m=(0,S.cx)(r.item,{[r.active]:d,[r.successItem]:h,[r.warnItem]:g});return(0,f.jsxs)("li",{className:m,children:[h&&(0,f.jsx)(p.J,{name:"check",size:"xl",className:r.successItem}),g&&(0,f.jsx)(p.J,{name:"exclamation-triangle",className:r.warnItem}),(0,f.jsx)(Yr.r,{onClick:d?void 0:n,href:Vr(e.id,a),className:r.link,children:e.name}),!l&&(0,f.jsx)("div",{className:r.divider})]},e.id)}))})},eo=e=>({container:S.css`
      counter-reset: item;
      list-style-type: none;
      width: min(30%, 200px);
      margin-right: ${e.spacing(9)};
      padding-left: ${e.spacing(1)};
      position: relative;

      &::after {
        content: '';
        background-color: ${e.colors.border.medium};
        position: absolute;
        top: 0;
        right: 0;
        height: 240px;
        width: 1px;
      }
    `,item:S.css`
      color: ${e.colors.text.secondary};
    `,successItem:S.css`
      a {
        &::before {
          content: '';
        }
      }

      svg {
        color: ${e.colors.success.text};
        margin: ${e.spacing(0,.5,0,-1)};
      }
    `,warnItem:S.css`
      a::before {
        content: '';
      }
      svg {
        color: ${e.colors.warning.text};
        margin: ${e.spacing(0,1,.5,-.5)};
      }
    `,link:S.css`
      color: inherit;
      &:hover {
        color: ${e.colors.text.link};
      }

      &::before {
        content: counter(item) '  ';
        counter-increment: item;
      }
    `,active:S.css`
      font-weight: 500;
      color: ${e.colors.text.maxContrast};

      &::before {
        font-weight: 500;
      }
    `,divider:S.css`
      height: ${e.spacing(2)};
      border-left: 1px dotted ${e.colors.text.secondary};
      margin: ${e.spacing(1,.5)};
    `}),to={addVisitedStep:br,clearReportState:dr,createReport:kr,updateReport:Nr},no=(0,$.connect)((e=>{const{report:t,isUpdated:n,visitedSteps:s}=e.reports;return{existingReport:!!t.id,isUpdated:n,report:t,visitedSteps:s}}),to),so=e=>({container:S.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,inner:S.css`
      display: flex;
      justify-content: flex-start;

      flex: 1 0 auto;
    `,content:S.css`
      width: min(70%, 800px);
      padding-bottom: ${e.spacing(3)};
    `,placeholder:S.css`
      width: min(30%, 272px);
    `}),ao=no((e=>{let{activeStep:t,addVisitedStep:n,children:s,clearReportState:r,confirmRedirect:o,createReport:l,disabled:d,editMode:c,existingReport:h,getFormData:p,isUpdated:g,onSubmit:m,report:v,reportId:b,updateReport:x,visitedSteps:y}=e;const w=(0,C.wW)(so),j=Gr(t),S=(0,Hr.k6)(),k=(0,u.useRef)(null),[N,O]=(0,u.useState)(o||g);(0,u.useEffect)((()=>{var e;(e=t)===Zl[Zl.length-1].id?n(Zl.map((e=>e.id))):n([e])}),[t,n]),(0,u.useEffect)((()=>{O(o||g)}),[o,g]);return(0,f.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=Vr(j.id,b);m(),S.push(t)},className:w.container,children:[(0,f.jsx)(qr,{confirmRedirect:N,onDiscard:()=>{r(),(0,i.ff)("reports_report_abandoned",{namePopulated:!!v.name,recipientsPopulated:!!v.recipients,replyToPopulated:!!v.replyTo,numberOfDashboardsSelected:v.dashboards.length,scheduleCustomized:Lr(v.schedule)})},onLocationChange:e=>!Zl.map((e=>Vr(e.id,b))).includes(e.pathname)}),(0,f.jsxs)("div",{className:w.inner,children:[c&&!a.v.featureToggles.topnav&&(0,f.jsx)("div",{className:w.placeholder}),!c&&(0,f.jsx)(Xr,{activeStep:t,onStepChange:()=>{const e=Zl[Zl.length-1].id;var n;t!==e&&(null===(n=k.current)||void 0===n||n.click())},reportId:b,report:v,visitedSteps:y}),(0,f.jsx)("div",{className:w.content,children:s})]}),!c&&(0,f.jsx)(Kr,{ref:k,activeStep:t,existingReport:h,disabled:d,saveDraft:async()=>{if(p){const e=p();v=Object.assign({},v,e)}const e=v.id?x:l;await e(Object.assign({},v,{state:_.Draft})),O(!1),(0,i.ff)("reports_draft_saved"),r(),S.push(Wi)},reportId:b})]})})),io={createReport:kr,loadReport:Sr,deleteReport:Cr,updateReport:Nr,clearReportState:dr},ro=(0,$.connect)((e=>{const{report:t,isUpdated:n}=e.reports;return{report:t,isUpdated:n}}),io),oo=ro((e=>{let{report:t,createReport:n,loadReport:s,updateReport:a,deleteReport:r,clearReportState:o,isUpdated:l,reportId:d}=e;const{formats:c,options:h,schedule:g,dashboards:m}=t,{handleSubmit:v,formState:{isSubmitSuccessful:b}}=(0,zi.cI)(),[x,y]=(0,u.useState)(!1),w=(0,C.wW)(lo),j=!!d&&!l,k=Br(t),N=ye.Vt.hasPermission(Z.ReportingDelete),O=ye.Vt.hasPermission(Z.ReportingWrite),{showPlay:I,disableEdit:T,reportState:$}=Ir(t),{time:R,date:P}=Yi(g.startDate),{time:D,date:A}=Yi(g.endDate),{orientation:M,layout:L}=or.report.options,F=[{title:"Select dashboard",id:H.SelectDashboard,items:(m||[]).flatMap(((e,t,n)=>{var s,a;return[{title:"Source dashboard"+(0===t?"*":""),value:null!==(s=e.dashboard)&&void 0!==s&&s.uid?(0,f.jsx)(_r,{name:e.dashboard.name,uid:null===(a=e.dashboard)||void 0===a?void 0:a.uid,className:w.dashboardLink}):"",id:"name",required:!0},{title:"Template variables",value:(0,f.jsx)(co,{variables:e.reportVariables,className:w.title})},{title:"Time range",value:Xi(e.timeRange)},...n.length>1?[{title:"",value:""}]:[]]}))},{title:"Format report",id:H.FormatReport,items:[{title:"Preferred format*",value:Or(c),id:"formats",required:!0},...c.includes("pdf")?[{title:"PDF orientation",value:(0,Wn.capitalize)(h.orientation||M)},{title:"PDF layout",value:(0,Wn.capitalize)(h.layout||L)},{title:"Scale factor",value:Ui[t.scaleFactor||2]}]:[]]},{title:"Schedule",id:H.Schedule,items:[{title:"Recurrence",value:(0,Wn.capitalize)(g.frequency)},...g.frequency===V.Custom?[{title:"Repeat every",value:`${g.intervalAmount} ${g.intervalFrequency}`}]:[],...g.frequency!==V.Never?[{title:"Start date",value:P||"Now"},{title:"Start time",value:R||"Now"},{title:"End date",value:A},{title:"End time",value:D},{title:"Time zone",value:g.timeZone?(0,_i.k)(Date.now(),g.timeZone):""}]:[],...Pr(g.frequency,g.intervalFrequency)?[{title:"Send Monday to Friday only",value:g.workdaysOnly?"Yes":"No"}]:[]]},{title:"Share",id:H.Share,items:[{title:"Report name*",value:t.name,id:"name",required:!0},{title:"Recipients*",value:t.recipients,id:"recipients",required:!0},{title:"Reply-to-email",value:t.replyTo||"none"},{title:"Message",value:t.message||"none"},{title:"Dashboard link",value:t.enableDashboardUrl?"Included":"Not included"}]}];return(0,f.jsxs)(ao,{activeStep:H.Confirm,confirmRedirect:!b&&l,disabled:k,editMode:j,onSubmit:v((async()=>{const e=t.id?a:n;if(t.state===_.Draft){const e=t.schedule.frequency===V.Never?_.Never:_.Scheduled;t=Object.assign({},t,{state:e})}await e(t),(0,i.ff)("reports_report_submitted",{replyToPopulated:!!t.replyTo,includesDashboardLink:t.enableDashboardUrl,numberOfDashboardsSelected:t.dashboards.length,templateVariablesSelected:t.dashboards.some((e=>!!e.reportVariables)),orientation:t.options.orientation,layout:t.options.layout,frequency:t.schedule.frequency,sendTime:t.schedule.startDate?"later":"now",endDate:!!t.schedule.endDate}),o(),_e.E1.push(Wi)})),reportId:d,children:[j&&(0,f.jsxs)("div",{className:w.editActions,children:[(0,f.jsx)(Q.zx,{type:"button",variant:"secondary",icon:I?"play":"pause",disabled:T||!O,onClick:async()=>{let e=_.Scheduled;[_.Draft,_.Expired].includes($)?e=$:$!==_.Paused&&(e=_.Paused),await a(Object.assign({},t,{state:e})),d&&s(parseInt(d,10))},children:I?"Resume":"Pause"}),(0,f.jsx)(Q.Qj,{href:Vr(H.SelectDashboard,d),type:"button",variant:"secondary",icon:"pen",disabled:!O,children:"Edit report"}),(0,f.jsx)(Q.zx,{type:"button",variant:"secondary",icon:"trash-alt",disabled:!N,onClick:()=>y(!0),children:"Delete report"}),(0,f.jsx)(K.s,{isOpen:x,title:"Delete report",body:"Are you sure you want to delete this report?",confirmText:"Delete",onConfirm:()=>{r(t.id),y(!1),_e.E1.push(Wi)},onDismiss:()=>y(!1)})]}),(0,f.jsx)(Bi.C,{label:j?"":"5. Confirm",children:F.map((e=>{const n=Br(t,e.id);return(0,f.jsxs)("div",{className:(0,S.cx)(w.section,n&&w.warningSection),children:[(0,f.jsxs)("div",{className:w.sectionHeader,children:[(0,f.jsx)("h3",{className:w.sectionTitle,children:e.title}),(0,f.jsx)(Q.Qj,{variant:"secondary",fill:n?"solid":"outline",href:Vr(e.id,d),size:"sm",children:"Edit section"})]}),e.items.filter((e=>void 0!==e.value)).map(((e,t)=>{const n=!!e.required&&(!e.value||Array.isArray(e.value)&&!e.value.length);return e.title?(0,f.jsxs)("div",{className:w.row,children:[(0,f.jsxs)("div",{className:(0,S.cx)(w.title,n&&w.warning),children:[e.title,":"]}),(0,f.jsx)("div",{className:(0,S.cx)(w.value,"none"!==e.value||n?"":w.textMuted),children:n?(0,f.jsx)(p.J,{name:"exclamation-triangle",className:w.warning}):e.value})]},t):(0,f.jsx)("div",{className:w.row},t)}))]},e.title)}))})]})})),lo=e=>({section:S.css`
      width: 100%;
      padding: ${e.spacing(3)};
      background-color: ${e.colors.background.secondary};
      margin-bottom: ${e.spacing(3)};
    `,sectionHeader:S.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: ${e.spacing(3)};
    `,warningSection:S.css`
      border: 1px solid ${e.colors.warning.text};
    `,row:S.css`
      display: flex;
      width: 100%;
      padding: ${e.spacing(1,0)};
    `,warning:S.css`
      color: ${e.colors.warning.text};
    `,title:S.css`
      width: 30%;
      color: ${e.colors.text.secondary};
    `,textMuted:S.css`
      color: ${e.colors.text.secondary};
    `,value:S.css`
      width: 70%;
      word-break: break-word;
    `,sectionTitle:S.css`
      margin: 0;
    `,dashboardLink:S.css`
      color: ${e.colors.text.primary};
      font-size: ${e.typography.body.fontSize};
      margin-top: 0;
    `,editActions:S.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: ${e.spacing(3)};

      button,
      a {
        margin-left: ${e.spacing(2)};
      }
    `}),co=e=>{let{variables:t,className:n}=e;const s=(0,C.wW)(lo);return t&&Object.keys(t).length?(0,f.jsx)(f.Fragment,{children:Object.entries(t).map((e=>{let[t,s]=e;return(0,f.jsxs)("span",{children:[(0,f.jsx)("span",{className:n,children:t}),": ",s,";"," "]},t)}))}):(0,f.jsx)("span",{className:s.textMuted,children:"none"})};var uo=n(37625),ho=n(82219),po=n(42914);const go=e=>po.isValid(e.from)&&po.isValid(e.to),mo=e=>e&&go(e)?{to:e.to.valueOf().toString(),from:e.from.valueOf().toString()}:{from:"",to:""},fo=e=>{const t=vo(e.from),n=vo(e.to);return go({from:t,to:n})?{from:t,to:n,raw:{from:t,to:n}}:ir},vo=e=>{const t=parseInt(e,10);return isNaN(t)?e:(0,xe.zh)(t)},bo=e=>null==e||!e.length||!e.some((e=>{var t;return!(null===(t=e.dashboard)||void 0===t||!t.uid)})),xo=r.Vt.hasPermission(Z.ReportingWrite)||r.Vt.hasPermission(Z.ReportingCreate),yo=()=>{const e=a.v.rendererVersion;if(""===e)return null;const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.exec(e);let n="";if(t&&t.length>1&&(n=t[1]),""===n)return 1;let s=parseInt(n,10);return isNaN(s)&&(s=1),s},wo=["onChange"],jo=["ref"],So=["ref"],Co=["ref","value"];function ko(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const No={updateReportProp:hr},Oo=(0,$.connect)((e=>{const{report:t}=e.reports;return{report:t}}),No),Io=new Map([["grid","Display the panels in their positions on the dashboard."],["simple","Display one panel per row."]]),To=new Map([["pdf","Attach the report as a PDF"],["image","Embed a dashboard image in the email"],["csv","Attach a CSV file of table panel data"]]),$o=S.css`
  max-width: 350px;
  // Hide Slider input
  input {
    display: none;
  }
`,Ro=Oo((e=>{let{report:t,updateReportProp:n,reportId:a}=e;const{dashboards:o,formats:l,options:d,name:c,scaleFactor:h=2}=t||{},{handleSubmit:p,control:g,register:m,watch:v,getValues:b,formState:{isDirty:x}}=(0,zi.cI)({defaultValues:{formats:l,scaleFactor:h,options:{layout:d.layout,orientation:d.orientation}}}),y=v("options.layout"),w=v("options.orientation"),j=v("formats"),S=v("scaleFactor"),C=yo(),k=(0,s.v)("reports.email")&&!bo(t.dashboards);return(0,f.jsx)(ao,{activeStep:H.FormatReport,onSubmit:p((e=>{let{formats:s,options:a,scaleFactor:i}=e;x&&n(Object.assign({},t,{options:Object.assign({},t.options,a),formats:s,scaleFactor:i}))})),confirmRedirect:x,getFormData:()=>{const{formats:e,options:n,scaleFactor:s}=b();return{options:Object.assign({},t.options,n),formats:e,scaleFactor:s}},reportId:a,children:(0,f.jsxs)(Bi.C,{label:"2. Format report",disabled:!xo,children:[(0,f.jsx)(Bi.C,{children:(0,f.jsx)(R.wc,{children:[...To].map((e=>{let[t,n]=e;const s=m("formats"),{onChange:a}=s,i=ko(s,wo);return(0,u.createElement)(aa.X,Object.assign({},i,{key:t,htmlValue:t,label:n,onChange:e=>{if("csv"===t){e.currentTarget.checked&&null!==C&&C<3&&r.h$.emit(ta.SI.alertError,["To export CSV files, you must update the Grafana Image Renderer plugin."])}a(e)}}))}))})}),j.includes("pdf")&&(0,f.jsxs)(Bi.C,{label:"Style the PDF",children:[(0,f.jsx)(Y.g,{label:"Orientation",children:(0,f.jsx)(za.g,{name:"options.orientation",control:g,render:e=>{let{}=e,t=ko(e.field,jo);return(0,f.jsx)(uo.S,Object.assign({},t,{options:W,size:"md"}))}})}),(0,f.jsx)(Y.g,{label:"Layout",description:Io.get(y),children:(0,f.jsx)(za.g,{name:"options.layout",control:g,render:e=>{let{}=e,t=ko(e.field,So);return(0,f.jsx)(uo.S,Object.assign({},t,{options:U,size:"md"}))}})}),(0,f.jsx)(Y.g,{label:"Zoom",description:"Increase the number of rows and columns in table panels.",className:$o,children:(0,f.jsx)(za.g,{name:"scaleFactor",control:g,render:e=>{let{field:{value:t}}=e,n=ko(e.field,Co);return(0,f.jsx)(ho.i,Object.assign({},n,{value:Number(t),min:1,max:3,step:1,marks:Ui}))}})}),(0,f.jsx)(Y.g,{disabled:!k,children:(0,f.jsx)(Q.Qj,{onClick:()=>k&&(0,i.ff)("reports_preview_pdf"),icon:"external-link-alt",href:(()=>{if(bo(o))return;const e={title:c,scaleFactor:S};return w&&(e.orientation=w),y&&(e.layout=y),e.dashboards=JSON.stringify(o.map((e=>{var t;const{from:n,to:s}=fo(e.timeRange).raw;return{dashboard:{uid:null===(t=e.dashboard)||void 0===t?void 0:t.uid},timeRange:{from:n.valueOf().toString(),to:s.valueOf().toString()},reportVariables:e.reportVariables}}))),Li.Cj.appendQueryToUrl("api/reports/render/pdfs/",Li.Cj.toUrlParams(e))})(),size:"xs",target:"_blank",rel:"noreferrer noopener",variant:"secondary",children:"Preview PDF"})})]})]})})}));var Po,Do,Ao=n(65932),Mo=n(62835),Lo=n(82261);const Fo=["ref","onChange"],Eo=["ref","onChange"],Vo=["ref","onChange"],zo=["onChange"],Bo=["ref"],_o=["onChange","ref","value"],Wo=["ref"],Uo=["ref"],Ho=["onChange","ref","value"];function qo(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const Zo={updateReportProp:hr},Go=(0,$.connect)((e=>{const{report:t}=e.reports;return{report:t}}),Zo),Qo=[{label:"Once",value:V.Once},{label:"Hourly",value:V.Hourly},{label:"Daily",value:V.Daily},{label:"Weekly",value:V.Weekly},{label:"Monthly",value:V.Monthly},{label:"Custom",value:V.Custom},{label:"Never",value:V.Never}],Ko=[{label:"hours",value:z.Hours},{label:"days",value:z.Days},{label:"weeks",value:z.Weeks},{label:"months",value:z.Months}],Jo=e=>"now"===e&&[29,30,31].includes((0,xe.CQ)().toDate().getDate()),Yo=Go((e=>{var t;let{report:n,updateReportProp:s,reportId:a}=e;const{handleSubmit:i,control:r,watch:o,register:l,setValue:d,getValues:c,formState:{isDirty:u}}=(0,zi.cI)(),{frequency:g,timeZone:m,startDate:v,endDate:b,dayOfMonth:x,intervalAmount:y,intervalFrequency:w}=n.schedule,j=g===V.Never?"":v,S=j?"later":"now",k=Object.assign({startDate:j,sendTime:S,intervalFrequency:z.Hours,intervalAmount:"2"},n.schedule),N=o("schedule",k)||{},{frequency:O,startDate:I,endDate:T,intervalFrequency:$=z.Hours,dayOfMonth:P,sendTime:D=S,workdaysOnly:A}=N,M=(0,C.wW)(Xo),L=new Date(I).getDate();return(0,f.jsx)(ao,{activeStep:H.Schedule,onSubmit:i((e=>{if(u){const t=Tr(e.schedule);s(Object.assign({},n,{schedule:t}))}})),confirmRedirect:u,getFormData:()=>({schedule:Tr(c().schedule)}),reportId:a,children:(0,f.jsxs)(Bi.C,{label:"3. Schedule",children:[(0,f.jsx)(Y.g,{label:"Frequency",children:(0,f.jsx)(za.g,{defaultValue:g,name:"schedule.frequency",render:e=>{let{field:{onChange:t}}=e,n=qo(e.field,Fo);return(0,f.jsx)(uo.S,Object.assign({},n,{fullWidth:!0,options:Qo,disabled:!xo,onChange:e=>{Pr(e,$)||d("schedule.workdaysOnly",!1),t(e)}}))},control:r})}),O!==V.Never&&(0,f.jsx)(Y.g,{label:"Time",children:(0,f.jsx)(za.g,{control:r,name:"schedule.sendTime",defaultValue:S,render:e=>{let{field:{onChange:t}}=e,n=qo(e.field,Eo);return(0,f.jsx)(uo.S,Object.assign({},n,{onChange:e=>{"now"===e||I?"now"===e&&d("schedule.startDate",""):d("schedule.startDate",(0,xe.CQ)().toDate()),t(e)},options:[{label:"Send now",value:"now"},{label:"Send later",value:"later"}]}))}})}),(0,f.jsxs)(f.Fragment,{children:[O===V.Custom&&(0,f.jsxs)(R.Lh,{children:[(0,f.jsx)(Y.g,{label:"Repeat every",children:(0,f.jsx)(ee.I,Object.assign({type:"number",min:"2"},l("schedule.intervalAmount"),{placeholder:"e.g. 2",defaultValue:y||2,id:"repeat-frequency"}))}),(0,f.jsx)(Y.g,{label:" ",children:(0,f.jsx)(za.g,{control:r,defaultValue:(null===(t=Ko.find((e=>e.value===w)))||void 0===t?void 0:t.value)||z.Hours,render:e=>{let{field:{onChange:t}}=e,n=qo(e.field,Vo);return(0,f.jsx)(h.Ph,Object.assign({},n,{onChange:e=>t(e.value),options:Ko,width:16,placeholder:"hours","aria-label":"Custom frequency"}))},name:"schedule.intervalFrequency"})})]}),O===V.Monthly&&(Jo(D)||"later"===D)&&(0,f.jsx)(Y.g,{children:(0,f.jsx)(za.g,{control:r,defaultValue:"last"===x,render:e=>{let{field:{onChange:t}}=e,n=qo(e.field,zo);return(0,f.jsx)(aa.X,Object.assign({},n,{label:"Send on the last day of month",onChange:e=>{d("schedule.startDate",(0,xe.CQ)().endOf("month").toDate()),t(e)}}))},name:"schedule.dayOfMonth"})})]}),(0,f.jsx)("div",{className:"now"!==D&&O!==V.Never?"":M.hidden,children:(0,f.jsxs)(R.Lh,{width:"100%",children:[(0,f.jsx)(Y.g,{label:"Start date",children:(0,f.jsx)(za.g,{name:"schedule.startDate",control:r,defaultValue:Qi(j),render:e=>{let{}=e,t=qo(e.field,Bo);return(0,f.jsx)(Ao.d,Object.assign({},t,{width:16,placeholder:"Select date","aria-label":"Report schedule start date",closeOnSelect:!0}))}})}),(0,f.jsx)(Y.g,{label:"Start time",children:(0,f.jsx)(za.g,{name:"schedule.time",render:e=>{let{field:{onChange:t,value:n}}=e,s=qo(e.field,_o);return(0,f.jsx)(Mo.y,Object.assign({},s,{value:n,minuteStep:10,disabled:!xo,onChange:e=>{var n,s;e.isValid()&&t({hour:null===(n=e.hour)||void 0===n?void 0:n.call(e),minute:null===(s=e.minute)||void 0===s?void 0:s.call(e)})}}))},defaultValue:Ji(v),control:r})}),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Y.g,{label:"Time zone",children:(0,f.jsx)(za.g,{name:"schedule.timeZone",render:e=>{let{}=e,t=qo(e.field,Wo);return(0,f.jsx)(Lo.O,Object.assign({},t,{width:30,disabled:!xo}))},defaultValue:m||ar(),control:r})})})]})}),O===V.Monthly&&!P&&([29,30,31].includes(L)||Jo(D))&&(0,f.jsxs)("small",{className:M.warningText,children:["Note: some months do not have a"," ",$r(Jo(D)?(0,xe.CQ)().toDate().getDate():L)," day and reports will not be sent on those months. Choose an earlier date or"," ",Po||(Po=(0,f.jsx)("strong",{children:'"Send on the last day of month"'}))," to send a report at the end of each month."]}),![V.Once,V.Never].includes(O)&&(0,f.jsxs)(R.Lh,{width:"100%",children:[(0,f.jsx)(Y.g,{label:"End date",children:(0,f.jsx)(za.g,{name:"schedule.endDate",control:r,defaultValue:Qi(b),render:e=>{let{}=e,t=qo(e.field,Uo);return(0,f.jsx)(Ao.d,Object.assign({},t,{width:16,placeholder:"Does not end","aria-label":"Report schedule end date",minDate:new Date(I),closeOnSelect:!0}))}})}),T&&(O===V.Hourly||Rr(O,$))&&(0,f.jsx)(Y.g,{label:"End time",children:(0,f.jsx)(za.g,{name:"schedule.endTime",render:e=>{let{field:{onChange:t,value:n}}=e,s=qo(e.field,Ho);return(0,f.jsx)(Mo.y,Object.assign({},s,{value:n,minuteStep:10,disabled:!xo,onChange:e=>{var n,s;null!=e&&e.isValid()&&t({hour:null===(n=e.hour)||void 0===n?void 0:n.call(e),minute:null===(s=e.minute)||void 0===s?void 0:s.call(e)})}}))},defaultValue:Ji(b),control:r})})]}),Pr(O,$)&&(0,f.jsx)(Y.g,{children:(0,f.jsx)(aa.X,Object.assign({},l("schedule.workdaysOnly"),{label:"Send Monday to Friday only",defaultChecked:A}))}),(0,f.jsxs)("div",{className:M.schedulePreview,children:[Do||(Do=(0,f.jsx)(p.J,{name:"calendar-alt"})),Mr(Object.assign({},k,N))]})]})})})),Xo=e=>({warningText:S.css`
      color: ${e.colors.warning.main};
      display: block;
      margin: -${e.spacing(1)} 0 ${e.spacing(3)} 0;
    `,hidden:S.css`
      display: none;
    `,schedulePreview:S.css`
      display: flex;
      align-items: center;

      svg {
        margin-right: ${e.spacing(1)};
      }
    `});var el=n(38942),tl=n(99151),nl=n.n(tl);const sl=e=>{let{onChange:t,value:n,width:s,isClearable:a=!1,invalid:i,disabled:r,id:o,optionLabel:l="label",excludedDashboards:d}=e;const c=nl()((e=>async function(e,t,n){const s=(await ie.ae.search({type:"dash-db",query:e,limit:100})).map((e=>{let{id:n,uid:s="",title:a,folderTitle:i}=e;const r={id:n,uid:s,[t]:`${null!=i?i:"General"}/${a}`};return{value:r,[t]:r[t]}}));if(n)return s.filter((e=>{let{value:t}=e;return!n.includes(t.uid)}));return s}(e||"",l,d)),300),u=n?{value:n,[l]:n[l]}:void 0;return(0,f.jsx)(h.qb,{inputId:o,width:s,isClearable:a,defaultOptions:!0,loadOptions:c,onChange:e=>{t(null==e?void 0:e.value)},placeholder:"Select dashboard",noOptionsMessage:"No dashboards found",value:u,invalid:i,disabled:r,getOptionLabel:e=>e[l]})};const al=["onChange","ref"],il=["ref","value","onChange"];function rl(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const ol={updateReportProp:hr,initVariables:jr,cleanUpVariables:qi.kG},ll=(0,$.connect)((e=>{const{report:t}=e.reports;return{report:t,templating:e.templating.keys}}),ol),dl={dashboard:void 0,timeRange:{from:"",to:""},reportVariables:{}},cl=e=>{let{field:t,index:n,onDashboardChange:s,variables:a,control:i,dashboardUid:r,setValue:o,onTimeRangeChange:l,selectedDashboards:d=[]}=e;const c=fo(t.timeRange),u=a.filter((e=>e.hide!==Za.bU.hideVariable)),h=void 0!==r&&Boolean(u.length),p=d.filter((e=>{let{dashboard:t}=e;return(null==t?void 0:t.uid)===r})).length>1,g=d.findIndex((e=>{let{dashboard:t}=e;return(null==t?void 0:t.uid)===r})),m=p&&g!==n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.g,{label:"Source dashboard",required:!0,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(za.g,{name:`dashboards.${n}.dashboard`,control:i,render:e=>{let{field:{onChange:t}}=e,n=rl(e.field,al);return(0,f.jsx)(sl,Object.assign({},n,{"aria-label":"Source dashboard",isClearable:!0,optionLabel:"name",disabled:!xo,onChange:e=>{t(e||null),s(e,r)}}))}}),(0,f.jsx)(_r,{uid:r})]})}),h&&(0,f.jsx)(Y.g,{label:"Template variables",description:m&&"When adding the same dashboard multiple times in one report, template variables that you selected first\nare applied to all instances of that dashboard in the report.",children:m?(0,f.jsx)(f.Fragment,{}):(0,f.jsx)(f.Fragment,{children:u.map((e=>{const{picker:t,setValue:s}=Ua.z.get(e.type);return(0,f.jsx)(ca._,{label:e.name,labelWidth:16,disabled:!xo,children:(0,f.jsx)(t,{variable:e,readOnly:!1,onVariableChange:e=>{(0,Ha.eL)(e)&&(s(e,e.current),o(`dashboards.${n}.reportVariables`,er([e]),{shouldDirty:!0}))}})},e.name)}))})}),(0,f.jsx)(Y.g,{label:"Time range",description:"Generate report with the data from specified time range. If custom time range is empty the time range from the report's dashboard is used.",disabled:!xo,children:(0,f.jsx)(za.g,{control:i,name:`dashboards.${n}.timeRange`,defaultValue:c,render:e=>{let{field:{value:t,onChange:n}}=e,s=rl(e.field,il);return(0,f.jsx)(el.K,Object.assign({value:t||c,onChange:e=>{n(e),l(e.raw)}},s,{clearable:!0}))}})})]})},ul=ll((e=>{let{report:t,reportId:n,updateReportProp:s,initVariables:a,cleanUpVariables:i}=e;const{handleSubmit:r,control:o,formState:{isDirty:l},setValue:d,getValues:c,watch:h}=(0,zi.cI)({defaultValues:{dashboards:Er(t).dashboards||[dl]}}),{fields:p,append:g,remove:m}=(0,zi.Dq)({control:o,name:"dashboards",keyName:"fieldId"}),v=h("dashboards"),b=(0,C.wW)(hl);(0,u.useEffect)((()=>{const e=Fr();if(e){const{dashboard:t,variables:n,timeRange:s}=e;n&&t.uid&&a(t.uid,n,s),t.uid&&d("dashboards.0.dashboard",Object.assign({},t,{id:parseInt(t.id,10)}),{shouldDirty:!0})}}),[a,t,d]);const x=e=>(n,s)=>{var r;d(`dashboards.${e}.timeRange`,{from:"",to:""});const o=null===(r=c().dashboards)||void 0===r?void 0:r.map((e=>{let{dashboard:t}=e;return t}));if(!n){if(!s)return;return void(o.some((e=>(null==e?void 0:e.uid)===s))||i(s))}const l=o.filter((e=>(null==e?void 0:e.uid)===n.uid)).length>1;if(n.uid&&!l){var u,h;const s=null===(u=t.dashboards)||void 0===u?void 0:u[e],i=n.id===(null==s||null===(h=s.dashboard)||void 0===h?void 0:h.id)?null==s?void 0:s.reportVariables:void 0;a(n.uid,i)}},y=e=>{const t=null==e?void 0:e.filter((e=>{let{dashboard:t}=e;return null==t?void 0:t.uid})).map((e=>{let{dashboard:t,timeRange:n}=e;const s=null==t?void 0:t.uid;return{dashboard:s?{uid:s,id:null==t?void 0:t.id,name:null==t?void 0:t.name}:void 0,timeRange:mo(null==n?void 0:n.raw),reportVariables:s?er((0,qa.gt)(s).filter((e=>e.hide!==Za.bU.hideVariable))):void 0}}));return null!=t&&t.length?t:[dl]};return(0,f.jsx)(ao,{activeStep:H.SelectDashboard,onSubmit:r((e=>{const n=y(e.dashboards);l&&s(Object.assign({},t,{dashboards:n}))})),confirmRedirect:l,getFormData:()=>({dashboards:y(c().dashboards)}),reportId:n,children:(0,f.jsx)(Bi.C,{label:"1. Select dashboard",children:(0,f.jsxs)(f.Fragment,{children:[p.map(((e,t)=>{var n,s;const i=(null===(n=v[t].dashboard)||void 0===n?void 0:n.uid)||"",r=null===(s=v[t])||void 0===s?void 0:s.reportVariables,l=i?(0,qa.gt)(i):[];return(0,f.jsxs)("div",{className:(0,S.cx)(b.section,v.length>1&&b.sectionBorder),children:[(0,f.jsx)(cl,{field:e,dashboardUid:i,onDashboardChange:x(t),variables:l,control:o,index:t,setValue:d,selectedDashboards:v,onTimeRangeChange:e=>{nr(l)&&a(i,r,e)}}),p.length>1&&(0,f.jsx)(Q.zx,{className:b.removeBtn,variant:"secondary",fill:"outline",icon:"trash-alt",onClick:()=>m(t),children:"Remove dashboard"})]},e.fieldId)})),(0,f.jsx)(Q.zx,{type:"button",variant:"secondary",onClick:()=>g(dl),children:"+ Add another dashboard"})]})})})})),hl=e=>({removeBtn:S.css`
      margin-bottom: ${e.spacing(2)};
    `,section:S.css`
      padding-bottom: ${e.spacing(2)};
    `,sectionBorder:S.css`
      &:not(:last-of-type) {
        border-bottom: 1px solid ${e.colors.border.weak};
        margin-bottom: ${e.spacing(3)};
      }
    `,infoText:S.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightRegular};
    `});var pl=n(89716),gl=n(93194),ml=n(40941);const fl=e=>{if(!e)return!1;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},vl=/[,;\n]/,bl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vl;return!e||e.split(t).filter(Boolean).every((e=>fl(e)))},xl=e=>{let{onDismiss:t,onSendTestEmail:n,emails:s}=e;const a=(0,C.Fg)(),i=yl(a),[r,o]=(0,u.useState)(""),[l,d]=(0,u.useState)(""),[c,h]=(0,u.useState)(!1),[p,g]=(0,u.useState)(!1),m=e=>bl(e)?(v(),!0):(h(!0),d("Invalid email"),!1),v=()=>{h(!1),d("")};return(0,f.jsx)(sa.u,{className:i.modal,isOpen:!0,title:"Send test email",icon:"share-alt",onDismiss:t,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:i.content,children:[(0,f.jsx)(Y.g,{label:"Email",disabled:p,invalid:c,error:l,children:(0,f.jsx)(ee.I,{disabled:p,name:"email",placeholder:"your.address@company.com",type:"email",value:r,onChange:e=>{o(e.currentTarget.value),h(!1)}})}),(0,f.jsx)(aa.X,{value:p,label:"Use emails from report",onChange:e=>{const{checked:t}=e.target;g(t),t?(o(s),m(s)):(v(),o(""))}})]}),(0,f.jsxs)(sa.u.ButtonRow,{children:[(0,f.jsx)(Q.zx,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"}),(0,f.jsx)(Q.zx,{variant:"primary",onClick:()=>{m(r),m(r)&&(n(r,p),t())},children:"Send"})]})]})})},yl=(0,Ge.B)((e=>({modal:S.css`
      width: 500px;
    `,content:S.css`
      margin-bottom: ${e.spacing.lg};
    `}))),wl=["ref","value","onChange"];var jl;const Sl={updateReportProp:hr,sendTestEmail:function(e){return t=>(t(mr()),(0,Ht.i)().post("api/reports/test-email/",e).finally((()=>t(fr()))))}},Cl=(0,$.connect)((e=>{const{testEmailIsSending:t,report:n}=e.reports;return{report:n,testEmailIsSending:t}}),Sl),kl=e=>({field:S.css`
      &:not(:last-of-type) {
        margin-bottom: ${e.spacing(3)};
      }
    `,tagsInput:S.css`
      li {
        margin-bottom: ${e.spacing(1)};
        background-color: ${e.colors.background.secondary} !important;
        border-color: ${e.components.input.borderColor} !important;
        color: ${e.colors.text.primary};
      }
    `}),Nl=Cl((e=>{var t,n;let{report:a,reportId:i,updateReportProp:o,sendTestEmail:l,testEmailIsSending:d}=e;const{message:c,name:u,recipients:h,replyTo:p,enableDashboardUrl:g,dashboards:m}=a,{handleSubmit:v,control:b,register:x,setError:y,clearErrors:w,watch:j,getValues:S,formState:{errors:k,isDirty:N}}=(0,zi.cI)({mode:"onBlur"}),O=(0,C.wW)(kl),I=r.Vt.hasPermission(Z.ReportingSend),T=j("name",u),$=j("recipients",h),R=!I||!(0,s.v)("reports.email")||!T||!$||bo(m),P=(e,t)=>{const n=Object.assign({},a,S()),s=t?n.recipients:e;return l(Object.assign({},n,{recipients:s}))};return(0,f.jsxs)(ao,{activeStep:H.Share,onSubmit:v((e=>{if(N){const{name:t}=e;o(Object.assign({},a,e,{name:t.trim()}))}})),confirmRedirect:N,getFormData:()=>{const e=S(),{name:t}=e;return Object.assign({},e,{name:t.trim()})},reportId:i,children:[d&&(jl||(jl=(0,f.jsx)("div",{className:"page-alert-list",children:(0,f.jsx)(je.b,{title:"Sending test email...",severity:"info",elevated:!0})}))),(0,f.jsxs)(Bi.C,{label:"4. Share",disabled:!xo,children:[(0,f.jsx)(Y.g,{label:"Report name",required:!0,invalid:!!k.name,error:"Name is required",children:(0,f.jsx)(ee.I,Object.assign({},x("name"),{type:"text",id:"name",defaultValue:u,placeholder:"System status report"}))}),(0,f.jsx)(Y.g,{className:O.field,label:"Recipients",required:!0,invalid:!!k.recipients,error:null===(t=k.recipients)||void 0===t?void 0:t.message,description:"Separate multiple emails with a comma or semicolon.",children:(0,f.jsx)(za.g,{name:"recipients",control:b,defaultValue:h,render:e=>{let{field:{value:t,onChange:n}}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e.field,wl);return(0,f.jsx)(pl.B,Object.assign({},s,{disabled:!xo,invalid:!!k.recipients,onChange:e=>{const t=e.join(";").split(vl).filter(Boolean).map((e=>e.trim())),s=t.filter((e=>!fl(e)));s.length?y("recipients",{type:"manual",message:`Invalid email${s.length>1?"s":""}: ${s.join("; ")}`}):w("recipients"),n(t.filter((e=>fl(e))).join(";"))},placeholder:"Type in the recipients email addresses and press Enter",tags:t?t.split(vl):[],className:O.tagsInput,addOnBlur:!0}))},rules:{validate:e=>bl(e)||"Invalid email"}})}),(0,f.jsx)(Y.g,{invalid:!!k.replyTo,error:null===(n=k.replyTo)||void 0===n?void 0:n.message,className:O.field,label:"Reply-to email address",description:"The address that will appear in the Reply to field of the email",children:(0,f.jsx)(ee.I,Object.assign({},x("replyTo",{validate:e=>bl(e)||"Invalid email"}),{id:"replyTo",placeholder:"your.address@company.com - optional",type:"email",defaultValue:p}))}),(0,f.jsx)(Y.g,{className:O.field,label:"Message",children:(0,f.jsx)(gl.K,Object.assign({},x("message"),{id:"message",placeholder:c,rows:10,defaultValue:c}))}),(0,f.jsx)(Y.g,{className:O.field,children:(0,f.jsx)(aa.X,Object.assign({},x("enableDashboardUrl"),{defaultChecked:g,label:"Include a dashboard link"}))})]}),(0,f.jsx)(ml.JY,{children:e=>{let{showModal:t,hideModal:n}=e;return(0,f.jsx)(Q.zx,{disabled:R,size:"xs",variant:"secondary",onClick:e=>{e.preventDefault(),t(xl,{onDismiss:n,onSendTestEmail:P,emails:$})},children:"Send test email"})}})]})}));var Ol=n(41762);var Il,Tl,$l,Rl,Pl;const Dl="Please contact your Grafana administrator to install the plugin.",Al=()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(f.Fragment,{children:"To generate PDF reports, you must install the "}),Il||(Il=(0,f.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"Grafana Image Renderer"})),(0,f.jsx)(f.Fragment,{children:" plugin."})]}),Ml=e=>{let{variant:t="info"}=e;return(0,f.jsxs)(je.b,{title:"Image renderer plugin not installed",severity:t,children:[Tl||(Tl=(0,f.jsx)(Al,{}))," ",$l||($l=(0,f.jsx)("br",{})),Dl]})},Ll=()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(f.Fragment,{children:"To generate CSV files, you must update the "}),Rl||(Rl=(0,f.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"Grafana Image Renderer"})),(0,f.jsx)(f.Fragment,{children:" plugin."})]}),Fl=()=>Pl||(Pl=(0,f.jsxs)(je.b,{title:"You are using an old version of the image renderer plugin",severity:"warning",children:[(0,f.jsx)(Ll,{})," ",(0,f.jsx)("br",{}),Dl]})),El=e=>{let{message:t}=e;return(0,f.jsx)(ts.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration",children:(0,f.jsx)("span",{children:t})})};var Vl,zl,Bl,_l;const Wl=$t.vc.featureToggles.featureHighlights,Ul={label:"PDF",value:"pdf",component:e=>{let{dashboard:t,onDismiss:n}=e;(0,u.useEffect)((()=>{(0,i.ff)("grafana_dashboards_pdf_share_viewed")}),[]);const[r,o]=(0,u.useState)("landscape"),[l,d]=(0,u.useState)("grid");return a.v.rendererAvailable?(0,s.v)("reports.pdf")?t.isSnapshot()?Bl||(Bl=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Sharing a PDF from a snapshot is not supported."})):(0,f.jsxs)(Ol.Q,{icon:"file-alt",children:[_l||(_l=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Save the dashboard as a PDF document."})),(0,f.jsx)(Y.g,{label:"Orientation",children:(0,f.jsx)(uo.S,{options:W,value:r,onChange:e=>{o(e)}})}),(0,f.jsx)(Y.g,{label:"Layout",children:(0,f.jsx)(uo.S,{options:U,value:l,onChange:e=>{d(e)}})}),(0,f.jsxs)(sa.u.ButtonRow,{children:[(0,f.jsx)(Q.zx,{variant:"secondary",onClick:n,children:"Cancel"}),(0,f.jsx)(Q.Qj,{variant:"primary",href:(()=>{let e=`${function(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.origin)+a.v.appSubUrl;return e.endsWith("/")&&e.slice(0,-1),e}()}/api/reports/render/pdfs`;const n={orientation:r,layout:l},s=(0,qa.gt)(t.uid),i={dashboard:{uid:t.uid}};s.length&&(i.reportVariables=er(s));const o=(()=>{const e=new URLSearchParams(window.location.search),t=e.get("to"),n=e.get("from");return n&&t?{from:n,to:t}:null})();return o&&(i.timeRange=o),n.dashboards=JSON.stringify([i]),e=Li.Cj.appendQueryToUrl(e,Li.Cj.toUrlParams(n)),e})(),target:"_blank",rel:"noreferrer noopener",children:"Save as PDF"})]})]}):zl||(zl=(0,f.jsx)(El,{message:"Rendering a dashboard as a PDF document is not available with your current license. To enable this feature, update your license."})):Vl||(Vl=(0,f.jsx)(Ml,{}))}},Hl={label:"Report",value:"report",tabSuffix:Wl&&!(0,s.v)("reports.creation")||(0,M.d5)()?()=>(0,Ai.Z)({experimentId:Mt("reporting-tab-badge")}):void 0,component:e=>{let{dashboard:t,onDismiss:n}=e;(0,u.useEffect)((()=>{(0,i.ff)("grafana_dashboards_report_share_viewed")}),[]);const a=(0,C.wW)(Vi);return!(0,s.v)("reports.creation")?(0,f.jsxs)("div",{className:a.container,children:[Ii||(Ii=(0,f.jsx)(D.Xz,{featureName:"reporting",featureId:"reporting-tab"})),Ti||(Ti=(0,f.jsx)(D.tM,{image:"reporting-email.png",featureName:"reporting",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))]}):(0,f.jsxs)(f.Fragment,{children:[(0,M.d5)()&&(0,f.jsxs)("div",{className:a.highlight,children:[$i||($i=(0,f.jsx)(D.Xz,{featureId:"reporting-tab",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."})),Ri||(Ri=(0,f.jsx)("h3",{children:"Get started with reporting"})),Pi||(Pi=(0,f.jsx)("h6",{children:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))]}),(0,f.jsx)(Q.Qj,{href:`reports/new/?${Li.Cj.toUrlParams((0,Ei.c)())}&${Li.Cj.toUrlParams((0,Fi.$t)().timeRangeForUrl())}&db-uid=${t.uid}&db-id=${t.id}&db-name=${t.title}`,onClick:n,className:a.button,children:"Create report using this dashboard"}),(0,M.d5)()&&(Di||(Di=(0,f.jsx)(Q.Qj,{fill:"text",href:"https://grafana.com/docs/grafana/latest/enterprise/reporting",children:"Learn more"})))]})}};function ql(){var e;null!==(e=$t.vc.reporting)&&void 0!==e&&e.enabled&&((0,s.v)("reports.creation")?((0,Mi.u9)(Ul),ye.Vt.hasAccess(Z.ReportingCreate,ye.Vt.hasRole("Admin"))&&(0,Mi.u9)(Hl)):Wl&&(0,Mi.u9)(Hl))}const Zl=[{id:H.SelectDashboard,name:"Select dashboard",component:ul},{id:H.FormatReport,name:"Format report",component:Ro},{id:H.Schedule,name:"Schedule",component:Yo},{id:H.Share,name:"Share",component:Nl},{id:H.Confirm,name:"Confirm",component:oo}];var Gl=n(3574),Ql=n(14790),Kl=n(39321),Jl=n(80419);function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xl={initDashboard:n(89118).mV},ed=(0,$.connect)((e=>({dashboard:e.dashboard.getModel()})),Xl);class td extends u.Component{constructor(){super(...arguments),Yl(this,"state",{panel:null,notFound:!1})}componentDidMount(){const{match:e,route:t}=this.props;this.props.initDashboard({urlSlug:e.params.slug,urlUid:e.params.uid,urlType:e.params.type,routeName:t.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){var e;return parseInt(null!==(e=this.props.queryParams.panelId)&&void 0!==e?e:"0",10)}componentDidUpdate(e){const{dashboard:t}=this.props;if(t&&(!e.dashboard||e.dashboard.uid!==t.uid)){const e=t.getPanelByUrlId(this.props.queryParams.panelId);if(!e)return void this.setState({notFound:!0});this.setState({panel:e}),e.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:e=>this.onDataUpdate(e)})}}onDataUpdate(e){const{panel:t}=this.state;if(!e||!t||e.state!==an.Gu.Done)return;const{dashboard:n}=this.props,s=e.series,i=this.props.queryParams.timezone||(null==n?void 0:n.timezone),r=(0,yn.SM)({data:s,theme:a.v.theme2,fieldConfig:t.fieldConfig,replaceVariables:e=>e,timeZone:i}),o=(0,Ql.MJ)([r[0]],{}),l=new Blob([String.fromCharCode(65279),o],{type:"text/csv;charset=utf-8"}),d=`${null==t?void 0:t.getDisplayTitle()}-data-${(0,Be.dq)(new Date)}.csv`;(0,Gl.saveAs)(l,d)}render(){return(0,f.jsx)(Jl.SoloPanel,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}Yl(td,"contextType",Kl.h);const nd=ed(td);var sd=n(22222);var ad,id;const rd=["children","editMode","isLoading","className","report"];const od=e=>{let{children:t,editMode:n,isLoading:s,report:i}=e,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,rd);const o=(0,C.wW)(ld);(0,u.useEffect)((()=>{document.title="Reporting: "+(n?"Edit report":"New report")}),[n]);const l=(e=>{let{report:t,editMode:n}=e;const{name:s,dashboardName:a=""}=t;return{text:Boolean(t.id)||n?s||a:"New report",breadcrumbs:[{title:"Reports",url:"reports"}]}})({report:i,editMode:n});return(0,f.jsx)(P.T,{navId:"reports-list",pageNav:l,children:(0,f.jsx)(P.T.Contents,{children:(0,f.jsx)("div",Object.assign({className:o.page},r,{children:(0,f.jsx)(sd.$,{autoHeightMin:"100%",children:s?ad||(ad=(0,f.jsx)(hi.Z,{})):a.v.rendererAvailable?t:id||(id=(0,f.jsx)(Ml,{variant:"error"}))})}))})})},ld=e=>({page:S.css`
      height: 100%;
    `});var dd;const cd={loadReport:Sr},ud=(0,$.connect)(((e,t)=>{const{report:n,isLoading:s}=e.reports,{id:a,step:i}=t.match.params;return{activeStep:i,existingReport:!!n.id,isLoading:Boolean(a&&s),report:n,reportId:a}}),cd),hd=ud((e=>{let{existingReport:t,isLoading:n,loadReport:s,report:a,reportId:i,activeStep:r=H.SelectDashboard}=e;(0,u.useEffect)((()=>{i&&s(parseInt(i,10))}),[i,s]);const o=(0,u.useCallback)((()=>{var e;const t=null===(e=Zl.find((e=>{let{id:t}=e;return t===r})))||void 0===e?void 0:e.component;return t?(0,f.jsx)(t,{reportId:i}):null}),[r,i]);return(0,f.jsx)(od,{isLoading:n,editMode:t,report:a,children:n?dd||(dd=(0,f.jsx)(Ue.a,{})):o()})}));var pd=n(54241);const gd=(e,t)=>{const n=["name","recipients"];return e.filter((e=>n.some((n=>{var s;return null===(s=e[n])||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase())}))||(e=>e.dashboards.some((e=>{let{dashboard:n}=e;return null==n?void 0:n.name.toLowerCase().includes(t.toLowerCase())})))(e)))},md=e=>{let{deleteReport:t,updateReport:n,reports:s,filter:a}=e;const i=(0,C.l4)(),o=(0,C.wW)(fd),l=r.Vt.hasPermission(Z.ReportingWrite),d=r.Vt.hasPermission(Z.ReportingDelete);return(0,f.jsx)("div",{children:gd(s,a).map((e=>{const s=e.recipients.split(";"),a=s.length,r=Dr(e.schedule),{isNever:c,showPlay:u,disableEdit:h,reportState:p}=Ir(e),g=(e=>new Map([[_.Scheduled,e.colors.success.text],[_.Expired,e.colors.warning.text],[_.Draft,e.colors.text.primary],[_.Never,e.colors.text.primary],[_.Paused,e.colors.text.disabled]]))(i).get(e.state);return(0,f.jsxs)(Ze._,{href:`reports/confirm/${e.id}`,className:o.container,children:[(0,f.jsxs)("div",{className:o.info,children:[(0,f.jsx)("span",{className:o.title,children:e.name}),(0,f.jsx)("span",{className:o.dashboards,children:[...new Set(e.dashboards.map((e=>{let{dashboard:t}=e;return null==t?void 0:t.name})))].join(", ")})]}),(0,f.jsx)("div",{className:o.recipients,children:(0,f.jsx)(ne.u,{content:s.join(", "),placement:"top",children:(0,f.jsx)("div",{children:`${a} recipient${a>1?"s":""}`})})}),(0,f.jsxs)("div",{className:o.schedule,children:[(0,f.jsx)("span",{className:(0,S.cx)(o.scheduleStatus,S.css`
                    color: ${g};
                  `),children:p.toUpperCase()}),!c&&(0,f.jsx)("span",{className:o.text,children:r})]}),(0,f.jsxs)("div",{className:o.buttonWrapper,children:[(0,f.jsx)(ne.u,{content:(u?"Resume":"Pause")+" report",placement:"top",children:(0,f.jsx)(Q.zx,{type:"button",variant:"secondary",fill:"text",icon:u?"play":"pause",size:"md",onClick:t=>{t.preventDefault(),(e=>{const{state:t}=e;let s;s=[_.Draft,_.Expired].includes(t)?t:t!==_.Paused?_.Paused:_.Scheduled,n(Object.assign({},e,{state:s}),!0)})(e)},disabled:h||!l})}),(0,f.jsx)(pd.p,{confirmText:"Delete",confirmVariant:"destructive",size:"md",disabled:!d,onConfirm:()=>t(e),children:(0,f.jsx)(Q.zx,{type:"button",className:o.deleteButton,"aria-label":`Delete report ${e.name}`,variant:"secondary",icon:"trash-alt",size:"md",fill:"text"})})]})]},e.id)}))})},fd=e=>({container:S.css`
    & > a {
        align-items: center;
      },
    `,info:S.css`
      display: flex;
      flex-direction: column;
      width: 30%;
    `,title:S.css`
      font-size: ${e.typography.h5.fontSize};
      font-weight: ${e.typography.fontWeightBold};
    `,dashboards:S.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `,recipients:S.css`
      display: flex;
      width: 25%;
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      },
    `,schedule:S.css`
      display: flex;
      flex-direction: column;
      width: 40%;
    `,scheduleStatus:S.css`
      text-transform: uppercase;
    `,buttonWrapper:S.css`
      display: flex;
      align-items: center;
      width: 5%;
      & > button {
        &[disabled] {
          pointer-events: all;
        },
      },
    `,deleteButton:S.css`
      &:hover {
        color: ${e.colors.error.text};
    `,text:S.css`
      color: ${e.colors.text.secondary};
    `});var vd,bd;const xd=e=>{let{action:t}=e;return(0,f.jsx)(D.TA,{featureName:"reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.",listItems:["Customize your exact layout and orientation","Personalize with your unique branding","Specify permissions for users across your company","Choose to send a report at custom intervals"],featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting/",image:"reporting-email.png",caption:"Create reports to share your SLO performance, business metrics, cost and utilization metrics or anything else you can express in a Grafana dashboard.",action:t})},yd=e=>({contents:S.css`
      &.page-body {
        flex: 0;
      }
    `,spacer:S.css`
      flex: 1;
    `,box:S.css`
      ${e.breakpoints.up("sm")} {
        padding: ${e.spacing(0,1)};
      }

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(0,2)};
      }
    `}),wd=()=>{const e=(0,C.wW)(yd);return(0,f.jsxs)(P.T,{navId:"reports",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties.",children:[(0,f.jsx)("div",{className:e.box,children:vd||(vd=(0,f.jsx)(D.Xz,{featureName:"reporting",featureId:"reporting"}))}),(0,f.jsx)(P.T.Contents,{className:e.contents,children:bd||(bd=(0,f.jsx)(xd,{}))}),(0,f.jsx)("div",{className:e.spacer})]})};var jd,Sd,Cd,kd,Nd,Od;const Id={getReports:wr,deleteReport:Cr,updateReport:Nr},Td=(0,$.connect)((function(e){return{navModel:(0,A.ht)(e.navIndex,"reports-list"),reports:e.reports.reports,hasFetched:e.reports.hasFetchedList,searchQuery:e.reports.searchQuery,reportCount:e.reports.reportCount}}),Id),$d=Td((e=>{var t,n;let{getReports:i,deleteReport:o,updateReport:l,reports:d,reportCount:c,hasFetched:h,navModel:g}=e;const[m,v]=(0,u.useState)("");(0,u.useEffect)((()=>{i()}),[i]);const b=e=>{o(e.id)};return(0,f.jsx)(P.T,{navId:"reports-list",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties.",children:(0,f.jsx)(P.T.Contents,{isLoading:!h,children:(()=>{const{rendererAvailable:e}=a.v,i=yo(),o=r.Vt.hasPermission(Z.ReportingCreate),u=e&&o;return(0,s.v)("reports.creation")?(0,f.jsxs)(f.Fragment,{children:[!e&&(Sd||(Sd=(0,f.jsx)(Ml,{variant:"error"}))),e&&null!==i&&i<3&&(Cd||(Cd=(0,f.jsx)(Fl,{}))),(0,M.d5)()&&(kd||(kd=(0,f.jsx)(D.Xz,{featureId:"reporting",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}))),c>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"page-action-bar",children:(0,f.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,f.jsx)(ee.I,{placeholder:"Search reports by report name, dashboard name or recipients",prefix:Nd||(Nd=(0,f.jsx)(p.J,{name:"search"})),width:56,onChange:e=>v(e.target.value)}),Od||(Od=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),(0,f.jsx)(Q.Qj,{variant:"primary",href:"reports/new",disabled:!u,icon:"plus",children:"Create a new report"})]})}),n||(n=(0,f.jsx)(md,{reports:d,deleteReport:b,updateReport:l,filter:m}))]}):e&&((0,M.d5)()?(0,f.jsx)(xd,{action:{text:"Create report",link:"reports/new"}}):(0,f.jsx)(G.Z,{title:"You haven't created any reports yet.",buttonIcon:"envelope",buttonLink:"reports/new",buttonTitle:"Create a new report",buttonDisabled:!u,proTip:"",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}))]}):(0,f.jsxs)(f.Fragment,{children:[jd||(jd=(0,f.jsx)(El,{message:"Creating new reports is not available with an expired license. Existing reports continue to be processed but you need to update your license to create a new one."})),c>0&&(t||(t=(0,f.jsx)(md,{reports:d,deleteReport:b,updateReport:l,filter:m})))]})})()})})}));var Rd=n(66015),Pd=n(58226);const Dd=e=>{let{url:t,width:n="200px",altText:s}=e;const a=(0,C.yK)(Ad);return t?(0,f.jsx)("div",{className:(0,S.cx)(a.wrapper,S.css`
          width: ${n};
        `),children:(0,f.jsx)("img",{src:t,className:a.img,alt:s})}):null},Ad=e=>({wrapper:S.css`
      padding: ${e.spacing.sm};
      border: 1px solid ${e.colors.border3};
      border-radius: ${e.border.radius.sm};
      margin-bottom: ${e.spacing.md};
    `,img:S.css`
      width: 100%;
    `}),Md=["ref"];const Ld=[{label:"Sent By",value:B.SentBy},{label:"None",value:B.None}],Fd=e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["png","jpg","gif"];if(!e)return!0;const n=e.split(".");return t.includes(n[n.length-1])}(e)||"Invalid image extension. Supported formats: png, jpg, gif.",Ed=e=>{var t,n,s,a,i,o;let{settings:l,register:d,control:c,watch:u,errors:h}=e;const{reportLogoUrl:p,emailLogoUrl:g,emailFooterMode:m,emailFooterText:v,emailFooterLink:b}=l.branding,x=u("branding.reportLogoUrl",p),y=u("branding.emailLogoUrl",g),w=u("branding.emailFooterMode",m||B.SentBy),j=r.Vt.hasPermission(Z.ReportingSettingsWrite);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(Bi.C,{label:"Report branding",disabled:!j,children:[(0,f.jsx)(Y.g,{label:"Company logo URL",description:"The logo will be displayed in the document footer. Supported formats: png, jpg, gif.",invalid:!(null===(t=h.branding)||void 0===t||!t.reportLogoUrl),error:null===(n=h.branding)||void 0===n||null===(s=n.reportLogoUrl)||void 0===s?void 0:s.message,children:(0,f.jsx)(ee.I,Object.assign({},d("branding.reportLogoUrl",{validate:Fd}),{"aria-label":"Report logo",id:"reportLogo",defaultValue:p,placeholder:"http://your.site/logo.png",type:"url"}))}),(0,f.jsx)(Dd,{url:x||"/public/img/grafana_icon.svg",width:"60px",altText:"Company logo preview"})]}),(0,f.jsxs)(Bi.C,{label:"Email branding",disabled:!j,children:[(0,f.jsx)(Y.g,{label:"Company logo URL",description:"The logo will be displayed in the email header. Supported formats: png, jpg, gif.",invalid:!(null===(a=h.branding)||void 0===a||!a.emailLogoUrl),error:null===(i=h.branding)||void 0===i||null===(o=i.emailLogoUrl)||void 0===o?void 0:o.message,children:(0,f.jsx)(ee.I,Object.assign({},d("branding.emailLogoUrl",{validate:Fd}),{"aria-label":"Email logo",id:"emailLogo",defaultValue:g,placeholder:"http://your.site/logo.png",type:"url"}))}),(0,f.jsx)(Dd,{url:y||"https://grafana.com/static/assets/img/grafana_logo_lockup_ltbg.png",altText:"Company logo preview"}),(0,f.jsx)(Y.g,{label:"Email footer",children:(0,f.jsx)(za.g,{defaultValue:m||B.SentBy,name:"branding.emailFooterMode",render:e=>{let{}=e,t=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e.field,Md);return(0,f.jsx)(uo.S,Object.assign({},t,{options:Ld}))},control:c})}),w===B.SentBy&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.g,{label:"Footer link text",children:(0,f.jsx)(ee.I,Object.assign({},d("branding.emailFooterText"),{id:"emailFooterText",defaultValue:v,placeholder:"Grafana",type:"text"}))}),(0,f.jsx)(Y.g,{label:"Footer link URL",children:(0,f.jsx)(ee.I,Object.assign({},d("branding.emailFooterLink"),{id:"emailFooterLink",defaultValue:b,placeholder:"http://your.site",type:"url"}))})]})]})]})};var Vd,zd;const Bd=(0,$.connect)((e=>({navModel:(0,A.ht)(e.navIndex,"reports-settings")})))((e=>{let{navModel:t}=e;const{value:n,loading:s,error:i}=(0,Rd.Z)((async()=>(0,Ht.i)().get("/api/reports/settings")));if(i)return Vd||(Vd=(0,f.jsx)(Pd.m,{}));const o=r.Vt.hasPermission(Z.ReportingSettingsWrite);return(0,f.jsx)(P.T,{navId:"reports-settings",subTitle:"Manage report template settings.",children:(0,f.jsx)(P.T.Contents,{isLoading:s,children:a.v.rendererAvailable?(0,f.jsx)(ms.l,{onSubmit:e=>{(0,Ht.i)().post("/api/reports/settings",e).then((()=>_e.E1.push("/reports")))},validateOn:"onBlur",children:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ed,Object.assign({settings:n},e)),(0,f.jsx)(Q.zx,{type:"submit",size:"md",variant:"primary",disabled:!o,children:"Save"})]})}):zd||(zd=(0,f.jsx)(Ml,{variant:"error"}))})})}));var _d=n(58906),Wd=n(65632),Ud=n(61533),Hd=n(22259);function qd(){(0,s.v)("dspermissions.enforcement")&&(0,l.U)(Ks),(0,s.v)("caching")&&(0,l.U)(be),(0,s.v)("reports")&&(0,l.U)(xr),(0,s.v)("analytics")&&(0,l.U)(Bt),(0,s.v)("recordedqueries")&&(0,l.U)(ka)}function Zd(){var e,t;const n=a.v.featureToggles.featureHighlights;Ee(),ql(),Qn(),((0,s.v)("whitelabeling")||(0,s.v)("grafanacloud"))&&function(){const e=a.v.whitelabeling;if(!e)return;Wd.c.LoginTitle="Welcome to Grafana Enterprise",e.links.length>0&&(0,Ud.Dv)((()=>e.links.map((e=>Object.assign({},e,{target:"_blank"})))));const t=e.publicDashboardFooter;if((null!=t&&t.hide||null!=t&&t.text||null!=t&&t.link||null!=t&&t.logo)&&(0,Hd.Jc)((()=>e.publicDashboardFooter)),e.appTitle&&(Wd.c.AppTitle=e.appTitle),e.loginLogo&&(Wd.c.LoginLogo=t=>(0,f.jsx)("img",{className:(0,S.cx)(t.className,S.css`
            max-width: 150px;
            max-height: 250px;
            width: auto;
            @media ${_d.mediaUp(a.v.theme.breakpoints.sm)} {
              max-width: 250px;
            }
          `),src:e.loginLogo,alt:"Login logo"}),Wd.c.LoginLogo.displayName="BrandingLoginLogo",Wd.c.LoginTitle="",Wd.c.GetLoginSubTitle=()=>""),e.loginTitle&&(Wd.c.LoginTitle=e.loginTitle),e.loginSubtitle&&(Wd.c.GetLoginSubTitle=()=>e.loginSubtitle),e.menuLogo&&(Wd.c.MenuLogo=t=>(0,f.jsx)("img",{className:t.className,src:e.menuLogo,alt:"Menu logo"}),Wd.c.MenuLogo.displayName="BrandingMenuLogo"),e.loginBackground){const t=S.css`
      background: ${e.loginBackground};
      background-size: cover;
    `;Wd.c.LoginBackground=e=>(0,f.jsx)("div",{className:(0,S.cx)(t,e.className),children:e.children}),Wd.c.LoginBackground.displayName="BrandingLoginBackground"}if(e.loginBoxBackground){const t=S.css`
      background: ${e.loginBoxBackground};
      background-size: cover;
    `;Wd.c.LoginBoxBackground=()=>t}}(),(0,s.v)("recordedqueries")&&function(){var e;(0,s.v)("recordedqueries")&&(null===a.v||void 0===a.v||null===(e=a.v.recordedQueries)||void 0===e?void 0:e.enabled)&&((0,ea.WI)(Ia()),Xs.f.addExtraRenderAction((e=>{var t;return ci()&&(null!==(t=e.dataSource)&&void 0!==t&&t.meta.backend||(0,Ys.Pr)(e.dataSource))?(0,f.jsx)(di,Object.assign({},e)):null})),Xs.S.addExtraRenderAction((e=>ci()?(0,f.jsx)(Ea,Object.assign({},e)):null)))}(),(0,s.v)("admin")&&(0,c.addExtraFilters)(b),(0,s.v)("caching")?o.gV.push({path:"/datasources/edit/:uid/cache",component:ge}):n&&o.gV.push({path:"/datasources/edit/:uid/cache/upgrade",component:fe}),(0,s.v)("analytics")?r.Vt.hasPermission(d.bW.DataSourcesInsightsRead)&&o.gV.push({path:"/datasources/edit/:uid/insights",component:is}):n&&o.gV.push({path:"/datasources/edit/:uid/insights/upgrade",component:os});const i="/datasources/edit/:uid/permissions";(0,s.v)("dspermissions.enforcement")?r.Vt.hasPermission(d.bW.DataSourcesPermissionsRead)&&(a.v.rbacEnabled?o.gV.push({path:i,component:hs}):o.gV.push({path:i,component:Gs})):n&&o.gV.push({path:i+"/upgrade",component:Fs}),null!==(e=a.v.reporting)&&void 0!==e&&e.enabled&&((0,s.v)("reports")?o.gV.push({path:Wi,component:$d},{path:"/reports/settings",component:Bd},{path:"/d-csv/:uid",pageClass:"dashboard-solo",routeName:d.vq.Normal,component:nd}):n&&o.gV.push({path:Wi,component:wd}),(0,s.v)("reports.creation")&&(o.gV.push({path:"/reports/new",component:hd}),o.gV.push({path:"/reports/:step?/:id?",component:hd})));const l=(0,s.v)("recordedqueries")&&(null===a.v||void 0===a.v||null===(t=a.v.recordedQueries)||void 0===t?void 0:t.enabled);r.Vt.isEditor&&l&&o.gV.push({path:"/recorded-queries",component:ji},{path:"/recorded-queries/write-target",component:Oi})}function Gd(){(0,j.nH)(T),o.gV.push({path:"/admin/licensing",roles:()=>r.Vt.evaluatePermission((()=>["ServerAdmin"]),[Z.LicensingRead,d.bW.ActionServerStatsRead]),component:It}),r.Vt.isSignedIn&&"Licensed"!==a.v.licenseInfo.stateInfo&&(0,i.SZ)(Mt(),a.v.featureToggles.featureHighlights?At.Test:At.Control,"")}function Qd(){Gd(),Zd()}},74408:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(68404);var s=n(59337),a=n(70917),i=n(45916);const r=["value","onChange","aria-label","inputId","autoFocus"];const o=Object.keys(s.B).map((e=>({label:e,value:e})));function l(e){let{value:t,onChange:n,"aria-label":s,inputId:l,autoFocus:d}=e,c=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);return(0,i.jsx)(a.Ph,Object.assign({inputId:l,value:t,options:o,onChange:e=>n(e.value),placeholder:"Choose role...","aria-label":s,autoFocus:d},c))}},70014:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ServerStats:()=>R});var s=n(52423),a=n(68404),i=n(65737),r=n(16755),o=n(8006),l=n(78748),d=n(64850),c=n(59196),u=n(37434),h=n(22543),p=n(98251),g=n(93570),m=n(78941),f=n(31787),v=n(45916);const b=()=>{var e;const t=x((0,r.l4)()),[n,s]=(0,a.useState)(!1),[l,d]=(0,a.useState)({mode:"thumbs",theme:i.v.theme2.isLight?"light":"dark"}),c=()=>s(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(m.u,{title:"Start crawler",isOpen:n,onDismiss:c,children:[(0,v.jsx)("div",{className:t.wrap,children:(0,v.jsx)(f.p,{height:200,value:null!==(e=JSON.stringify(l,null,2))&&void 0!==e?e:"",showLineNumbers:!1,readOnly:!1,language:"json",showMiniMap:!1,onBlur:e=>{d(JSON.parse(e))}})}),(0,v.jsxs)(m.u.ButtonRow,{children:[(0,v.jsx)(o.zx,{type:"submit",onClick:()=>{(0,g.i)().post("/api/admin/crawler/start",l).then((e=>{console.log("GOT",e),c()}))},children:"Start"}),(0,v.jsx)(o.zx,{variant:"secondary",onClick:c,children:"Cancel"})]})]}),(0,v.jsx)(o.zx,{onClick:()=>s(!0),variant:"primary",children:"Start"})]})},x=e=>({wrap:s.css`
      border: 2px solid #111;
    `});var y,w,j;const S=()=>{const e=C((0,r.l4)()),[t,n]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=(0,p.gj)().getStream({scope:h.z.Grafana,namespace:"broadcast",path:"crawler"}).subscribe({next:e=>{((0,h.RL)(e)||(0,h.se)(e))&&n(e.message)}});return()=>{e.unsubscribe()}}),[]),t?(0,v.jsxs)("div",{className:e.wrap,children:[(0,v.jsx)("pre",{children:JSON.stringify(t,null,2)}),"running"!==t.state&&(j||(j=(0,v.jsx)(b,{}))),"stopped"!==t.state&&(0,v.jsx)(o.zx,{variant:"secondary",onClick:()=>{(0,g.i)().post("/api/admin/crawler/stop")},children:"Stop"})]}):(0,v.jsxs)("div",{className:e.wrap,children:["No status (never run)",y||(y=(0,v.jsx)("br",{})),w||(w=(0,v.jsx)(b,{}))]})},C=e=>({wrap:s.css`
      border: 4px solid red;
    `,running:s.css`
      border: 4px solid green;
    `});var k,N,O,I,T,$;const R=()=>{const[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(!1),l=(0,r.wW)(P),h=c.Vt.hasAccess(d.bW.DataSourcesRead,c.Vt.isGrafanaAdmin),p=c.Vt.hasAccess(d.bW.UsersRead,c.Vt.isGrafanaAdmin);return(0,a.useEffect)((()=>{c.Vt.hasAccess(d.bW.ActionServerStatsRead,c.Vt.isGrafanaAdmin)&&(s(!0),(async()=>(0,g.i)().get("api/admin/stats").catch((e=>(console.error(e),null))))().then((e=>{t(e),s(!1)})))}),[]),c.Vt.hasAccess(d.bW.ActionServerStatsRead,c.Vt.isGrafanaAdmin)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:l.title,children:"Instance statistics"}),n?(0,v.jsx)("div",{className:l.loader,children:k||(k=(0,v.jsx)(u.a,{text:"Loading instance stats..."}))}):e?(0,v.jsxs)("div",{className:l.row,children:[(0,v.jsx)(D,{content:[{name:"Dashboards (starred)",value:`${e.dashboards} (${e.stars})`},{name:"Tags",value:e.tags},{name:"Playlists",value:e.playlists},{name:"Snapshots",value:e.snapshots}],footer:N||(N=(0,v.jsx)(o.Qj,{href:"/dashboards",variant:"secondary",children:"Manage dashboards"}))}),(0,v.jsxs)("div",{className:l.doubleRow,children:[(0,v.jsx)(D,{content:[{name:"Data sources",value:e.datasources}],footer:h&&(O||(O=(0,v.jsx)(o.Qj,{href:"/datasources",variant:"secondary",children:"Manage data sources"})))}),(0,v.jsx)(D,{content:[{name:"Alerts",value:e.alerts}],footer:I||(I=(0,v.jsx)(o.Qj,{href:"/alerting/list",variant:"secondary",children:"Alerts"}))})]}),(0,v.jsx)(D,{content:[{name:"Organisations",value:e.orgs},{name:"Users total",value:e.users},{name:"Active users in last 30 days",value:e.activeUsers},{name:"Active sessions",value:e.activeSessions}],footer:p&&(T||(T=(0,v.jsx)(o.Qj,{href:"/admin/users",variant:"secondary",children:"Manage users"})))})]}):(0,v.jsx)("p",{className:l.notFound,children:"No stats found."}),i.v.featureToggles.dashboardPreviews&&i.v.featureToggles.dashboardPreviewsAdmin&&($||($=(0,v.jsx)(S,{})))]}):null},P=e=>({title:s.css`
      margin-bottom: ${e.spacing(4)};
    `,row:s.css`
      display: flex;
      justify-content: space-between;
      width: 100%;

      & > div:not(:last-of-type) {
        margin-right: ${e.spacing(2)};
      }

      & > div {
        width: 33.3%;
      }
    `,doubleRow:s.css`
      display: flex;
      flex-direction: column;

      & > div:first-of-type {
        margin-bottom: ${e.spacing(2)};
      }
    `,loader:s.css`
      height: 290px;
    `,notFound:s.css`
      font-size: ${e.typography.h6.fontSize};
      text-align: center;
      height: 290px;
    `}),D=e=>{let{content:t,footer:n}=e;const s=(0,r.wW)(A);return(0,v.jsx)(l._,{className:s.container,disableHover:!0,children:(0,v.jsxs)("div",{className:s.inner,children:[(0,v.jsx)("div",{className:s.content,children:t.map((e=>(0,v.jsxs)("div",{className:s.row,children:[(0,v.jsx)("span",{children:e.name}),(0,v.jsx)("span",{children:e.value})]},e.name)))}),n&&(0,v.jsx)("div",{children:n})]})})},A=e=>({container:s.css`
      padding: ${e.spacing(2)};
    `,inner:s.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,content:s.css`
      flex: 1 0 auto;
    `,row:s.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${e.spacing(2)};
      align-items: center;
    `})},10244:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UpgradeInfo:()=>R,UpgradePage:()=>T,default:()=>z});var s=n(52423),a=(n(68404),n(36635)),i=n(16755),r=n(8006),o=n(37417),l=n(85829),d=n(45916);const c={fontWeight:500,fontSize:"26px",lineHeight:"123%"},u=e=>{const t=e.isDark?"public/img/licensing/header_dark.svg":"public/img/licensing/header_light.svg",n=e.isDark?e.v1.palette.dark9:e.v1.palette.gray6;return{container:s.css`
      padding: 36px 79px;
      background: ${e.components.panel.background};
    `,footer:s.css`
      text-align: center;
      padding: 16px;
      background: ${n};
    `,header:s.css`
      height: 137px;
      padding: 40px 0 0 79px;
      position: relative;
      background: url('${t}') right;
    `}};function h(e){let{header:t,editionNotice:n,subheader:s,children:a}=e;const r=(0,i.wW)(u);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:r.header,children:[(0,d.jsx)("h2",{style:c,children:t}),s&&(0,d.jsx)("h3",{children:s}),(0,d.jsx)(p,{size:"128px",style:{boxShadow:"0px 0px 24px rgba(24, 58, 110, 0.45)",background:"#0A1C36",position:"absolute",top:"19px",left:"71%"},children:(0,d.jsx)("img",{src:"public/img/grafana_icon.svg",alt:"Grafana",width:"80px",style:{position:"absolute",left:"23px",top:"20px"}})})]}),(0,d.jsx)("div",{className:r.container,children:a}),n&&(0,d.jsx)("div",{className:r.footer,children:n})]})}const p=e=>{let{size:t,style:n,children:s}=e;return(0,d.jsx)("div",{style:Object.assign({width:t,height:t,position:"absolute",bottom:0,right:0,borderRadius:"50%"},n),children:s})};var g,m,f,v,b,x,y,w,j,S,C,k,N,O,I=n(70014);function T(e){let{navModel:t}=e;return(0,d.jsx)(o.T,{navModel:t,children:g||(g=(0,d.jsxs)(o.T.Contents,{children:[(0,d.jsx)(I.ServerStats,{}),(0,d.jsx)(R,{editionNotice:"You are running the open-source version of Grafana. You have to install the Enterprise edition in order enable Enterprise features."})]}))})}const $={fontWeight:500,fontSize:"26px",lineHeight:"123%"},R=e=>{let{editionNotice:t}=e;const n=(0,i.wW)(P);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:n.title,children:"Enterprise license"}),(0,d.jsx)(h,{header:"Grafana Enterprise",subheader:"Get your free trial",editionNotice:t,children:(0,d.jsxs)("div",{className:n.column,children:[m||(m=(0,d.jsx)(L,{})),f||(f=(0,d.jsx)(M,{}))]})})]})},P=e=>({column:s.css`
      display: grid;
      grid-template-columns: 100%;
      column-gap: 20px;
      row-gap: 40px;

      @media (min-width: 1050px) {
        grid-template-columns: 50% 50%;
      }
    `,title:s.css`
      margin: ${e.spacing(4)} 0;
    `}),D=()=>(0,d.jsxs)("div",{style:{marginTop:"40px",marginBottom:"30px"},children:[v||(v=(0,d.jsx)("h2",{style:$,children:"Get Grafana Enterprise"})),b||(b=(0,d.jsx)(A,{})),(0,d.jsx)("p",{style:{paddingTop:"12px"},children:"You can use the trial version for free for 30 days. We will remind you about it five days before the trial period ends."})]}),A=()=>x||(x=(0,d.jsx)(r.Qj,{variant:"primary",size:"lg",href:"https://grafana.com/contact?about=grafana-enterprise&utm_source=grafana-upgrade-page",children:"Contact us and get a free trial"})),M=()=>(0,d.jsxs)("div",{children:[y||(y=(0,d.jsx)("h4",{children:"At your service"})),w||(w=(0,d.jsxs)(E,{children:[(0,d.jsx)(V,{title:"Enterprise Plugins",image:"public/img/licensing/plugin_enterprise.svg"}),(0,d.jsx)(V,{title:"Critical SLA: 2 hours",image:"public/img/licensing/sla.svg"}),(0,d.jsxs)(V,{title:"Unlimited Expert Support",image:"public/img/licensing/customer_support.svg",children:["24 x 7 x 365 support via",(0,d.jsxs)(E,{nested:!0,children:[(0,d.jsx)(V,{title:"Email"}),(0,d.jsx)(V,{title:"Private Slack channel"}),(0,d.jsx)(V,{title:"Phone"})]})]}),(0,d.jsx)(V,{title:"Hand-in-hand support",image:"public/img/licensing/handinhand_support.svg",children:"in the upgrade process"})]})),(0,d.jsxs)("div",{style:{marginTop:"20px"},children:[j||(j=(0,d.jsx)("strong",{children:"Also included:"})),S||(S=(0,d.jsx)("br",{})),"Indemnification, working with Grafana Labs on future prioritization, and training from the core Grafana team."]}),C||(C=(0,d.jsx)(D,{}))]}),L=()=>(0,d.jsxs)("div",{style:{paddingRight:"11px"},children:[k||(k=(0,d.jsx)("h4",{children:"Enhanced functionality"})),N||(N=(0,d.jsx)(F,{}))]}),F=()=>O||(O=(0,d.jsxs)(E,{children:[(0,d.jsx)(V,{title:"Data source permissions"}),(0,d.jsx)(V,{title:"Reporting"}),(0,d.jsx)(V,{title:"SAML authentication"}),(0,d.jsx)(V,{title:"Enhanced LDAP integration"}),(0,d.jsx)(V,{title:"Team Sync",children:"LDAP, GitHub OAuth, Auth Proxy, Okta"}),(0,d.jsx)(V,{title:"White labeling"}),(0,d.jsx)(V,{title:"Auditing"}),(0,d.jsx)(V,{title:"Settings updates at runtime"}),(0,d.jsx)(V,{title:"Grafana usage insights",children:(0,d.jsxs)(E,{nested:!0,children:[(0,d.jsx)(V,{title:"Sort dashboards by popularity in search"}),(0,d.jsx)(V,{title:"Find unused dashboards"}),(0,d.jsx)(V,{title:"Dashboard usage stats drawer"}),(0,d.jsx)(V,{title:"Dashboard presence indicators"})]})}),(0,d.jsx)(V,{title:"Enterprise plugins",children:(0,d.jsxs)(E,{nested:!0,children:[(0,d.jsx)(V,{title:"Oracle"}),(0,d.jsx)(V,{title:"Splunk"}),(0,d.jsx)(V,{title:"Service Now"}),(0,d.jsx)(V,{title:"Dynatrace"}),(0,d.jsx)(V,{title:"New Relic"}),(0,d.jsx)(V,{title:"DataDog"}),(0,d.jsx)(V,{title:"AppDynamics"}),(0,d.jsx)(V,{title:"SAP HANA®"}),(0,d.jsx)(V,{title:"Gitlab"}),(0,d.jsx)(V,{title:"Honeycomb"}),(0,d.jsx)(V,{title:"Jira"}),(0,d.jsx)(V,{title:"MongoDB"}),(0,d.jsx)(V,{title:"Salesforce"}),(0,d.jsx)(V,{title:"Snowflake"}),(0,d.jsx)(V,{title:"Wavefront"})]})})]})),E=e=>{let{children:t,nested:n}=e;const a=s.css`
    display: flex;
    flex-direction: column;
    padding-top: 8px;

    > div {
      margin-bottom: ${n?0:8}px;
    }
  `;return(0,d.jsx)("div",{className:a,children:t})},V=e=>{let{children:t,title:n,image:a}=e;const i=a||"public/img/licensing/checkmark.svg",r=s.css`
    display: flex;

    > img {
      display: block;
      height: 22px;
      flex-grow: 0;
      padding-right: 12px;
    }
  `,o=s.css`
    font-weight: 500;
    line-height: 1.7;
  `;return(0,d.jsxs)("div",{className:r,children:[(0,d.jsx)("img",{src:i,alt:""}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:o,children:n}),t]})]})},z=(0,a.connect)((e=>({navModel:(0,l.ht)(e.navIndex,"upgrading")})))(T)},45339:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addExtraFilters:()=>D,default:()=>z});var s,a,i,r,o,l,d,c,u,h,p,g,m=n(52423),f=n(68404),v=n(36635),b=n(16755),x=n(39106),y=n(37625),w=n(8006),j=n(21888),S=n(99500),C=n(1558),k=n(37417),N=n(69980),O=n(68374),I=n(71031),T=n(64850),$=n(37094),R=n(45916);const P=[],D=e=>{P.push(e)},A={fetchUsers:$.uh,changeQuery:$.R5,changePage:$.oO,changeFilter:$.M6},M=(0,v.connect)((e=>({users:e.userListAdmin.users,query:e.userListAdmin.query,showPaging:e.userListAdmin.showPaging,totalPages:e.userListAdmin.totalPages,page:e.userListAdmin.page,filters:e.userListAdmin.filters,isLoading:e.userListAdmin.isLoading})),A),L=e=>`Edit user's ${e} details`,F=(0,f.memo)((e=>{var t;let{user:n,showLicensedRole:s}=e;const a=(0,b.wW)(V),i=`admin/users/edit/${n.id}`;return(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"width-4 text-center link-td",children:(0,R.jsx)("a",{href:i,"aria-label":`Edit user's ${n.name} details`,children:(0,R.jsx)("img",{className:"filter-table__avatar",src:n.avatarUrl,alt:`Avatar for user ${n.name}`})})}),(0,R.jsx)("td",{className:"link-td max-width-10",children:(0,R.jsx)("a",{className:"ellipsis",href:i,title:n.login,"aria-label":L(n.name),children:n.login})}),(0,R.jsx)("td",{className:"link-td max-width-10",children:(0,R.jsx)("a",{className:"ellipsis",href:i,title:n.email,"aria-label":L(n.name),children:n.email})}),(0,R.jsx)("td",{className:"link-td max-width-10",children:(0,R.jsx)("a",{className:"ellipsis",href:i,title:n.name,"aria-label":L(n.name),children:n.name})}),(0,R.jsxs)("td",{className:a.row,title:null!==(t=n.orgs)&&void 0!==t&&t.length?`The user is a member of the following organizations: ${n.orgs.map((e=>e.name)).join(",")}`:void 0,children:[(0,R.jsx)(E,{units:n.orgs,icon:"building"}),n.isAdmin&&(0,R.jsx)("a",{href:i,"aria-label":L(n.name),children:h||(h=(0,R.jsx)(j.u,{placement:"top",content:"Grafana Admin",children:(0,R.jsx)(S.J,{name:"shield"})}))})]}),s&&(0,R.jsx)("td",{className:(0,m.cx)("link-td",a.iconRow),children:(0,R.jsx)("a",{className:"ellipsis",href:i,title:n.name,"aria-label":L(n.name),children:"None"===n.licensedRole?(0,R.jsxs)("span",{className:a.disabled,children:["Not assigned"," ",p||(p=(0,R.jsx)(j.u,{placement:"top",content:"A licensed role will be assigned when this user signs in",children:(0,R.jsx)(S.J,{name:"question-circle"})}))]}):n.licensedRole})}),(0,R.jsx)("td",{className:"link-td",children:n.lastSeenAtAge&&(0,R.jsx)("a",{href:i,"aria-label":`Last seen at ${n.lastSeenAtAge}. Follow to edit user's ${n.name} details.`,children:"10 years"===n.lastSeenAtAge?(0,R.jsx)("span",{className:a.disabled,children:"Never"}):n.lastSeenAtAge})}),(0,R.jsx)("td",{className:"text-right",children:Array.isArray(n.authLabels)&&n.authLabels.length>0&&(0,R.jsx)(N.e,{label:n.authLabels[0],removeIcon:!1,count:0})}),(0,R.jsx)("td",{className:"text-right",children:n.isDisabled&&(g||(g=(0,R.jsx)("span",{className:"label label-tag label-tag--gray",children:"Disabled"})))})]},n.id)}));F.displayName="UserListItem";const E=e=>{let{units:t,icon:n}=e;const s=(0,b.wW)(V);return null!=t&&t.length?t.length>1?(0,R.jsx)(j.u,{placement:"top",content:(0,R.jsx)("div",{className:s.unitTooltip,children:null==t?void 0:t.map((e=>(0,R.jsx)("a",{href:e.url,className:s.link,title:e.name,"aria-label":`Edit ${e.name}`,children:e.name},e.name)))}),children:(0,R.jsxs)("div",{className:s.unitItem,children:[(0,R.jsx)(S.J,{name:n})," ",(0,R.jsx)("span",{children:t.length})]})}):(0,R.jsxs)("a",{href:t[0].url,className:s.unitItem,title:t[0].name,"aria-label":`Edit ${t[0].name}`,children:[(0,R.jsx)(S.J,{name:n})," ",t[0].name]},t[0].name):null},V=e=>({table:m.css`
      margin-top: ${e.spacing(3)};
    `,filter:m.css`
      margin: 0 ${e.spacing(1)};
    `,iconRow:m.css`
      svg {
        margin-left: ${e.spacing(.5)};
      }
    `,row:m.css`
      display: flex;
      align-items: center;
      height: 100% !important;

      a {
        padding: ${e.spacing(.5)} 0 !important;
      }
    `,unitTooltip:m.css`
      display: flex;
      flex-direction: column;
    `,unitItem:m.css`
      cursor: pointer;
      padding: ${e.spacing(.5)} 0;
      margin-right: ${e.spacing(1)};
    `,disabled:m.css`
      color: ${e.colors.text.disabled};
    `,link:m.css`
      color: inherit;
      cursor: pointer;
      text-decoration: underline;
    `}),z=M((e=>{var t;let{fetchUsers:n,query:h,changeQuery:p,users:g,showPaging:v,totalPages:N,page:$,changePage:D,changeFilter:A,filters:M,isLoading:L}=e;const E=(0,b.wW)(V);(0,f.useEffect)((()=>{n()}),[n]);const z=(0,f.useMemo)((()=>g.some((e=>e.licensedRole))),[g]);return(0,R.jsx)(k.T,{navId:"global-users",children:(0,R.jsxs)(k.T.Contents,{children:[(0,R.jsxs)("div",{className:"page-action-bar",children:[(0,R.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,R.jsx)(x.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:h,onChange:p}),(0,R.jsx)(y.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:e=>A({name:"activeLast30Days",value:e}),value:null===(t=M.find((e=>"activeLast30Days"===e.name)))||void 0===t?void 0:t.value,className:E.filter}),P.map(((e,t)=>(0,R.jsx)(e,{filters:M,onChange:A,className:E.filter},t)))]}),O.Vt.hasPermission(T.bW.UsersCreate)&&(s||(s=(0,R.jsx)(w.Qj,{href:"admin/users/create",variant:"primary",children:"New user"})))]}),L?a||(a=(0,R.jsx)(I.Z,{})):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:(0,m.cx)(E.table,"admin-list-table"),children:(0,R.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[i||(i=(0,R.jsx)("th",{})),r||(r=(0,R.jsx)("th",{children:"Login"})),o||(o=(0,R.jsx)("th",{children:"Email"})),l||(l=(0,R.jsx)("th",{children:"Name"})),d||(d=(0,R.jsx)("th",{children:"Belongs to"})),z&&(0,R.jsxs)("th",{children:["Licensed role"," ",(0,R.jsx)(j.u,{placement:"top",content:(0,R.jsxs)(R.Fragment,{children:["Licensed role is based on a user's Org role (i.e. Viewer, Editor, Admin) and their dashboard/folder permissions."," ",(0,R.jsx)("a",{className:E.link,target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/next/enterprise/license/license-restrictions/#active-users-limit",children:"Learn more"})]}),children:c||(c=(0,R.jsx)(S.J,{name:"question-circle"}))})]}),u||(u=(0,R.jsxs)("th",{children:["Last active ",(0,R.jsx)(j.u,{placement:"top",content:"Time since user was seen using Grafana",children:(0,R.jsx)(S.J,{name:"question-circle"})})]})),(0,R.jsx)("th",{style:{width:"1%"}})]})}),(0,R.jsx)("tbody",{children:g.map((e=>(0,R.jsx)(F,{user:e,showLicensedRole:z},e.id)))})]})}),v&&(0,R.jsx)(C.t,{numberOfPages:N,currentPage:$,onNavigate:D})]})]})})}))},37094:(e,t,n)=>{"use strict";n.d(t,{B9:()=>f,CP:()=>O,Dx:()=>v,Fm:()=>k,IS:()=>R,Jk:()=>w,M6:()=>M,Nq:()=>g,PK:()=>p,R5:()=>A,V0:()=>$,Xx:()=>x,Y3:()=>I,_1:()=>C,bN:()=>y,b_:()=>T,h8:()=>b,j4:()=>N,oO:()=>L,tQ:()=>m,uV:()=>j,uh:()=>P});var s=n(82897),a=n(6432),i=n(72677),r=n(93570),o=n(80795),l=n(46782),d=n(68374),c=n(83997),u=n(64850),h=n(43150);function p(e){return async t=>{try{t((0,h.UA)(!1)),await t(function(e){return async t=>{const n=await(0,r.i)().get(`/api/users/${e}`,(0,c.y)());t((0,h.pm)(n))}}(e)),await t(function(e){return async t=>{const n=await(0,r.i)().get(`/api/users/${e}/orgs`);t((0,h.fm)(n))}}(e)),await t(S(e)),l.ZP.ldapEnabled&&(0,i.v)("ldapsync")&&await t(N()),t((0,h.UA)(!0))}catch(e){if(console.error(e),(0,r.kW)(e)){const n={title:e.data.message,body:e.data.error};t((0,h.sL)(n))}}}}function g(e){return async t=>{await(0,r.i)().put(`/api/users/${e.id}`,e),t(p(e.id))}}function m(e,t){return async n=>{const s={password:t};await(0,r.i)().put(`/api/admin/users/${e}/password`,s),n(p(e))}}function f(e){return async t=>{await(0,r.i)().post(`/api/admin/users/${e}/disable`),o.E1.push("/admin/users")}}function v(e){return async t=>{await(0,r.i)().post(`/api/admin/users/${e}/enable`),t(p(e))}}function b(e){return async t=>{await(0,r.i)().delete(`/api/admin/users/${e}`),o.E1.push("/admin/users")}}function x(e,t){return async n=>{const s={isGrafanaAdmin:t};await(0,r.i)().put(`/api/admin/users/${e}/permissions`,s),n(p(e))}}function y(e,t,n){return async s=>{const a={loginOrEmail:e.login,role:n};await(0,r.i)().post(`/api/orgs/${t}/users/`,a),s(p(e.id))}}function w(e,t,n){return async s=>{const a={role:n};await(0,r.i)().patch(`/api/orgs/${t}/users/${e}`,a),s(p(e))}}function j(e,t){return async n=>{await(0,r.i)().delete(`/api/orgs/${t}/users/${e}`),n(p(e))}}function S(e){return async t=>{if(!d.Vt.hasPermission(u.bW.UsersAuthTokenList))return;const n=await(0,r.i)().get(`/api/admin/users/${e}/auth-tokens`);n.reverse();const s=n.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,a.E8)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device})));t((0,h.RC)(s))}}function C(e,t){return async n=>{const s={authTokenId:e};await(0,r.i)().post(`/api/admin/users/${t}/revoke-auth-token`,s),n(S(t))}}function k(e){return async t=>{await(0,r.i)().post(`/api/admin/users/${e}/logout`),t(S(e))}}function N(){return async e=>{const t=d.Vt.hasPermission(u.bW.LDAPStatusRead);if((0,i.v)("ldapsync")&&t){const t=await(0,r.i)().get("/api/admin/ldap-sync-status");e((0,h.CY)(t))}}}function O(e){return async t=>{await(0,r.i)().post(`/api/admin/ldap/sync/${e}`),t(p(e))}}function I(){return async e=>{if(d.Vt.hasPermission(u.bW.LDAPStatusRead))try{const t=await(0,r.i)().get("/api/admin/ldap/status");e((0,h.Ls)(t))}catch(t){if((0,r.kW)(t)){t.isHandled=!0;const n={title:t.data.message,body:t.data.error};e((0,h.y3)(n))}}}}function T(e){return async t=>{try{const n=await(0,r.i)().get(`/api/admin/ldap/${encodeURIComponent(e)}`),{name:s,surname:a,email:i,login:o,isGrafanaAdmin:l,isDisabled:d,roles:c,teams:u}=n,p={info:{name:s,surname:a,email:i,login:o},permissions:{isGrafanaAdmin:l,isDisabled:d},roles:c,teams:u};t((0,h.sJ)(p))}catch(e){if((0,r.kW)(e)){e.isHandled=!0;const n={title:e.data.message,body:e.data.error};t((0,h.eq)()),t((0,h.VB)(n))}}}}function $(){return e=>{e((0,h.WO)())}}function R(){return e=>{e((0,h.WO)()),e((0,h.eq)())}}function P(){return async(e,t)=>{try{const{perPage:n,page:s,query:a,filters:i}=t().userListAdmin,o=await(0,r.i)().get(`/api/users/search?perpage=${n}&page=${s}&query=${a}&${(e=>e.map((e=>Array.isArray(e.value)?e.value.map((t=>`${e.name}=${t.value}`)).join("&"):`${e.name}=${e.value}`)).join("&"))(i)}`);e((0,h.xh)(o))}catch(e){(0,h.k7)(),console.error(e)}}}const D=(0,s.debounce)((e=>e(P())),500);function A(e){return async t=>{t((0,h.tZ)()),t((0,h.aj)(e)),D(t)}}function M(e){return async t=>{t((0,h.tZ)()),t((0,h.qz)(e)),D(t)}}function L(e){return async t=>{t((0,h.tZ)()),t((0,h.PJ)(e)),t(P())}}},43150:(e,t,n)=>{"use strict";n.d(t,{CY:()=>u,Ls:()=>d,PJ:()=>I,RC:()=>x,UA:()=>y,VB:()=>h,WO:()=>o,ZP:()=>$,aj:()=>O,eq:()=>l,fm:()=>b,k7:()=>N,pm:()=>v,qz:()=>T,sJ:()=>p,sL:()=>w,tZ:()=>k,xh:()=>C,y3:()=>c});var s=n(23067);const a=["totalCount","perPage"];const i={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},r=(0,s.oM)({name:"ldap",initialState:i,reducers:{ldapConnectionInfoLoadedAction:(e,t)=>Object.assign({},e,{ldapError:void 0,connectionInfo:t.payload}),ldapFailedAction:(e,t)=>Object.assign({},e,{ldapError:t.payload}),ldapSyncStatusLoadedAction:(e,t)=>Object.assign({},e,{syncInfo:t.payload}),userMappingInfoLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload,userError:void 0}),userMappingInfoFailedAction:(e,t)=>Object.assign({},e,{user:void 0,userError:t.payload}),clearUserMappingInfoAction:(e,t)=>Object.assign({},e,{user:void 0}),clearUserErrorAction:(e,t)=>Object.assign({},e,{userError:void 0})}}),{clearUserErrorAction:o,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:d,ldapFailedAction:c,ldapSyncStatusLoadedAction:u,userMappingInfoFailedAction:h,userMappingInfoLoadedAction:p}=r.actions,g=r.reducer,m={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},f=(0,s.oM)({name:"userAdmin",initialState:m,reducers:{userProfileLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload}),userOrgsLoadedAction:(e,t)=>Object.assign({},e,{orgs:t.payload}),userSessionsLoadedAction:(e,t)=>Object.assign({},e,{sessions:t.payload}),userAdminPageLoadedAction:(e,t)=>Object.assign({},e,{isLoading:!t.payload}),userAdminPageFailedAction:(e,t)=>Object.assign({},e,{error:t.payload,isLoading:!1})}}),{userProfileLoadedAction:v,userOrgsLoadedAction:b,userSessionsLoadedAction:x,userAdminPageLoadedAction:y,userAdminPageFailedAction:w}=f.actions,j=f.reducer,S=(0,s.oM)({name:"userListAdmin",initialState:{users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},reducers:{usersFetched:(e,t)=>{const n=t.payload,{totalCount:s,perPage:i}=n,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,a),o=Math.ceil(s/i);return Object.assign({},e,r,{totalPages:o,perPage:i,showPaging:o>1,isLoading:!1})},usersFetchBegin:e=>Object.assign({},e,{isLoading:!0}),usersFetchEnd:e=>Object.assign({},e,{isLoading:!1}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),filterChanged:(e,t)=>{const{name:n,value:s}=t.payload;return e.filters.some((e=>e.name===n))?Object.assign({},e,{page:0,filters:e.filters.map((e=>e.name===n?Object.assign({},e,{value:s}):e))}):Object.assign({},e,{page:0,filters:[...e.filters,t.payload]})}}}),{usersFetched:C,usersFetchBegin:k,usersFetchEnd:N,queryChanged:O,pageChanged:I,filterChanged:T}=S.actions,$={ldap:g,userAdmin:j,userListAdmin:S.reducer}},54168:(e,t,n)=>{"use strict";n.d(t,{Yb:()=>a,d5:()=>i});var s=n(65737);const a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;const i=()=>function(){var e;const t=null===(e=s.v.licenseInfo)||void 0===e?void 0:e.trialExpiry;return!!(t&&t>0)}()&&s.v.featureToggles.featureHighlights},50243:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,Z:()=>l});var s=n(82897),a=n(11598);const i=new a.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]});let r;!function(e){e.IsAbove="gt",e.IsBelow="lt",e.IsOutsideRange="outside_range",e.IsWithinRange="within_range",e.HasNoValue="no_value"}(r||(r={}));function o(e,t){return(0,s.reduce)(e,((e,t)=>(void 0!==t.metric&&void 0!==t.value&&e.push(t.metric+"="+t.value),void 0!==t.Metric&&void 0!==t.Value&&e.push(t.Metric+"="+t.Value),e)),[]).join(t)}const l={alertQueryDef:i,getStateDisplayModel:function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"").split(" ")[0]}(e);switch(t){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}},conditionTypes:[{text:"Query",value:"query"}],evalFunctions:[{value:r.IsAbove,text:"IS ABOVE"},{value:r.IsBelow,text:"IS BELOW"},{value:r.IsOutsideRange,text:"IS OUTSIDE RANGE"},{value:r.IsWithinRange,text:"IS WITHIN RANGE"},{value:r.HasNoValue,text:"HAS NO VALUE"}],evalOperators:[{text:"OR",value:"or"},{text:"AND",value:"and"}],noDataModes:[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],executionErrorModes:[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}],reducerTypes:[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],createReducerPart:function(e){const t=new a.zU({type:e.type,defaultParams:[]});return new a.XN(e,t)},getAlertAnnotationInfo:function(e){return(0,s.isArray)(e.data)?o(e.data,", "):(0,s.isArray)(e.data.evalMatches)?o(e.data.evalMatches,", "):e.data.error?"Error: "+e.data.error:""},alertStateSortScore:{alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5}}},11598:(e,t,n)=>{"use strict";n.d(t,{C7:()=>l,D:()=>o,XN:()=>r,zU:()=>i});var s=n(82897);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){a(this,"type",void 0),a(this,"params",void 0),a(this,"defaultParams",void 0),a(this,"renderer",void 0),a(this,"category",void 0),a(this,"addStrategy",void 0),this.type=e.type,this.params=e.params,this.defaultParams=e.defaultParams,this.renderer=e.renderer,this.category=e.category,this.addStrategy=e.addStrategy}}class r{constructor(e,t){if(a(this,"part",void 0),a(this,"def",void 0),a(this,"params",void 0),a(this,"text",void 0),this.part=e,this.def=t,!this.def)throw{message:"Could not find query part "+e.type};e.params=e.params||(0,s.clone)(this.def.defaultParams),this.params=e.params,this.text="",this.updateText()}render(e){return this.def.renderer(this,e)}hasMultipleParamsInString(e,t){return-1!==e.indexOf(",")&&(this.def.params[t+1]&&this.def.params[t+1].optional)}updateParam(e,t){this.hasMultipleParamsInString(e,t)?(0,s.each)(e.split(","),((e,t)=>{this.updateParam(e.trim(),t)})):(""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params,this.updateText())}updateText(){if(0===this.params.length)return void(this.text=this.def.type+"()");let e=this.def.type+"(";e+=this.params.join(", "),e+=")",this.text=e}}function o(e,t){const n=e.def.type+"(",a=(0,s.map)(e.params,((t,n)=>{const s=e.def.params[n];return"time"===s.type&&"auto"===t&&(t="$__interval"),"single"===s.quote?"'"+t+"'":"double"===s.quote?'"'+t+'"':t}));return t&&a.unshift(t),n+a.join(", ")+")"}function l(e,t){return t+" "+e.params[0]}},82983:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>x,Gr:()=>c,gz:()=>p,Oc:()=>g,K:()=>v,J0:()=>b,T2:()=>f,ql:()=>m});var s=n(23067),a=n(88246),i=n(31259),r=n(5302),o=n(64834);const l=(0,i.combineReducers)({dataSources:(0,r.jK)("dataSources",o.nw,(e=>{let{rulesSourceName:t}=e;return t})).reducer,promRules:(0,r.jK)("promRules",o.y6,(e=>{let{rulesSourceName:t}=e;return t})).reducer,rulerRules:(0,r.jK)("rulerRules",o.UR,(e=>{let{rulesSourceName:t}=e;return t})).reducer,amConfigs:(0,r.jK)("amConfigs",o.Yh,(e=>e)).reducer,silences:(0,r.jK)("silences",o.je,(e=>e)).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,r.i6)("saveRule",o.wy).reducer,existingRule:(0,r.i6)("existingRule",o.on).reducer}),grafanaNotifiers:(0,r.i6)("grafanaNotifiers",o.Vj).reducer,saveAMConfig:(0,r.i6)("saveAMConfig",o.mM).reducer,deleteAMConfig:(0,r.i6)("deleteAMConfig",o.Nc).reducer,updateSilence:(0,r.i6)("updateSilence",o.QY).reducer,amAlerts:(0,r.jK)("amAlerts",o.dB,(e=>e)).reducer,folders:(0,r.jK)("folders",o.vL,(e=>e)).reducer,amAlertGroups:(0,r.jK)("amAlertGroups",o.mS,(e=>e)).reducer,testReceivers:(0,r.i6)("testReceivers",o.D8).reducer,updateLotexNamespaceAndGroup:(0,r.i6)("updateLotexNamespaceAndGroup",o.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,r.i6)("alertmanagerConfig",o.wE).reducer,discoveredAlertmanagers:(0,r.i6)("discoveredAlertmanagers",o.zy).reducer}),managedAlertStateHistory:(0,r.i6)("managedAlertStateHistory",o.Ms).reducer});var d=n(50243);const c={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};const u=(0,s.oM)({name:"alertRules",initialState:{items:[],searchQuery:"",isLoading:!1},reducers:{loadAlertRules:e=>Object.assign({},e,{isLoading:!0}),loadedAlertRules:(e,t)=>{const n=t.payload.map((e=>function(e,t){const n=d.Z.getStateDisplayModel(t),s=Object.assign({},e,{stateText:n.text,stateIcon:n.iconClass,stateClass:n.stateClass,stateAge:(0,a.CQ)(e.newStateDate).fromNow(!0)});return"paused"!==s.state&&(s.executionError&&(s.info="Execution Error: "+s.executionError),s.evalData&&s.evalData.noData&&(s.info="Query returned no data")),s}(e,e.state)));return Object.assign({},e,{items:n,isLoading:!1})},setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),h=(0,s.oM)({name:"notificationChannel",initialState:c,reducers:{setNotificationChannels:(e,t)=>{return Object.assign({},e,{notificationChannelTypes:(n=t.payload,n.map((e=>Object.assign({value:e.type,label:e.name},e,{typeName:e.type}))).sort(((e,t)=>e.name>t.name?1:-1))),notifiers:t.payload});var n},notificationChannelLoaded:(e,t)=>{const n=t.payload,s=e.notifiers.find((e=>e.type===n.type)).options.filter((e=>e.secure));return s.length>0&&s.some((e=>""!==n.settings[e.propertyName]))?function(e,t,n){const s={},a={};return n.forEach((e=>{a[e.propertyName]=t.settings[e.propertyName],s[e.propertyName]=""})),Object.assign({},e,{notificationChannel:Object.assign({},t,{settings:Object.assign({},t.settings,s),secureSettings:Object.assign({},a)})})}(e,t.payload,s):Object.assign({},e,{notificationChannel:n})},resetSecureField:(e,t)=>Object.assign({},e,{notificationChannel:Object.assign({},e.notificationChannel,{secureFields:Object.assign({},e.notificationChannel.secureFields,{[t.payload]:!1})})})}}),{loadAlertRules:p,loadedAlertRules:g,setSearchQuery:m}=u.actions,{setNotificationChannels:f,notificationChannelLoaded:v,resetSecureField:b}=h.actions,x={alertRules:u.reducer,notificationChannel:h.reducer,unifiedAlerting:l}},40833:(e,t,n)=>{"use strict";n.d(t,{PN:()=>o,pM:()=>l,z7:()=>r});var s=n(2358),a=n(14327),i=n(65737);const r={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully"};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.v.grafanaJavascriptAgent.enabled&&s.s.api.pushLog([e],{level:a.in.INFO,context:Object.assign({},t,{module:"Alerting"})})}function l(e,t,n){return async function(){const s=performance.now(),a=await e(...arguments);return o(t,Object.assign({loadTimeMs:(performance.now()-s).toFixed(0)},n)),a}}},47175:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var s=n(49153),a=n(3363),i=n(93570),r=n(40833);const o=["data"];const l=(0,s.LC)({reducerPath:"alertingApi",baseQuery:async e=>{try{var t;const n=performance.now(),s=await(0,a.n)((0,i.i)().fetch(e)),{data:l}=s,d=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(s,o);return(0,r.PN)("Request finished",{loadTimeMs:(performance.now()-n).toFixed(0),url:e.url,method:null!==(t=e.method)&&void 0!==t?t:"",responseStatus:d.statusText}),{data:l,meta:d}}catch(e){return{error:e}}},tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},60897:(e,t,n)=>{"use strict";n.d(t,{C$:()=>c,SJ:()=>p,WG:()=>u,Zy:()=>h});var s=n(3363),a=n(93570),i=n(22587),r=n(74846),o=n(43271),l=n(37937),d=n(14995);async function c(e){if(e===o.GC)return{features:{rulerApiEnabled:!0}};const t=(0,o.c$)(e);if(!t)throw new Error(`Cannot find data source configuration for ${e}`);const{url:n,name:s,type:a}=t;if(!n)throw new Error("The data source url cannot be empty.");if("prometheus"!==a&&"loki"!==a)throw new Error(`The build info request is not available for ${a}. Only 'prometheus' and 'loki' are supported`);return u({name:s,url:n,type:a})}async function u(e){const{url:t,name:n,type:s}=e,o="loki"===s?void 0:await g(t);if(!(void 0!==o)){if(!await async function(e){try{return await(0,l.j)(e),!0}catch(e){return!1}}(n))throw new Error(`Unable to fetch alert rules. Is the ${n} data source properly configured?`);const e=await async function(e){try{return await(0,d.jw)(e),!0}catch(e){if(t=e,(0,a.kW)(t)?(null===(n=t.data.message)||void 0===n?void 0:n.includes("GetRuleGroup unsupported in rule local store"))||(null===(s=t.data.message)||void 0===s?void 0:s.includes("page not found"))||(null===(i=t.data.message)||void 0===i?void 0:i.includes(r.jZ)):t instanceof Error&&(null===(o=t.message)||void 0===o?void 0:o.includes("404 from rules config endpoint")))return!1;throw e}var t,n,s,i,o}(n);return{application:i.T8.Cortex,features:{rulerApiEnabled:e}}}const{features:c}=o.data;return c?{application:i.T8.Mimir,features:{rulerApiEnabled:"true"===(null==c?void 0:c.ruler_config_api)}}:{application:i.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function h(e){if(e===o.GC)return{lazyConfigInit:!1};const t=function(e){const t=(0,o.c$)(e);if(!t)throw new Error(`Cannot find data source configuration for ${e}`);return t}(e),{url:n,type:s}=t;if(!n)throw new Error("The data source url cannot be empty.");if("alertmanager"!==s)throw new Error(`Alertmanager feature discovery is not available for ${s}. Only 'alertmanager' type is supported`);return await p(n)}async function p(e){try{var t;const n=await g(e);return{lazyConfigInit:"Grafana Mimir"===(null==n||null===(t=n.data)||void 0===t?void 0:t.application)}}catch(e){return{lazyConfigInit:!1}}}async function g(e){const t=await(0,s.n)((0,a.i)().fetch({url:`${e}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch((e=>{if(!("status"in e)||404!==e.status)throw e}));return null==t?void 0:t.data}},92431:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var s=n(47175),a=n(60897);const i=s.C.injectEndpoints({endpoints:e=>({discoverAmFeatures:e.query({queryFn:async e=>{let{amSourceName:t}=e;try{return{data:await(0,a.Zy)(t)}}catch(e){return{error:e}}}})})})},84524:(e,t,n)=>{"use strict";n.d(t,{QE:()=>d,i9:()=>r});var s=n(3363),a=n(93570),i=n(43271);function r(){return(0,a.i)().get("/api/alert-notifiers")}const o=e=>{const t={receivers:{},errorCount:0};e.forEach((e=>{t.receivers[e.name]={active:e.active,notifiers:{},errorCount:0};const n=t.receivers[e.name];e.integrations.forEach((e=>{Boolean(null==e?void 0:e.lastNotifyAttemptError)&&(n.errorCount+=1);const t=l(e.name);t&&(n.notifiers[t]||(n.notifiers[t]=[]),n.notifiers[t].push(e))}))}));const n=Object.values(t.receivers).reduce(((e,t)=>e+t.errorCount),0);return Object.assign({},t,{errorCount:n})},l=e=>{var t;return null===(t=(e=>{const t=e.match(/^(\w+)(\[\d+\])?$/);return t?{type:t[1],index:t[2]}:{type:e,index:void 0}})(e))||void 0===t?void 0:t.type};async function d(e){try{const t=await(0,s.n)((0,a.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(e)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return o(t.data)}catch(e){return o([])}}},37937:(e,t,n)=>{"use strict";n.d(t,{hd:()=>r,j:()=>o});var s=n(3363),a=n(93570),i=n(43271);function r(e,t){return null!=t&&t.dashboardUID&&(e.set("dashboard_uid",t.dashboardUID),null!=t&&t.panelId&&e.set("panel_id",String(t.panelId))),Object.fromEntries(e)}async function o(e,t){if(null!=t&&t.dashboardUID&&e!==i.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:n,params:o}=function(e){const{dataSourceName:t}=e;return{rules:e=>{const n=r(new URLSearchParams,e);return{url:`/api/prometheus/${(0,i.gt)(t)}/api/v1/rules`,params:n}}}}({dataSourceName:e}).rules(t),l=await(0,s.n)((0,a.i)().fetch({url:n,params:o,showErrorAlert:!1,showSuccessAlert:!1})).catch((e=>{if("status"in e&&404===e.status)throw new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?");throw e})),d={};return l.data.data.groups.forEach((t=>{t.rules.forEach((e=>{e.query=e.query||""})),d[t.file]?d[t.file].groups.push(t):d[t.file]={dataSourceName:e,name:t.file,groups:[t]}})),Object.values(d)}},14995:(e,t,n)=>{"use strict";n.d(t,{BC:()=>p,P4:()=>d,jJ:()=>h,jw:()=>u,m6:()=>c,sz:()=>m});var s=n(3363),a=n(93570),i=n(74846),r=n(43271),o=n(37937);function l(e){const t=`${`/api/ruler/${(0,r.gt)(e.dataSourceName)}`}/api/v1/rules`,n=new URLSearchParams;return n.set("subtype","legacy"===e.apiVersion?"cortex":"mimir"),{rules:e=>{const s=(0,o.hd)(n,e);return{path:`${t}`,params:s}},namespace:e=>({path:`${t}/${encodeURIComponent(e)}`,params:Object.fromEntries(n)}),namespaceGroup:(e,s)=>({path:`${t}/${encodeURIComponent(e)}/${encodeURIComponent(s)}`,params:Object.fromEntries(n)})}}async function d(e,t,n){const{path:i,params:r}=l(e).namespace(t);await(0,s.n)((0,a.i)().fetch({method:"POST",url:i,data:n,showErrorAlert:!1,showSuccessAlert:!1,params:r}))}async function c(e,t){if(null!=t&&t.dashboardUID&&e.dataSourceName!==r.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:n,params:s}=l(e).rules(t);return g(n,{},s)}async function u(e){return g(`/api/ruler/${(0,r.gt)(e)}/api/v1/rules/test/test`,null)}async function h(e,t,n){const{path:s,params:a}=l(e).namespaceGroup(t,n);return g(s,null,a)}async function p(e,t,n){const{path:i,params:r}=l(e).namespaceGroup(t,n);await(0,s.n)((0,a.i)().fetch({url:i,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:r}))}async function g(e,t,n){try{return(await(0,s.n)((0,a.i)().fetch({url:e,showErrorAlert:!1,showSuccessAlert:!1,params:n}))).data}catch(e){if(!function(e){const t=null!=e.data;return Number.isFinite(e.status)&&t}(e))throw e;if(function(e){var t,n;return 404===e.status&&((null===(t=e.data.message)||void 0===t?void 0:t.includes("group does not exist"))||(null===(n=e.data.message)||void 0===n?void 0:n.includes("no rule groups found")))}(e))return t;if(function(e){var t;return 404===e.status||500===e.status&&(null===(t=e.data.message)||void 0===t?void 0:t.includes("unexpected content type from upstream. expected YAML, got text/html"))}(e))throw Object.assign({},e,{data:Object.assign({},e.data,{message:i.jZ})});throw e}}async function m(e,t){const{path:n,params:i}=l(e).namespace(t);await(0,s.n)((0,a.i)().fetch({method:"DELETE",url:n,showErrorAlert:!1,showSuccessAlert:!1,params:i}))}},68143:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(23734),r=n(45916);const o=e=>{let{labelKey:t,value:n,operator:s="=",onRemoveLabel:o}=e;const d=(0,a.wW)(l);return(0,r.jsxs)("div",{className:d.wrapper,children:[t,s,n,!!o&&(0,r.jsx)(i.h,{name:"times",size:"xs",onClick:o})]})},l=e=>({wrapper:s.css`
    padding: ${e.spacing(.5,1)};
    border-radius: ${e.shape.borderRadius(1)};
    border: solid 1px ${e.colors.border.medium};
    font-size: ${e.typography.bodySmall.fontSize};
    background-color: ${e.colors.background.secondary};
    font-weight: ${e.typography.fontWeightBold};
    color: ${e.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},90062:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});n(68404);var s=n(76961),a=n(45916);const i=e=>{let{labels:t,className:n}=e;const i=Object.entries(t).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))}));return(0,a.jsx)("div",{className:n,children:(0,a.jsx)(s.P,{tags:Object.values(i).map((e=>{let[t,n]=e;return`${t}=${n}`}))})})}},39833:(e,t,n)=>{"use strict";n.d(t,{P:()=>c});var s=n(52423),a=n(68404),i=n(16755),r=n(65678),o=n(70917),l=n(43271),d=n(45916);const c=e=>{let{onChange:t,current:n,dataSources:s,disabled:c=!1}=e;const h=(0,i.wW)(u),p=(0,a.useMemo)((()=>s.map((e=>{return{label:(t=e,t.name===l.GC?"Grafana":t.name.slice(0,37)),value:e.name,imgUrl:e.imgUrl,meta:e.meta};var t}))),[s]);return(0,d.jsx)(r.g,{className:h.field,label:c?"Alertmanager":"Choose Alertmanager",disabled:c||1===p.length,"data-testid":"alertmanager-picker",children:(0,d.jsx)(o.Ph,{"aria-label":c?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:e=>e.value&&t(e.value),options:p,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:n,getOptionLabel:e=>e.label})})},u=e=>({field:s.css`
    margin-bottom: ${e.spacing(4)};
  `})},34087:(e,t,n)=>{"use strict";n.d(t,{a:()=>h});var s=n(52423),a=(n(68404),n(21888)),i=n(16755),r=n(74846),o=n(95018),l=n(98492),d=n(12547),c=n(45916);const u=["message","description"],h=e=>{let{annotationKey:t,value:n}=e;const s=r.vY[t]?(0,c.jsx)(a.u,{content:t,placement:"top",theme:"info",children:(0,c.jsx)("span",{children:r.vY[t]})}):t;return(0,c.jsx)(o.C,{label:s,horizontal:!0,children:(0,c.jsx)(p,{annotationKey:t,value:n})})},p=e=>{let{annotationKey:t,value:n}=e;const s=(0,i.wW)(g),a=u.includes(t),r=n&&n.startsWith("http"),o=(0,c.jsx)(l.Z,{input:n,delimiter:["{{","}}"]});return a?(0,c.jsx)(d.t,{className:s.well,children:o}):r?(0,c.jsx)("a",{href:n,target:"__blank",className:s.link,children:n}):(0,c.jsx)(c.Fragment,{children:o})},g=e=>({well:s.css`
    word-break: break-word;
  `,link:s.css`
    word-break: break-all;
    color: ${e.colors.primary.text};
  `})},23542:(e,t,n)=>{"use strict";n.d(t,{U:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(8006),r=n(45916);const o=["isCollapsed","onToggle","idControlled","className","text","size"];const l=e=>{let{isCollapsed:t,onToggle:n,idControlled:l,className:c,text:u,size:h="xl"}=e,p=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const g=(0,a.wW)(d);return(0,r.jsx)(i.zx,Object.assign({type:"button",fill:"text",variant:"secondary","aria-expanded":!t,"aria-controls":l,className:(0,s.cx)(g.expandButton,c),icon:t?"angle-right":"angle-down",onClick:()=>n(!t)},p,{children:u}))},d=e=>({expandButton:s.css`
    margin-right: ${e.spacing(1)};
  `})},95018:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{className:t,label:n,horizontal:r,children:l}=e;const d=(0,a.wW)(o);return(0,i.jsxs)("div",{className:(0,s.cx)(t,d.field,r?d.fieldHorizontal:d.fieldVertical),children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("div",{children:l})]})},o=e=>({fieldHorizontal:s.css`
    flex-direction: row;
    ${e.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:s.css`
    flex-direction: column;
  `,field:s.css`
    display: flex;
    margin: ${e.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${e.spacing(1)};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${e.colors.text.secondary};
    }
  `})},39440:(e,t,n)=>{"use strict";n.d(t,{t:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(23734),o=n(1558),l=n(13),d=n(97536),c=n(45916);const u=e=>{var t;let{cols:n,items:u,isExpandable:p=!1,onCollapse:g,onExpand:m,isExpanded:f,renderExpandedContent:v,testIdGenerator:b,pagination:x,paginationStyles:y,renderPrefixCell:w,renderPrefixHeader:j,footerRow:S}=e;const C=(0,i.wW)(d.Z);if((g||m||f)&&!(g&&m&&f))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((p||v)&&(!p||!v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const k=(0,i.wW)(h(n,p,!!j)),[N,O]=(0,a.useState)([]),I=null!==(t=null==x?void 0:x.itemsPerPage)&&void 0!==t?t:u.length,{page:T,numberOfPages:$,onPageChange:R,pageItems:P}=(0,l.h)(u,1,I);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:k.container,"data-testid":"dynamic-table",children:[(0,c.jsxs)("div",{className:k.row,"data-testid":"header",children:[j&&j(),p&&(0,c.jsx)("div",{className:k.cell}),n.map((e=>(0,c.jsx)("div",{className:k.cell,children:e.label},e.id)))]}),P.map(((e,t)=>{var a;const i=f?f(e):N.includes(e.id);return(0,c.jsxs)("div",{className:k.row,"data-testid":null!==(a=null==b?void 0:b(e,t))&&void 0!==a?a:"row",children:[w&&w(e,t,u),p&&(0,c.jsx)("div",{className:(0,s.cx)(k.cell,k.expandCell),children:(0,c.jsx)(r.h,{"aria-label":(i?"Collapse":"Expand")+" row",size:"xl","data-testid":"collapse-toggle",className:k.expandButton,name:i?"angle-down":"angle-right",onClick:()=>(e=>{f&&g&&m?f(e)?g(e):m(e):O(N.includes(e.id)?N.filter((t=>t!==e.id)):[...N,e.id])})(e),type:"button"})}),n.map((n=>(0,c.jsx)("div",{className:(0,s.cx)(k.cell,k.bodyCell),"data-column":n.label,children:n.renderCell(e,t)},`${e.id}-${n.id}`))),i&&v&&(0,c.jsx)("div",{className:k.expandedContentRow,"data-testid":"expanded-content",children:v(e,t,u)})]},`${e.id}-${t}`)})),S&&(0,c.jsx)("div",{className:(0,s.cx)(k.row,k.footerRow),children:S})]}),x&&(0,c.jsx)(o.t,{className:(0,s.cx)(C,y),currentPage:T,numberOfPages:$,onNavigate:R,hideWhenSinglePage:!0})]})},h=(e,t,n)=>{const a=e.map((e=>e.size?"number"==typeof e.size?`${e.size}fr`:e.size:"auto"));return t&&a.unshift("calc(1em + 16px)"),n&&a.unshift("0"),e=>({container:s.css`
      border: 1px solid ${e.colors.border.strong};
      border-radius: 2px;
      color: ${e.colors.text.secondary};
    `,row:s.css`
      display: grid;
      grid-template-columns: ${a.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${e.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${e.colors.background.primary};
      }

      ${e.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${e.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${n?"\n            & > *:first-child {\n              display: none;\n            }\n          ":""}
      }
    `,footerRow:s.css`
      display: flex;
      padding: ${e.spacing(1)};
    `,cell:s.css`
      align-items: center;
      padding: ${e.spacing(1)};

      ${e.breakpoints.down("sm")} {
        padding: ${e.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:s.css`
      overflow: hidden;

      ${e.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${e.colors.text.primary};
        }
      }
    `,expandCell:s.css`
      justify-content: center;

      ${e.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:s.css`
      grid-column-end: ${a.length+1};
      grid-column-start: ${n?3:2};
      grid-row: 2;
      padding: 0 ${e.spacing(3)} 0 ${e.spacing(1)};
      position: relative;

      ${e.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${e.colors.border.strong};
        grid-row: auto;
        padding: ${e.spacing(1)} 0 0 0;
      }
    `,expandButton:s.css`
      margin-right: 0;
      display: block;
    `})}},75928:(e,t,n)=>{"use strict";n.d(t,{z:()=>h});var s=n(52423),a=n(9085),i=n.n(a),r=n(68404),o=n(16755),l=n(43259),d=n(5762),c=n(45916);const u=["children","content","wrapperClassName","disabled"];const h=e=>{let{children:t,content:n,wrapperClassName:s,disabled:a=!1}=e,h=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u);const g=(0,r.useRef)(null),m=(0,o.wW)(p);return a?t:(0,c.jsx)(l.D,{content:n,hideAfter:100,children:(e,n,a)=>(0,c.jsxs)(c.Fragment,{children:[g.current&&(0,c.jsx)(d.J,Object.assign({},a,h,{wrapperClassName:i()(m.popover,s),onMouseLeave:n,onMouseEnter:e,referenceElement:g.current})),r.cloneElement(t,{ref:g,onMouseEnter:e,onMouseLeave:n})]})})},p=e=>({popover:s.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};

    padding: ${e.spacing(1)};
  `})},32328:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});n(68404);var s,a=n(65737),i=n(2843),r=n(45916);const o=()=>(0,r.jsxs)(i.b,{severity:"warning",title:"Global evalutation interval limit exceeded",children:["A minimum evaluation interval of ",(0,r.jsx)("strong",{children:a.v.unifiedAlerting.minInterval})," has been configured in Grafana.",s||(s=(0,r.jsx)("br",{})),"Please contact the administrator to configure a lower interval."]})},54743:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{children:t,state:n,size:r="md"}=e;const l=(0,a.wW)(o);return(0,i.jsx)("span",{className:(0,s.cx)(l.common,l[n],l[r]),children:t||n})},o=e=>({common:s.css`
    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${e.typography.fontWeightBold};
  `,good:s.css`
    background-color: ${e.colors.success.main};
    border: solid 1px ${e.colors.success.main};
    color: ${e.colors.success.contrastText};
  `,warning:s.css`
    background-color: ${e.colors.warning.main};
    border: solid 1px ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,bad:s.css`
    background-color: ${e.colors.error.main};
    border: solid 1px ${e.colors.error.main};
    color: ${e.colors.error.contrastText};
  `,neutral:s.css`
    background-color: ${e.colors.secondary.main};
    border: solid 1px ${e.colors.secondary.main};
    color: ${e.colors.secondary.contrastText};
  `,info:s.css`
    background-color: ${e.colors.primary.main};
    border: solid 1px ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `,md:s.css`
    padding: ${e.spacing(.5,1)};
    min-width: ${e.spacing(8)};
  `,sm:s.css`
    padding: ${e.spacing(.3,.5)};
    min-width: 52px;
  `})},98492:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(52423),a=(n(68404),n(16755)),i=n(64313),r=n(75928),o=n(72770),l=n(45916);const d=["$",".",'"'];function c(e){let{input:t,delimiter:n=["{{","}}"]}=e;const s=(0,a.wW)(p),[i,r]=n,c=new RegExp(`(?<before>.*?)(${i}(?<token>.*?)${r}|$)`,"gm"),g=t.split("\n"),m=[];return g.forEach(((e,t)=>{Array.from(e.matchAll(c)).forEach(((e,t)=>{var n,s,a;const c=null===(n=e.groups)||void 0===n?void 0:n.before,p=null===(s=e.groups)||void 0===s||null===(a=s.token)||void 0===a?void 0:a.trim();if(c&&m.push((0,l.jsx)("span",{children:c},`${t}-before`)),p){const e=function(e){let t;t=function(e){return d.some((t=>e.startsWith(t)))}(e)?u.Variable:function(e){return o.keywords.some((t=>e.startsWith(t)))}(e)?u.Keyword:function(e){return o.builtinFunctions.some((t=>e.startsWith(t)))}(e)?u.Function:u.Unknown;return t}(p),n=e===u.Variable?p:"",s=`${i} ${p} ${r}`;m.push((0,l.jsx)(h,{content:s,type:e,description:n},`${t}-token`))}})),m.push((0,l.jsx)("br",{},`${t}-newline`))})),(0,l.jsx)("span",{className:s.wrapper,children:m})}var u;function h(e){let{content:t,description:n,type:s}=e;const o=(0,a.wW)(p),d=!1===Boolean(s);return(0,l.jsx)(r.z,{placement:"top-start",disabled:d,content:(0,l.jsxs)("div",{className:o.hoverTokenItem,children:[(0,l.jsx)(i.C,{text:(0,l.jsx)(l.Fragment,{children:s}),color:"blue"})," ",n&&(0,l.jsx)("code",{children:n})]}),children:(0,l.jsx)("span",{children:(0,l.jsx)(i.C,{className:o.token,text:t,color:"blue"})})})}!function(e){e.Variable="variable",e.Function="function",e.Keyword="keyword",e.Unknown="unknown"}(u||(u={}));const p=e=>({wrapper:s.css`
    white-space: pre-wrap;
  `,token:s.css`
    cursor: default;
    font-family: ${e.typography.fontFamilyMonospace};
  `,popover:s.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};

    padding: ${e.spacing(1)};
  `,hoverTokenItem:s.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${e.spacing(1)};
  `})},12547:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=e=>{let{children:t,className:n}=e;const r=(0,a.wW)(o);return(0,i.jsx)("div",{className:(0,s.cx)(r.wrapper,n),children:t})},o=e=>({wrapper:s.css`
    background-color: ${e.components.panel.background};
    border: solid 1px ${e.components.input.borderColor};
    border-radius: ${e.shape.borderRadius(1)};
    padding: ${e.spacing(.5,1)};
    font-family: ${e.typography.fontFamilyMonospace};
  `})},27481:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(64681),a=n.n(s),i=(n(68404),n(16755)),r=n(47659),o=n(45916);const l=e=>{let{group:t}=e;const n=(0,i.wW)(r.r),s=t.alerts.length,l=t.alerts.reduce(((e,t)=>(e[t.status.state]?e[t.status.state]+=1:e[t.status.state]=1,e)),{});return(0,o.jsxs)("div",{children:[`${s} ${a()("alert",s)}: `,Object.entries(l).map(((e,s)=>{let[a,i]=e;return(0,o.jsxs)("span",{className:n[a],children:[s>0&&", ",`${i} ${a}`]},`${JSON.stringify(t.labels)}-notifications-${s}`)}))]})}},72770:(e,t,n)=>{"use strict";var s;let a;n.r(t),n.d(t,{AlertmanagerTemplateFunction:()=>a,availableAlertManagerFunctions:()=>i,builtinFunctions:()=>r,conf:()=>d,keywords:()=>o,language:()=>l}),function(e){e.Delimiter="delimiter",e.Keyword="keyword",e.Function="type.identifier",e.String="string",e.Variable="variable.name",e.Number="number",e.Comment="comment",e.Operator="operator",e.Identifier="idenfifier"}(s||(s={})),function(e){e.toUpper="toUpper",e.toLower="toLower",e.title="title",e.join="join",e.match="match",e.safeHtml="safeHtml",e.reReplaceAll="reReplaceAll",e.stringSlice="stringSlice"}(a||(a={}));const i=Object.values(a),r=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery","eq","ne","lt","le","gt","ge"],o=["define","if","else","end","range","break","continue","template","block","with"],l={defaultToken:"",keywords:o,functions:[...r,...i],operators:["|"],tokenizer:{root:[[/"/,s.String,"@string"],[/`/,s.String,"@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,s.Number],[/\d/,s.Number],[/[;,.]/,s.Delimiter],[/{{-?/,s.Delimiter],[/-?}}/,s.Delimiter],[/\.([A-Za-z]+)?/,s.Variable],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:s.Keyword},"@functions":{token:s.Function},"@default":s.Identifier}}],[/\/\*.*\*\//,s.Comment]],string:[[/[^\\"]+/,s.String],[/\\./,"string.escape.invalid"],[/"/,s.String,"@pop"]],rawstring:[[/[^\`]/,s.String],[/`/,s.String,"@pop"]]}},d={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},51928:(e,t,n)=>{"use strict";n.d(t,{wO:()=>I,Xr:()=>N});var s=n(52423),a=n(68404),i=n(59052),r=n(16755),o=n(65678),l=n(66946),d=n(4645),c=n(35258),u=n(9751),h=n(57938),p=n(23542),g=n(32328),m=n(70917),f=n(22587),v=n(45916);const b=["includeNoData","includeError"];const x=[{value:f.g0.Alerting,label:"Alerting"},{value:f.g0.NoData,label:"No Data"},{value:f.g0.OK,label:"OK"},{value:f.g0.Error,label:"Error"}],y=e=>{let{includeNoData:t,includeError:n}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,b);const i=(0,a.useMemo)((()=>t?n?x:x.filter((e=>e.value!==f.g0.Error)):x.filter((e=>e.value!==f.g0.NoData))),[t,n]);return(0,v.jsx)(m.Ph,Object.assign({options:i},s))};var w=n(50073);const j=["onChange","ref"],S=["onChange","ref"];var C;function k(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const N=10,O={required:{value:!0,message:"Required."},validate:e=>{try{const t=(0,h.nd)(e);return t<1e3*N?`Cannot be less than ${N} seconds.`:t%(1e3*N)==0||`Must be a multiple of ${N} seconds.`}catch(e){return e instanceof Error?e.message:"Failed to parse duration"}}},I=()=>{var e,t,n;const s=(0,r.wW)(T),[m,f]=(0,a.useState)(!1),{register:b,formState:{errors:x},watch:N}=(0,i.Gc)(),{exceedsLimit:I}=(0,u.f)(N("evaluateEvery")),$="eval-every-input",R="eval-for-input";return(0,v.jsxs)(w.z,{stepNo:2,title:"Alert evaluation behavior",children:[(0,v.jsx)(o.g,{label:"Evaluate",description:"Evaluation interval applies to every rule within a group. It can overwrite the interval of an existing alert rule.",children:(0,v.jsxs)("div",{className:s.flexRow,children:[(0,v.jsx)(l.W,{htmlFor:$,width:16,tooltip:"How often the alert will be evaluated to see if it fires",children:"Evaluate every"}),(0,v.jsx)(o.g,{className:s.inlineField,error:null===(e=x.evaluateEvery)||void 0===e?void 0:e.message,invalid:!!x.evaluateEvery,validationMessageHorizontalOverflow:!0,children:(0,v.jsx)(d.I,Object.assign({id:$,width:8},b("evaluateEvery",O)))}),(0,v.jsx)(l.W,{htmlFor:R,width:7,tooltip:'Once condition is breached, alert will go into pending state. If it is pending for longer than the "for" value, it will become a firing alert.',children:"for"}),(0,v.jsx)(o.g,{className:s.inlineField,error:null===(t=x.evaluateFor)||void 0===t?void 0:t.message,invalid:!(null===(n=x.evaluateFor)||void 0===n||!n.message),validationMessageHorizontalOverflow:!0,children:(0,v.jsx)(d.I,Object.assign({id:R,width:8},b("evaluateFor",(P=N("evaluateEvery"),{required:{value:!0,message:"Required."},validate:e=>{if("0"===e)return!0;try{const t=(0,h.nd)(e);if(0===t)return!0;try{return t>=(0,h.nd)(P)||"For duration must be greater than or equal to the evaluation interval."}catch(e){return!0}}catch(e){return e instanceof Error?e.message:"Failed to parse duration"}}}))))})]})}),I&&(C||(C=(0,v.jsx)(g.R,{}))),(0,v.jsx)(p.U,{isCollapsed:!m,onToggle:e=>f(!e),text:"Configure no data and error handling",className:s.collapseToggle}),m&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null",children:(0,v.jsx)(c.g,{render:e=>{let{field:{onChange:t}}=e,n=k(e.field,j);return(0,v.jsx)(y,Object.assign({},n,{inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:e=>t(null==e?void 0:e.value)}))},name:"noDataState"})}),(0,v.jsx)(o.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout",children:(0,v.jsx)(c.g,{render:e=>{let{field:{onChange:t}}=e,n=k(e.field,S);return(0,v.jsx)(y,Object.assign({},n,{inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:e=>t(null==e?void 0:e.value)}))},name:"execErrState"})})]})]});var P},T=e=>({inlineField:s.css`
    margin-bottom: 0;
  `,flexRow:s.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,collapseToggle:s.css`
    margin: ${e.spacing(2,0,2,-1)};
  `,globalLimitValue:s.css`
    font-weight: ${e.typography.fontWeightBold};
  `})},50073:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(71980),r=n(45916);const o=e=>{let{title:t,stepNo:n,children:s,description:o}=e;const d=(0,a.wW)(l);return(0,r.jsxs)("div",{className:d.parent,children:[(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:d.stepNo,children:n})}),(0,r.jsx)("div",{className:d.content,children:(0,r.jsxs)(i.C,{label:t,className:d.fieldset,children:[o&&(0,r.jsx)("p",{className:d.description,children:o}),s]})})]})},l=e=>({fieldset:s.css`
    legend {
      font-size: 16px;
      padding-top: ${e.spacing(.5)};
    }
  `,parent:s.css`
    display: flex;
    flex-direction: row;
    max-width: ${e.breakpoints.values.xl};
    & + & {
      margin-top: ${e.spacing(4)};
    }
  `,description:s.css`
    margin-top: -${e.spacing(2)};
    color: ${e.colors.text.secondary};
  `,stepNo:s.css`
    display: inline-block;
    width: ${e.spacing(4)};
    height: ${e.spacing(4)};
    line-height: ${e.spacing(4)};
    border-radius: ${e.spacing(4)};
    text-align: center;
    color: ${e.colors.text.maxContrast};
    background-color: ${e.colors.background.canvas};
    font-size: ${e.typography.size.lg};
    margin-right: ${e.spacing(2)};
  `,content:s.css`
    flex: 1;
  `})},67610:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var s=n(68404),a=n(88246),i=n(80458),r=n(90062),o=n(39440),l=n(34087),d=n(95018),c=n(45916);const u=e=>{let{instance:t}=e;const n=(Object.entries(t.annotations||{})||[]).filter((e=>{let[t,n]=e;return!!n.trim()}));return(0,c.jsxs)("div",{children:[t.value&&(0,c.jsx)(d.C,{label:"Value",horizontal:!0,children:t.value}),n.map((e=>{let[t,n]=e;return(0,c.jsx)(l.a,{annotationKey:t,value:n},t)}))]})};var h=n(18304);const p=e=>{let{instances:t,pagination:n,footerRow:a}=e;const r=(0,s.useMemo)((()=>t.map((e=>({data:e,id:(0,i.pB)(e)})))),[t]);return(0,c.jsx)(o.t,{cols:g,isExpandable:!0,items:r,renderExpandedContent:e=>{let{data:t}=e;return(0,c.jsx)(u,{instance:t})},pagination:n,footerRow:a})},g=[{id:"state",label:"State",renderCell:e=>{let{data:{state:t}}=e;return(0,c.jsx)(h.l,{state:t})},size:"80px"},{id:"labels",label:"Labels",renderCell:e=>{let{data:{labels:t}}=e;return(0,c.jsx)(r.s,{labels:t})}},{id:"created",label:"Created",renderCell:e=>{let{data:{activeAt:t}}=e;return(0,c.jsx)(c.Fragment,{children:t.startsWith("0001")?"-":(0,a.CQ)(t).format("YYYY-MM-DD HH:mm:ss")})},size:"150px"}]},18304:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});n(68404);var s=n(80458),a=n(54743),i=n(45916);const r=e=>{let{state:t,size:n="md"}=e;return(0,i.jsx)(a.i,{state:(0,s.Aq)(t),size:n,children:(0,s.SS)(t)})}},76527:(e,t,n)=>{"use strict";n.d(t,{vq:()=>H,qd:()=>B,BT:()=>_,Bg:()=>W});var s,a=n(52423),i=n(68404),r=n(59052),o=n(68522),l=n(64313),d=n(16755),c=n(78941),u=n(65678),h=n(83744),p=n(4645),g=n(8006),m=n(47900),f=n(19200),v=n(64850),b=n(76938),x=n(64834),y=n(9751),w=n(43271),j=n(5302),S=n(80458),C=n(57938),k=n(39440),N=n(21888),O=n(99500),I=n(45916);function T(e){let{text:t}=e;return(0,I.jsx)(N.u,{placement:"top",content:(0,I.jsx)("div",{children:t}),children:s||(s=(0,I.jsx)(O.J,{name:"info-circle",size:"xs"}))})}var $,R,P,D,A,M,L,F=n(32328),E=n(51928);function V(e){let{message:t}=e;return(0,I.jsx)(l.C,{color:"orange",icon:"exclamation-triangle",text:"Error",tooltip:t})}const z=(e,t)=>{const n=W(t),s=W(e);if(0===s&&0!==n)return 1;if(0===n)return 0;return s/n<1?0:Math.ceil(s/n)+1},B=(e,t)=>{return(0,S.Pc)(e)?{alertName:e.grafana_alert.title,forDuration:e.for,evaluationsToFire:z(e.for,t)}:(0,S.cG)(e)?{alertName:e.alert,forDuration:null!==(n=e.for)&&void 0!==n?n:"1m",evaluationsToFire:z(null!==(s=e.for)&&void 0!==s?s:"1m",t)}:{alertName:"",forDuration:"0s",evaluationsToFire:0};var n,s},_=(e,t,n)=>{const s=e?e[n]:[];return null==s?void 0:s.find((e=>e.name===t))},W=e=>{try{return(0,C.nd)(e)}catch(e){return 0}},U=e=>{var t;let{rulerRules:n,groupName:s,folderName:a}=e;const o=(0,d.wW)(q),l=_(n,s,a),c=null!==(t=null==l?void 0:l.rules)&&void 0!==t?t:[],{watch:u}=(0,r.Gc)(),h=u("groupInterval"),p=c.slice().map(((e,t)=>({id:t,data:B(e,h)}))).sort(((e,t)=>W(e.data.forDuration)-W(t.data.forDuration))),g=(0,i.useMemo)((()=>[{id:"alertName",label:"Alert",renderCell:e=>{let{data:{alertName:t}}=e;return(0,I.jsx)(I.Fragment,{children:t})},size:.6},{id:"for",label:"For",renderCell:e=>{let{data:{forDuration:t}}=e;return(0,I.jsx)(I.Fragment,{children:t})},size:.2},{id:"numberEvaluations",label:"#Evaluations",renderCell:e=>{let{data:{evaluationsToFire:t}}=e;return(e=>{try{const t=(0,C.nd)(e);return!(t<1e3*E.Xr)&&t%(1e3*E.Xr)==0}catch(e){return!1}})(h)?0===t?R||(R=(0,I.jsx)(V,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval."})):(0,I.jsx)(I.Fragment,{children:t}):$||($=(0,I.jsx)(V,{message:"Invalid evaluation interval format"}))},size:.2}]),[h]);return(0,I.jsx)("div",{className:o.tableWrapper,children:(0,I.jsx)(k.t,{items:p,cols:g})})};function H(e){var t,n,s,a;const{namespace:l,group:S,onClose:k}=e,N=(0,d.wW)(q),O=(0,v.I0)(),{loading:$,error:R,dispatched:V}=null!==(t=(0,b._)((e=>e.updateLotexNamespaceAndGroup)))&&void 0!==t?t:j.oq,z=(0,m.iG)(),B=(0,i.useMemo)((()=>{var e;return{namespaceName:l.name,groupName:S.name,groupInterval:null!==(e=S.interval)&&void 0!==e?e:""}}),[l,S]);(0,i.useEffect)((()=>{!V||$||R||k(!0)}),[V,$,k,R]),(0,f.x)((e=>e.unifiedAlerting.updateLotexNamespaceAndGroup=j.oq));const _=(0,r.cI)({mode:"onBlur",defaultValues:B,shouldFocusError:!0}),{handleSubmit:W,register:H,watch:Z,formState:{isDirty:G,errors:Q}}=_,K=(0,b._)((e=>e.rulerRules)),J=K[(0,w.EG)(l.rulesSource)],Y={required:{value:!0,message:"Required."},validate:e=>{try{const t=(0,C.nd)(e);return t<1e3*E.Xr?`Cannot be less than ${E.Xr} seconds.`:t%(1e3*E.Xr)!=0?`Must be a multiple of ${E.Xr} seconds.`:0===(0,x.iH)(J.result,S.name,l.name,e).length||"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(e){return e instanceof Error?e.message:"Failed to parse duration"}}};return(0,I.jsx)(c.u,{className:N.modal,isOpen:!0,title:"Edit namespace or evaluation group",onDismiss:k,onClickBackdrop:k,children:(0,I.jsx)(r.RV,Object.assign({},_,{children:(0,I.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.g,{label:P||(P=(0,I.jsx)(h._,{htmlFor:"namespaceName",children:(0,I.jsxs)(o.Stack,{gap:.5,children:["NameSpace",(0,I.jsx)(T,{text:"Name space can be updated"})]})})),invalid:!!Q.namespaceName,error:null===(n=Q.namespaceName)||void 0===n?void 0:n.message,children:(0,I.jsx)(p.I,Object.assign({id:"namespaceName"},H("namespaceName",{required:"Namespace name is required."})))}),(0,I.jsx)(u.g,{label:D||(D=(0,I.jsx)(h._,{htmlFor:"groupName",children:(0,I.jsxs)(o.Stack,{gap:.5,children:["Evaluation group",(0,I.jsx)(T,{text:"Group name can be updated"})]})})),invalid:!!Q.groupName,error:null===(s=Q.groupName)||void 0===s?void 0:s.message,children:(0,I.jsx)(p.I,Object.assign({id:"groupName"},H("groupName",{required:"Evaluation group name is required."})))}),(0,I.jsx)(u.g,{label:A||(A=(0,I.jsx)(h._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group.",children:(0,I.jsxs)(o.Stack,{gap:.5,children:["Rule group evaluation interval",(0,I.jsx)(T,{text:"How frequently to evaluate rules."})]})})),invalid:!!Q.groupInterval,error:null===(a=Q.groupInterval)||void 0===a?void 0:a.message,children:(0,I.jsx)(p.I,Object.assign({id:"groupInterval",placeholder:"1m"},H("groupInterval",Y)))}),(0,y.f)(Z("groupInterval")).exceedsLimit&&(M||(M=(0,I.jsx)(F.R,{}))),K&&(0,I.jsxs)(I.Fragment,{children:[L||(L=(0,I.jsx)("div",{children:"List of rules that belong to this group"})),(0,I.jsx)("div",{className:N.evalRequiredLabel,children:"#Evaluations column represents the number of evaluations needed before alert starts firing."}),(0,I.jsx)(U,{rulerRules:null==J?void 0:J.result,groupName:S.name,folderName:l.name})]}),(0,I.jsxs)(c.u.ButtonRow,{children:[(0,I.jsx)(g.zx,{variant:"secondary",type:"button",disabled:$,onClick:()=>k(!1),fill:"outline",children:"Close"}),(0,I.jsx)(g.zx,{type:"button",disabled:!G||$,onClick:W((e=>(e=>{O((0,x.hv)({rulesSourceName:(0,w.EG)(l.rulesSource),groupName:S.name,newGroupName:e.groupName,namespaceName:l.name,newNamespaceName:e.namespaceName,groupInterval:e.groupInterval||void 0}))})(e)),(()=>{z.error("There are errors in the form. Correct the errors and retry.")})),children:$?"Saving...":"Save changes"})]})]})},JSON.stringify(B))}))})}const q=e=>({modal:a.css`
    max-width: 560px;
  `,formInput:a.css`
    width: 275px;
    & + & {
      margin-left: ${e.spacing(3)};
    }
  `,tableWrapper:a.css`
    margin-top: ${e.spacing(2)};
    margin-bottom: ${e.spacing(2)};
    height: 225px;
    overflow: auto;
  `,evalRequiredLabel:a.css`
    font-size: ${e.typography.bodySmall.fontSize};
  `})},13:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var s=n(68404);function a(e,t,n){const[a,i]=(0,s.useState)(t),r=Math.ceil(e.length/n),o=n*(a-1),l=(0,s.useMemo)((()=>e.slice(o,o+n)),[e,o,n]),d=(0,s.useCallback)((e=>{i(e)}),[i]);return(0,s.useEffect)((()=>i(1)),[r]),{page:a,onPageChange:d,numberOfPages:r,pageItems:l}}},76938:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var s=n(64850);function a(e,t){return(0,s.v9)((t=>e(t.unifiedAlerting)),t)}},64834:(e,t,n)=>{"use strict";n.d(t,{QY:()=>re,Nc:()=>he,r0:()=>pe,X4:()=>oe,hS:()=>X,oE:()=>Y,S6:()=>le,yO:()=>ie,mS:()=>ue,Yh:()=>z,ei:()=>Q,dV:()=>Z,lB:()=>K,dB:()=>ae,on:()=>J,zy:()=>B,wE:()=>_,vL:()=>de,sw:()=>ce,Ms:()=>ne,Vj:()=>te,dn:()=>U,y6:()=>V,UR:()=>W,IA:()=>q,nw:()=>G,je:()=>H,iH:()=>me,wy:()=>ee,D8:()=>ge,mM:()=>se,hv:()=>fe,tg:()=>ve});var s=n(23067),a=n(82897),i=n(80795),r=n(22587),o=n(42200),l=n(40833),d=n(3363),c=n(274),u=n(93570),h=n(43271);async function p(e){try{var t,n,s;const a=await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:null!==(t=a.data.template_files)&&void 0!==t?t:{},template_file_provenances:null!==(n=a.data.template_file_provenances)&&void 0!==n?n:{},alertmanager_config:null!==(s=a.data.alertmanager_config)&&void 0!==s?s:{}}}catch(t){var a,i;if(e===h.GC&&(0,u.kW)(t)&&null!==(a=t.data)&&void 0!==a&&null!==(i=a.message)&&void 0!==i&&i.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw t}}async function g(e){return(await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function m(e){return(await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function f(e,t,n){const s={receivers:t,alert:n};try{const t=await(0,d.n)((0,u.i)().fetch({method:"POST",data:s,url:`/api/alertmanager/${(0,h.gt)(e)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(v(t.data))throw new Error(b(t.data))}catch(e){if((0,u.kW)(e)&&function(e){const t=null==e?void 0:e.receivers;if(Array.isArray(t))return t.every((e=>"string"==typeof e.name&&Array.isArray(e.grafana_managed_receiver_configs)));return!1}(e.data)&&v(e.data))throw new Error(b(e.data));throw e}}function v(e){return e.receivers.some((e=>e.grafana_managed_receiver_configs.some((e=>"failed"===e.status))))}function b(e){return e.receivers.flatMap((e=>e.grafana_managed_receiver_configs.filter((e=>"failed"===e.status)).map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:"Unknown error."})))).join("; ")}async function x(){return(await(0,d.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function y(e){return e.replace(/"/g,'\\"')}function w(e,t){const n=(e,t)=>e>t?-1:t>e?1:0,s=n(e.timeEnd,t.timeEnd);if(s)return s;const a=n(e.time,t.time);return a||n(e.id,t.id)}var j=n(60897),S=n(92431),C=n(84524),k=n(37937),N=n(14995),O=n(76527),I=n(10373),T=n(72710),$=n(23691),R=n(5302),P=n(55357),D=n(8980),A=n(80458);function M(e){const t=async t=>{if((0,A.Kl)(t)){const n=await(0,N.m6)(e);for(const[e,s]of Object.entries(n))for(const n of s){const s=n.rules.find((e=>{var n;return(0,A.Pc)(e)&&(null===(n=e.grafana_alert)||void 0===n?void 0:n.uid)===t.uid}));if(s)return{group:n,ruleSourceName:h.GC,namespace:e,rule:s}}}if((0,A.E4)(t)){const{ruleSourceName:n,namespace:s,groupName:a}=t,i=await(0,N.jJ)(e,s,a);if(!i)return null;const r=i.rules.find((e=>{const a=P.Zk(n,s,i.name,e);return P.Dg(a,t)}));return r?{group:i,ruleSourceName:n,namespace:s,rule:r}:null}if((0,A.qE)(t))throw new Error("Native prometheus rules can not be edited in grafana.");return null},n=async t=>{const{namespace:n,group:s,rule:a}=t;1!==s.rules.length?await(0,N.P4)(e,n,Object.assign({},s,{rules:s.rules.filter((e=>e!==a))})):await(0,N.BC)(e,n,s.name)},s=async(t,n,s)=>{var a,i;const r=await(0,N.jJ)(e,t,n.name);if(!r)throw new Error(`No group found with name "${n.name}"`);const o={name:n.name,interval:n.interval,rules:(null!==(a=r.rules)&&void 0!==a?a:[]).concat(s)};return await(0,N.P4)(e,t,o),{uid:null!==(i=s.grafana_alert.uid)&&void 0!==i?i:"",ruleSourceName:h.GC}},a=async(e,t,n,a)=>{L(n,a);return await s(e,t,a)},i=async(t,n,s)=>{L(t,n);const a=t.group.rules.map((e=>(0,A.Pc)(e)&&e.grafana_alert.uid===t.rule.grafana_alert.uid?n:e));return await(0,N.P4)(e,t.namespace,{name:t.group.name,interval:s,rules:a}),{uid:t.rule.grafana_alert.uid,ruleSourceName:h.GC}};return{findEditableRule:t,deleteRule:n,saveLotexRule:async(s,a)=>{const{dataSourceName:i,group:r,namespace:o}=s,l=(0,D.yh)(s);if(i&&r&&o){if(a){const s=await t(P.CK(a));if(!s)throw new Error("Rule not found.");if(s.namespace===o&&s.group.name===r){const t=Object.assign({},s.group,{rules:s.group.rules.map((e=>e===s.rule?l:e))});return await(0,N.P4)(e,o,t),P.Zk(i,o,r,l)}await n(s)}const s=await(0,N.jJ)(e,o,r),d=s?Object.assign({},s,{rules:[...s.rules,l]}):{name:r,rules:[l]};return await(0,N.P4)(e,o,d),P.Zk(i,o,r,l)}throw new Error("Data source and location must be specified")},saveGrafanaRule:async(e,n)=>{const{folder:r,group:o,evaluateEvery:l}=e;if(!r)throw new Error("Folder must be specified");const d=(0,D.mI)(e),c=r.title,u={name:o,interval:l};if(!n)return s(c,u,d);const h=await t(P.CK(n));if(!h)throw new Error("Rule not found.");const p=h.namespace===c,g=h.group.name===e.group;return p&&g?i(h,d,l):a(c,u,h,d)}}}function L(e,t){if(!(0,A.Pc)(e.rule))throw new Error("The rule is not a Grafana managed rule");const n=e.rule.grafana_alert.uid;t.grafana_alert.uid=n}function F(e,t){var n;const s=null===(n=e().unifiedAlerting.dataSources[t])||void 0===n?void 0:n.result;if(!s)throw new Error(`Data source configuration is not available for "${t}" data source`);return s}function E(e,t){const n=F(e,t);if(!n.rulerConfig)throw new Error(`Ruler API is not available for ${t}`);return n.rulerConfig}const V=(0,s.hg)("unifiedalerting/fetchPromRules",(async(e,t)=>{let{rulesSourceName:n,filter:s}=e;await t.dispatch(G({rulesSourceName:n}));const a=(0,l.pM)(k.j,`[${n}] Prometheus rules loaded`,{dataSourceName:n,thunk:"unifiedalerting/fetchPromRules"});return await(0,R.$b)(a(n,s))})),z=(0,s.hg)("unifiedalerting/fetchAmConfig",((e,t)=>(0,R.$b)((async()=>{var n;if((0,h.RY)(e))return m(e).then((e=>({alertmanager_config:e.config,template_files:{}})));const{data:s}=await t.dispatch(S.T.endpoints.discoverAmFeatures.initiate({amSourceName:e})),i=null!==(n=null==s?void 0:s.lazyConfigInit)&&void 0!==n&&n,r=(0,l.pM)(p,`[${e}] Alertmanager config loaded`,{dataSourceName:e,thunk:"unifiedalerting/fetchAmConfig"});return(0,$.fm)((()=>r(e)),(e=>{var t;return!(null===(t=(0,R.kk)(e))||void 0===t||!t.includes("alertmanager storage object not found")||i)}),3e4).then((t=>(0,a.isEmpty)(t.alertmanager_config)&&(0,a.isEmpty)(t.template_files)&&e!==h.GC?m(e).then((e=>({alertmanager_config:e.config,template_files:{},template_file_provenances:t.template_file_provenances}))):t)).catch((e=>{var t;if(i&&null!==(t=(0,R.kk)(e))&&void 0!==t&&t.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw e}))})()))),B=(0,s.hg)("unifiedAlerting/fetchExternalAlertmanagers",(()=>(0,R.$b)(async function(){return(await(0,d.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}()))),_=(0,s.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",(()=>(0,R.$b)(x()))),W=(0,s.hg)("unifiedalerting/fetchRulerRules",(async(e,t)=>{let{rulesSourceName:n,filter:s}=e,{dispatch:a,getState:i}=t;await a(G({rulesSourceName:n}));const r=E(i,n),o=(0,l.pM)(N.m6,`[${n}] Ruler rules loaded`,{dataSourceName:n,thunk:"unifiedalerting/fetchRulerRules"});return await(0,R.$b)(o(r,s))}));function U(e){let{rulesSourceName:t}=e;return async(e,n)=>{await e(G({rulesSourceName:t}));const s=F(n,t);await e(V({rulesSourceName:t})),s.rulerConfig&&await e(W({rulesSourceName:t}))}}const H=(0,s.hg)("unifiedalerting/fetchSilences",(e=>{const t=(0,l.pM)(g,`[${e}] Silences loaded`,{dataSourceName:e,thunk:"unifiedalerting/fetchSilences"});return(0,R.$b)(t(e))}));function q(e){return(t,n)=>{const{rulerRules:s}=n().unifiedAlerting,a=s[e];null!=a&&a.result||a&&(0,A.m$)(a)||null!=a&&a.loading||t(W({rulesSourceName:e}))}}function Z(){return async e=>{const t=(0,h.mA)().map((t=>e(G({rulesSourceName:t}))));await Promise.allSettled(t)}}const G=(0,s.hg)("unifiedalerting/fetchPromBuildinfo",(async e=>{let{rulesSourceName:t}=e;return(0,R.$b)((async()=>{if(t===h.GC)return{name:h.GC,id:h.GC,rulerConfig:{dataSourceName:h.GC,apiVersion:"legacy"}};const e=(0,h.VX)(t);if(!e)throw new Error(`Missing data source configuration for ${t}`);const{id:n,name:s}=e,a=(0,l.pM)(j.C$,`[${t}] Rules source features discovered`,{dataSourceName:t,thunk:"unifiedalerting/fetchPromBuildinfo"}),i=await a(s);return{name:s,id:n,rulerConfig:i.features.rulerApiEnabled?{dataSourceName:s,apiVersion:i.application===r.T8.Cortex?"legacy":"config"}:void 0}})())}),{condition:(e,t)=>{var n,s;let{rulesSourceName:a}=e,{getState:i}=t;const r=i().unifiedAlerting.dataSources,o=Boolean(null===(n=r[a])||void 0===n?void 0:n.result),l=Boolean(null===(s=r[a])||void 0===s?void 0:s.error);return!(o||l)}});function Q(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>{const s=performance.now();await Promise.allSettled((0,h.mA)().map((async s=>{var a,i;await t(G({rulesSourceName:s}));const{promRules:r,rulerRules:o,dataSources:l}=n().unifiedAlerting,d=l[s].result;if(!d)return;const c=e||!(null!==(a=r[s])&&void 0!==a&&a.loading),u=(e||!(null!==(i=o[s])&&void 0!==i&&i.loading))&&Boolean(d.rulerConfig);await Promise.allSettled([c&&t(V({rulesSourceName:s})),u&&t(W({rulesSourceName:s}))])}))),(0,l.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-s).toFixed(0)})}}function K(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>{const{promRules:s}=n().unifiedAlerting;(0,h.mA)().map((n=>{var a;!e&&null!==(a=s[n])&&void 0!==a&&a.loading||t(V({rulesSourceName:n}))}))}}const J=(0,s.hg)("unifiedalerting/fetchEditableRule",((e,t)=>{const n=E(t.getState,e.ruleSourceName);return(0,R.$b)(M(n).findEditableRule(e))}));function Y(e,t){return async(n,s)=>{(0,R.Ez)((async()=>{const a=(0,h.EG)(e.rulesSource),i=E(s,a);await(0,N.BC)(i,e.name,t.name),await n(U({rulesSourceName:a}))})(),{successMessage:"Group deleted"})}}function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async(n,s)=>{(0,R.Ez)((async()=>{const a=M(E(s,e.ruleSourceName)),r=await a.findEditableRule(e);if(!r)throw new Error("Rule not found.");await a.deleteRule(r),await n(U({rulesSourceName:r.ruleSourceName})),t.navigateTo&&i.E1.replace(t.navigateTo)})(),{successMessage:"Rule deleted."})}}const ee=(0,s.hg)("unifiedalerting/saveRuleForm",((e,t)=>{let{values:n,existing:s,redirectOnSave:a}=e;return(0,R.Ez)((0,R.$b)((async()=>{const{type:e}=n;let r;if(e===I.$.cloudAlerting||e===I.$.cloudRecording){if(!n.dataSourceName)throw new Error("The Data source has not been defined.");const e=M(E(t.getState,n.dataSourceName));r=await e.saveLotexRule(n,s)}else{if(e!==I.$.grafana)throw new Error("Unexpected rule form type");{const e=M(E(t.getState,h.GC));r=await e.saveGrafanaRule(n,s)}}if((0,l.PN)(l.z7.successSavingAlertRule),a)i.E1.push(a);else{const e=P.$V(r);if(!e)return void i.E1.push("/alerting/list");const n=`/alerting/${encodeURIComponent(e)}/edit`;i.E1.getLocation().pathname!==n?i.E1.replace(n):t.dispatch(J(r))}})()),{successMessage:s?`Rule "${n.name}" updated.`:`Rule "${n.name}" saved.`,errorMessage:"Failed to save rule"})})),te=(0,s.hg)("unifiedalerting/fetchGrafanaNotifiers",(()=>(0,R.$b)((0,C.i9)()))),ne=(0,s.hg)("unifiedalerting/fetchGrafanaAnnotations",(e=>(0,R.$b)(function(e){return(0,u.i)().get("/api/annotations",{alertId:e}).then((e=>null==e?void 0:e.sort(w)))}(e)))),se=(0,s.hg)("unifiedalerting/updateAMConfig",((e,t)=>{let{alertManagerSourceName:n,oldConfig:s,newConfig:r,successMessage:o,redirectPath:l,refetch:c}=e;return(0,R.Ez)((0,R.$b)((async()=>{const e=await t.dispatch(z(n)).unwrap();if(!((0,a.isEmpty)(e.alertmanager_config)&&(0,a.isEmpty)(e.template_files)||JSON.stringify(e)===JSON.stringify(s)))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await async function(e,t){await(0,d.n)((0,u.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,h.gt)(e)}/config/api/v1/alerts`,data:t,showErrorAlert:!1,showSuccessAlert:!1}))}(n,(0,T.X4)(r)),c&&await t.dispatch(z(n)),l&&i.E1.push((0,$.eQ)(l,n))})()),{successMessage:o})})),ae=(0,s.hg)("unifiedalerting/fetchAmAlerts",(e=>(0,R.$b)(async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const i=c.Cj.toUrlParams({silenced:n,active:s,inhibited:a})+(null==t?void 0:t.map((e=>`filter=${encodeURIComponent(`${y(e.name)}=${e.isRegex?"~":""}"${y(e.value)}"`)}`)).join("&"))||"";return(await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/api/v2/alerts`+(i?"?"+i:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}(e,[],!0,!0,!0)))),ie=(e,t)=>async n=>{await(0,R.Ez)(async function(e,t){await(0,u.i)().delete(`/api/alertmanager/${(0,h.gt)(e)}/api/v2/silence/${encodeURIComponent(t)}`)}(e,t),{successMessage:"Silence expired."}),n(H(e)),n(ae(e))},re=(0,s.hg)("unifiedalerting/updateSilence",(e=>{let{alertManagerSourceName:t,payload:n,exitOnSave:s,successMessage:a}=e;return(0,R.Ez)((0,R.$b)((async()=>{await async function(e,t){return(await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/api/v2/silences`,data:t,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}(t,n),s&&i.E1.push("/alerting/silences")})()),{successMessage:a})})),oe=(e,t)=>(n,s)=>{var a,i,r;const o=null===(a=s().unifiedAlerting.amConfigs)||void 0===a||null===(i=a[t])||void 0===i?void 0:i.result;if(!o)throw new Error(`Config for ${t} not found`);if(null===(r=o.alertmanager_config.receivers)||void 0===r||!r.find((t=>t.name===e)))throw new Error(`Cannot delete receiver ${e}: not found in config.`);const l=Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{receivers:o.alertmanager_config.receivers.filter((t=>t.name!==e))})});return n(se({newConfig:l,oldConfig:o,alertManagerSourceName:t,successMessage:"Contact point deleted.",refetch:!0}))},le=(e,t)=>(n,s)=>{var a,i,r,o;const l=null===(a=s().unifiedAlerting.amConfigs)||void 0===a||null===(i=a[t])||void 0===i?void 0:i.result;if(!l)throw new Error(`Config for ${t} not found`);if("string"!=typeof(null===(r=l.template_files)||void 0===r?void 0:r[e]))throw new Error(`Cannot delete template ${e}: not found in config.`);const d=Object.assign({},l.template_files);delete d[e];const c=Object.assign({},l,{alertmanager_config:Object.assign({},l.alertmanager_config,{templates:null===(o=l.alertmanager_config.templates)||void 0===o?void 0:o.filter((t=>t!==e))}),template_files:d});return n(se({newConfig:c,oldConfig:l,alertManagerSourceName:t,successMessage:"Template deleted.",refetch:!0}))},de=(0,s.hg)("unifiedalerting/fetchFolder",(e=>(0,R.$b)(o.ae.getFolderByUid(e,{withAccessControl:!0})))),ce=e=>(t,n)=>{var s;null!==(s=n().unifiedAlerting.folders[e])&&void 0!==s&&s.dispatched||t(de(e))},ue=(0,s.hg)("unifiedalerting/fetchAlertGroups",(e=>(0,R.$b)(async function(e){return(await(0,d.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,h.gt)(e)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e)))),he=(0,s.hg)("unifiedalerting/deleteAlertManagerConfig",(async(e,t)=>(0,R.Ez)((0,R.$b)((async()=>{await async function(e){await(0,d.n)((0,u.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,h.gt)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}(e),await t.dispatch(z(e))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."}))),pe=(e,t)=>async(n,s)=>{var a,i,r;const o=s().unifiedAlerting.amConfigs[e].result,l=null!==(a=null==o||null===(i=o.alertmanager_config)||void 0===i||null===(r=i.mute_time_intervals)||void 0===r?void 0:r.filter((e=>{let{name:n}=e;return n!==t})))&&void 0!==a?a:[];var d;o&&(0,R.Ez)(n(se({alertManagerSourceName:e,oldConfig:o,newConfig:Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{route:o.alertmanager_config.route?(0,T.rU)(t,null===(d=o.alertmanager_config)||void 0===d?void 0:d.route):void 0,mute_time_intervals:l})}),refetch:!0})),{successMessage:`Deleted "${t}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},ge=(0,s.hg)("unifiedalerting/testReceivers",(e=>{let{alertManagerSourceName:t,receivers:n,alert:s}=e;return(0,R.Ez)((0,R.$b)(f(t,n,s)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})})),me=(e,t,n,s)=>{var a;const i=(0,O.BT)(e,t,n);return(null!==(a=null==i?void 0:i.rules)&&void 0!==a?a:[]).filter((e=>{const{forDuration:t}=(0,O.qd)(e,s);return(0,O.Bg)(t)<(0,O.Bg)(s)}))},fe=(0,s.hg)("unifiedalerting/updateLotexNamespaceAndGroup",(async(e,t)=>(0,R.Ez)((0,R.$b)((async()=>{const{rulesSourceName:n,namespaceName:s,groupName:a,newNamespaceName:i,newGroupName:r,groupInterval:o}=e,l=E(t.getState,n),d=await(0,N.m6)(l);if(!Boolean(d[s]))throw new Error(`Namespace "${s}" not found.`);const c=d[s].find((e=>e.name===a));if(!c)throw new Error(`Group "${a}" not found.`);const u=Boolean(d[s].find((e=>e.name===r)));if(r!==a&&u)throw new Error(`Group "${r}" already exists in namespace "${s}".`);const h=Boolean(d[i]);if(i!==s&&h)throw new Error(`Namespace "${i}" already exists.`);if(i===s&&a===r&&o===c.interval)throw new Error("Nothing changed.");if(o!==c.interval){const e=t.getState(),i=null==e?void 0:e.unifiedAlerting.rulerRules[n],r=me(null==i?void 0:i.result,a,s,null!=o?o:"1m");if(r.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${r.map((e=>{const{alertName:t}=(0,O.qd)(e,null!=o?o:"");return t})).join(",")}`)}if(i!==s){for(const e of d[s])await(0,N.P4)(l,i,e.name===a?Object.assign({},e,{name:r,interval:o}):e);await(0,N.sz)(l,s)}else await(0,N.P4)(l,s,Object.assign({},c,{name:r,interval:o})),r!==a&&await(0,N.BC)(l,s,a);await t.dispatch(W({rulesSourceName:n}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"}))),ve=(0,s.hg)("unifiedalerting/updateRulesOrderForGroup",(async(e,t)=>(0,R.Ez)((0,R.$b)((async()=>{const{rulesSourceName:n,namespaceName:s,groupName:a,newRules:i}=e,r=E(t.getState,n),o=(await(0,N.m6)(r))[s].find((e=>e.name===a));if(!o)throw new Error(`Group "${a}" not found.`);const l={name:o.name,interval:o.interval,rules:i};await(0,N.P4)(r,s,l),await t.dispatch(W({rulesSourceName:n}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})));(0,s.hg)("unifiedAlerting/addExternalAlertmanagers",(async(e,t)=>(0,R.Ez)((0,R.$b)((async()=>{await async function(e){await(0,d.n)((0,u.i)().fetch({method:"POST",data:e,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then((()=>{x()}))}(e),t.dispatch(_())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"})))},47659:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var s=n(52423),a=n(8157);const i=e=>({[a.Z9.Active]:s.css`
    color: ${e.colors.error.text};
  `,[a.Z9.Suppressed]:s.css`
    color: ${e.colors.primary.text};
  `,[a.Z9.Unprocessed]:s.css`
    color: ${e.colors.secondary.text};
  `})},97536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(52423);const a=e=>s.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${e.spacing(2,0)};
  `},10373:(e,t,n)=>{"use strict";let s;n.d(t,{$:()=>s}),function(e){e.grafana="grafana",e.cloudAlerting="cloud-alerting",e.cloudRecording="cloud-recording"}(s||(s={}))},96535:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>h,Fo:()=>l,Ko:()=>u,Ob:()=>o,QX:()=>c,Rv:()=>g,ql:()=>p});var s=n(59196),a=n(64850),i=n(43271);function r(e){return(0,i.HY)(e)?"grafana":"external"}const o={read:{grafana:a.bW.AlertingInstanceRead,external:a.bW.AlertingInstancesExternalRead},create:{grafana:a.bW.AlertingInstanceCreate,external:a.bW.AlertingInstancesExternalWrite},update:{grafana:a.bW.AlertingInstanceUpdate,external:a.bW.AlertingInstancesExternalWrite},delete:{grafana:a.bW.AlertingInstanceUpdate,external:a.bW.AlertingInstancesExternalWrite}},l={read:{grafana:a.bW.AlertingNotificationsRead,external:a.bW.AlertingNotificationsExternalRead},create:{grafana:a.bW.AlertingNotificationsWrite,external:a.bW.AlertingNotificationsExternalWrite},update:{grafana:a.bW.AlertingNotificationsWrite,external:a.bW.AlertingNotificationsExternalWrite},delete:{grafana:a.bW.AlertingNotificationsWrite,external:a.bW.AlertingNotificationsExternalWrite}},d={read:{grafana:a.bW.AlertingRuleRead,external:a.bW.AlertingRuleExternalRead},create:{grafana:a.bW.AlertingRuleCreate,external:a.bW.AlertingRuleExternalWrite},update:{grafana:a.bW.AlertingRuleUpdate,external:a.bW.AlertingRuleExternalWrite},delete:{grafana:a.bW.AlertingRuleDelete,external:a.bW.AlertingRuleExternalWrite}};function c(e){const t=r(e);return{read:o.read[t],create:o.create[t],update:o.update[t],delete:o.delete[t]}}function u(e){const t=r(e);return{read:l.read[t],create:l.create[t],update:l.update[t],delete:l.delete[t]}}function h(e){const t=r(e);return{read:d.read[t],create:d.create[t],update:d.update[t],delete:d.delete[t]}}function p(e,t){return()=>s.Vt.evaluatePermission((()=>t),e)}function g(){return{canCreateGrafanaRules:s.Vt.hasAccess(a.bW.FoldersRead,s.Vt.hasEditPermissionInFolders)&&s.Vt.hasAccess(d.create.grafana,s.Vt.hasEditPermissionInFolders),canCreateCloudRules:s.Vt.hasAccess(a.bW.DataSourcesRead,s.Vt.isEditor)&&s.Vt.hasAccess(d.create.external,s.Vt.isEditor),canEditRules:e=>{const t=e===i.GC?s.Vt.hasEditPermissionInFolders:s.Vt.isEditor;return s.Vt.hasAccess(h(e).update,t)}}}},72710:(e,t,n)=>{"use strict";n.d(t,{FM:()=>l,J8:()=>C,X4:()=>r,Xy:()=>y,Zh:()=>b,_J:()=>p,cm:()=>h,eD:()=>x,m8:()=>k,nv:()=>c,oI:()=>g,qw:()=>N,rU:()=>o,tA:()=>m,tC:()=>v,u6:()=>j,uK:()=>w,v7:()=>S,zy:()=>u});var s=n(8157),a=n(9751),i=n(43271);function r(e){return e.alertmanager_config.receivers||(e.alertmanager_config.receivers=[{name:"default "}]),e.alertmanager_config.route||(e.alertmanager_config.route={receiver:e.alertmanager_config.receivers[0].name}),e.template_files||(e.template_files={}),e}function o(e,t){var n,s,a;return Object.assign({},t,{mute_time_intervals:null!==(n=null===(s=t.mute_time_intervals)||void 0===s?void 0:s.filter((t=>t!==e)))&&void 0!==n?n:[],routes:null===(a=t.routes)||void 0===a?void 0:a.map((t=>o(e,t)))})}function l(e,t,n){var s,a;return Object.assign({},n,{mute_time_intervals:null===(s=n.mute_time_intervals)||void 0===s?void 0:s.map((n=>n===t?e:n)),routes:null===(a=n.routes)||void 0===a?void 0:a.map((n=>l(e,t,n)))})}function d(e,t){var n,s;return null!==(n=t.receiver===e||(null===(s=t.routes)||void 0===s?void 0:s.some((t=>d(e,t)))))&&void 0!==n&&n}function c(e,t){var n;return null!==(n=t.alertmanager_config.route&&d(e,t.alertmanager_config.route))&&void 0!==n&&n}function u(e){return e.isEqual?e.isRegex?s._M.regex:s._M.equal:e.isRegex?s._M.notRegex:s._M.notEqual}function h(e){return{name:e.name,value:e.value,operator:u(e)}}function p(e){return Object.assign({name:e.name,value:e.value},function(e){switch(e){case s._M.equal:return{isEqual:!0,isRegex:!1};case s._M.notEqual:return{isEqual:!1,isRegex:!1};case s._M.regex:return{isEqual:!0,isRegex:!0};case s._M.notRegex:return{isEqual:!1,isRegex:!0}}}(e.operator))}function g(e){return`{${e.map(h).reduce(((e,t)=>{const n=`${t.name}${t.operator}"${t.value}"`;return e?`${e},${n}`:n}),"")}}`}const m=[{label:s._M.equal,description:"Equals",value:s._M.equal},{label:s._M.notEqual,description:"Does not equal",value:s._M.notEqual},{label:s._M.regex,description:"Matches regex",value:s._M.regex},{label:s._M.notRegex,description:"Does not match regex",value:s._M.notRegex}],f=[s._M.regex,s._M.notRegex,s._M.notEqual,s._M.equal];function v(e){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${t}`);const n=f.map((e=>[e,t.indexOf(e)])).filter((e=>{let[t,n]=e;return n>-1})).sort(((e,t)=>e[1]-t[1]));if(!n.length)throw new Error(`Invalid matcher: ${t}`);const[a,i]=n[0],r=t.slice(0,i).trim(),o=t.slice(i+a.length).trim();if(!r)throw new Error(`Invalid matcher: ${t}`);return{name:r,value:o,isRegex:a===s._M.regex||a===s._M.notRegex,isEqual:a===s._M.equal||a===s._M.regex}}function b(e){const t=[];return e.replace(/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,((e,n,a,i)=>{const r=a===s._M.equal||a===s._M.regex,o=a===s._M.regex||a===s._M.notRegex;return t.push({name:n,value:i,isEqual:r,isRegex:o}),""})),t}function x(e,t){return t.every((t=>{let{name:n,value:s,isRegex:a,isEqual:i}=t;return Object.entries(e).some((e=>{let[t,r]=e;const o=n===t;let l;return i&&!a&&(l=s===r),i||a||(l=s!==r),i&&a&&(l=new RegExp(s).test(r)),!i&&a&&(l=!new RegExp(s).test(r)),o&&l}))}))}function y(e){return(0,a.x)().filter((e=>e.type===i.ye.Alertmanager)).find((t=>e===t.uid))}function w(e){const{times:t,weekdays:n,days_of_month:s,months:a,years:i}=e;return[j(t),S(n),C(s),k(a),N(i)].join(", ")}function j(e){return"Times: "+(e?null==e?void 0:e.map((e=>{let{start_time:t,end_time:n}=e;return`${t} - ${n} UTC`})).join(" and "):"All")}function S(e){var t;return"Weekdays: "+(null!==(t=null==e?void 0:e.map((e=>{if(e.includes(":"))return e.split(":").map((e=>{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.slice(1)})).join("-");{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.slice(1)}})).join(", "))&&void 0!==t?t:"All")}function C(e){var t;return"Days of the month: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function k(e){var t;return"Months: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function N(e){var t;return"Years: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}},9751:(e,t,n)=>{"use strict";n.d(t,{f:()=>r,x:()=>i});var s=n(65737),a=n(57938);function i(){return Object.values(s.v.datasources)}function r(e){if(!(0,a.wd)(s.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const t=(0,a.nd)(s.v.unifiedAlerting.minInterval);if(!e||!(0,a.wd)(e))return{globalLimit:t,exceedsLimit:!1};const n=(0,a.nd)(e);return{globalLimit:t,exceedsLimit:t>n&&n>0}}},74846:(e,t,n)=>{"use strict";n.d(t,{Fe:()=>u,GC:()=>c,Kd:()=>h,c4:()=>i,cm:()=>o,de:()=>r,iF:()=>l,jZ:()=>s,m4:()=>d,p4:()=>a,q6:()=>p,vY:()=>g});const s="ruler not supported",a=2e4,i="alertmanager",r="alerting-alertmanager",o=2e4,l=2e4,d=2e4,c="timeseries",u="table",h="stat";let p;!function(e){e.description="description",e.summary="summary",e.runbookURL="runbook_url",e.alertId="__alertId__",e.dashboardUID="__dashboardUid__",e.panelID="__panelId__"}(p||(p={}));const g={[p.description]:"Description",[p.summary]:"Summary",[p.runbookURL]:"Runbook URL",[p.dashboardUID]:"Dashboard UID",[p.panelID]:"Panel ID",[p.alertId]:"Alert ID"}},43271:(e,t,n)=>{"use strict";n.d(t,{EG:()=>w,Eu:()=>p,GC:()=>d,HY:()=>k,JY:()=>c,LE:()=>b,P:()=>T,RY:()=>C,VX:()=>g,aM:()=>m,c$:()=>N,gt:()=>I,h_:()=>y,jq:()=>S,mA:()=>x,o_:()=>O,v_:()=>j,ye:()=>u,z3:()=>v});var s=n(8910),a=n(59196),i=n(8157),r=n(64850),o=n(96535),l=n(9751);const d="grafana",c="-- Grafana --";let u;!function(e){e.Alertmanager="alertmanager",e.Loki="loki",e.Prometheus="prometheus"}(u||(u={}));const h=[u.Loki,u.Prometheus];function p(){return a.Vt.hasPermission(r.bW.AlertingRuleExternalRead)?(0,l.x)().filter((e=>h.includes(e.type)&&!1!==e.jsonData.manageAlerts)).sort(((e,t)=>e.name.localeCompare(t.name))):[]}function g(e){return p().find((t=>t.name===e))}function m(){return(0,l.x)().filter((e=>e.type===u.Alertmanager)).sort(((e,t)=>e.name.localeCompare(t.name)))}const f={name:d,imgUrl:"public/img/grafana_icon.svg"};function v(){return[f,...m().map((e=>({name:e.name,displayName:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})))]}function b(e){const t=[],n={instance:o.Ob.read,notification:o.Fo.read};if(a.Vt.hasPermission(n[e].grafana)&&t.push(f),a.Vt.hasPermission(n[e].external)){const e=m().map((e=>({name:e.name,displayName:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})));t.push(...e)}return t}function x(){const e=p().map((e=>e.name));return a.Vt.hasPermission(r.bW.AlertingRuleRead)&&e.push(d),e}function y(){const e=p();return a.Vt.hasPermission(r.bW.AlertingRuleRead)&&e.push(d),e}function w(e){return S(e)?e.name:e}function j(e){return S(e)?e.uid:d}function S(e){return e!==d}function C(e){var t,n;return e!==d&&(null===(t=N(e))||void 0===t||null===(n=t.jsonData)||void 0===n?void 0:n.implementation)===i.sK.prometheus}function k(e){return e===d}function N(e){return(0,l.x)().find((t=>t.name===e))}function O(e){return e===d?d:N(e)}function I(e){if(e===d)return d;const t=N(e);if(!t)throw new Error(`Datasource "${e}" not found`);return t.uid}function T(){var e;const t=(0,s.F)().getInstanceSettings("default");return null!==(e=null==t?void 0:t.meta.alerting)&&void 0!==e&&e?t:(0,s.F)().getList({alerting:!0})[0]}},42889:(e,t,n)=>{"use strict";n.d(t,{RT:()=>r,TZ:()=>l,rz:()=>o});var s=n(82897),a=n(8157),i=n(72710);function r(e){const t=e.filter((e=>!!e.trim())).map((e=>(0,i.tC)(e.trim())));return(0,s.uniqBy)(t,(e=>e.name))}const o=e=>{const t=Object.entries(e).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))})),n=new URLSearchParams;return t.forEach((e=>{let[t,s]=e;return n.append("matcher",`${t}=${s}`)})),n},l=(e,t)=>{const n=e=>(e.startsWith("^")||(e="^"+e),e.endsWith("$")||(e+="$"),new RegExp(e));return e.filter((e=>t.every((t=>((e,t)=>Object.entries(e.labels).some((e=>{let[s,i]=e;if(!t.name||!t.value)return!1;if(t.name!==s)return!1;switch(t.operator){case a._M.equal:return t.value===i;case a._M.notEqual:return t.value!==i;case a._M.regex:return n(t.value).test(i);case a._M.notRegex:return!n(t.value).test(i);default:return!1}})))(e,t))))).map((e=>({id:`${e.activeAt}-${e.value}`,data:{matchedInstance:e}})))}},23691:(e,t,n)=>{"use strict";n.d(t,{$f:()=>v,HV:()=>C,J8:()=>x,S0:()=>m,V2:()=>p,VN:()=>j,Vv:()=>w,Zl:()=>O,__:()=>S,eQ:()=>y,fm:()=>k,lC:()=>f,mH:()=>g,pF:()=>b});var s=n(82897),a=n(274),i=n(65737),r=n(80458),o=n(23854),l=n(22587),d=n(74846),c=n(43271),u=n(42889),h=n(55357);function p(e,t,n){const s=(0,c.EG)(e),r=h.Yd(s,t),o=encodeURIComponent(h.$V(r)),l=encodeURIComponent(s);return a.Cj.renderUrl(`${i.v.appSubUrl}/alerting/${l}/${o}/view`,{returnTo:n})}function g(e,t){return a.Cj.renderUrl(`${i.v.appSubUrl}/explore`,{left:JSON.stringify(["now-1h","now",e,{datasource:e,expr:t},{ui:[!0,!0,!0,"none"]}])})}function m(e){return e.reduce(((e,t)=>{let{key:n,value:s}=t;return e[n]=s,e}),{})}const f=e=>{const t=void 0===e.queryString?void 0:String(e.queryString),n=void 0===e.alertState?void 0:String(e.alertState),s=void 0===e.dataSource?void 0:String(e.dataSource),a=void 0===e.ruleType?void 0:String(e.ruleType);return{queryString:t,alertState:n,dataSource:s,groupBy:void 0===e.groupBy?void 0:String(e.groupBy).split(","),ruleType:a}},v=e=>{var t,n;return{queryString:null!==(t=e.get("queryString"))&&void 0!==t?t:void 0,contactPoint:null!==(n=e.get("contactPoint"))&&void 0!==n?n:void 0}},b=e=>({queryString:void 0===e.queryString?void 0:String(e.queryString),silenceState:void 0===e.silenceState?void 0:String(e.silenceState)});function x(e){return Object.entries(e).map((e=>{let[t,n]=e;return{key:t,value:n}}))}function y(e,t,n){const s=new URLSearchParams(n);return t&&s.append(d.c4,t),`${e}?${s.toString()}`}function w(e,t){return j(e,Object.assign({alertname:t.name},t.labels))}function j(e,t){const n=new URLSearchParams;n.append("alertmanager",e);return(0,u.rz)(t).forEach(((e,t)=>n.append(t,e))),`${i.v.appSubUrl}/alerting/silence/new?${n.toString()}`}function S(e){return`${i.v.appSubUrl}/datasources/edit/${e.uid}`}function C(e){return`${i.v.appSubUrl}/dashboards/f/${e}`}function k(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const a=(new Date).getTime(),i=()=>e().catch((e=>{if(t(e)&&(new Date).getTime()-a<n)return new Promise((e=>setTimeout(e,s))).then(i);throw e}));return i()}const N={[l.bj.Alerting]:1,[l.x_.Firing]:1,[l.bj.Error]:1,[l.bj.Pending]:2,[l.x_.Pending]:2,[l.x_.Inactive]:2,[l.bj.NoData]:3,[l.bj.Normal]:4};function O(e,t){if(e===o.As.Importance)return(0,s.sortBy)(t,(e=>[N[(0,l.ED)(e.state)],(0,r.pB)(e).toLocaleLowerCase()]));if(e===o.As.TimeAsc)return(0,s.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,r.pB)(e).toLocaleLowerCase()]));if(e===o.As.TimeDesc)return(0,s.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,r.pB)(e).toLocaleLowerCase()])).reverse();const n=(0,s.sortBy)(t,(e=>(0,r.pB)(e).toLocaleLowerCase()));return e===o.As.AlphaDesc&&n.reverse(),n}},5302:(e,t,n)=>{"use strict";n.d(t,{$b:()=>u,Ez:()=>h,ed:()=>g,i6:()=>d,jK:()=>c,kk:()=>p,op:()=>v,oq:()=>o,yR:()=>f});var s=n(23067),a=n(94025),i=n(93570),r=n(68374);const o=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2?arguments[2]:void 0;if(e.pending.match(n))return{result:t.result,loading:!0,error:t.error,dispatched:!0,requestId:n.meta.requestId};if(e.fulfilled.match(n)){if(void 0===t.requestId||t.requestId===n.meta.requestId)return Object.assign({},t,{result:n.payload,loading:!1,error:void 0})}else if(e.rejected.match(n)&&t.requestId===n.meta.requestId)return Object.assign({},t,{loading:!1,error:n.error});return t}function d(e,t){return(0,s.oM)({name:e,initialState:o,reducers:{},extraReducers:e=>e.addDefaultCase(((e,n)=>l(t,e,n)))})}function c(e,t,n){return(0,s.oM)({name:e,initialState:{},reducers:{},extraReducers:e=>e.addDefaultCase(((e,a)=>{if((0,s.Gx)(t)(a)){const s=a,i=n(s.meta.arg);return Object.assign({},e,{[i]:l(t,e[i],s)})}return e}))})}function u(e){return e.catch((e=>{throw{message:p(e),code:e.statusCode}}))}function h(e,t){return e.then((e=>(t.successMessage&&r.h$.emit(a.SI.alertSuccess,[t.successMessage]),e))).catch((e=>{var n;const s=p(e);throw r.h$.emit(a.SI.alertError,[`${null!==(n=t.errorMessage)&&void 0!==n?n:"Error"}: ${s}`]),e}))}function p(e){if((0,i.kW)(e)){var t,n;if(null!==(t=e.data)&&void 0!==t&&t.message){var s,a;let t=null===(s=e.data)||void 0===s?void 0:s.message;return"string"==typeof(null===(a=e.data)||void 0===a?void 0:a.error)&&(t+=`; ${e.data.error}`),t}if(Array.isArray(e.data)&&e.data.length&&null!==(n=e.data[0])&&void 0!==n&&n.message)return e.data.map((e=>null==e?void 0:e.message)).filter((e=>!!e)).join(" ");if(e.statusText)return e.statusText}return(null==e?void 0:e.message)||String(e)}function g(e){return Object.values(e).every(m)}function m(e){return e.dispatched&&!e.loading&&!e.error}function f(e){return Object.values(e).some(v)}function v(e){return!!e&&(e.dispatched&&e.loading)}},8980:(e,t,n)=>{"use strict";n.d(t,{DQ:()=>S,WL:()=>C,aR:()=>I,lN:()=>k,mI:()=>j,s0:()=>N,uZ:()=>x,yh:()=>y});var s=n(12717),a=n(85699),i=n(8910),r=n(18474),o=n(52253),l=n(91018),d=n(52394),c=n(22587),u=n(50243),h=n(10373),p=n(96535),g=n(74846),m=n(43271),f=n(23691),v=n(80458),b=n(57938);const x=()=>{const{canCreateGrafanaRules:e,canCreateCloudRules:t}=(0,p.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:g.q6.summary,value:""},{key:g.q6.description,value:""},{key:g.q6.runbookURL,value:""}],dataSourceName:null,type:e?h.$.grafana:t?h.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:c.g0.NoData,execErrState:c.g0.Error,evaluateEvery:"1m",evaluateFor:"5m",namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function y(e){const{name:t,expression:n,forTime:s,forTimeUnit:a,type:i}=e;if(i===h.$.cloudAlerting)return{alert:t,for:`${s}${a}`,annotations:(0,f.S0)(e.annotations||[]),labels:(0,f.S0)(e.labels||[]),expr:n};if(i===h.$.cloudRecording)return{record:t,labels:(0,f.S0)(e.labels||[]),expr:n};throw new Error(`unexpected rule type: ${i}`)}function w(e){return[...(0,f.J8)(e||{}),{key:"",value:""}]}function j(e){const{name:t,condition:n,noDataState:s,execErrState:a,evaluateFor:i,queries:r}=e;if(n)return{grafana_alert:{title:t,condition:n,no_data_state:s,exec_err_state:a,data:r.map($)},for:i,annotations:(0,f.S0)(e.annotations||[]),labels:(0,f.S0)(e.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function S(e){const{ruleSourceName:t,namespace:n,group:s,rule:a}=e,i=x();if((0,m.HY)(t)){if((0,v.Pc)(a)){const e=a.grafana_alert;return Object.assign({},i,{name:e.title,type:h.$.grafana,group:s.name,evaluateFor:a.for||"0",evaluateEvery:s.interval||i.evaluateEvery,noDataState:e.no_data_state,execErrState:e.exec_err_state,queries:e.data,condition:e.condition,annotations:w(a.annotations),labels:w(a.labels),folder:{title:n,id:e.namespace_id}})}throw new Error("Unexpected type of rule for grafana rules source")}if((0,v.cG)(a)){const e=C(a);return Object.assign({},i,e,{type:h.$.cloudAlerting,dataSourceName:t,namespace:n,group:s.name})}if((0,v.yF)(a)){const e=k(a);return Object.assign({},i,e,{type:h.$.cloudRecording,dataSourceName:t,namespace:n,group:s.name})}throw new Error("Unexpected type of rule for cloud rules source")}function C(e){const t=x(),[n,s]=e.for?(0,b.bG)(e.for):[t.forTime,t.forTimeUnit];return{name:e.alert,expression:e.expr,forTime:n,forTimeUnit:s,annotations:w(e.annotations),labels:w(e.labels)}}function k(e){return{name:e.record,expression:e.expr,labels:w(e.labels)}}const N=()=>{const e=(0,m.P)();if(!e)return[...O("A","B")];const t=(0,s.Rr)();return[{refId:"A",datasourceUid:e.uid,queryType:"",relativeTimeRange:t,model:{refId:"A",hide:!1}},...O("B","C")]},O=function(){const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n={refId:arguments.length<=0?void 0:arguments[0],hide:!1,type:d.Us.reduce,datasource:{uid:l.Yq,type:r.hr.type},conditions:[{type:"query",evaluator:{params:[],type:u.$.IsAbove},operator:{type:"and"},query:{params:[e]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},s={refId:t,hide:!1,type:d.Us.threshold,datasource:{uid:l.Yq,type:r.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:u.$.IsAbove},operator:{type:"and"},query:{params:[t]},reducer:{params:[],type:"last"}}],expression:e};return[{refId:e,datasourceUid:l.Yq,queryType:"",model:n},{refId:t,datasourceUid:l.Yq,queryType:"",model:s}]},I=async(e,t)=>{var n,s,r;const{targets:d}=e;if(!e.id||!t.uid)return;const c=a.timeRangeToRelative(a.convertRawToRange(t.time)),u=await(async(e,t,n,s,r,o)=>{const d=[];for(const h of e){var c;const e=await(0,i.F)().get(null!==(c=h.datasource)&&void 0!==c&&c.uid?h.datasource:s),p={uid:e.uid,type:e.type},g=a.relativeToTimeRange(t),{interval:m,intervalMs:f}=T(g,null!=o?o:e.interval,r),v=Object.assign({__interval:{text:m,value:m},__interval_ms:{text:f,value:f}},n),b=e.interpolateVariablesInQueries?await e.interpolateVariablesInQueries([h],v)[0]:h;if(p.uid===l.Yq){const e={refId:b.refId,queryType:"",relativeTimeRange:t,datasourceUid:l.Yq,model:b};d.push(e)}else{const e=(0,i.F)().getInstanceSettings(p);if(e&&e.meta.alerting){var u;const n={refId:b.refId,queryType:null!==(u=b.queryType)&&void 0!==u?u:"",relativeTimeRange:t,datasourceUid:e.uid,model:Object.assign({},b,{maxDataPoints:r,intervalMs:f})};d.push(n)}}}return d})(d,c,e.scopedVars||{},null!==(n=e.datasource)&&void 0!==n?n:void 0,null!==(s=e.maxDataPoints)&&void 0!==s?s:void 0,null!==(r=e.interval)&&void 0!==r?r:void 0);if(!u.length||!u.find((e=>e.datasourceUid!==l.Yq)))return;if(!u.find((e=>e.datasourceUid===l.Yq))){const[e,t]=O((0,o.Hs)(u),"-");u.push(e);const[n,s]=O(e.refId,(0,o.Hs)(u));u.push(s)}const{folderId:p,folderTitle:m}=t.meta;return{type:h.$.grafana,folder:p&&m?{id:p,title:m}:void 0,queries:u,name:e.title,condition:u[u.length-1].refId,annotations:[{key:g.q6.dashboardUID,value:t.uid},{key:g.q6.panelID,value:String(e.id)}]}};function T(e,t,n){return n?a.calculateInterval(e,n,t):t&&a.intervalToMs(t)>1e3?{interval:t,intervalMs:a.intervalToMs(t)}:{interval:"1s",intervalMs:1e3}}function $(e){const t=e.model;if(!function(e){return"expr"in e&&"instant"in e&&"range"in e}(t))return e;return t.instant&&t.range?Object.assign({},e,{model:Object.assign({},t,{range:!0,instant:!1})}):e}},55357:(e,t,n)=>{"use strict";n.d(t,{$V:()=>v,CK:()=>o,Dg:()=>l,OA:()=>f,Om:()=>x,Yd:()=>r,Zk:()=>i,s0:()=>j});var s=n(43271),a=n(80458);function i(e,t,n,s){return(0,a.Pc)(s)?{uid:s.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:e,namespace:t,groupName:n,rulerRuleHash:x(s)}}function r(e,t){const n=t.namespace.name,s=t.group.name;if(t.rulerRule)return i(e,n,s,t.rulerRule);if(t.promRule)return function(e,t,n,s){return{ruleSourceName:e,namespace:t,groupName:n,ruleHash:y(s)}}(e,n,s,t.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function o(e){return i(e.ruleSourceName,e.namespace,e.group.name,e.rule)}function l(e,t){return(0,a.Kl)(e)&&(0,a.Kl)(t)?e.uid===t.uid:(0,a.E4)(e)&&(0,a.E4)(t)?e.groupName===t.groupName&&e.namespace===t.namespace&&e.rulerRuleHash===t.rulerRuleHash&&e.ruleSourceName===t.ruleSourceName:!(!(0,a.qE)(e)||!(0,a.qE)(t))&&(e.groupName===t.groupName&&e.namespace===t.namespace&&e.ruleHash===t.ruleHash&&e.ruleSourceName===t.ruleSourceName)}const d="cri",c="pri";function u(e){return e.replace(/\$/g,"_DOLLAR_")}function h(e){return e.replace(/\_DOLLAR\_/g,"$")}function p(e){return e.replace(/\//g,"").replace(/\\/g,"")}function g(e){return e.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function m(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?decodeURIComponent(e):e,s=n.split("$");if(1===s.length)return{uid:e,ruleSourceName:"grafana"};if(5===s.length){const[e,t,n,a,i]=s.map(h).map(g);if(e===d)return{ruleSourceName:t,namespace:n,groupName:a,rulerRuleHash:i};if(e===c)return{ruleSourceName:t,namespace:n,groupName:a,ruleHash:i}}throw new Error(`Failed to parse rule location: ${e}`)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{return m(e,t)}catch(e){return}}function v(e){return(0,a.Kl)(e)?e.uid:(0,a.E4)(e)?[d,e.ruleSourceName,e.namespace,e.groupName,e.rulerRuleHash].map(String).map(u).map(p).join("$"):[c,e.ruleSourceName,e.namespace,e.groupName,e.ruleHash].map(String).map(u).map(p).join("$")}function b(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function x(e){if((0,a.yF)(e))return b(JSON.stringify([e.record,e.expr,w(e.labels)])).toString();if((0,a.cG)(e))return b(JSON.stringify([e.alert,e.expr,w(e.annotations),w(e.labels)])).toString();if((0,a.Pc)(e))return e.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function y(e){if((0,a.OP)(e))return b(JSON.stringify([e.type,e.query,w(e.labels)])).toString();if((0,a.x_)(e))return b(JSON.stringify([e.type,e.query,w(e.annotations),w(e.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function w(e){return JSON.stringify(Object.entries(e||{}).sort(((e,t)=>e[0].localeCompare(t[0]))))}function j(e){return(0,a.Kl)(e)?s.GC:e.ruleSourceName}},80458:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>x,E4:()=>m,Jq:()=>j,Kl:()=>g,OP:()=>l,Pc:()=>u,SS:()=>v,ZL:()=>b,cG:()=>d,m$:()=>p,pB:()=>h,qE:()=>f,ub:()=>w,x_:()=>o,yF:()=>c});var s=n(82897),a=n(39003),i=n(22587),r=n(74846);function o(e){return"object"==typeof e&&e.type===i.pz.Alerting}function l(e){return"object"==typeof e&&e.type===i.pz.Recording}function d(e){return"object"==typeof e&&"alert"in e}function c(e){return"object"==typeof e&&"record"in e}function u(e){return"object"==typeof e&&"grafana_alert"in e}function h(e){return JSON.stringify(e.labels)}function p(e){var t,n;return e.error&&(null===(t=e.error)||void 0===t||null===(n=t.message)||void 0===n?void 0:n.includes(r.jZ))}function g(e){return"uid"in e}function m(e){return"rulerRuleHash"in e}function f(e){return"ruleHash"in e}function v(e){return e===i.x_.Inactive?"Normal":(0,s.capitalize)(e)}const b=e=>e.reduce(((e,t)=>{let{dataSourceName:n,name:s,groups:a}=t;return a.forEach((t=>{let{name:a,rules:i}=t;i.forEach((t=>{o(t)&&e.push({dataSourceName:n,namespaceName:s,groupName:a,rule:t})}))})),e}),[]);function x(e){let t;return t=Object.values(a.Z).includes(e)?e:(0,i.ED)(e),y[t]}const y={[i.x_.Inactive]:"good",[i.x_.Firing]:"bad",[i.x_.Pending]:"warning",[i.bj.Alerting]:"bad",[i.bj.Error]:"bad",[i.bj.NoData]:"info",[i.bj.Normal]:"good",[i.bj.Pending]:"warning",[a.Z.NoData]:"info",[a.Z.Paused]:"warning",[a.Z.Alerting]:"bad",[a.Z.OK]:"good",[a.Z.Pending]:"warning",[a.Z.Unknown]:"info"};function w(e){return e.alerts?e.alerts.reduce(((e,t)=>{const n=(0,i.ED)(t.state)!==i.bj.Normal;if(t.activeAt&&n){const n=new Date(t.activeAt);if(null===e||e.getTime()>n.getTime())return n}return e}),null):null}function j(e){return Array.isArray(e.source_tenants)}},57938:(e,t,n)=>{"use strict";let s;function a(e){const t=e.match(/(\d+)(\w+)/);if(t)return[Number(t[1]),t[2]];throw new Error(`Invalid interval description: ${e}`)}n.d(t,{wd:()=>r,bG:()=>a,nd:()=>c,qr:()=>i}),function(e){e.seconds="s",e.minutes="m",e.hours="h",e.days="d",e.weeks="w"}(s||(s={}));const i=Object.entries(s).map((e=>{let[t,n]=e;return{label:t[0].toUpperCase()+t.slice(1),value:n}}));function r(e){try{return c(e),!0}catch(e){return!1}}const o={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,y:31536e6},l=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),d=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(s).join(", ")}`);function c(e){let t=e,n=[];if(function e(s){var a,i,r,o;const c=l.exec(s),u=(null==c||null===(a=c.groups)||void 0===a?void 0:a.value)&&(null==c||null===(i=c.groups)||void 0===i?void 0:i.type);if(!c||!u)throw d;c&&null!==(r=c.groups)&&void 0!==r&&r.value&&null!==(o=c.groups)&&void 0!==o&&o.type&&(t=t.replace(c[0],""),n.push([Number(c.groups.value),c.groups.type])),t&&e(t)}(e),!n.length)throw d;return n.reduce(((e,t)=>{let[n,s]=t;return e+n*o[s]}),0)}},73144:(e,t,n)=>{"use strict";n.d(t,{Dl:()=>r,_E:()=>i,lK:()=>o,xD:()=>a});var s=n(93570);function a(e){return(0,s.i)().post("/api/annotations",e)}function i(e){return(0,s.i)().put(`/api/annotations/${e.id}`,e)}function r(e){return(0,s.i)().delete(`/api/annotations/${e.id}`)}async function o(){return(await(0,s.i)().get("/api/annotations/tags")).result.tags.map((e=>{let{tag:t,count:n}=e;return{term:t,count:n}}))}},6877:(e,t,n)=>{"use strict";n.d(t,{r:()=>u});var s=n(53786),a=n(98356),i=n(2101),r=n(85699),o=n(54316),l=n(8343),d=n(99159);let c=100;function u(e,t,n){const u=Object.assign({},d.yA,t.annotations),h=u.prepareAnnotation(n);if(!h)return(0,s.of)({});const p=u.prepareQuery(h);if(!p)return(0,s.of)({});const g=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=r.calculateInterval(e.range,g,t.interval),f={__interval:{text:m.interval,value:m.interval},__interval_ms:{text:m.intervalMs.toString(),value:m.intervalMs},__annotation:{text:h.name,value:h}},v=Object.assign({startTime:Date.now(),requestId:"AQ"+c++,range:e.range,maxDataPoints:g,scopedVars:f},m,{app:o.zj.Dashboard,publicDashboardAccessToken:e.dashboard.meta.publicDashboardAccessToken,timezone:e.dashboard.timezone,targets:[Object.assign({},p,{refId:"Anno"})]});return(0,l.v7)(t,v).pipe((0,a.z)((e=>e.series?u.processEvents(h,e.series).pipe((0,i.U)((t=>({panelData:e,events:t})))):(0,s.of)({panelData:e,events:[]}))))}},99159:(e,t,n)=>{"use strict";n.d(t,{$w:()=>v,r0:()=>g,yA:()=>p,yr:()=>b});var s=n(82897),a=n(53786),i=n(98356),r=n(2101),o=n(64517),l=n(27843),d=n(32934),c=n(53581),u=n(46782);const h=["query"];const p={prepareAnnotation:e=>{if((0,s.isString)(null==e?void 0:e.query)){const{query:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,h);return Object.assign({},n,{target:{refId:"annotation_query",query:t},mappings:{}})}return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,a.of)(e).pipe((e=>e.pipe((0,i.z)((e=>null!=e&&e.length?1===e.length?(0,a.of)(e[0]):(0,a.of)(e).pipe(o.Y.mergeTransformer.operator({}),(0,r.U)((e=>e[0]))):(0,a.of)(void 0))))),(0,r.U)((e=>{if(null==e||!e.length)return[];let n=!1,s=!1;const a={};for(const t of e.fields){a[(0,d.C)(t,e).toLowerCase()]=t}t||(t={});const i=[];for(const r of m){const o=t[r.key]||{};if(o.source===c.L.Skip)continue;const l={key:r.key,split:r.split};if(o.source===c.L.Text)l.text=o.value;else{const t=(o.value||r.key).toLowerCase();l.field=a[t],!l.field&&r.field&&(l.field=r.field(e))}(l.field||l.text)&&(i.push(l),"time"===l.key?n=!0:"text"===l.key&&(s=!0))}if(!n||!s)return console.error("Cannot process annotation fields. No time or text present."),[];const r=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const n of i){let s;if(n.text)s=n.text;else if(n.field&&(s=n.field.values.get(t),void 0!==s&&n.regex)){const e=n.regex.exec(s);e&&(s=e[1]?e[1]:e[0])}null!=s&&(n.split&&"string"==typeof s&&(s=s.split(",")),e[n.key]=s)}r.push(e)}return r})))}(t,e.mappings)};const g=[{key:"time",field:e=>e.fields.find((e=>e.type===l.fS.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===l.fS.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],m=[...u.vc.isPublicDashboardView?[{key:"color"},{key:"isRegion"},{key:"source"}]:[],...g,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];const f=["prometheus","loki","elasticsearch","grafana-opensearch-datasource","grafana-splunk-datasource"];function v(e){const{type:t}=e;return!("datasource"===t||f.includes(t))}function b(e){const{type:t}=e;return f.includes(t)}},62815:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>d,cB:()=>l,dF:()=>r,iK:()=>a,j4:()=>i,ql:()=>o});const s=(0,n(23067).oM)({name:"apiKeys",initialState:{hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},reducers:{apiKeysLoaded:(e,t)=>{const{keys:n,keysIncludingExpired:s}=t.payload,a=0===t.payload.keys.length&&t.payload.keysIncludingExpired.length>0||e.includeExpired;return Object.assign({},e,{hasFetched:!0,keys:n,keysIncludingExpired:s,includeExpired:a})},apiKeysMigrationStatusLoaded:(e,t)=>Object.assign({},e,{apiKeysMigrated:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload}),includeExpiredToggled:e=>Object.assign({},e,{includeExpired:!e.includeExpired}),isFetching:e=>Object.assign({},e,{hasFetched:!1})}}),{apiKeysLoaded:a,includeExpiredToggled:i,isFetching:r,setSearchQuery:o,apiKeysMigrationStatusLoaded:l}=s.actions,d={apiKeys:s.reducer}},91478:(e,t,n)=>{"use strict";n.d(t,{t:()=>x});var s=n(68404),a=n(22543),i=n(98251),r=n(93570),o=n(52423),l=n(16755),d=n(22222),c=n(93194),u=n(54391),h=n(42870),p=n(45916);const g=e=>{let{message:t}=e;const n=(0,l.wW)(m);let s="#34BA18",a="System",i="/public/img/grafana_icon.svg";t.userId>0&&(s="#19a2e7",a=t.user.login,i=t.user.avatarUrl);const r=new Date(1e3*t.created).toLocaleTimeString(),o=(0,h.a)(t.content,{breaks:!0});return(0,p.jsxs)("div",{className:n.comment,children:[(0,p.jsx)("div",{className:n.avatarContainer,children:(0,p.jsx)("img",{src:i,alt:"User avatar",className:n.avatar})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{style:{color:s},children:a})," ",(0,p.jsx)("span",{style:{color:"#898989"},children:r})]}),(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,{html:o,className:n.content})})]})]})},m=e=>({comment:o.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:o.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:o.css`
    width: 30px;
    height: 30px;
  `,content:o.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),f=e=>{let{comments:t,packetCounter:n,addComment:a}=e;const i=(0,l.wW)(v),[r,o]=(0,s.useState)(""),[u,h]=(0,s.useState)(0),m=(0,s.useRef)(null);(0,s.useLayoutEffect)((()=>{m.current?h(m.current.offsetHeight):h(0)}),[n]);return(0,p.jsx)(d.$,{scrollTop:u,children:(0,p.jsxs)("div",{ref:m,className:i.commentViewContainer,children:[t.map((e=>(0,p.jsx)(g,{message:e},e.id))),(0,p.jsx)(c.K,{placeholder:"Write a comment",value:r,onChange:e=>{const t=e.currentTarget;o(t.value)},onKeyPress:async e=>{if("Enter"===(null==e?void 0:e.key)&&(null==e||!e.shiftKey)&&(e.preventDefault(),r.length>0)){await a(r)&&o("")}},autoFocus:!0})]})})},v=e=>({commentViewContainer:o.css`
    margin: 5px;
  `});function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends s.PureComponent{constructor(e){super(e),b(this,"subscription",void 0),b(this,"packetCounter",0),b(this,"getLiveChannel",(()=>{const e=(0,i.gj)();if(!e)return void console.error('Grafana live not running, enable "live" feature toggle');const t=this.getLiveAddress();return t?e.getStream(t):void 0})),b(this,"getLiveAddress",(()=>({scope:a.z.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}))),b(this,"updateSubscription",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const e=this.getLiveChannel();e&&(this.subscription=e.subscribe({next:e=>{if((0,a.RL)(e)){const{commentCreated:t}=e.message;t&&(this.setState((e=>({messages:[...e.messages,t]}))),this.packetCounter++)}}}))})),b(this,"addComment",(async e=>{const t=await(0,r.i)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:e});return console.log(t),!0})),this.state={messages:[],value:""}}async componentDidMount(){const e=await(0,r.i)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:e.comments}),this.updateSubscription()}render(){return(0,p.jsx)(f,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},54069:(e,t,n)=>{"use strict";n.d(t,{D3:()=>s,Z6:()=>a});const s="connections",a={Base:`/${s}`,YourConnections:`/${s}/your-connections`,DataSources:`/${s}/your-connections/datasources`,DataSourcesNew:`/${s}/your-connections/datasources/new`,DataSourcesEdit:`/${s}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${s}/datasources/edit/:uid/dashboards`,ConnectData:`/${s}/connect-data`,DataSourcesDetails:`/${s}/connect-data/datasources/:id`}},41519:(e,t,n)=>{"use strict";n.d(t,{Mi:()=>g,Rh:()=>u,WJ:()=>f,Ym:()=>h,bS:()=>m,zZ:()=>p});var s=n(49153),a=n(84030),i=n(3363),r=n(93570),o=n(93686),l=n(47900);const d=["data"];const c=e=>({error:404!==e.status?e:null}),u=(0,s.LC)({reducerPath:"publicDashboardApi",baseQuery:(0,a.XD)((e=>{let{baseUrl:t}=e;return async e=>{try{const n=await(0,i.n)((0,r.i)().fetch(Object.assign({},e,{url:t+e.url,showErrorAlert:e.showErrorAlert}))),{data:s}=n;return{data:s,meta:function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,d)}}catch(t){return e.manageError?e.manageError(t):{error:t}}}})({baseUrl:"/api/dashboards"}),{maxRetries:0}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:e=>({getPublicDashboard:e.query({query:e=>({url:`/uid/${e}/public-dashboards`,manageError:c,showErrorAlert:!1}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s}catch(e){var a,i;const t=e;n((0,o.$l)((0,l.t_)(null==t||null===(a=t.error)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)))}},providesTags:(e,t,n)=>[{type:"PublicDashboard",id:n}]}),createPublicDashboard:e.mutation({query:e=>({url:`/uid/${e.dashboard.uid}/public-dashboards`,method:"POST",data:e.payload}),async onQueryStarted(e,t){let{dashboard:n,payload:s}=e,{dispatch:a,queryFulfilled:i}=t;const{data:r}=await i;a((0,o.$l)((0,l.AT)("Public dashboard created!"))),n.updateMeta({hasPublicDashboard:!0,publicDashboardUid:r.uid,publicDashboardEnabled:r.isEnabled})},invalidatesTags:(e,t,n)=>{let{payload:s}=n;return[{type:"PublicDashboard",id:s.dashboardUid}]}}),updatePublicDashboard:e.mutation({query:e=>({url:`/uid/${e.dashboard.uid}/public-dashboards/${e.payload.uid}`,method:"PUT",data:e.payload}),extraOptions:{maxRetries:0},async onQueryStarted(e,t){let{dashboard:n,payload:s}=e,{dispatch:a,queryFulfilled:i}=t;const{data:r}=await i;a((0,o.$l)((0,l.AT)("Public dashboard updated!"))),n.updateMeta({hasPublicDashboard:!0,publicDashboardUid:r.uid,publicDashboardEnabled:r.isEnabled})},invalidatesTags:(e,t,n)=>{let{payload:s}=n;return[{type:"PublicDashboard",id:s.dashboardUid}]}}),listPublicDashboards:e.query({query:()=>({url:"/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:e.mutation({query:e=>({url:`/uid/${e.dashboardUid}/public-dashboards/${e.uid}`,method:"DELETE"}),async onQueryStarted(e,t){let{dashboard:n,uid:s}=e,{dispatch:a,queryFulfilled:i}=t;await i,a((0,o.$l)((0,l.AT)("Public dashboard deleted!"))),null==n||n.updateMeta({hasPublicDashboard:!1,publicDashboardUid:s,publicDashboardEnabled:!1})},invalidatesTags:(e,t,n)=>{let{dashboardUid:s}=n;return[{type:"PublicDashboard",id:s},"AuditTablePublicDashboard"]}})})}),{useGetPublicDashboardQuery:h,useCreatePublicDashboardMutation:p,useUpdatePublicDashboardMutation:g,useDeletePublicDashboardMutation:m,useListPublicDashboardsQuery:f}=u},85322:(e,t,n)=>{"use strict";n.d(t,{E:()=>h});var s=n(82897),a=n(8910),i=n(46782),r=n(98865),o=n(43437),l=n(64663),d=n(96668),c=n(72379);const u=["gridPos","id"];class h{async makeExportable(e){e.cleanUpRepeats();const t=e.getSaveModelClone();t.id=null,e.processRepeats();const n=[],h={},p={},g={},m=new Map;for(const e of t.getVariables())g[e.name]=e;const f=(e,t)=>{var n;if(void 0===e.datasource)return void(e.datasource=t);let s=e.datasource,i=null;const r=null===(n=s)||void 0===n?void 0:n.uid;return r&&0===r.indexOf("$")&&(i=g[r.substring(1)],i&&i.current&&(s=i.current.value)),(0,a.F)().get(s).then((t=>{var n,s,a,r;if(null!==(n=t.meta)&&void 0!==n&&n.builtIn)return;if(h["datasource"+(null===(s=t.meta)||void 0===s?void 0:s.id)]={type:"datasource",id:t.meta.id,name:t.meta.name,version:t.meta.info.version||"1.0.0"},i)return;const o="DS_"+t.name.replace(" ","_").toUpperCase();p[o]={name:o,label:t.name,description:"",type:"datasource",pluginId:null===(a=t.meta)||void 0===a?void 0:a.id,pluginName:null===(r=t.meta)||void 0===r?void 0:r.name},e.datasource={type:t.meta.id,uid:"${"+o+"}"}}))},v=async e=>{if("row"!==e.type){if(await f(e),e.targets)for(const t of e.targets)await f(t,e.datasource);const t=i.ZP.panels[e.type];t&&(h["panel"+t.id]={type:"panel",id:t.id,name:t.name,version:t.info.version})}},b=async e=>{if((0,o.V)(e)){const{name:t,uid:n}=e.libraryPanel;let s=e.libraryPanel.model;if(!s){s=(await(0,r.Mh)(n,!0)).model}const a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(s,u);m.has(n)||m.set(n,{name:t,uid:n,kind:l.V.Panel,model:a})}};try{for(const e of t.panels)if(await v(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)await v(t);for(const e of t.getVariables())(0,d.Xh)(e)&&(await f(e),e.options=[],e.current={},e.refresh=e.refresh!==c.Bd.never?e.refresh:c.Bd.onDashboardLoad);for(const e of t.annotations.list)await f(e);h.grafana={type:"grafana",id:"grafana",name:"Grafana",version:i.ZP.buildInfo.version},(0,s.each)(p,(e=>{n.push(e)}));for(const t of e.panels)if(await b(t),void 0!==t.collapsed&&!0===t.collapsed&&t.panels)for(const e of t.panels)await b(e);for(const e of t.getVariables())if((0,d.VC)(e)){const t="VAR_"+e.name.replace(" ","_").toUpperCase();n.push({name:t,type:"constant",label:e.label||e.name,value:e.query,description:""}),e.query="${"+t+"}",e.current={value:e.query,text:e.query,selected:!1},e.options=[e.current]}const a=[...m.entries()].reduce(((e,t)=>{let[n,s]=t;return e[n]=s,e}),{}),r=(0,s.defaults)({__inputs:n,__elements:a,__requires:(0,s.sortBy)(h,["id"])},t);for(let e=0;e<r.panels.length;e++){const t=r.panels[e];(x=t).libraryPanel&&"string"==typeof x.libraryPanel.name&&"string"==typeof x.libraryPanel.uid&&(r.panels[e]={gridPos:t.gridPos,id:t.id,libraryPanel:{uid:t.libraryPanel.uid,name:t.libraryPanel.name}})}return r}catch(e){return console.error("Export failed:",e),{error:e}}var x}}},95628:(e,t,n)=>{"use strict";n.d(t,{NN:()=>K,hf:()=>J,ZP:()=>X});var s=n(52423),a=n(68404),i=n(36635),r=n(70356),o=n(76093),l=n(36298),d=n(25004),c=n(80795),u=n(80589),h=n(40941),p=n(2024),g=n(51028),m=n(98817),f=n(1696),v=n(21084),b=n(80998),x=n(14143),y=n(30881),w=n(46782),j=n(39321),S=n(47900),C=n(68374);var k=n(35448),N=n(16755),O=n(78941),I=n(91478),T=n(45916);const $=e=>{let{dashboard:t,onDismiss:n}=e;const s=(0,N.wW)(R);return(0,T.jsx)(O.u,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:n,className:s.modal,children:(0,T.jsx)(I.t,{objectType:"dashboard",objectId:t.uid})})},R=e=>({modal:s.css`
    width: 500px;
    height: 60vh;
  `});var P,D,A,M=n(48460),L=n(60129),F=n(54876),E=n(69638),V=n(64850),z=n(8105),B=n(26056),_=n(94722),W=n(29471),U=n(23376);const H={setStarred:B.OQ,updateTimeZoneForSession:E.YT},q=(0,i.connect)(null,H),Z=d.wl.pages.Dashboard.DashNav,G=[],Q=[];function K(e){G.push(e)}function J(e){Q.push(e)}const Y=a.memo((e=>{var t,n,s,i;const d=(0,u.N)(),{chrome:N}=(0,j.p)(),{showModal:O,hideModal:I}=(0,a.useContext)(h.kr);!function(e,t){const[n,s]=(0,a.useState)();(0,a.useEffect)((()=>{const n=e.subscribe(t,s);return()=>n.unsubscribe()}),[e,t])}(e.dashboard.events,z.hS);const R=null!==(t=null===(n=e.dashboard.snapshot)||void 0===n?void 0:n.originalUrl)&&void 0!==t?t:"",E=()=>{window.location.href=o.QX.sanitizeUrl(e.dashboard.snapshot.originalUrl)},B=(0,S.iG)(),H=()=>{try{const e=new URL(o.QX.sanitizeUrl(R),w.ZP.appUrl),t=new URL(w.ZP.appUrl);e.host!==t.host?C.h$.publish(new z.Dn({component:p.s,props:{title:"Proceed to external site?",modalClass:ee,body:(0,T.jsxs)(T.Fragment,{children:[s||(s=(0,T.jsxs)("p",{children:["This link connects to an external website at"," ",(0,T.jsx)("code",{children:R})]})),P||(P=(0,T.jsx)("p",{children:"Are you sure you'd like to proceed?"}))]}),confirmVariant:"primary",confirmText:"Proceed",onConfirm:E}})):E()}catch(e){B.error("Invalid URL",e instanceof Error?e.message:void 0)}},q=()=>{const t=(0,_.h4)(),{dashboard:n,setStarred:s}=e;t.starDashboard(n.id,Boolean(n.meta.isStarred)).then((e=>{var t;s({id:n.uid,title:n.title,url:null!==(t=n.meta.url)&&void 0!==t?t:"",isStarred:e}),n.meta.isStarred=e,d()}))},K=()=>{N.onToggleKioskMode()},J=()=>{c.E1.partial({editview:"settings"})},Y=()=>{F.r0.prev()},X=()=>{F.r0.next()},te=()=>{F.r0.stop(),d()},ne=(t,n)=>{t.map(((t,s)=>{const i=t.component,r=(0,a.createElement)(i,Object.assign({},e,{key:`button-custom-${s}`}));"number"==typeof t.index?n.splice(t.index,0,r):n.push(r)}))},se=()=>F.r0.isPlaying;(0,a.useEffect)((()=>{const t=e.dashboard,n=e.shareModalActiveTab,{canShare:s}=t.meta;return s&&n&&O(L.V8,{dashboard:t,onDismiss:I,activeTab:n}),()=>{I()}}),[O,I,e.dashboard,e.shareModalActiveTab]);const ae=()=>{const{dashboard:t,kioskMode:n}=e,{canStar:s,canShare:a,isStarred:i}=t.meta,r=[];if(n||se())return[];if(s){let e=i?(0,k.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,k.t)("dashboard.toolbar.mark-favorite","Mark as favorite");r.push((0,T.jsx)(W.u,{tooltip:e,icon:i?"favorite":"star",iconType:i?"mono":"default",iconSize:"lg",onClick:q},"button-star"))}return a&&r.push((0,T.jsx)(h.JY,{children:e=>{let{showModal:n,hideModal:s}=e;return(0,T.jsx)(W.u,{tooltip:(0,k.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{n(L.V8,{dashboard:t,onDismiss:s})}})}},"button-share")),t.meta.publicDashboardEnabled&&r.push((0,T.jsx)(g.V,{name:"Public",colorIndex:5,"data-testid":Z.publicDashboardTag},"public-dashboard")),t.uid&&w.ZP.featureToggles.dashboardComments&&r.push((0,T.jsx)(h.JY,{children:e=>{let{showModal:n,hideModal:s}=e;return(0,T.jsx)(W.u,{tooltip:(0,k.t)("dashboard.toolbar.comments-show","Show dashboard comments"),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{n($,{dashboard:t,onDismiss:s})}})}},"button-dashboard-comments")),ne(G,r),r},ie=()=>{const{dashboard:t,updateTimeZoneForSession:n,hideTimePicker:s}=e;return s?null:(0,T.jsx)(U.C,{dashboard:t,onChangeTimeZone:n},"time-controls")},re=()=>{const{dashboard:t,onAddPanel:n,isFullscreen:s,kioskMode:a}=e,{canSave:r,canEdit:o,showSettings:l}=t.meta,{snapshot:d}=t,c=d&&d.originalUrl,u=[],p=w.ZP.featureToggles.topnav?null:(0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:K},"tv-button");return se()?[(0,T.jsxs)(m.h,{children:[(0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Y,narrow:!0}),i||(i=(0,T.jsx)(f.h,{onClick:te,children:D||(D=(0,T.jsx)(k.cC,{i18nKey:"dashboard.toolbar.playlist-stop",children:"Stop playlist"}))})),(0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:X,narrow:!0})]},"playlist-buttons"),ie()]:a===V.UX.TV?[ie(),p]:(o&&!s&&u.push((0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",onClick:n},"button-panel-add")),r&&!s&&u.push((0,T.jsx)(h.JY,{children:e=>{let{showModal:n,hideModal:s}=e;return(0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{n(M.d,{dashboard:t,onDismiss:s})}})}},"button-save")),c&&u.push((0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:H,icon:"link"},"button-snapshot")),l&&u.push((0,T.jsx)(f.h,{tooltip:(0,k.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:J},"button-settings")),ne(Q,u),u.push(ie()),u.push(p),u)},{isFullscreen:oe,title:le,folderTitle:de}=e,ce=(0,r.TH)(),ue=l.u.getUrlForPartial(ce,{search:"open"}),he=l.u.getUrlForPartial(ce,{search:"open",query:"folder:current"}),pe=oe?()=>{c.E1.partial({viewPanel:null})}:void 0;return w.ZP.featureToggles.topnav?(0,T.jsx)(x.A,{actions:(0,T.jsxs)(T.Fragment,{children:[ae(),A||(A=(0,T.jsx)(y.M,{leftActionsSeparator:!0})),(0,T.jsx)(v.R,{alignment:"right",children:re()})]})}):(0,T.jsx)(b.X,{pageIcon:oe?void 0:"apps",title:le,parent:de,titleHref:ue,parentHref:he,onGoBack:pe,leftItems:ae(),children:re()})}));Y.displayName="DashNav";const X=q(Y),ee=(0,s.css)({width:"max-content",maxWidth:"80vw"})},29471:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(23734),r=n(45916);const o=e=>{let{icon:t,iconType:n,iconSize:s,tooltip:o,onClick:d,children:c}=e;const u=(0,a.wW)(l);return(0,r.jsxs)("div",{className:u.noBorderContainer,children:[t&&(0,r.jsx)(i.h,{name:t,size:s,iconType:n,tooltip:o,tooltipPlacement:"bottom",onClick:d}),c]})},l=e=>({noBorderContainer:s.css`
    padding: 0 ${e.spacing(.5)};
    display: flex;
  `})},23376:(e,t,n)=>{"use strict";n.d(t,{C:()=>g});var s=n(68404),a=n(42914),i=n(38251),r=n(21162),o=n(34759),l=n(68374),d=n(35448),c=n(53091),u=n(8105),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.Component{constructor(){super(...arguments),p(this,"sub",void 0),p(this,"onChangeRefreshInterval",(e=>{(0,c.$t)().setAutoRefresh(e),this.forceUpdate()})),p(this,"onRefresh",(()=>((0,c.$t)().refreshTimeModel(),Promise.resolve()))),p(this,"onMoveBack",(()=>{l.h$.publish(new u.Qt({direction:u.Im.Left}))})),p(this,"onMoveForward",(()=>{l.h$.publish(new u.Qt({direction:u.Im.Right}))})),p(this,"onChangeTimePicker",(e=>{const{dashboard:t}=this.props,n=t.timepicker,s=n.nowDelay&&"now"===e.raw.to,i=a.isMathString(e.raw.from)?e.raw.from:e.from,r=a.isMathString(e.raw.to)?e.raw.to:e.to,o={from:i,to:s?"now-"+n.nowDelay:r};(0,c.$t)().setTime(o)})),p(this,"onChangeTimeZone",(e=>{this.props.dashboard.timezone=e,this.props.onChangeTimeZone(e),this.onRefresh()})),p(this,"onChangeFiscalYearStartMonth",(e=>{this.props.dashboard.fiscalYearStartMonth=e,this.onRefresh()})),p(this,"onZoom",(()=>{l.h$.publish(new u.p8({scale:2}))}))}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(i.md,(()=>this.forceUpdate()))}componentWillUnmount(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}render(){var e;const{dashboard:t,isOnCanvas:n}=this.props,{refresh_intervals:s}=t.timepicker,a=(0,c.$t)().getValidIntervals(s||r.o5),i=(0,c.$t)().timeRange(),l=t.getTimezone(),u=t.fiscalYearStartMonth,p=null===(e=t.panelInEdit)||void 0===e?void 0:e.isEditing;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.a,{value:i,onChange:this.onChangeTimePicker,timeZone:l,fiscalYearStartMonth:u,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:n}),(0,h.jsx)(r.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:t.refresh,intervals:a,isOnCanvas:n,tooltip:(0,d.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:p})]})}}},50622:(e,t,n)=>{"use strict";n.d(t,{t:()=>s.ZP});var s=n(95628)},25540:(e,t,n)=>{"use strict";n.d(t,{P:()=>y});var s=n(82897),a=n(68404),i=n(85699),r=n(25004),o=n(75342),l=n(65678),d=n(82261),c=n(48239),u=n(4645),h=n(70800),p=n(21162),g=n(53091),m=n(45916);const f=e=>{let{refreshIntervals:t,onRefreshIntervalChange:n,getIntervalsFunc:s=b,validateIntervalsFunc:i=v}=e;const[r,o]=(0,a.useState)(s(null!=t?t:p.o5)),[d,c]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=s(null!=t?t:p.o5);o(e)}),[s,t]);const h=(0,a.useMemo)((()=>Array.isArray(r)?r.join(","):""),[r]),g=(0,a.useCallback)((e=>{const t=e.currentTarget.value?e.currentTarget.value.split(","):[];o(t)}),[o]),f=(0,a.useCallback)((e=>{const t=i(r);null===t&&n(s(r)),c(t)}),[s,r,n,i]);return(0,m.jsx)(l.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:d,invalid:!!d,children:(0,m.jsx)(u.I,{id:"auto-refresh-input",invalid:!!d,value:h,onChange:g,onBlur:f})})},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:g.$t};try{return b(e,t),null}catch(e){return e instanceof Error?e.message:"Invalid intervals"}},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:g.$t};const n=e.filter((e=>""!==e.trim())).map((e=>e.replace(/\s+/g,"")));return[...new Set(t.getTimeSrv().getValidIntervals(n))]};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends a.PureComponent{constructor(){super(...arguments),x(this,"state",{isNowDelayValid:!0}),x(this,"onNowDelayChange",(e=>{const t=e.currentTarget.value;return(0,s.isEmpty)(t)||i.isValidTimeSpan(t)?(this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(t)):void this.setState({isNowDelayValid:!1})})),x(this,"onHideTimePickerChange",(()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)})),x(this,"onLiveNowChange",(()=>{this.props.onLiveNowChange(!this.props.liveNow)})),x(this,"onTimeZoneChange",(e=>{"string"==typeof e&&this.props.onTimeZoneChange(e)})),x(this,"onWeekStartChange",(e=>{this.props.onWeekStartChange(e)}))}render(){return(0,m.jsxs)(o.s,{label:"Time options",isOpen:!0,children:[(0,m.jsx)(l.g,{label:"Time zone","data-testid":r.wl.components.TimeZonePicker.containerV2,children:(0,m.jsx)(d.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})}),(0,m.jsx)(l.g,{label:"Week start","data-testid":r.wl.components.WeekStartPicker.containerV2,children:(0,m.jsx)(c.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})}),(0,m.jsx)(f,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),(0,m.jsx)(l.g,{label:"Now delay",description:"Exclude recent data that may be incomplete.",children:(0,m.jsx)(u.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})}),(0,m.jsx)(l.g,{label:"Hide time picker",children:(0,m.jsx)(h.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})}),(0,m.jsx)(l.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'",children:(0,m.jsx)(h.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})})]})}}},76917:(e,t,n)=>{"use strict";n.d(t,{D:()=>ss});var s=n(68404),a=n(70356),i=n(36298),r=n(80795),o=n(80998),l=n(8006),d=n(14143),c=n(46782),u=n(59196),h=n(64850),p=n(36635),g=n(31259),m=n(84640),f=n(52423),v=n(66015),b=n(31181),x=n(16755),y=n(75342),w=n(54761),j=n(81691),S=n(21888),C=n(99500),k=n(23734),N=n(78941),O=n(45916);const I=e=>{let{nodes:t,edges:a,direction:i,width:r,height:o,onDoubleClick:l}=e;const d=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useCallback)((e=>{l&&l(e.nodes[0])}),[l]);return(0,s.useEffect)((()=>((async()=>{var e;const s=await n.e(8271).then(n.t.bind(n,47137,23)),r={nodes:T(s,t),edges:$(s,a)},o={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:null!=i?i:"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};d.current=new s.Network(c.current,r,o),null===(e=d.current)||void 0===e||e.on("doubleClick",u)})(),()=>{d.current&&d.current.off("doubleClick")})),[i,a,t,u]),(0,O.jsx)("div",{children:(0,O.jsx)("div",{ref:c,style:{width:null!=r?r:"100%",height:null!=o?o:"60vh"}})})};function T(e,t){const n=t.map((e=>Object.assign({},e,{shape:"box"})));return new e.DataSet(n)}function $(e,t){const n=t.map((e=>Object.assign({},e,{arrows:"to",dashes:!0})));return new e.DataSet(n)}function R(e){let{edges:t,nodes:n,show:a,title:i,children:r}=e;const[o,l]=(0,s.useState)(a),d=(0,s.useCallback)((()=>l(!0)),[l]),c=(0,s.useCallback)((()=>l(!1)),[l]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(N.u,{isOpen:o,title:i,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:c,onDismiss:c,children:(0,O.jsx)(I,{nodes:n,edges:t})}),r({showModal:d})]})}const P=e=>{let{id:t,usages:n}=e;const a=(0,s.useMemo)((()=>n.find((e=>e.variable.id===t))),[t,n]);if(!a)return null;const i=a.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,O.jsx)(R,{show:!1,title:`Showing usages for: $${t}`,nodes:i,edges:a.edges,children:e=>{let{showModal:t}=e;return(0,O.jsx)(k.h,{onClick:()=>t(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"})}})};var D,A,M,L,F,E=n(3612);function V(e){let{variables:t,dashboard:n}=e;const[a,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(0),[l,d]=(0,s.useState)([]),c=(0,x.wW)(W);(0,s.useEffect)((()=>o((e=>e+1))),[t,n]);const{loading:u}=(0,v.Z)((async()=>{if(a&&r>0){const e=Date.now(),s=await(0,E.Yg)(t,n),a=Date.now()-e;return a>=1e3&&(0,b.ff)("Slow unknown variables expansion",{elapsed:a}),o(0),d(s),s}return[]}),[t,n,a,r]);return(0,O.jsx)("div",{className:c.container,children:(0,O.jsxs)(y.s,{label:D||(D=(0,O.jsx)(z,{})),isOpen:a,onToggle:e=>{e&&(0,b.ff)("Unknown variables section expanded"),i(e)},children:[u&&(A||(A=(0,O.jsx)(w.wc,{justify:"center",children:(0,O.jsxs)(w.Lh,{justify:"center",children:[(0,O.jsx)("span",{children:"Loading..."}),(0,O.jsx)(j.$,{size:16})]})}))),!u&&l&&(0,O.jsxs)(O.Fragment,{children:[0===l.length&&(M||(M=(0,O.jsx)(B,{}))),l.length>0&&(0,O.jsx)(_,{usages:l})]})]})})}function z(){const e=(0,x.wW)(W);return(0,O.jsxs)("h5",{children:["Renamed or missing variables",(0,O.jsx)(S.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard.",children:(0,O.jsx)(C.J,{name:"info-circle",className:e.infoIcon})})]})}function B(){return L||(L=(0,O.jsx)("span",{children:"No renamed or missing variables found."}))}function _(e){let{usages:t}=e;const n=(0,x.wW)(W);return(0,O.jsxs)("table",{className:"filter-table filter-table--hover",children:[F||(F=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Variable"}),(0,O.jsx)("th",{colSpan:5})]})})),(0,O.jsx)("tbody",{children:t.map((e=>{const{variable:s}=e,{id:a,name:i}=s;return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{className:n.firstColumn,children:(0,O.jsx)("span",{children:i})}),(0,O.jsx)("td",{className:n.defaultColumn}),(0,O.jsx)("td",{className:n.defaultColumn}),(0,O.jsx)("td",{className:n.defaultColumn}),(0,O.jsx)("td",{className:n.lastColumn,children:(0,O.jsx)(P,{id:s.id,usages:t})})]},a)}))})]})}const W=e=>({container:f.css`
    margin-top: ${e.spacing(4)};
    padding-top: ${e.spacing(4)};
  `,infoIcon:f.css`
    margin-left: ${e.spacing(1)};
  `,defaultColumn:f.css`
    width: 1%;
  `,firstColumn:f.css`
    width: 1%;
    vertical-align: top;
    color: ${e.colors.text.maxContrast};
  `,lastColumn:f.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var U=n(31835),H=n(84455),q=n(47908),Z=n(98142),G=n(2024);function Q(e){let{varName:t,isOpen:n=!1,onConfirm:s,onDismiss:a}=e;return(0,O.jsx)(G.s,{title:"Delete variable",isOpen:n,onConfirm:s,onDismiss:a,body:`\n      Are you sure you want to delete variable "${t}"?\n    `,modalClass:K.modal,confirmText:"Delete"})}const K={modal:(0,f.css)({width:"max-content",maxWidth:"80vw"})};var J=n(28173),Y=n(25004),X=n(80025),ee=n(96668),te=n(90155),ne=n(51389),se=n(65678),ae=n(37625);const ie=[{label:"Label and value",value:ne.bU.dontHide},{label:"Value",value:ne.bU.hideLabel},{label:"Nothing",value:ne.bU.hideVariable}];function re(e){let{onChange:t,hide:n,type:a}=e;const i=(0,s.useMemo)((()=>{var e,t;return null!==(e=null===(t=ie.find((e=>e.value===n)))||void 0===t?void 0:t.value)&&void 0!==e?e:ie[0].value}),[n]);return"constant"===a?null:(0,O.jsx)(se.g,{label:"Show on dashboard",children:(0,O.jsx)(ae.S,{options:ie,onChange:t,value:i})})}var oe=n(26830),le=n(31531),de=n(98841),ce=n(63350);function ue(e){let{onChange:t,type:n}=e;const a=(0,s.useMemo)((()=>(0,Z.bi)()),[]),i=(0,s.useMemo)((()=>{var e;return null!==(e=a.find((e=>e.value===n)))&&void 0!==e?e:a[0]}),[a,n]);return(0,O.jsx)(ce.u,{name:"Select variable type",value:i,options:a,onChange:t,testId:Y.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var he,pe=n(34117),ge=n(66946);const me=e=>{let{variable:{options:t}}=e;const[n,a]=(0,s.useState)(20),[i,r]=(0,s.useState)([]),o=(0,s.useCallback)((e=>{e.preventDefault(),a(n+20)}),[n,a]),d=(0,x.wW)(fe);return(0,s.useEffect)((()=>r(t.slice(0,n))),[n,t]),i.length?(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"},children:[he||(he=(0,O.jsx)("h5",{children:"Preview of values"})),(0,O.jsx)(pe.Z,{children:i.map(((e,t)=>(0,O.jsx)(pe.Z,{className:d.optionContainer,children:(0,O.jsx)(ge.W,{"aria-label":Y.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,O.jsx)("div",{className:d.label,children:e.text})})},`${e.value}-${t}`)))}),t.length>n&&(0,O.jsx)(pe.Z,{className:d.optionContainer,children:(0,O.jsx)(l.zx,{onClick:o,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link",children:"Show more"})})]}):null};function fe(e){return{wrapper:(0,f.css)({display:"flex",flexDirection:"column",marginTop:e.spacing(2)}),optionContainer:(0,f.css)({marginLeft:e.spacing(.5),marginBottom:e.spacing(.5)}),label:(0,f.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}me.displayName="VariableValuesPreview";var ve=n(82897),be=n(30486),xe=n(68288);const ye=e=>async t=>{const{rootStateKey:n}=e;t((0,U.mb)(n,(0,xe.wJ)({name:(0,H.E0)(e).name,id:e.id})))},we=e=>async(t,n)=>{const{rootStateKey:s}=e;t((0,U.mb)(s,(0,xe.qe)((0,Z.Y6)(e))))},je=(e,t)=>(n,s)=>{const{id:a,rootStateKey:i}=e;let r=null;t.match(/^(?!__).*$/)||(r="Template names cannot begin with '__', that's reserved for Grafana's global variables"),t.match(/^\w+$/)||(r="Only word and digit characters are allowed in variable names");(0,H.gt)(i,s()).filter((e=>e.name===t&&e.id!==a)).length&&(r="Variable with the same name already exists"),n(r?(0,U.mb)(i,(0,xe.y8)({newName:t,errorText:r})):Se(e,t))},Se=(e,t)=>(n,s)=>{const{rootStateKey:a}=e,i=(0,H.E0)(e,s());if(i.name===t)return void n((0,U.mb)(a,(0,xe.Yo)((0,Z.Y6)(e,{newName:t}))));const r=Object.assign({},(0,ve.cloneDeep)(i),{name:t,id:t}),o=i.global,l=i.index,d=(0,Z.yQ)(r);n((0,U.mb)(a,(0,q.VN)((0,Z.Y6)(d,{global:o,index:l,model:r})))),n((0,U.mb)(a,(0,xe.Yo)((0,Z.Y6)(d,{newName:t})))),n((0,U.mb)(a,(0,q.mZ)((0,Z.Y6)(e,{reIndex:!1}))))},Ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query";return(n,s)=>{const a=(0,Z.mn)(e),i=(0,H.gt)(a,s()),o=Ne(t,i),l={type:t,id:o},d=(0,H.Eo)(a,s()),c=(0,ve.cloneDeep)(X.z.get(t).initialState);c.id=o,c.name=o,c.rootStateKey=a,n((0,U.mb)(a,(0,q.VN)((0,Z.Y6)(l,{global:!1,model:c,index:d})))),r.E1.partial({editIndex:i.length})}},ke=e=>(t,n)=>{const s=(0,Z.mn)(e),a=n(),i=(0,H.xD)(s,a),r=a.dashboard.getModel(),{usages:o}=(0,E.V)(i,r),l=(0,E.vI)(o);t((0,U.mb)(s,(0,be.j4)({usages:o,usagesNetwork:l})))};function Ne(e,t){let n=0,s=`${e}${n}`;for(;t.find((e=>e.id===s));)s=`${e}${++n}`;return s}let Oe;var Ie;function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.MaxSize=50]="MaxSize"}(Oe||(Oe={}));const $e=(0,p.connect)(((e,t)=>({editor:(0,H.AE)(t.identifier.rootStateKey,e).editor,variable:(0,H.E0)(t.identifier,e)})),(e=>Object.assign({},(0,g.bindActionCreators)({variableEditorMount:ye,variableEditorUnMount:we,changeVariableName:je,updateOptions:te.Rk},e),{changeVariableProp:(t,n,s)=>e((0,U.mb)(t.rootStateKey,(0,q.Pl)((0,Z.Y6)(t,{propName:n,propValue:s})))),changeVariableType:(t,n)=>e((0,U.mb)(t.rootStateKey,(0,q.Be)((0,Z.Y6)(t,{newType:n})))),removeVariable:t=>{e((0,U.mb)(t.rootStateKey,(0,q.mZ)((0,Z.Y6)(t,{reIndex:!0}))))}})));class Re extends s.PureComponent{constructor(){super(...arguments),Te(this,"state",{showDeleteModal:!1}),Te(this,"onNameChange",(e=>{e.preventDefault(),this.props.changeVariableName(this.props.identifier,e.currentTarget.value)})),Te(this,"onTypeChange",(e=>{e.value&&this.props.changeVariableType(this.props.identifier,e.value)})),Te(this,"onLabelChange",(e=>{e.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",e.currentTarget.value)})),Te(this,"onDescriptionChange",(e=>{this.props.changeVariableProp(this.props.identifier,"description",e.currentTarget.value)})),Te(this,"onHideChange",(e=>{this.props.changeVariableProp(this.props.identifier,"hide",e)})),Te(this,"onPropChanged",(e=>{let{propName:t,propValue:n,updateOptions:s=!1}=e;this.props.changeVariableProp(this.props.identifier,t,n),s&&this.props.updateOptions((0,Z.yQ)(this.props.variable))})),Te(this,"onHandleSubmit",(async e=>{e.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,Z.yQ)(this.props.variable))})),Te(this,"onModalOpen",(()=>{this.setState({showDeleteModal:!0})})),Te(this,"onModalClose",(()=>{this.setState({showDeleteModal:!1})})),Te(this,"onDelete",(()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),r.E1.partial({editIndex:null})})),Te(this,"onApply",(()=>{r.E1.partial({editIndex:null})}))}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){var e,t;const{variable:n}=this.props,s=X.z.get(this.props.variable.type).editor;if(!s)return null;const a=n.state===J.Gu.Loading;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit,children:[(0,O.jsx)(ue,{onChange:this.onTypeChange,type:this.props.variable.type}),Ie||(Ie=(0,O.jsx)(oe.e,{children:"General"})),(0,O.jsx)(de.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:Y.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Oe.MaxSize,required:!0}),(0,O.jsx)(de.V,{name:"Label",description:"Optional display name",value:null!==(e=this.props.variable.label)&&void 0!==e?e:"",placeholder:"Label name",onChange:this.onLabelChange,testId:Y.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),(0,O.jsx)(le.W,{name:"Description",value:null!==(t=n.description)&&void 0!==t?t:"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),(0,O.jsx)(re,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),s&&(0,O.jsx)(s,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ee.eL)(this.props.variable)?(0,O.jsx)(me,{variable:this.props.variable}):null,(0,O.jsx)("div",{style:{marginTop:"16px"},children:(0,O.jsxs)(w.Lh,{spacing:"md",height:"inherit",children:[(0,O.jsx)(l.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen,children:"Delete"}),(0,O.jsxs)(l.zx,{type:"submit","aria-label":Y.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:a,variant:"secondary",children:["Run query",a&&(0,O.jsx)(C.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})]}),(0,O.jsx)(l.zx,{variant:"primary",onClick:this.onApply,"data-testid":Y.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton,children:"Apply"})]})})]}),(0,O.jsx)(Q,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose})]})}}const Pe=$e(Re);var De=n(19677),Ae=n(68522),Me=n(75442),Le=n(63454);const Fe=e=>{let{variables:t}=e;const n=(0,s.useMemo)((()=>(0,E.GQ)(t)),[t]),a=(0,s.useMemo)((()=>(0,E.MJ)(t)),[t]);return a.length?(0,O.jsx)(R,{show:!1,title:"Dependencies",nodes:(0,E.Of)(n,a),edges:a,children:e=>{let{showModal:t}=e;return(0,O.jsx)(l.zx,{onClick:()=>{(0,b.ff)("Show variable dependencies"),t()},icon:"channel-add",variant:"secondary",children:"Show dependencies"})}}):null},Ee=e=>(0,O.jsx)(p.Provider,{store:Le.h,children:(0,O.jsx)(Fe,Object.assign({},e))}),Ve=e=>{let{id:t,usages:n,isAdhoc:a}=e;const i=(0,s.useMemo)((()=>n.find((e=>e.variable.id===t))),[n,t]);if(0===n.length||a||!i)return null;const r=i.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,O.jsx)(R,{show:!1,title:`Showing usages for: $${t}`,nodes:r,edges:i.edges,children:e=>{let{showModal:t}=e;return(0,O.jsx)(k.h,{onClick:()=>{(0,b.ff)("Show variable usages"),t()},name:"code-branch",title:"Show usages"})}})};var ze,Be;function _e(e){var t;let{index:n,variable:s,usageTree:a,usagesNetwork:i,onEdit:r,onDuplicate:o,onDelete:d}=e;const c=(0,x.l4)(),u=(0,x.wW)(Ue),h=function(e){let t="";(0,ee.Xh)(e)?e.definition?t=e.definition:"string"==typeof e.query&&(t=e.query):(0,ee.eL)(e)&&(t=e.query);return t}(s),p=(0,E.Rv)(s.id,a)>0||(0,ee.Kn)(s),g=(0,Z.yQ)(s);return(0,O.jsx)(De._l,{draggableId:JSON.stringify(g),index:n,children:(e,n)=>(0,O.jsxs)("tr",Object.assign({ref:e.innerRef},e.draggableProps,{style:Object.assign({userSelect:n.isDragging?"none":"auto",background:n.isDragging?c.colors.background.secondary:void 0},e.draggableProps.style),children:[(0,O.jsx)("td",{role:"gridcell",className:u.column,children:(0,O.jsx)(l.zx,{size:"xs",fill:"text",onClick:e=>{e.preventDefault(),r(g)},className:u.nameLink,"aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(s.name),children:s.name})}),(0,O.jsx)("td",{role:"gridcell",className:u.definitionColumn,onClick:e=>{e.preventDefault(),r(g)},"aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(s.name),children:h}),(0,O.jsx)("td",{role:"gridcell",className:u.column,children:t||(t=(0,O.jsx)(We,{passed:p}))}),(0,O.jsx)("td",{role:"gridcell",className:u.column,children:(0,O.jsx)(Ve,{id:s.id,isAdhoc:(0,ee.Kn)(s),usages:i})}),(0,O.jsx)("td",{role:"gridcell",className:u.column,children:(0,O.jsx)(k.h,{onClick:e=>{e.preventDefault(),(0,b.ff)("Duplicate variable"),o(g)},name:"copy",title:"Duplicate variable","aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(s.name)})}),(0,O.jsx)("td",{role:"gridcell",className:u.column,children:(0,O.jsx)(k.h,{onClick:e=>{e.preventDefault(),(0,b.ff)("Delete variable"),d(g)},name:"trash-alt",title:"Remove variable","aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(s.name)})}),(0,O.jsx)("td",{role:"gridcell",className:u.column,children:(0,O.jsx)("div",Object.assign({},e.dragHandleProps,{className:u.dragHandle,children:ze||(ze=(0,O.jsx)(C.J,{name:"draggabledots",size:"lg"}))}))})]}))})}function We(e){let{passed:t}=e;const n=(0,x.wW)(Ue);return t?(0,O.jsx)(C.J,{name:"check",className:n.iconPassed,title:"This variable is referenced by other variables or dashboard."}):(0,O.jsx)(C.J,{name:"exclamation-triangle",className:n.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Ue(e){return{dragHandle:f.css`
      cursor: grab;
    `,column:f.css`
      width: 1%;
    `,nameLink:f.css`
      cursor: pointer;
      color: ${e.colors.primary.text};
    `,definitionColumn:f.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:f.css`
      color: ${e.v1.palette.greenBase};
    `,iconFailed:f.css`
      color: ${e.v1.palette.orange};
    `}}function He(e){let{variables:t,usages:n,usagesNetwork:s,onChangeOrder:a,onAdd:i,onEdit:r,onDelete:o,onDuplicate:d}=e;return(0,O.jsx)("div",{children:(0,O.jsxs)("div",{children:[0===t.length&&(0,O.jsx)(qe,{onAdd:i}),t.length>0&&(0,O.jsxs)(Ae.Stack,{direction:"column",gap:4,children:[(0,O.jsxs)("table",{className:"filter-table filter-table--hover","aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid",children:[Be||(Be=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Variable"}),(0,O.jsx)("th",{children:"Definition"}),(0,O.jsx)("th",{colSpan:5})]})})),(0,O.jsx)(De.Z5,{onDragEnd:e=>{if(!e.destination||!e.source)return;(0,b.ff)("Variable drag and drop");const n=JSON.parse(e.draggableId);a(n,t[e.source.index].index,t[e.destination.index].index)},children:(0,O.jsx)(De.bK,{droppableId:"variables-list",direction:"vertical",children:e=>(0,O.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[t.map(((e,t)=>(0,O.jsx)(_e,{index:t,variable:e,usageTree:n,usagesNetwork:s,onDelete:o,onDuplicate:d,onEdit:r},`${e.name}-${t}`))),e.placeholder]}))})})]}),(0,O.jsxs)(Ae.Stack,{children:[(0,O.jsx)(Ee,{variables:t}),(0,O.jsx)(l.zx,{"aria-label":Y.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:i,icon:"plus",children:"New variable"})]})]})]})})}function qe(e){let{onAdd:t}=e;return(0,O.jsx)("div",{children:(0,O.jsx)(Me.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:' <p>\n                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server\n                    or sensor names in your metric queries you can use variables in their place. Variables are shown as\n                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data\n                    being displayed in your dashboard. Check out the\n                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">\n                      Templates and variables documentation\n                    </a>\n                    for more information.\n                  </p>'},infoBoxTitle:"What do variables do?",onClick:e=>{e.preventDefault(),t()}})})}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ge=(0,p.connect)(((e,t)=>{const{uid:n}=t.dashboard,s=(0,H.AE)(n,e);return{variables:(0,H.xD)(n,e),idInEditor:s.editor.id,usagesNetwork:s.inspect.usagesNetwork,usages:s.inspect.usages}}),(e=>Object.assign({},(0,g.bindActionCreators)({createNewVariable:Ce,initListMode:ke},e),{changeVariableOrder:(t,n,s)=>e((0,U.mb)(t.rootStateKey,(0,q.gE)((0,Z.Y6)(t,{fromIndex:n,toIndex:s})))),duplicateVariable:t=>e((0,U.mb)(t.rootStateKey,(0,q.Y9)((0,Z.Y6)(t,{newId:void 0})))),removeVariable:t=>{e((0,U.mb)(t.rootStateKey,(0,q.mZ)((0,Z.Y6)(t,{reIndex:!0}))))}})));class Qe extends s.PureComponent{constructor(){super(...arguments),Ze(this,"state",{variableId:void 0}),Ze(this,"onEditVariable",(e=>{const t=this.props.variables.findIndex((t=>t.id===e.id));r.E1.partial({editIndex:t})})),Ze(this,"onNewVariable",(()=>{this.props.createNewVariable(this.props.dashboard.uid)})),Ze(this,"onChangeVariableOrder",((e,t,n)=>{this.props.changeVariableOrder(e,t,n)})),Ze(this,"onDuplicateVariable",(e=>{this.props.duplicateVariable(e)})),Ze(this,"onModalOpen",(e=>{this.setState({variableId:e})})),Ze(this,"onModalClose",(()=>{this.setState({variableId:void 0})})),Ze(this,"onRemoveVariable",(()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}))}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){var e,t;const{editIndex:n,variables:s}=this.props,a=null!=n?s[n]:void 0,i=a?{text:a.name}:void 0;return(0,O.jsxs)(m.T,{navModel:this.props.sectionNav,pageNav:i,children:[!a&&(0,O.jsx)(He,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!a&&this.props.variables.length>0&&(0,O.jsx)(V,{variables:this.props.variables,dashboard:this.props.dashboard}),a&&(0,O.jsx)(Pe,{identifier:(0,Z.yQ)(a)}),(0,O.jsx)(Q,{isOpen:void 0!==this.state.variableId,varName:null!==(e=null===(t=this.state.variableId)||void 0===t?void 0:t.id)&&void 0!==e?e:"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose})]})}}const Ke=Ge(Qe);var Je=n(58117),Ye=n(68374);const Xe=e=>{let{dashboard:t,sectionNav:n}=e;const s=Ye.Vt.hasPermission(h.bW.DashboardsPermissionsWrite);return(0,O.jsx)(m.T,{navModel:n,children:(0,O.jsx)(Je.P,{resource:"dashboards",resourceId:t.uid,canSetPermissions:s})})};var et,tt,nt,st=n(34393),at=n(85112),it=n(99857),rt=n(8129),ot=n(41120),lt=n(78433);function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ct={getDashboardPermissions:lt.qm,addDashboardPermission:lt.Yq,removeDashboardPermission:lt.Qk,updateDashboardPermission:lt.RF,checkFolderPermissions:ot.J6},ut=(0,p.connect)((e=>({permissions:e.dashboard.permissions,canViewFolderPermissions:e.folder.canViewFolderPermissions})),ct);class ht extends s.PureComponent{constructor(e){super(e),dt(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),dt(this,"onRemoveItem",(e=>{this.props.removeDashboardPermission(this.props.dashboard.id,e)})),dt(this,"onPermissionChanged",((e,t)=>{this.props.updateDashboardPermission(this.props.dashboard.id,e,t)})),dt(this,"onAddPermission",(e=>this.props.addDashboardPermission(this.props.dashboard.id,e))),dt(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:e,canViewFolderPermissions:t}=this.props;return{id:e.meta.folderId,title:e.meta.folderTitle,url:e.meta.folderUrl,canViewFolderPermissions:t}}render(){const{permissions:e,dashboard:t,sectionNav:n}=this.props,{isAdding:s}=this.state;return t.meta.hasUnsavedFolderChange?(0,O.jsx)(m.T,{navModel:n,children:et||(et=(0,O.jsx)("h5",{children:"You have changed a folder, please save to view permissions."}))}):(0,O.jsxs)(m.T,{navModel:n,children:[(0,O.jsxs)("div",{className:"page-action-bar",children:[tt||(tt=(0,O.jsx)(S.u,{placement:"auto",content:(0,O.jsx)(rt.Z,{}),children:(0,O.jsx)(C.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),nt||(nt=(0,O.jsx)("div",{className:"page-action-bar__spacer"})),(0,O.jsx)(l.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:s,children:"Add permission"})]}),(0,O.jsx)(st.s,{in:s,children:(0,O.jsx)(at.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,O.jsx)(it.Z,{items:e,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()})]})}}const pt=ut(ht);var gt,mt,ft,vt,bt=n(50584),xt=n(70332),yt=n(8910),wt=n(94570),jt=n(71980),St=n(4645),Ct=n(12310),kt=n(17375),Nt=n(3363),Ot=n(39498),It=n(94722),Tt=n(53091),$t=n(37437),Rt=n(6877),Pt=n(99159),Dt=n(32934),At=n(53581),Mt=n(55343),Lt=n(70917);function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Et extends s.PureComponent{constructor(e){super(e),Ft(this,"updateFields",(()=>{var e,t;const n=null===(e=this.props.response)||void 0===e||null===(t=e.panelData)||void 0===t?void 0:t.series[0];if(n&&n.fields){const e=n.fields.map((e=>{const t=(0,Dt.C)(e,n);let s="";for(let t=0;t<n.length;t++){if(t>0&&(s+=", "),t>2){s+="...";break}s+=e.values.get(t)}return s.length>50&&(s=s.substring(0,50)+"..."),{label:`${t} (${e.type})`,value:t,description:s}}));this.setState({fieldNames:e})}})),Ft(this,"onFieldSourceChange",((e,t)=>{const n=this.props.mappings||{},s=n[e]||{};this.props.change(Object.assign({},n,{[e]:Object.assign({},s,{source:t.value||At.L.Field})}))})),Ft(this,"onFieldNameChange",((e,t)=>{const n=this.props.mappings||{},s=n[e]||{};this.props.change(Object.assign({},n,{[e]:Object.assign({},s,{value:t.value,source:At.L.Field})}))})),this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(e){e.response!==this.props.response&&this.updateFields()}renderRow(e,t,n){const{fieldNames:s}=this.state;let a=s;const i=t.value;let r=s.find((e=>i===e.value));i&&(a=[...s],r||a.push({label:i,value:i}));let o=n?n[e.key]:"";if(o&&e.key.startsWith("time")){const e=(0,Mt.Cf)("dateTimeAsIso");o=(0,Mt.zc)(e(o))}return null==o&&(o=""),(0,O.jsxs)("tr",{children:[(0,O.jsxs)("td",{children:[e.key," ",e.help&&(0,O.jsx)(S.u,{content:e.help,children:gt||(gt=(0,O.jsx)(C.J,{name:"info-circle"}))})]}),(0,O.jsx)("td",{children:(0,O.jsx)(Lt.Ph,{value:r,options:a,placeholder:e.placeholder||e.key,onChange:t=>{this.onFieldNameChange(e.key,t)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})}),(0,O.jsx)("td",{children:`${o}`})]},e.key)}render(){var e,t;const n=null===(e=this.props.response)||void 0===e||null===(t=e.events)||void 0===t?void 0:t[0],s=this.props.mappings||{};return(0,O.jsxs)("table",{className:"filter-table",children:[mt||(mt=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Annotation"}),(0,O.jsx)("th",{children:"From"}),(0,O.jsx)("th",{children:"First Value"})]})})),(0,O.jsx)("tbody",{children:Pt.r0.map((e=>this.renderRow(e,s[e.key]||{},n)))})]})}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zt extends s.PureComponent{constructor(){super(...arguments),Vt(this,"state",{}),Vt(this,"onRunQuery",(async()=>{const{datasource:e,annotation:t}=this.props;if((0,Pt.yr)(e))return;const n=(0,It.h4)().getCurrent();if(!n)return;this.setState({running:!0});const s=await(0,Nt.n)((0,Rt.r)({range:(0,Tt.$t)().timeRange(),panel:new $t.r({}),dashboard:n},e,t));this.setState({running:!1,response:s})})),Vt(this,"onQueryChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{target:e}))})),Vt(this,"onMappingChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{mappings:e}))})),Vt(this,"onAnnotationChange",(e=>{this.props.onChange(e)}))}componentDidMount(){this.verifyDataSource()}componentDidUpdate(e){this.props.annotation===e.annotation||(0,Pt.yr)(this.props.datasource)||this.verifyDataSource()}verifyDataSource(){const{datasource:e,annotation:t}=this.props,n=Object.assign({},Pt.yA,e.annotations).prepareAnnotation(t);n!==t?this.props.onChange(n):this.onRunQuery()}renderStatus(){var e;const{response:t,running:n}=this.state;let s,a="alert-info",i="...";if(n||(null==t||null===(e=t.panelData)||void 0===e?void 0:e.state)===J.Gu.Loading||!t)i="loading...";else{const{events:e,panelData:n}=t;var r;if(null!=n&&n.error)a="alert-error",s="exclamation-triangle",i=null!==(r=n.error.message)&&void 0!==r?r:"error";else if(null!=e&&e.length){const t=null==n?void 0:n.series[0];i=`${e.length} events (from ${null==t?void 0:t.fields.length} fields)`}else a="alert-warning",s="exclamation-triangle",i="No events found"}return(0,O.jsxs)("div",{className:(0,f.cx)(a,f.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `),children:[(0,O.jsxs)("div",{children:[s&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(C.J,{name:s})," "]}),i]}),(0,O.jsx)("div",{children:n?ft||(ft=(0,O.jsx)(j.$,{})):(0,O.jsx)(l.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery,children:"TEST"})})]})}render(){var e,t,n;const{datasource:s,annotation:a,datasourceInstanceSettings:i}=this.props,{response:r}=this.state;let o=(null===(e=s.annotations)||void 0===e?void 0:e.QueryEditor)||(null===(t=s.components)||void 0===t?void 0:t.QueryEditor);if(!o)return vt||(vt=(0,O.jsx)("div",{children:"Annotations are not supported. This datasource needs to export a QueryEditor"}));const l=null!==(n=a.target)&&void 0!==n?n:{refId:"Anno"};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ot.n,{instanceSettings:i,children:(0,O.jsx)(o,{query:l,datasource:s,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:null==r?void 0:r.panelData,range:(0,Tt.$t)().timeRange(),annotation:a,onAnnotationChange:this.onAnnotationChange},null==s?void 0:s.name)}),(0,Pt.$w)(s)&&(0,O.jsxs)(O.Fragment,{children:[this.renderStatus(),(0,O.jsx)(Et,{response:r,mappings:a.mappings,change:this.onMappingChange})]})]})}}var Bt,_t=n(70194);function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ut extends s.PureComponent{constructor(){super(...arguments),Wt(this,"ref",null),Wt(this,"angularComponent",void 0),Wt(this,"scopeProps",void 0)}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(e){var t;(e.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation)&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,null===(t=this.angularComponent)||void 0===t||t.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const e=(0,_t.w)(),t={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=e.load(this.ref,t,'<plugin-component type="annotations-query-ctrl"> </plugin-component>'),this.angularComponent.digest(),this.angularComponent.getScope().$watch((()=>{t.ctrl.ignoreNextWatcherFiring?t.ctrl.ignoreNextWatcherFiring=!1:this.props.onChange(t.ctrl.currentAnnotation)})),this.scopeProps=t}render(){return(0,O.jsx)("div",{ref:e=>this.ref=e})}}const Ht="New annotation",qt=e=>{let{editIdx:t,dashboard:n}=e;const[a,i]=(0,s.useState)(n.annotations.list[t]),{value:o}=(0,v.Z)((()=>(0,yt.F)().get(a.datasource)),[a.datasource]),d=(0,yt.F)().getInstanceSettings(a.datasource),c=e=>{const s=[...n.annotations.list];s.splice(t,1,e),i(e),n.annotations.list=s},u=e=>{const t=e.currentTarget;c(Object.assign({},a,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},h=Zt,p=a.name===Ht;return(0,O.jsxs)("div",{children:[(0,O.jsxs)(jt.C,{children:[(0,O.jsx)(se.g,{label:"Name",children:(0,O.jsx)(St.I,{"aria-label":Y.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:p,value:a.name,onChange:e=>{c(Object.assign({},a,{name:e.currentTarget.value}))},width:50})}),(0,O.jsx)(se.g,{label:"Data source",htmlFor:"data-source-picker",children:(0,O.jsx)(wt.q,{width:50,annotations:!0,variables:!0,current:a.datasource,onChange:e=>{c(Object.assign({},a,{datasource:(0,xt.iU)(e)}))}})}),(0,O.jsx)(se.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh",children:(0,O.jsx)(Ct.X,{name:"enable",id:"enable",value:a.enable,onChange:u})}),(0,O.jsx)(se.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden.",children:(0,O.jsx)(Ct.X,{name:"hide",id:"hide",value:a.hide,onChange:u})}),(0,O.jsx)(se.g,{label:"Color",description:"Color to use for the annotation event markers",children:(0,O.jsx)(w.Lh,{children:(0,O.jsx)(kt.B,{value:null==a?void 0:a.iconColor,onChange:e=>{c(Object.assign({},a,{iconColor:e}))}})})}),Bt||(Bt=(0,O.jsx)("h3",{className:"page-heading",children:"Query"})),(null==o?void 0:o.annotations)&&d&&(0,O.jsx)(zt,{datasource:o,datasourceInstanceSettings:d,annotation:a,onChange:c}),o&&!o.annotations&&(0,O.jsx)(Ut,{datasource:o,annotation:a,onChange:c})]}),(0,O.jsxs)(Ae.Stack,{children:[!a.builtIn&&(0,O.jsx)(l.zx,{variant:"destructive",onClick:()=>{const e=n.annotations.list;n.annotations.list=[...e.slice(0,t),...e.slice(t+1)],Zt()},children:"Delete"}),(0,O.jsx)(l.zx,{variant:"secondary",onClick:()=>{r.E1.partial({editview:null,editIndex:null})},children:"Preview in dashboard"}),(0,O.jsx)(l.zx,{variant:"primary",onClick:h,children:"Apply"})]})]})};function Zt(){r.E1.partial({editIndex:null})}qt.displayName="AnnotationSettingsEdit";var Gt=n(12925),Qt=n(77772);const Kt=["children"];const Jt=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Kt);const s=(0,x.wW)(Yt);return(0,O.jsx)("div",{className:s.buttonWrapper,children:(0,O.jsx)(l.zx,Object.assign({icon:"plus",variant:"secondary"},n,{children:t}))})},Yt=e=>({buttonWrapper:f.css`
    padding: ${e.spacing(3)} 0;
  `});var Xt,en,tn,nn;const sn=e=>{let{dashboard:t,onNew:n,onEdit:a}=e;const[i,r]=(0,s.useState)(t.annotations.list),o=(e,n)=>{t.annotations.list=Gt.moveItemImmutably(i,e,e+n),r(t.annotations.list)},l=0===i.length||1===i.length&&i[0].builtIn,d=e=>!1===e.enable?(0,O.jsxs)(O.Fragment,{children:[Xt||(Xt=(0,O.jsx)(C.J,{name:"times"})),"  ",(0,O.jsxs)("em",{className:"muted",children:["(Disabled)   ",e.name]})]}):e.builtIn?(0,O.jsxs)(O.Fragment,{children:[en||(en=(0,O.jsx)(C.J,{name:"comment-alt"})),"  ",(0,O.jsxs)("em",{className:"muted",children:[e.name," (Built-in)"]})]}):(0,O.jsxs)(O.Fragment,{children:[tn||(tn=(0,O.jsx)(C.J,{name:"comment-alt"})),"  ",e.name]}),c=(0,yt.F)();return(0,O.jsxs)(w.wc,{children:[i.length>0&&(0,O.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[nn||(nn=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Query name"}),(0,O.jsx)("th",{children:"Data source"}),(0,O.jsx)("th",{colSpan:3})]})})),(0,O.jsx)("tbody",{children:t.annotations.list.map(((e,n)=>{var s,l;return(0,O.jsxs)("tr",{children:[e.builtIn?(0,O.jsx)("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>a(n),children:d(e)}):(0,O.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>a(n),children:d(e)}),(0,O.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>a(n),children:(null===(s=c.getInstanceSettings(e.datasource))||void 0===s?void 0:s.name)||(null===(l=e.datasource)||void 0===l?void 0:l.uid)}),(0,O.jsx)("td",{role:"gridcell",style:{width:"1%"},children:0!==n&&(0,O.jsx)(k.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>o(n,-1)})}),(0,O.jsx)("td",{role:"gridcell",style:{width:"1%"},children:t.annotations.list.length>1&&n!==t.annotations.list.length-1?(0,O.jsx)(k.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>o(n,1)}):null}),(0,O.jsx)("td",{role:"gridcell",style:{width:"1%"},children:!e.builtIn&&(0,O.jsx)(Qt.m,{size:"sm",onConfirm:()=>(e=>{t.annotations.list=[...i.slice(0,e),...i.slice(e+1)],r(t.annotations.list)})(n),"aria-label":`Delete query with title "${e.name}"`})})]},`${e.name}-${n}`)}))})]}),l&&(0,O.jsx)(Me.Z,{onClick:n,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:"<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information."}}),!l&&(0,O.jsx)(Jt,{onClick:n,children:"New query"})]})};function an(e){let{dashboard:t,editIndex:n,sectionNav:s}=e;const a=null!=n&&n<t.annotations.list.length;return(0,O.jsxs)(m.T,{navModel:s,pageNav:rn(t,n),children:[!a&&(0,O.jsx)(sn,{dashboard:t,onNew:()=>{const e={name:Ht,enable:!0,datasource:(0,xt.iU)((0,yt.F)().getInstanceSettings(null)),iconColor:"red"};t.annotations.list=[...t.annotations.list,Object.assign({},e)],r.E1.partial({editIndex:t.annotations.list.length-1})},onEdit:e=>{r.E1.partial({editIndex:e})}}),a&&(0,O.jsx)(qt,{dashboard:t,editIdx:n})]})}function rn(e,t){if(null==t)return;const n=e.annotations.list[t];return n?{text:n.name}:void 0}var on=n(65737),ln=n(89716),dn=n(33257),cn=n(40941),un=n(64214),hn=n(7197),pn=n(47900),gn=n(1671);var mn,fn,vn,bn,xn;const yn={cleanUpDashboardAndVariables:lt.lw},wn=(0,p.connect)(null,yn),jn=(e,t)=>{const n=(0,ve.sumBy)(e,(e=>e.alert?1:0));return n>0&&!c.vc.unifiedAlertingEnabled?(0,O.jsxs)(O.Fragment,{children:[mn||(mn=(0,O.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,O.jsxs)("p",{children:["This dashboard contains ",n," alert",n>1?"s":"",". Deleting this dashboard also deletes those alerts."]})]}):(0,O.jsxs)(O.Fragment,{children:[fn||(fn=(0,O.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,O.jsx)("p",{children:t})]})},Sn=e=>{let{hideModal:t,provisionedId:n}=e;return(0,O.jsxs)(N.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:t,className:f.css`
      width: 500px;
    `,children:[vn||(vn=(0,O.jsx)("p",{children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})),(0,O.jsxs)("p",{children:[bn||(bn=(0,O.jsxs)("i",{children:["See"," ",(0,O.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),xn||(xn=(0,O.jsx)("br",{})),"File path: ",n]}),(0,O.jsx)(N.u.ButtonRow,{children:(0,O.jsx)(l.zx,{variant:"primary",onClick:t,children:"OK"})})]})},Cn=wn((e=>{let{hideModal:t,cleanUpDashboardAndVariables:n,dashboard:a}=e;const i=a.meta.provisioned,{onDeleteDashboard:o}=((e,t)=>{const[n,a]=(0,hn.Z)((()=>(0,gn.iM)(e,!1)),[]),i=(0,pn.iG)();return(0,s.useEffect)((()=>{n.value&&(t(),r.E1.replace("/"),i.success("Dashboard Deleted",`${n.value.title} has been deleted`))}),[n,i,t]),{state:n,onDeleteDashboard:a}})(a.uid,n),[,l]=(0,un.default)((async()=>{await o(),t()}),[t]),d=jn(a.panels,a.title);return i?(0,O.jsx)(Sn,{hideModal:t,provisionedId:a.meta.provisionedExternalId}):(0,O.jsx)(G.s,{isOpen:!0,body:d,onConfirm:l,onDismiss:t,title:"Delete",icon:"trash-alt",confirmText:"Delete"})})),kn=e=>{let{dashboard:t}=e;return(0,O.jsx)(cn.JY,{children:e=>{let{showModal:n,hideModal:s}=e;return(0,O.jsx)(l.zx,{variant:"destructive",onClick:()=>{n(Cn,{dashboard:t,hideModal:s})},"aria-label":"Dashboard settings page delete dashboard button",children:"Delete Dashboard"})}})};var Nn,On,In=n(29792),Tn=n(42200),$n=n(9787);function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pn extends s.PureComponent{constructor(){super(...arguments),Rn(this,"state",{}),Rn(this,"doUpload",((e,t)=>{const n=(null==e?void 0:e.files)&&e.files[0];if(!n)return void console.log("NOPE!",e);const s=(0,$n.A)(this.props.uid,t),a=new FormData;a.append("file",n),fetch(s,{method:"POST",body:a}).then((e=>e.json())).then((e=>{console.log("Success:",e),location.reload()})).catch((e=>{console.error("Error:",e)}))})),Rn(this,"markAsStale",(e=>async()=>(0,Tn.i)().put((0,$n.A)(this.props.uid,e),{state:"stale"})))}render(){const{uid:e}=this.props,t={maxWidth:300,maxHeight:300};return(0,O.jsxs)(y.s,{label:"Preview settings",isOpen:!0,children:[Nn||(Nn=(0,O.jsx)("div",{children:"DUMMY UI just so we have an upload button!"})),(0,O.jsxs)("table",{cellSpacing:"4",children:[On||(On=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"[DARK]"}),(0,O.jsx)("td",{children:"[LIGHT]"})]})})),(0,O.jsxs)("tbody",{children:[(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsx)(l.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline",children:"Mark as stale"})}),(0,O.jsx)("td",{children:(0,O.jsx)(l.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline",children:"Mark as stale"})})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsx)("img",{src:(0,$n.A)(e,!1),alt:"Preview of dashboard in dark theme",style:t})}),(0,O.jsx)("td",{children:(0,O.jsx)("img",{src:(0,$n.A)(e,!0),alt:"Preview of dashboard in light theme",style:t})})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsx)(In.p,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!1)},children:"Upload dark"})}),(0,O.jsx)("td",{children:(0,O.jsx)(In.p,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!0)},children:"Upload light"})})]})]})]})]})}}var Dn=n(25540);const An=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];const Mn={updateTimeZone:lt.tM,updateWeekStart:lt.f4},Ln=(0,p.connect)(null,Mn)((function(e){let{dashboard:t,updateTimeZone:n,updateWeekStart:a,sectionNav:i}=e;const[r,o]=(0,s.useState)(0),l=e=>{"title"!==e.currentTarget.name&&"description"!==e.currentTarget.name||(t[e.currentTarget.name]=e.currentTarget.value)};return(0,O.jsx)(m.T,{navModel:i,children:(0,O.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,O.jsxs)("div",{className:"gf-form-group",children:[(0,O.jsx)(se.g,{label:"Name",children:(0,O.jsx)(St.I,{id:"title-input",name:"title",onBlur:l,defaultValue:t.title})}),(0,O.jsx)(se.g,{label:"Description",children:(0,O.jsx)(St.I,{id:"description-input",name:"description",onBlur:l,defaultValue:t.description})}),(0,O.jsx)(se.g,{label:"Tags",children:(0,O.jsx)(ln.B,{id:"tags-input",tags:t.tags,onChange:e=>{t.tags=e,o(r+1)},width:40})}),(0,O.jsx)(se.g,{label:"Folder",children:(0,O.jsx)(dn.Es,{inputId:"dashboard-folder-input",initialTitle:t.meta.folderTitle,initialFolderId:t.meta.folderId,onChange:e=>{t.meta.folderId=e.id,t.meta.folderTitle=e.title,t.meta.hasUnsavedFolderChange=!0},enableCreateNew:!0,dashboardId:t.id,skipInitialLoad:!0})}),(0,O.jsx)(se.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect",children:(0,O.jsx)(ae.S,{value:t.editable,options:[{label:"Editable",value:!0},{label:"Read-only",value:!1}],onChange:e=>{t.editable=e,o(r+1)}})})]}),on.v.featureToggles.dashboardPreviews&&on.v.featureToggles.dashboardPreviewsAdmin&&(0,O.jsx)(Pn,{uid:t.uid}),(0,O.jsx)(Dn.P,{onTimeZoneChange:e=>{t.timezone=e,o(r+1),n(e)},onWeekStartChange:e=>{t.weekStart=e,o(r+1),a(e)},onRefreshIntervalChange:e=>{t.timepicker.refresh_intervals=e.filter((e=>""!==e.trim()))},onNowDelayChange:e=>{t.timepicker.nowDelay=e},onHideTimePickerChange:e=>{t.timepicker.hidden=e,o(r+1)},onLiveNowChange:e=>{t.liveNow=e,o(r+1)},refreshIntervals:t.timepicker.refresh_intervals,timePickerHidden:t.timepicker.hidden,nowDelay:t.timepicker.nowDelay,timezone:t.timezone,weekStart:t.weekStart,liveNow:t.liveNow}),(0,O.jsx)(y.s,{label:"Panel options",isOpen:!0,children:(0,O.jsx)(se.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect",children:(0,O.jsx)(ae.S,{onChange:e=>{t.graphTooltip=e,o(r+1)},options:An,value:t.graphTooltip})})}),(0,O.jsx)("div",{className:"gf-form-button-row",children:t.meta.canDelete&&(0,O.jsx)(kn,{dashboard:t})})]})})}));var Fn=n(31787),En=n(60057);function Vn(e){let{dashboard:t,sectionNav:n}=e;const[a,i]=(0,s.useState)(JSON.stringify(t.getSaveModelClone(),null,2)),r=(0,x.wW)(zn);return(0,O.jsx)(m.T,{navModel:n,subTitle:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on",children:(0,O.jsxs)("div",{className:r.wrapper,children:[(0,O.jsx)(Fn.p,{value:a,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:i,containerStyles:r.codeEditor}),t.meta.canSave&&(0,O.jsx)("div",{children:(0,O.jsx)(l.zx,{type:"submit",onClick:async()=>{await(0,It.h4)().saveJSONDashboard(a),En.H.reloadPage()},children:"Save changes"})})]})})}const zn=e=>({wrapper:(0,f.css)({display:"flex",height:"100%",flexDirection:"column",gap:e.spacing(2)}),codeEditor:(0,f.css)({flexGrow:1})});var Bn,_n,Wn=n(24040),Un=n(76961);const Hn=e=>{let{dashboard:t,onNew:n,onEdit:a}=e;const[i,r]=(0,s.useState)(t.links),o=(e,n)=>{t.links=Gt.moveItemImmutably(i,e,e+n),r(t.links)};return 0===t.links.length?(0,O.jsx)("div",{children:(0,O.jsx)(Me.Z,{onClick:n,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[Bn||(Bn=(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Type"}),(0,O.jsx)("th",{children:"Info"}),(0,O.jsx)("th",{colSpan:3})]})})),(0,O.jsx)("tbody",{children:i.map(((e,n)=>{var s;return(0,O.jsxs)("tr",{children:[(0,O.jsxs)("td",{role:"gridcell",className:"pointer",onClick:()=>a(n),children:[_n||(_n=(0,O.jsx)(C.J,{name:"external-link-alt"})),"   ",e.type]}),(0,O.jsx)("td",{role:"gridcell",children:(0,O.jsxs)(w.Lh,{children:[e.title&&(0,O.jsx)("span",{children:e.title}),"link"===e.type&&(0,O.jsx)("span",{children:e.url}),"dashboards"===e.type&&(0,O.jsx)(Un.P,{tags:null!==(s=e.tags)&&void 0!==s?s:[]})]})}),(0,O.jsx)("td",{style:{width:"1%"},role:"gridcell",children:0!==n&&(0,O.jsx)(k.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>o(n,-1)})}),(0,O.jsx)("td",{style:{width:"1%"},role:"gridcell",children:i.length>1&&n!==i.length-1?(0,O.jsx)(k.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>o(n,1)}):null}),(0,O.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,O.jsx)(k.h,{"aria-label":"copy",name:"copy",onClick:()=>((e,n)=>{t.links=[...i,Object.assign({},e)],r(t.links)})(e)})}),(0,O.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,O.jsx)(Qt.m,{"aria-label":`Delete link with title "${e.title}"`,size:"sm",onConfirm:()=>(e=>{t.links=[...i.slice(0,e),...i.slice(e+1)],r(t.links)})(n)})})]},`${e.title}-${n}`)}))})]}),(0,O.jsx)(Jt,{onClick:n,children:"New link"})]})};function qn(e){let{dashboard:t,sectionNav:n,editIndex:a}=e;const[i,o]=(0,s.useState)(!1),l=void 0!==a;let d;if(l){d={text:i?"New link":"Edit link",subTitle:i?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}}return(0,O.jsxs)(m.T,{navModel:n,pageNav:d,children:[!l&&(0,O.jsx)(Hn,{dashboard:t,onNew:()=>{t.links=[...t.links,Object.assign({},Wn.zA)],o(!0),r.E1.partial({editIndex:t.links.length-1})},onEdit:e=>{o(!1),r.E1.partial({editIndex:e})}}),l&&(0,O.jsx)(Wn.fD,{dashboard:t,editLinkIdx:a,onGoBack:()=>{o(!1),r.E1.partial({editIndex:void 0})}})]})}var Zn,Gn,Qn,Kn,Jn=n(7060);function Yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xn extends s.PureComponent{constructor(e){var t;super(e),t=this,Yn(this,"limit",void 0),Yn(this,"start",void 0),Yn(this,"getVersions",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isAppending:e}),Jn.K8.getHistoryList(t.props.dashboard,{limit:t.limit,start:t.start}).then((e=>{t.setState({isLoading:!1,versions:[...t.state.versions,...t.decorateVersions(e)]}),t.start+=t.limit})).catch((e=>console.log(e))).finally((()=>t.setState({isAppending:!1})))})),Yn(this,"getDiff",(async()=>{const e=this.state.versions.filter((e=>e.checked)),[t,n]=e,s=t.version===this.props.dashboard.version;this.setState({isLoading:!0});const a=await Jn.K8.getDashboardVersion(this.props.dashboard.uid,n.version),i=await Jn.K8.getDashboardVersion(this.props.dashboard.uid,t.version);this.setState({baseInfo:n,isLoading:!1,isNewLatest:s,newInfo:t,viewMode:"compare",diffData:{lhs:a.data,rhs:i.data}})})),Yn(this,"decorateVersions",(e=>e.map((e=>Object.assign({},e,{createdDateString:this.props.dashboard.formatDate(e.created),ageString:this.props.dashboard.getRelativeTime(e.created),checked:!1}))))),Yn(this,"onCheck",((e,t)=>{this.setState({versions:this.state.versions.map((n=>n.id===t?Object.assign({},n,{checked:e.currentTarget.checked}):n))})})),Yn(this,"reset",(()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map((e=>Object.assign({},e,{checked:!1}))),viewMode:"list"})})),this.limit=10,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find((e=>1===e.version))}render(){const{versions:e,viewMode:t,baseInfo:n,newInfo:s,isNewLatest:a,isLoading:i,diffData:r}=this.state,o=2===e.filter((e=>e.checked)).length,l=e.length>1,d=e.length>=this.limit;return"compare"===t?(0,O.jsxs)(m.T,{navModel:this.props.sectionNav,children:[(0,O.jsx)(Jn.Cs,{onClick:this.reset,baseVersion:null==n?void 0:n.version,newVersion:null==s?void 0:s.version,isNewLatest:a}),i?Zn||(Zn=(0,O.jsx)(es,{msg:"Fetching changes…"})):(0,O.jsx)(Jn.U$,{newInfo:s,baseInfo:n,isNewLatest:a,diffData:r})]}):(0,O.jsxs)(m.T,{navModel:this.props.sectionNav,children:[i?Gn||(Gn=(0,O.jsx)(es,{msg:"Fetching history list…"})):(0,O.jsx)(Jn.Sd,{versions:e,onCheck:this.onCheck,canCompare:o}),this.state.isAppending&&(Qn||(Qn=(0,O.jsx)(es,{msg:"Fetching more entries…"}))),l&&(0,O.jsx)(Jn.R1,{hasMore:d,canCompare:o,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()})]})}}const es=e=>{let{msg:t}=e;return(0,O.jsxs)(w.Lh,{children:[Kn||(Kn=(0,O.jsx)(j.$,{})),(0,O.jsx)("em",{children:t})]})};var ts;const ns=()=>r.E1.partial({editview:null,editIndex:null});function ss(e){var t;let{dashboard:n,editview:r,pageNav:l,sectionNav:p}=e;const g=(0,s.useMemo)((()=>function(e){const t=[];e.meta.canEdit&&(t.push({title:"General",id:"settings",icon:"sliders-v-alt",component:Ln}),t.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:an,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),t.push({title:"Variables",id:"templating",icon:"calculator-alt",component:Ke,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),t.push({title:"Links",id:"links",icon:"link",component:qn}));e.meta.canMakeEditable&&t.push({title:"General",icon:"sliders-v-alt",id:"settings",component:as});e.id&&e.meta.canSave&&t.push({title:"Versions",id:"versions",icon:"history",component:Xn});e.id&&e.meta.canAdmin&&(c.ZP.rbacEnabled?u.Vt.hasPermission(h.bW.DashboardsPermissionsRead)&&t.push({title:"Permissions",id:"permissions",icon:"lock",component:Xe}):t.push({title:"Permissions",id:"permissions",icon:"lock",component:pt}));return t.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Vn}),t}(n)),[n]),m=()=>{n.meta.hasUnsavedFolderChange=!1},f=n.meta.folderTitle,v=null!==(t=g.find((e=>e.id===r)))&&void 0!==t?t:g[0],b=u.Vt.hasEditPermissionInFolders,x=n.meta.canSave,y=(0,a.TH)(),w=function(e){const t=new URLSearchParams(e.search).get("editIndex");if(null!=t)return parseInt(t,10);return}(y),j=function(e,t,n,s,a){const r={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};r.children=n.map((e=>({text:e.title,icon:e.icon,id:e.id,url:i.u.getUrlForPartial(a,{editview:e.id,editIndex:null}),active:e===s,parentItem:r,subTitle:e.subTitle}))),e=e.parentItem?Object.assign({},e,{parentItem:Object.assign({},e.parentItem,{parentItem:t.node})}):Object.assign({},e,{parentItem:t.node});return r.parentItem=e,{main:r,node:r.children.find((e=>e.active))}}(l,p,g,v,y),S=c.ZP.featureToggles.topnav?"sm":"md",C=[b&&(0,O.jsx)(bt.t,{dashboard:n,onSaveSuccess:m,variant:"secondary",size:S},"save as"),x&&(0,O.jsx)(bt.i,{dashboard:n,onSaveSuccess:m,size:S},"Save")];return(0,O.jsxs)(O.Fragment,{children:[c.ZP.featureToggles.topnav?(0,O.jsx)(d.A,{actions:C}):(0,O.jsx)(o.X,{title:`${n.title} / Settings`,parent:f,onGoBack:ns,children:C}),(0,O.jsx)(v.component,{sectionNav:j,dashboard:n,editIndex:w})]})}function as(e){let{dashboard:t}=e;return(0,O.jsxs)("div",{children:[ts||(ts=(0,O.jsx)("div",{className:"dashboard-settings__header",children:"Dashboard not editable"})),(0,O.jsx)(l.zx,{type:"submit",onClick:()=>{t.editable=!0,t.meta.canMakeEditable=!1,t.meta.canEdit=!0,t.meta.canSave=!0},children:"Make editable"})]})}},24040:(e,t,n)=>{"use strict";n.d(t,{fD:()=>f,xy:()=>g,zA:()=>h});var s=n(68404),a=n(65678),i=n(4645),r=n(70917),o=n(89716),l=n(75342),d=n(12310),c=n(8006),u=n(45916);const h={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},p=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],g={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},m=Object.keys(g).map((e=>({label:e,value:e}))),f=e=>{let{editLinkIdx:t,dashboard:n,onGoBack:g}=e;const[f,v]=(0,s.useState)(null!==t?n.links[t]:h),b=e=>{const s=[...n.links];s.splice(t,1,e),n.links=s,v(e)},x=e=>{const t=e.currentTarget;b(Object.assign({},f,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},y=f.title===h.title;return(0,u.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,u.jsx)(a.g,{label:"Title",children:(0,u.jsx)(i.I,{name:"title",id:"title",value:f.title,onChange:x,autoFocus:y})}),(0,u.jsx)(a.g,{label:"Type",children:(0,u.jsx)(r.Ph,{inputId:"link-type-input",value:f.type,options:p,onChange:e=>{const t=Object.assign({},f,{type:e.value});"dashboards"===t.type?(t.url="",t.tooltip=""):t.tags=[],b(t)}})}),"dashboards"===f.type&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.g,{label:"With tags",children:(0,u.jsx)(o.B,{tags:f.tags,onChange:e=>{b(Object.assign({},f,{tags:e}))}})})}),"link"===f.type&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.g,{label:"URL",children:(0,u.jsx)(i.I,{name:"url",value:f.url,onChange:x})}),(0,u.jsx)(a.g,{label:"Tooltip",children:(0,u.jsx)(i.I,{name:"tooltip",value:f.tooltip,onChange:x,placeholder:"Open dashboard"})}),(0,u.jsx)(a.g,{label:"Icon",children:(0,u.jsx)(r.Ph,{value:f.icon,options:m,onChange:e=>{b(Object.assign({},f,{icon:e.value}))}})})]}),(0,u.jsxs)(l.s,{label:"Options",isOpen:!0,children:["dashboards"===f.type&&(0,u.jsx)(a.g,{children:(0,u.jsx)(d.X,{label:"Show as dropdown",name:"asDropdown",value:f.asDropdown,onChange:x})}),(0,u.jsx)(a.g,{children:(0,u.jsx)(d.X,{label:"Include current time range",name:"keepTime",value:f.keepTime,onChange:x})}),(0,u.jsx)(a.g,{children:(0,u.jsx)(d.X,{label:"Include current template variable values",name:"includeVars",value:f.includeVars,onChange:x})}),(0,u.jsx)(a.g,{children:(0,u.jsx)(d.X,{label:"Open link in new tab",name:"targetBlank",value:f.targetBlank,onChange:x})})]}),(0,u.jsx)(c.zx,{onClick:g,children:"Apply"})]})}},43033:(e,t,n)=>{"use strict";n.d(t,{u:()=>g});var s=n(52423),a=n(68404),i=n(53257),r=n(25004),o=n(16755),l=n(68624),d=n(8006),c=n(19512),u=n(66190),h=n(45916);const p="showCategory",g=a.memo((e=>{var t,n;let{id:u,title:g,children:v,forceOpen:b,isOpenDefault:x,renderTitle:y,className:w,itemsCount:j,isNested:S=!1}=e;const C=!1!==x,[k,N]=(0,i.Z)(f(u),{isExpanded:C}),O=(0,o.wW)(m),[I,T]=(0,c.K)(),[$,R]=(0,a.useState)(null!==(t=null==k?void 0:k.isExpanded)&&void 0!==t?t:C),P=(0,a.useRef)(0),D=(0,a.useRef)(null),A=I.showCategory===u;(0,a.useEffect)((()=>{var e;P.current&&Date.now()-P.current<200||(A||b)&&($||R(!0),A&&(null===(e=D.current)||void 0===e||e.scrollIntoView()))}),[b,$,A]);const M=(0,a.useCallback)((()=>{P.current=Date.now(),T({[p]:$?void 0:u},!0),N({isExpanded:!$}),R(!$)}),[N,R,T,$,u]);y||(y=function(e){return e||void 0===j||0===j?g:n||(n=(0,h.jsxs)("span",{children:[g," ",(0,h.jsx)(l.A,{value:j})]}))});const L=(0,s.cx)({[O.box]:!0,[O.boxNestedExpanded]:S&&$},w,"options-group"),F=(0,s.cx)(O.header,{[O.headerExpanded]:$,[O.headerNested]:S}),E=(0,s.cx)(O.body,{[O.bodyNested]:S});return(0,h.jsxs)("div",{className:L,"data-testid":"options-category","aria-label":r.wl.components.OptionsGroup.group(u),ref:D,children:[(0,h.jsxs)("div",{className:F,onClick:M,"aria-label":r.wl.components.OptionsGroup.toggle(u),children:[(0,h.jsx)(d.zx,{type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":$,className:O.toggleButton,icon:$?"angle-down":"angle-right",onClick:M}),(0,h.jsx)("h6",{id:`button-${u}`,className:O.title,children:y($)})]}),$&&(0,h.jsx)("div",{className:E,id:u,"aria-labelledby":`button-${u}`,children:v})]})}));g.displayName="OptionsPaneCategory";const m=e=>({box:s.css`
      border-top: 1px solid ${e.colors.border.weak};
    `,boxNestedExpanded:s.css`
      margin-bottom: ${e.spacing(2)};
    `,title:s.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${e.typography.fontWeightMedium};
      margin: 0;
    `,header:s.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightMedium};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    `,toggleButton:s.css`
      align-self: baseline;
    `,headerExpanded:s.css`
      color: ${e.colors.text.primary};
    `,headerNested:s.css`
      padding: ${e.spacing(.5,0,.5,0)};
    `,body:s.css`
      padding: ${e.spacing(1,2,1,4)};
    `,bodyNested:s.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${e.colors.border.weak};
      }
    `}),f=e=>`${u.jy}.optionGroup[${e}]`},81154:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});n(68404);var s=n(43033),a=n(45916);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"items",[]),i(this,"categories",[]),i(this,"parent",void 0),this.props=e}addItem(e){return e.parent=this,this.items.push(e),this}addCategory(e){return e.props.isNested=!0,e.parent=this,this.categories.push(e),this}getCategory(e){let t=this.categories.find((t=>t.props.id===e));return t||(t=new r({title:e,id:e}),this.addCategory(t),t)}render(e){return this.props.customRender?this.props.customRender():(0,a.jsxs)(s.u,Object.assign({},this.props,{children:[this.items.map((t=>t.render(e))),this.categories.map((t=>t.render(e)))]}),this.props.title)}}},98952:(e,t,n)=>{"use strict";n.d(t,{a:()=>g});n(68404);var s=n(94130),a=n.n(s),i=n(25004),r=n(83744),o=n(65678),l=n(52423),d=n(16755),c=n(21888),u=n(45916);function h(e){let{overrides:t}=e;const n=(0,d.wW)(p);return(0,u.jsx)("div",{className:n.wrapper,children:t.map(((e,t)=>(0,u.jsx)(c.u,{content:e.tooltip,placement:"top",children:(0,u.jsx)("div",{"aria-label":e.description,className:n[e.type]})},t.toString())))})}const p=e=>{const t={width:8,height:8,borderRadius:"50%",marginLeft:e.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,l.css)({display:"flex"}),rule:(0,l.css)(Object.assign({},t,{backgroundColor:e.colors.primary.main})),data:(0,l.css)(Object.assign({},t,{backgroundColor:e.colors.warning.main}))}};class g{constructor(e){var t,n,s;s=void 0,(n="parent")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.props=e}getLabel(e){const{title:t,description:n,overrides:s}=this.props;if(!e)return this.parent.props.title!==t||null!=s&&s.length?(0,u.jsxs)(r._,{description:n,children:[t,s&&s.length>0&&(0,u.jsx)(h,{overrides:s})]}):null;const a=[];return this.parent.parent&&a.push(this.highlightWord(this.parent.parent.props.title,e)),this.parent.props.title!==t&&a.push(this.highlightWord(this.parent.props.title,e)),(0,u.jsxs)(r._,{description:n&&this.highlightWord(n,e),category:a,children:[this.highlightWord(t,e),s&&s.length>0&&(0,u.jsx)(h,{overrides:s})]})}highlightWord(e,t){return(0,u.jsx)(a(),{textToHighlight:e,searchWords:[t],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:e}=this.props;e&&e.length}render(e){const{title:t,description:n,render:s,showIf:a,skipField:r}=this.props,l=`${this.parent.props.id} ${t}`;return a&&!a()?null:r?s():(0,u.jsx)(o.g,{label:this.getLabel(e),description:n,"aria-label":i.wl.components.PanelEditor.OptionsPane.fieldLabel(l),children:s()},l)}}},58620:(e,t,n)=>{"use strict";n.d(t,{HZ:()=>g,AL:()=>p});var s=n(82897),a=(n(68404),n(54251)),i=n(2417),r=n(81154),o=n(98952);const l="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",d="An override rule exists for this property";function c(e,t,n){const a=[];if(n)for(const t of n)for(const n of t.fields){if(null!=(0,s.get)(n.config,e.path)){a.push({type:"data",description:l,tooltip:l});break}}return t.overrides.some((t=>t.properties.some((t=>t.id===e.id))))&&a.push({type:"rule",description:d,tooltip:d}),a}var u=n(58575),h=n(45916);function p(e){const{plugin:t,panel:n,onPanelOptionsChanged:a,onFieldConfigsChange:l,data:d,dashboard:p,instanceState:m}=e,f=n.getOptions(),v=n.fieldConfig,b={},x=function(e){var t;let{data:n,replaceVariables:s,options:a,eventBus:r,instanceState:o}=e;const l=null!==(t=null==n?void 0:n.series)&&void 0!==t?t:[];return{data:l,replaceVariables:s,options:a,eventBus:r,getSuggestions:e=>(0,i.PW)(l,e),instanceState:o}}({data:d,replaceVariables:n.replaceVariables,options:f,eventBus:p.events,instanceState:m}),y=e=>{var n;const s=null!==(n=e&&e[0])&&void 0!==n?n:`${t.meta.name}`,a=b[s];return a||(b[s]=new r.j({title:s,id:s}))},w={getValue:e=>(0,s.get)(f,e),onChange:(e,t)=>{const n=(0,u.hs)(f,e,t);a(n)}};g(t.getPanelOptionsSupplier(),w,y,x);for(const e of t.fieldConfigRegistry.list()){if(e.isCustom&&e.showIf&&!e.showIf(v.defaults.custom,null==d?void 0:d.series))continue;if(e.hideFromDefaults)continue;const t=y(e.category),n=e.editor,a=v.defaults,i=e.isCustom?a.custom?(0,s.get)(a.custom,e.path):void 0:(0,s.get)(a,e.path);e.getItemsCount&&(t.props.itemsCount=e.getItemsCount(i)),t.addItem(new o.a({title:e.name,description:e.description,overrides:c(e,v,null==d?void 0:d.series),render:function(){return(0,h.jsx)(n,{value:i,onChange:t=>{l((0,u.uJ)(v,e.path,t,e.isCustom))},item:e,context:x,id:e.id})}}))}return Object.values(b)}function g(e,t,n,s,i){const r=new a.rt;e(r,s);for(const e of r.getItems()){var l,d;if(e.showIf&&!e.showIf(s.options,s.data))continue;let r=i;if(r?null!==(l=e.category)&&void 0!==l&&null!==(d=l[0])&&void 0!==d&&d.length&&(r=r.getCategory(e.category[0])):r=n(e.category),(0,a.j)(e)){const a=e.getNestedValueAccess(t),i=a.getContext?a.getContext(s):Object.assign({},s,{options:t.getValue(e.path)});g(e.getBuilder(),a,n,i,r);continue}const c=e.editor;r.addItem(new o.a({title:e.name,description:e.description,render:function(){return(0,h.jsx)(c,{value:t.getValue(e.path),onChange:n=>{t.onChange(e.path,n)},item:e,context:s,id:e.id})}}))}}},66190:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>h,K9:()=>f,OT:()=>b,ZP:()=>x,g_:()=>v,jy:()=>d,my:()=>m,yi:()=>g});var s=n(23067),a=n(28173),i=n(12717),r=n(78130),o=n(38591),l=n(15968);const d="grafana.dashboard.editor.ui",c={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:l.d1.Fill},u=(0,s.oM)({name:"panelEditor",initialState:(()=>{const e=r.Z.getObject(d,c);let t=Object.assign({},e);return"string"==typeof e.topPaneSize&&(t=Object.assign({},e,{topPaneSize:parseFloat(e.topPaneSize)/100})),{getPanel:()=>new o.r({}),getSourcePanel:()=>new o.r({}),getData:()=>({state:a.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:Object.assign({},c,t)}})(),reducers:{updateEditorInitState:(e,t)=>{e.getPanel=()=>t.payload.panel,e.getSourcePanel=()=>t.payload.sourcePanel,e.initDone=!0,e.isOpen=!0,e.shouldDiscardChanges=!1},setEditorPanelData:(e,t)=>{e.getData=()=>t.payload},setDiscardChanges:(e,t)=>{e.shouldDiscardChanges=t.payload},setPanelEditorUIState:(e,t)=>{e.ui=Object.assign({},e.ui,t.payload),!e.ui.isPanelOptionsVisible&&e.isVizPickerOpen&&(e.isVizPickerOpen=!1)},toggleVizPicker:(e,t)=>{e.isVizPickerOpen=t.payload,e.isVizPickerOpen&&(e.ui.isPanelOptionsVisible=!0)},toggleTableView(e){e.tableViewEnabled=!e.tableViewEnabled},closeEditor:e=>{e.isOpen=!1,e.initDone=!1,e.isVizPickerOpen=!1,e.tableViewEnabled=!1}}}),{updateEditorInitState:h,setEditorPanelData:p,setDiscardChanges:g,closeEditor:m,setPanelEditorUIState:f,toggleVizPicker:v,toggleTableView:b}=u.actions,x={panelEditor:u.reducer}},15968:(e,t,n)=>{"use strict";let s,a,i;n.d(t,{Ip:()=>s,Ok:()=>o,d1:()=>a,d7:()=>r}),function(e){e.Query="query",e.Transform="transform",e.Visualize="visualize",e.Alert="alert"}(s||(s={})),function(e){e[e.Fill=0]="Fill",e[e.Fit=1]="Fit",e[e.Exact=2]="Exact"}(a||(a={})),function(e){e[e.Off=0]="Off",e[e.Table=1]="Table"}(i||(i={}));const r=[{value:a.Fill,label:"Fill",description:"Use all available space"},{value:a.Exact,label:"Actual",description:"Make same size as on the dashboard"}];i.Off,i.Table;let o;!function(e){e[e.Visualizations=0]="Visualizations",e[e.LibraryPanels=1]="LibraryPanels",e[e.Suggestions=2]="Suggestions"}(o||(o={}))},58575:(e,t,n)=>{"use strict";n.d(t,{hs:()=>d,jF:()=>r,sY:()=>o,uJ:()=>l});var s=n(82897),a=n(42949),i=n(15968);function r(e,t,n,s){if(e===i.d1.Fill)return{width:t,height:n};const r=(window.innerWidth-60-4*a.hD)/a.cz*s.gridPos.w,o=a.K3*s.gridPos.h+48,l=Math.min(t/r,n/o);return r<=t&&o<=n?{width:r,height:o}:{width:r*l,height:o*l}}function o(e){return!1===(null==e?void 0:e.meta.skipDataQuery)}const l=(e,t,n,a)=>{let i=Object.assign({},e.defaults);const r=null==n||""===n;return a?i.custom?i.custom=r?(0,s.omit)(i.custom,t):d(i.custom,t,n):r||(i.custom=d(i.custom,t,n)):i=r?(0,s.omit)(i,t):d(i,t,n),Object.assign({},e,{defaults:i})};function d(e,t,n){const s=Array.isArray(t)?t:t.split("."),a=s.shift();if(a.endsWith("]")){const t=a.lastIndexOf("["),i=+a.substring(t+1,a.length-1),r=a.substring(0,t);let o=e[r];const l=Array.isArray(o)?[...o]:[];return s.length&&(o=l[i],null!=o&&"object"==typeof o||(o={}),n=d(o,s,n)),l[i]=n,Object.assign({},e,{[r]:l})}if(!s.length)return Object.assign({},e,{[a]:n});let i=e[a];return null!=i&&"object"==typeof i||(i={}),Object.assign({},e,{[a]:d(i,s,n)})}},22259:(e,t,n)=>{"use strict";n.d(t,{Go:()=>o,Jc:()=>l});var s=n(52423),a=(n(68404),n(66876)),i=n(16755),r=n(45916);const o=function(){const e=(0,i.wW)(c),t=d();return t.hide?null:(0,r.jsx)("div",{className:e.footer,children:(0,r.jsx)("span",{className:e.logoText,children:(0,r.jsxs)("a",{href:t.link,target:"_blank",rel:"noreferrer noopener",children:[t.text," ",(0,r.jsx)("img",{className:e.logoImg,alt:"",src:t.logo})]})})})};function l(e){d=e}let d=()=>({hide:!1,text:"powered by Grafana",logo:"public/img/grafana_icon.svg",link:"https://grafana.com/"});const c=e=>({footer:s.css`
    position: absolute;
    height: 30px;
    bottom: 0;
    width: 100%;
    background-color: ${a.alpha(e.colors.background.canvas,.7)};
    text-align: right;
    font-size: ${e.typography.body.fontSize};
    z-index: ${e.zIndex.navbarFixed};
  `,logoText:s.css`
    margin-right: ${e.spacing(1)};
  `,logoImg:s.css`
    height: 100%;
    padding: ${e.spacing(.25,0,.5,0)};
  `})},50584:(e,t,n)=>{"use strict";n.d(t,{i:()=>l,t:()=>d});n(68404);var s=n(25004),a=n(40941),i=n(8006),r=n(48460),o=n(45916);const l=e=>{let{dashboard:t,onSaveSuccess:n,size:l}=e;return(0,o.jsx)(a.JY,{children:e=>{let{showModal:a,hideModal:d}=e;return(0,o.jsx)(i.zx,{size:l,onClick:()=>{a(r.d,{dashboard:t,onSaveSuccess:n,onDismiss:d})},"aria-label":s.wl.pages.Dashboard.Settings.General.saveDashBoard,children:"Save dashboard"})}})},d=e=>{let{dashboard:t,onSaveSuccess:n,variant:l,size:d}=e;return(0,o.jsx)(a.JY,{children:e=>{let{showModal:a,hideModal:c}=e;return(0,o.jsx)(i.zx,{size:d,onClick:()=>{a(r.d,{dashboard:t,onSaveSuccess:n,onDismiss:c,isCopy:!0})},variant:l,"aria-label":s.wl.pages.Dashboard.Settings.General.saveAsDashBoard,children:"Save as"})}})}},48460:(e,t,n)=>{"use strict";n.d(t,{d:()=>Ae});var s,a,i=n(68404),r=n(66015),o=n(65737),l=n(93570),d=n(81691),c=n(16093),u=n(10453),h=n(87152),p=n(42200),g=n(91280),m=n(52423),f=n(16755),v=n(2843),b=n(45916);const x=e=>({root:(0,m.css)({marginTop:e.spacing(1)}),error:(0,m.css)({fontFamily:e.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),y=function(e){let{dashboard:t}=e;const n=(0,f.wW)(x),{loading:i,value:o,error:l}=(0,r.Z)((async()=>{const e=t.getSaveModelClone();return p.ae.validateDashboard(e).catch((e=>{if(e.status>=500)throw e;return e.data}))}),[t]);let d;if(i)d=s||(s=(0,b.jsx)(v.b,{severity:"info",title:"Checking dashboard validity"}));else if(o)o.isValid||(d=(0,b.jsxs)(v.b,{severity:"warning",title:"Dashboard failed schema validation",children:[a||(a=(0,b.jsx)("p",{children:"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"})),(0,b.jsx)("div",{className:n.error,children:o.message})]}));else{var c;const e=null!==(c=null==l?void 0:l.message)&&void 0!==c?c:"Unknown error";d=(0,b.jsx)(v.b,{severity:"info",title:"Error checking dashboard validity",children:(0,b.jsx)("p",{className:n.error,children:e})})}return d?(0,b.jsx)("div",{className:n.root,children:d}):null};var w,j,S,C=n(865),k=n(28260);const N=e=>{let{diff:t,oldValue:n,newValue:s}=e;const a=(0,f.wW)(O),i=(0,r.Z)((async()=>{const e=JSON.stringify(null!=n?n:{},null,2),a=JSON.stringify(null!=s?s:{},null,2);let i;const r=[];let o=0;if(t)for(const[e,n]of Object.entries(t)){const t=(0,b.jsx)(C.B,{diffs:n,title:e},e);"schemaVersion"===e?i=t:r.push(t),o+=n.length}return{schemaChange:i,diffs:r,count:o,showDiffs:o<15,jsonView:(0,b.jsx)(k.Z,{oldValue:e,newValue:a})}}),[t,n,s]),{value:o}=i;return o&&n?o.count<1?j||(j=(0,b.jsx)("div",{children:"No changes in this dashboard"})):(0,b.jsxs)("div",{children:[o.schemaChange&&(0,b.jsx)("div",{className:a.spacer,children:o.schemaChange}),o.showDiffs&&(0,b.jsx)("div",{className:a.spacer,children:o.diffs}),S||(S=(0,b.jsx)("h4",{children:"JSON Model"})),o.jsonView]}):w||(w=(0,b.jsx)(d.$,{}))},O=e=>({spacer:m.css`
    margin-bottom: ${e.v1.spacing.xl};
  `});var I=n(2024),T=n(78941),$=n(8006),R=n(50584),P=n(64214),D=n(36298),A=n(31181),M=n(80795),L=n(2247),F=n(47900),E=n(68374),V=n(26056),z=n(1671),B=n(64850),_=n(8105);const W=e=>{const[t,n]=(0,P.default)((async(e,t,n)=>await(async(e,t,n)=>{let s=t.folderId;var a;void 0===s&&(s=null!==(a=n.meta.folderId)&&void 0!==a?a:e.folderId);const i=await(0,z.uC)(Object.assign({},t,{folderId:s,dashboard:e}));return await E.Vt.fetchUserPermissions(),i})(e,t,n)),[]),s=(0,B.I0)(),a=(0,F.iG)();return(0,i.useEffect)((()=>{var n;t.error&&!t.loading&&a.error(null!==(n=t.error.message)&&void 0!==n?n:"Error saving dashboard");if(t.value){e.version=t.value.version,e.clearUnsavedChanges(),L.Z.publish(new _.Jd),a.success("Dashboard saved"),(0,A.ff)("grafana_dashboard_"+(e.id?"saved":"created"),{name:e.title,url:t.value.url});const n=M.E1.getLocation().pathname,i=D.u.stripBaseFromUrl(t.value.url);i!==n&&setTimeout((()=>M.E1.replace(i))),e.meta.isStarred&&s((0,V.gd)({id:e.uid,title:e.title,url:i}))}}),[e,t,a,s]),{state:t,onDashboardSave:n}};var U,H,q,Z;const G=e=>{let{dashboard:t,dashboardSaveModel:n,error:s,onDismiss:a}=e;const{onDashboardSave:r}=W(t);return(0,i.useEffect)((()=>{s.data&&K(s.data.status)&&(s.isHandled=!0)}),[s]),(0,b.jsxs)(b.Fragment,{children:[s.data&&"version-mismatch"===s.data.status&&(0,b.jsx)(I.s,{isOpen:!0,title:"Conflict",body:U||(U=(0,b.jsxs)("div",{children:["Someone else has updated this dashboard ",(0,b.jsx)("br",{})," ",(0,b.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await r(n,{overwrite:!0},t),a()},onDismiss:a}),s.data&&"name-exists"===s.data.status&&(0,b.jsx)(I.s,{isOpen:!0,title:"Conflict",body:H||(H=(0,b.jsxs)("div",{children:["A dashboard with the same name in selected folder already exists. ",(0,b.jsx)("br",{}),(0,b.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await r(n,{overwrite:!0},t),a()},onDismiss:a}),s.data&&"plugin-dashboard"===s.data.status&&(0,b.jsx)(Q,{dashboard:t,onDismiss:a})]})},Q=e=>{let{onDismiss:t,dashboard:n}=e;const{onDashboardSave:s}=W(n),a=(0,f.wW)(J);return(0,b.jsxs)(T.u,{className:a.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:t,children:[(0,b.jsxs)("div",{className:a.modalText,children:["Your changes will be lost when you update the plugin.",q||(q=(0,b.jsx)("br",{})),Z||(Z=(0,b.jsxs)("small",{children:["Use ",(0,b.jsx)("strong",{children:"Save As"})," to create custom version."]}))]}),(0,b.jsxs)(T.u.ButtonRow,{children:[(0,b.jsx)($.zx,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"}),(0,b.jsx)(R.t,{dashboard:n,onSaveSuccess:t}),(0,b.jsx)($.zx,{variant:"destructive",onClick:async()=>{await s(n.getSaveModelClone(),{overwrite:!0},n),t()},children:"Overwrite"})]})]})},K=e=>{switch(e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},J=e=>({modal:m.css`
    width: 500px;
  `,modalText:m.css`
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.primary};
    margin-bottom: ${e.spacing(4)}
    padding-top: ${e.spacing(2)};
  `,modalButtonRow:m.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${e.spacing(2)};
    }
  `});var Y,X=n(3218),ee=n(65678),te=n(4645),ne=n(35258),se=n(70800),ae=n(54761),ie=n(33257),re=n(77281);const oe=["ref"];const le=e=>{var t;let{dashboard:n,isNew:s,onSubmit:a,onCancel:i,onSuccess:r}=e;const o={title:s?n.title:`${n.title} Copy`,$folder:{id:n.meta.folderId,title:n.meta.folderTitle},copyTags:!1};return(0,b.jsx)(X.l,{defaultValues:o,onSubmit:async e=>{if(!a)return;const t=(e=>{const t=e.getSaveModelClone();return t.id=null,t.uid="",t.title+=" Copy",t.editable=!0,e.id>0&&t.panels.forEach((e=>{"graph"===e.type&&e.alert&&delete e.thresholds,delete e.alert})),delete t.autoUpdate,t})(n);t.title=e.title,e.copyTags||(t.tags=[]);"success"===(await a(t,{folderId:e.$folder.id},n)).status&&r()},children:e=>{var a;let{register:r,control:o,errors:l,getValues:d}=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ee.g,{label:"Dashboard name",invalid:!!l.title,error:null===(a=l.title)||void 0===a?void 0:a.message,children:(0,b.jsx)(te.I,Object.assign({},r("title",{validate:(c=d,async e=>{var t;if(e&&e===(null===(t=c().$folder.title)||void 0===t?void 0:t.trim()))return"Dashboard name cannot be the same as folder name";try{return await re.t.validateNewDashboardName(c().$folder.id,e),!0}catch(e){return e instanceof Error?e.message:"Dashboard name is invalid"}})}),{"aria-label":"Save dashboard title field",autoFocus:!0}))}),(0,b.jsx)(ee.g,{label:"Folder",children:(0,b.jsx)(ne.g,{render:e=>{let{}=e,t=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e.field,oe);return(0,b.jsx)(ie.Es,Object.assign({},t,{dashboardId:n.id,initialFolderId:n.meta.folderId,initialTitle:n.meta.folderTitle,enableCreateNew:!0}))},control:o,name:"$folder"})}),!s&&(0,b.jsx)(ee.g,{label:"Copy tags",children:(0,b.jsx)(se.r,Object.assign({},r("copyTags")))}),t||(t=(0,b.jsxs)(ae.Lh,{children:[(0,b.jsx)($.zx,{type:"button",variant:"secondary",onClick:i,fill:"outline",children:"Cancel"}),Y||(Y=(0,b.jsx)($.zx,{type:"submit","aria-label":"Save dashboard button",children:"Save"}))]}))]});var c}})};var de,ce=n(25004),ue=n(68522),he=n(12310),pe=n(93194);const ge=e=>{var t;let{dashboard:n,saveModel:s,options:a,onSubmit:r,onCancel:o,onSuccess:l,onOptionsChange:d}=e;const c=(0,i.useMemo)((()=>n.hasTimeChanged()),[n]),u=(0,i.useMemo)((()=>n.hasVariableValuesChanged()),[n]),[h,p]=(0,i.useState)(!1);return(0,b.jsx)(X.l,{onSubmit:async e=>{if(!r)return;p(!0),a=Object.assign({},a,{message:e.message});"success"===(await r(s.clone,a,n)).status?(a.saveVariables&&n.resetOriginalVariables(),a.saveTimerange&&n.resetOriginalTime(),l()):p(!1)},children:e=>{let{register:n,errors:i}=e;const r=n("message");return(0,b.jsxs)(ue.Stack,{direction:"column",gap:2,children:[c&&(0,b.jsx)(he.X,{checked:!!a.saveTimerange,onChange:()=>d(Object.assign({},a,{saveTimerange:!a.saveTimerange})),label:"Save current time range as dashboard default","aria-label":ce.wl.pages.SaveDashboardModal.saveTimerange}),u&&(0,b.jsx)(he.X,{checked:!!a.saveVariables,onChange:()=>d(Object.assign({},a,{saveVariables:!a.saveVariables})),label:"Save current variable values as dashboard default","aria-label":ce.wl.pages.SaveDashboardModal.saveVariables}),(0,b.jsx)(pe.K,Object.assign({},r,{"aria-label":"message",value:a.message,onChange:e=>{d(Object.assign({},a,{message:e.currentTarget.value})),r.onChange(e)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),(0,b.jsxs)(ue.Stack,{alignItems:"center",children:[t||(t=(0,b.jsx)($.zx,{variant:"secondary",onClick:o,fill:"outline",children:"Cancel"})),(0,b.jsx)($.zx,{type:"submit",disabled:!s.hasChanges,icon:h?"fa fa-spinner":void 0,"aria-label":ce.wl.pages.SaveDashboardModal.save,children:"Save"}),!s.hasChanges&&(de||(de=(0,b.jsx)("div",{children:"No changes to save"})))]})]})}})};var me,fe,ve,be,xe,ye=n(3574),we=n(11818);const je=e=>{let{dashboard:t,onCancel:n}=e;const[s,a]=(0,i.useState)((()=>{const e=t.getSaveModelClone();return delete e.id,JSON.stringify(e,null,2)})),r=(0,i.useCallback)((()=>{const e=new Blob([s],{type:"application/json;charset=utf-8"});(0,ye.saveAs)(e,t.title+"-"+(new Date).getTime()+".json")}),[t.title,s]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(ue.Stack,{direction:"column",gap:2,children:[(0,b.jsxs)("div",{children:["This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",me||(me=(0,b.jsx)("br",{})),fe||(fe=(0,b.jsxs)("i",{children:["See"," ",(0,b.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),ve||(ve=(0,b.jsx)("br",{}))," ",be||(be=(0,b.jsx)("br",{})),xe||(xe=(0,b.jsx)("strong",{children:"File path: "}))," ",t.meta.provisionedExternalId]}),(0,b.jsx)(pe.K,{spellCheck:!1,value:s,onChange:e=>{a(e.currentTarget.value)},className:Se.json}),(0,b.jsxs)(ae.Lh,{children:[(0,b.jsx)($.zx,{variant:"secondary",onClick:n,fill:"outline",children:"Cancel"}),(0,b.jsx)(we.m,{icon:"copy",getText:()=>s,children:"Copy JSON to clipboard"}),(0,b.jsx)($.zx,{type:"submit",onClick:r,children:"Save JSON to file"})]})]})})},Se={json:m.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `};var Ce,ke,Ne,Oe,Ie,Te=n(37625),$e=n(81508),Re=n(30778);function Pe(e){var t,n,s,a;const{dashboard:o,saveModel:l,onSubmit:c,onCancel:u,onSuccess:h,onOptionsChange:p,isNew:g,isCopy:m}=e,f=(0,i.useMemo)((()=>o.hasTimeChanged()),[o]),v=(0,i.useMemo)((()=>o.hasVariableValuesChanged()),[o]),[x,y]=(0,i.useState)(!1),[w,j]=(0,i.useState)(),[S,C]=(0,i.useState)(o.uid),[k,N]=(0,i.useState)(Re.c.Save),O=(0,i.useMemo)((()=>{switch(k){case Re.c.PR:return"Create PR";case Re.c.Push:return"Push"}return console.log("???",k),"Save"}),[k]),I=(0,r.Z)((async()=>{var e,t;const n=await(0,$e.$)().getOptions(o.uid);return N(null!==(e=null===(t=n.workflows[0])||void 0===t?void 0:t.value)&&void 0!==e?e:Re.c.Save),n}),[o.uid]);if(I.error)return Ce||(Ce=(0,b.jsx)("div",{children:"Error loading workflows"}));if(I.loading||!I.value)return ke||(ke=(0,b.jsx)(d.$,{}));if(w)return(0,b.jsxs)("div",{children:[w.url&&(0,b.jsxs)("div",{children:[Ne||(Ne=(0,b.jsx)("h2",{children:"View pull request"})),(0,b.jsx)("a",{href:w.url,children:w.url})]}),(0,b.jsx)("pre",{children:JSON.stringify(w)}),(0,b.jsx)(ae.Lh,{children:(0,b.jsx)($.zx,{variant:"secondary",onClick:u,children:"Close"})})]});let T=e.options;const R=null!==(t=null===(n=I.value)||void 0===n?void 0:n.workflows)&&void 0!==t?t:[],P=l.hasChanges||g||m;return(0,b.jsx)(X.l,{onSubmit:async e=>{if(!c)return;y(!0);let t=l.clone.uid;(g||m)&&(t=S,t.endsWith("-dash.json")||(t+="-dash.json"));const n=await(0,$e.$)().write(t,{body:l.clone,kind:"dashboard",title:e.title,message:e.message,workflow:k});console.log("GOT",n),200===n.code?(T.saveVariables&&o.resetOriginalVariables(),T.saveTimerange&&o.resetOriginalTime(),n.pending||(h(),(g||m)&&M.E1.push(`/g/${t}`))):y(!1),j(n)},children:e=>{let{register:t,errors:n}=e;return(0,b.jsxs)(ue.Stack,{direction:"column",gap:1,children:[(0,b.jsxs)(ue.Stack,{direction:"column",gap:1,children:[f&&(0,b.jsx)(he.X,{checked:!!T.saveTimerange,onChange:()=>p(Object.assign({},T,{saveTimerange:!T.saveTimerange})),label:"Save current time range as dashboard default","aria-label":ce.wl.pages.SaveDashboardModal.saveTimerange}),v&&(0,b.jsx)(he.X,{checked:!!T.saveVariables,onChange:()=>p(Object.assign({},T,{saveVariables:!T.saveVariables})),label:"Save current variable values as dashboard default","aria-label":ce.wl.pages.SaveDashboardModal.saveVariables})]}),(g||m)&&(0,b.jsx)(ee.g,{label:"Path",children:(0,b.jsx)(te.I,{value:null!=S?S:"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:e=>C(e.currentTarget.value)})}),!De(I.value)&&(s||(s=(0,b.jsx)(ee.g,{label:"Workflow",children:(0,b.jsx)(Te.S,{value:k,options:R,onChange:N})}))),k===Re.c.PR&&(0,b.jsx)(ee.g,{label:"PR Title",children:(0,b.jsx)(te.I,Object.assign({},t("title"),{required:!0,placeholder:"Enter a PR title",autoFocus:!0}))}),(0,b.jsx)(ee.g,{label:"Message",children:(0,b.jsx)(pe.K,Object.assign({},t("message"),{placeholder:"Add a note to describe your changes.",rows:5}))}),(0,b.jsxs)(ae.Lh,{children:[a||(a=(0,b.jsx)($.zx,{variant:"secondary",onClick:u,fill:"outline",children:"Cancel"})),(0,b.jsx)($.zx,{type:"submit",disabled:!P,icon:x?"fa fa-spinner":void 0,"aria-label":ce.wl.pages.SaveDashboardModal.save,children:O}),!P&&(Oe||(Oe=(0,b.jsx)("div",{children:"No changes to save"})))]})]})}})}function De(e){return 1===e.workflows.length&&null!=e.workflows.find((e=>e.value===Re.c.Save))}const Ae=e=>{var t,n,s,a,m;let{dashboard:f,onDismiss:v,onSaveSuccess:x,isCopy:w}=e;const[j,S]=(0,i.useState)({}),C=o.v.featureToggles.dashboardsFromStorage&&(null===(t=f.uid)||void 0===t?void 0:t.indexOf("/"))>0,k=f.meta.provisioned&&!C,O=0===f.version&&!C,I=(0,r.Z)((async()=>{if(O)return;return(await p.ae.getDashboardByUid(f.uid)).dashboard}),[f,O]),T=(0,i.useMemo)((()=>{const e=f.getSaveModelClone({saveTimerange:Boolean(j.saveTimerange),saveVariables:Boolean(j.saveVariables)});if(!I.value)return{clone:e,diff:{},diffCount:0,hasChanges:!1};const t=JSON.stringify(e,null,2),n=JSON.parse(t),s=(0,g.Q$)(I.value,n);let a=0;for(const e of Object.values(s))a+=e.length;return{clone:e,diff:s,diffCount:a,hasChanges:a>0&&!O}}),[f,I.value,j,O]),[$,R]=(0,i.useState)(!1),{state:P,onDashboardSave:D}=W(f),A=x?()=>{v(),x()}:v;if(P.error&&(0,l.kW)(P.error)&&!P.error.isHandled)return(0,b.jsx)(G,{error:P.error,dashboard:f,dashboardSaveModel:T.clone,onDismiss:v});let M="Save dashboard";return w?M="Save dashboard copy":k&&(M="Provisioned dashboard"),(0,b.jsxs)(c.d,{title:M,onClose:v,width:"40%",subtitle:f.title,tabs:(0,b.jsxs)(u.J,{children:[(0,b.jsx)(h.O,{label:"Details",active:!$,onChangeTab:()=>R(!1)}),T.hasChanges&&(0,b.jsx)(h.O,{label:"Changes",active:$,onChangeTab:()=>R(!0),counter:T.diffCount})]}),expandable:!0,scrollableContent:!0,children:[$?(0,b.jsx)(N,{diff:T.diff,oldValue:I.value,newValue:T.clone}):P.loading?Ie||(Ie=(0,b.jsx)("div",{children:(0,b.jsx)(d.$,{})})):C?n||(n=(0,b.jsx)(Pe,{dashboard:f,saveModel:T,onCancel:v,onSuccess:A,onSubmit:D,options:j,onOptionsChange:S,isNew:O,isCopy:w})):O||w?s||(s=(0,b.jsx)(le,{dashboard:f,onCancel:v,onSuccess:A,onSubmit:D,isNew:O})):k?a||(a=(0,b.jsx)(je,{dashboard:f,onCancel:v,onSuccess:A})):m||(m=(0,b.jsx)(ge,{dashboard:f,saveModel:T,onCancel:v,onSuccess:A,onSubmit:D,options:j,onOptionsChange:S})),o.v.featureToggles.showDashboardValidationWarnings&&(0,b.jsx)(y,{dashboard:f})]})}},60129:(e,t,n)=>{"use strict";n.d(t,{V8:()=>ut,u9:()=>dt});var s,a,i,r,o=n(68404),l=n(31181),d=n(55278),c=n(78941),u=n(71873),h=n(46782),p=n(68374),g=n(35448),m=n(52423),f=n(95484),v=n(25004),b=n(80589),x=n(16755),y=n(40941),w=n(54761),j=n(81691),S=n(2843),C=n(65678),k=n(4645),N=n(11818),O=n(8006),I=n(59196),T=n(41519),$=n(71980),R=n(12310),P=n(45916);const D=e=>{let{disabled:t,acknowledgements:n,onAcknowledge:o}=e;const l=v.wl.pages.ShareDashboardModal.PublicDashboard;return(0,P.jsxs)(P.Fragment,{children:[s||(s=(0,P.jsx)("p",{children:"Before you click Save, please acknowledge the following information:"})),(0,P.jsx)($.C,{disabled:t,children:(0,P.jsxs)(w.wc,{spacing:"md",children:[(0,P.jsxs)(w.Lh,{spacing:"none",children:[(0,P.jsx)(R.X,{label:"Your entire dashboard will be public",value:n.public,"data-testid":l.WillBePublicCheckbox,onChange:e=>o("public",e.currentTarget.checked)}),a||(a=(0,P.jsx)(O.Qj,{variant:"primary",href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:"Learn more about public dashboards"}))]}),(0,P.jsxs)(w.Lh,{spacing:"none",children:[(0,P.jsx)(R.X,{label:"Publishing currently only works with a subset of datasources",value:n.datasources,"data-testid":l.LimitedDSCheckbox,onChange:e=>o("datasources",e.currentTarget.checked)}),i||(i=(0,P.jsx)(O.Qj,{variant:"primary",href:"https://grafana.com/docs/grafana/latest/datasources/",target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:"Learn more about public datasources"}))]}),(0,P.jsxs)(w.Lh,{spacing:"none",children:[(0,P.jsx)(R.X,{label:"Making your dashboard public will cause queries to run each time the dashboard is viewed which may increase costs",value:n.usage,"data-testid":l.CostIncreaseCheckbox,onChange:e=>o("usage",e.currentTarget.checked)}),r||(r=(0,P.jsx)(O.Qj,{variant:"primary",href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:"Learn more about query caching"}))]})]})})]})};var A=n(83744),M=n(38942),L=n(70800),F=n(6663);const E=()=>{const{width:e}=(0,F.Z)();return e>1024};var V,z,B,_,W=n(76926);const U=e=>{let{isAnnotationsEnabled:t,disabled:n,isPubDashEnabled:s,onToggleEnabled:a,onToggleAnnotations:i,dashboard:r}=e;const o=v.wl.pages.ShareDashboardModal.PublicDashboard,d=(0,x.wW)(H),c=E(),u=(0,W.O)(r.getDefaultTime(),r);return(0,P.jsxs)(P.Fragment,{children:[V||(V=(0,P.jsx)("h4",{className:"share-modal-info-text",children:"Public dashboard configuration"})),(0,P.jsx)($.C,{disabled:n,className:d.dashboardConfig,children:(0,P.jsxs)(w.wc,{spacing:"md",children:[(0,P.jsxs)(w.Ar,{orientation:c?0:1,spacing:"xs",justify:"space-between",children:[z||(z=(0,P.jsx)(A._,{description:"The public dashboard uses the default time settings of the dashboard",children:"Time range"})),(0,P.jsx)(M.K,{value:u,disabled:!0,onChange:()=>{}})]}),(0,P.jsxs)(w.Ar,{orientation:c?0:1,spacing:"xs",justify:"space-between",children:[B||(B=(0,P.jsx)(A._,{description:"Show annotations on public dashboard",children:"Show annotations"})),(0,P.jsx)(L.r,{"data-testid":o.EnableAnnotationsSwitch,value:t,onChange:()=>{(0,l.ff)("grafana_dashboards_annotations_clicked",{action:t?"disable":"enable"}),i()}})]}),(0,P.jsxs)(w.Ar,{orientation:c?0:1,spacing:"xs",justify:"space-between",children:[_||(_=(0,P.jsx)(A._,{description:"Configures whether current dashboard can be available publicly",children:"Enabled"})),(0,P.jsx)(L.r,{"data-testid":o.EnableSwitch,value:s,onChange:()=>{(0,l.ff)("grafana_dashboards_public_enable_clicked",{action:s?"disable":"enable"}),a()}})]})]})})]})},H=e=>({dashboardConfig:m.css`
    margin: ${e.spacing(0,0,3,0)};
  `});var q,Z;const G=()=>(0,P.jsxs)(P.Fragment,{children:[q||(q=(0,P.jsx)("p",{children:"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."})),Z||(Z=(0,P.jsxs)("p",{children:["We'd love your feedback. To share, please comment on this"," ",(0,P.jsx)("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link",children:"GitHub discussion"}),"."]}))]}),Q=e=>e.length>0,K=e=>""!==(null==e?void 0:e.uid)&&void 0!==(null==e?void 0:e.uid),J=e=>`${(0,h.iE)().appUrl}public-dashboards/${e.accessToken}`;var Y,X,ee,te,ne,se,ae,ie,re=n(97801),oe=n(16371),le=n(64850),de=n(8105);const ce=e=>{const t=(0,b.N)(),n=(0,x.wW)(ue),{showModal:s,hideModal:a}=(0,o.useContext)(y.kr),i=E(),r=e.dashboard.getVariables(),d=v.wl.pages.ShareDashboardModal.PublicDashboard,{hasPublicDashboard:c}=e.dashboard.meta,{isLoading:u,data:h,isError:p,isFetching:g}=(0,T.Ym)(e.dashboard.uid,{skip:!c}),[$,{isLoading:R}]=(0,T.zZ)(),[A,{isLoading:M}]=(0,T.Mi)(),[L,F]=(0,o.useState)({public:!1,datasources:!1,usage:!1}),[V,z]=(0,o.useState)({isEnabled:!1,wasTouched:!1}),[B,_]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const n=new f.w0;return n.add(e.dashboard.events.subscribe(de.hS,t)),(0,l.ff)("grafana_dashboards_public_share_viewed"),()=>n.unsubscribe()}),[e.dashboard.events,t]),(0,o.useEffect)((()=>{K(h)&&(F({public:!0,datasources:!0,usage:!0}),_(!(null==h||!h.annotationsEnabled))),z((e=>Object.assign({},e,{isEnabled:!(null==h||!h.isEnabled)})))}),[h]);const W=u||R||M,H=I.Vt.hasAccess(le.bW.DashboardsPublicWrite,(0,oe.RN)()),q=L.public&&L.datasources&&L.usage,Z=(0,o.useMemo)((()=>!H||!q||e.dashboard.hasUnsavedChanges()||W||g||p||!K(h)&&!V.wasTouched),[H,q,e.dashboard,W,p,V,h,g]),ce=W||g||p;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(w.Lh,{children:[(0,P.jsx)("p",{className:m.css`
            margin: 0;
          `,children:"Welcome to Grafana public dashboards alpha!"}),(u||g)&&(Y||(Y=(0,P.jsx)(j.$,{})))]}),(0,P.jsx)("div",{className:n.content,children:Q(r)&&!K(h)?(0,P.jsx)(S.b,{severity:"warning",title:"dashboard cannot be public","data-testid":d.TemplateVariablesWarningAlert,children:"This dashboard cannot be made public because it has template variables"}):(0,P.jsxs)(P.Fragment,{children:[X||(X=(0,P.jsx)(G,{})),ee||(ee=(0,P.jsx)("hr",{})),(0,P.jsx)("div",{className:n.checkboxes,children:(0,P.jsx)(D,{disabled:K(h)||!H||W||p,acknowledgements:L,onAcknowledge:(e,t)=>{F((n=>Object.assign({},n,{[e]:t})))}})}),te||(te=(0,P.jsx)("hr",{})),(0,P.jsx)(U,{isAnnotationsEnabled:B,dashboard:e.dashboard,disabled:!H||W||p,isPubDashEnabled:V.isEnabled,onToggleEnabled:()=>z((e=>({isEnabled:!e.isEnabled,wasTouched:!0}))),onToggleAnnotations:()=>_((e=>!e))}),K(h)&&V.isEnabled&&(0,P.jsx)(C.g,{label:"Link URL",className:n.publicUrl,children:(0,P.jsx)(k.I,{disabled:W,value:J(h),readOnly:!0,"data-testid":d.CopyUrlInput,addonAfter:(0,P.jsx)(N.m,{"data-testid":d.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>J(h),children:"Copy"})})}),H?e.dashboard.hasUnsavedChanges()?ne||(ne=(0,P.jsx)(S.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"})):Q(r)&&(se||(se=(0,P.jsx)(S.b,{title:"This public dashboard may not work since it uses template variables",severity:"warning"}))):ae||(ae=(0,P.jsx)(S.b,{title:"You don't have permissions to create or update a public dashboard",severity:"warning"})),(0,P.jsxs)(w.Lh,{children:[(0,P.jsxs)(w.Ar,{orientation:i?0:1,children:[(0,P.jsx)(O.zx,{disabled:Z,onClick:async()=>{(0,l.ff)("grafana_dashboards_public_create_clicked");const t={dashboard:e.dashboard,payload:Object.assign({},h,{isEnabled:V.isEnabled,annotationsEnabled:B})};c?A(t):$(t)},"data-testid":d.SaveConfigButton,children:c?"Save public dashboard":"Create public dashboard"}),h&&H&&(0,P.jsx)(re.H,{disabled:ce,"data-testid":d.DeleteButton,onDismiss:()=>{s(ut,{dashboard:e.dashboard,onDismiss:a,activeTab:"share"})},variant:"destructive",dashboard:e.dashboard,publicDashboard:{uid:h.uid,dashboardUid:e.dashboard.uid,title:e.dashboard.title},children:"Delete public dashboard"})]}),(R||g)&&(ie||(ie=(0,P.jsx)(j.$,{})))]})]})})]})},ue=e=>({content:m.css`
    margin: ${e.spacing(1,0,0,0)};
  `,checkboxes:m.css`
    margin: ${e.spacing(2,0)};
  `,timeRange:m.css`
    padding: ${e.spacing(1,1)};
    margin: ${e.spacing(0,0,2,0)};
  `,publicUrl:m.css`
    width: 100%;
    margin-bottom: ${e.spacing(0,0,3,0)};
  `});var he=n(43437),pe=n(93194),ge=n(37625);const me=e=>{let{selectedTheme:t="current",onChange:n}=e;const s=[{label:(0,g.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,g.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,g.t)("share-modal.theme-picker.light","Light"),value:"light"}];return(0,P.jsx)(C.g,{label:(0,g.t)("share-modal.theme-picker.field-name","Theme"),children:(0,P.jsx)(ge.S,{options:s,value:t,onChange:n})})};var fe,ve,be=n(11050);function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ye extends o.PureComponent{constructor(e){super(e),xe(this,"buildIframeHtml",(()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:n,selectedTheme:s}=this.state,a=(0,be.S_)(n,t.uid,s,e);this.setState({iframeHtml:a})})),xe(this,"onIframeHtmlChange",(e=>{this.setState({iframeHtml:e.currentTarget.value})})),xe(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)})),xe(this,"onThemeChange",(e=>{this.setState({selectedTheme:e},this.buildIframeHtml)})),xe(this,"getIframeHtml",(()=>this.state.iframeHtml)),this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,l.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:e,selectedTheme:t,iframeHtml:n}=this.state,s=!!this.props.dashboard&&"now"===this.props.dashboard.time.to?(0,g.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return(0,P.jsxs)(P.Fragment,{children:[fe||(fe=(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.embed.info",children:"Generate HTML for embedding an iframe with this panel."})})),(0,P.jsx)(C.g,{label:(0,g.t)("share-modal.embed.time-range","Current time range"),description:s,children:(0,P.jsx)(L.r,{id:"share-current-time-range",value:e,onChange:this.onUseCurrentTimeRangeChange})}),(0,P.jsx)(me,{selectedTheme:t,onChange:this.onThemeChange}),(0,P.jsx)(C.g,{label:(0,g.t)("share-modal.embed.html","Embed HTML"),description:(0,g.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load."),children:(0,P.jsx)(pe.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:n,onChange:this.onIframeHtmlChange})}),(0,P.jsx)(c.u.ButtonRow,{children:(0,P.jsx)(N.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml,children:ve||(ve=(0,P.jsx)(g.cC,{i18nKey:"share-modal.embed.copy",children:"Copy to clipboard"}))})})]})}}var we,je,Se,Ce,ke,Ne=n(3574),Oe=n(65737),Ie=n(42200),Te=n(85322),$e=n(89050),Re=n(31787);function Pe(e){let{json:t,onDismiss:n}=e;const s=(0,o.useCallback)((()=>t),[t]);return(0,P.jsxs)(c.u,{title:"JSON",onDismiss:n,onClickBackdrop:n,isOpen:!0,children:[(0,P.jsx)($e.Z,{disableHeight:!0,children:e=>{let{width:n}=e;return(0,P.jsx)(Re.p,{value:t,language:"json",showMiniMap:!1,height:"500px",width:n})}}),(0,P.jsx)(c.u.ButtonRow,{children:(0,P.jsx)(N.m,{icon:"copy",getText:s,children:we||(we=(0,P.jsx)(g.cC,{i18nKey:"share-modal.view-json.copy-button",children:"Copy to Clipboard"}))})})]})}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ae extends o.PureComponent{constructor(e){super(e),De(this,"exporter",void 0),De(this,"onShareExternallyChange",(()=>{this.setState({shareExternally:!this.state.shareExternally})})),De(this,"onTrimDefaultsChange",(()=>{this.setState({trimDefaults:!this.state.trimDefaults})})),De(this,"onSaveAsFile",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state;t?this.exporter.makeExportable(e).then((e=>{n?(0,Ie.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e)})):n?(0,Ie.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e.getSaveModelClone())})),De(this,"onViewJson",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state;t?this.exporter.makeExportable(e).then((e=>{n?(0,Ie.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e)})):n?(0,Ie.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e.getSaveModelClone())})),De(this,"openSaveAsDialog",(e=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json;charset=utf-8"}),s=(new Date).getTime();(0,Ne.saveAs)(n,`${e.title}-${s}.json`)})),De(this,"openJsonModal",(e=>{var t,n;p.h$.publish(new de.Dn({props:{json:JSON.stringify(e,null,2)},component:Pe})),null===(t=(n=this.props).onDismiss)||void 0===t||t.call(n)})),this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Te.E}componentDidMount(){(0,l.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state,s=(0,g.t)("share-modal.export.share-externally-label","Export for sharing externally"),a=(0,g.t)("share-modal.export.share-default-label","Export with default values removed");return(0,P.jsxs)(P.Fragment,{children:[je||(je=(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.export.info-text",children:"Export this dashboard."})})),(0,P.jsx)(C.g,{label:s,children:(0,P.jsx)(L.r,{id:"share-externally-toggle",value:t,onChange:this.onShareExternallyChange})}),Oe.v.featureToggles.trimDefaults&&(0,P.jsx)(C.g,{label:a,children:(0,P.jsx)(L.r,{id:"trim-defaults-toggle",value:n,onChange:this.onTrimDefaultsChange})}),(0,P.jsxs)(c.u.ButtonRow,{children:[(0,P.jsx)(O.zx,{variant:"secondary",onClick:e,fill:"outline",children:Se||(Se=(0,P.jsx)(g.cC,{i18nKey:"share-modal.export.cancel-button",children:"Cancel"}))}),(0,P.jsx)(O.zx,{variant:"secondary",onClick:this.onViewJson,children:Ce||(Ce=(0,P.jsx)(g.cC,{i18nKey:"share-modal.export.view-button",children:"View JSON"}))}),(0,P.jsx)(O.zx,{variant:"primary",onClick:this.onSaveAsFile,children:ke||(ke=(0,P.jsx)(g.cC,{i18nKey:"share-modal.export.save-button",children:"Save to file"}))})]})]})}}var Me,Le=n(97019);const Fe=e=>{let{panel:t,initialFolderId:n,onDismiss:s}=e;return(0,o.useEffect)((()=>{(0,l.ff)("grafana_dashboards_library_panel_share_viewed")}),[]),t?(0,P.jsxs)(P.Fragment,{children:[Me||(Me=(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.library.info",children:"Create library panel."})})),(0,P.jsx)(Le.T,{panel:t,initialFolderId:n,onDismiss:s})]}):null};var Ee,Ve,ze,Be,_e,We,Ue=n(99500);function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qe extends o.PureComponent{constructor(e){super(e),He(this,"buildUrl",(async()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:n,useShortUrl:s,selectedTheme:a}=this.state,i=await(0,be.bl)(n,a,e,s),r=(0,be.Sc)(n,t.uid,a,e);this.setState({shareUrl:i,imageUrl:r})})),He(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})})),He(this,"onUrlShorten",(()=>{this.setState({useShortUrl:!this.state.useShortUrl})})),He(this,"onThemeChange",(e=>{this.setState({selectedTheme:e})})),He(this,"getShareUrl",(()=>this.state.shareUrl)),this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,l.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(e,t){const{useCurrentTimeRange:n,useShortUrl:s,selectedTheme:a}=this.state;t.useCurrentTimeRange===n&&t.selectedTheme===a&&t.useShortUrl===s||this.buildUrl()}render(){const{panel:e,dashboard:t}=this.props,n=!!t&&"now"===t.time.to,{useCurrentTimeRange:s,useShortUrl:a,selectedTheme:i,shareUrl:r,imageUrl:o}=this.state,l=v.wl.pages.SharePanelModal,d=Boolean(t.id),c=(0,g.t)("share-modal.link.time-range-label","Lock time range"),u=(0,g.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),p=(0,g.t)("share-modal.link.shorten-url","Shorten URL"),m=(0,g.t)("share-modal.link.link-url","Link URL");return(0,P.jsxs)(P.Fragment,{children:[Ee||(Ee=(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.link.info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})})),(0,P.jsxs)($.C,{children:[(0,P.jsx)(C.g,{label:c,description:n?u:"",children:(0,P.jsx)(L.r,{id:"share-current-time-range",value:s,onChange:this.onUseCurrentTimeRangeChange})}),(0,P.jsx)(me,{selectedTheme:i,onChange:this.onThemeChange}),(0,P.jsx)(C.g,{label:p,children:(0,P.jsx)(L.r,{id:"share-shorten-url",value:a,onChange:this.onUrlShorten})}),(0,P.jsx)(C.g,{label:m,children:(0,P.jsx)(k.I,{id:"link-url-input",value:r,readOnly:!0,addonAfter:(0,P.jsx)(N.m,{icon:"copy",variant:"primary",getText:this.getShareUrl,children:Ve||(Ve=(0,P.jsx)(g.cC,{i18nKey:"share-modal.link.copy-link-button",children:"Copy"}))})})})]}),e&&h.ZP.rendererAvailable&&(0,P.jsxs)(P.Fragment,{children:[d&&(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("a",{href:o,target:"_blank",rel:"noreferrer","aria-label":l.linkToRenderedImage,children:[ze||(ze=(0,P.jsx)(Ue.J,{name:"camera"}))," ",Be||(Be=(0,P.jsx)(g.cC,{i18nKey:"share-modal.link.rendered-image",children:"Direct link rendered image"}))]})}),!d&&(0,P.jsx)(S.b,{severity:"info",title:(0,g.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:_e||(_e=(0,P.jsx)(g.cC,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."}))})]}),e&&!h.ZP.rendererAvailable&&(0,P.jsx)(S.b,{severity:"info",title:(0,g.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:We||(We=(0,P.jsxs)(g.cC,{i18nKey:"share-modal.link.render-instructions",children:["To render a panel image, you must install the ",(0,P.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]}))})]})}}var Ze,Ge,Qe,Ke,Je,Ye,Xe,et,tt=n(93570),nt=n(70917),st=n(53091),at=n(72379);function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rt extends o.PureComponent{constructor(e){super(e),it(this,"dashboard",void 0),it(this,"expireOptions",void 0),it(this,"createSnapshot",(e=>()=>{const{timeoutSeconds:t}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout((()=>{this.saveSnapshot(this.dashboard,e)}),1e3*t)})),it(this,"saveSnapshot",(async(e,t)=>{const{snapshotExpires:n}=this.state,s=this.dashboard.getSaveModelClone();this.scrubDashboard(s);const a={dashboard:s,name:s.title,expires:n,external:t};try{const e=await(0,tt.i)().post("/api/snapshots",a);this.setState({deleteUrl:e.deleteUrl,snapshotUrl:e.url,step:2})}finally{(0,l.ff)("grafana_dashboards_snapshot_created",{location:t?"raintank":"local"}),this.setState({isLoading:!1})}})),it(this,"scrubDashboard",(e=>{const{panel:t}=this.props,{snapshotName:n}=this.state;e.title=n,e.time=(0,st.$t)().timeRange(),e.links=[],e.panels.forEach((e=>{e.targets=[],e.links=[],e.datasource=null}));const s=e.annotations.list.filter((e=>e.enable));if(e.annotations.list=s.map((e=>({name:e.name,enable:e.enable,iconColor:e.iconColor,snapshotData:e.snapshotData,type:e.type,builtIn:e.builtIn,hide:e.hide}))),e.getVariables().forEach((e=>{e.query="",e.options=e.current?[e.current]:[],e.refresh=at.Bd.never})),t){const n=t.getSaveModel();n.gridPos.w=24,n.gridPos.x=0,n.gridPos.y=0,n.gridPos.h=20,e.panels=[n]}delete this.dashboard.snapshot,this.dashboard.forEachPanel((e=>{delete e.snapshotData})),this.dashboard.annotations.list.forEach((e=>{delete e.snapshotData}))})),it(this,"deleteSnapshot",(async()=>{const{deleteUrl:e}=this.state;await(0,tt.i)().get(e),this.setState({step:3})})),it(this,"getSnapshotUrl",(()=>this.state.snapshotUrl)),it(this,"onSnapshotNameChange",(e=>{this.setState({snapshotName:e.target.value})})),it(this,"onTimeoutChange",(e=>{this.setState({timeoutSeconds:Number(e.target.value)})})),it(this,"onExpireChange",(e=>{this.setState({selectedExpireOption:e,snapshotExpires:e.value})})),this.dashboard=e.dashboard,this.expireOptions=[{label:(0,g.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,g.t)("share-modal.snapshot.expire-hour","1 Hour"),value:3600},{label:(0,g.t)("share-modal.snapshot.expire-day","1 Day"),value:86400},{label:(0,g.t)("share-modal.snapshot.expire-week","7 Days"),value:604800}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:e.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,l.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const e=await(0,tt.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:e.externalSnapshotName,externalEnabled:e.externalEnabled})}renderStep1(){const{onDismiss:e}=this.props,{snapshotName:t,selectedExpireOption:n,timeoutSeconds:s,isLoading:a,sharingButtonText:i,externalEnabled:r}=this.state,o=(0,g.t)("share-modal.snapshot.name","Snapshot name"),l=(0,g.t)("share-modal.snapshot.expire","Expire"),d=(0,g.t)("share-modal.snapshot.timeout","Timeout (seconds)"),u=(0,g.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return(0,P.jsxs)(P.Fragment,{children:[Ze||(Ze=(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.info-text-1",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."})}),(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsxs)(g.cC,{i18nKey:"share-modal.snapshot.info-text-2",children:["Keep in mind, your snapshot ",(0,P.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})})]})),(0,P.jsx)(C.g,{label:o,children:(0,P.jsx)(k.I,{id:"snapshot-name-input",width:30,value:t,onChange:this.onSnapshotNameChange})}),(0,P.jsx)(C.g,{label:l,children:(0,P.jsx)(nt.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:n,onChange:this.onExpireChange})}),(0,P.jsx)(C.g,{label:d,description:u,children:(0,P.jsx)(k.I,{id:"timeout-input",type:"number",width:21,value:s,onChange:this.onTimeoutChange})}),(0,P.jsxs)(c.u.ButtonRow,{children:[(0,P.jsx)(O.zx,{variant:"secondary",onClick:e,fill:"outline",children:Ge||(Ge=(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.cancel-button",children:"Cancel"}))}),r&&(0,P.jsx)(O.zx,{variant:"secondary",disabled:a,onClick:this.createSnapshot(!0),children:i}),(0,P.jsx)(O.zx,{variant:"primary",disabled:a,onClick:this.createSnapshot(),children:Qe||(Qe=(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.local-button",children:"Local Snapshot"}))})]})]})}renderStep2(){const{snapshotUrl:e}=this.state;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C.g,{label:(0,g.t)("share-modal.snapshot.url-label","Snapshot URL"),children:(0,P.jsx)(k.I,{id:"snapshot-url-input",value:e,readOnly:!0,addonAfter:(0,P.jsx)(N.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl,children:Ke||(Ke=(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.copy-link-button",children:"Copy"}))})})}),(0,P.jsxs)("div",{className:"pull-right",style:{padding:"5px"},children:[Je||(Je=(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.mistake-message",children:"Did you make a mistake? "}))," ",(0,P.jsx)(O.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:Ye||(Ye=(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.delete-button",children:"Delete snapshot."}))})]})]})}renderStep3(){return Xe||(Xe=(0,P.jsx)("div",{className:"share-modal-header",children:(0,P.jsx)("p",{className:"share-modal-info-text",children:(0,P.jsx)(g.cC,{i18nKey:"share-modal.snapshot.deleted-message",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."})})}))}render(){const{isLoading:e,step:t}=this.state;return(0,P.jsxs)(P.Fragment,{children:[1===t&&this.renderStep1(),2===t&&this.renderStep2(),3===t&&this.renderStep3(),e&&(et||(et=(0,P.jsx)(j.$,{inline:!0})))]})}}const ot=[],lt=[];function dt(e){ot.push(e)}function ct(e){var t;const{panel:n,activeTab:s}=e,a=[{label:(0,g.t)("share-modal.tab-title.link","Link"),value:"link",component:qe}];if(p.Vt.isSignedIn){const e=(0,g.t)("share-modal.tab-title.snapshot","Snapshot");a.push({label:e,value:"snapshot",component:rt})}if(n){const e=(0,g.t)("share-modal.tab-title.embed","Embed");if(a.push({label:e,value:"embed",component:ye}),!(0,he.V)(n)){const e=(0,g.t)("share-modal.tab-title.library-panel","Library panel");a.push({label:e,value:"library_panel",component:Fe})}a.push(...lt)}else{const e=(0,g.t)("share-modal.tab-title.export","Export");a.push({label:e,value:"export",component:Ae}),a.push(...ot)}Boolean(h.vc.featureToggles.publicDashboards)&&a.push({label:"Public dashboard",value:"share",component:ce});const i=a.find((e=>e.value===s));return{tabs:a,activeTab:null!==(t=null==i?void 0:i.value)&&void 0!==t?t:a[0].value}}class ut extends o.Component{constructor(e){var t,n,s;super(e),s=e=>{this.setState({activeTab:e.value})},(n="onSelectTab")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.state=function(e){const{tabs:t,activeTab:n}=ct(e);return{tabs:t,activeTab:n}}(e)}componentDidMount(){(0,l.ff)("grafana_dashboards_share_modal_viewed")}getTabs(){return ct(this.props).tabs}getActiveTab(){const{tabs:e,activeTab:t}=this.state;return e.find((e=>e.value===t))}renderTitle(){const{panel:e}=this.props,{activeTab:t}=this.state,n=e?(0,g.t)("share-modal.panel.title","Share Panel"):(0,g.t)("share-modal.dashboard.title","Share");return(0,P.jsx)(d.H,{title:n,icon:"share-alt",tabs:this.getTabs(),activeTab:t,onChangeTab:this.onSelectTab})}render(){const{dashboard:e,panel:t}=this.props,n=this.getActiveTab().component;return(0,P.jsx)(c.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,children:(0,P.jsx)(u.I,{children:(0,P.jsx)(n,{dashboard:e,panel:t,onDismiss:this.props.onDismiss})})})}}},11050:(e,t,n)=>{"use strict";n.d(t,{OS:()=>c,S_:()=>g,Sc:()=>p,bl:()=>u});var s=n(274),a=n(36298),i=n(88246),r=n(65737),o=n(40078),l=n(53091);function d(e){let{useCurrentTimeRange:t,selectedTheme:n,panel:s,search:a=window.location.search,range:i=(0,l.$t)().timeRange(),orgId:o=r.v.bootData.user.orgId}=e;const d=new URLSearchParams(a);return d.set("from",String(i.from.valueOf())),d.set("to",String(i.to.valueOf())),d.set("orgId",String(o)),t||(d.delete("from"),d.delete("to")),"current"!==n&&d.set("theme",n),s&&!d.has("editPanel")&&d.set("viewPanel",String(s.id)),d}function c(){let e=window.location.href;const t=e.indexOf("?");return-1!==t&&(e=e.substring(0,t)),e}async function u(e,t,n,a){const i=c(),r=d({useCurrentTimeRange:e,selectedTheme:t,panel:n}),l=s.Cj.appendQueryToUrl(i,r.toString());return a?await(0,o.D)(l):l}function h(e,t,n,i){var o,l;const u=c(),h=d({useCurrentTimeRange:e,selectedTheme:n,panel:i});let p=u.replace(r.v.appSubUrl+"/dashboard/",r.v.appSubUrl+"/dashboard-solo/");p=p.replace(r.v.appSubUrl+"/d/",r.v.appSubUrl+"/d-solo/");"/"===a.u.stripBaseFromUrl(u)&&(p=`${r.v.appUrl}d-solo/${t}`);const g=null!==(o=null!==(l=h.get("editPanel"))&&void 0!==l?l:h.get("viewPanel"))&&void 0!==o?o:"";return h.set("panelId",g),h.delete("editPanel"),h.delete("viewPanel"),s.Cj.appendQueryToUrl(p,h.toString())}function p(e,t,n,s){let a=h(e,t,n,s).replace(r.v.appSubUrl+"/dashboard-solo/",r.v.appSubUrl+"/render/dashboard-solo/");return a=a.replace(r.v.appSubUrl+"/d-solo/",r.v.appSubUrl+"/render/d-solo/"),a+="&width=1000&height=500"+function(){const e="&tz=UTC"+encodeURIComponent((0,i.CQ)().format("Z"));if(!window.Intl)return e;const t=window.Intl.DateTimeFormat();if(!t.resolvedOptions)return e;const n=t.resolvedOptions();if(!n.timeZone)return e;return"&tz="+encodeURIComponent(n.timeZone)}(),a}function g(e,t,n,s){return'<iframe src="'+h(e,t,n,s)+'" width="450" height="200" frameborder="0"></iframe>'}},865:(e,t,n)=>{"use strict";n.d(t,{B:()=>m});var s,a=n(52423),i=n(82897),r=(n(68404),n(16755)),o=n(99500),l=n(45916);const d=e=>{let{diff:t}=e;const n=(0,r.wW)(c),a=!(0,i.isUndefined)(t.originalValue)&&!(0,i.isArray)(t.originalValue)&&!(0,i.isObject)(t.originalValue),d=!(0,i.isUndefined)(t.value)&&!(0,i.isArray)(t.value)&&!(0,i.isObject)(t.value);return(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsx)("span",{className:n,children:String(t.originalValue)}),a&&d?s||(s=(0,l.jsx)(o.J,{name:"arrow-right"})):null,d&&(0,l.jsx)("span",{className:n,children:String(t.value)})]})},c=e=>a.css`
  background-color: ${e.colors.action.hover};
  border-radius: ${e.shape.borderRadius()};
  color: ${e.colors.text.primary};
  font-size: ${e.typography.body.fontSize};
  margin: 0 ${e.spacing(.5)};
  padding: ${e.spacing(.5,1)};
`;var u=n(91280);const h={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},p=e=>{let{diff:t,title:n}=e;const s=(0,r.wW)(g);return t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.J,{type:"mono",name:"circle",className:s[t.op]})," ",(0,l.jsx)("span",{className:s.embolden,children:n})," ",(0,l.jsx)("span",{children:(0,u.dW)(t,t.path.length>1)})," ",(0,l.jsx)(d,{diff:t})]}):(0,l.jsxs)("div",{className:s.withoutDiff,children:[(0,l.jsx)(o.J,{type:"mono",name:"circle",className:s.replace})," ",(0,l.jsx)("span",{className:s.embolden,children:n})," ",(0,l.jsx)("span",{children:(0,u.dW)(h,!1)})]})},g=e=>({embolden:a.css`
    font-weight: ${e.typography.fontWeightBold};
  `,add:a.css`
    color: ${e.colors.success.main};
  `,replace:a.css`
    color: ${e.colors.success.main};
  `,move:a.css`
    color: ${e.colors.success.main};
  `,copy:a.css`
    color: ${e.colors.success.main};
  `,_get:a.css`
    color: ${e.colors.success.main};
  `,test:a.css`
    color: ${e.colors.success.main};
  `,remove:a.css`
    color: ${e.colors.success.main};
  `,withoutDiff:a.css`
    margin-bottom: ${e.spacing(2)};
  `}),m=e=>{let{diffs:t,title:n}=e;const s=(0,r.wW)(f);return 1===t.length?(0,l.jsx)("div",{className:s.container,"data-testid":"diffGroup",children:(0,l.jsx)(p,{title:n,diff:t[0]})}):(0,l.jsxs)("div",{className:s.container,"data-testid":"diffGroup",children:[(0,l.jsx)(p,{title:n}),(0,l.jsx)("ul",{className:s.list,children:t.map(((e,t)=>(0,l.jsxs)("li",{className:s.listItem,children:[(0,l.jsx)("span",{children:(0,u.dW)(e)})," ",(0,l.jsx)(d,{diff:e})]},`${(0,i.last)(e.path)}__${t}`)))})]})},f=e=>({container:a.css`
    background-color: ${e.colors.background.secondary};
    font-size: ${e.typography.h6.fontSize};
    margin-bottom: ${e.spacing(2)};
    padding: ${e.spacing(2)};
  `,list:a.css`
    margin-left: ${e.spacing(4)};
  `,listItem:a.css`
    margin-bottom: ${e.spacing(1)};
  `})},28260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(52423),a=(n(68404),n(28072)),i=n.n(a),r=n(35008),o=n.n(r),l=n(16755),d=n(45916);const c=e=>{let{oldValue:t,newValue:n}=e;const r=(0,l.l4)(),c={variables:{dark:{diffViewerBackground:r.colors.background.canvas,diffViewerColor:r.colors.text.primary,addedBackground:o()(r.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:o()(r.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:o()(r.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:o()(r.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:o()(r.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:o()(r.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:r.colors.background.primary,gutterBackgroundDark:r.colors.background.primary,highlightBackground:o()(r.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:o()(r.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:r.colors.background.secondary,codeFoldBackground:r.colors.background.secondary,emptyLineBackground:r.colors.background.secondary,gutterColor:r.colors.text.disabled,addedGutterColor:r.colors.text.primary,removedGutterColor:r.colors.text.primary,codeFoldContentColor:r.colors.text.disabled,diffViewerTitleBackground:r.colors.background.secondary,diffViewerTitleColor:r.colors.text.disabled,diffViewerTitleBorderColor:r.colors.border.strong}},codeFold:{fontSize:r.typography.bodySmall.fontSize},gutter:`\n      pre {\n        color: ${o()(r.colors.text.disabled).setAlpha(1).toString()};\n        opacity: 0.61;\n      }\n    `};return(0,d.jsx)("div",{className:s.css`
        font-size: ${r.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `,children:(0,d.jsx)(i(),{styles:c,oldValue:t,newValue:n,splitView:!1,compareMethod:a.DiffMethod.CSS,useDarkTheme:r.isDark})})}},7060:(e,t,n)=>{"use strict";n.d(t,{U$:()=>V,Cs:()=>T,Sd:()=>S,R1:()=>D,K8:()=>i});var s=n(82897),a=n(93570);const i=new class{getHistoryList(e,t){const n=e&&e.uid?e.uid:void 0;return n?(0,a.i)().get(`api/dashboards/uid/${n}/versions`,t):Promise.resolve([])}getDashboardVersion(e,t){return(0,a.i)().get(`api/dashboards/uid/${e}/versions/${t}`)}restoreDashboard(e,t){const n=e&&e.uid?e.uid:void 0,i=`api/dashboards/uid/${n}/restore`;return n&&(0,s.isNumber)(t)?(0,a.i)().post(i,{version:t}):Promise.resolve({})}};var r=n(52423),o=n(68404),l=n(12310),d=n(51028),c=n(40941),u=n(8006),h=n(2024),p=n(7197),g=n(36298),m=n(80795),f=n(47900),v=n(64850);const b=e=>{const t=(0,v.v9)((e=>e.dashboard.getModel())),[n,s]=(0,p.Z)((async()=>await(async(e,t)=>await i.restoreDashboard(t,e))(e,t)),[]),a=(0,f.iG)();return(0,o.useEffect)((()=>{if(n.value){var t;const s=m.E1.getLocation(),i=g.u.stripBaseFromUrl(n.value.url),r=null===(t=s.state)||void 0===t?void 0:t.routeReloadCounter;m.E1.replace(Object.assign({},s,{pathname:i,state:{routeReloadCounter:r?r+1:1}})),a.success("Dashboard restored",`Restored from version ${e}`)}}),[n,e,a]),{state:n,onRestoreDashboard:s}};var x=n(45916);const y=e=>{let{hideModal:t,version:n}=e;const{state:s,onRestoreDashboard:a}=b(n);return(0,o.useEffect)((()=>{!1===s.loading&&s.value&&t()}),[s,t]),(0,x.jsx)(h.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:t,onConfirm:a,body:(0,x.jsxs)("p",{children:["Are you sure you want to restore the dashboard to version ",n,"? All unsaved changes will be lost."]}),confirmText:`Yes, restore to version ${n}`})};var w,j;const S=e=>{let{versions:t,canCompare:n,onCheck:s}=e;return(0,x.jsxs)("table",{className:"filter-table gf-form-group",children:[w||(w=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"width-4"}),(0,x.jsx)("th",{className:"width-4",children:"Version"}),(0,x.jsx)("th",{className:"width-14",children:"Date"}),(0,x.jsx)("th",{className:"width-10",children:"Updated by"}),(0,x.jsx)("th",{children:"Notes"}),(0,x.jsx)("th",{})]})})),(0,x.jsx)("tbody",{children:t.map(((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)(l.X,{"aria-label":`Toggle selection of version ${e.version}`,className:r.css`
                display: inline;
              `,checked:e.checked,onChange:t=>s(t,e.id),disabled:!e.checked&&n})}),(0,x.jsx)("td",{children:e.version}),(0,x.jsx)("td",{children:e.createdDateString}),(0,x.jsx)("td",{children:e.createdBy}),(0,x.jsx)("td",{children:e.message}),(0,x.jsx)("td",{className:"text-right",children:0===t?j||(j=(0,x.jsx)(d.V,{name:"Latest",colorIndex:17})):(0,x.jsx)(c.JY,{children:t=>{let{showModal:n,hideModal:s}=t;return(0,x.jsx)(u.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{n(y,{version:e.version,hideModal:s})},children:"Restore"})}})})]},e.id)))})]})};var C,k,N=n(16755),O=n(23734),I=n(99500);const T=e=>{let{onClick:t=s.noop,baseVersion:n=0,newVersion:a=0,isNewLatest:i=!1}=e;const r=(0,N.wW)($);return(0,x.jsxs)("h3",{className:r.header,children:[(0,x.jsx)(O.h,{name:"arrow-left",size:"xl",onClick:t}),(0,x.jsxs)("span",{children:["Comparing ",n," ",C||(C=(0,x.jsx)(I.J,{name:"arrows-h"}))," ",a," ",i&&(k||(k=(0,x.jsx)("cite",{className:"muted",children:"(Latest)"})))]})]})},$=e=>({header:r.css`
    font-size: ${e.typography.h3.fontSize};
    display: flex;
    gap: ${e.spacing(2)};
    margin-bottom: ${e.spacing(3)};
  `});var R=n(68522),P=n(21888);const D=e=>{let{hasMore:t,canCompare:n,getVersions:s,getDiff:a,isLastPage:i}=e;return(0,x.jsxs)(R.Stack,{children:[t&&(0,x.jsx)(u.zx,{type:"button",onClick:()=>s(!0),variant:"secondary",disabled:i,children:"Show more versions"}),(0,x.jsx)(P.u,{content:"Select two versions to start comparing",placement:"bottom",children:(0,x.jsx)(u.zx,{type:"button",disabled:!n,onClick:a,icon:"code-branch",children:"Compare versions"})})]})};var A=n(54761),M=n(75342),L=n(865),F=n(28260),E=n(91280);const V=e=>{let{baseInfo:t,newInfo:n,diffData:s,isNewLatest:a}=e;const i=(0,E.Q$)(s.lhs,s.rhs),o=(0,N.wW)(z);return(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:o.spacer,children:(0,x.jsxs)(A.Lh,{justify:"space-between",align:"center",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:o.versionInfo,children:[(0,x.jsxs)("strong",{children:["Version ",n.version]})," updated by ",n.createdBy," ",n.ageString," -"," ",n.message]}),(0,x.jsxs)("p",{className:(0,r.cx)(o.versionInfo,o.noMarginBottom),children:[(0,x.jsxs)("strong",{children:["Version ",t.version]})," updated by ",t.createdBy," ",t.ageString," -"," ",t.message]})]}),a&&(0,x.jsx)(c.JY,{children:e=>{let{showModal:n,hideModal:s}=e;return(0,x.jsxs)(u.zx,{variant:"destructive",icon:"history",onClick:()=>{n(y,{version:t.version,hideModal:s})},children:["Restore to version ",t.version]})}})]})}),(0,x.jsx)("div",{className:o.spacer,children:Object.entries(i).map((e=>{let[t,n]=e;return(0,x.jsx)(L.B,{diffs:n,title:t},t)}))}),(0,x.jsx)(M.s,{isOpen:!1,label:"View JSON Diff",children:(0,x.jsx)(F.Z,{oldValue:JSON.stringify(s.lhs,null,2),newValue:JSON.stringify(s.rhs,null,2)})})]})},z=e=>({spacer:r.css`
    margin-bottom: ${e.spacing(4)};
  `,versionInfo:r.css`
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
  `,noMarginBottom:r.css`
    margin-bottom: 0;
  `})},91280:(e,t,n)=>{"use strict";n.d(t,{Q$:()=>r,dW:()=>o});var s=n(92497),a=n(56070),i=n(82897);const r=(e,t)=>{const n=(0,s.qu)(e,t),r=a.stringify(e,null,2),o=a.stringify(t,null,2);return(0,i.flow)([t=>t.map((t=>{let n,s,a=0;const l=(0,i.tail)(t.path.split("/"));return"replace"===t.op&&(n=(0,i.get)(e,l),s=t.value,a=o.pointers[t.path].value.line),"add"===t.op&&(s=t.value,a=o.pointers[t.path].value.line),"remove"===t.op&&(n=(0,i.get)(e,l),a=r.pointers[t.path].value.line),{op:t.op,value:s,path:l,originalValue:n,startLineNumber:a}})),e=>(0,i.sortBy)(e,"startLineNumber"),e=>e.reduce(((e,t)=>{const n=t.path[0];return e[n]||(e[n]=[]),e[n].push(t),e}),{})])(n)},o=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,i.last)(e.path),s=l(n),a="remove"===e.op?e.originalValue:e.value;let r=d(e.op);return t&&(s?r+=` item ${n}`:(0,i.isArray)(a)&&!(0,i.isEmpty)(a)?r+=` ${a.length} ${n}`:r+=` ${n}`),r},l=e=>!(0,i.isNaN)((0,i.toNumber)(e)),d=e=>"add"===e?"added":"remove"===e?"deleted":"changed"},80419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SoloPanel:()=>m,SoloPanelPage:()=>g,default:()=>f});var s,a=n(68404),i=n(36635),r=n(89050),o=n(39321),l=n(12176),d=n(89118),c=n(45916);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={initDashboard:d.mV},p=(0,i.connect)((e=>({dashboard:e.dashboard.getModel()})),h);class g extends a.Component{constructor(){super(...arguments),u(this,"state",{panel:null,notFound:!1})}componentDidMount(){const{match:e,route:t}=this.props;this.props.initDashboard({urlSlug:e.params.slug,urlUid:e.params.uid,urlType:e.params.type,routeName:t.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){var e;return parseInt(null!==(e=this.props.queryParams.panelId)&&void 0!==e?e:"0",10)}componentDidUpdate(e){const{dashboard:t}=this.props;if(t&&(!e.dashboard||e.dashboard.uid!==t.uid)){const e=t.getPanelByUrlId(this.props.queryParams.panelId);if(!e)return void this.setState({notFound:!0});this.setState({panel:e})}}render(){return(0,c.jsx)(m,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}u(g,"contextType",o.h);const m=e=>{let{dashboard:t,notFound:n,panel:a,panelId:i,timezone:o}=e;return n?(0,c.jsxs)("div",{className:"alert alert-error",children:["Panel with id ",i," not found"]}):a&&t?(0,c.jsx)("div",{className:"panel-solo",children:(0,c.jsx)(r.Z,{children:e=>{let{width:n,height:s}=e;return 0===n?null:(0,c.jsx)(l.l,{stateKey:a.key,width:n,height:s,dashboard:t,panel:a,isEditing:!1,isViewing:!1,lazy:!1,timezone:o})}})}):s||(s=(0,c.jsx)("div",{children:"Loading & initializing dashboard"}))},f=p(g)},12176:(e,t,n)=>{"use strict";n.d(t,{l:()=>Le});var s=n(68404),a=n(36635),i=n(115),r=n(29705),o=n(31423),l=n(52370),d=n(45916);function c(e){let{children:t,width:n,height:a,onLoad:i,onChange:r}=e;const u=(0,l.L)(),[h,p]=(0,s.useState)(!1),[g,m]=(0,s.useState)(!1),f=(0,s.useRef)(null);return(0,o.Z)((()=>{c.addCallback(u,(e=>{!h&&e.isIntersecting&&(p(!0),null==i||i()),m(e.isIntersecting),null==r||r(e.isIntersecting)}));const e=f.current;return e&&c.observer.observe(e),()=>{delete c.callbacks[u],e&&c.observer.unobserve(e),0===Object.keys(c.callbacks).length&&c.observer.disconnect()}})),(0,d.jsx)("div",{id:u,ref:f,style:{width:n,height:a},children:h&&("function"==typeof t?t({isInView:g}):t)})}c.callbacks={},c.addCallback=(e,t)=>c.callbacks[e]=t,c.observer=new IntersectionObserver((e=>{for(const t of e)c.callbacks[t.target.id](t)}),{rootMargin:"100px"});var u=n(9085),h=n.n(u),p=n(95484),g=n(28173),m=n(12717),f=n(25004),v=n(70194),b=n(80795),x=n(46782),y=n(42949),w=n(17321);function j(e){return/(d-solo|dashboard-solo)/.test(null==e?void 0:e.toLowerCase())}var S,C=n(53091),k=n(52423),N=n(16755),O=n(55910),I=n(99500),T=n(48951),$=n(54958),R=n(21888);const P=e=>{let{state:t,onClick:n}=e;const s=(0,N.wW)(D);return t===g.Gu.Loading?(0,d.jsx)("div",{className:"panel-loading",onClick:n,children:S||(S=(0,d.jsx)(R.u,{content:"Cancel query",children:(0,d.jsx)(I.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"})}))}):t===g.Gu.Streaming?(0,d.jsx)("div",{className:"panel-loading",onClick:n,children:(0,d.jsx)("div",{title:"Streaming (click to stop)",className:s.streamIndicator})}):null};function D(e){return{streamIndicator:k.css`
      width: 10px;
      height: 10px;
      background: ${e.colors.text.disabled};
      box-shadow: 0 0 2px ${e.colors.text.disabled};
      border-radius: 50%;
      position: relative;
      top: 6px;
      right: 1px;
    `}}const A=["children"];const M=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,A);const[a,i]=(0,s.useState)({x:0,y:0}),[r,o]=(0,s.useState)(!1),l=(0,s.useCallback)((e=>{(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3.5;return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)<=n})(a,L(e))&&o(!r)}),[a,r,o]),c=(0,s.useCallback)((e=>{i(L(e))}),[i]);return(0,d.jsx)("header",Object.assign({},n,{className:"panel-title-container",onClick:l,onMouseDown:c,children:t({panelMenuOpen:r,closeMenu:()=>o(!1)})}))};function L(e){return{x:e.clientX,y:e.clientY}}var F=n(73320);class E extends s.PureComponent{constructor(){var e,t,n,s;super(...arguments),e=this,s=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,d.jsx)("ul",{className:"dropdown-menu dropdown-menu--menu panel-menu",role:n?"":"menu",children:t.map(((t,n)=>(0,d.jsx)(F.u,{type:t.type,text:t.text,iconClassName:t.iconClassName,onClick:t.onClick,shortcut:t.shortcut,children:t.subMenu&&e.renderItems(t.subMenu,!0)},`${t.text}${n}`)))})},(n="renderItems")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return(0,d.jsx)("div",{className:"panel-menu-container dropdown open",children:this.renderItems(this.props.items)})}}var V=n(64850),z=n(31181),B=n(8910),_=n(35448),W=n(59196),U=n(11848),H=n(13631),q=n(34944),Z=n(43437),G=n(63454),Q=n(25822);const K=e=>{let{panel:t,dashboard:n,children:a}=e;const[i,r]=(0,s.useState)([]),o=(0,V.v9)((e=>{var n;return null===(n=(0,w.i)(e,t))||void 0===n?void 0:n.angularComponent}));return(0,s.useEffect)((()=>{r(function(e,t,n){const s=e=>{e.preventDefault(),b.E1.partial({viewPanel:t.id})},a=e=>{e.preventDefault(),b.E1.partial({editPanel:t.id})},i=n=>{n.preventDefault(),(0,H.Kq)(e,t)},r=e=>{e.preventDefault(),(0,H.oe)(t)},o=e=>{b.E1.partial({inspect:t.id,inspectTab:e}),(0,z.ff)("grafana_panel_menu_inspect",{tab:null!=e?e:q.q.Data})},l=e=>{e.preventDefault()},d=n=>{n.preventDefault(),(0,H.jN)(e,t)},c=e=>{e.preventDefault(),(0,H.bY)(t)},u=n=>{n.preventDefault(),(0,H.WJ)(e,t,!0)},h=e=>{e.preventDefault();const n=e.ctrlKey||e.metaKey?e=>window.open(`${x.ZP.appSubUrl}${e}`):void 0;G.h.dispatch((0,Q.m$)(t,{getDataSourceSrv:B.F,getTimeSrv:C.$t,getExploreUrl:U.H6,openInNewWindow:n}))},p=e=>{e.preventDefault(),(0,H.qw)(t)},g=[];if(!t.isEditing){const e=(0,_.t)("panel.header-menu.view","View");g.push({text:e,iconClassName:"eye",onClick:s,shortcut:"v"})}e.canEditPanel(t)&&!t.isEditing&&g.push({text:"Edit",iconClassName:"edit",onClick:a,shortcut:"e"});const m=(0,_.t)("panel.header-menu.share","Share");g.push({text:m,iconClassName:"share-alt",onClick:n=>{n.preventDefault(),(0,H.Po)(e,t)},shortcut:"p s"}),!W.Vt.hasAccessToExplore()||t.plugin&&t.plugin.meta.skipDataQuery||g.push({text:"Explore",iconClassName:"compass",onClick:h,shortcut:"x"});const f=[];if(t.plugin&&!t.plugin.meta.skipDataQuery){const t=(0,_.t)("panel.header-menu.inspect-data","Data");f.push({text:t,onClick:e=>o(q.q.Data)}),e.meta.canEdit&&f.push({text:"Query",onClick:e=>o(q.q.Query)})}const v=(0,_.t)("panel.header-menu.inspect-json","Panel JSON");f.push({text:v,onClick:e=>o(q.q.JSON)});const y=(0,_.t)("panel.header-menu.inspect","Inspect");g.push({type:"submenu",text:y,iconClassName:"info-circle",onClick:e=>o(),shortcut:"i",subMenu:f});const w=[],j=e.canEditPanel(t);if(!j||t.isViewing||t.isEditing||(w.push({text:"Duplicate",onClick:d,shortcut:"p d"}),w.push({text:"Copy",onClick:c}),(0,Z.V)(t)?w.push({text:"Unlink library panel",onClick:r}):w.push({text:"Create library panel",onClick:i})),n){const e=n.getScope(),t=e.$$childHead.ctrl,s=t.getExtendedMenu();for(const n of s){const s={text:n.text,href:n.href,shortcut:n.shortcut};n.click&&(s.onClick=()=>{e.$eval(n.click,{ctrl:t})}),w.push(s)}}if(t.options.legend&&w.push({text:t.options.legend.showLegend?(0,_.t)("panel.header-menu.hide-legend","Hide legend"):(0,_.t)("panel.header-menu.show-legend","Show legend"),onClick:p,shortcut:"p l"}),t.isEditing&&(w.length=0),j&&t.plugin&&!t.plugin.meta.skipDataQuery&&w.push({text:"Get help",onClick:e=>o(q.q.Help)}),w.length){const e=(0,_.t)("panel.header-menu.more","More...");g.push({type:"submenu",text:e,iconClassName:"cube",subMenu:w,onClick:l})}return!e.canEditPanel(t)||t.isEditing||t.isViewing||(g.push({type:"divider",text:""}),g.push({text:"Remove",iconClassName:"trash-alt",onClick:u,shortcut:"p r"})),g}(n,t,o))}),[n,t,o,r]),a({items:i})},J=e=>{let{panel:t,dashboard:n}=e;return(0,d.jsx)(K,{panel:t,dashboard:n,children:e=>{let{items:t}=e;return(0,d.jsx)(E,{items:t})}})},Y=e=>{let{notice:t,onClick:n}=e;const s="error"===t.severity||"warning"===t.severity?"exclamation-triangle":"info-circle";return(0,d.jsx)(R.u,{content:t.text,children:t.inspect?(0,d.jsx)("div",{className:"panel-info-notice pointer",onClick:e=>n(e,t.inspect),children:(0,d.jsx)(I.J,{name:s,style:{marginRight:"8px"}})}):(0,d.jsx)("a",{className:"panel-info-notice",href:t.link,target:"_blank",rel:"noreferrer",children:(0,d.jsx)(I.J,{name:s,style:{marginRight:"8px"}})})},t.severity)},X=e=>{let{frames:t,panelId:n}=e;const a=(0,s.useCallback)(((e,t)=>{e.stopPropagation(),b.E1.partial({inspect:n,inspectTab:t})}),[n]),i={};for(const e of t)if(e.meta&&e.meta.notices)for(const t of e.meta.notices)i[t.severity]=t;return(0,d.jsx)(d.Fragment,{children:Object.values(i).map((e=>(0,d.jsx)(Y,{notice:e,onClick:a},e.severity)))})};var ee,te;const ne=e=>{let{panel:t,error:n,isViewing:s,isEditing:a,data:i,alertState:r,dashboard:o}=e;const l=t.getDisplayTitle(),c=(0,k.cx)("panel-header",s||a?"":"grid-drag-handle"),u=(0,N.wW)(se);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(P,{state:i.state,onClick:()=>t.getQueryRunner().cancelQuery()}),(0,d.jsx)($.Z,{panel:t,title:t.title,description:t.description,scopedVars:t.scopedVars,links:(0,T.H)(t),error:n}),(0,d.jsx)("div",{className:c,children:(0,d.jsx)(M,{"data-testid":f.wl.components.Panels.Panel.title(l),children:e=>{let{closeMenu:n,panelMenuOpen:s}=e;return(0,d.jsx)(O.L,{onClick:n,parent:document,children:(0,d.jsxs)("div",{className:"panel-title",children:[(0,d.jsx)(X,{frames:i.series,panelId:t.id}),r?(0,d.jsx)(I.J,{name:"alerting"===r?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,(0,d.jsx)("h2",{className:u.titleText,children:l}),!o.meta.publicDashboardAccessToken&&(0,d.jsxs)("div",{"data-testid":"panel-dropdown",children:[ee||(ee=(0,d.jsx)(I.J,{name:"angle-down",className:"panel-menu-toggle"})),s?(0,d.jsx)(J,{panel:t,dashboard:o,onClose:n}):null]}),i.request&&i.request.timeInfo&&(0,d.jsxs)("span",{className:"panel-time-info",children:[te||(te=(0,d.jsx)(I.J,{name:"clock-nine",size:"sm"}))," ",i.request.timeInfo]})]})})}})})]})},se=e=>({titleText:k.css`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${e.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ie extends s.PureComponent{constructor(e){super(e),ae(this,"element",null),ae(this,"timeSrv",(0,C.$t)()),ae(this,"scopeProps",void 0),ae(this,"subs",new p.w0),this.state={data:{state:g.Gu.NotStarted,series:[],timeRange:(0,m.JK)()}}}componentDidMount(){const{panel:e}=this.props;this.loadAngularPanel();const t=e.getQueryRunner();this.subs.add(t.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:e=>this.onPanelDataUpdate(e)}))}onPanelDataUpdate(e){let t;if(e.state===g.Gu.Error){const{error:n}=e;n&&t!==n.message&&(t=n.message)}this.setState({data:e,errorMessage:t})}componentWillUnmount(){var e;(this.subs.unsubscribe(),this.props.angularComponent)&&(null===(e=this.props.angularComponent)||void 0===e||e.destroy())}componentDidUpdate(e,t){const{plugin:n,height:s,width:a,panel:i}=this.props;e.plugin!==n&&this.loadAngularPanel(),e.width===a&&e.height===s||this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),i.render())}getInnerPanelHeight(){const{plugin:e,height:t}=this.props,{theme:n}=x.ZP;return t-(this.hasOverlayHeader()?0:n.panelHeaderHeight)-2*(e.noPadding?0:n.panelPadding)-y.QO}getInnerPanelWidth(){const{plugin:e,width:t}=this.props,{theme:n}=x.ZP;return t-2*(e.noPadding?0:n.panelPadding)-y.QO}loadAngularPanel(){const{panel:e,dashboard:t,setPanelAngularComponent:n}=this.props;if(!this.element)return;const s=(0,v.w)();this.scopeProps={panel:e,dashboard:t,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},n({key:e.key,angularComponent:s.load(this.element,this.scopeProps,'<plugin-component type="panel" class="panel-height-helper"></plugin-component>')})}hasOverlayHeader(){const{panel:e}=this.props,{data:t}=this.state;return(!t.request||!t.request.timeInfo)&&!e.hasTitle()}render(){var e;const{dashboard:t,panel:n,isViewing:s,isEditing:a,plugin:i}=this.props,{errorMessage:r,data:o}=this.state,{transparent:l}=n,c=null===(e=o.alertState)||void 0===e?void 0:e.state,u=h()({"panel-container":!0,"panel-container--absolute":j(b.E1.getLocation().pathname),"panel-container--transparent":l,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":void 0!==n.alert,[`panel-alert-state--${c}`]:void 0!==c}),p=h()({"panel-content":!0,"panel-content--no-padding":i.noPadding});return(0,d.jsxs)("div",{className:u,"aria-label":f.wl.components.Panels.Panel.containerByTitle(n.title),children:[(0,d.jsx)(ne,{panel:n,dashboard:t,title:n.title,description:n.description,links:n.links,error:r,isViewing:s,isEditing:a,data:o,alertState:c}),(0,d.jsx)("div",{className:p,children:(0,d.jsx)("div",{ref:e=>this.element=e,className:"panel-height-helper"})})]})}}const re={setPanelAngularComponent:r.o8},oe=(0,a.connect)(((e,t)=>{var n;return{angularComponent:null===(n=(0,w.i)(e,t.panel))||void 0===n?void 0:n.angularComponent}}),re)(ie);var le=n(60053),de=n(92721),ce=n(88246),ue=n(54316),he=n(68633),pe=n(7213),ge=n(38251),me=n(65737),fe=n(27783),ve=n(20317),be=n(72767),xe=n(94080),ye=n(31919),we=n(663);const je=(e,t)=>({matcher:{id:ye.mi.byName,options:e},properties:[Se(t)]}),Se=e=>({id:"color",value:{mode:we.S.Fixed,fixedColor:e}});var Ce=n(8105),ke=n(73144),Ne=n(45921),Oe=n(3420),Ie=n(14496),Te=n(89704);function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Re extends s.PureComponent{constructor(e){super(e),$e(this,"timeSrv",(0,C.$t)()),$e(this,"subs",new p.w0),$e(this,"eventFilter",{onlyLocal:!0}),$e(this,"getSync",(()=>this.props.isEditing?le.m.Off:this.props.dashboard.graphTooltip)),$e(this,"onInstanceStateChange",(e=>{this.props.onInstanceStateChange(e),this.setState({context:Object.assign({},this.state.context,{instanceState:e})})})),$e(this,"onSeriesColorChange",((e,t)=>{this.onFieldConfigChange(((e,t,n)=>{const{overrides:s}=n,a=n.overrides.findIndex((t=>t.matcher.id===ye.mi.byName&&t.matcher.options===e));if(a<0)return Object.assign({},n,{overrides:[...n.overrides,je(e,t)]});const i=Array.from(s),r=i[a],o=r.properties.findIndex((e=>"color"===e.id));if(o<0)return i[a]=Object.assign({},r,{properties:[...r.properties,Se(t)]}),Object.assign({},n,{overrides:i});const l=Array.from(r.properties);return l[o]=Se(t),i[a]=Object.assign({},r,{properties:l}),Object.assign({},n,{overrides:i})})(e,t,this.props.panel.fieldConfig))})),$e(this,"onSeriesVisibilityChange",((e,t)=>{this.onFieldConfigChange((0,Ie.N)(e,t,this.props.panel.fieldConfig,this.state.data.series))})),$e(this,"onToggleLegendSort",(e=>{const t=this.props.panel.options.legend;if(!t)return;let n=t.sortDesc,s=t.sortBy;e!==s&&(n=void 0),!1===n?(s=void 0,n=void 0):(n=!n,s=e),this.onOptionsChange(Object.assign({},this.props.panel.options,{legend:Object.assign({},t,{sortBy:s,sortDesc:n})}))})),$e(this,"onRefresh",(()=>{const{dashboard:e,panel:t,isInView:n,width:s}=this.props;if(!n)return void this.setState({refreshWhenInView:!0});const a=(0,H.W1)(t,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(s<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),t.runAllPanelQueries({dashboardId:e.id,dashboardUID:e.uid,dashboardTimezone:e.getTimezone(),publicDashboardAccessToken:e.meta.publicDashboardAccessToken,timeData:a,width:s})}else this.setState({data:Object.assign({},this.state.data,{timeRange:this.timeSrv.timeRange()}),renderCounter:this.state.renderCounter+1,liveTime:void 0})})),$e(this,"onRender",(()=>{const e={renderCounter:this.state.renderCounter+1};this.setState(e)})),$e(this,"onOptionsChange",(e=>{this.props.panel.updateOptions(e)})),$e(this,"onFieldConfigChange",(e=>{this.props.panel.updateFieldConfig(e)})),$e(this,"onPanelError",(e=>{const t=e.message||"Error in plugin";this.state.errorMessage!==t&&this.setState({errorMessage:t})})),$e(this,"onPanelErrorRecover",(()=>{this.setState({errorMessage:void 0})})),$e(this,"onAnnotationCreate",(async e=>{const t=e.from!==e.to,n={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:t,time:e.from,timeEnd:t?e.to:0,tags:e.tags,text:e.description};await(0,ke.xD)(n),(0,Ne.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1(n))})),$e(this,"onAnnotationDelete",(async e=>{await(0,ke.Dl)({id:e}),(0,Ne.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1({id:e}))})),$e(this,"onAnnotationUpdate",(async e=>{const t=e.from!==e.to,n={id:e.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:t,time:e.from,timeEnd:t?e.to:0,tags:e.tags,text:e.description};await(0,ke._E)(n),(0,Ne.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1(n))})),$e(this,"onChangeTimeRange",(e=>{this.timeSrv.setTime({from:(0,ce.zh)(e.from),to:(0,ce.zh)(e.to)})}));const t=e.dashboard.events.newScopedBus(`panel:${e.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventBus:t,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:e.dashboard.canAddAnnotations.bind(e.dashboard),canEditAnnotations:e.dashboard.canEditAnnotations.bind(e.dashboard),canDeleteAnnotations:e.dashboard.canDeleteAnnotations.bind(e.dashboard)},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?ue.zj.PanelEditor:this.props.isViewing?ue.zj.PanelViewer:ue.zj.Dashboard}getInitialPanelDataState(){return{state:g.Gu.NotStarted,series:[],timeRange:(0,m.JK)()}}componentDidMount(){const{panel:e,dashboard:t}=this.props;this.subs.add(e.events.subscribe(ge.U5,this.onRefresh)),this.subs.add(e.events.subscribe(Ce._z,this.onRender)),t.panelInitialized(this.props.panel),this.hasPanelSnapshot?this.setState({data:(0,Oe.y)(e,t),isFirstLoad:!1}):(this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(e.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:e=>this.onDataUpdate(e)})),Te.A.listen(this))}componentWillUnmount(){this.subs.unsubscribe(),Te.A.remove(this)}liveTimeChanged(e){const{data:t}=this.state;if(t.timeRange){const n=e.to.valueOf()-t.timeRange.to.valueOf();if(n<100)return void console.log("Skip tick render",this.props.panel.title,n)}this.setState({liveTime:e})}componentDidUpdate(e){const{isInView:t,width:n}=this.props,{context:s}=this.state,a=this.getPanelContextApp();s.app!==a&&this.setState({context:Object.assign({},s,{app:a})}),t!==e.isInView&&t&&this.state.refreshWhenInView&&this.onRefresh(),n!==e.width&&Te.A.updateInterval(this)}onDataUpdate(e){const{dashboard:t,panel:n,plugin:s}=this.props;if(s.meta.skipDataQuery)return void this.setState({data:this.getInitialPanelDataState()});let a,{isFirstLoad:i}=this.state;switch(e.state){case g.Gu.Loading:if(this.state.data.state===g.Gu.Loading)return;break;case g.Gu.Error:const{error:s}=e;s&&a!==s.message&&(a=s.message);break;case g.Gu.Done:t.snapshot&&(n.snapshotData=e.series.map((e=>(0,he.og)(e)))),i&&(i=!1)}this.setState({isFirstLoad:i,errorMessage:a,data:e,liveTime:void 0})}get hasPanelSnapshot(){const{panel:e}=this.props;return e.snapshotData&&e.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(e,t){return e===g.Gu.Done||t.skipDataQuery}skipFirstRender(e){const{isFirstLoad:t}=this.state;return this.wantsQueryExecution&&t&&(e===g.Gu.Loading||e===g.Gu.NotStarted)}renderPanelContent(e,t){var n,s;const{panel:a,plugin:i,dashboard:r}=this.props,{renderCounter:o,data:l}=this.state,{state:c}=l;if(this.skipFirstRender(c))return null;this.shouldSignalRenderingCompleted(c,i.meta)&&xe.r.renderingCompleted();const u=i.panel,h=null!==(n=null!==(s=this.state.liveTime)&&void 0!==s?s:l.timeRange)&&void 0!==n?n:this.timeSrv.timeRange(),p=a.getOptions();return this.eventFilter.onlyLocal=0===r.graphTooltip,(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(fe._w,{value:this.state.context,children:(0,d.jsx)(u,{id:a.id,data:l,title:a.title,timeRange:h,timeZone:this.props.dashboard.getTimezone(),options:p,fieldConfig:a.fieldConfig,transparent:a.transparent,width:e,height:t,renderCounter:o,replaceVariables:a.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:r.events})})})}renderPanel(e,t){var n,s;const{panel:a,plugin:i,dashboard:r}=this.props,{renderCounter:o,data:l}=this.state,{theme:c}=me.v,{state:u}=l;if(this.skipFirstRender(u))return null;this.shouldSignalRenderingCompleted(u,i.meta)&&xe.r.renderingCompleted();const p=i.panel,g=null!==(n=null!==(s=this.state.liveTime)&&void 0!==s?s:l.timeRange)&&void 0!==n?n:this.timeSrv.timeRange(),m=this.hasOverlayHeader()?0:c.panelHeaderHeight,f=i.noPadding?0:c.panelPadding,v=e-2*f-y.QO,b=t-m-2*f-y.QO,x=h()({"panel-content":!0,"panel-content--no-padding":i.noPadding}),w=a.getOptions();this.eventFilter.onlyLocal=0===r.graphTooltip;const j=this.props.timezone||this.props.dashboard.getTimezone();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:x,children:(0,d.jsx)(pe.b,{meta:i.meta,children:(0,d.jsx)(fe._w,{value:this.state.context,children:(0,d.jsx)(p,{id:a.id,data:l,title:a.title,timeRange:g,timeZone:j,options:w,fieldConfig:a.fieldConfig,transparent:a.transparent,width:v,height:b,renderCounter:o,replaceVariables:a.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:r.events})})})})})}hasOverlayHeader(){const{panel:e}=this.props,{data:t}=this.state;return(!t.request||!t.request.timeInfo)&&!e.hasTitle()}render(){var e;const{dashboard:t,panel:n,isViewing:s,isEditing:a,width:i,height:r,plugin:o}=this.props,{errorMessage:l,data:c}=this.state,{transparent:u}=n,p=null===(e=c.alertState)||void 0===e?void 0:e.state,g=h()({"panel-container":!0,"panel-container--absolute":j(b.E1.getLocation().pathname),"panel-container--transparent":u,"panel-container--no-title":this.hasOverlayHeader(),[`panel-alert-state--${p}`]:void 0!==p}),m=n.getDisplayTitle(),v=o.noPadding?"none":"md",x=[(0,d.jsx)(P,{state:c.state,onClick:()=>n.getQueryRunner().cancelQuery()},"loading-indicator")];return me.v.featureToggles.newPanelChromeUI?(0,d.jsx)(ve.fm,{width:i,height:r,title:m,leftItems:x,padding:v,children:(e,t)=>(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(be.SV,{dependencies:[c,o,n.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover,children:n=>{let{error:s}=n;return s?null:this.renderPanelContent(e,t)}})})}):(0,d.jsxs)("section",{className:g,"aria-label":f.wl.components.Panels.Panel.containerByTitle(n.title),children:[(0,d.jsx)(ne,{panel:n,dashboard:t,title:n.title,description:n.description,links:n.links,error:l,isEditing:a,isViewing:s,alertState:p,data:c}),(0,d.jsx)(be.SV,{dependencies:[c,o,n.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover,children:e=>{let{error:t}=e;return t?null:this.renderPanel(i,r)}})]})}}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const De={initPanelState:i.JI,setPanelInstanceState:r.pC},Ae=(0,a.connect)(((e,t)=>{const n=e.panels[t.stateKey];return n?{plugin:n.plugin,instanceState:n.instanceState}:{plugin:null}}),De);class Me extends s.PureComponent{constructor(){super(...arguments),Pe(this,"onInstanceStateChange",(e=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:e})})),Pe(this,"onVisibilityChange",(e=>{this.props.panel.isInView=e})),Pe(this,"onPanelLoad",(()=>{this.props.plugin||this.props.initPanelState(this.props.panel)})),Pe(this,"renderPanel",(e=>{const{dashboard:t,panel:n,isViewing:s,isEditing:a,width:i,height:r,plugin:o,timezone:l}=this.props;return o?o&&o.angularPanelCtrl?(0,d.jsx)(oe,{plugin:o,panel:n,dashboard:t,isViewing:s,isEditing:a,isInView:e,width:i,height:r}):(0,d.jsx)(Re,{plugin:o,panel:n,dashboard:t,isViewing:s,isEditing:a,isInView:e,width:i,height:r,onInstanceStateChange:this.onInstanceStateChange,timezone:l}):null}))}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:e,height:t,lazy:n}=this.props;return n?(0,d.jsx)(c,{width:e,height:t,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad,children:this.renderPanel}):this.renderPanel(!0)}}Pe(Me,"defaultProps",{lazy:!0});const Le=Ae(Me)},54958:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var s,a,i,r=n(68404),o=n(42870),l=n(25004),d=n(2633),c=n(80795),u=n(21888),h=n(53091),p=n(34944),g=n(45916);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Error="Error",e.Info="Info",e.Links="Links"}(i||(i={}));class f extends r.Component{constructor(){super(...arguments),m(this,"timeSrv",(0,h.$t)()),m(this,"getInfoMode",(()=>{const{panel:e,error:t}=this.props;return t?i.Error:e.description?i.Info:e.links&&e.links.length?i.Links:void 0})),m(this,"getInfoContent",(()=>{const{panel:e}=this.props,t=e.description||"",n=(0,d.J)().replace(t,e.scopedVars),s=(0,o.a)(n),a=this.props.links&&this.props.links.getLinks(e.replaceVariables);return(0,g.jsxs)("div",{className:"panel-info-content markdown-html",children:[(0,g.jsx)("div",{dangerouslySetInnerHTML:{__html:s}}),a&&a.length>0&&(0,g.jsx)("ul",{className:"panel-info-corner-links",children:a.map(((e,t)=>(0,g.jsx)("li",{children:(0,g.jsx)("a",{className:"panel-info-corner-links__item",href:e.href,target:e.target,children:e.title})},t)))})]})})),m(this,"onClickError",(()=>{c.E1.partial({inspect:this.props.panel.id,inspectTab:p.q.Error})}))}renderCornerType(e,t,n){const r=e===i.Error?"error":"info",o=`panel-info-corner panel-info-corner--${e.toLowerCase()}`,d=l.wl.components.Panels.Panel.headerCornerInfo(e.toLowerCase());return(0,g.jsx)(u.u,{content:t,placement:"top-start",theme:r,interactive:!0,children:(0,g.jsxs)("button",{type:"button",className:o,onClick:n,"aria-label":d,children:[s||(s=(0,g.jsx)("i",{"aria-hidden":!0,className:"fa"})),a||(a=(0,g.jsx)("span",{className:"panel-info-corner-inner"}))]})})}render(){const{error:e}=this.props,t=this.getInfoMode();return t?t===i.Error&&e?this.renderCornerType(t,e,this.onClickError):t===i.Info||t===i.Links?this.renderCornerType(t,this.getInfoContent):null:null}}const v=f},73320:(e,t,n)=>{"use strict";n.d(t,{u:()=>u});var s,a=n(52423),i=n(68404),r=n(25004),o=n(16755),l=n(42454),d=n(99500),c=n(45916);const u=e=>{const[t,n]=(0,i.useState)(null),a="submenu"===e.type,u="divider"===e.type,g=(0,o.wW)(p),m=e.iconClassName?(0,l.iJ)(e.iconClassName):void 0;return u?s||(s=(0,c.jsx)("li",{className:"divider"})):(0,c.jsxs)("li",{className:a?`dropdown-submenu ${h(t)}`:void 0,ref:n,children:[(0,c.jsxs)("a",{onClick:e.onClick,href:e.href,children:[m&&(0,c.jsx)(d.J,{name:m,className:g.menuIconClassName}),(0,c.jsxs)("span",{className:"dropdown-item-text","aria-label":r.wl.components.Panels.Panel.headerItems(e.text),children:[e.text,a&&(0,c.jsx)(d.J,{name:"angle-right",className:g.shortcutIconClassName})]}),e.shortcut&&(0,c.jsxs)("span",{className:"dropdown-menu-item-shortcut",children:[(0,c.jsx)(d.J,{name:"keyboard",className:g.menuIconClassName})," ",e.shortcut]})]}),e.children]})};function h(e){if(!e)return"invisible";const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return 0===n.width?"invisible":t.right+n.width+10>window.innerWidth?"pull-left":"pull-right"}function p(e){return{menuIconClassName:(0,a.css)({marginRight:e.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,a.css)({position:"absolute",top:"7px",right:e.spacing(.5),color:e.colors.text.secondary})}}},14496:(e,t,n)=>{"use strict";n.d(t,{N:()=>h});var s=n(15399),a=n(15696),i=n(31919),r=n(27843),o=n(32934),l=n(77401),d=n(25393);const c="hideSeriesFrom",u=(0,s.Y4)(c);function h(e,t,n,s){const{overrides:a}=n,i=e,r=a.findIndex(u);if(r<0){if(t===d.R.ToggleSelection){const e=p([i,...b(a,s)]);return Object.assign({},n,{overrides:[...n.overrides,e]})}const e=p(v(s,i));return Object.assign({},n,{overrides:[...n.overrides,e]})}const o=Array.from(a),[l]=o.splice(r,1);if(t===d.R.ToggleSelection){let e=m(l);const t=b(o,s);if(t.length>0&&(e=e.filter((e=>t.indexOf(e)<0))),e[0]===i&&1===e.length)return Object.assign({},n,{overrides:o});const a=p([i,...t]);return Object.assign({},n,{overrides:[...o,a]})}const c=g(l,i);return f(c,s)?Object.assign({},n,{overrides:o}):Object.assign({},n,{overrides:[...o,c]})}function p(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Ys.exclude,s=arguments.length>2?arguments[2]:void 0;return s=null!==(t=s)&&void 0!==t?t:{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:c,matcher:{id:i.mi.byNames,options:{mode:n,names:e,prefix:n===a.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[Object.assign({},s,{value:{viz:!0,legend:!1,tooltip:!1}})]}}const g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Ys.exclude;const s=e.properties.find((e=>"custom.hideFrom"===e.id)),i=m(e),r=i.findIndex((e=>e===t));return r<0?i.push(t):i.splice(r,1),p(i,n,s)},m=e=>{var t;const n=null===(t=e.matcher.options)||void 0===t?void 0:t.names;return Array.isArray(n)?[...n]:[]},f=(e,t)=>m(e).length===v(t).length,v=(e,t)=>{const n=new Set;for(const s of e)for(const a of s.fields){if(a.type!==r.fS.number)continue;const i=(0,o.C)(a,s,e);i!==t&&n.add(i)}return Array.from(n)},b=(e,t)=>{let n=[];for(const a of e){var s;const e=a.properties.find((e=>"custom.hideFrom"===e.id));if(void 0!==e&&!0===(null===(s=e.value)||void 0===s?void 0:s.legend)){const e=l.Ls.get(a.matcher.id).get(a.matcher.options);for(const s of t)for(const a of s.fields){if(a.type!==r.fS.number)continue;const i=(0,o.C)(a,s,t);e(a,s,t)&&n.push(i)}}}return n}},89704:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(63479),a=n(88246),i=n(42914);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=3e5;function l(e,t){const n=100*Math.ceil(e/t/100);return n>o?o:n}const d=new class{constructor(){r(this,"listeners",[]),r(this,"budget",1),r(this,"threshold",1.5),r(this,"ok",new s.X(!0)),r(this,"lastUpdate",Date.now()),r(this,"isLive",!1),r(this,"timeRange",void 0),r(this,"liveTimeOffset",0),r(this,"measure",(()=>{const e=Date.now();this.budget=(e-this.lastUpdate)/100;const t=this.ok.getValue(),n=this.budget<=this.threshold;if(t!==n&&this.ok.next(n),this.lastUpdate=e,this.isLive&&this.ok.getValue()&&this.timeRange){let t;for(const n of this.listeners){if(!n.panel.props.isInView)continue;if(e-n.last>=n.intervalMs){if(!t){const{raw:n}=this.timeRange;t={raw:n,from:(0,a.CQ)(e-this.liveTimeOffset),to:(0,a.CQ)(e)}}n.panel.liveTimeChanged(t),n.last=e}}}}))}setLiveTimeRange(e){var t;if(this.timeRange=e,this.isLive="now"===(null==e||null===(t=e.raw)||void 0===t?void 0:t.to),this.isLive){var n,s;const t=null===(n=i.parse(e.raw.from,!1))||void 0===n?void 0:n.valueOf(),a=null===(s=i.parse(e.raw.to,!0))||void 0===s?void 0:s.valueOf();this.liveTimeOffset=a-t;for(const e of this.listeners)e.intervalMs=l(this.liveTimeOffset,e.panel.props.width)}}listen(e){this.listeners.push({last:this.lastUpdate,panel:e,intervalMs:l(6e4,e.props.width)})}remove(e){this.listeners=this.listeners.filter((t=>t.panel!==e))}updateInterval(e){if(this.timeRange&&this.isLive)for(const t of this.listeners)if(t.panel===e)return void(t.intervalMs=l(this.liveTimeOffset,t.panel.props.width))}};setInterval(d.measure,100)},32086:(e,t,n)=>{"use strict";n.d(t,{Bg:()=>w,pD:()=>j});var s=n(21256),a=n.n(s),i=n(82897),r=n.n(i),o=n(36365),l=n.n(o),d=n(94025),c=n(42914),u=n(93570),h=n(80795),p=n(42200),g=n(38467),m=n(82782),f=n(42833),v=n(81508),b=n(64850),x=n(68374),y=n(94722);class w{constructor(){}_dashboardLoadFailed(e,t){return{meta:{canStar:!1,isSnapshot:t=t||!1,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:e}}}loadDashboard(e,t,n){let s;return s="script"===e?this._loadScriptedDashboard(t):"snapshot"===e?p.ae.get("/api/snapshots/"+t).catch((()=>this._dashboardLoadFailed("Snapshot not found",!0))):e===b.vq.Path?(0,v.$)().getDashboard(t):"ds"===e?this._loadFromDatasource(t):"public"===e?p.ae.getPublicDashboardByUid(n).then((e=>e)).catch((()=>this._dashboardLoadFailed("Public Dashboard Not found",!0))):p.ae.getDashboardByUid(n).then((e=>{if(e.meta.isFolder)throw x.h$.emit(d.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return e})).catch((()=>this._dashboardLoadFailed("Not found",!0))),s.then((e=>(!0!==e.meta.dashboardNotFound&&g.Z.addDashboardImpression(e.dashboard.uid),e))),s}_loadScriptedDashboard(e){const t="public/dashboards/"+e.replace(/\.(?!js)/,"/")+"?"+(new Date).getTime();return(0,u.i)().get(t).then(this._executeScript.bind(this)).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e.data})),(e=>(console.error("Script dashboard error "+e),x.h$.emit(d.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard"))))}async _loadFromDatasource(e){const t=await(0,f.ak)().get(e);if(!t)return Promise.reject("can not find datasource: "+e);const n=new URLSearchParams(window.location.search),s=n.get("path");if(!s)return Promise.reject("expecting path parameter");const a={};return n.forEach(((e,t)=>{a[t]=e})),(0,u.i)().get(`/api/datasources/${t.id}/resources/${s}`,a).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e})))}_executeScript(e){const t={dashboardSrv:(0,y.h4)(),datasourceSrv:(0,f.ak)()},n=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",e)(h.E1.getSearchObject(),m.Z,c,r(),l(),window,document,a(),a(),t);return(0,i.isFunction)(n)?new Promise((e=>{n((t=>{e({data:t})}))})):{data:n}}}let j=new w},94722:(e,t,n)=>{"use strict";n.d(t,{h4:()=>m});var s=n(3363),a=n(94025),i=n(2247),r=n(35448),o=n(42200),l=n(1671),d=n(8105),c=n(62646),u=n(13631);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{constructor(){h(this,"dashboard",void 0),h(this,"onRemovePanel",(e=>{const t=this.getCurrent();t&&(0,u.WJ)(t,t.getPanelById(e),!0)})),i.h.subscribe(d.Eb,(e=>this.onRemovePanel(e.payload)))}create(e,t){return new c.f(e,t)}setCurrent(e){this.dashboard=e}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(e){var t;const n=JSON.parse(e);return(0,l.uC)({dashboard:n,folderId:(null===(t=this.dashboard)||void 0===t?void 0:t.meta.folderId)||n.folderId})}saveDashboard(e,t){return(0,s.n)((0,o.i)().fetch(Object.assign({url:"/api/dashboards/db/",method:"POST",data:Object.assign({},e,{dashboard:e.dashboard.getSaveModelClone()})},t)))}starDashboard(e,t){const n=(0,o.i)(),s={showSuccessAlert:!1,url:"/api/user/stars/dashboard/"+e,method:t?"DELETE":"POST"};return n.request(s).then((()=>{var n;const s=!t;(null===(n=this.dashboard)||void 0===n?void 0:n.id)===e&&(this.dashboard.meta.isStarred=s);const o=s?(0,r.t)("notifications.starred-dashboard","Dashboard starred"):(0,r.t)("notifications.unstarred-dashboard","Dashboard unstarred");return i.h.emit(a.SI.alertSuccess,[o]),s}))}}let g;function m(){return g||(g=new p),g}},33971:(e,t,n)=>{"use strict";n.d(t,{Qi:()=>g,lh:()=>f});var s=n(53786),a=n(85526),i=n(13016),r=n(94514),o=n(23214),l=n(68633),d=n(93570),c=n(93864),u=n(18311),h=n(31135),p=n(43271);const g="-- Public --",m="1min";class f extends o.MF{constructor(e){let t={};f.isMixedDatasource(e)&&(t.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:t,uid:f.resolveUid(e),jsonData:{},access:"proxy",readOnly:!0}),this.interval=f.resolveInterval(e),this.annotations={prepareQuery:e=>Object.assign({},e,{queryType:u.hR.Annotations,refId:"anno"})}}static resolveUid(e){var t;return"string"==typeof e?e:null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:g}static isMixedDatasource(e){return"string"!=typeof e&&null!=e&&(null==e?void 0:e.uid)===h.D}static resolveInterval(e){if("string"==typeof e||null==e)return m;const t="interval"in e?e.interval:void 0;return null!=t?t:m}query(e){const{intervalMs:t,maxDataPoints:n,requestId:o,publicDashboardAccessToken:l,panelId:h}=e;if(!e.targets.length)return(0,s.of)({data:[]});const g=e.targets[0];var m;if(g.queryType===u.hR.Annotations)return(null==g||null===(m=g.datasource)||void 0===m?void 0:m.uid)===p.JY?(0,a.D)(this.getAnnotations(e)):(0,s.of)({data:[]});{const e={intervalMs:t,maxDataPoints:n};return(0,d.i)().fetch({url:`/api/public/dashboards/${l}/panels/${h}/query`,method:"POST",data:e,requestId:o}).pipe((0,i.w)((e=>(0,s.of)((0,c.z1)(e,undefined)))),(0,r.K)((e=>(0,s.of)((0,c.z1)(e)))))}}async getAnnotations(e){const{publicDashboardAccessToken:t,range:{to:n,from:s}}=e,a={from:s.valueOf(),to:n.valueOf()},i=await(0,d.i)().get(`/api/public/dashboards/${t}/annotations`,a);return{data:[(0,l.g0)(i)]}}testDatasource(){return Promise.resolve(null)}}},53091:(e,t,n)=>{"use strict";n.d(t,{$t:()=>x});var s=n(82897),a=n(88246),i=n(12717),r=n(85699),o=n(42914),l=n(80795),d=n(2247),c=n(46782),u=n(59196),h=n(22342),p=n(76926),g=n(8105),m=n(21162);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v{constructor(e){f(this,"time",void 0),f(this,"refreshTimer",void 0),f(this,"refresh",void 0),f(this,"autoRefreshPaused",!1),f(this,"oldRefresh",void 0),f(this,"timeModel",void 0),f(this,"timeAtLoad",void 0),f(this,"autoRefreshBlocked",void 0),f(this,"timeRangeForUrl",(()=>{const e=this.timeRange().raw;return(0,a.v9)(e.from)&&(e.from=e.from.valueOf().toString()),(0,a.v9)(e.to)&&(e.to=e.to.valueOf().toString()),e})),this.contextSrv=e,this.time=(0,i.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),d.Z.subscribe(g.p8,(e=>{this.zoomOut(e.payload.scale,e.payload.updateUrl)})),d.Z.subscribe(g.Qt,(e=>{this.shiftTime(e.payload.direction,e.payload.updateUrl)})),d.Z.subscribe(g.QI,(()=>{this.makeAbsoluteTime()})),document.addEventListener("visibilitychange",(()=>{this.autoRefreshBlocked&&"visible"===document.visibilityState&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())}))}init(e){var t,n;this.timeModel=e,this.time=e.time,this.refresh=e.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,s.cloneDeep)(this.time);const a=r.convertRawToRange(this.time,null===(t=this.timeModel)||void 0===t?void 0:t.getTimezone(),null===(n=this.timeModel)||void 0===n?void 0:n.fiscalYearStartMonth);a.to.isBefore(a.from)&&this.setTime({from:a.raw.to,to:a.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(e){return this.contextSrv.minRefreshInterval?e.filter((e=>""!==e)).filter(this.contextSrv.isAllowedInterval):e}parseTime(){(0,s.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,a.CQ)(this.time.from).utc()),(0,s.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,a.CQ)(this.time.to).utc())}parseUrlParam(e){if(-1!==e.indexOf("now"))return e;if(8===e.length){const t=(0,a.zh)(e,"YYYYMMDD");if(t.isValid())return t}else if(15===e.length){const t=(0,a.zh)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t}if(!isNaN(e)){const t=parseInt(e,10);return(0,a.zh)(t)}return null}getTimeWindow(e,t){const n=parseInt(e,10);let s;return s=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):r.intervalToMs(t),{from:(0,a.zh)(n-s/2),to:(0,a.zh)(n+s/2)}}initTimeFromUrl(){var e,t,n,s;if(c.vc.isPublicDashboardView)return;const a=l.E1.getSearch();a.get("time")&&a.get("time.window")&&(this.time=this.getTimeWindow(a.get("time"),a.get("time.window"))),a.get("from")&&(this.time.from=this.parseUrlParam(a.get("from"))||this.time.from),a.get("to")&&(this.time.to=this.parseUrlParam(a.get("to"))||this.time.to),a.get("to")&&-1===a.get("to").indexOf("now")&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=function(e){let{urlRefresh:t,currentRefresh:n,isAllowedIntervalFn:s,minRefreshInterval:a,refreshIntervals:i=m.o5}=e;if(!t)return n;const r=s(t),o=i.find((e=>e===t));if(!r||!o){var l;const e=a?i.find((e=>e===a)):void 0,t=null!=i&&i.length?i[0]:void 0;return null!==(l=null!=e?e:t)&&void 0!==l?l:n}return t||n}({urlRefresh:a.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(null===(e=this.timeModel)||void 0===e||null===(t=e.timepicker)||void 0===t?void 0:t.refresh_intervals)?null===(n=this.timeModel)||void 0===n||null===(s=n.timepicker)||void 0===s?void 0:s.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:c.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const e=l.E1.getSearch();if(e.get("left"))return;const t=this.timeRangeForUrl(),n=e.get("from"),s=e.get("to");n&&s?n===t.from&&s===t.to||(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(e){this.timeModel&&(this.timeModel.refresh=e),this.stopAutoRefresh();const t=l.E1.getSearchObject();if(!e)return void(t.refresh&&l.E1.partial({refresh:null},!0));const n=this.contextSrv.getValidInterval(e),s=r.intervalToMs(n);this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(s),!this.autoRefreshPaused&&this.refreshTimeModel()}),s);const a=this.contextSrv.getValidInterval(e);t.refresh!==a&&l.E1.partial({refresh:a},!0)}refreshTimeModel(){var e;null===(e=this.timeModel)||void 0===e||e.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(e){this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(e),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0}),e)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c.vc.isPublicDashboardView){var i;if((0,s.extend)(this.time,e),(0,a.v9)(e.to))this.oldRefresh=(null===(i=this.timeModel)||void 0===i?void 0:i.refresh)||this.oldRefresh,this.setAutoRefresh(!1);else this.oldRefresh&&this.oldRefresh!==(null===(t=this.timeModel)||void 0===t?void 0:t.refresh)&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null);if(!0===n){const e=this.timeRangeForUrl(),t=l.E1.getSearchObject();if(t.from===e.from.toString()&&t.to===e.to.toString())return;t.from=e.from.toString(),t.to=e.to.toString(),l.E1.partial(t)}this.refreshTimeModel()}}timeRange(){return(0,p.O)(this.time,this.timeModel)}zoomOut(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.timeRange(),{from:s,to:i}=(0,h.h)(n,e);this.setTime({from:(0,a.zh)(s),to:(0,a.zh)(i)},t)}shiftTime(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.timeRange(),{from:s,to:i}=(0,h.e)(e,n);this.setTime({from:(0,a.zh)(s),to:(0,a.zh)(i)},t)}makeAbsoluteTime(){if(l.E1.getSearch().get("left"))return;const{from:e,to:t}=this.timeRange();this.setTime({from:e,to:t},!0)}isRefreshOutsideThreshold(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;const n=this.timeRange();if(o.isMathString(n.raw.from)){const s=n.to.diff(n.from);return Date.now()-e>=s*t}return!1}}let b;function x(){return b||(b=new v(u.Vt)),b}},80720:(e,t,n)=>{"use strict";n.d(t,{o:()=>M,p:()=>z});var s=n(82897),a=n(68959),i=n(70332),r=n(274),o=n(66827),l=n(12812),d=n(84542),c=n(31919),u=n(27843),h=n(9695),p=n(33660),g=n(8910),m=n(27864),f=n(3404),v=n(46782),b=n(42949);var x=n(82782),y=n(42833),w=n(96668),j=n(777),S=n(31135),C=n(37275),k=n(21126),N=n(52253),O=n(41181);const I=["statistics","name"];function T(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}function $(e,t){const n=[];if(null!=e&&e.statistics&&null!=e&&e.statistics.length){e.statistic=e.statistics[0];for(const t of e.statistics.splice(1))n.push(Object.assign({},e,{statistic:t}))}for(const e of n)e.refId=(0,N.Hs)(t),delete e.statistics,t.push(e);return delete e.statistics,n}function R(e){var t;const n=[];if(e&&"statistics"in e&&null!=e&&null!==(t=e.statistics)&&void 0!==t&&t.length){for(const t of e.statistics.splice(1)){const{name:s}=e,a=T(e,I);n.push(Object.assign({},a,{statistic:t,name:`${s} - ${t}`}))}e.statistic=e.statistics[0],0!==n.length&&(e.name=`${e.name} - ${e.statistic}`),delete e.statistics}return n}var P=n(72379),D=n(38591);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.S.setInit(f.u),a.N.setInit(f.l);class M{constructor(e){A(this,"dashboard",void 0),this.dashboard=e,(0,g.F)()||(0,g.w)(new y.ND)}updateSchema(e){let t,n,a,r;const o=this.dashboard.schemaVersion,l=[];if(this.dashboard.schemaVersion=37,o!==this.dashboard.schemaVersion){if(o<2&&(e.services&&e.services.filter&&(this.dashboard.time=e.services.filter.time,this.dashboard.templating.list=e.services.filter.list||[]),l.push((e=>("graphite"===e.type&&(e.type="graph"),"graph"!==e.type||((0,s.isBoolean)(e.legend)&&(e.legend={show:e.legend}),e.grid&&(e.grid.min&&(e.grid.leftMin=e.grid.min,delete e.grid.min),e.grid.max&&(e.grid.leftMax=e.grid.max,delete e.grid.max)),e.y_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[0]=e.y_format,delete e.y_format),e.y2_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[1]=e.y2_format,delete e.y2_format)),e)))),o<3){let e=this.dashboard.getNextPanelId();l.push((t=>(t.id||(t.id=e,e+=1),t)))}if(o<4&&l.push((e=>("graph"!==e.type||((0,s.each)(e.aliasYAxis,((t,n)=>{e.seriesOverrides=[{alias:n,yaxis:t}]})),delete e.aliasYAxis),e))),o<6){const n=(0,s.find)(e.pulldowns,{type:"annotations"});for(n&&(this.dashboard.annotations={list:n.annotations||[]}),t=0;t<this.dashboard.templating.list.length;t++){const e=this.dashboard.templating.list[t];void 0===e.datasource&&(e.datasource=null),"filter"===e.type&&(e.type="query"),void 0===e.type&&(e.type="query"),void 0===e.allFormat&&(e.allFormat="glob")}}if(o<7&&(e.nav&&e.nav.length&&(this.dashboard.timepicker=e.nav[0]),l.push((e=>((0,s.each)(e.targets,(t=>{t.refId||(t.refId=e.getNextQueryLetter&&e.getNextQueryLetter())})),e)))),o<8&&l.push((e=>((0,s.each)(e.targets,(e=>{e.fields&&e.tags&&e.groupBy&&(e.rawQuery?(delete e.fields,delete e.fill):(e.select=(0,s.map)(e.fields,(e=>{const t=[];return t.push({type:"field",params:[e.name]}),t.push({type:e.func,params:[]}),e.mathExpr&&t.push({type:"math",params:[e.mathExpr]}),e.asExpr&&t.push({type:"alias",params:[e.asExpr]}),t})),delete e.fields,(0,s.each)(e.groupBy,(e=>{"time"===e.type&&e.interval&&(e.params=[e.interval],delete e.interval),"tag"===e.type&&e.key&&(e.params=[e.key],delete e.key)})),e.fill&&(e.groupBy.push({type:"fill",params:[e.fill]}),delete e.fill)))})),e))),o<9&&l.push((e=>{if("singlestat"!==e.type&&""!==e.thresholds)return e;if(e.thresholds){const t=e.thresholds.split(",");t.length>=3&&(t.shift(),e.thresholds=t.join(","))}return e})),o<10&&l.push((e=>("table"!==e.type||(0,s.each)(e.styles,(e=>{if(e.thresholds&&e.thresholds.length>=3){const t=e.thresholds;t.shift(),e.thresholds=t}})),e))),o<12&&(0,s.each)(this.dashboard.getVariables(),(e=>{e.refresh&&(e.refresh=1),e.refresh||(e.refresh=0),e.hideVariable?e.hide=2:e.hideLabel&&(e.hide=1)})),o<12&&l.push((e=>"graph"!==e.type?e:e.grid?(e.yaxes||(e.yaxes=[{show:e["y-axis"],min:e.grid.leftMin,max:e.grid.leftMax,logBase:e.grid.leftLogBase,format:e.y_formats[0],label:e.leftYAxisLabel},{show:e["y-axis"],min:e.grid.rightMin,max:e.grid.rightMax,logBase:e.grid.rightLogBase,format:e.y_formats[1],label:e.rightYAxisLabel}],e.xaxis={show:e["x-axis"]},delete e.grid.leftMin,delete e.grid.leftMax,delete e.grid.leftLogBase,delete e.grid.rightMin,delete e.grid.rightMax,delete e.grid.rightLogBase,delete e.y_formats,delete e.leftYAxisLabel,delete e.rightYAxisLabel,delete e["y-axis"],delete e["x-axis"]),e):e)),o<13&&l.push((e=>{if("graph"!==e.type)return e;if(!e.grid)return e;e.thresholds||(e.thresholds=[]);const t={},n={};return null!==e.grid.threshold1&&(t.value=e.grid.threshold1,e.grid.thresholdLine?(t.line=!0,t.lineColor=e.grid.threshold1Color,t.colorMode="custom"):(t.fill=!0,t.fillColor=e.grid.threshold1Color,t.colorMode="custom")),null!==e.grid.threshold2&&(n.value=e.grid.threshold2,e.grid.thresholdLine?(n.line=!0,n.lineColor=e.grid.threshold2Color,n.colorMode="custom"):(n.fill=!0,n.fillColor=e.grid.threshold2Color,n.colorMode="custom")),(0,s.isNumber)(t.value)&&((0,s.isNumber)(n.value)?t.value>n.value?(t.op=n.op="lt",e.thresholds.push(t),e.thresholds.push(n)):(t.op=n.op="gt",e.thresholds.push(t),e.thresholds.push(n)):(t.op="gt",e.thresholds.push(t))),delete e.grid.threshold1,delete e.grid.threshold1Color,delete e.grid.threshold2,delete e.grid.threshold2Color,delete e.grid.thresholdLine,e})),o<14&&(this.dashboard.graphTooltip=e.sharedCrosshair?1:0),o<16&&this.upgradeToGridLayout(e),o<17&&l.push((e=>{if(e.minSpan){const n=b.cz/e.minSpan,a=(t=b.cz,Array.from(new Array(t+1),((e,t)=>t)).filter((e=>t%e==0)));e.maxPerRow=a[(0,s.findIndex)(a,(e=>e>n))-1]}var t;return delete e.minSpan,e})),o<18&&l.push((e=>(e["options-gauge"]&&(e.options=e["options-gauge"],e.options.valueOptions={unit:e.options.unit,stat:e.options.stat,decimals:e.options.decimals,prefix:e.options.prefix,suffix:e.options.suffix},e.options.thresholds&&e.options.thresholds.reverse(),delete e.options.options,delete e.options.unit,delete e.options.stat,delete e.options.decimals,delete e.options.prefix,delete e.options.suffix,delete e["options-gauge"]),e))),o<19&&l.push((e=>(e.links&&(0,s.isArray)(e.links)&&(e.links=e.links.map(E)),e))),o<20){const e=e=>Object.assign({},e,{url:V(e.url)});l.push((t=>(t.options&&t.options.dataLinks&&(0,s.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&(t.options.fieldOptions.defaults.links&&(0,s.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t.options.fieldOptions.defaults.title&&(t.options.fieldOptions.defaults.title=V(t.options.fieldOptions.defaults.title))),t)))}if(o<21){const e=e=>Object.assign({},e,{url:e.url.replace(/__series.labels/g,"__field.labels")});l.push((t=>(t.options&&t.options.dataLinks&&(0,s.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&t.options.fieldOptions.defaults.links&&(0,s.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t)))}if(o<22&&l.push((e=>("table"!==e.type||(0,s.each)(e.styles,(e=>{e.align="auto"})),e))),o<23)for(const e of this.dashboard.templating.list){if(!(0,w.U4)(e))continue;const{multi:t,current:n}=e;e.current=(0,j.x)(n,t)}if(o<24&&l.push((e=>{const t="table"===e.type;if(t&&!e.styles)return e;const n="table2"===e.table;return!t||n||(e.type=t?"table-old":"table"),e})),o<26&&l.push((e=>"text2"===e.type?(e.type="text",delete e.options.angular,e):e)),o<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map((e=>{var t,n;if(!(0,w.VC)(e))return e;const s=Object.assign({},e);return s.current={selected:!0,text:null!==(t=s.query)&&void 0!==t?t:"",value:null!==(n=s.query)&&void 0!==n?n:""},s.options=[s.current],s.hide===P.bU.dontHide||s.hide===P.bU.hideLabel?Object.assign({},s,{type:"textbox"}):s}))),o<28){l.push((e=>"singlestat"===e.type?function(e){var t;if(v.vc.panels["grafana-singlestat-panel"])return e.type="grafana-singlestat-panel",e;let n=!1;e.changePlugin||(n=!0,e=new D.r(e));e.plugin={angularPanelCtrl:{}},null!==(t=e.gauge)&&void 0!==t&&t.show?(C.plugin.meta=v.vc.panels.gauge,e.changePlugin(C.plugin)):(k.plugin.meta=v.vc.panels.stat,e.changePlugin(k.plugin));if(n)return e.getSaveModel();return e}(e):e));for(const e of this.dashboard.templating.list)e.tags&&delete e.tags,e.tagsQuery&&delete e.tagsQuery,e.tagValuesQuery&&delete e.tagValuesQuery,e.useTags&&delete e.useTags}if(o<29)for(const e of this.dashboard.templating.list){var d;"query"===e.type&&(1!==e.refresh&&2!==e.refresh&&(e.refresh=1),null!==(d=e.options)&&void 0!==d&&d.length&&(e.options=[]))}if(o<30&&(l.push(_),l.push(H)),o<31&&l.push((e=>{if(e.transformations)for(const t of e.transformations)if(t.id===h.r.id)return B(e,h.r.id,{id:p.R.id,options:{}});return e})),o<33&&l.push((e=>{if(e.datasource=z(e.datasource,{returnDefaultAsNull:!0}),!e.targets)return e;for(const t of e.targets){const e=z(t.datasource,{returnDefaultAsNull:!0});null!=e&&(t.datasource=e)}return e})),o<34&&(l.push((e=>(this.migrateCloudWatchQueries(e),e))),this.migrateCloudWatchAnnotationQuery()),o<35&&l.push(q),o<36){for(const e of this.dashboard.annotations.list)e.datasource=z(e.datasource,{returnDefaultAsNull:!1});const e=(0,g.F)().getInstanceSettings(null);if(e){for(const t of this.dashboard.templating.list)"query"===t.type&&null===t.datasource&&(t.datasource=(0,i.iU)(e));l.push((t=>{if(t.targets){let a=!1;null==t.datasource&&t.targets.length>0&&(t.datasource=(0,i.iU)(e),a=!0);for(const e of t.targets){var n,s;if(null==e.datasource||null==e.datasource.uid)(null===(s=t.datasource)||void 0===s?void 0:s.uid)!==S.D?e.datasource=Object.assign({},t.datasource):e.datasource=z(e.datasource,{returnDefaultAsNull:!1});a&&"__expr__"!==(null===(n=e.datasource)||void 0===n?void 0:n.uid)&&(t.datasource=e.datasource)}}return t}))}}if(o<37&&l.push((e=>{var t,n;if(null===(t=e.options)||void 0===t||!t.legend||"hidden"!==e.options.legend.displayMode&&!1!==e.options.legend.showLegend){if(null!==(n=e.options)&&void 0!==n&&n.legend){var s;e.options.legend=Object.assign({},null===(s=e.options)||void 0===s?void 0:s.legend,{showLegend:!0})}}else e.options.legend.displayMode="list",e.options.legend.showLegend=!1;return e})),0!==l.length)for(n=0;n<this.dashboard.panels.length;n++)for(a=0;a<l.length;a++){this.dashboard.panels[n]=l[a].call(this,this.dashboard.panels[n]);const e=this.dashboard.panels[n].panels;if(e)for(r=0;r<e.length;r++)e[r]=l[a].call(this,e[r])}}}migrateCloudWatchQueries(e){for(const n of e.targets||[])if(W(n)&&((t=n).hasOwnProperty("metricQueryType")||(t.metricQueryType=O.$5.Search),t.hasOwnProperty("metricEditorMode")||(t.metricQueryType===O.$5.Query?t.metricEditorMode=O.MQ.Code:t.metricEditorMode=t.expression?O.MQ.Code:O.MQ.Builder),n.hasOwnProperty("statistics"))){const t=$(n,[...e.targets]);for(const n of t)e.targets.push(n)}var t}migrateCloudWatchAnnotationQuery(){for(const t of this.dashboard.annotations.list)if((e=t).hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("prefixMatching")&&e.hasOwnProperty("statistics")){const e=R(t);for(const t of e)this.dashboard.annotations.list.push(t)}var e}upgradeToGridLayout(e){let t=0;const n=b.cz/12;let a=(0,s.max)((0,s.flattenDeep)((0,s.map)(e.rows,(e=>(0,s.map)(e.panels,"id")))))+1;if(!e.rows)return;const i=(0,s.some)(e.rows,(e=>e.collapse||e.showTitle||e.repeat));for(const s of e.rows){if(s.repeatIteration)continue;const e=L(s.height||b.b0),o={};let l;i&&(o.id=a,o.type="row",o.title=s.title,o.collapsed=s.collapse,o.repeat=s.repeat,o.panels=[],o.gridPos={x:0,y:t,w:b.cz,h:e},l=new D.r(o),a++,t++);const d=new F(e,b.cz,t);for(const a of s.panels){a.span=a.span||b.kh,a.minSpan&&(a.minSpan=Math.min(b.cz,b.cz/12*a.minSpan));const s=Math.floor(a.span)*n,i=a.height?L(a.height):e,c=d.getPanelPosition(i,s);var r;if(t=d.yPos,a.gridPos={x:c.x,y:t+c.y,w:s,h:i},d.addPanel(a.gridPos),delete a.span,l&&o.collapsed)null===(r=l.panels)||void 0===r||r.push(a);else this.dashboard.panels.push(new D.r(a))}l&&this.dashboard.panels.push(l),l&&o.collapsed||(t+=e)}}}function L(e){(0,s.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e<b.AV&&(e=b.AV);return Math.ceil(e/(b.K3+b.hD))}class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.cz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;A(this,"area",void 0),A(this,"yPos",void 0),A(this,"height",void 0),this.area=new Array(t).fill(0),this.yPos=n,this.height=e}reset(){this.area.fill(0)}addPanel(e){for(let t=e.x;t<e.x+e.w;t++)(!this.area[t]||e.y+e.h-this.yPos>this.area[t])&&(this.area[t]=e.y+e.h-this.yPos);return this.area}getPanelPosition(e,t){let n,a,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let e=this.area.length-1;e>=0&&this.height-this.area[e]>0;e--)if(void 0===a)a=e;else{if(!(e<this.area.length-1&&this.area[e]<=this.area[e+1]))break;n=e}if(!(void 0!==n&&void 0!==a&&a-n>=t-1))return r?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(e,t,!0));i={x:n,y:(0,s.max)(this.area.slice(n))};return i}}function E(e){let t=e.url;return!t&&e.dashboard&&(t=`dashboard/db/${x.Z.slugifyForUrl(e.dashboard)}`),!t&&e.dashUri&&(t=`dashboard/${e.dashUri}`),t||(t="/"),e.keepTime&&(t=r.Cj.appendQueryToUrl(t,`$${o.W.keepTime}`)),e.includeVars&&(t=r.Cj.appendQueryToUrl(t,`$${o.W.includeVars}`)),e.params&&(t=r.Cj.appendQueryToUrl(t,e.params)),{url:t,title:e.title,targetBlank:e.targetBlank}}function V(e){return e.replace(/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g,((e,t,n,s,a,i)=>t?"__series.name":n?"${__series.name}":s?"__value.time":a?"__field.name":i?"${__field.name}":e))}function z(e,t){if(t.returnDefaultAsNull&&(null==e||"default"===e))return null;if((0,i.cv)(e))return e;const n=(0,g.F)().getInstanceSettings(e);return n?(0,i.iU)(n):{uid:e}}function B(e,t,n){if(e.transformations){const s=[];for(const a of e.transformations)s.push(a),a.id===t&&s.push(Object.assign({},n));e.transformations=s}return e}function _(e){const t=e.fieldConfig;if(!t)return e;if(t.defaults&&t.defaults.mappings&&(t.defaults.mappings=U(t.defaults.mappings,t.defaults.thresholds)),Array.isArray(t.overrides))for(const e of t.overrides)for(const t of e.properties)"mappings"===t.id&&(t.value=U(t.value));return e}function W(e){return e.hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("metricName")}function U(e,t){if(!e)return;const n={type:l.H.ValueToText,options:{}},s=[];for(const a of e){if(a.type&&a.options){a.type===l.H.ValueToText?n.options=Object.assign({},n.options,a.options):s.push(a);continue}let e;const i=parseFloat(a.text);if(t&&!isNaN(i)){const n=(0,d.m1)(i,t.steps);n&&n.color&&(e=n.color)}switch(a.type){case 1:null!=a.value&&("null"===a.value?s.push({type:l.H.SpecialValue,options:{match:l.e.Null,result:{text:a.text,color:e}}}):n.options[String(a.value)]={text:a.text,color:e});break;case 2:s.push({type:l.H.RangeToText,options:{from:+a.from,to:+a.to,result:{text:a.text,color:e}}})}}return Object.keys(n.options).length>0&&s.unshift(n),s}function H(e){return"timeseries"!==e.type&&"xychart"!==e.type||e.options.tooltipOptions&&(e.options=Object.assign({},e.options,{tooltip:e.options.tooltipOptions}),delete e.options.tooltipOptions),e}function q(e){var t,n;"timeseries"===e.type&&((null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults.custom)||void 0===n?void 0:n.axisPlacement)===m.LB.Hidden&&(e.fieldConfig=Object.assign({},e.fieldConfig,{overrides:[...e.fieldConfig.overrides,{matcher:{id:c.mi.byType,options:u.fS.time},properties:[{id:"custom.axisPlacement",value:m.LB.Auto}]}]})));return e}},62646:(e,t,n)=>{"use strict";n.d(t,{f:()=>$});var s=n(82897),a=n(95484),i=n(25317),r=n(6432),o=n(88246),l=n(38251),d=n(57971),c=n(42949),u=n(59196);function h(e){return(0,s.isArray)(e)?e.map(h):(0,s.isPlainObject)(e)?Object.keys(e).sort().reduce(((t,n)=>{const s=e[n];return null!=s&&(t[n]=h(s)),t}),{}):e}var p=n(80025),g=n(90155),m=n(84455),f=n(64850),v=n(8105),b=n(68374),x=n(63454),y=n(72379),w=n(98142),j=n(53091),S=n(37437);const C=new Set(["gridPos","title","description","transparent"]);function k(e,t){return null==e&&(t===1/0||t===-1/0||null==t)||(null==t&&(e===1/0||e===-1/0||null==e)||void 0)}function N(e){let t=0;for(const n of e)for(const e of n)e.id>t&&(t=e.id);return t+1}var O=n(80720),I=n(38591);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ${constructor(e,t){var n,r,o,l,d,c,u,h,p,g,f,v;let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.gt;T(this,"id",void 0),T(this,"uid",void 0),T(this,"title",void 0),T(this,"autoUpdate",void 0),T(this,"description",void 0),T(this,"tags",void 0),T(this,"style",void 0),T(this,"timezone",void 0),T(this,"weekStart",void 0),T(this,"editable",void 0),T(this,"graphTooltip",void 0),T(this,"time",void 0),T(this,"liveNow",void 0),T(this,"originalTime",void 0),T(this,"timepicker",void 0),T(this,"templating",void 0),T(this,"originalTemplating",void 0),T(this,"annotations",void 0),T(this,"refresh",void 0),T(this,"snapshot",void 0),T(this,"schemaVersion",void 0),T(this,"version",void 0),T(this,"revision",void 0),T(this,"links",void 0),T(this,"gnetId",void 0),T(this,"panels",void 0),T(this,"panelInEdit",void 0),T(this,"panelInView",void 0),T(this,"fiscalYearStartMonth",void 0),T(this,"panelsAffectedByVariableChange",void 0),T(this,"appEventsSubscription",void 0),T(this,"lastRefresh",void 0),T(this,"events",void 0),this.getVariablesFromState=x,e||(e={}),this.events=new i.F,this.id=e.id||null,this.uid=e.uid||null,this.revision=e.revision,this.title=null!==(n=e.title)&&void 0!==n?n:"No Title",this.autoUpdate=e.autoUpdate,this.description=e.description,this.tags=null!==(r=e.tags)&&void 0!==r?r:[],this.style=null!==(o=e.style)&&void 0!==o?o:"dark",this.timezone=null!==(l=e.timezone)&&void 0!==l?l:"",this.weekStart=null!==(d=e.weekStart)&&void 0!==d?d:"",this.editable=!1!==e.editable,this.graphTooltip=e.graphTooltip||0,this.time=null!==(c=e.time)&&void 0!==c?c:{from:"now-6h",to:"now"},this.timepicker=null!==(u=e.timepicker)&&void 0!==u?u:{},this.liveNow=Boolean(e.liveNow),this.templating=this.ensureListExist(e.templating),this.annotations=this.ensureListExist(e.annotations),this.refresh=e.refresh,this.snapshot=e.snapshot,this.schemaVersion=null!==(h=e.schemaVersion)&&void 0!==h?h:0,this.fiscalYearStartMonth=null!==(p=e.fiscalYearStartMonth)&&void 0!==p?p:0,this.version=null!==(g=e.version)&&void 0!==g?g:0,this.links=null!==(f=e.links)&&void 0!==f?f:[],this.gnetId=e.gnetId||null,this.panels=(0,s.map)(null!==(v=e.panels)&&void 0!==v?v:[],(e=>new I.r(e))),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(t),this.updateSchema(e),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(b.h$.subscribe(y.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(b.h$.subscribe(y.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(b.h$.subscribe(y.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some((e=>1===e.builtIn))||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:d.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(e){(e=e||{}).canShare=!1!==e.canShare,e.canSave=!1!==e.canSave,e.canStar=!1!==e.canStar,e.canEdit=!1!==e.canEdit,e.canDelete=!1!==e.canDelete,e.showSettings=e.canEdit,e.canMakeEditable=e.canSave&&!this.editable,e.hasUnsavedFolderChange=!1,this.editable||(e.canEdit=!1,e.canDelete=!1,e.canSave=!1),this.meta=e}getSaveModelClone(e){const t=(0,s.defaults)(e||{},{saveVariables:!0,saveTimerange:!0});let n={};for(const e in this)!$.nonPersistedProperties[e]&&this.hasOwnProperty(e)&&(n[e]=(0,s.cloneDeep)(this[e]));return this.updateTemplatingSaveModelClone(n,t),t.saveTimerange||(n.time=this.originalTime),n.panels=this.getPanelSaveModels(),n=h(n),n.getVariables=()=>n.templating.list,n}updatePanels(e){const t=function(e,t){const n=[],a={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:n};let i=0;const r=new Map;for(let n of t){let{id:s}=n;s||(i||(i=N([e,t])),s=i++,n=Object.assign({},n,{id:s})),r.set(s,n)}for(const t of e){const e=r.get(t.id);if(!e){a.changed=!0,a.actions.remove.push(t.id),t.destroy();continue}if(r.delete(t.id),e===t){n.push(t),a.actions.noop.push(t.id);continue}if(t.type===e.type){const i=t.getSaveModel();let r=!0,o=!1;for(const[n,l]of Object.entries(e))if(!(0,s.isEqualWith)(l,i[n],k)){if(a.changed=!0,r=!1,!C.has(n)){o=!1;break}t[n]=l,o=!0}if(r){n.push(t),a.actions.noop.push(t.id);continue}if(o){n.push(t),a.actions.update.push(t.id);continue}}t.destroy();const i=new S.r(e);i.key=`${i.id}-update-${Date.now()}`,n.push(i),a.changed=!0,a.actions.replace.push(t.id)}for(const e of r.values())n.push(new S.r(e)),a.changed=!0,a.actions.add.push(e.id);return a}(this.panels,null!=e?e:[]);var n;t.changed&&(this.panels=null!==(n=t.panels)&&void 0!==n?n:[],this.sortPanelsByGridPos(),this.events.publish(new v._B));return t}getPanelSaveModels(){return this.panels.filter((e=>this.isSnapshotTruthy()||!("add-panel"===e.type||e.repeatPanelId||e.repeatedByRow))).map((e=>{if(e.libraryPanel){const{id:t,title:n,libraryPanel:s,gridPos:a}=e;return{id:t,title:n,gridPos:a,libraryPanel:{uid:s.uid,name:s.name}}}return this.panelInEdit&&this.panelInEdit.id===e.id?this.panelInEdit.getSaveModel():e.getSaveModel()})).map((e=>(this.isSnapshotTruthy()||(delete e.scopedVars,"row"===e.type&&e.panels&&e.panels.length>0&&(e.panels=e.panels.filter((e=>!e.repeatPanelId)).map((e=>(delete e.scopedVars,e))))),e)))}updateTemplatingSaveModelClone(e,t){const n=this.originalTemplating,s=this.getVariablesFromState(this.uid);if(e.templating={list:s.map((e=>p.z.get(e.type).getSaveModel(e,t.saveVariables)))},!t.saveVariables)for(const t of e.templating.list){const e=n.find((e=>{let{name:n,type:s}=e;return n===t.name&&s===t.type}));e&&("adhoc"===t.type?t.filters=e.filters:t.current=e.current)}}timeRangeUpdated(e){this.events.publish(new l.md(e)),(0,x.WI)((0,g.DU)(this.uid,e))}startRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{refreshAll:!0,panelIds:[]};if(this.events.publish(new l.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(e.refreshAll||e.panelIds.includes(this.panelInEdit.id)))this.panelInEdit.refresh();else for(const t of this.panels)this.otherPanelInFullscreen(t)||!e.refreshAll&&!e.panelIds.includes(t.id)||t.refresh()}render(){this.events.publish(new v._z);for(const e of this.panels)e.render()}panelInitialized(e){const t=e.getQueryRunner().getLastResult();this.otherPanelInFullscreen(e)||t||e.refresh()}otherPanelInFullscreen(e){return(this.panelInEdit||this.panelInView)&&!(e.isViewing||e.isEditing)}initEditPanel(e){return(0,j.$t)().pauseAutoRefresh(),this.panelInEdit=e.getEditClone(),this.panelInEdit}initViewPanel(e){this.panelInView=e,e.setIsViewing(!0)}exitViewPanel(e){this.panelInView=void 0,e.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,j.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let e=this.getNextPanelId();for(const t of this.panelIterator())t.id??=e++}ensureListExist(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.list??=[],e}getNextPanelId(){let e=0;for(const t of this.panelIterator())t.id>e&&(e=t.id);return e+1}*panelIterator(){for(const t of this.panels){var e;yield t;const n=null!==(e=t.panels)&&void 0!==e?e:[];for(const e of n)yield e}}forEachPanel(e){for(let t=0;t<this.panels.length;t++)e(this.panels[t],t)}getPanelById(e){var t;return this.panelInEdit&&this.panelInEdit.id===e?this.panelInEdit:null!==(t=this.panels.find((t=>t.id===e)))&&void 0!==t?t:null}canEditPanel(e){return Boolean(this.meta.canEdit&&e&&!e.repeatPanelId&&"row"!==e.type)}canEditPanelById(e){return this.canEditPanel(this.getPanelById(e))}addPanel(e){e.id=this.getNextPanelId(),this.panels.unshift(new I.r(e)),this.sortPanelsByGridPos(),this.events.publish(new v._B)}updateMeta(e){this.meta=Object.assign({},this.meta,e),this.events.publish(new v.hS)}sortPanelsByGridPos(){this.panels.sort(((e,t)=>e.gridPos.y===t.gridPos.y?e.gridPos.x-t.gridPos.x:e.gridPos.y-t.gridPos.y))}clearUnsavedChanges(){for(const e of this.panels)e.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const e=this.panels.find((e=>e.hasChanged));return Boolean(e)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;!function(e){for(const n of e){var t;if(delete n.scopedVars,null!==(t=n.panels)&&void 0!==t&&t.length)for(const e of n.panels)delete e.scopedVars}}(this.panels);const e=this.panels.filter((e=>(!e.repeat||e.repeatedByRow)&&e.repeatPanelId));(0,s.pull)(this.panels,...e),e.map((e=>e.destroy())),this.sortPanelsByGridPos()}processRepeats(){if(!this.isSnapshotTruthy()&&this.hasVariables()){this.cleanUpRepeats();for(let e=0;e<this.panels.length;e++){const t=this.panels[e];t.repeat&&this.repeatPanel(t,e)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}}cleanUpRowRepeats(e){const t=e.map((e=>e.id)),n=e.filter((e=>!e.repeat&&e.repeatPanelId&&t.includes(e.repeatPanelId)));(0,s.pull)(e,...n),(0,s.pull)(this.panels,...n)}processRowRepeats(e){var t;if(this.isSnapshotTruthy()||!this.hasVariables())return;let n=null!==(t=e.panels)&&void 0!==t?t:[];if(!e.collapsed){const t=this.panels.findIndex((t=>t.id===e.id));n=this.getRowPanels(t)}this.cleanUpRowRepeats(n);for(const e of n)if(e.repeat){const t=this.panels.findIndex((t=>t.id===e.id));this.repeatPanel(e,t)}}getPanelRepeatClone(e,t,n){var s;if(0===t)return e;const a=e.getSaveModel();a.id=this.getNextPanelId();const i=new I.r(a);return this.panels.splice(n+t,0,i),i.repeatPanelId=e.id,i.repeat=void 0,(null===(s=this.panelInView)||void 0===s?void 0:s.id)===i.id&&(i.setIsViewing(!0),this.panelInView=i),i}getRowRepeatClone(e,t,n){if(0===t){if(!e.collapsed){const t=this.getRowPanels(n);e.panels=t}return e}const a=new I.r(e.getSaveModel());let i,r;var o;e.collapsed?(i=null!==(o=(0,s.cloneDeep)(e.panels))&&void 0!==o?o:[],a.panels=i,r=n+t):(i=this.getRowPanels(n),a.panels=i.map((e=>e.getSaveModel())),r=n+(i.length+1)*t);return this.panels.splice(r,0,a),this.updateRepeatedPanelIds(a),a}repeatPanel(e,t){const n=this.getPanelRepeatVariable(e);if(!n)return;if("row"===e.type)return void this.repeatRow(e,t,n);const s=this.getSelectedVariableOptions(n),a=e.maxPerRow||4;let i=0,r=e.gridPos.y;for(let o=0;o<s.length;o++){const l=s[o];let d;d=this.getPanelRepeatClone(e,o,t),d.scopedVars??={},d.scopedVars[n.name]=l,e.repeatDirection===c.OA?(o>0&&(r+=d.gridPos.h),d.gridPos.y=r):(d.gridPos.w=Math.max(c.cz/s.length,c.cz/a),d.gridPos.x=i,d.gridPos.y=r,i+=d.gridPos.w,i+d.gridPos.w>c.cz&&(i=0,r+=d.gridPos.h))}const o=r-e.gridPos.y;if(o>0){const n=t+s.length;for(const t of this.panels.slice(n))d=t,(l=e).repeatDirection!==c.yM&&d.gridPos.x>=l.gridPos.x+l.gridPos.w&&d.gridPos.y===l.gridPos.y||(t.gridPos.y+=o)}var l,d}repeatRow(e,t,n){const s=this.getSelectedVariableOptions(n);let a=e.gridPos.y;function i(e,t){e.scopedVars??={},e.scopedVars[n.name]=t}for(let n=0;n<s.length;n++){const r=s[n],o=this.getRowRepeatClone(e,n,t);i(o,r);const l=this.getRowHeight(o),d=o.panels||[];let c;if(e.collapsed){for(const e of d)i(e,r),n>0&&this.updateRepeatedPanelIds(e,!0);o.gridPos.y+=n,a+=n,c=t+n+1}else{const e=t+(d.length+1)*n+1;d.forEach(((t,s)=>{if(i(t,r),n>0){const a=new I.r(t);this.updateRepeatedPanelIds(a,!0),a.gridPos.y+=l*n,this.panels.splice(e+s,0,a)}})),o.panels=[],o.gridPos.y+=l*n,a+=l,c=e+d.length}if(s.length>1)for(const e of this.panels.slice(c))e.gridPos.y+=a}}updateRepeatedPanelIds(e,t){return e.repeatPanelId=e.id,e.id=this.getNextPanelId(),t?e.repeatedByRow=!0:e.repeat=void 0,e}getSelectedVariableOptions(e){let t;return t=(0,w.HY)(e)?e.options.slice(1,e.options.length):(0,s.filter)(e.options,{selected:!0}),t}getRowHeight(e){if(!e.panels||0===e.panels.length)return 0;const t=e.gridPos.y,n=(0,s.map)(e.panels,"gridPos"),a=(0,s.maxBy)(n,(e=>e.y+e.h));return a.y+a.h-t}removePanel(e){this.panels=this.panels.filter((t=>t!==e)),this.events.publish(new v._B)}removeRow(e,t){(!t&&e.collapsed||t&&!e.collapsed)&&this.toggleRow(e),this.removePanel(e)}expandRows(){const e=this.panels.filter((e=>"row"===e.type&&e.collapsed));for(const t of e)this.toggleRow(t)}collapseRows(){const e=this.panels.filter((e=>"row"===e.type&&!e.collapsed));for(const t of e)this.toggleRow(t)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some((e=>2!==e.hide))||this.annotations.list.some((e=>!e.hide))}getPanelInfoById(e){const t=this.panels.findIndex((t=>t.id===e));return t>=0?{panel:this.panels[t],index:t}:null}duplicatePanel(e){const t=e.getSaveModel();return t.id=this.getNextPanelId(),delete t.repeat,delete t.repeatIteration,delete t.repeatPanelId,delete t.scopedVars,t.alert&&delete t.thresholds,delete t.alert,e.gridPos.x+2*e.gridPos.w<=c.cz?t.gridPos.x+=e.gridPos.w:t.gridPos.y+=e.gridPos.h,this.addPanel(t),t}formatDate(e,t){return(0,r.dq)(e,{format:t,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const e of this.panels)e.destroy()}toggleRow(e){var t;const n=(0,s.indexOf)(this.panels,e);if(!e.collapsed){const t=this.getRowPanels(n);return(0,s.pull)(this.panels,...t),e.panels=t.map((e=>e.getSaveModel())),e.collapsed=!0,t.some((e=>e.hasChanged))&&e.configRev++,void this.events.publish(new v._B)}e.collapsed=!1;const a=null!==(t=e.panels)&&void 0!==t?t:[],i=a.some((e=>e.repeat));if(a.length>0){var r;const t=(null!==(r=a[0].gridPos.y)&&void 0!==r?r:e.gridPos.y)-(e.gridPos.y+e.gridPos.h);let s=n+1,l=e.gridPos.y;for(const n of a){var o;null!==(o=n.gridPos.y)&&void 0!==o||(n.gridPos.y=e.gridPos.y),n.gridPos.y-=t,this.panels.splice(s,0,new I.r(n)),s+=1,l=Math.max(l,n.gridPos.y+n.gridPos.h)}const d=l-e.gridPos.y-1;for(const e of this.panels.slice(s))e.gridPos.y+=d;e.panels=[],i&&this.processRowRepeats(e)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}getRowPanels(e){const t=this.panels.slice(e+1),n=t.findIndex((e=>"row"===e.type));return t.slice(0,n>=0?n:this.panels.length)}on(e,t){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(e,t)}off(e,t){console.log("DashboardModel.off is deprecated"),this.events.off(e,t)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return 1===this.graphTooltip}getRelativeTime(e){return(0,r.E8)(e,{timeZone:this.getTimezone()})}isSnapshot(){return void 0!==this.snapshot}getTimezone(){var e;return this.timezone?this.timezone:null===u.Vt||void 0===u.Vt||null===(e=u.Vt.user)||void 0===e?void 0:e.timezone}updateSchema(e){new O.o(this).updateSchema(e)}resetOriginalTime(){this.originalTime=(0,s.cloneDeep)(this.time)}hasTimeChanged(){const{time:e,originalTime:t}=this;return!((0,s.isEqual)(e,t)||(0,s.isEqual)((0,o.CQ)(null==e?void 0:e.from),(0,o.CQ)(null==t?void 0:t.from))&&(0,s.isEqual)((0,o.CQ)(null==e?void 0:e.to),(0,o.CQ)(null==t?void 0:t.to)))}resetOriginalVariables(){this.originalTemplating=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.cloneVariablesFrom(this.templating.list):this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(e,t){const n=Math.max(...this.panels.map((e=>e.gridPos.h+e.gridPos.y)));let s=e-55-20;this.meta.submenuEnabled&&!t&&(s-=50),t&&t!==f.UX.TV&&(s+=55);const a=n/Math.floor(s/(c.K3+c.hD));for(const e of this.panels)e.gridPos.y=Math.round(e.gridPos.y/a)||1,e.gridPos.h=Math.round(e.gridPos.h/a)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(f.RW.nq)}getPanelByUrlId(e){const t=parseInt(null!=e?e:"0",10),n=this.panels.filter((e=>e.collapsed));for(const e of n){var s;(null===(s=e.panels)||void 0===s?void 0:s.some((e=>e.id===t)))&&this.toggleRow(e)}return this.getPanelById(t)}toggleLegendsForAll(){const e=this.panels.filter(R),t=e.filter((e=>e.legend.show)).length,n=t>=e.length-t;for(const t of e)t.legend.show=!n,t.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(e){let t=!0;var n,s;u.Vt.accessControlEnabled()&&(t=e?!(null===(n=this.meta.annotationsPermissions)||void 0===n||!n.dashboard.canEdit):!(null===(s=this.meta.annotationsPermissions)||void 0===s||!s.organization.canEdit));return this.canEditDashboard()&&t}canDeleteAnnotations(e){let t=!0;var n,s;u.Vt.accessControlEnabled()&&(t=e?!(null===(n=this.meta.annotationsPermissions)||void 0===n||!n.dashboard.canDelete):!(null===(s=this.meta.annotationsPermissions)||void 0===s||!s.organization.canDelete));return t&&this.canEditDashboard()}canAddAnnotations(){var e;const t=this.annotations.list.find((e=>1===e.builtIn));return!(!1===(null==t?void 0:t.enable)||!this.canEditDashboard())&&(!u.Vt.accessControlEnabled()||Boolean(null===(e=this.meta.annotationsPermissions)||void 0===e?void 0:e.dashboard.canAdd))}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(e,t){!(0,s.isEqual)(null==e?void 0:e.gridPos,null==t?void 0:t.gridPos)&&this.events.publish(new v._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(e){return this.getVariablesFromState(this.uid).find((t=>t.name===e.repeat))}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(e,t){if(e.length!==t.length)return!1;const n=t.map((e=>({name:e.name,type:e.type,current:(0,s.cloneDeep)(e.current),filters:(0,s.cloneDeep)(e.filters)})));return!(0,s.isEqual)(n,e)}cloneVariablesFrom(e){return e.map((e=>({name:e.name,type:e.type,current:(0,s.cloneDeep)(e.current),filters:(0,s.cloneDeep)(e.filters)})))}variablesTimeRangeProcessDoneHandler(e){const t=e.payload.variableIds.length>0;this.variablesChangedHandler(new y.x9({panelIds:[],refreshAll:!0}),t)}variablesChangedHandler(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.processRepeats(),e.payload.refreshAll||(0,j.$t)().isRefreshOutsideThreshold(this.lastRefresh)?this.startRefresh({refreshAll:!0,panelIds:[]}):((this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=e.payload.panelIds.filter((e=>{var t,n,s;return e!==(null!==(t=null===(n=this.panelInEdit)||void 0===n?void 0:n.id)&&void 0!==t?t:null===(s=this.panelInView)||void 0===s?void 0:s.id)}))),this.startRefresh(e.payload))}variablesChangedInUrlHandler(e){this.templateVariableValueUpdated(),this.startRefresh(e.payload)}}function R(e){return Boolean(e.legend)}T($,"nonPersistedProperties",{events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0})},38591:(e,t,n)=>{"use strict";n.d(t,{J:()=>C,r:()=>j});var s=n(82897),a=n(44288),i=n(25317),r=n(274),o=n(66827),l=n(38251),d=n(2633),c=n(46782),u=n(11848),h=n(52253),p=n(8105),g=n(59558),m=n(46076),f=n(53091),v=n(58808);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},y={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},w={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""};class j{constructor(e){b(this,"id",void 0),b(this,"gridPos",void 0),b(this,"type",void 0),b(this,"title",void 0),b(this,"alert",void 0),b(this,"scopedVars",void 0),b(this,"repeat",void 0),b(this,"repeatIteration",void 0),b(this,"repeatPanelId",void 0),b(this,"repeatDirection",void 0),b(this,"repeatedByRow",void 0),b(this,"maxPerRow",void 0),b(this,"collapsed",void 0),b(this,"panels",void 0),b(this,"transformations",void 0),b(this,"datasource",null),b(this,"thresholds",void 0),b(this,"pluginVersion",void 0),b(this,"snapshotData",void 0),b(this,"timeFrom",void 0),b(this,"timeShift",void 0),b(this,"hideTimeOverride",void 0),b(this,"maxDataPoints",void 0),b(this,"interval",void 0),b(this,"description",void 0),b(this,"links",void 0),b(this,"libraryPanel",void 0),b(this,"autoMigrateFrom",void 0),b(this,"isViewing",!1),b(this,"isEditing",!1),b(this,"isInView",!1),b(this,"configRev",0),b(this,"hasSavedPanelEditChange",void 0),b(this,"hasRefreshed",void 0),b(this,"cacheTimeout",void 0),b(this,"cachedPluginOptions",{}),b(this,"legend",void 0),b(this,"plugin",void 0),b(this,"key",void 0),b(this,"events",void 0),b(this,"queryRunner",void 0),this.events=new i.F,this.restoreModel(e),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,a.Z)()}restoreModel(e){var t;for(const t in this)!x[t]&&this.hasOwnProperty(t)&&(e[t]||"function"!=typeof this[t]&&"symbol"!=typeof this[t]&&delete this[t]);for(const t in e)this[t]=e[t];switch(this.type){case"graph":null!==c.ZP&&void 0!==c.ZP&&null!==(t=c.ZP.featureToggles)&&void 0!==t&&t.autoMigrateGraphPanels&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap"}(0,s.defaultsDeep)(this,(0,s.cloneDeep)(w)),this.ensureQueryIds()}generateNewKey(){this.key=(0,a.Z)()}ensureQueryIds(){if(this.targets&&(0,s.isArray)(this.targets))for(const e of this.targets)e.refId||(e.refId=(0,h.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(e){this.options=e,this.configRev++,this.events.publish(new p.Wj),this.render()}updateFieldConfig(e){this.fieldConfig=e,this.configRev++,this.events.publish(new p.Wj),this.resendLastResult(),this.render()}getSaveModel(){const e={};for(const t in this)!x[t]&&this.hasOwnProperty(t)&&((0,s.isEqual)(this[t],w[t])||(e[t]=(0,s.cloneDeep)(this[t])));return e}setIsViewing(e){this.isViewing=e}updateGridPos(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.x===this.gridPos.x&&e.y===this.gridPos.y&&e.h===this.gridPos.h&&e.w===this.gridPos.w||(this.gridPos.x=e.x,this.gridPos.y=e.y,this.gridPos.w=e.w,this.gridPos.h=e.h,t&&this.configRev++)}runAllPanelQueries(e){let{dashboardId:t,dashboardUID:n,dashboardTimezone:s,timeData:a,width:i,publicDashboardAccessToken:r}=e;this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:t,dashboardUID:n,publicDashboardAccessToken:r,timezone:s,timeRange:a.timeRange,timeInfo:a.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(i),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations})}refresh(){this.hasRefreshed=!0,this.events.publish(new l.U5)}render(){this.hasRefreshed?this.events.publish(new p._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce(((e,t)=>x[t]||y[t]?e:Object.assign({},e,{[t]:this[t]})),{})}restorePanelOptions(e){const t=this.cachedPluginOptions[e];t&&(Object.keys(t.properties).map((e=>{this[e]=t.properties[e]})),this.fieldConfig=(0,v.__)(this.fieldConfig,t.fieldConfig))}applyPluginOptionDefaults(e,t){const n=(0,v.d4)({plugin:e,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:t});this.fieldConfig=n.fieldConfig,this.options=n.options}pluginLoaded(e){this.plugin=e;const t=S(e);if(this.autoMigrateFrom){const t="graph"===this.autoMigrateFrom;this.callPanelTypeChangeHandler(e,this.autoMigrateFrom,this.getOptionsToRemember(),t),delete this.autoMigrateFrom}e.onPanelMigration&&t!==this.pluginVersion&&(this.options=e.onPanelMigration(this),this.pluginVersion=t),this.applyPluginOptionDefaults(e,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const e of(0,s.keys)(this))y[e]||delete this[e];this.options={},this.fieldConfig={defaults:Object.assign({},this.fieldConfig.defaults,{custom:{}}),overrides:(0,v.aS)(this.fieldConfig.overrides,v._k)}}callPanelTypeChangeHandler(e,t,n,s){if(e.onPanelTypeChanged){const a=s?{angular:n}:n.options;Object.assign(this.options,e.onPanelTypeChanged(this,t,a,this.fieldConfig))}}changePlugin(e){const t=e.meta.id,n=this.getOptionsToRemember(),s=this.fieldConfig,a=this.type,i=this.isAngularPlugin();this.cachedPluginOptions[a]={properties:n,fieldConfig:s},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(t),this.callPanelTypeChangeHandler(e,a,n,i),this.type=t,this.plugin=e,this.configRev++,this.applyPluginOptionDefaults(e,!0),e.onPanelMigration&&(this.pluginVersion=S(e))}updateQueries(e){var t,n,s;const{dataSource:a}=e;this.datasource={uid:a.uid,type:a.type},this.cacheTimeout=e.cacheTimeout,this.timeFrom=null===(t=e.timeRange)||void 0===t?void 0:t.from,this.timeShift=null===(n=e.timeRange)||void 0===n?void 0:n.shift,this.hideTimeOverride=null===(s=e.timeRange)||void 0===s?void 0:s.hide,this.interval=e.minInterval,this.maxDataPoints=e.maxDataPoints,this.targets=e.queries,this.configRev++,this.events.publish(new p.pO)}addQuery(e){(e=e||{refId:"A"}).refId=(0,h.Hs)(this.targets),this.targets.push(e),this.configRev++}changeQuery(e,t){e.refId=this.targets[t].refId,this.configRev++,this.targets=this.targets.map(((n,s)=>s===t?e:n))}getEditClone(){const e=this.getSaveModel(),t=new j(e);t.isEditing=!0,t.plugin=this.plugin;const n=this.getQueryRunner();return t.getQueryRunner().useLastResultFrom(n),t}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:c.ZP.theme2}}getDataSupport(){var e,t;return null!==(e=null===(t=this.plugin)||void 0===t?void 0:t.dataSupport)&&void 0!==e?e:{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new g.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return void 0!==(this.plugin&&this.plugin.angularPanelCtrl)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(e){this.transformations=e,this.resendLastResult(),this.configRev++,this.events.publish(new p.Xw)}setProperty(e,t){this[e]=t,this.configRev++,"repeat"===e&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(e,t,n){const s=this.getQueryRunner().getLastRequest(),a=Object.assign({},this.scopedVars,null==s?void 0:s.scopedVars,t),i=(0,m.c)(a),l=r.Cj.toUrlParams(i),c=r.Cj.toUrlParams((0,f.$t)().timeRangeForUrl());return a[o.W.keepTime]={text:c,value:c},a[o.W.includeVars]={text:l,value:l},(0,d.J)().replace(e,a,n)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(e){for(const[t,n]of Object.entries(e.model)){switch(t){case"id":case"gridPos":case"libraryPanel":continue}this[t]=n}this.libraryPanel=e}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function S(e){return e&&e.meta.info.version?e.meta.info.version:c.ZP.buildInfo.version}function C(e){const t={};return Object.entries(e).filter((t=>{let[n,a]=t;return!x[n]&&e.hasOwnProperty(n)&&!(0,s.isEqual)(a,w[n])})).forEach((e=>{let[n,s]=e;t[n]=s})),(0,u.Xh)(t)}},78433:(e,t,n)=>{"use strict";n.d(t,{$j:()=>b,Qk:()=>f,RF:()=>m,Yq:()=>v,f4:()=>j,fG:()=>x,lw:()=>y,qm:()=>p,tM:()=>w});var s=n(93570),a=n(93686),i=n(47900),r=n(60057),o=n(29705),l=n(69638),d=n(71482),c=n(90155),u=n(53091),h=n(39556);function p(e){return async t=>{const n=await(0,s.i)().get(`/api/dashboards/id/${e}/permissions`);t((0,h.O0)(n))}}function g(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function m(e,t,n){return async(a,i)=>{const{dashboard:r}=i(),o=[];for(const e of r.permissions){if(e.inherited)continue;const s=g(e);t===e&&(s.permission=n),o.push(s)}await(0,s.i)().post(`/api/dashboards/id/${e}/permissions`,{items:o}),await a(p(e))}}function f(e,t){return async(n,a)=>{const i=a().dashboard,r=[];for(const e of i.permissions)e.inherited||e===t||r.push(g(e));await(0,s.i)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await n(p(e))}}function v(e,t){return async(n,a)=>{const{dashboard:i}=a(),r=[];for(const e of i.permissions)e.inherited||r.push(g(e));r.push({userId:t.userId,teamId:t.teamId,role:t.role,permission:t.permission}),await(0,s.i)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await n(p(e))}}function b(e,t){return async n=>{await(0,s.i)().post("/api/dashboards/import",e),n((0,a.$l)((0,i.AT)("Dashboard Imported",t))),n((0,d.m3)())}}function x(e){return async t=>{await(0,s.i)().delete(`/api/dashboards/uid/${e}`),t((0,d.m3)())}}const y=()=>(e,t)=>{const n=t().dashboard.getModel();n&&(n.destroy(),e((0,c.wX)(n.uid))),(0,u.$t)().stopAutoRefresh(),e((0,h.sG)()),e((0,o.Vl)()),r.H.leave()},w=e=>t=>{t((0,l.YT)(e)),(0,u.$t)().refreshTimeModel()},j=e=>t=>{t((0,l.zW)(e)),(0,u.$t)().refreshTimeModel()}},58808:(e,t,n)=>{"use strict";n.d(t,{__:()=>h,_k:()=>g,aS:()=>d,d4:()=>l});var s=n(82897),a=n(15399),i=n(31319),r=n(663),o=n(87602);function l(e){let{plugin:t,currentOptions:n,currentFieldConfig:o,isAfterPluginChange:l}=e;const h=(0,s.mergeWith)({},t.defaults,n||{},((e,t)=>{if((0,s.isArray)(t))return t})),p=function(e,t){var n;const a=t.fieldConfigDefaults,i={defaults:(0,s.mergeWith)({},a.defaults,e?e.defaults:{},((e,t)=>{if((0,s.isArray)(t))return t})),overrides:null!==(n=null==e?void 0:e.overrides)&&void 0!==n?n:[]};c(i.defaults,"",t.fieldConfigRegistry),i.defaults.thresholds&&u(i.defaults.thresholds);i.overrides=d(i.overrides,(e=>void 0!==t.fieldConfigRegistry.getIfExists(e.id)));for(const e of i.overrides)for(const t of e.properties)"thresholds"===t.id&&u(t.value);return i}(o,t),g=function(e,t,n){if(!n)return t;const s=e.fieldConfigRegistry.getIfExists(a.qb.Color);if(s&&s.settings){var o;const e=s.settings,n=i.WO.getIfExists(null===(o=t.defaults.color)||void 0===o?void 0:o.mode);if(!e.byValueSupport&&(!n||n.isByValue))return t.defaults.color={mode:r.S.PaletteClassic},t;if(e.byValueSupport&&e.preferThresholdsMode&&(null==n?void 0:n.id)!==r.S.Fixed&&(!n||!n.isByValue))return t.defaults.color={mode:r.S.Thresholds},t;if(e.bySeriesSupport&&null!=n&&n.isByValue)return t.defaults.color={mode:r.S.PaletteClassic},t}return t}(t,p,l);return{options:h,fieldConfig:g}}function d(e,t){return e.map((e=>{const n=e.properties.filter(t);return Object.assign({},e,{properties:n})})).filter((e=>e.properties.length>0))}function c(e,t,n){let a=!1;for(const i of Object.keys(e)){const r=e[i],o=`${t}${i}`,l=!!n.getIfExists(o);if(l)a=!0;else if((0,s.isArray)(r)||!(0,s.isObject)(r))l||(0,s.unset)(e,i);else{c(r,`${o}.`,n)||(0,s.unset)(e,i)}}return a}function u(e){e.mode||(e.mode=o.H.Absolute),e.steps?e.steps.length&&(e.steps[0].value=-1/0):e.steps=[]}function h(e,t){const n={defaults:Object.assign({},e.defaults,{custom:t.defaults.custom}),overrides:[...e.overrides]};for(const e of t.overrides)for(const t of e.properties)if(p(t)){const a=n.overrides.find((t=>(0,s.isEqual)(t.matcher,e.matcher)));a?a!==e&&a.properties.push(t):n.overrides.push(e)}return n}function p(e){return e.id.startsWith("custom.")}function g(e){return!p(e)}},37437:(e,t,n)=>{"use strict";n.d(t,{f:()=>s.f,r:()=>a.r});var s=n(62646),a=n(38591)},89118:(e,t,n)=>{"use strict";n.d(t,{ZQ:()=>$,mV:()=>T,f1:()=>D,$M:()=>P});var s=n(36298),a=n(88246),i=n(92721),r=n(80795),o=n(93570),l=n(65737),d=n(93686),c=n(2247),u=n(47900),h=n(42200),p=n(78130),g=n(32086),m=n(94722),f=n(53091),v=n(60057),b=n(54876),x=n(98142),y=n(64850),w=n(45921),j=n(90155),S=n(84455),C=n(62646),k=n(27904),N=n(31181);var O=n(39556);const I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((e=>{e.panels?I(e.panels,t):e.targets&&e.targets.forEach((e=>{var n;null!==(n=e.datasource)&&void 0!==n&&n.type&&(t[e.datasource.type]?t[e.datasource.type].push(e):t[e.datasource.type]=[e])}))})),t};function T(e){return async(t,n)=>{var T,P;t((0,O.sf)());const A=await async function(e,t,n){const a=p.Z.getObject(R);if(a)return D(),a;try{switch(e.routeName){case y.vq.Home:{const e=await h.ae.get("/api/dashboards/home");if(e.redirectUri){const t=s.u.stripBaseFromUrl(e.redirectUri);return r.E1.replace(t),null}return e.meta.canSave=!1,e.meta.canShare=!1,e.meta.canStar=!1,e}case y.vq.Public:return await g.pD.loadDashboard("public",e.urlSlug,e.accessToken);case y.vq.Normal:{const t=await g.pD.loadDashboard(e.urlType,e.urlSlug,e.urlUid);if(e.fixUrl&&t.meta.url&&!b.r0.isPlaying){const e=s.u.stripBaseFromUrl(t.meta.url),n=r.E1.getLocation().pathname;e!==n&&(r.E1.replace(Object.assign({},r.E1.getLocation(),{pathname:e})),console.log("not correct url correcting",e,n))}return t}case y.vq.New:return $(e.urlFolderId,e.panelType);case y.vq.Path:{var i;const t=null!==(i=e.urlSlug)&&void 0!==i?i:"";return await g.pD.loadDashboard(y.vq.Path,t,t)}default:throw{message:"Unknown route "+e.routeName}}}catch(e){return(0,o.kW)(e)&&e.cancelled||(t((0,O.jA)({message:"Failed to fetch dashboard",error:e})),console.error(e)),null}}(e,t);if(!A)return;let M;t((0,O.Nv)());try{M=new C.f(A.dashboard,A.meta)}catch(e){return t((0,O.jA)({message:"Failed create dashboard model",error:e})),void console.error(e)}const L=n(),F=r.E1.getSearchObject();F.orgId||r.E1.partial({orgId:L.user.orgId},!0);const E=(0,f.$t)();(0,m.h4)().setCurrent(M),E.init(M);const V=(0,x.mn)(null!==(T=e.urlUid)&&void 0!==T?T:M.uid);await t((0,j.LX)(V,M));if((0,w.Tl)({dashboard:M,timeSrv:E}).run({dashboard:M,range:E.timeRange()}),(0,S.cp)(n())===V&&n().dashboard.initPhase===y.bG.Services){try{M.processRepeats(),F.autofitpanels&&M.autoFitPanels(window.innerHeight,F.kiosk),e.keybindingSrv.setupDashboardBindings(M)}catch(e){e instanceof Error&&t((0,d.$l)((0,u.t_)("Dashboard init failed",e))),console.error(e)}e.routeName!==y.vq.New?(!function(e){const t={dashboardId:e.id,dashboardName:e.title,dashboardUid:e.uid,folderName:e.meta.folderTitle,eventName:k.ct.DashboardView,publicDashboardUid:e.meta.publicDashboardUid};(0,N.r_)(t)}(M),v.H.watch(M.uid)):v.H.leave(),""!==M.weekStart?(0,a.Ls)(M.weekStart):(0,a.Ls)(l.v.bootData.user.weekStart),c.Z.publish(new i.Pl({dashboardId:M.uid,orgId:L.user.orgId,userId:null===(P=L.user.user)||void 0===P?void 0:P.id,grafanaVersion:l.v.buildInfo.version,queries:I(M.panels)})),t((0,O.dS)(M))}}}function $(e,t){const n={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderId:0},dashboard:{title:"New dashboard",panels:[{type:null!=t?t:"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};return e&&(n.meta.folderId=parseInt(e,10)),n}const R="DASHBOARD_FROM_LS_KEY";function P(e){p.Z.setObject(R,e)}function D(){p.Z.delete(R)}},39556:(e,t,n)=>{"use strict";n.d(t,{Nv:()=>p,O0:()=>d,ZP:()=>f,dS:()=>h,jA:()=>u,sG:()=>g,sf:()=>c,tq:()=>m});var s=n(23067),a=n(23188),i=n(64850),r=n(62646);const o={initPhase:i.bG.NotStarted,getModel:()=>null,permissions:[],initError:null},l=(0,s.oM)({name:"dashboard",initialState:o,reducers:{loadDashboardPermissions:(e,t)=>{e.permissions=(0,a.A)(t.payload)},dashboardInitFetching:e=>{e.initPhase=i.bG.Fetching},dashboardInitServices:e=>{e.initPhase=i.bG.Services},dashboardInitCompleted:(e,t)=>{e.getModel=()=>t.payload,e.initPhase=i.bG.Completed},dashboardInitFailed:(e,t)=>{e.initPhase=i.bG.Failed,e.initError=t.payload,e.getModel=()=>new r.f({title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:e=>{e.initPhase=i.bG.NotStarted,e.initError=null,e.getModel=()=>null},addPanel:(e,t)=>{}}}),{loadDashboardPermissions:d,dashboardInitFetching:c,dashboardInitFailed:u,dashboardInitCompleted:h,dashboardInitServices:p,cleanUpDashboard:g,addPanel:m}=l.actions,f={dashboard:l.reducer}},3420:(e,t,n)=>{"use strict";n.d(t,{y:()=>h});var s=n(12717),a=n(22458),i=n(28173),r=n(71855),o=n(46782),l=n(8959),d=n(8343),c=n(53091),u=n(13631);function h(e,t){const n=(0,d.F9)(e.snapshotData),h=new l.g,p={dashboard:t,range:(0,s.JK)()},g=h.canWork(p)?h.getAnnotationsInSnapshot(t,e.id):[],m=[new a.i(g)];return{timeRange:(0,u.W1)(e,(0,c.$t)().timeRange()).timeRange,state:i.Gu.Done,series:(0,r.SM)({data:n,fieldConfig:{defaults:{},overrides:[]},replaceVariables:e.replaceVariables,fieldConfigRegistry:e.plugin.fieldConfigRegistry,theme:o.vc.theme2,timeZone:t.getTimezone()}),annotations:m}}},13631:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>S,Po:()=>j,W1:()=>N,WJ:()=>x,bY:()=>w,jN:()=>y,oe:()=>C,qw:()=>k});var s=n(82897),a=n(94025),i=n(85699),r=n(42914),o=n(2633),l=n(2247),d=n(46782),c=n(42949),u=n(78130),h=n(60129),p=n(38591),g=n(97019),m=n(8602),f=n(115),v=n(63454),b=n(8105);const x=(e,t,n)=>{if(!1===n)e.removePanel(t),(0,v.WI)((0,f.qj)(t.key));else{const n=t.alert&&!d.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,s=t.alert?"YES":void 0;l.Z.publish(new b.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:n,icon:"trash-alt",confirmText:s,yesText:"Remove",onConfirm:()=>x(e,t,!1)}))}},y=(e,t)=>{e.duplicatePanel(t)},w=e=>{let t=e;e instanceof p.r&&(t=e.getSaveModel()),u.Z.set(c.zF,JSON.stringify(t)),l.Z.emit(a.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},j=(e,t)=>{l.Z.publish(new b.Dn({component:h.V8,props:{dashboard:e,panel:t}}))},S=(e,t)=>{l.Z.publish(new b.Dn({component:g.c,props:{panel:t,initialFolderId:e.meta.folderId,isOpen:!0}}))},C=e=>{l.Z.publish(new b.Dn({component:m.i,props:{onConfirm:()=>e.unlinkLibraryPanel(),isOpen:!0}}))},k=e=>{const t=Object.assign({},e.options);!0===t.legend.showLegend?t.legend.showLegend=!1:t.legend.showLegend=!0,e.updateOptions(t)};function N(e,t){const n={timeInfo:"",timeRange:t};if(e.timeFrom){const a=(0,o.J)().replace(e.timeFrom,e.scopedVars),l=i.describeTextRange(a);if(l.invalid)return n.timeInfo="invalid time override",n;if((0,s.isString)(t.raw.from)){const e=r.parse(l.from);n.timeInfo=l.display,n.timeRange={from:e,to:r.parse(l.to),raw:{from:l.from,to:l.to}}}}if(e.timeShift){const t=(0,o.J)().replace(e.timeShift,e.scopedVars);if(i.describeTextRange(t).invalid)return n.timeInfo="invalid timeshift",n;const s="-"+t;n.timeInfo+=" timeshift "+s;const a=r.parseDateMath(s,n.timeRange.from,!1),l=r.parseDateMath(s,n.timeRange.to,!0);n.timeRange={from:a,to:l,raw:{from:a,to:l}}}return e.hideTimeOverride&&(n.timeInfo=""),n}},76926:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var s=n(88246),a=n(42914);const i=(e,t)=>{const n={from:(0,s.v9)(e.from)?(0,s.CQ)(e.from):e.from,to:(0,s.v9)(e.to)?(0,s.CQ)(e.to):e.to},i=t?t.getTimezone():void 0;return{from:a.parse(n.from,!1,i,null==t?void 0:t.fiscalYearStartMonth),to:a.parse(n.to,!0,i,null==t?void 0:t.fiscalYearStartMonth),raw:n}}},65022:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});const s={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},5316:(e,t,n)=>{"use strict";n.d(t,{J_:()=>z,F5:()=>W,M9:()=>M,gv:()=>E,b2:()=>V,Kj:()=>B,bZ:()=>F,kY:()=>L,oe:()=>_});var s=n(36298),a=n(65737),i=n(18474),r=n(93570),o=n(80795),l=n(93686),d=n(68374),c=n(42200),u=n(42833),h=n(4020),p=n(75534),g=n(3363),m=n(83997);const f=async e=>{try{return await(async e=>{const t=await(0,g.n)((0,c.i)().fetch({method:"GET",url:`/api/datasources/uid/${e}`,params:(0,m.y)(),showErrorAlert:!1}));if(t.ok)return t.data;throw Error(`Could not find data source by UID: "${e}"`)})(e)}catch(t){console.log(`Failed to lookup data source using UID "${e}"`)}try{return await(async e=>{const t=await(0,g.n)((0,c.i)().fetch({method:"GET",url:`/api/datasources/${e}`,params:(0,m.y)(),showErrorAlert:!1}));if(t.ok)return t.data;throw Error(`Could not find data source by ID: "${e}"`)})(e)}catch(t){console.log(`Failed to lookup data source using ID "${e}"`)}throw Error("Could not find data source")},v=e=>(0,c.i)().post("/api/datasources",e);var b=n(65022),x=n(31181);const y=e=>{(0,x.ff)("grafana_ds_add_datasource_clicked",e)},w=e=>{(0,x.ff)("grafana_ds_test_datasource_clicked",e)};function j(e,t){return e.filter((e=>e.name.toLowerCase()===t.toLowerCase())).length>0}function S(e,t){for(;j(e,t);)t=C(t)?`${N(t)}${n=k(t),isNaN(n)?1:n+1}`:`${t}-1`;var n;return t}function C(e){return e.endsWith("-",e.length-1)}function k(e){return parseInt(e.slice(-1),10)}function N(e){return e.slice(0,e.length-1)}var O=n(15546),I=n(72677);function T(e){const t=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter((e=>e)),n={},s={},a=[R({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),R({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),R({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),R({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),R({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),R({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),R({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),R({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),R({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),R({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),R({id:"grafana-saphana-datasource",description:"SAP HANA® integration and data source",name:"SAP HANA®",imgUrl:"public/img/plugins/sap_hana.png"}),R({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),R({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),R({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),R({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),R({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),R({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})];for(const e of t)n[e.id]=e;for(const r of e){const e=a.find((e=>e.id===r.id));var i;if(r.enterprise||e)r.category="enterprise",r.unlicensed=!(0,I.v)("enterprise.plugins"),r.info.links=(null==e||null===(i=e.info)||void 0===i?void 0:i.links)||r.info.links;if(r.info.links)for(const e of r.info.links)e.name="Learn more";(t.find((e=>e.id===r.category))||n.other).plugins.push(r),s[r.id]=r}for(const e of t){if("cloud"===e.id&&e.plugins.push({id:"gcloud",name:"Grafana Cloud",type:O.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}),"enterprise"===e.id)for(const t of a)s[t.id]||e.plugins.push(t);$(e.plugins)}return t.filter((e=>e.plugins.length>0))}function $(e){const t={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};e.sort(((e,n)=>{const s=t[e.id]||0,a=t[n.id]||0;return s>a?-1:s<a||e.name>n.name?1:-1}))}function R(e){return{id:e.id,name:e.name,type:O.zV.datasource,module:"phantom",baseUrl:"",info:{description:e.description,logos:{small:e.imgUrl,large:e.imgUrl},author:{name:"Grafana Labs"},links:[{url:a.v.pluginCatalogURL+e.id,name:"Install now"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var P=n(93220),D=n(46525),A=n(23940);const M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadDataSource:E,loadDataSourceMeta:V,getDataSource:A.f6,getDataSourceMeta:A.G4,importDataSourcePlugin:p.nL};return async(n,s)=>{if(e)try{const a=await n(t.loadDataSource(e));await n(t.loadDataSourceMeta(a));const i=t.getDataSource(s().dataSources,e),r=t.getDataSourceMeta(s().dataSources,i.type),o=await t.importDataSourcePlugin(r);n((0,D.iZ)(o))}catch(e){e instanceof Error&&n((0,D.CT)(e))}else n((0,D.CT)(new Error("Invalid UID")))}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:u.ak,getBackendSrv:c.i};return async(n,s)=>{const o=await t.getDatasourceSrv().get(e);o.testDatasource&&(n((0,D.j_)()),t.getBackendSrv().withNoBackendCache((async()=>{try{const e=await o.testDatasource();n((0,D.ng)(e)),w({grafana_version:a.v.buildInfo.version,plugin_id:o.type,datasource_uid:o.uid,success:!0})}catch(t){let s,l;if(t instanceof i.ZA)s=t.message,l=t.details;else if((0,r.kW)(t)){var e;s=null!==(e=t.data.message)&&void 0!==e?e:`HTTP error ${t.statusText}`}else t instanceof Error&&(s=t.message);n((0,D.Aq)({message:s,details:l})),w({grafana_version:a.v.buildInfo.version,plugin_id:o.type,datasource_uid:o.uid,success:!1})}})))}};function F(){return async e=>{const t=await(async()=>await(0,c.i)().get("/api/datasources"))();e((0,D.be)(t))}}function E(e){return async t=>{let n=await f(e);return e!==n.uid&&(window.location.href=s.u.assureBaseUrl(`/datasources/edit/${n.uid}`),n={}),t((0,D.rl)(n)),n}}function V(e){return async t=>{const n=await(0,h.a)(e.type),s=await(0,p.nL)(n),a=s.DataSourceClass.prototype instanceof i.CK,r=Object.assign({},n,{isBackend:n.backend||a});t((0,D.jS)(r)),s.meta=r,t((0,l.RL)((0,P.B1)(e,s)))}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.n.Edit;return async(n,s)=>{var i,r;await n(F());const l=s().dataSources.dataSources,c=0===l.length,h={name:e.name,type:e.id,access:"proxy",isDefault:c};j(l,h.name)&&(h.name=S(l,h.name));const p=await v(h);await(0,u.ak)().reload(),await d.Vt.fetchUserPermissions(),y({grafana_version:a.v.buildInfo.version,plugin_id:e.id,datasource_uid:p.datasource.uid,plugin_version:null===(i=p.meta)||void 0===i||null===(r=i.info)||void 0===r?void 0:r.version}),o.E1.push(t.replace(/:uid/gi,p.datasource.uid))}}function B(){return async e=>{e((0,D.Ww)());const t=await(0,c.i)().get("/api/plugins",{enabled:1,type:"datasource"}),n=T(t);e((0,D.wZ)({plugins:t,categories:n}))}}function _(e){return async t=>(await(e=>(0,c.i)().put(`/api/datasources/uid/${e.uid}`,e))(e),await(0,u.ak)().reload(),t(E(e.uid)))}function W(){return async(e,t)=>{const{uid:n}=t().dataSources.dataSource;await(e=>(0,c.i)().delete(`/api/datasources/uid/${e}`))(n),await(0,u.ak)().reload(),o.E1.push("/datasources")}}},93220:(e,t,n)=>{"use strict";n.d(t,{B1:()=>u,nI:()=>h,xG:()=>p});var s=n(15546),a=n(72677),i=n(53277),r=n(46782),o=n(68374),l=n(54168),d=n(64850);const c="Loading";function u(e,t){const n=t.meta,s=r.ZP.featureToggles.featureHighlights,u={img:n.info.logos.large,id:"datasource-"+e.uid,subTitle:`Type: ${n.name}`,url:"",text:e.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${e.uid}`,text:"Settings",url:`datasources/edit/${e.uid}/`}]};if(t.configPages)for(const n of t.configPages)u.children.push({active:!1,text:n.title,icon:n.icon,url:`datasources/edit/${e.uid}/?page=${n.id}`,id:`datasource-page-${n.id}`});n.includes&&void 0!==n.includes.find((e=>"dashboard"===e.type))&&o.Vt.hasRole("Admin")&&u.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${e.uid}`,text:"Dashboards",url:`datasources/edit/${e.uid}/dashboards`});const h=e.type===c,p="feature-highlights-data-source-permissions-badge",g={active:!1,icon:"lock",id:`datasource-permissions-${e.uid}`,text:"Permissions",url:`datasources/edit/${e.uid}/permissions`};(0,l.d5)()&&!h&&(g.tabSuffix=()=>(0,i.Z)({experimentId:p,eventVariant:"trial"})),(0,a.v)("dspermissions.enforcement")?o.Vt.hasPermission(d.bW.DataSourcesPermissionsRead)&&u.children.push(g):s&&!h&&u.children.push(Object.assign({},g,{url:g.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:p})}));const m="feature-highlights-data-source-insights-badge",f={active:!1,icon:"info-circle",id:`datasource-insights-${e.uid}`,text:"Insights",url:`datasources/edit/${e.uid}/insights`};(0,l.d5)()&&!h&&(f.tabSuffix=()=>(0,i.Z)({experimentId:m,eventVariant:"trial"})),(0,a.v)("analytics")?o.Vt.hasPermission(d.bW.DataSourcesInsightsRead)&&u.children.push(f):s&&!h&&u.children.push(Object.assign({},f,{url:f.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:m})}));const v="feature-highlights-query-caching-badge",b={active:!1,icon:"database",id:`datasource-cache-${e.uid}`,text:"Cache",url:`datasources/edit/${e.uid}/cache`,hideFromTabs:!n.isBackend||!r.ZP.caching.enabled};return(0,l.d5)()&&!h&&(b.tabSuffix=()=>(0,i.Z)({experimentId:v,eventVariant:"trial"})),(0,a.v)("caching")?o.Vt.hasPermissionInMetadata(d.bW.DataSourcesCachingRead,e)&&u.children.push(b):s&&!h&&u.children.push(Object.assign({},b,{url:b.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:v})})),u}function h(e,t){let n={text:""};for(const s of e.children)if(s.id.indexOf(t)>0){s.active=!0,n=s;break}return{main:e,node:n}}function p(e){return h(u({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:c,typeName:c,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:s.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}}),e)}},46525:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>y,BX:()=>p,CT:()=>v,Ht:()=>h,Ww:()=>l,ZP:()=>w,be:()=>r,iZ:()=>f,jS:()=>o,j_:()=>b,ng:()=>x,rl:()=>i,wZ:()=>d,yr:()=>g,zT:()=>c});var s=n(23067);const a={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n(89905).l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{}},i=(0,s.PH)("dataSources/dataSourceLoaded"),r=(0,s.PH)("dataSources/dataSourcesLoaded"),o=(0,s.PH)("dataSources/dataSourceMetaLoaded"),l=(0,s.PH)("dataSources/dataSourcePluginsLoad"),d=(0,s.PH)("dataSources/dataSourcePluginsLoaded"),c=(0,s.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,s.PH)("dataSources/setDataSourcesLayoutMode"),h=(0,s.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,s.PH)("dataSources/setDataSourceName"),g=(0,s.PH)("dataSources/setIsDefault"),m={testingStatus:{},loadError:null,loading:!0,plugin:null},f=(0,s.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),v=(0,s.PH)("dataSourceSettings/initDataSourceSettingsFailed"),b=(0,s.PH)("dataSourceSettings/testDataSourceStarting"),x=(0,s.PH)("dataSourceSettings/testDataSourceSucceeded"),y=(0,s.PH)("dataSourceSettings/testDataSourceFailed"),w={dataSources:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;return r.match(t)?Object.assign({},e,{hasFetched:!0,dataSources:t.payload,dataSourcesCount:t.payload.length}):i.match(t)?Object.assign({},e,{dataSource:t.payload}):c.match(t)?Object.assign({},e,{searchQuery:t.payload}):u.match(t)?Object.assign({},e,{layoutMode:t.payload}):l.match(t)?Object.assign({},e,{plugins:[],isLoadingDataSources:!0}):d.match(t)?Object.assign({},e,{plugins:t.payload.plugins,categories:t.payload.categories,isLoadingDataSources:!1}):h.match(t)?Object.assign({},e,{dataSourceTypeSearchQuery:t.payload}):o.match(t)?Object.assign({},e,{dataSourceMeta:t.payload}):p.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{name:t.payload})}):g.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{isDefault:t.payload})}):e},dataSourceSettings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return f.match(t)?Object.assign({},e,{plugin:t.payload,loadError:null,loading:!1}):v.match(t)?Object.assign({},e,{plugin:null,loadError:t.payload.message,loading:!1}):b.match(t)?Object.assign({},e,{testingStatus:{message:"Testing...",status:"info"}}):x.match(t)?Object.assign({},e,{testingStatus:{status:null===(n=t.payload)||void 0===n?void 0:n.status,message:null===(s=t.payload)||void 0===s?void 0:s.message,details:null===(a=t.payload)||void 0===a?void 0:a.details}}):y.match(t)?Object.assign({},e,{testingStatus:{status:"error",message:null===(i=t.payload)||void 0===i?void 0:i.message,details:null===(r=t.payload)||void 0===r?void 0:r.details}}):e;var n,s,a,i,r}}},23940:(e,t,n)=>{"use strict";n.d(t,{G4:()=>r,I5:()=>a,IO:()=>o,f6:()=>i,mt:()=>s,r7:()=>l});const s=e=>{const t=new RegExp(e.searchQuery,"i");return e.dataSources.filter((e=>t.test(e.name)||t.test(e.database)||t.test(e.type)))},a=e=>{const t=new RegExp(e.dataSourceTypeSearchQuery,"i");return e.plugins.filter((e=>t.test(e.name)))},i=(e,t)=>e.dataSource.uid===t?e.dataSource:{},r=(e,t)=>e.dataSourceMeta.id===t?e.dataSourceMeta:{},o=e=>e.searchQuery,l=e=>e.dataSourcesCount},80070:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var s=n(52423),a=n(68404),i=n(16755),r=n(70917),o=n(32933),l=n(94698),d=n(45916);const c={label:"Fixed color",value:"_____fixed_____"},u=e=>{var t;const{value:n,context:s,onChange:u}=e,p="dark-green",g=(0,i.wW)(h),m=null==n?void 0:n.field,f=Boolean(!m),v=(0,l.IX)(s.data),b=(0,l.nw)(v,m,c),x=(0,a.useCallback)((e=>{const t=e.value;if(t&&t!==c.value)u(Object.assign({},n,{field:t}));else{var s;const e=null!==(s=null==n?void 0:n.fixed)&&void 0!==s?s:p;u(Object.assign({},n,{field:void 0,fixed:e}))}}),[u,n]),y=(0,a.useCallback)((e=>{u({field:void 0,fixed:null!=e?e:p})}),[u]),w=f?c:b.find((e=>e.value===m));return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:g.container,children:[(0,d.jsx)(r.Ph,{value:w,options:b,onChange:x,noOptionsMessage:"No fields found"}),f&&(0,d.jsx)("div",{className:g.picker,children:(0,d.jsx)(o.zH,{color:null!==(t=null==n?void 0:n.fixed)&&void 0!==t?t:p,onChange:y,enableNamedColors:!0})})]})})},h=e=>({container:s.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:s.css`
    padding-left: 8px;
  `})},85436:(e,t,n)=>{"use strict";n.d(t,{E:()=>x});var s,a=n(52423),i=n(68404),r=n(95148),o=n(16755),l=n(8006),d=n(34117),c=n(46889),u=n(4645),h=n(43259),p=n(5762),g=n(93406),m=n(74190),f=n(7916),v=n(14351),b=n(45916);const x=e=>{var t;const{value:n,src:a,name:x,placeholder:w,onChange:j,onClear:S,mediaType:C,folderName:k,size:N,color:O}=e,I=(0,o.wW)(y),T=(0,o.l4)(),$=(0,i.createRef)(),R=(0,b.jsx)(v.Y,{onChange:j,value:n,mediaType:C,folderName:k});let P=a;!P&&n&&(P=(0,m.t)(n));const D=O&&{fill:T.visualization.getColorByName(O)};return(0,b.jsx)(h.D,{content:R,children:(e,a,i)=>(0,b.jsxs)(b.Fragment,{children:[$.current&&(0,b.jsx)(p.J,Object.assign({},i,{referenceElement:$.current,onMouseEnter:e,onKeyDown:e=>{(0,g.i)(e,a)}})),(0,b.jsxs)("div",{ref:$,onClick:e,className:I.pointer,children:[N===f.zc.SMALL&&(n&&P?(0,b.jsx)(r.Z,{src:P,className:I.icon,style:Object.assign({},D)}):s||(s=(0,b.jsx)(l.Qj,{variant:"primary",fill:"text",size:"sm",children:"Set icon"}))),N===f.zc.NORMAL&&(0,b.jsx)(d.Z,{children:(0,b.jsx)(c._,{label:null,grow:!0,children:(0,b.jsx)(u.I,{value:x,placeholder:w,readOnly:!0,prefix:P&&(0,b.jsx)(r.Z,{src:P,className:I.icon,style:Object.assign({},D)}),suffix:t||(t=(0,b.jsx)(l.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:S}))})})})]})]})})},y=e=>({pointer:a.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:a.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},14351:(e,t,n)=>{"use strict";n.d(t,{Y:()=>E});var s,a,i=n(52423),r=n(99510),o=n(81699),l=n(6665),d=n(68404),c=n(93570),u=n(16755),h=n(98817),p=n(8006),g=n(46782),m=n(7916),f=n(95148),v=n(65678),b=n(19050),x=n(45916);function y(e){let{secondaryText:t="Drag and drop here or browse"}=e;const n=(0,u.wW)(j);return(0,x.jsxs)("div",{className:n.iconWrapper,children:[(0,x.jsx)("small",{className:n.small,children:t}),s||(s=(0,x.jsx)(p.zx,{type:"button",icon:"upload",children:"Upload"}))]})}const w=e=>{let{mediaType:t,setFormData:n,setUpload:s,error:i}=e;const r=(0,u.wW)(j),[o,l]=(0,d.useState)(!1),[c,h]=(0,d.useState)(""),p=()=>(0,x.jsx)(v.g,{label:"Preview",children:(0,x.jsxs)("div",{className:r.iconPreview,children:[t===m.DD.Icon&&(0,x.jsx)(f.Z,{src:c,className:r.img}),t===m.DD.Image&&(0,x.jsx)("img",{src:c,alt:"Preview of the uploaded file",className:r.img})]})}),g="icon"===t?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return(0,x.jsx)(b.Yo,{readAs:"readAsBinaryString",onFileRemove:e=>{fetch(`/api/storage/delete/upload/${e.file.name}`,{method:"DELETE"}).catch((e=>console.error("cannot delete file",e)))},options:{accept:g,multiple:!1,onDrop:e=>{let t=new FormData;t.append("file",e[0]),h(URL.createObjectURL(e[0])),l(!0),n(t),s(!0)}},children:""!==i.message&&o?(0,x.jsx)("p",{children:i.message}):o?(0,x.jsx)(p,{}):a||(a=(0,x.jsx)(y,{}))})};function j(e,t){return{container:i.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:i.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:i.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:i.css`
      margin: ${e.spacing(2,0,1)};
    `,small:i.css`
      color: ${e.colors.text.secondary};
      margin-bottom: ${e.spacing(2)};
    `,iconContainer:i.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:i.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${e.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:i.css`
      width: 147px;
      height: 147px;
      fill: ${e.colors.text.primary};
    `}}var S=n(70917),C=n(39106),k=n(42833),N=n(89050),O=n(75478);function I(e){const{columnIndex:t,rowIndex:n,style:s,data:a}=e,{cards:r,columnCount:o,onChange:l,selected:d}=a,c=r[t+n*o],h=(0,u.l4)(),p=T(h);return(0,x.jsx)("div",{style:s,children:c&&(0,x.jsxs)("div",{className:d===c.value?(0,i.cx)(p.card,p.selected):p.card,onClick:()=>l(c.value),children:[c.imgUrl.endsWith(".svg")?(0,x.jsx)(f.Z,{src:c.imgUrl,className:p.img}):(0,x.jsx)("img",{src:c.imgUrl,alt:"",className:p.img}),(0,x.jsx)("h6",{className:p.text,children:c.label.slice(0,-4)})]},c.value)})}const T=(0,n(50191).B)((e=>({card:i.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${e.colors.action.hover};
        box-shadow: ${e.shadows.z2};
      }
    `,selected:i.css`
      border: 2px solid ${e.colors.primary.main};
      :hover {
        border-color: ${e.colors.primary.main};
      }
    `,img:i.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${e.colors.text.primary};
    `,text:i.css`
      color: ${e.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:i.css`
      border: 1px solid ${e.colors.border.medium};
    `}))),$=e=>{const{onChange:t,cards:n,value:s}=e,a=(0,u.l4)(),i=T(a);return(0,x.jsx)(N.Z,{defaultWidth:680,children:e=>{let{width:a,height:r}=e;const o=Math.floor(a/90),l=Math.ceil(n.length/o);return(0,x.jsx)(O.Ym,{width:a,height:r,columnCount:o,columnWidth:90,rowCount:l,rowHeight:90,itemData:{cards:n,columnCount:o,onChange:t,selected:s},className:i.grid,children:(0,d.memo)(I,O.wy)})}})},R=e=>{const{value:t,mediaType:n,folderName:s,newValue:a,setNewValue:i}=e,r=(0,u.wW)(P),o=(e=>e===m.DD.Icon?[m.QS.Icon,m.QS.IOT,m.QS.Marker]:[m.QS.BG])(n).map((e=>({label:e,value:e}))),[l,c]=(0,d.useState)(),[h,p]=(0,d.useState)(((e,t)=>{var n;return null!==(n=e.find((e=>t.startsWith(e.value))))&&void 0!==n?n:e[0]})(o,null!=t&&t.length?t:s)),[g,f]=(0,d.useState)([]),[b,y]=(0,d.useState)([]);return(0,d.useEffect)((()=>{const e=null==h?void 0:h.value;if(e){const t=n===m.DD.Icon?e=>e.name.endsWith(".svg"):e=>e.name.endsWith(".png")||e.name.endsWith(".gif");(0,k.ak)().get("-- Grafana --").then((n=>{n.listFiles(e).subscribe({next:n=>{const s=[];n.forEach((n=>{if(t(n)){const t=n.name.lastIndexOf(".");s.push({value:`${e}/${n.name}`,label:n.name,search:(t?n.name.substring(0,t):n.name).toLowerCase(),imgUrl:`public/${e}/${n.name}`})}})),f(s),y(s)}})}))}}),[n,h]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.g,{children:(0,x.jsx)(S.Ph,{options:o,onChange:p,value:h,menuShouldPortal:!1})}),(0,x.jsx)(v.g,{children:(0,x.jsx)(C.H,{value:null!=l?l:"",placeholder:"Search",onChange:e=>{var t;(t=e)?(t=t.toLowerCase(),y(g.filter((e=>e.search.includes(t))))):y(g),c(e)}})}),b&&(0,x.jsx)("div",{className:r.cardsWrapper,children:(0,x.jsx)($,{cards:b,onChange:e=>i(e),value:a})})]})},P=e=>({cardsWrapper:i.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var D=n(4645),A=n(83744),M=n(74190);const L=e=>{const{newValue:t,setNewValue:n,mediaType:s}=e,a=(0,u.wW)(F),i=(0,M.t)(t);let r=null==t?void 0:t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));return r.length>20&&(r=r.substring(0,20)+"..."),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.g,{children:(0,x.jsx)(D.I,{onChange:e=>n(e.currentTarget.value),value:t})}),(0,x.jsxs)("div",{className:a.iconContainer,children:[(0,x.jsx)(v.g,{label:"Preview",children:(0,x.jsxs)("div",{className:a.iconPreview,children:[s===m.DD.Icon&&(0,x.jsx)(f.Z,{src:i,className:a.img}),s===m.DD.Image&&t&&(0,x.jsx)("img",{src:i,alt:"Preview of the selected URL",className:a.img})]})}),(0,x.jsx)(A._,{children:r})]})]})},F=e=>({iconContainer:i.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:i.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${e.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:i.css`
    width: 147px;
    height: 147px;
    fill: ${e.colors.text.primary};
  `}),E=e=>{var t,n,s;const{value:a,onChange:i,mediaType:f,folderName:v}=e,b=(0,u.wW)(V),y=()=>{i(a)},j=(0,d.createRef)(),{dialogProps:S}=(0,r.R)({},j),{overlayProps:C}=(0,l.Ir)({onClose:y,isDismissable:!0,isOpen:!0},j),k=a&&a.includes("://"),[N,O]=(0,d.useState)(null!=a?a:""),[I,T]=(0,d.useState)(k?m.hQ.URL:m.hQ.Folder),[$,P]=(0,d.useState)(new FormData),[D,A]=(0,d.useState)(!1),[M,F]=(0,d.useState)({message:""}),E=e=>`${b.resourcePickerPopoverTab} ${I===e&&b.resourcePickerPopoverActiveTab}`,z=()=>t||(t=(0,x.jsx)(R,{value:a,mediaType:f,folderName:v,newValue:N,setNewValue:O}));return(0,x.jsx)(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,x.jsx)("section",Object.assign({ref:j},C,S,{children:(0,x.jsxs)("div",{className:b.resourcePickerPopover,children:[(0,x.jsxs)("div",{className:b.resourcePickerPopoverTabs,children:[(0,x.jsx)("button",{className:E(m.hQ.Folder),onClick:()=>T(m.hQ.Folder),children:"Folder"}),(0,x.jsx)("button",{className:E(m.hQ.URL),onClick:()=>T(m.hQ.URL),children:"URL"})]}),(0,x.jsxs)("div",{className:b.resourcePickerPopoverContent,children:[(()=>{switch(I){case m.hQ.Folder:return z();case m.hQ.URL:return n||(n=(0,x.jsx)(L,{newValue:N,setNewValue:O,mediaType:f}));case m.hQ.Upload:return s||(s=(0,x.jsx)(w,{mediaType:f,setFormData:P,setUpload:A,newValue:N,error:M}));default:return z()}})(),(0,x.jsxs)(h.h,{className:b.buttonGroup,children:[(0,x.jsx)(p.zx,{className:b.button,variant:"secondary",onClick:()=>y(),children:"Cancel"}),(0,x.jsx)(p.zx,{className:b.button,variant:N&&N!==a?"primary":"secondary",onClick:()=>{D?fetch("/api/storage/upload",{method:"POST",body:$}).then((e=>e.status>=400?void e.json().then((e=>F(e))):e.json())).then((e=>{(0,c.i)().get(`api/storage/read/${e.path}`).then((()=>O(`${g.vc.appUrl}api/storage/read/${e.path}`))).then((()=>i(`${g.vc.appUrl}api/storage/read/${e.path}`)))})).catch((e=>console.error(e))):i(N)},children:"Select"})]})]})]})}))})},V=e=>({resourcePickerPopover:i.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};
  `,resourcePickerPopoverTab:i.css`
    width: 50%;
    text-align: center;
    padding: ${e.spacing(1,0)};
    background: ${e.colors.background.secondary};
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:i.css`
    color: ${e.colors.text.primary};
    font-weight: ${e.typography.fontWeightMedium};
    background: ${e.colors.background.primary};
  `,resourcePickerPopoverContent:i.css`
    width: 315px;
    font-size: ${e.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${e.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:i.css`
    display: flex;
    width: 100%;
    border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
  `,buttonGroup:i.css`
    align-self: center;
    flex-direction: row;
  `,button:i.css`
    margin: 12px 20px 5px;
  `})},8348:(e,t,n)=>{"use strict";n.d(t,{$:()=>m});var s=n(68404),a=n(34117),i=n(46889),r=n(37625),o=n(8006),l=n(90261),d=n(46272),c=n(7916),u=n(45916);const h=[{label:"Fixed",value:c.xy.Fixed,description:"Fixed value"},{label:"Field",value:c.xy.Field,description:"Display field value"}],p={settings:{}},g={settings:{}},m=e=>{var t,n;const{value:m,context:f,onChange:v}=e,b=(0,s.useCallback)((e=>{v(Object.assign({},m,{mode:e}))}),[v,m]),x=(0,s.useCallback)((e=>{v(Object.assign({},m,{field:e}))}),[v,m]),y=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";v(Object.assign({},m,{fixed:e}))}),[v,m]),w=null!==(t=null==m?void 0:m.mode)&&void 0!==t?t:c.xy.Fixed;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.Z,{children:(0,u.jsx)(i._,{label:"Source",labelWidth:9,grow:!0,children:(0,u.jsx)(r.S,{value:w,options:h,onChange:b,fullWidth:!0})})}),w!==c.xy.Fixed&&(0,u.jsx)(a.Z,{children:(0,u.jsx)(i._,{label:"Field",labelWidth:9,grow:!0,children:(0,u.jsx)(l.b,{context:f,value:null!==(n=m.field)&&void 0!==n?n:"",onChange:x,item:p})})}),w===c.xy.Fixed&&(0,u.jsx)(a.Z,{children:(0,u.jsx)(i._,{label:"Value",labelWidth:9,grow:!0,children:(0,u.jsx)(d.A,{context:f,value:null==m?void 0:m.fixed,onChange:y,item:g,suffix:(null==m?void 0:m.fixed)&&(0,u.jsx)(o.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:()=>{y("")}})})})},null==m?void 0:m.fixed),w===c.xy.Template&&(0,u.jsx)(a.Z,{children:(0,u.jsx)(i._,{label:"Template",labelWidth:9,grow:!0,children:(0,u.jsx)(d.A,{context:f,value:null==m?void 0:m.fixed,onChange:y,item:g})})})]})}},31428:(e,t,n)=>{"use strict";n.d(t,{Lm:()=>s.L,Lv:()=>f,k9:()=>$,cL:()=>k,$2:()=>P.$});var s=n(80070),a=n(68404),i=n(45916);var r,o=n(34117),l=n(46889),d=n(37625),c=n(90261),u=n(20223),h=n(7916),p=n(85436);const g=[{label:"Fixed",value:h.Q8.Fixed,description:"Fixed value"},{label:"Field",value:h.Q8.Field,description:"Use a string field result"}],m={settings:{}},f=e=>{var t,n,s,f,b,x,y,w,j,S,C;const{value:k,context:N,onChange:O,item:I}=e,T=(0,a.useCallback)((e=>{O(Object.assign({},k,{mode:e}))}),[O,k]),$=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";O(Object.assign({},k,{field:e}))}),[O,k]),R=(0,a.useCallback)((e=>{O(Object.assign({},k,{fixed:null!=e?e:""}))}),[O,k]),P=null!==(t=null==k?void 0:k.mode)&&void 0!==t?t:h.Q8.Fixed,D=null===(n=null===(s=I.settings)||void 0===s?void 0:s.showSourceRadio)||void 0===n||n,A=null!==(f=null===(b=I.settings)||void 0===b?void 0:b.resourceType)&&void 0!==f?f:h.DD.Icon,M=null!==(x=null===(y=I.settings)||void 0===y?void 0:y.folderName)&&void 0!==x?x:u.QS.Icon;let L="";var F;A===h.DD.Icon&&(null!=k&&k.fixed?L=(0,u.t7)(k.fixed):null!==(F=I.settings)&&void 0!==F&&F.placeholderValue&&(L=(0,u.t7)(I.settings.placeholderValue)));return(0,i.jsxs)(i.Fragment,{children:[D&&(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Source",labelWidth:9,grow:!0,children:(0,i.jsx)(d.S,{value:P,options:g,onChange:T,fullWidth:!0})})}),P!==h.Q8.Fixed&&(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Field",labelWidth:9,grow:!0,children:(0,i.jsx)(c.b,{context:N,value:null!==(w=k.field)&&void 0!==w?w:"",onChange:$,item:m})})}),P===h.Q8.Fixed&&(0,i.jsx)(p.E,{onChange:R,onClear:e=>{e.stopPropagation(),O({mode:h.Q8.Fixed,fixed:"",field:""})},value:null==k?void 0:k.fixed,src:L,placeholder:null!==(j=null===(S=I.settings)||void 0===S?void 0:S.placeholderText)&&void 0!==j?j:"Select a value",name:null!==(C=v(null==k?void 0:k.fixed))&&void 0!==C?C:"",mediaType:A,folderName:M,size:h.zc.NORMAL}),P===h.Q8.Mapping&&(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Mappings",labelWidth:9,grow:!0,children:r||(r=(0,i.jsx)("div",{children:"TODO mappings editor!"}))})})]})};function v(e){if(!e)return;const t=e.lastIndexOf("/");return t>0?e.substring(t+1):e}var b=n(52423),x=n(16755),y=n(70917),w=n(94698),j=n(92155),S=n(93088);const C={label:"Fixed value",value:"_____fixed_____"},k=e=>{const{value:t,context:n,onChange:s,item:r}=e,{settings:d}=r,c=(0,x.wW)(N),u=null==t?void 0:t.field,h=Boolean(!u),p=(0,w.IX)(n.data),g=(0,w.nw)(p,u,C),m=(0,a.useMemo)((()=>(0,S.x5)(d)),[d]),f=(0,a.useCallback)((e=>{s((0,S.C)(e,m))}),[s,m]),v=(0,a.useCallback)((e=>{const n=e.value;f(n&&n!==C.value?Object.assign({},t,{field:n}):Object.assign({},t,{field:void 0}))}),[f,t]),b=(0,a.useCallback)((e=>{void 0!==e&&f(Object.assign({},t,{min:e}))}),[f,t]),k=(0,a.useCallback)((e=>{void 0!==e&&f(Object.assign({},t,{max:e}))}),[f,t]),O=(0,a.useCallback)((e=>{void 0!==e&&f(Object.assign({},t,{fixed:e}))}),[f,t]),I=null!=t?t:{},T=h?C:g.find((e=>e.value===u));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(y.Ph,{value:T,options:g,onChange:v,noOptionsMessage:"No fields found"})}),(0,i.jsxs)("div",{className:c.range,children:[h&&(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Value",labelWidth:8,grow:!0,children:(0,i.jsx)(j.Y,Object.assign({value:I.fixed},m,{onChange:O}))})}),!h&&!m.hideRange&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Min",labelWidth:8,grow:!0,children:(0,i.jsx)(j.Y,Object.assign({value:I.min},m,{onChange:b}))})}),(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Max",labelWidth:8,grow:!0,children:(0,i.jsx)(j.Y,Object.assign({value:I.max},m,{onChange:k}))})})]})]})]})},N=e=>({range:b.css`
    padding-top: 8px;
  `});var O=n(27843);const I={label:"Fixed value",value:"_____fixed_____"},T=[{label:"Mod",value:h.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:h.eK.Clamped,description:"Use field values, clamped to max and min"}],$=e=>{var t,n;const{value:s,context:r,onChange:c,item:u}=e,{settings:p}=u,g=null==s?void 0:s.field,m=Boolean(!g),f=(0,w.IX)(r.data),v=(0,w.nw)(f,g,I,O.fS.number),b=(0,x.wW)(R),S=(0,a.useCallback)((e=>{const t=e.value;if(t&&t!==I.value)c(Object.assign({},s,{field:t}));else{var n;const e=null!==(n=s.fixed)&&void 0!==n?n:0;c(Object.assign({},s,{field:void 0,fixed:e}))}}),[c,s]),C=(0,a.useCallback)((e=>{c(Object.assign({},s,{mode:e}))}),[c,s]),k=(0,a.useCallback)((e=>{c(Object.assign({},s,{field:void 0,fixed:null!=e?e:0}))}),[c,s]),N=null!=s?s:{},$=null!==(t=null==s?void 0:s.mode)&&void 0!==t?t:h.eK.Mod,P=m?I:v.find((e=>e.value===g));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Limit",labelWidth:8,grow:!0,children:(0,i.jsx)(d.S,{value:$,options:T,onChange:C,fullWidth:!0})})}),(0,i.jsx)(y.Ph,{value:P,options:v,onChange:S,noOptionsMessage:"No fields found"})]}),(0,i.jsx)("div",{className:b.range,children:m&&(0,i.jsx)(o.Z,{children:(0,i.jsx)(l._,{label:"Value",labelWidth:8,grow:!0,children:(0,i.jsx)(j.Y,{value:null!==(n=null==N?void 0:N.fixed)&&void 0!==n?n:0,onChange:k,max:null==p?void 0:p.max,min:null==p?void 0:p.min})})})})]})},R=e=>({range:b.css`
    padding-top: 8px;
  `});var P=n(8348)},20223:(e,t,n)=>{"use strict";n.d(t,{DD:()=>s.DD,Q8:()=>s.Q8,QS:()=>s.QS,eK:()=>s.eK,B5:()=>s.B5,xy:()=>s.xy,PI:()=>o.PI,rj:()=>o.rj,PX:()=>l,FP:()=>o.FP,t7:()=>p.t,Im:()=>p.I,Qz:()=>o.Qz,yq:()=>g.y,z2:()=>o.z2,pb:()=>o.pb,W8:()=>d.W8,A:()=>d.A,Bw:()=>h,WO:()=>o.WO});var s=n(7916),a=n(31319),i=n(23564),r=n(43917),o=n(51455);function l(e,t,n){return function(e,t,n){var s;if(!e){var l,d;const e=n.visualization.getColorByName(null!==(l=t.fixed)&&void 0!==l?l:"grey");return{isAssumed:Boolean(null===(d=t.field)||void 0===d?void 0:d.length)||!t.fixed,fixed:e,value:()=>e,get:t=>e}}const c=(0,a.fD)(e);if(c.isByValue||null!==(s=e.config.mappings)&&void 0!==s&&s.length){const t=(0,i.xD)(e,!0);t!==e.config&&(e=Object.assign({},e,{config:t}),e.state=void 0);const s=(0,r.U)({field:e,theme:n}),a=e=>{var t;return null!==(t=s(e).color)&&void 0!==t?t:"#ccc"};return{field:e,get:t=>a(e.values.get(t)),value:()=>a((0,o.cR)(e))}}const u=c.getCalculator(e,n)(0,0);return{fixed:u,value:()=>u,get:e=>u,field:e}}((0,o.PI)(e,t.field),t,n)}var d=n(93088),c=n(27843),u=n(55343);function h(e,t){return function(e,t){var n;let a=t.fixed;const i=null!==(n=t.mode)&&void 0!==n?n:s.xy.Fixed;if(i===s.xy.Fixed)return{isAssumed:!Boolean(a),fixed:a,value:()=>a,get:e=>a};if(i===s.xy.Template){const n=e=>`TEMPLATE[${t.fixed} // ${e}]`;return e?{field:e,get:t=>n(e.values.get(t)),value:()=>n((0,o.cR)(e))}:(a=n(""),{isAssumed:!0,fixed:a,value:()=>a,get:e=>a})}if(!e)return{isAssumed:!0,fixed:a,value:()=>a,get:e=>a};let r=t=>(0,u.zc)(e.display(t));return{field:e,get:t=>r(e.values.get(t)),value:()=>r((0,o.cR)(e))}}(t.field?(0,o.PI)(e,t.field):null==e?void 0:e.fields.find((e=>e.type===c.fS.string)),t)}var p=n(74190),g=n(21147)},74190:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,t:()=>i});var s=n(7916),a=n(51455);function i(e){return e?e.indexOf(":/")>0?e:window.__grafana_public_path__+e:""}function r(e,t){var n;const r=null!==(n=t.mode)&&void 0!==n?n:s.Q8.Fixed;if(r===s.Q8.Fixed){const e=i(t.fixed);return{isAssumed:!Boolean(e),fixed:e,value:()=>e,get:t=>e}}const o=(0,a.PI)(e,t.field);if(!o){const e="";return{isAssumed:!0,fixed:e,value:()=>e,get:t=>e}}if(r===s.Q8.Mapping){const e=e=>i(`${e}`);return{field:o,get:t=>e(o.values.get(t)),value:()=>e((0,a.cR)(o))}}const l=e=>{if(o&&o.display){const t=o.display(e).icon;return i(null!=t?t:"")}return""};return{field:o,get:e=>l(o.values.get(e)),value:()=>l((0,a.cR)(o))}}},21147:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});var s=n(7916),a=n(51455);function i(e,t){return function(e,t){if(!e){var n,i;const e=null!==(n=t.fixed)&&void 0!==n?n:0;return{isAssumed:Boolean(null===(i=t.field)||void 0===i?void 0:i.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}let r=e=>e%t.max;t.mode===s.eK.Clamped&&(r=e=>e<t.min?t.min:e>t.max?t.max:e);const o=t=>{const n=e.values.get(t);return null===n||"number"!=typeof n?0:r(n)};return{field:e,get:o,value:()=>(0,a.cR)(e)}}((0,a.PI)(e,null==t?void 0:t.field),t)}},93088:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,C:()=>d,W8:()=>r,x5:()=>l});var s=n(23564),a=n(51455),i=n(20223);function r(e,t){return o((0,a.PI)(e,null==t?void 0:t.field),t)}function o(e,t,n){if(!e){var r,o;const e=null!==(r=t.fixed)&&void 0!==r?r:0;return{isAssumed:Boolean(null===(o=t.field)||void 0===o?void 0:o.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}const l=(0,s.dz)(e),d=t.max-t.min;if(e.values.length<1||d<=0||l.delta<=0)return{fixed:t.min,value:()=>t.min,get:()=>t.min};let c=e=>t.min+e*d;if(n===i.B5.Quadratic){const e=Math.PI*(t.max/2)**2,n=Math.PI*(t.min/2)**2,s=e-n;c=e=>{let t=n+s*e;return 2*Math.sqrt(t/Math.PI)}}const u=t=>{const n=e.values.get(t);let s=0;return n!==-1/0&&(s=(n-l.min)/l.delta),s>1?s=1:s<0&&(s=0),c(s)};return{get:u,value:()=>u((0,a.cR)(e)),field:e}}function l(e){return e||(e={min:0,max:1}),null==e.min&&(e.min=0),null==e.max&&(e.max=1),e}function d(e,t){let{min:n,max:s}=l(t);if(e||(e={}),null==e.max&&(e.max=s),null==e.min&&(e.min=n),e.min>e.max){const t=e.max;e.max=e.min,e.min=t}return e.min<n&&(e.min=n),e.max>s&&(e.max=s),null==e.fixed&&(e.fixed=e.min+(e.max-e.min)/2),e.field||(e.fixed>s?e.fixed=s:e.fixed<n&&(e.fixed=n)),e}},7916:(e,t,n)=>{"use strict";let s,a,i;n.d(t,{B5:()=>s,DD:()=>d,Q8:()=>o,QS:()=>l,eK:()=>a,hQ:()=>c,qj:()=>r,xy:()=>i,zc:()=>u}),function(e){e.Linear="linear",e.Quadratic="quad"}(s||(s={})),function(e){e.Mod="mod",e.Clamped="clamped"}(a||(a={})),function(e){e.Fixed="fixed",e.Field="field",e.Template="template"}(i||(i={}));const r=Object.freeze({fixed:"",mode:i.Field,field:""});let o,l,d,c,u;!function(e){e.Fixed="fixed",e.Field="field",e.Mapping="mapping"}(o||(o={})),function(e){e.Icon="img/icons/unicons",e.IOT="img/icons/iot",e.Marker="img/icons/marker",e.BG="img/bg"}(l||(l={})),function(e){e.Icon="icon",e.Image="image"}(d||(d={})),function(e){e.Folder="folder",e.URL="url",e.Upload="upload"}(c||(c={})),function(e){e.SMALL="small",e.NORMAL="normal"}(u||(u={}))},51455:(e,t,n)=>{"use strict";n.d(t,{FP:()=>l,PI:()=>p,Qz:()=>u,WO:()=>h,cR:()=>m,pb:()=>d,rj:()=>g,z2:()=>c});var s=n(32934),a=n(34784),i=n(65737),r=n(20223),o=n(21147);function l(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const s=(0,r.PX)(n,t,i.v.theme2);if(!s.isAssumed||1===e.series.length)return s}return(0,r.PX)(void 0,t,i.v.theme2)}function d(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const s=(0,r.W8)(n,t);if(!s.isAssumed||1===e.series.length)return s}return(0,r.W8)(void 0,t)}function c(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const s=(0,o.y)(n,t);if(!s.isAssumed||1===e.series.length)return s}return(0,o.y)(void 0,t)}function u(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const s=(0,r.Im)(n,t);if(!s.isAssumed||1===e.series.length)return s}return(0,r.Im)(void 0,t)}function h(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const s=(0,r.Bw)(n,t);if(!s.isAssumed||1===e.series.length)return s}return(0,r.Bw)(void 0,t)}function p(e,t){if(e&&null!=t&&t.length)for(const n of e.fields){if(t===n.name)return n;if(t===(0,s.C)(n,e))return n}}function g(e,t){if(e&&null!=t&&t.length)for(let n=0;n<e.fields.length;n++){const a=e.fields[n];if(t===a.name)return n;if(t===(0,s.C)(a,e))return n}}function m(e){var t;const n=null===(t=e.state)||void 0===t?void 0:t.calcs;if(n){const e=n[a.gz.lastNotNull];if(null!=e)return e}const s=e.values;let i=s.length-1;for(;i>=0;){const e=s.get(i--);if(null!=e)return e}}},6119:(e,t,n)=>{"use strict";n.d(t,{m:()=>P});var s,a,i,r,o,l=n(52423),d=n(68404),c=n(66827),u=n(2633),h=n(16755),p=n(97602),g=n(42833),m=n(67040),f=n(64850),v=n(54124),b=n(85699),x=n(88246),y=n(99500),w=n(1814),j=n(45916);function S(e){let{splitOpenFn:t,traceToLogsOptions:n,traceToMetricsOptions:l,dataFrame:d,createFocusSpanLink:h}=e;return d&&1!==d.fields.length&&d.fields.some((e=>{var t;return Boolean(null===(t=e.config.links)||void 0===t?void 0:t.length)}))?function(e){const n=d.fields.find((e=>{var t;return Boolean(null===(t=e.config.links)||void 0===t?void 0:t.length)}));try{const a=(0,w.a)({field:n,rowIndex:e.dataFrameRowIndex,splitOpenFn:t,range:N(e),dataFrame:d});return{logLinks:[{href:a[0].href,onClick:a[0].onClick,content:s||(s=(0,j.jsx)(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}))}]}}catch(e){return void console.error(e)}}:function(e,t,n,s){var l;let d;null!=t&&t.datasourceUid&&(d=(0,g.ak)().getInstanceSettings(t.datasourceUid));const h="grafana-splunk-datasource"===(null===(l=d)||void 0===l?void 0:l.type);let p;null!=n&&n.datasourceUid&&(p=(0,g.ak)().getInstanceSettings(n.datasourceUid));return function(l){var g;const m={traceLinks:[]};let f;if(d&&t){switch(null===(g=d)||void 0===g?void 0:g.type){case"loki":f=function(e,t,n){const{tags:s,filterByTraceID:a,filterBySpanID:i,mapTagNamesEnabled:r,mappedTags:o}=t,l=r&&null!=o&&o.length?o:null!=s&&s.length?s:C,d=[...e.process.tags,...e.tags].reduce(((e,t)=>{if(r){const n=l.find((e=>e.key===t.key));n&&e.push(`${n.value?n.value:n.key}="${t.value}"`)}else l.includes(t.key)&&e.push(`${t.key}="${t.value}"`);return e}),[]);if(!d.length)return;let c=`{${d.join(", ")}}`;a&&e.traceID&&(c+=` |="${e.traceID}"`);i&&e.spanID&&(c+=` |="${e.spanID}"`);return{title:n.name,url:"",internal:{datasourceUid:n.uid,datasourceName:n.name,query:{expr:c,refId:""}}}}(l,t,d);break;case"grafana-splunk-datasource":f=function(e,t,n){const{tags:s,filterByTraceID:a,filterBySpanID:i,mapTagNamesEnabled:r,mappedTags:o}=t,l=r&&null!=o&&o.length?o:null!=s&&s.length?s:C,d=[...e.process.tags,...e.tags].reduce(((e,t)=>{if(r){const n=l.find((e=>e.key===t.key));n&&e.push(`${n.value?n.value:n.key}="${t.value}"`)}else l.includes(t.key)&&e.push(`${t.key}="${t.value}"`);return e}),[]);let c="";d.length>0&&(c+=`${d.join(" ")}`);a&&e.traceID&&(c+=` "${e.traceID}"`);i&&e.spanID&&(c+=` "${e.spanID}"`);return{title:n.name,url:"",internal:{datasourceUid:n.uid,datasourceName:n.name,query:{query:c,refId:""}}}}(l,t,d);break;case"elasticsearch":case"grafana-opensearch-datasource":f=k(l,t,d)}if(f){const n=(0,c._)({link:f,internalLink:f.internal,scopedVars:{},range:N(l,{startMs:t.spanStartTimeShift?b.intervalToMs(t.spanStartTimeShift):0,endMs:t.spanEndTimeShift?b.intervalToMs(t.spanEndTimeShift):0},h),field:{},onClickFn:e,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});m.logLinks=[{href:n.href,onClick:n.onClick,content:a||(a=(0,j.jsx)(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}))}]}}if(p&&null!=n&&n.queries){m.metricLinks=[];for(const t of n.queries){const s=O(t,null==n?void 0:n.tags,l),a={title:p.name,url:"",internal:{datasourceUid:p.uid,datasourceName:p.name,query:{expr:s,refId:"A"}}},r=(0,c._)({link:a,internalLink:a.internal,scopedVars:{},range:N(l,{startMs:n.spanStartTimeShift?b.intervalToMs(n.spanStartTimeShift):0,endMs:n.spanEndTimeShift?b.intervalToMs(n.spanEndTimeShift):0}),field:{},onClickFn:e,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});m.metricLinks.push({title:null==t?void 0:t.name,href:r.href,onClick:r.onClick,content:i||(i=(0,j.jsx)(y.J,{name:"chart-line",title:"Explore metrics for this span"}))})}}if(l.references&&s)for(const e of l.references){if("CHILD_OF"===e.refType)continue;const t=s(e.traceID,e.spanID);m.traceLinks.push({href:t.href,title:e.span?e.span.operationName:"View linked span",content:r||(r=(0,j.jsx)(y.J,{name:"link",title:"View linked span"})),onClick:t.onClick})}if(l.subsidiarilyReferencedBy&&s)for(const e of l.subsidiarilyReferencedBy){const t=s(e.traceID,e.spanID);m.traceLinks.push({href:t.href,title:e.span?e.span.operationName:"View linked span",content:o||(o=(0,j.jsx)(y.J,{name:"link",title:"View linked span"})),onClick:t.onClick})}return m}}(t,n,l,h)}const C=["cluster","hostname","namespace","pod"];function k(e,t,n){const{tags:s,filterByTraceID:a,filterBySpanID:i,mapTagNamesEnabled:r,mappedTags:o}=t,l=[...e.process.tags,...e.tags].reduce(((e,t)=>{if(r&&null!=o&&o.length){const n=o.find((e=>e.key===t.key));n&&e.push(`${n.value?n.value:n.key}:"${t.value}"`)}else{(null!=s&&s.length?s:C).includes(t.key)&&e.push(`${t.key}:"${t.value}"`)}return e}),[]);let d="";l.length>0&&(d+=`${l.join(" AND ")}`),a&&e.traceID&&(d=`"${e.traceID}" AND `+d),i&&e.spanID&&(d=`"${e.spanID}" AND `+d);return{title:n.name,url:"",internal:{datasourceUid:n.uid,datasourceName:n.name,query:{query:d,refId:"",metrics:[{id:"1",type:"logs"}]}}}}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startMs:0,endMs:0},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=Math.floor(e.startTime/1e3+t.startMs),a=(0,x.CQ)(s),i=(e.startTime+e.duration)/1e3;let r=Math.floor(i+t.endMs);n&&r-s<1e3?r=s+1e3:s===r&&r++;const o=(0,x.CQ)(r);return{from:a,to:o,raw:{from:a,to:o}}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(!e.query)return`histogram_quantile(0.5, sum(rate(tempo_spanmetrics_latency_bucket{operation="${n.operationName}"}[5m])) by (le))`;let s=e.query;if(t.length&&-1!==s.indexOf("$__tags")){const e=[...n.process.tags,...n.tags],a=t.reduce(((t,n)=>{var s;const a=null===(s=e.find((e=>e.key===n.key)))||void 0===s?void 0:s.value;return a&&t.push(`${n.value?n.value:n.key}="${a}"`),t}),[]),i=null==a?void 0:a.join(", ");s=s.replace(/\$__tags/g,i)}return s}function I(e,t){return e.filter((e=>e.hasChildren)).length===t.size}function T(e,t,n){return s=>{const a=t.get(s);if(!a)return;let i;i="tags"===e?a.toggleTags():"process"===e?a.toggleProcess():"warnings"===e?a.toggleWarnings():"references"===e?a.toggleReferences():"stackTraces"===e?a.toggleStackTraces():a.toggleLogs();const r=new Map(t);r.set(s,i),n(r)}}const $=e=>({noDataMsg:l.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.secondary};
  `});function R(){return{}}function P(e){var t,n,s,a,i,r,o;const{spanFindMatches:l,traceProp:b,datasource:x,topOfViewRef:y,topOfViewRefType:w}=e,{detailStates:C,toggleDetail:k,detailLogItemToggle:N,detailLogsToggle:O,detailProcessToggle:P,detailReferencesToggle:D,detailReferenceItemToggle:A,detailTagsToggle:M,detailWarningsToggle:L,detailStackTracesToggle:F}=function(e){const[t,n]=(0,d.useState)(new Map);(0,d.useEffect)((()=>{n(new Map)}),[e,n]);const s=(0,d.useCallback)((function(e){const s=new Map(t);s.has(e)?s.delete(e):s.set(e,new p.kt),n(s)}),[t]),a=(0,d.useCallback)((function(e,s){const a=t.get(e);if(!a)return;const i=a.toggleLogItem(s),r=new Map(t);return r.set(e,i),n(r)}),[t]),i=(0,d.useCallback)((function(e,s){const a=t.get(e);if(!a)return;const i=a.toggleReferenceItem(s),r=new Map(t);return r.set(e,i),n(r)}),[t]);return{detailStates:t,toggleDetail:s,detailLogItemToggle:a,detailLogsToggle:(0,d.useCallback)((e=>T("logs",t,n)(e)),[t]),detailWarningsToggle:(0,d.useCallback)((e=>T("warnings",t,n)(e)),[t]),detailStackTracesToggle:(0,d.useCallback)((e=>T("stackTraces",t,n)(e)),[t]),detailReferenceItemToggle:i,detailReferencesToggle:(0,d.useCallback)((e=>T("references",t,n)(e)),[t]),detailProcessToggle:(0,d.useCallback)((e=>T("process",t,n)(e)),[t]),detailTagsToggle:(0,d.useCallback)((e=>T("tags",t,n)(e)),[t])}}(e.dataFrames[0]),{removeHoverIndentGuideId:E,addHoverIndentGuideId:V,hoverIndentGuideIds:z}=function(){const[e,t]=(0,d.useState)(new Set);return{hoverIndentGuideIds:e,addHoverIndentGuideId:(0,d.useCallback)((function(e){t((t=>{const n=new Set(t);return n.add(e),n}))}),[]),removeHoverIndentGuideId:(0,d.useCallback)((function(e){t((t=>{const n=new Set(t);return n.delete(e),n}))}),[])}}(),{viewRange:B,updateViewRangeTime:_,updateNextViewRangeTime:W}=function(){const[e,t]=(0,d.useState)({time:{current:[0,1]}}),n=(0,d.useCallback)((function(e){t((t=>{const n=Object.assign({},t.time,e);return Object.assign({},t,{time:n})}))}),[]);return{viewRange:e,updateViewRangeTime:(0,d.useCallback)((function(e,n){const s={current:[e,n]};t((e=>Object.assign({},e,{time:s})))}),[]),updateNextViewRangeTime:n}}(),{expandOne:U,collapseOne:H,childrenToggle:q,collapseAll:Z,childrenHiddenIDs:G,expandAll:Q}=function(){const[e,t]=(0,d.useState)(new Set),n=(0,d.useCallback)((function(n){if(0===e.size)return;let s=-1,a=!0;const i=n.reduce(((e,t)=>(t.depth<=s&&(a=!0),a&&e.has(t.spanID)&&(e.delete(t.spanID),a=!1,s=t.depth),e)),new Set(e));t(i)}),[e]),s=(0,d.useCallback)((function(n){if(I(n,e))return;let s;const a=n.reduce(((e,t)=>(s&&t.depth<=s.depth?(e.add(s.spanID),t.hasChildren&&(s=t)):t.hasChildren&&!e.has(t.spanID)&&(s=t),e)),new Set(e));s&&a.add(s.spanID),t(a)}),[e]),a=(0,d.useCallback)((function(){t(new Set)}),[]),i=(0,d.useCallback)((function(n){if(I(n,e))return;const s=n.reduce(((e,t)=>(t.hasChildren&&e.add(t.spanID),e)),new Set);t(s)}),[e]),r=(0,d.useCallback)((function(n){const s=new Set(e);e.has(n)?s.delete(n):s.add(n),t(s)}),[e]);return{childrenHiddenIDs:e,expandOne:n,collapseOne:s,expandAll:a,collapseAll:i,childrenToggle:r}}(),K=(0,h.wW)($),[J,Y]=(0,d.useState)(.25),[X,ee]=(0,d.useState)(!1),[te,ne]=function(e){const t=(0,f.v9)((t=>{var n;return null===(n=t.explore[e.exploreId])||void 0===n?void 0:n.panelsState.trace})),n=null==t?void 0:t.spanId,s=(0,f.I0)(),a=n=>s((0,v.km)(e.exploreId,"trace",Object.assign({},t,{spanId:n}))),i=(0,f.v9)((t=>{var n;return null===(n=t.explore[e.exploreId])||void 0===n?void 0:n.queries.find((t=>t.refId===e.refId))}));return[n,(t,s)=>{var r,o;const l={title:"Deep link to this span",url:"",internal:{datasourceUid:null===(r=e.datasource)||void 0===r?void 0:r.uid,datasourceName:null===(o=e.datasource)||void 0===o?void 0:o.name,query:Object.assign({},i,{query:t}),panelsState:{trace:{spanId:s}}}},d="traceId"===(null==i?void 0:i.queryType)&&i.query===t;return(0,c._)({link:l,internalLink:l.internal,scopedVars:{},range:{},field:{},onClickFn:d?()=>a(n===s?void 0:s):e.splitOpenFn?()=>{var n;return e.splitOpenFn({datasourceUid:null===(n=e.datasource)||void 0===n?void 0:n.uid,query:Object.assign({},i,{query:t}),panelsState:{trace:{spanId:s}}})}:void 0,replaceVariables:(0,u.J)().replace.bind((0,u.J)())})}]}({refId:null===(t=e.dataFrames[0])||void 0===t?void 0:t.refId,exploreId:e.exploreId,datasource:x,splitOpenFn:e.splitOpenFn}),se=(0,d.useMemo)((()=>{var t;return{childrenHiddenIDs:G,detailStates:C,hoverIndentGuideIds:z,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:J,traceID:null===(t=e.traceProp)||void 0===t?void 0:t.traceID}}),[G,C,z,J,null===(n=e.traceProp)||void 0===n?void 0:n.traceID]),ae=(0,g.ak)().getInstanceSettings(null==x?void 0:x.name),ie=null==ae||null===(s=ae.jsonData)||void 0===s?void 0:s.tracesToLogs,re=null==ae||null===(a=ae.jsonData)||void 0===a?void 0:a.tracesToMetrics,oe=null==ae?void 0:ae.jsonData,le=(0,d.useMemo)((()=>S({splitOpenFn:e.splitOpenFn,traceToLogsOptions:ie,traceToMetricsOptions:re,dataFrame:e.dataFrames[0],createFocusSpanLink:ne})),[e.splitOpenFn,ie,re,e.dataFrames,ne]),de=(0,d.useCallback)((()=>ee(!X)),[X]),ce=(0,f.v9)((e=>(0,m.Z)(e.user))),ue=x?null==x?void 0:x.type:"unknown";return(0,j.jsx)(j.Fragment,{children:null!==(i=e.dataFrames)&&void 0!==i&&i.length&&"trace"===(null===(r=e.dataFrames[0])||void 0===r||null===(o=r.meta)||void 0===o?void 0:o.preferredVisualisationType)&&b?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.T2,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:de,onTraceGraphViewClicked:R,slimView:X,trace:b,updateNextViewRangeTime:W,updateViewRangeTime:_,viewRange:B,timeZone:ce}),(0,j.jsx)(p.Ox,{registerAccessors:R,scrollToFirstVisibleSpan:R,findMatchesIDs:l,trace:b,datasourceType:ue,spanBarOptions:null==oe?void 0:oe.spanBar,traceTimeline:se,updateNextViewRangeTime:W,updateViewRangeTime:_,viewRange:B,timeZone:ce,setSpanNameColumnWidth:Y,collapseAll:Z,collapseOne:H,expandAll:Q,expandOne:U,childrenToggle:q,clearShouldScrollToFirstUiFindMatch:R,detailLogItemToggle:N,detailLogsToggle:O,detailWarningsToggle:L,detailStackTracesToggle:F,detailReferencesToggle:D,detailReferenceItemToggle:A,detailProcessToggle:P,detailTagsToggle:M,detailToggle:k,setTrace:R,addHoverIndentGuideId:V,removeHoverIndentGuideId:E,linksGetter:R,uiFind:e.search,createSpanLink:le,scrollElement:e.scrollElement,focusedSpanId:te,focusedSpanIdForSearch:e.focusedSpanIdForSearch,createFocusSpanLink:ne,topOfViewRef:y,topOfViewRefType:w})]}):(0,j.jsx)("div",{className:K.noDataMsg,children:"No data"})})}},71266:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var s=n(68404),a=n(97602);function i(e){const[t,n]=(0,s.useState)(""),i=(0,s.useMemo)((()=>t&&e?(0,a.rZ)(t,e):void 0),[t,e]);return{search:t,setSearch:n,spanFindMatches:i}}},2527:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var s=n(32898),a=n(97602);function i(e){if(!e)return null;let t=1===e.fields.length?e.fields[0].values.get(0):function(e){const t=new s.U(e),n={};for(let e=0;e<t.length;e++){const s=t.get(e);n[s.spanID]||(n[s.spanID]={serviceName:s.serviceName,tags:s.serviceTags})}return{traceID:t.get(0).traceID,processes:n,spans:t.toArray().map(((e,t)=>{var n;const s=[];return e.parentSpanID&&s.push({refType:"CHILD_OF",spanID:e.parentSpanID,traceID:e.traceID}),e.references&&s.push(...e.references.map((e=>Object.assign({refType:"FOLLOWS_FROM"},e)))),Object.assign({},e,{duration:1e3*e.duration,startTime:1e3*e.startTime,processID:e.spanID,flags:0,references:s,logs:(null===(n=e.logs)||void 0===n?void 0:n.map((e=>Object.assign({},e,{timestamp:1e3*e.timestamp}))))||[],dataFrameRowIndex:t})}))}}(e);return(0,a.R1)(t)}},90860:(e,t,n)=>{"use strict";n.d(t,{eX:()=>h,zU:()=>u});var s=n(23067),a=n(31181),i=n(21162),r=n(11848),o=n(88006),l=n(40232),d=n(30592);const c=(0,s.PH)("explore/updateDatasourceInstance");function u(e,t,n){return async(s,r)=>{var u;const h=r().user.orgId,{history:p,instance:g}=await(0,d.r_)(h,{uid:t}),m=r().explore[e].datasourceInstance;if((0,a.ff)("explore_change_ds",{from:(null!=m&&null!==(u=m.meta)&&void 0!==u&&u.mixed?"mixed":null==m?void 0:m.type)||"unknown",to:g.meta.mixed?"mixed":g.type,exploreId:e}),s(c({exploreId:e,datasourceInstance:g,history:p})),null!=n&&n.importQueries){const t=r().explore[e].queries;await s((0,o.GJ)(e,t,m,g))}r().explore[e].isLive&&s((0,l.oz)(e,i.dP.offOption.value)),null!=n&&n.importQueries&&s((0,o.aA)(e))}}const h=(e,t)=>{if(c.match(t)){const{datasourceInstance:n,history:s}=t.payload;return(0,r.RZ)(e.querySubscription),Object.assign({},e,{datasourceInstance:n,graphResult:null,tableResult:null,logsResult:null,logsVolumeDataProvider:void 0,logsVolumeData:void 0,queryResponse:(0,d.lp)(),loading:!1,queryKeys:[],history:s,datasourceMissing:!1})}return e}},54124:(e,t,n)=>{"use strict";n.d(t,{CK:()=>w,Om:()=>j,Rl:()=>y,iz:()=>S,km:()=>f,qN:()=>b});var s=n(23067),a=n(82897),i=n(8910),r=n(11848),o=n(67040),l=n(90860),d=n(97526),c=n(25822),u=n(88006),h=n(40232),p=n(30592);const g=(0,s.PH)("explore/changeSize"),m=(0,s.PH)("explore/changePanels");function f(e,t,n){return async(s,a)=>{const i=a().explore[e];if(void 0===i)return;const{panelsState:r}=i;s(m({exploreId:e,panelsState:Object.assign({},r,{[t]:n})})),s((0,c.og)())}}const v=(0,s.PH)("explore/initializeExplore");(0,s.PH)("explore/setUrlReplaced");function b(e,t){let{height:n,width:s}=t;return g({exploreId:e,height:n,width:s})}const x=(0,s.PH)("explore/changeGraphStyle");function y(e,t){return async(n,s)=>{(0,p.FG)(t),n(x({exploreId:e,graphStyle:t}))}}function w(e,t,n,s,a,r,o){return async(l,d)=>{let c,g=[];if((0,i.F)().getList().length>=1){const e=d().user.orgId,n=await(0,p.r_)(e,t);c=n.instance,g=n.history}l(v({exploreId:e,containerWidth:a,eventBridge:r,queries:n,range:s,datasourceInstance:c,history:g})),void 0!==o&&l(m({exploreId:e,panelsState:o})),l((0,h.b3)({exploreId:e})),c&&l((0,u.aA)(e,{replaceUrl:!0}))}}function j(e,t){return async(n,s)=>{const a=s().explore[e];if(null==a||!a.initialized)return;const i=(0,r.J5)(t),l=C(i,(0,p.D)(a)),{containerWidth:d,eventBridge:c}=a,{datasource:g,queries:f,range:v,panelsState:b}=i,x=[];for(let e=0;e<f.length;e++){const t=f[e];x.push((0,r.fR)(t,x,e))}const y=(0,o.Z)(s().user),j=(0,o.i)(s().user),S=(0,r.vP)(v,y,j);if(l.datasource){const t=await(0,r.Z8)(f);await n(w(e,g,t,S,d,c,b))}else l.range&&n((0,h.b3)({exploreId:e,rawRange:S.raw})),l.queries&&n((0,u.SE)({exploreId:e,queries:x})),l.panelsState&&void 0!==b&&n(m({exploreId:e,panelsState:b})),(l.queries||l.range)&&n((0,u.aA)(e))}}const S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.t5)(),t=arguments.length>1?arguments[1]:void 0;if(e=(0,u.Y)(e,t),e=(0,l.eX)(e,t),e=(0,h.ok)(e,t),e=(0,d.Oo)(e,t),c.ZU.match(t)){const{richHistory:n,total:s}=t.payload.richHistoryResults;return Object.assign({},e,{richHistory:n,richHistoryTotal:s})}if(c.Zy.match(t)){const n=t.payload.filters;return Object.assign({},e,{richHistorySearchFilters:n})}if(g.match(t)){const n=t.payload.width;return Object.assign({},e,{containerWidth:n})}if(x.match(t)){const{graphStyle:n}=t.payload;return Object.assign({},e,{graphStyle:n})}if(m.match(t)){const{panelsState:n}=t.payload;return Object.assign({},e,{panelsState:n})}if(v.match(t)){const{containerWidth:n,eventBridge:s,queries:a,range:i,datasourceInstance:o,history:l}=t.payload;return Object.assign({},e,{containerWidth:n,eventBridge:s,range:i,queries:a,initialized:!0,queryKeys:(0,r.$$)(a),datasourceInstance:o,history:l,datasourceMissing:!o,queryResponse:(0,p.lp)(),cache:[]})}return e},C=(e,t)=>({datasource:!(0,a.isEqual)(null==t?void 0:t.datasource,null==e?void 0:e.datasource),queries:!(0,a.isEqual)(null==t?void 0:t.queries,null==e?void 0:e.queries),range:!(0,a.isEqual)((null==t?void 0:t.range)||r.UI,(null==e?void 0:e.range)||r.UI),panelsState:!(0,a.isEqual)(null==t?void 0:t.panelsState,null==e?void 0:e.panelsState)})},97526:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>j,Ff:()=>v,KZ:()=>k,NV:()=>b,Oo:()=>N,TV:()=>y,WY:()=>m,ch:()=>C,ev:()=>f,fM:()=>h,ik:()=>x,io:()=>w,sO:()=>S});var s=n(23067),a=n(65737),i=n(93250),r=n(98771),o=n(78130),l=n(36501),d=n(64850),c=n(83821),u=n(25822);const h=(0,s.PH)("explore/historyUpdated"),p=e=>{let{updatedQuery:t,deletedId:n}=e;return async(e,s)=>{g(s().explore,((s,a)=>{const i=s.richHistory.map((e=>e.id===(null==t?void 0:t.id)?t:e)).filter((e=>e.id!==n)),r=s.richHistory.length-i.length;e((0,u.ZU)({richHistoryResults:{richHistory:i,total:s.richHistoryTotal-r},exploreId:a}))}))}},g=(e,t)=>{t(e.left,d.Kd.left),e.right&&t(e.right,d.Kd.right)},m=(e,t,n)=>async(s,a)=>{const{richHistoryStorageFull:i,limitExceeded:r}=await(0,l.au)(e,t,n,!1,"",!a().explore.richHistoryStorageFull,!a().explore.richHistoryLimitExceededWarningShown);i&&s((0,u.fm)()),r&&s((0,u.QN)())},f=(e,t)=>async(n,s)=>{const a=await(0,l.VI)(e,t);n(p({updatedQuery:a}))},v=(e,t)=>async n=>{const s=await(0,l.gt)(e,t);n(p({updatedQuery:s}))},b=e=>async t=>{const n=await(0,l.y9)(e);t(p({deletedId:n}))},x=()=>async e=>{await(0,l.HK)(),e((0,u.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:d.Kd.left})),e((0,u.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:d.Kd.right}))},y=e=>async(t,n)=>{var s;const a=null===(s=n().explore[e])||void 0===s?void 0:s.richHistorySearchFilters;if(a){const n=await(0,l.ub)(a);t((0,u.ZU)({richHistoryResults:n,exploreId:e}))}},w=e=>async(t,n)=>{var s,a;const i=null===(s=n().explore[e])||void 0===s?void 0:s.richHistorySearchFilters,r=null===(a=n().explore[e])||void 0===a?void 0:a.richHistory;if(i&&r){const n=Object.assign({},i,{page:((null==i?void 0:i.page)||1)+1}),s=await(0,l.ub)(n),a=[...r,...s.richHistory];t((0,u.Zy)({filters:n,exploreId:e})),t((0,u.ZU)({richHistoryResults:{richHistory:a,total:s.total},exploreId:e}))}},j=e=>async t=>{t((0,u.Zy)({filters:void 0,exploreId:e})),t((0,u.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:e}))},S=()=>async(e,t)=>{const n=o.Z.getBool(r.hO.migrated,!1),s=t().explore.richHistoryMigrationFailed;if(a.v.queryHistoryEnabled&&!n&&!s){const t=await(0,l.rq)();t.status===l.rv.Failed?(e((0,u.CR)()),(0,i.H)(t.error,{explore:{event:"QueryHistoryMigrationFailed"}})):o.Z.set(r.hO.migrated,!0)}let d=t().explore.richHistorySettings;d||(d=await(0,l.di)(),e((0,u.e8)(d)))},C=e=>async t=>{t((0,u.e8)(e)),await(0,l.kg)(e)},k=(e,t)=>async(n,s)=>{await n((0,u.Zy)({exploreId:e,filters:Object.assign({},t)}));const a=s().explore.richHistorySettings;(0,c.X)().lastUsedDataSourcesAvailable&&await n(C(Object.assign({},a,{lastUsedDatasourceFilters:t.datasourceFilters})))},N=(e,t)=>h.match(t)?Object.assign({},e,{history:t.payload.history}):e},25822:(e,t,n)=>{"use strict";n.d(t,{CL:()=>v,CR:()=>g,IS:()=>w,QN:()=>p,WK:()=>b,YV:()=>S,ZP:()=>O,ZU:()=>u,Zy:()=>f,bW:()=>j,e8:()=>m,fm:()=>h,m$:()=>C,og:()=>y,tl:()=>c});var s=n(23067),a=n(274),i=n(80795),r=n(11848),o=n(75334),l=n(54124),d=n(30592);const c=(0,s.PH)("explore/syncTimes"),u=(0,s.PH)("explore/richHistoryUpdated"),h=(0,s.PH)("explore/richHistoryStorageFullAction"),p=(0,s.PH)("explore/richHistoryLimitExceededAction"),g=(0,s.PH)("explore/richHistoryMigrationFailedAction"),m=(0,s.PH)("explore/richHistorySettingsUpdated"),f=(0,s.PH)("explore/richHistorySearchFiltersUpdatedAction"),v=(0,s.PH)("explore/saveCorrelationsAction"),b=(0,s.PH)("explore/resetExplore"),x=(0,s.PH)("explore/splitClose"),y=e=>(t,n)=>{const{left:s,right:r}=n().explore,o={orgId:n().user.orgId.toString()};o.left=(0,a.S)((0,d.D)(s)),o.right=r?(0,a.S)((0,d.D)(r)):null,w.right=o.right,w.left=o.left,i.E1.partial(Object.assign({},o),null==e?void 0:e.replace)},w={},j=e=>async(t,n)=>{const s=n().explore[o.K.left];let r=(0,d.D)(s);e&&(r={datasource:e.datasourceUid,queries:[e.query],range:e.range||s.range,panelsState:e.panelsState});const l=(0,a.S)(r);i.E1.partial({right:l},!0)};function S(e){return(t,n)=>{t(x({itemId:e})),t(y())}}const C=(e,t)=>async n=>{const{getDataSourceSrv:s,getTimeSrv:a,getExploreUrl:r,openInNewWindow:o}=t,l=s(),d=await r({panel:e,datasourceSrv:l,timeSrv:a()});o&&d?o(d):i.E1.push(d)},k=(0,d.t5)(),N={syncedTimes:!1,left:k,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1},O={explore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;if(x.match(t)){const{itemId:n}=t.payload,s={left:n===o.K.left?e.right:e.left,right:void 0};return Object.assign({},e,s)}if(v.match(t))return Object.assign({},e,{correlations:t.payload});if(c.match(t))return Object.assign({},e,{syncedTimes:t.payload.syncedTimes});if(h.match(t))return Object.assign({},e,{richHistoryStorageFull:!0});if(p.match(t))return Object.assign({},e,{richHistoryLimitExceededWarningShown:!0});if(g.match(t))return Object.assign({},e,{richHistoryMigrationFailed:!0});if(b.match(t)){const t=e[o.K.left],n=e[o.K.right];return(0,r.RZ)(t.querySubscription),n&&(0,r.RZ)(n.querySubscription),Object.assign({},N,{left:Object.assign({},k,{queries:e.left.queries})})}if(m.match(t)){const n=t.payload;return Object.assign({},e,{richHistorySettings:n})}if(t.payload){const{exploreId:n}=t.payload;if(void 0!==n){const s=e[n];return Object.assign({},e,{[n]:(0,l.iz)(s,t)})}}return e}}},88006:(e,t,n)=>{"use strict";n.d(t,{CS:()=>he,K8:()=>ye,ci:()=>pe,PM:()=>Q,LK:()=>we,GJ:()=>me,QH:()=>je,sK:()=>fe,Y:()=>Ce,aA:()=>ve,EA:()=>xe,P4:()=>de,t0:()=>Se,sQ:()=>oe,KO:()=>be,SE:()=>ie});var s=n(23067),a=n(10322),i=n.n(a),r=n(82897),o=n(86680),l=n(53786),d=n(89973),c=n(46060),u=n(98356),h=n(95027),p=n(28173),g=n(84403),m=n(94575),f=n(23214),v=n(94025),b=n(68633),x=n(65737),y=n(8910),w=n(31181),j=n(11848),S=n(22342),C=n(67040),k=n(31135),N=n(63454),O=n(75334),I=n(93686),T=n(47900),$=n(8343),R=n(2101),P=n(64517),D=n(43917),A=n(27843),M=n(57322);const L=(e,t)=>{e.fields.forEach((e=>{t.map((t=>{var n,s;(null===(n=t.config)||void 0===n?void 0:n.field)===e.name&&(e.config.links=e.config.links||[],e.config.links.push({internal:{query:null===(s=t.config)||void 0===s?void 0:s.target,datasourceUid:t.target.uid,datasourceName:t.target.name},url:"",title:t.label||t.target.name}))}))}))};var F=n(97281);const E=e=>{var t;const n=[],s=[],a=[],i=[],r=[],o=[];for(const l of e.series)switch(null===(t=l.meta)||void 0===t?void 0:t.preferredVisualisationType){case"logs":a.push(l);break;case"graph":n.push(l);break;case"trace":i.push(l);break;case"table":s.push(l);break;case"nodeGraph":r.push(l);break;case"flamegraph":x.v.featureToggles.flameGraph?o.push(l):s.push(l);break;default:W(l)?(n.push(l),s.push(l)):s.push(l)}return Object.assign({},e,{graphFrames:n,tableFrames:s,logsFrames:a,traceFrames:i,nodeGraphFrames:r,flameGraphFrames:o,graphResult:null,tableResult:null,logsResult:null})},V=e=>{let{queries:t,correlations:n}=e;return e=>{if(null!=t&&t.length&&null!=n&&n.length){const s=(0,r.mapValues)((0,r.groupBy)(t,"refId"),"0.datasource.uid");((e,t,n)=>{e.forEach((e=>{const s=e.refId;if(!s)return;const a=n[s],i=t.filter((e=>e.source.uid===a));L(e,i)}))})(e.series,n,s)}return e}},z=e=>e.graphFrames.length?Object.assign({},e,{graphResult:e.graphFrames}):Object.assign({},e,{graphResult:null}),B=e=>{if(0===e.tableFrames.length)return(0,l.of)(Object.assign({},e,{tableResult:null}));e.tableFrames.sort(((e,t)=>{const n=e.refId,s=t.refId;return n>s?1:n<s?-1:0}));return(e.tableFrames.every((e=>W(e)))?(0,l.of)(e.tableFrames).pipe(P.Y.joinByFieldTransformer.operator({})):(0,l.of)(e.tableFrames).pipe(P.Y.mergeTransformer.operator({}))).pipe((0,R.U)((t=>{for(const i of t)for(const t of i.fields){var n,s,a;t.display=null!==(n=t.display)&&void 0!==n?n:(0,D.U)({field:t,theme:x.v.theme2,timeZone:null!==(s=null===(a=e.request)||void 0===a?void 0:a.timezone)&&void 0!==s?s:"browser"})}return Object.assign({},e,{tableResult:t})})))};function _(e,t,n,s,a,i,r){return(0,l.of)(e).pipe((0,R.U)((e=>(0,$.zR)(e,t))),(0,R.U)(V({queries:a,correlations:i})),(0,R.U)(E),(0,R.U)(z),(0,R.U)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{var n;if(0===t.logsFrames.length)return Object.assign({},t,{logsResult:null});const s=null===(n=t.request)||void 0===n?void 0:n.intervalMs,a=(0,M.aB)(t.logsFrames,s,e.absoluteRange,e.queries),i=(0,j.Oy)(e.refreshInterval),r=(0,F.j0)(a,i),o=r.rows,l=e.fullRangeLogsVolumeAvailable?void 0:r.series,d=Object.assign({},r,{rows:o,series:l});return Object.assign({},t,{logsResult:d})}}({absoluteRange:n,refreshInterval:s,queries:a,fullRangeLogsVolumeAvailable:r})),(0,u.z)(B))}function W(e){var t;const n=(0,r.groupBy)(e.fields,(e=>e.type));return Boolean(2===Object.keys(n).length&&1===(null===(t=n[A.fS.time])||void 0===t?void 0:t.length)&&n[A.fS.number])}var U=n(97526),H=n(25822),q=n(40232),Z=n(30592);const G=(0,s.PH)("explore/addQueryRow"),Q=(0,s.PH)("explore/changeQueries"),K=(0,s.PH)("explore/cancelQueries"),J=(0,s.PH)("explore/queriesImported"),Y=(0,s.PH)("explore/queryStoreSubscription"),X=(0,s.PH)("explore/setLogsVolumeEnabledAction"),ee=(0,s.PH)("explore/storeLogsVolumeDataProviderAction"),te=(0,s.PH)("explore/cleanLogsVolumeAction"),ne=(0,s.PH)("explore/storeLogsVolumeDataSubscriptionAction"),se=(0,s.PH)("explore/updateLogsVolumeDataAction"),ae=(0,s.PH)("explore/queryStreamUpdated"),ie=(0,s.PH)("explore/setQueries"),re=(0,s.PH)("changeLoadingState"),oe=(0,s.PH)("explore/setPausedState"),le=(0,s.PH)("explore/scanStart"),de=(0,s.PH)("explore/scanStop"),ce=(0,s.PH)("explore/addResultsToCache"),ue=(0,s.PH)("explore/clearCache");function he(e,t){return async(n,s)=>{var a;const i=s().explore[e].queries;let r;if(0===i.length){const t=s().explore[e].datasourceInstance;x.v.featureToggles.exploreMixedDatasource&&null!=t&&t.meta.mixed||(r=t)}const o=await(0,j.Xk)(i,t,null===(a=r)||void 0===a?void 0:a.getRef());n(G({exploreId:e,index:t,query:o}))}}function pe(e){return(t,n)=>{var s;t(de({exploreId:e})),t(K({exploreId:e})),t(ee({exploreId:e,logsVolumeDataProvider:void 0})),(null===(s=n().explore[e].logsVolumeData)||void 0===s?void 0:s.state)!==p.Gu.Done&&t(te({exploreId:e})),t((0,H.og)())}}const ge=async(e,t,n)=>{var s,a;let i=[];if((null===(s=t.meta)||void 0===s?void 0:s.id)===(null===(a=e.meta)||void 0===a?void 0:a.id))i=n;else if((0,g.p)(t)&&(0,g.CZ)(e)){const s=await t.exportToAbstractQueries(n);i=await e.importFromAbstractQueries(s)}else e.importQueries&&(i=await e.importQueries(n,t));return((e,t)=>{const n=e.getRef();return t.map((e=>Object.assign({},e,{datasource:n})))})(e,i)},me=(e,t,n,s,a)=>async i=>{if(!n)return void i(J({exploreId:e,queries:t}));let o=t;if(s.uid===k.D)o=t.map((e=>Object.assign({},e,{datasource:n.getRef()})));else if(n.uid===k.D){const e=(0,r.groupBy)(t,(e=>{var t;return null===(t=e.datasource)||void 0===t?void 0:t.uid})),n=await Promise.all(Object.keys(e).map((async t=>{const n=await(0,y.F)().get({uid:t});return await ge(s,n,e[t])})));o=(0,r.flatten)(n.filter((e=>e.length>0)))}else{let e=t;if(void 0!==a){const n=t.find((e=>e.refId===a));n&&(e=[n])}o=await ge(s,n,e)}let l=await(0,j.Z8)(o,s.getRef());if(void 0!==a){if(0===o.length){o=[await(0,j.Xk)([],void 0,s.getRef())]}const e=t.findIndex((e=>e.refId===a)),n=Object.assign({},l[0],{refId:t[e].refId});l=[...t],l[e]=n}i(J({exploreId:e,queries:l}))};function fe(e,t,n){return async(s,a)=>{const i=a().explore[e],{queries:r}=i,o=await Promise.all(r.map((e=>n(Object.assign({},e),t)))),l=o.map(((e,t)=>(0,j.fR)(e,r,t)));s(ie({exploreId:e,queries:l})),t.preventSubmit||s(ve(e))}}const ve=(e,t)=>(n,s)=>{n((0,q.b3)({exploreId:e}));const a=ke();!0===(null==t?void 0:t.preserveCache)||n(we(e));const r=s().explore[e],{datasourceInstance:c,containerWidth:g,isLive:f,range:v,scanning:b,queryResponse:x,querySubscription:y,refreshInterval:k,absoluteRange:N,cache:R,logsVolumeEnabled:P}=r;let D;const A=r.queries.map((e=>Object.assign({},e,{datasource:e.datasource||(null==c?void 0:c.getRef())})));null!=c&&async function(e,t,n,s,a,i){const r=s.meta.id,o=(0,j._Q)(n,r,a);e((0,U.fM)({exploreId:i,history:o})),e((0,U.WY)(s.uid,s.name,a)),await e((0,U.TV)(O.K.left)),await e((0,U.TV)(O.K.right))}(n,s().explore,r.history,c,A,e),n((0,H.og)({replace:null==t?void 0:t.replaceUrl}));const M=(0,Z.M0)(R,N);if(M)D=(0,o.a)([(0,l.of)(M),a]).pipe((0,u.z)((e=>{let[t,n]=e;return _(t,x,N,k,A,n,null!=c&&(0,m.O)(c))}))).subscribe((t=>{t.error||n((0,H.og)()),n(ae({exploreId:e,response:t}))}));else{if(!(0,j.z_)(A))return void n((0,H.og)({replace:null==t?void 0:t.replaceUrl}));if(!c)return;const r=null==c?void 0:c.interval;(0,j.RZ)(y);const l={minInterval:r,maxDataPoints:g,liveStreaming:f},O=(0,C.Z)(s().user),R=(0,j.Zf)(e,A,l,v,b,O);if(n(re({exploreId:e,loadingState:p.Gu.Loading})),D=(0,o.a)([(0,$.v7)(c,R.request).pipe(f?(0,h.p)(500):d.y),a]).pipe((0,u.z)((e=>{let[t,n]=e;return _(t,x,N,k,A,n,null!=c&&(0,m.O)(c))}))).subscribe({next(t){if(null!==t.logsResult&&(0,w.ff)("grafana_explore_logs_result_displayed",{datasourceType:c.type}),n(ae({exploreId:e,response:t})),s().explore[e].scanning)if(t.state===p.Gu.Done&&0===t.series.length){const t=(0,S.e)(-1,s().explore[e].range);n((0,q.b3)({exploreId:e,absoluteRange:t})),n(ve(e))}else n(de({exploreId:e}))},error(t){n((0,I.$l)((0,T.t_)("Query processing error",t))),n(re({exploreId:e,loadingState:p.Gu.Error})),console.error(t)},complete(){s().explore[e].queryResponse.state===p.Gu.Loading&&n(re({exploreId:e,loadingState:p.Gu.Done}))}}),f)n(ee({exploreId:e,logsVolumeDataProvider:void 0})),n(te({exploreId:e}));else if((0,m.O)(c)){const t=Object.assign({},R.request,{requestId:R.request.requestId+"_log_volume"}),a=c.getLogsVolumeDataProvider(t);n(ee({exploreId:e,logsVolumeDataProvider:a}));const{logsVolumeData:r,absoluteRange:o}=s().explore[e];(function(e,t,n){if(e&&e.data[0]){var s,a,r,o;if(!i()(null===(s=e.data[0].meta)||void 0===s||null===(a=s.custom)||void 0===a?void 0:a.targets,t))return!1;const l=e&&e.data[0]&&(null===(r=e.data[0].meta)||void 0===r||null===(o=r.custom)||void 0===o?void 0:o.absoluteRange);if(l&&l.from<=n.from&&n.to<=l.to)return!0}return!1})(r,A,o)||(n(te({exploreId:e})),P&&n(je(e)))}else n(ee({exploreId:e,logsVolumeDataProvider:void 0}))}n(Y({exploreId:e,querySubscription:D}))};function be(e,t){return(n,s)=>{const a=s().explore[e].queries,i=t.map(((e,t)=>(0,j.fR)(e,a,t)));n(ie({exploreId:e,queries:i})),n(ve(e))}}function xe(e){return(t,n)=>{t(le({exploreId:e}));const s=(0,S.e)(-1,n().explore[e].range);t((0,q.b3)({exploreId:e,absoluteRange:s})),t(ve(e))}}function ye(e){return(t,n)=>{const s=n().explore[e].queryResponse,a=n().explore[e].absoluteRange,i=(0,Z.M7)(a);s.state===p.Gu.Done&&t(ce({exploreId:e,cacheKey:i,queryResponse:s}))}}function we(e){return(t,n)=>{t(ue({exploreId:e}))}}function je(e){return(t,n)=>{const{logsVolumeDataProvider:s}=n().explore[e];if(s){const n=s.subscribe({next:n=>{t(se({exploreId:e,logsVolumeData:n}))}});t(ne({exploreId:e,logsVolumeDataSubscription:n}))}}}function Se(e,t){return(n,s)=>{n(X({exploreId:e,enabled:t})),(0,Z.lP)(t),t&&n(je(e))}}const Ce=(e,t)=>{if(G.match(t)){const{queries:n}=e,{index:s,query:a}=t.payload,i=[...n.slice(0,s+1),Object.assign({},a),...n.slice(s+1)];return Object.assign({},e,{queries:i,queryKeys:(0,j.$$)(i)})}if(Q.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n})}if(K.match(t))return(0,j.RZ)(e.querySubscription),Object.assign({},e,{loading:!1});if(ie.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n.slice(),queryKeys:(0,j.$$)(n)})}if(Y.match(t)){const{querySubscription:n}=t.payload;return Object.assign({},e,{querySubscription:n})}if(X.match(t)){const{enabled:n}=t.payload;return!n&&e.logsVolumeDataSubscription&&e.logsVolumeDataSubscription.unsubscribe(),Object.assign({},e,{logsVolumeEnabled:n,logsVolumeData:void 0})}if(ee.match(t)){let{logsVolumeDataProvider:n}=t.payload;return e.logsVolumeDataSubscription&&e.logsVolumeDataSubscription.unsubscribe(),Object.assign({},e,{logsVolumeDataProvider:n,logsVolumeDataSubscription:void 0})}if(te.match(t))return Object.assign({},e,{logsVolumeData:void 0});if(ne.match(t)){const{logsVolumeDataSubscription:n}=t.payload;return Object.assign({},e,{logsVolumeDataSubscription:n})}if(se.match(t)){let{logsVolumeData:n}=t.payload;return Object.assign({},e,{logsVolumeData:n})}if(ae.match(t))return Ne(e,t);if(J.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n,queryKeys:(0,j.$$)(n)})}if(re.match(t)){const{loadingState:n}=t.payload;return Object.assign({},e,{queryResponse:Object.assign({},e.queryResponse,{state:n}),loading:n===p.Gu.Loading||n===p.Gu.Streaming})}if(oe.match(t)){const{isPaused:n}=t.payload;return Object.assign({},e,{isPaused:n})}if(le.match(t))return Object.assign({},e,{scanning:!0});if(de.match(t))return Object.assign({},e,{scanning:!1,scanRange:void 0});if(ce.match(t)){const n=5,{cache:s}=e,{queryResponse:a,cacheKey:i}=t.payload;let r=[...s];if(!r.some((e=>e.key===i))){r=[{key:i,value:a},...r].slice(0,n)}return Object.assign({},e,{cache:r})}return ue.match(t)?Object.assign({},e,{cache:[]}):e},ke=()=>new c.y((e=>{const t=N.h.getState().explore.correlations;if(t)e.next(t),e.complete();else{const t=N.h.subscribe((()=>{const{correlations:n}=N.h.getState().explore;n&&(t(),e.next(n),e.complete())}))}})),Ne=(e,t)=>{var n,s;const{response:a}=t.payload,{request:i,state:r,series:o,error:l,graphResult:d,logsResult:c,tableResult:u,traceFrames:h,nodeGraphFrames:g,flameGraphFrames:m}=a;if(l){var y,w;if(l.type===f.eA.Timeout)return Object.assign({},e,{queryResponse:a,loading:r===p.Gu.Loading||r===p.Gu.Streaming});if(l.type===f.eA.Cancelled)return e;x.v.angularSupportEnabled&&null!==(y=e.datasourceInstance)&&void 0!==y&&null!==(w=y.components)&&void 0!==w&&w.QueryCtrl&&e.eventBridge.emit(v.Kh.dataError,l)}if(!i)return Object.assign({},e);if(x.v.angularSupportEnabled&&null!==(n=e.datasourceInstance)&&void 0!==n&&null!==(s=n.components)&&void 0!==s&&s.QueryCtrl){const t=o.map((e=>(0,b.Zr)(e)));e.eventBridge.emit(v.Kh.dataReceived,t)}return Object.assign({},e,{queryResponse:a,graphResult:d,tableResult:u,logsResult:c,loading:r===p.Gu.Loading||r===p.Gu.Streaming,showLogs:!!c,showMetrics:!!d,showTable:!(null==u||!u.length),showTrace:!!h.length,showNodeGraph:!!g.length,showFlameGraph:!!m.length})}},40232:(e,t,n)=>{"use strict";n.d(t,{F9:()=>w,b3:()=>x,cD:()=>v,mG:()=>y,ok:()=>j,oz:()=>b});var s=n(23067),a=n(88246),i=n(28173),r=n(2633),o=n(21162),l=n(11848),d=n(97281),c=n(67040),u=n(75334),h=n(53091),p=n(25822),g=n(88006);const m=(0,s.PH)("explore/changeRange"),f=(0,s.PH)("explore/changeRefreshInterval"),v=e=>(t,n)=>{const{syncedTimes:s}=n().explore;s?(t(x(Object.assign({},e,{exploreId:u.K.left}))),t((0,g.aA)(u.K.left,{preserveCache:!0})),t(x(Object.assign({},e,{exploreId:u.K.right}))),t((0,g.aA)(u.K.right,{preserveCache:!0}))):(t(x(Object.assign({},e))),t((0,g.aA)(e.exploreId,{preserveCache:!0})))};function b(e,t){return f({exploreId:e,refreshInterval:t})}const x=e=>(t,n)=>{const{exploreId:s,absoluteRange:i,rawRange:o}=e,d=n().explore[s],u=(0,c.Z)(n().user),p=(0,c.i)(n().user),{range:g}=d;let f=g.raw;i&&(f={from:(0,a.GY)(u,i.from),to:(0,a.GY)(u,i.to)}),o&&(f=o);const b=(0,l.OQ)(u,f,p),x={from:b.from.valueOf(),to:b.to.valueOf()},y={time:b.raw,refresh:!1,timepicker:{},getTimezone:()=>u,timeRangeUpdated:e=>{t(v({exploreId:s,rawRange:e}))}};(0,h.$t)().init(y),(0,r.J)().updateTimeRange((0,h.$t)().timeRange()),t(m({exploreId:s,range:b,absoluteRange:x}))};function y(e){return(t,n)=>{if(e===u.K.left){const e=n().explore.left;t(v({exploreId:u.K.right,rawRange:e.range.raw}))}else{const e=n().explore.right;t(v({exploreId:u.K.left,rawRange:e.range.raw}))}const s=n().explore.syncedTimes;t((0,p.tl)({syncedTimes:!s})),t((0,p.og)())}}function w(){return(e,t)=>{const n=(0,c.Z)(t().user),s=(0,c.i)(t().user),a=t().explore.left,i=(0,l.OQ)(n,a.range.raw,s),r={from:i.from.valueOf(),to:i.to.valueOf()};e(x({exploreId:u.K.left,absoluteRange:r}));const o=t().explore.right;if(o){const t=(0,l.OQ)(n,o.range.raw,s),a={from:t.from.valueOf(),to:t.to.valueOf()};e(x({exploreId:u.K.right,absoluteRange:a}))}e((0,p.og)())}}const j=(e,t)=>{if(f.match(t)){const{refreshInterval:n}=t.payload,s=o.dP.isLive(n),a=(0,l.Oy)(n),r=(0,d.j0)(e.logsResult,a);return o.dP.isLive(e.refreshInterval)&&!s&&(0,l.RZ)(e.querySubscription),Object.assign({},e,{refreshInterval:n,queryResponse:Object.assign({},e.queryResponse,{state:s?i.Gu.Streaming:i.Gu.Done}),isLive:s,isPaused:!s&&e.isPaused,loading:s,logsResult:r})}if(m.match(t)){const{range:n,absoluteRange:s}=t.payload;return Object.assign({},e,{range:n,absoluteRange:s})}return e}},30592:(e,t,n)=>{"use strict";n.d(t,{M7:()=>S,lp:()=>x,M0:()=>C,D:()=>j,r_:()=>y,t5:()=>b,FG:()=>g,lP:()=>v});var s=n(82897),a=n(28173),i=n(12717),r=n(78130),o=n(11848),l=n(42833),d=n(27368),c=n(88246);const u=e=>{let t=e.raw.from;(0,c.v9)(t)&&(t=t.valueOf().toString(10));let n=e.raw.to;return(0,c.v9)(n)&&(n=n.valueOf().toString(10)),{from:t,to:n}},h={from:"now-6h",to:"now"},p="grafana.explore.style.graph",g=e=>{r.Z.set(p,e)},m=()=>{const e=r.Z.get(p);return(0,o.xq)(e)},f=d.h.enableVolumeHistogram,v=e=>{r.Z.set(f,e?"true":"false")},b=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:h},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:x(),tableResult:null,graphResult:null,logsResult:null,eventBridge:null,cache:[],richHistory:[],logsVolumeEnabled:"false"!==r.Z.get(f),logsVolumeDataProvider:void 0,logsVolumeData:void 0,graphStyle:m(),panelsState:{}}),x=()=>({state:a.Gu.NotStarted,series:[],timeRange:(0,i.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],graphResult:null,logsResult:null,tableResult:null});async function y(e,t){var n;let s;try{s=await(0,l.ak)().get(t)}catch(e){s=await(0,l.ak)().get()}if(s.init)try{s.init()}catch(e){console.error(e)}const a=`grafana.explore.history.${null===(n=s.meta)||void 0===n?void 0:n.id}`,i=r.Z.getObject(a,[]);return r.Z.set((0,o.I$)(e),s.uid),{history:i,instance:s}}function w(e){let t=(0,s.mapValues)(e,(e=>(0,s.isObject)(e)?w(e):e));if(t=(0,s.omitBy)(t,s.isEmpty),!(0,s.isEmpty)(t))return t}function j(e){var t;return{datasource:(null===(t=e.datasourceInstance)||void 0===t?void 0:t.uid)||"",queries:e.queries.map(o.uC),range:u(e.range),panelsState:w(e.panelsState)}}function S(e){const t={from:e.from,to:e.to};return Object.entries(t).map((e=>{let[t,n]=e;return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&")}function C(e,t){const n=S(t),s=e.findIndex((e=>e.key===n));return s>=0?e[s].value:void 0}},1814:(e,t,n)=>{"use strict";n.d(t,{a:()=>d,u:()=>c});var s=n(68404),a=n(79869),i=n(66827),r=n(2633),o=n(59196),l=n(2417);const d=e=>{const{field:t,vars:n,splitOpenFn:s,range:d,rowIndex:c,dataFrame:u}=e,h=Object.assign({},n||{});if(h.__value={value:{raw:t.values.get(c)},text:"Raw value"},u&&(h.__data={value:{name:u.name,refId:u.refId,fields:(0,a.z)({frame:u,rowIndex:c})},text:"Data"}),t.config.links){const e=[];return o.Vt.hasAccessToExplore()?e.push(...t.config.links):e.push(...t.config.links.filter((e=>!e.internal))),e.map((e=>{if(e.internal)return(0,i._)({link:e,internalLink:e.internal,scopedVars:h,range:d,field:t,onClickFn:s,replaceVariables:(0,r.J)().replace.bind((0,r.J)())});{const n=(e,t)=>(0,r.J)().replace(e,Object.assign({},t,h)),s=(0,l.Bq)().getDataLinkUIModel(e,n,t);return s.title||(s.title=function(e){e.indexOf("://")<0&&(e=`http://${e}`);let t;try{t=new URL(e).hostname}catch(n){t=e}return t}(s.href)),s}}))}return[]};function c(e,t){return(0,s.useCallback)(((n,s)=>n.fields.flatMap((a=>{var i,r;return null!==(i=a.config)&&void 0!==i&&i.links&&null!==(r=a.config)&&void 0!==r&&r.links.length?d({field:a,rowIndex:s,range:e,dataFrame:n,splitOpenFn:t}):[]}))),[e,t])}},27368:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});const s={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",enableVolumeHistogram:"grafana.explore.logs.enableVolumeHistogram"}},91018:(e,t,n)=>{"use strict";n.d(t,{Yq:()=>w,mV:()=>S,bE:()=>j});var s=n(85526),a=n(98356),i=n(15546),r=n(18474),o=n(2633),l=n(8910),d=n(68404),c=n(46889),u=n(70917),h=n(45570),p=n(30296),g=n(55136),m=n(15055),f=n(73410),v=n(52394),b=n(65169),x=n(45916);class y extends r.CK{constructor(e){super(e),this.instanceSettings=e}applyTemplateVariables(e,t){const n=(0,o.J)();return Object.assign({},e,{expression:n.replace(e.expression,t),window:n.replace(e.window,t)})}getCollapsedText(e){return`Expression: ${e.type}`}query(e){let t=e.targets.map((async t=>{const n=await(0,l.F)().get(t.datasource);return n.interpolateVariablesInQueries?null==n?void 0:n.interpolateVariablesInQueries([t],e.scopedVars)[0]:t}));return(0,s.D)(Promise.all(t)).pipe((0,a.z)((t=>super.query(Object.assign({},e,{targets:t})))))}newQuery(e){var t;return Object.assign({refId:"--",datasource:r.hr,type:null!==(t=null==e?void 0:e.type)&&void 0!==t?t:v.Us.math},e)}}const w="-100",j={id:-100,uid:w,name:r.hr.name,type:r.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:i.zV.datasource,name:r.hr.type,id:r.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},S=new y(j);S.meta={id:r.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},S.components={QueryEditor:function(e){var t;const{query:n,queries:s,onRunQuery:a,onChange:i}=e,{getCachedExpression:r,setCachedExpression:o}=function(){const e=(0,d.useRef)({});return{getCachedExpression:(0,d.useCallback)((t=>{switch(t){case v.Us.math:case v.Us.reduce:case v.Us.resample:case v.Us.threshold:return e.current[t];case v.Us.classic:return}}),[]),setCachedExpression:(0,d.useCallback)(((t,n)=>{switch(t){case v.Us.math:e.current.math=n;break;case v.Us.reduce:case v.Us.resample:case v.Us.resample:e.current.reduce=n,e.current.resample=n,e.current.threshold=n}}),[])}}();(0,d.useEffect)((()=>{o(n.type,n.expression)}),[n.expression,n.type,o]);const l=(0,d.useCallback)((e=>{const t=r(e.value),s=(0,b.J)(Object.assign({},n,{type:e.value}));i(Object.assign({},s,{expression:null!=t?t:s.expression}))}),[n,i,r]),y=v._M.find((e=>e.value===n.type));return(0,x.jsxs)("div",{children:[(0,x.jsx)(c._,{label:"Operation",labelWidth:14,children:(0,x.jsx)(u.Ph,{options:v._M,value:y,onChange:l,width:25})}),(()=>{const e=s.filter((e=>n.refId!==e.refId)).map((e=>({value:e.refId,label:e.refId})));switch(n.type){case v.Us.math:return t||(t=(0,x.jsx)(p.Z,{onChange:i,query:n,labelWidth:14,onRunQuery:a}));case v.Us.reduce:return(0,x.jsx)(g.v,{refIds:e,onChange:i,labelWidth:14,query:n});case v.Us.resample:return(0,x.jsx)(m.p,{query:n,labelWidth:14,onChange:i,refIds:e});case v.Us.classic:return(0,x.jsx)(h.I,{onChange:i,query:n,refIds:e});case v.Us.threshold:return(0,x.jsx)(f.M,{onChange:i,query:n,labelWidth:14,refIds:e})}})()]})}}},45570:(e,t,n)=>{"use strict";n.d(t,{I:()=>S});n(68404);var s,a=n(34117),i=n(46889),r=n(8006),o=n(99500),l=n(65169),d=n(52423),c=n(68522),u=n(16755),h=n(41460),p=n(70917),g=n(4645),m=n(50243),f=n(45916);const v=m.Z.reducerTypes.map((e=>({label:e.text,value:e.value}))),b=m.Z.evalOperators.map((e=>({label:e.text,value:e.value}))),x=m.Z.evalFunctions.map((e=>({label:e.text,value:e.value}))),y=e=>{let{condition:t,index:n,onChange:i,onRemoveCondition:l,refIds:y}=e;const j=(0,u.wW)(w),S=(e,n)=>{const s=parseFloat(e.currentTarget.value),a=[...t.evaluator.params];a[n]=s,i(Object.assign({},t,{evaluator:Object.assign({},t.evaluator,{params:a})}))},C=d.css`
    width: 60px;
  `,k=t.evaluator.type===m.$.IsWithinRange||t.evaluator.type===m.$.IsOutsideRange;return(0,f.jsxs)(c.Stack,{direction:"row",children:[(0,f.jsxs)("div",{style:{flex:1},children:[(0,f.jsxs)(a.Z,{children:[0===n?(0,f.jsx)("div",{className:(0,d.cx)(j.button,C),children:"WHEN"}):(0,f.jsx)(h.d,{className:(0,d.cx)(j.buttonSelectText,C),options:b,onChange:e=>{i(Object.assign({},t,{operator:{type:e.value}}))},value:b.find((e=>e.value===t.operator.type))}),(0,f.jsx)(p.Ph,{options:v,onChange:e=>{i(Object.assign({},t,{reducer:{type:e.value,params:[]}}))},width:20,value:v.find((e=>e.value===t.reducer.type))}),(0,f.jsx)("div",{className:j.button,children:"OF"}),(0,f.jsx)(p.Ph,{onChange:e=>{i(Object.assign({},t,{query:{params:[e.value]}}))},options:y,width:"auto",value:y.find((e=>e.value===t.query.params[0]))})]}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(h.d,{className:j.buttonSelectText,options:x,onChange:e=>{i(Object.assign({},t,{evaluator:{params:t.evaluator.params,type:e.value}}))},value:x.find((e=>e.value===t.evaluator.type))}),k?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.I,{type:"number",width:10,onChange:e=>S(e,0),value:t.evaluator.params[0]}),(0,f.jsx)("div",{className:j.button,children:"TO"}),(0,f.jsx)(g.I,{type:"number",width:10,onChange:e=>S(e,1),value:t.evaluator.params[1]})]}):t.evaluator.type!==m.$.HasNoValue?(0,f.jsx)(g.I,{type:"number",width:10,onChange:e=>S(e,0),value:t.evaluator.params[0]}):null]})]}),(0,f.jsx)(r.zx,{variant:"secondary",type:"button",onClick:()=>l(n),children:s||(s=(0,f.jsx)(o.J,{name:"trash-alt"}))})]})},w=e=>{const t=d.css`
    color: ${e.colors.primary.text};
    font-size: ${e.typography.bodySmall.fontSize};
  `;return{buttonSelectText:t,button:(0,d.cx)(d.css`
        display: flex;
        align-items: center;
        border-radius: ${e.shape.borderRadius(1)};
        font-weight: ${e.typography.fontWeightMedium};
        border: 1px solid ${e.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${e.spacing(1)};
        background-color: ${e.colors.background.canvas};
      `,t)}};var j;const S=e=>{var t;let{onChange:n,query:s,refIds:d}=e;const c=e=>{if(s.conditions){const t=s.conditions[e],a=s.conditions.filter((e=>e!==t)).map(((e,t)=>0===t?Object.assign({},e,{operator:{type:"when"}}):e));n(Object.assign({},s,{conditions:a}))}};return(0,f.jsxs)("div",{children:[(0,f.jsx)(a.Z,{children:(0,f.jsx)(i._,{label:"Conditions",labelWidth:14,children:(0,f.jsx)("div",{children:null===(t=s.conditions)||void 0===t?void 0:t.map(((e,t)=>{if(e)return(0,f.jsx)(y,{index:t,condition:e,onChange:e=>((e,t)=>{s.conditions&&n(Object.assign({},s,{conditions:[...s.conditions.slice(0,t),e,...s.conditions.slice(t+1)]}))})(e,t),onRemoveCondition:c,refIds:d},t)}))})})}),(0,f.jsx)(r.zx,{variant:"secondary",type:"button",onClick:()=>{if(s.conditions){var e,t,a;const i=null!==(e=null===(t=s.conditions.at(-1))||void 0===t||null===(a=t.query)||void 0===a?void 0:a.params)&&void 0!==e?e:[],r=Object.assign({},l.R,{query:{params:i}});n(Object.assign({},s,{conditions:s.conditions.length>0?[...s.conditions,r]:[r]}))}},children:j||(j=(0,f.jsx)(o.J,{name:"plus-circle"}))})]})}},30296:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s,a,i,r,o,l,d,c,u,h,p,g,m,f,v=n(52423),b=(n(68404),n(68522)),x=n(16755),y=n(46889),w=n(66946),j=n(99500),S=n(93194),C=n(75928),k=n(45916);const N=e=>{let{labelWidth:t,onChange:n,query:v,onRunQuery:N}=e;const T=(0,x.wW)(I);return(0,k.jsx)(b.Stack,{direction:"row",children:(0,k.jsx)(y._,{label:(0,k.jsx)(w.W,{width:"auto",children:(0,k.jsx)(C.z,{content:(0,k.jsxs)("div",{className:T.documentationContainer,children:[(0,k.jsxs)("header",{className:T.documentationHeader,children:[s||(s=(0,k.jsx)(j.J,{name:"book-open"}))," Math operator"]}),a||(a=(0,k.jsxs)("div",{children:["Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",(0,k.jsx)("br",{}),"Example: ",(0,k.jsx)("code",{children:"$A + $B"})]})),(0,k.jsx)("header",{className:T.documentationHeader,children:"Available Math functions"}),(0,k.jsxs)("div",{className:T.documentationFunctions,children:[i||(i=(0,k.jsx)(O,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"})),r||(r=(0,k.jsx)(O,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."})),o||(o=(0,k.jsx)(O,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."})),l||(l=(0,k.jsx)(O,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."})),d||(d=(0,k.jsx)(O,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."})),c||(c=(0,k.jsx)(O,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"})),u||(u=(0,k.jsx)(O,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."})),h||(h=(0,k.jsx)(O,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."})),p||(p=(0,k.jsx)(O,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."})),g||(g=(0,k.jsx)(O,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))]}),(0,k.jsxs)("div",{children:["See our additional documentation on"," ",(0,k.jsxs)("a",{className:T.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer",children:[m||(m=(0,k.jsx)(j.J,{size:"xs",name:"external-link-alt"}))," Math expressions"]}),"."]})]}),children:f||(f=(0,k.jsxs)("span",{children:["Expression ",(0,k.jsx)(j.J,{name:"info-circle"})]}))})}),labelWidth:t,grow:!0,shrink:!0,children:(0,k.jsx)(S.K,{value:v.expression,onChange:e=>{n(Object.assign({},v,{expression:e.target.value}))},rows:1,placeholder:"Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",onBlur:()=>{v.expression&&N()},style:{minWidth:250,lineHeight:"26px",minHeight:32}})})})},O=e=>{let{name:t,description:n}=e;const s=(0,x.wW)(T);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:s.name,children:t}),(0,k.jsx)("span",{className:s.description,children:n})]})},I=e=>({documentationHeader:v.css`
    font-size: ${e.typography.h5.fontSize};
    font-weight: ${e.typography.h5.fontWeight};
  `,documentationLink:v.css`
    color: ${e.colors.text.link};
  `,documentationContainer:v.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${e.spacing(2)};

    padding: ${e.spacing(1)} ${e.spacing(2)};
  `,documentationFunctions:v.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${e.spacing(2)};
  `}),T=e=>({name:v.css`
    font-weight: ${e.typography.fontWeightBold};
  `,description:v.css`
    font-size: ${e.typography.bodySmall.fontSize};
    color: ${e.colors.text.disabled};
  `})},55136:(e,t,n)=>{"use strict";n.d(t,{v:()=>d});n(68404);var s=n(46889),a=n(4645),i=n(34117),r=n(70917),o=n(52394),l=n(45916);const d=e=>{var t,n;let{labelWidth:d="auto",onChange:c,refIds:u,query:h}=e;const p=o.SQ.find((e=>e.value===h.reducer)),g=e=>{c(Object.assign({},h,{settings:e}))},m=e=>{const t=e.currentTarget.valueAsNumber;g({mode:o.kN.ReplaceNonNumbers,replaceWithValue:null!=t?t:0})},f=null!==(t=null===(n=h.settings)||void 0===n?void 0:n.mode)&&void 0!==t?t:o.kN.Strict;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(s._,{label:"Function",labelWidth:d,children:(0,l.jsx)(r.Ph,{options:o.SQ,value:p,onChange:e=>{c(Object.assign({},h,{reducer:e.value}))},width:20})}),(0,l.jsx)(s._,{label:"Input",labelWidth:d,children:(0,l.jsx)(r.Ph,{onChange:e=>{c(Object.assign({},h,{expression:e.value}))},options:u,value:h.expression,width:"auto"})})]}),(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(s._,{label:"Mode",labelWidth:d,children:(0,l.jsx)(r.Ph,{onChange:e=>{var t;let n;if(e.value===o.kN.ReplaceNonNumbers){let e=0;var s,a;(null===(t=h.settings)||void 0===t?void 0:t.mode)===o.kN.ReplaceNonNumbers&&(e=null!==(s=null===(a=h.settings)||void 0===a?void 0:a.replaceWithValue)&&void 0!==s?s:0),n={mode:o.kN.ReplaceNonNumbers,replaceWithValue:e}}else n={mode:e.value};g(n)},options:o.ev,value:f,width:25})}),(()=>{var e,t;if(f===o.kN.ReplaceNonNumbers)return(0,l.jsx)(s._,{label:"Replace With",labelWidth:d,children:(0,l.jsx)(a.I,{type:"number",width:10,onChange:m,value:null!==(e=null===(t=h.settings)||void 0===t?void 0:t.replaceWithValue)&&void 0!==e?e:0})})})()]})]})}},15055:(e,t,n)=>{"use strict";n.d(t,{p:()=>d});n(68404);var s=n(34117),a=n(46889),i=n(70917),r=n(4645),o=n(52394),l=n(45916);const d=e=>{let{labelWidth:t="auto",onChange:n,refIds:d,query:c}=e;const u=o.Fr.find((e=>e.value===c.downsampler)),h=o.r8.find((e=>e.value===c.upsampler));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z,{children:(0,l.jsx)(a._,{label:"Input",labelWidth:t,children:(0,l.jsx)(i.Ph,{onChange:e=>{n(Object.assign({},c,{expression:e.value}))},options:d,value:c.expression,width:20})})}),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(a._,{label:"Resample to",labelWidth:t,tooltip:"10s, 1m, 30m, 1h",children:(0,l.jsx)(r.I,{onChange:e=>{n(Object.assign({},c,{window:e.target.value}))},value:c.window,width:15})}),(0,l.jsx)(a._,{label:"Downsample",children:(0,l.jsx)(i.Ph,{options:o.Fr,value:u,onChange:e=>{n(Object.assign({},c,{downsampler:e.value}))},width:25})}),(0,l.jsx)(a._,{label:"Upsample",children:(0,l.jsx)(i.Ph,{options:o.r8,value:h,onChange:e=>{n(Object.assign({},c,{upsampler:e.value}))},width:25})})]})]})}},73410:(e,t,n)=>{"use strict";n.d(t,{M:()=>g});var s=n(52423),a=(n(68404),n(16755)),i=n(34117),r=n(46889),o=n(70917),l=n(41460),d=n(4645),c=n(50243),u=n(52394),h=n(45916);const p=c.$.IsAbove,g=e=>{var t;let{labelWidth:n,onChange:s,refIds:g,query:v}=e;const b=(0,a.wW)(f),x={type:"query",evaluator:{type:p,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},y=null!==(t=v.conditions)&&void 0!==t&&t.length?v.conditions:[x],w=y[0],j=u.Mi.find((e=>{var t;return e.value===(null===(t=y[0].evaluator)||void 0===t?void 0:t.type)})),S=(e,t)=>{const n=parseFloat(e.currentTarget.value),a=[...w.evaluator.params];a[t]=n,s(Object.assign({},v,{conditions:m(y,{params:a})}))},C=w.evaluator.type===c.$.IsWithinRange||w.evaluator.type===c.$.IsOutsideRange;return(0,h.jsxs)(i.Z,{children:[(0,h.jsx)(r._,{label:"Input",labelWidth:n,children:(0,h.jsx)(o.Ph,{onChange:e=>{s(Object.assign({},v,{expression:e.value}))},options:g,value:v.expression,width:20})}),(0,h.jsx)(l.d,{className:b.buttonSelectText,options:u.Mi,onChange:e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:p;s(Object.assign({},v,{conditions:m(y,{type:n})}))},value:j}),C?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.I,{type:"number",width:10,onChange:e=>S(e,0),defaultValue:w.evaluator.params[0]}),(0,h.jsx)("div",{className:b.button,children:"TO"}),(0,h.jsx)(d.I,{type:"number",width:10,onChange:e=>S(e,1),defaultValue:w.evaluator.params[1]})]}):(0,h.jsx)(d.I,{type:"number",width:10,onChange:e=>S(e,0),defaultValue:y[0].evaluator.params[0]||0})]})};function m(e,t){return[Object.assign({},e[0],{evaluator:Object.assign({},e[0].evaluator,t)})]}const f=e=>({buttonSelectText:s.css`
    color: ${e.colors.primary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:s.css`
    height: 32px;

    color: ${e.colors.primary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${e.shape.borderRadius(1)};
    font-weight: ${e.typography.fontWeightBold};
    border: 1px solid ${e.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${e.spacing(1)};
    background-color: ${e.colors.background.primary};
  `})},52394:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>c,Mi:()=>h,SQ:()=>o,Us:()=>i,_M:()=>r,ev:()=>d,kN:()=>l,r8:()=>u});var s=n(34784),a=n(50243);let i;!function(e){e.math="math",e.reduce="reduce",e.resample="resample",e.classic="classic_conditions",e.threshold="threshold"}(i||(i={}));const r=[{value:i.math,label:"Math",description:"Free-form math formulas on time series or number data."},{value:i.reduce,label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:i.resample,label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:i.classic,label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:i.threshold,label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],o=[{value:s.gz.min,label:"Min",description:"Get the minimum value"},{value:s.gz.max,label:"Max",description:"Get the maximum value"},{value:s.gz.mean,label:"Mean",description:"Get the average value"},{value:s.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:s.gz.count,label:"Count",description:"Get the number of values"},{value:s.gz.last,label:"Last",description:"Get the last value"}];let l;!function(e){e.Strict="",e.ReplaceNonNumbers="replaceNN",e.DropNonNumbers="dropNN"}(l||(l={}));const d=[{value:l.Strict,label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:l.DropNonNumbers,label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:l.ReplaceNonNumbers,label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],c=[{value:s.gz.last,label:"Last",description:"Fill with the last value"},{value:s.gz.min,label:"Min",description:"Fill with the minimum value"},{value:s.gz.max,label:"Max",description:"Fill with the maximum value"},{value:s.gz.mean,label:"Mean",description:"Fill with the average value"},{value:s.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],u=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],h=[{value:a.$.IsAbove,label:"Is above"},{value:a.$.IsBelow,label:"Is below"},{value:a.$.IsWithinRange,label:"Is within range"},{value:a.$.IsOutsideRange,label:"Is outside range"}]},65169:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,R:()=>o});var s=n(34784),a=n(50243),i=n(52394);const r=e=>{switch(e.type){case i.Us.reduce:e.reducer||(e.reducer=s.gz.mean);break;case i.Us.resample:e.downsampler||(e.downsampler=s.gz.mean),e.upsampler||(e.upsampler="fillna"),e.reducer=void 0;break;case i.Us.math:e.expression=void 0;break;case i.Us.classic:e.conditions||(e.conditions=[o]);break;default:e.reducer=void 0}return e},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.$.IsAbove}}},41120:(e,t,n)=>{"use strict";n.d(t,{Go:()=>m,J6:()=>v,OD:()=>g,Pb:()=>p,Uk:()=>y,W7:()=>j,a:()=>f,pz:()=>w,v7:()=>x});var s=n(3363),a=n(36298),i=n(80795),r=n(93570),o=n(93686),l=n(47900),d=n(68374),c=n(42200),u=n(83146),h=n(5404);function p(e){return async t=>{const n=await c.ae.getFolderByUid(e);t((0,h.G3)(n)),t((0,o.RL)((0,u.B)(n)))}}function g(e){return async t=>{const n=await c.ae.put(`/api/folders/${e.uid}`,{title:e.title,version:e.version});t((0,o.$l)((0,l.AT)("Folder saved"))),i.E1.push(`${n.url}/settings`)}}function m(e){return async()=>{await c.ae.delete(`/api/folders/${e}?forceDeleteRules=false`),i.E1.push("/dashboards")}}function f(e){return async t=>{const n=await c.ae.get(`/api/folders/${e}/permissions`);t((0,h.R7)(n))}}function v(e){return async t=>{try{await(0,s.n)(c.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${e}/permissions`})),t((0,h.$$)(!0))}catch(e){var n;if((0,r.kW)(e)&&403!==e.status)t((0,o.$l)((0,l.ZR)("Error checking folder permissions",null===(n=e.data)||void 0===n?void 0:n.message)));t((0,h.$$)(!1))}}}function b(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function x(e,t){return async(n,s)=>{const a=s().folder,i=[];for(const n of a.permissions){if(n.inherited)continue;const s=b(n);e===n&&(s.permission=t),i.push(s)}await c.ae.post(`/api/folders/${a.uid}/permissions`,{items:i}),await n(f(a.uid))}}function y(e){return async(t,n)=>{const s=n().folder,a=[];for(const t of s.permissions)t.inherited||t===e||a.push(b(t));await c.ae.post(`/api/folders/${s.uid}/permissions`,{items:a}),await t(f(s.uid))}}function w(e){return async(t,n)=>{const s=n().folder,a=[];for(const e of s.permissions)e.inherited||a.push(b(e));a.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),await c.ae.post(`/api/folders/${s.uid}/permissions`,{items:a}),await t(f(s.uid))}}function j(e){return async t=>{const n=await(0,r.i)().post("/api/folders",{title:e});await d.Vt.fetchUserPermissions(),t((0,o.$l)((0,l.AT)("Folder Created","OK"))),i.E1.push(a.u.stripBaseFromUrl(n.url))}}},83146:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,_:()=>o});var s=n(65737),a=n(59196),i=n(64850);function r(e){const t={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${e.uid}`,text:"Dashboards",url:e.url}]};return t.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${e.uid}`,text:"Panels",url:`${e.url}/library-panels`}),a.Vt.hasPermission(i.bW.AlertingRuleRead)&&s.v.unifiedAlertingEnabled&&t.children.push({active:!1,icon:"bell",id:`folder-alerting-${e.uid}`,text:"Alert rules",url:`${e.url}/alerting`}),e.canAdmin&&t.children.push({active:!1,icon:"lock",id:`folder-permissions-${e.uid}`,text:"Permissions",url:`${e.url}/permissions`}),e.canSave&&t.children.push({active:!1,icon:"cog",id:`folder-settings-${e.uid}`,text:"Settings",url:`${e.url}/settings`}),t}function o(e){const t=r({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return t.children[e].active=!0,{main:t,node:t.children[e]}}},5404:(e,t,n)=>{"use strict";n.d(t,{$$:()=>d,G3:()=>o,R7:()=>r,Ss:()=>l,ZP:()=>c});var s=n(23067),a=n(23188);const i=(0,s.oM)({name:"folder",initialState:{id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},reducers:{loadFolder:(e,t)=>Object.assign({},e,t.payload,{hasChanged:!1}),setFolderTitle:(e,t)=>Object.assign({},e,{title:t.payload,hasChanged:t.payload.trim().length>0}),loadFolderPermissions:(e,t)=>Object.assign({},e,{permissions:(0,a.A)(t.payload)}),setCanViewFolderPermissions:(e,t)=>(e.canViewFolderPermissions=t.payload,e)}}),{loadFolderPermissions:r,loadFolder:o,setFolderTitle:l,setCanViewFolderPermissions:d}=i.actions,c={folder:i.reducer}},48819:(e,t,n)=>{"use strict";n.d(t,{Q:()=>h});var s=n(52423),a=n(68404),i=n(16755),r=n(70917),o=n(2843),l=n(50191),d=n(48750),c=n(45916);const u=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:d.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],h=e=>{let{value:t,onChange:n,context:s,item:l}=e;const h=p((0,i.l4)()),[g,m]=(0,a.useState)(),f=l.settings;(0,a.useEffect)((()=>{!async function(){const e=await(0,d.so)(t);m(e)}()}),[t,m]);const{current:v,options:b}=(0,a.useMemo)((()=>{let e=null!=f&&f.options?[...f.options]:[...u],t=null==e?void 0:e.find((e=>e.value===(null==g?void 0:g.path)));return!t&&g&&(t={label:g.path,value:g.path},e.push(t)),{options:e,current:t}}),[g,null==f?void 0:f.options]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Ph,{value:v,options:b,onChange:e=>n(e.value),allowCustomValue:!0,formatCreateLabel:e=>`Load from URL: ${e}`}),g&&(0,c.jsxs)(c.Fragment,{children:[g.error&&(0,c.jsx)(o.b,{title:g.error,severity:"warning"}),g.count&&(0,c.jsxs)("div",{className:h.keys,children:[(0,c.jsxs)("b",{children:["(",g.count,")"]}),g.examples(10).map((e=>(0,c.jsxs)("span",{children:[e,","]},e))),g.count>10&&" ..."]})]})]})},p=(0,l.B)((e=>({keys:s.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `})))},85995:(e,t,n)=>{"use strict";n.d(t,{C:()=>y});var s,a=n(80622),i=n(27843),r=n(48819),o=n(52423),l=n(68404),d=n(25004),c=n(16755),u=n(2843),h=n(99500),p=n(70917),g=n(54761),m=n(83493),f=n(45916);const v=[{value:a.q.Auto,label:"Auto",ariaLabel:d.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:a.q.Coords,label:"Coords",ariaLabel:d.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:a.q.Geohash,label:"Geohash",ariaLabel:d.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:a.q.Lookup,label:"Lookup",ariaLabel:d.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],b=e=>{let{value:t,onChange:n,context:i,item:r}=e;const[o,d]=(0,l.useState)();(0,l.useEffect)((()=>{var e,t,n;null!==(e=r.settings)&&void 0!==e&&e.source&&null!==(t=r.settings)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.length&&r.settings.data[0]&&(0,m.cJ)(r.settings.source).then((e=>{r.settings&&r.settings.data&&d((0,m.g6)(r.settings.data[0],e))}))}),[r.settings]);const b=(0,c.wW)(x);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Ph,{options:v,value:t,onChange:e=>{n(e.value)}}),(0,f.jsx)(g.Lh,{className:b.hGroup,children:(()=>{if(o){if(o.warning)return(0,f.jsx)(u.b,{title:o.warning,severity:"warning",buttonContent:s||(s=(0,f.jsx)(h.J,{name:"question-circle",size:"xl"})),className:b.alert,onRemove:()=>{const e=window.open("https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location","_blank","noopener,noreferrer");e&&(e.opener=null)}});if(t===a.q.Auto&&o.description)return(0,f.jsx)("span",{children:o.description})}return null})()})]})},x=e=>({alert:o.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:o.css`
      & div {
        width: 100%;
      }
    `});function y(e,t,n,s,o){switch(n.addCustomEditor({id:"modeEditor",path:`${t}mode`,name:"Location Mode",editor:b,settings:{data:o,source:s}}),null==s?void 0:s.mode){case a.q.Coords:n.addFieldNamePicker({path:`${t}latitude`,name:"Latitude field",settings:{filter:e=>e.type===i.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${t}longitude`,name:"Longitude field",settings:{filter:e=>e.type===i.fS.number,noFieldsMessage:"No numeric fields found"}});break;case a.q.Geohash:n.addFieldNamePicker({path:`${t}geohash`,name:"Geohash field",settings:{filter:e=>e.type===i.fS.string,noFieldsMessage:"No strings fields found"}});break;case a.q.Lookup:n.addFieldNamePicker({path:`${t}lookup`,name:"Lookup field",settings:{filter:e=>e.type===i.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${t}gazetteer`,name:"Gazetteer",editor:r.Q})}}},70109:(e,t,n)=>{"use strict";n.d(t,{EK:()=>g,Fh:()=>m,ie:()=>p,uZ:()=>u,zS:()=>h});var s=n(18788),a=n(36597),i=n(54428),r=n(61331),o=n(27843),l=n(94582),d=n(71383);function c(e,t,n){t&n?e[0]=(e[0]+e[1])/2:e[1]=(e[0]+e[1])/2}function u(e){var t;return{name:null!==(t=e.name)&&void 0!==t?t:"Point",type:o.fS.geo,values:new l.G(e.values.toArray().map((e=>{const t=function(e){if(null==e||!e.length)return;const t=[16,8,4,2,1];let n=!0;const s=[],a=[];let i;s[0]=-90,s[1]=90,a[0]=-180,a[1]=180,e.split("").forEach((e=>{i="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(e),t.forEach((e=>{c(n?a:s,i,e),n=!n}))}));const r=(s[0]+s[1])/2;return[(a[0]+a[1])/2,r]}(e);if(t)return new s.Z((0,r.mi)(t))}))),config:f}}function h(e,t){const n=new Array(e.values.length);for(let a=0;a<e.values.length;a++){const i=e.values.get(a),o=t.values.get(a);null!==i&&null!==o&&(n[a]=new s.Z((0,r.mi)([i,o])))}return{name:"Point",type:o.fS.geo,values:new l.G(n),config:f}}function p(e,t){const n=t.values.length,s=new Array(n);for(let i=0;i<n;i++){var a;s[i]=null===(a=e.find(t.values.get(i)))||void 0===a?void 0:a.geometry()}return{name:"Geometry",type:o.fS.geo,values:new l.G(s),config:f}}function g(e,t){const n=e.values.toArray(),s=t.values.toArray();if(!n||!s)throw"missing src/dest";if(n.length!==s.length)throw"Source and destination field lengths do not match";const i=e.values.length,r=new Array(i);for(let e=0;e<i;e++){const t=n[e],i=s[e];t&&i?r[e]=new a.Z([t,i]):t?r[e]=t:i&&(r[e]=i)}return{name:"Geometry",type:o.fS.geo,values:new l.G(r),config:f}}function m(e,t){const n=e.values.toArray(),s=t.values.toArray();if(!n||!s)throw"missing src/dest";if(n.length!==s.length)throw"Source and destination field lengths do not match";const a=e.values.length,r=new Array(a);for(let e=0;e<a;e++){const t=n[e],a=s[e];t&&a&&(r[e]=new i.Z([(0,d.Lb)(t),(0,d.Lb)(a)]))}return{name:"Geometry",type:o.fS.geo,values:new l.G(r),config:f}}const f=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},48750:(e,t,n)=>{"use strict";n.d(t,{LI:()=>m,so:()=>f});var s=n(68208),a=n(18788),i=n(68633),r=n(27843),o=n(93570),l=n(23908),d=n(94582);function c(e){return e.count<1?r.fS.other:e.types.size>1?(e.values=e.values.map((e=>null!=e?`${e}`:e)),r.fS.string):e.types.values().next().value}var u=n(70109),h=n(61331);function p(e,t){let n;if(Array.isArray(t)){const n=t[0];if(n.latitude&&n.longitude&&(n.key||n.keys))return function(e,t){let n=0;const s=new Map;for(const e of t){const t=new a.Z((0,h.mi)([e.longitude,e.latitude])),i={point:()=>t,geometry:()=>t};if(e.name&&(s.set(e.name,i),s.set(e.name.toUpperCase(),i)),e.key&&(s.set(e.key,i),s.set(e.key.toUpperCase(),i)),e.keys)for(const t of e.keys)s.set(t,i),s.set(t.toUpperCase(),i);n++}return{path:e,find:e=>{let t=s.get(e);return t||"string"!=typeof e||(t=s.get(e.toUpperCase())),t},count:n,examples:e=>{const t=[];if(s.size<1)t.push("no values found");else for(const n of s.keys())if(t.push(n),t.length>=e)break;return t}}}(e,t)}else Array.isArray(null==t?void 0:t.features)&&"FeatureCollection"===(null==t?void 0:t.type)&&(n=function(e){const t=(new l.Z).readFeatures(e,{featureProjection:"EPSG:3857"}),n=t.length,s=new Array(n).fill(null),a=[],o=new Map,u=e=>{let t=o.get(e);return t||(t={types:new Set,values:new Array(n).fill(null),count:0},a.push(e),o.set(e,t)),t},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const e of t)if(!o.has(e))return e;return"___"+t[0]},p={types:new Set,values:new Array(n).fill(null),count:0};for(let e=0;e<n;e++){const n=t[e];s[e]=n.getGeometry();const a=n.getId();null!=a&&(p.values[e]=a,p.types.add((0,i.DP)(a)),p.count++);for(const t of n.getKeys()){const a=n.get(t);if(a===s[e]||null==a)continue;const r=u(t);r.values[e]=a,r.types.add((0,i.DP)(a)),r.count++}}const g=[];if(p.count>0){const e=c(p);g.push({name:h("id","_id","__id"),type:e,values:new d.G(p.values),config:{}})}g.push({name:h("geo","geometry"),type:r.fS.geo,values:new d.G(s),config:{}});for(const e of a){const t=o.get(e);if(!t)continue;const n=c(t);g.push({name:e,type:n,values:new d.G(t.values),config:{}})}return{fields:g,length:n}}(t));if(!n)try{n=(0,i.g0)(t)}catch(t){return{path:e,error:`${t}`,find:e=>{},examples:e=>[]}}return function(e,t){const n=[];let i,o,l,d,c;for(const s of e.fields)if(s.type===r.fS.geo&&(i=s),c||s.type!==r.fS.string||(c=s),s.name){t.keys&&t.keys.includes(s.name)&&n.push(s);const e=s.name.toUpperCase();switch(e){case"LAT":case"LATITUTE":o=s;break;case"LON":case"LNG":case"LONG":case"LONGITUE":l=s;break;case"GEOHASH":d=s;break;case"ID":case"UID":case"KEY":case"CODE":t.keys||n.push(s);break;default:t.keys||(e.endsWith("_ID")||e.endsWith("_CODE"))&&n.push(s)}}!n.length&&c&&n.push(c);let h=!1;i?h="Point"===i.values.get(0).getType():d?(i=(0,u.uZ)(d),h=!0):o&&l&&(i=(0,u.zS)(l,o),h=!0);const p=new Map;return n.forEach((e=>{e.values.toArray().forEach(((e,t)=>{const n=`${e}`;p.set(n.toUpperCase(),t),p.set(n,t)}))})),{path:t.path,find:t=>{const n=p.get(t);if(null!=n){var r;const t=null===(r=i)||void 0===r?void 0:r.values.get(n);return{frame:e,index:n,point:()=>!t||h?t:new a.Z((0,s.qg)(t.getExtent())),geometry:()=>t}}},examples:e=>{const t=[];for(let n of p.keys())if(t.push(n),t.length>e)break;return t},frame:()=>e,count:e.length}}(n,{path:e})}const g={},m="public/gazetteer/countries.json";async function f(e){e||(e=m);let t=g[e];if(!t){try{t=p(e,await(0,o.i)().get(e))}catch(n){console.warn("Error loading placename lookup",e,n),t={path:e,error:"Error loading URL",find:e=>{},examples:e=>[]}}g[e]=t}return t}},83493:(e,t,n)=>{"use strict";n.d(t,{cJ:()=>p,g6:()=>g});var s=n(32934),a=n(80622),i=n(27843),r=n(77401),o=n(31919),l=n(70109),d=n(48750);function c(e){return t=>{for(const n of t.fields)if(e(n,t,[]))return n}}function u(e){return t=>{for(const n of t.fields){if(e.has(n.name.toLowerCase()))return n;const a=(0,s.C)(n,t);if(e.has(a))return n}}}const h={mode:a.q.Auto,geohash:u(new Set(["geohash"])),latitude:u(new Set(["latitude","lat"])),longitude:u(new Set(["longitude","lon","lng"])),h3:u(new Set(["h3"])),wkt:u(new Set(["wkt"])),lookup:u(new Set(["lookup"])),geo:e=>e.fields.find((e=>e.type===i.fS.geo))};async function p(e){var t;const n=Object.assign({},h,{mode:null!==(t=null==e?void 0:e.mode)&&void 0!==t?t:a.q.Auto});switch(n.gazetteer=await(0,d.so)(null==e?void 0:e.gazetteer),n.mode){case a.q.Geohash:null!=e&&e.geohash?n.geohash=c((0,r.sq)({id:o.mi.byName,options:e.geohash})):n.geohash=()=>{};break;case a.q.Lookup:null!=e&&e.lookup?n.lookup=c((0,r.sq)({id:o.mi.byName,options:e.lookup})):n.lookup=()=>{};break;case a.q.Coords:null!=e&&e.latitude?n.latitude=c((0,r.sq)({id:o.mi.byName,options:e.latitude})):n.latitude=()=>{},null!=e&&e.longitude?n.longitude=c((0,r.sq)({id:o.mi.byName,options:e.longitude})):n.longitude=()=>{}}return n}function g(e,t){const n=function(e,t){var n;const s={mode:null!==(n=t.mode)&&void 0!==n?n:a.q.Auto};if(s.mode===a.q.Auto){if(s.geo=t.geo(e),s.geo)return s;if(s.latitude=t.latitude(e),s.longitude=t.longitude(e),s.latitude&&s.longitude)return s.mode=a.q.Coords,s;if(s.geohash=t.geohash(e),s.geohash)return s.mode=a.q.Geohash,s;if(s.lookup=t.lookup(e),s.lookup)return s.mode=a.q.Lookup,s}switch(s.mode){case a.q.Coords:s.latitude=t.latitude(e),s.longitude=t.longitude(e);break;case a.q.Geohash:s.geohash=t.geohash(e);break;case a.q.Lookup:s.lookup=t.lookup(e)}return s}(e,t);switch(n.mode){case a.q.Auto:return n.geo?{field:n.geo}:{warning:"Unable to find location fields"};case a.q.Coords:return n.latitude&&n.longitude?{field:(0,l.zS)(n.longitude,n.latitude),derived:!0,description:`${n.mode}: ${n.latitude.name}, ${n.longitude.name}`}:{warning:"Select latitude/longitude fields"};case a.q.Geohash:return n.geohash?{field:(0,l.uZ)(n.geohash),derived:!0,description:`${n.mode}`}:{warning:"Select geohash field"};case a.q.Lookup:return n.lookup?t.gazetteer?{field:(0,l.ie)(t.gazetteer,n.lookup),derived:!0,description:`${n.mode}: ${t.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},34944:(e,t,n)=>{"use strict";let s;n.d(t,{q:()=>s}),function(e){e.Data="data",e.Meta="meta",e.Error="error",e.Stats="stats",e.JSON="json",e.Query="query",e.Actions="actions",e.Help="help"}(s||(s={}))},61440:(e,t,n)=>{"use strict";n.d(t,{GY:()=>l,MA:()=>o,nW:()=>r});var s=n(93570),a=n(68374),i=n(64850);const r=(0,i.hg)("users/fetchInvitees",(async()=>{if(!a.Vt.hasPermission(i.bW.OrgUsersAdd))return[];return await(0,s.i)().get("/api/org/invites")})),o=(0,i.hg)("users/addInvitee",(async(e,t)=>{let{dispatch:n}=t;await(0,s.i)().post("/api/org/invites",e),await n(r())})),l=(0,i.hg)("users/revokeInvite",(async e=>(await(0,s.i)().patch(`/api/org/invites/${e}/revoke`,{}),e)))},91529:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,wl:()=>r});var s=n(23067),a=n(61440);const i=(0,s.HF)({selectId:e=>e.code}),r=i.getSelectors(),o=i.getInitialState({status:"idle"}),l={invites:(0,s.oM)({name:"invites",initialState:o,reducers:{},extraReducers:e=>{e.addCase(a.nW.pending,(e=>{e.status="loading"})).addCase(a.nW.fulfilled,((e,t)=>{let{payload:n}=t;i.setAll(e,n),e.status="succeeded"})).addCase(a.nW.rejected,(e=>{e.status="failed"})).addCase(a.GY.fulfilled,((e,t)=>{let{payload:n}=t;i.removeOne(e,n),e.status="succeeded"}))}}).reducer}},97019:(e,t,n)=>{"use strict";n.d(t,{T:()=>x,c:()=>y});var s=n(68404),a=n(94255),i=n(66015),r=n(93570),o=n(65678),l=n(4645),d=n(78941),c=n(8006),u=n(33257),h=n(35448),p=n(98865),g=n(40829),m=n(45916);const f=["isOpen","panel","initialFolderId"];var v,b;const x=e=>{let{panel:t,initialFolderId:n,onDismiss:f}=e;const[x,y]=(0,s.useState)(n),[w,j]=(0,s.useState)(t.title),[S,C]=(0,s.useState)(t.title),[k,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>N(!0)),[w]),(0,a.Z)((()=>C(w)),350,[w]);const{saveLibraryPanel:O}=(0,g.E)(),I=(0,s.useCallback)((()=>{t.libraryPanel={uid:"",name:w},O(t,x).then((e=>{e instanceof Error||f()}))}),[t,w,x,f,O]),T=(0,i.Z)((async()=>{try{return!(await(0,p.jh)(w)).some((e=>e.folderId===x))}catch(e){return(0,r.kW)(e)&&(e.isHandled=!0),!0}finally{N(!1)}}),[S,x]),$=!(null!=T&&T.value||void 0===T.value||w!==S||k);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.g,{label:(0,h.t)("library-panel.add-modal.name","Library panel name"),invalid:$,error:$?(0,h.t)("library-panel.add-modal.error","Library panel with this name already exists"):"",children:(0,m.jsx)(l.I,{id:"share-panel-library-panel-name-input",name:"name",value:w,onChange:e=>j(e.currentTarget.value)})}),(0,m.jsx)(o.g,{label:(0,h.t)("library-panel.add-modal.folder","Save in folder"),description:(0,h.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions"),children:(0,m.jsx)(u.Es,{onChange:e=>{let{id:t}=e;return y(t)},initialFolderId:n,inputId:"share-panel-library-panel-folder-picker"})}),(0,m.jsxs)(d.u.ButtonRow,{children:[(0,m.jsx)(c.zx,{variant:"secondary",onClick:f,fill:"outline",children:v||(v=(0,m.jsx)(h.cC,{i18nKey:"library-panel.add-modal.cancel",children:"Cancel"}))}),(0,m.jsx)(c.zx,{onClick:I,disabled:$,children:b||(b=(0,m.jsx)(h.cC,{i18nKey:"library-panel.add-modal.create",children:"Create library panel"}))})]})]})},y=e=>{let{isOpen:t=!1,panel:n,initialFolderId:s}=e,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,f);return(0,m.jsx)(d.u,{title:"Create library panel",isOpen:t,onDismiss:a.onDismiss,children:(0,m.jsx)(x,{panel:n,initialFolderId:s,onDismiss:a.onDismiss})})}},8602:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});n(68404);var s=n(2024),a=n(45916);const i=e=>{let{isOpen:t,onConfirm:n,onDismiss:i}=e;return(0,a.jsx)(s.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:"If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel.",confirmText:"Yes, unlink",onConfirm:()=>{n(),i()},onDismiss:i,isOpen:t})}},43437:(e,t,n)=>{"use strict";function s(e){var t;return Boolean(null===(t=e.libraryPanel)||void 0===t?void 0:t.uid)}n.d(t,{V:()=>s})},98865:(e,t,n)=>{"use strict";n.d(t,{E8:()=>m,Ef:()=>g,Kq:()=>u,Mh:()=>d,Ob:()=>h,Pq:()=>l,UO:()=>p,jh:()=>c});var s=n(3363),a=n(37437),i=n(42200),r=n(64663);const o=["libraryPanel"];async function l(){let{searchString:e="",perPage:t=100,page:n=1,excludeUid:s="",sortDirection:a="",typeFilter:o=[],folderFilterUIDs:l=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=new URLSearchParams;d.append("searchString",e),d.append("sortDirection",a),d.append("typeFilter",o.join(",")),d.append("folderFilterUIDs",l.join(",")),d.append("excludeUid",s),d.append("perPage",t.toString(10)),d.append("page",n.toString(10)),d.append("kind",r.V.Panel.toString(10));const{result:c}=await(0,i.i)().get(`/api/library-elements?${d.toString()}`);return c}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=await(0,s.n)((0,i.i)().fetch({method:"GET",url:`/api/library-elements/${e}`,showSuccessAlert:!t,showErrorAlert:!t})),{result:r}=n.data,o=new a.f({schemaVersion:35,panels:[r.model]}),l=o.panels[0].getSaveModel();return o.destroy(),Object.assign({},r,{model:l})}async function c(e){const{result:t}=await(0,i.i)().get(`/api/library-elements/name/${e}`);return t}async function u(e,t){const{result:n}=await(0,i.i)().post("/api/library-elements",{folderId:t,name:e.libraryPanel.name,model:e,kind:r.V.Panel});return n}async function h(e){const{libraryPanel:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o),{uid:s,name:a,version:l}=t,d=r.V.Panel,{result:c}=await(0,i.i)().patch(`/api/library-elements/${s}`,{name:a,model:n,version:l,kind:d});return c}function p(e){return(0,i.i)().delete(`/api/library-elements/${e}`)}async function g(e){const{result:t}=await(0,i.i)().get(`/api/library-elements/${e}/connections`);return t}async function m(e){const t=await g(e);if(0===t.length)return[];return await(0,i.i)().search({dashboardUIDs:t.map((e=>e.connectionUid))})}},64663:(e,t,n)=>{"use strict";let s,a;n.d(t,{V:()=>s}),function(e){e[e.Panel=1]="Panel",e[e.Variable=2]="Variable"}(s||(s={})),function(e){e[e.Dashboard=1]="Dashboard"}(a||(a={}))},40829:(e,t,n)=>{"use strict";n.d(t,{E:()=>h});var s=n(68404),a=n(64214),i=n(93570),r=n(93686),o=n(35448),l=n(64850),d=n(47900),c=n(98865);async function u(e,t){const n=function(e){let t=e.getSaveModel();return t=Object.assign({libraryPanel:{name:e.title,uid:void 0}},t),t}(e),s=await function(e,t){if(!e.libraryPanel)return Promise.reject();if(e.libraryPanel&&""===e.libraryPanel.uid)return(0,c.Kq)(e,t);return(0,c.Ob)(e)}(n,t);return function(e,t){e.restoreModel(Object.assign({},t.model,{configRev:0,libraryPanel:t,title:e.title})),e.hasSavedPanelEditChange=!0,e.refresh()}(e,s),s}const h=()=>{const e=(0,l.I0)(),[t,n]=(0,a.default)((async(e,t)=>{try{return await u(e,t)}catch(e){if((0,i.kW)(e))throw e.isHandled=!0,new Error(e.data.message);throw e}}),[]);return(0,s.useEffect)((()=>{if(t.error){const s=t.error.message;e((0,r.$l)((n=(0,o.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:s}),(0,d.t_)(n))))}var n;t.value&&e((0,r.$l)(function(e){return(0,d.AT)(e)}((0,o.t)("library-panels.save.success","Library panel saved"))))}),[e,t]),{state:t,saveLibraryPanel:n}}},60057:(e,t,n)=>{"use strict";n.d(t,{H:()=>N});var s=n(22543),a=n(94025),i=n(98251),r=n(80795),o=n(68374),l=n(73017),d=n(8105),c=n(94722),u=n(52423),h=n(68404),p=n(65737),g=n(78941),m=n(50191);let f;!function(e){e.Saved="saved",e.EditingStarted="editing-started",e.EditingCanceled="editing-cancelled",e.Deleted="deleted"}(f||(f={}));var v,b,x,y,w=n(45916);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends h.PureComponent{constructor(){super(...arguments),j(this,"state",{}),j(this,"discardAndReload",{label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{N.reloadPage(),this.onDismiss()}}),j(this,"continueEditing",{label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}}),j(this,"acceptDelete",{label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=p.v.appUrl}}),j(this,"onDismiss",(()=>{this.setState({dismiss:!0})}))}render(){const{event:e}=this.props,{dismiss:t}=this.state,n=C(p.v.theme2),s=(null==e?void 0:e.action)===f.Deleted,a=s?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return(0,w.jsx)(g.u,{isOpen:!t,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:n.modal,children:(0,w.jsxs)("div",{children:[s?v||(v=(0,w.jsx)("div",{children:"This dashboard has been deleted by another session"})):b||(b=(0,w.jsx)("div",{children:"This dashboard has been modifed by another session"})),x||(x=(0,w.jsx)("br",{})),a.map((e=>(0,w.jsxs)("div",{onClick:e.action,className:n.radioItem,children:[(0,w.jsx)("h3",{children:e.label}),e.description]},e.label))),y||(y=(0,w.jsx)("br",{}))]})})}}const C=(0,m.B)((e=>({modal:u.css`
      width: 500px;
    `,radioItem:u.css`
      margin: 0;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${e.colors.primary.main};
        color: ${e.colors.text};
      }
    `})));function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=new class{constructor(){k(this,"channel",void 0),k(this,"uid",void 0),k(this,"ignoreSave",void 0),k(this,"editing",!1),k(this,"lastEditing",void 0),k(this,"subscription",void 0),k(this,"hasSeenNotice",void 0),k(this,"observer",{next:e=>{if((0,s.se)(e)&&this.editing&&e.state===s.yS.Connected&&this.sendEditingState(),(0,s.RL)(e)){if(e.message.sessionId===l.W4)return;const{action:t}=e.message;switch(t){case f.EditingStarted:case f.Saved:{if(this.ignoreSave)return void(this.ignoreSave=!1);const n=(0,c.h4)().getCurrent();if((null==n?void 0:n.uid)!==e.message.uid)return void console.log("dashboard event for different dashboard?",e,n);const s=this.editing||n.hasUnsavedChanges();if(t===f.Saved)s?o.h$.publish(new d.Dn({component:S,props:{event:e}})):(o.h$.emit(a.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(s&&t===f.EditingStarted&&!this.hasSeenNotice){const t=e.message,n=this.getRecentEditingEvent();n&&n.message===t.message||(this.hasSeenNotice=!0,o.h$.emit(a.SI.alertWarning,["Another session is editing this dashboard",t.message])),this.lastEditing=t}return}}}}})}setEditingState(e){const t=this.editing=e;this.editing=e,this.hasSeenNotice=!1,t&&o.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:e,uid:t}=this;e&&t&&(0,i.gj)().publish(e,{sessionId:l.W4,uid:t,action:this.editing?f.EditingStarted:f.EditingCanceled,timestamp:Date.now()})}watch(e){const t=(0,i.gj)();t&&e!==this.uid&&(this.channel={scope:s.z.Grafana,namespace:"dashboard",path:`uid/${e}`},this.leave(),e&&(this.subscription=t.getStream(this.channel).subscribe(this.observer)),this.uid=e)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){if(this.lastEditing&&this.lastEditing.timestamp){Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0)}return this.lastEditing}reloadPage(){r.E1.reload()}}},36551:(e,t,n)=>{"use strict";n.d(t,{Av:()=>g,MB:()=>v,_A:()=>m});var s=n(68633),a=n(27843),i=n(94582),r=n(99511),o=n(41785),l=n(52902),d=n(98251),c=n(30012);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h="__name__";var p;!function(e){e[e.wide=0]="wide",e[e.labels=1]="labels"}(p||(p={}));class g{constructor(e){u(this,"name",void 0),u(this,"refId",void 0),u(this,"meta",{}),u(this,"fields",[]),u(this,"length",0),u(this,"schemaFields",[]),u(this,"timeFieldIndex",-1),u(this,"pushMode",p.wide),u(this,"labels",new Set),u(this,"packetInfo",{schemaChanged:!0,number:0,action:d.T0.Replace,length:0}),u(this,"serialize",((e,t,n)=>{var a,i,r;const o=t?Object.assign({},Object.assign({},this.options,t)):this.options,l=(0,s.Aw)(this,e),d=y(l.fields.map((e=>e.values)),"number"==typeof(null==n?void 0:n.maxLength)?Math.min(n.maxLength,o.maxLength):o.maxLength,this.timeFieldIndex,o.maxDelta);l.fields=l.fields.map((e=>Object.assign({},e,{values:e.values.slice(d)})));const c=null!==(a=null===(i=l.fields[0])||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)&&void 0!==a?a:0;return Object.assign({},l,{labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:c,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:o})})),u(this,"initFromSerialized",(e=>{this.name=e.name,this.refId=e.refId,this.meta=e.meta,this.length=e.length,this.labels=e.labels,this.schemaFields=e.schemaFields,this.timeFieldIndex=e.timeFieldIndex,this.pushMode=e.pushMode,this.packetInfo.length=e.packetInfo.length,this.packetInfo.number=e.packetInfo.number,this.packetInfo.action=d.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=e.fields.map((e=>{var t,n;return Object.assign({},e,{type:null!==(t=e.type)&&void 0!==t?t:a.fS.other,config:null!==(n=e.config)&&void 0!==n?n:{},values:Array.isArray(e.values)?new i.G(e.values):new i.G})})),x(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)})),u(this,"needsResizing",(e=>{let{maxLength:t,maxDelta:n}=e;const s=t&&this.options.maxLength<t,a=n&&this.options.maxDelta<n,i=n&&this.options.maxDelta===1/0;return Boolean(s||a||i)})),u(this,"resize",(e=>{let{maxLength:t,maxDelta:n}=e;n&&(this.options.maxDelta===1/0?this.options.maxDelta=n:this.options.maxDelta=Math.max(n,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,null!=t?t:0)})),u(this,"pushNewValues",(e=>{var t,n,s,a;if(null==e||!e.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=e[0].length,this.packetInfo.schemaChanged=!1,this.options.action===d.T0.Append?b(this.fields.map((e=>e.values.buffer)),e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(e.forEach(((e,t)=>{var n;null!==(n=this.fields[t])&&void 0!==n&&n.values&&(this.fields[t].values.buffer=e)})),x(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const i=null===(t=this.fields)||void 0===t||null===(n=t[0])||void 0===n||null===(s=n.values)||void 0===s||null===(a=s.buffer)||void 0===a?void 0:a.length;void 0!==i&&(this.length=i)})),u(this,"resetStateCalculations",(()=>{this.fields.forEach((e=>{var t;e.state=Object.assign({},null!==(t=e.state)&&void 0!==t?t:{},{calcs:void 0,range:void 0})}))})),u(this,"getMatchingFieldIndexes",(e=>this.fields.map(((t,n)=>e(t)?n:void 0)).filter((e=>void 0!==e)))),u(this,"getValuesFromLastPacket",(()=>this.fields.map((e=>{const t=e.values.buffer;return t.slice(Math.max(t.length-this.packetInfo.length))})))),u(this,"hasAtLeastOnePacket",(()=>Boolean(this.packetInfo.length))),u(this,"getOptions",(()=>this.options)),this.options=e,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===d.T0.Replace}push(e){const{schema:t,data:n}=e;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,t){this.pushMode=p.wide,this.timeFieldIndex=t.fields.findIndex((e=>e.type===a.fS.time));const e=t.fields[0];1!==this.timeFieldIndex||e.type!==a.fS.string||"labels"!==e.name&&"Labels"!==e.name||(this.pushMode=p.labels,this.timeFieldIndex=0);const n=this.pushMode===p.labels?t.fields.slice(1):t.fields;this.refId=t.refId,t.meta&&(this.meta=Object.assign({},t.meta));const{displayNameFormat:s}=this.options;if(function(e,t){if((null==e?void 0:e.length)!==t.length)return!1;for(let n=0;n<e.length;n++){const s=e[n],a=t[n];if(s.name!==a.name||s.type!==a.type)return!1}return!0}(this.schemaFields,n)){const e=n.length;this.fields.forEach(((t,s)=>{var a;const i=n[s%e];t.config=null!==(a=i.config)&&void 0!==a?a:{},t.labels=i.labels})),s&&this.fields.forEach((e=>{const t=Object.assign({[h]:e.name},e.labels);e.config.displayNameFromDS=(0,c.W)(s,t)}))}else{this.packetInfo.schemaChanged=!0;const e=this.pushMode===p.wide;this.fields=n.map((t=>{var n,r,o,l;const d=null!==(n=t.config)&&void 0!==n?n:{};if(s){const e=Object.assign({[h]:t.name},t.labels);d.displayNameFromDS=(0,c.W)(s,e)}return{config:d,name:t.name,labels:t.labels,type:null!==(r=t.type)&&void 0!==r?r:a.fS.other,values:e?null!==(o=null===(l=this.fields.find((e=>e.name===t.name&&t.type===e.type)))||void 0===l?void 0:l.values)&&void 0!==o?o:new i.G(Array(this.length).fill(void 0)):new i.G}}))}this.schemaFields=n}if(n&&n.values.length&&n.values[0].length){let{values:e,entities:t}=n;if(t&&t.forEach(((t,n)=>{t&&(0,r.Jy)(t,e[n])})),this.pushMode===p.labels){const t=function(e){let t=new Set(e[0]),n=new Map;t.forEach((t=>{let s=Array(e.length-1).fill(null).map((()=>[]));n.set(t,s)}));for(let t=0;t<e[0].length;t++){let s=n.get(e[0][t]);for(let n=1;n<e.length;n++)s[n-1].push(e[n][t])}return n}(e);for(const e of t.keys())this.labels.has(e)||(this.packetInfo.schemaChanged=!0,this.addLabel(e));let n=Array(this.schemaFields.length).fill([]),s=[];this.labels.forEach((e=>{var a;s.push(null!==(a=t.get(e))&&void 0!==a?a:n)})),e=(0,l.v_)(s)}if(e.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${e.length} (labels=${this.pushMode===p.labels})`);this.fields=e.map(((e,t)=>{let n=`Field ${t}`,r=(0,s.LI)(e[0]);return 0===t&&r===a.fS.number&&e[0]>1600016688632&&(r=a.fS.time,n="Time"),{name:n,type:r,config:{},values:new i.G([])}}))}let o=e;this.packetInfo.length=e[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=d.T0.Replace:(this.packetInfo.action=d.T0.Append,o=this.fields.map((e=>e.values.buffer)),b(o,e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),o.forEach(((e,t)=>{const{state:n,values:s}=this.fields[t];s.buffer=e,n&&(n.calcs=void 0)})),this.length=o[0].length}return Object.assign({},this.packetInfo)}addLabel(e){const{displayNameFormat:t}=this.options,n=this.labels.size,s=function(e){if(!e.length)return{};if("{"===e.charAt(0))return(0,o.J8)(e);const t={};return e.split(",").forEach((e=>{const[n,s]=e.trim().split("=");t[n]=s})),t}(e);if(0===n)this.fields.forEach(((e,n)=>{if(n>0&&(e.labels=s,t)){const n=Object.assign({[h]:e.name},s);e.config.displayNameFromDS=(0,c.W)(t,n)}}));else for(let e=1;e<this.schemaFields.length;e++){var a;let n=this.schemaFields[e];const r=null!==(a=n.config)&&void 0!==a?a:{};if(t){const e=Object.assign({[h]:n.name},s);r.displayNameFromDS=(0,c.W)(t,e)}this.fields.push(Object.assign({},n,{config:r,labels:s,values:new i.G(Array(this.length).fill(void 0))}))}this.labels.add(e)}}function m(e){var t,n,s;return{maxLength:null!==(t=null==e?void 0:e.maxLength)&&void 0!==t?t:1e3,maxDelta:null!==(n=null==e?void 0:e.maxDelta)&&void 0!==n?n:1/0,action:null!==(s=null==e?void 0:e.action)&&void 0!==s?s:d.T0.Append,displayNameFormat:null==e?void 0:e.displayNameFormat}}function f(e,t,n,s){let a;n=n||0;let i=(s=s||t.length-1)<=2147483647;for(;s-n>1;)a=i?n+s>>1:Math.floor((n+s)/2),t[a]<e?n=a:s=a;return e-t[n]<=t[s]-e?n:s}function v(e){const t=e.packetInfo;return null!=t&&t.action?t:void 0}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;for(let n=0;n<e.length;n++)for(let s=0;s<t[n].length;s++)e[n].push(t[n][s]);return x(e,n,s,a)}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const a=y(e,t,n,s);if(a)for(let t=0;t<e.length;t++)e[t].splice(0,a);return a}function y(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null===(t=e[0])||void 0===t||!t.length)return 0;const i=e[0].length;let r=0;if(i>n&&(r=i-n),a!==1/0&&s>=0){const t=e[s],n=t[r],o=t[i-1];o-n>a&&(r=f(o-a,t,r))}return r}u(g,"deserialize",(e=>{const t=new g(e.options);return t.initFromSerialized(e),t})),u(g,"empty",(e=>new g(m(e)))),u(g,"fromDataFrameJSON",((e,t)=>{const n=new g(m(t));return n.push(e),n}))},88113:(e,t,n)=>{"use strict";n.d(t,{A1:()=>i,g0:()=>a,iL:()=>r});var s=n(68633);let a;!function(e){e.NewValuesSameSchema="NewValuesSameSchema",e.FullFrame="FullFrame"}(a||(a={}));const i=(e,t)=>"type"in e&&e.type===t,r=(Object.values(a),e=>(0,s.aY)(e)&&"packetInfo"in e)},73017:(e,t,n)=>{"use strict";n.d(t,{Bp:()=>D,W4:()=>P});var s=n(65737),a=n(98251),i=n(93570),r=n(89704),o=n(59196),l=n(77341),d=n(65100),c=(n(58936),n(79702)),u=n(6163),h=n(43752),p=n(2182);var g=n(46060),m=n(85526),f=n(13016);const v=e=>(0,m.D)(e).pipe((0,f.w)((e=>{return t=e,new g.y((e=>{const n=t.subscribe(c.sj((t=>{e.next(t)})),c.sj((t=>{e.error(t)})),c.sj((()=>{e.complete()})));return{unsubscribe:()=>{n.then((e=>e.unsubscribe()))}}}));var t})));function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x{constructor(e){b(this,"centrifugeWorker",void 0),b(this,"getConnectionState",(()=>v(this.centrifugeWorker.getConnectionState()))),b(this,"getDataStream",(e=>v(this.centrifugeWorker.getDataStream(e)).pipe((0,u.Q)(h.z)))),b(this,"getQueryData",(async e=>{const t=JSON.parse(JSON.stringify(e));return this.centrifugeWorker.getQueryData(t)})),b(this,"getPresence",(e=>this.centrifugeWorker.getPresence(e))),b(this,"getStream",(e=>v(this.centrifugeWorker.getStream(e)))),this.centrifugeWorker=c.Ud(new p.q(new URL(n.p+n.u(8186),n.b))),this.centrifugeWorker.initialize(e,c.sj(e.dataStreamSubscriberReadiness))}}var y,w,j,S=n(2101),C=n(53786),k=n(22543),N=n(93864),O=n(18474),I=n(36551),T=n(88113);function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(e){$(this,"getConnectionState",(()=>this.deps.centrifugeSrv.getConnectionState())),$(this,"getDataStream",(e=>{let t;return this.deps.centrifugeSrv.getDataStream(e).pipe((0,S.U)((e=>{var n;return(e=>{const n=e.data[0];if(t||(0,T.A1)(n,T.g0.FullFrame))switch(n.type){case T.g0.FullFrame:return void(t=I.Av.deserialize(n.frame));case T.g0.NewValuesSameSchema:t.pushNewValues(n.values)}else console.warn(`expected first packet to contain a full frame, received ${null==n?void 0:n.type}`)})(e),Object.assign({},e,{data:[null!==(n=t)&&void 0!==n?n:I.Av.empty()]})})))})),$(this,"getStream",(e=>this.deps.centrifugeSrv.getStream(e))),$(this,"getQueryData",(e=>(0,m.D)(this.deps.centrifugeSrv.getQueryData(e)).pipe((0,f.w)((t=>{var n;const s=(0,N.z1)(t,e.request.targets);return(null===(n=s.data)||void 0===n?void 0:n.length)&&s.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?(0,O.B9)(s,e.request,O.PI):(0,C.of)(s)}))))),$(this,"publish",(async(e,t)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,k.Aj)(e),data:t}))),$(this,"getPresence",(e=>this.deps.centrifugeSrv.getPresence(e))),this.deps=e}}const P=(null===(y=window)||void 0===y||null===(w=y.grafanaBootData)||void 0===w||null===(j=w.user)||void 0===j?void 0:j.id)+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function D(){const e={appUrl:`${window.location.origin}${s.v.appSubUrl}`,orgId:o.Vt.user.orgId,orgRole:o.Vt.user.orgRole,liveEnabled:s.v.liveEnabled,sessionId:P,dataStreamSubscriberReadiness:r.A.ok.asObservable(),grafanaAuthToken:(0,l.v)()},t=s.v.featureToggles["live-service-web-worker"]?new x(e):new d.R(e);(0,a.cA)(new R({centrifugeSrv:t,backendSrv:(0,i.i)()}))}},17052:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var s=n(52423),a=(n(68404),n(16755)),i=n(45916);const r=["level","lvl","filename"],o=e=>{let{labels:t}=e;const n=(0,a.wW)(l),o=Object.keys(t).filter((e=>!e.startsWith("_")&&!r.includes(e)));return 0===o.length?(0,i.jsx)("span",{className:(0,s.cx)([n.logsLabels]),children:(0,i.jsx)("span",{className:(0,s.cx)([n.logsLabel]),children:"(no unique labels)"})}):(0,i.jsx)("span",{className:(0,s.cx)([n.logsLabels]),children:o.sort().map((e=>{const a=t[e];if(!a)return;const r=`${e}: ${a}`;return(0,i.jsx)("span",{className:(0,s.cx)([n.logsLabel]),children:(0,i.jsx)("span",{className:(0,s.cx)([n.logsLabelValue]),title:r,children:a})},e)}))})},l=e=>({logsLabels:s.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${e.typography.size.xs};
    `,logsLabel:s.css`
      label: logs-label;
      display: flex;
      padding: ${e.spacing(0,.25)};
      background-color: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(1)};
      margin: ${e.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:s.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${e.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},43147:(e,t,n)=>{"use strict";n.d(t,{Q:()=>u});var s=n(2525),a=n(68404),i=n(94130),r=n.n(i),o=n(30420),l=n(16755),d=n(45916);class c extends a.PureComponent{constructor(){var e,t,n;super(...arguments),n={chunks:[],prevValue:""},(t="state")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return null;return{chunks:s.ZP.parse(e.value).spans.map((t=>{return t.css?{style:(n=e.theme,s=t.css,s.split(/;\s*/).reduce(((e,t)=>{if("color:rgba(0,0,0,0.5)"===t)return{color:n.colors.text.secondary};const s=t.match(/([^:\s]+)\s*:\s*(.+)/);return s&&s[1]&&s[2]&&(e[s[1].replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=s[2]),e}),{})),text:t.text}:{text:t.text};var n,s})),prevValue:e.value}}render(){const{chunks:e}=this.state;return e.map(((e,t)=>{var n;const s=null!==(n=this.props.highlight)&&void 0!==n&&n.searchWords?(0,d.jsx)(r(),{textToHighlight:e.text,searchWords:this.props.highlight.searchWords,findChunks:o.Xt,highlightClassName:this.props.highlight.highlightClassName},t):e.text;return e.style?(0,d.jsx)("span",{style:e.style,"data-testid":"ansiLogLine",children:s},t):s}))}}const u=(0,l.HE)(c);u.displayName="LogMessageAnsi"},77372:(e,t,n)=>{"use strict";n.d(t,{r:()=>F,n:()=>D});var s,a=n(52423),i=n(58635),r=n(68404),o=n(94130),l=n.n(o),d=n(35008),c=n.n(d),u=n(30420),h=n(54316),p=n(21888),g=n(23734),m=n(16755),f=n(43147),v=n(44260),b=n(93246),x=n(76093),y=n(8006),w=n(22222),j=n(89645),S=n(2843),C=n(55910),k=n(45916);let N;!function(e){e.Bottom="bottom",e.Top="top"}(N||(N={}));const O=(e,t)=>{const n=260,s=t?"100%":"75%",i=t?a.css`
        top: -${n}px;
      `:a.css`
        margin-top: -${n}px;
      `,r=t?a.css`
        top: 100%;
      `:a.css`
        margin-top: ${e.spacing(2.5)};
      `;return{width:a.css`
      width: ${s};
    `,commonStyles:a.css`
      position: absolute;
      height: ${n}px;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      background: ${e.colors.background.primary};
      box-shadow: 0 0 ${e.spacing(1.25)} ${e.v1.palette.black};
      border: 1px solid ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(2)};
      font-family: ${e.typography.fontFamily};
    `,header:a.css`
      height: ${40}px;
      padding: ${e.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${e.colors.background.canvas};
    `,top:a.css`
      border-radius: 0 0 ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)};
      box-shadow: 0 0 ${e.spacing(1.25)} ${e.v1.palette.black};
      clip-path: inset(0px -${e.spacing(1.25)} -${e.spacing(1.25)} -${e.spacing(1.25)});
    `,title:a.css`
      position: absolute;
      width: ${s};
      margin-top: -${300}px;
      z-index: ${e.zIndex.modal};
      height: ${40}px;
      background: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)} 0 0;
      box-shadow: 0 0 ${e.spacing(1.25)} ${e.v1.palette.black};
      clip-path: inset(-${e.spacing(1.25)} -${e.spacing(1.25)} 0px -${e.spacing(1.25)});
      font-family: ${e.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${e.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:a.css`
      align-items: center;
      display: flex;
    `,headerButton:a.css`
      margin-left: ${e.spacing(1)};
    `,logs:a.css`
      height: ${220}px;
      padding: ${e.spacing(1.25)};
      font-family: ${e.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:i,beforeContext:r}},I=e=>{let{row:t,rows:n,onLoadMoreContext:s,canLoadMoreRows:i,groupPosition:r,logsSortOrder:o}=e;const{header:l,headerButton:d}=(0,m.wW)(O);let c="after";return r===N.Bottom?o===b.UV.Descending&&(c="before"):o===b.UV.Ascending&&(c="before"),(0,k.jsxs)("div",{className:l,children:[(0,k.jsxs)("span",{className:a.css`
          opacity: 0.6;
        `,children:["Showing ",n.length," lines ",c," match."]}),(n.length>=10||n.length>10&&n.length%10!=0)&&i&&(0,k.jsx)(y.zx,{className:d,variant:"secondary",size:"sm",onClick:s,children:"Load 10 more lines"})]})},T=e=>{let{row:t,rows:n,error:s,className:i,shouldScrollToBottom:o,canLoadMoreRows:l,onLoadMoreContext:d,groupPosition:c,logsSortOrder:u}=e;const{commonStyles:h,logs:p}=(0,m.wW)(O),[g,b]=(0,r.useState)(0),[y,C]=(0,r.useState)(0),N=(0,r.useRef)(null),T=(0,v.Z)(n),$=(0,v.Z)(g),R=(0,v.Z)(y);(0,r.useLayoutEffect)((()=>{var e;if(!o||!N.current)return;const t=null!==(e=null==T?void 0:T.length)&&void 0!==e?e:0,s=null!=R?R:0,a=null!=$?$:0,i=N.current.parentElement;let r=0;i&&(r=i.scrollHeight-i.clientHeight,C(r)),n.length>t&&r>s&&b(a+(r-s))}),[o,n,T,$,R]);const P={row:t,rows:n,onLoadMoreContext:d,canLoadMoreRows:l,groupPosition:c,logsSortOrder:u};return(0,k.jsxs)("div",{className:(0,a.cx)(h,i),children:[o&&!s&&(0,k.jsx)(I,Object.assign({},P)),(0,k.jsx)("div",{className:p,children:(0,k.jsx)(w.$,{autoHide:!0,onScroll:()=>{var e;var t;(null===(e=N.current)||void 0===e?void 0:e.parentElement)&&b(null===(t=N.current)||void 0===t?void 0:t.parentElement.scrollTop)},scrollTop:g,autoHeightMin:"210px",children:(0,k.jsxs)("div",{ref:N,children:[!s&&(0,k.jsx)(j.a,{items:n,renderItem:e=>(0,k.jsx)("div",{className:a.css`
                        padding: 5px 0;
                      `,children:"string"==typeof e&&x.QX.hasAnsiCodes(e)?(0,k.jsx)(f.Q,{value:e}):e})}),s&&(0,k.jsx)(S.b,{title:s})]})})}),!o&&!s&&(0,k.jsx)(I,Object.assign({},P))]})},$=e=>{let{row:t,context:n,errors:i,onOutsideClick:o,onLoadMoreContext:l,hasMoreContextRows:d,wrapLogMessage:c,logsSortOrder:u}=e;(0,r.useEffect)((()=>{const e=e=>{"Escape"!==e.key&&"Esc"!==e.key||o("close_esc")};return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[o,t]);const{afterContext:h,beforeContext:p,title:f,top:v,actions:b,width:x}=(0,m.wW)((e=>O(e,c)));return(0,k.jsx)(C.L,{onClick:()=>o("close_outside_click"),children:(0,k.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[n.after&&(0,k.jsx)(T,{rows:n.after,error:i&&i.after,row:t,className:(0,a.cx)(h,v,x),shouldScrollToBottom:!0,canLoadMoreRows:!!d&&d.after,onLoadMoreContext:l,groupPosition:N.Top,logsSortOrder:u}),n.before&&(0,k.jsx)(T,{onLoadMoreContext:l,canLoadMoreRows:!!d&&d.before,row:t,rows:n.before,error:i&&i.before,className:(0,a.cx)(p,x),groupPosition:N.Bottom,logsSortOrder:u}),(0,k.jsxs)("div",{className:(0,a.cx)(f,x),children:[s||(s=(0,k.jsx)("h5",{children:"Log context"})),(0,k.jsx)("div",{className:b,children:(0,k.jsx)(g.h,{size:"lg",name:"times",onClick:()=>o("close_button")})})]})]})})};var R=n(39609);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=1e5;function A(e,t,n,s){const a=n&&n.length>0&&n[0]&&n[0].length>0&&t.length<D,i=null!=n?n:[];if(e){const e=a?{searchWords:i,highlightClassName:s}:void 0;return(0,k.jsx)(f.Q,{value:t,highlight:e})}return a?(0,k.jsx)(l(),{textToHighlight:t,searchWords:i,findChunks:u.Xt,highlightClassName:s}):t}const M=(0,i.Z)(((e,t)=>{if(t)try{return JSON.stringify(JSON.parse(e),void 0,2)}catch(t){return e}return e}));class L extends r.PureComponent{constructor(){super(...arguments),P(this,"logRowRef",r.createRef()),P(this,"onContextToggle",(e=>{e.stopPropagation(),this.props.onToggleContext("open")})),P(this,"onShowContextClick",(e=>{const{scrollElement:t}=this.props;this.onContextToggle(e),t&&this.logRowRef.current&&t.scroll({behavior:"smooth",top:t.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}))}render(){const{row:e,theme:t,errors:n,hasMoreContextRows:s,updateLimit:i,context:r,contextIsOpen:o,showRowMenu:l,wrapLogMessage:d,prettifyLogMessage:u,onToggleContext:m,app:f,logsSortOrder:v,showContextToggle:b}=this.props,x=(0,R.h)(t,e.logLevel),{hasAnsi:y,raw:w}=e,j=M(w,u),S=!!b&&b(e),C=((e,t,n)=>{const s=c()(e.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:a.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:a.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${s};
      display: inherit;
    `,horizontalScroll:a.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:a.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:a.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${e.spacing(4.5)};
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      padding: ${e.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${t?e.spacing(10):e.spacing(5)};
    `,logRowMenuCell:a.css`
      position: absolute;
      right: ${n?"40px":`calc(75px + ${e.spacing()} + ${t?"80px":"40px"})`};
      margin-top: -${e.spacing(.125)};
    `}})(t,S,f===h.zj.Dashboard);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("td",{ref:this.logRowRef,style:o?{position:"unset"}:void 0,className:x.logsRowMessage,children:(0,k.jsxs)("div",{className:(0,a.cx)({[C.positionRelative]:d},{[C.horizontalScroll]:!d}),children:[o&&r&&(0,k.jsx)($,{row:e,context:r,errors:n,wrapLogMessage:d,hasMoreContextRows:s,onOutsideClick:m,logsSortOrder:v,onLoadMoreContext:()=>{i&&i()}}),(0,k.jsx)("span",{className:(0,a.cx)(C.positionRelative,{[C.rowWithContext]:o}),children:A(y,j,e.searchWords,x.logsRowMatchHighLight)})]})}),l&&(0,k.jsx)("td",{className:(0,a.cx)("log-row-menu-cell",C.logRowMenuCell),children:(0,k.jsxs)("span",{className:(0,a.cx)("log-row-menu",C.rowMenu),onClick:e=>e.stopPropagation(),children:[S&&(0,k.jsx)(p.u,{placement:"top",content:"Show context",children:(0,k.jsx)(g.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})}),(0,k.jsx)(p.u,{placement:"top",content:"Copy",children:(0,k.jsx)(g.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(j)})})]})})]})}}const F=(0,m.HE)(L);F.displayName="LogRowMessage"},67543:(e,t,n)=>{"use strict";n.d(t,{w:()=>Y});var s=n(58635),a=n(68404),i=n(93246),r=n(16755),o=n(97281),l=n(52423),d=n(6432),c=n(31181),u=n(58906),h=n(21888),p=n(99500),g=n(23734),m=n(11818),f=n(30873),v=n(50191),b=n(45916);const x=e=>({logsStatsRow:l.css`
    label: logs-stats-row;
    margin: ${parseInt(e.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:l.css`
    label: logs-stats-row--active;
    color: ${e.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:l.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:l.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:l.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${e.spacing(.75)};
  `,logsStatsRowPercent:l.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${e.spacing(.75)};
    width: ${e.spacing(4.5)};
  `,logsStatsRowBar:l.css`
    label: logs-stats-row__bar;
    height: ${e.spacing(.5)};
    overflow: hidden;
    background: ${e.colors.text.disabled};
  `,logsStatsRowInnerBar:l.css`
    label: logs-stats-row__innerbar;
    height: ${e.spacing(.5)};
    overflow: hidden;
    background: ${e.colors.primary.main};
  `}),y=e=>{let{active:t,count:n,proportion:s,value:a}=e;const i=(0,r.wW)(x),o=`${Math.round(100*s)}%`,d={width:o},c=t?(0,l.cx)([i.logsStatsRow,i.logsStatsRowActive]):(0,l.cx)([i.logsStatsRow]);return(0,b.jsxs)("div",{className:c,children:[(0,b.jsxs)("div",{className:(0,l.cx)([i.logsStatsRowLabel]),children:[(0,b.jsx)("div",{className:(0,l.cx)([i.logsStatsRowValue]),title:a,children:a}),(0,b.jsx)("div",{className:(0,l.cx)([i.logsStatsRowCount]),children:n}),(0,b.jsx)("div",{className:(0,l.cx)([i.logsStatsRowPercent]),children:o})]}),(0,b.jsx)("div",{className:(0,l.cx)([i.logsStatsRowBar]),children:(0,b.jsx)("div",{className:(0,l.cx)([i.logsStatsRowInnerBar]),style:d})})]})};y.displayName="LogLabelStatsRow";const w=(0,v.B)((e=>({logsStats:l.css`
      label: logs-stats;
      background: inherit;
      color: ${e.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:l.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${e.colors.border.medium};
      display: flex;
    `,logsStatsTitle:l.css`
      label: logs-stats__title;
      font-weight: ${e.typography.fontWeightMedium};
      padding-right: ${e.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:l.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:l.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `})));class j extends a.PureComponent{render(){const{label:e,rowCount:t,stats:n,value:s,theme:a,isLabel:i}=this.props,r=w(a),o=n.slice(0,5);let l=o.find((e=>e.value===s)),d=n.slice(5);const c=!l;c&&(l=d.find((e=>e.value===s)),d=d.filter((e=>e.value!==s)));const u=d.reduce(((e,t)=>e+t.count),0),h=o.reduce(((e,t)=>e+t.count),0)+u,p=u/h;return(0,b.jsxs)("div",{className:r.logsStats,"data-testid":"logLabelStats",children:[(0,b.jsx)("div",{className:r.logsStatsHeader,children:(0,b.jsxs)("div",{className:r.logsStatsTitle,children:[e,": ",h," of ",t," rows have that ",i?"label":"field"]})}),(0,b.jsxs)("div",{className:r.logsStatsBody,children:[o.map((e=>(0,b.jsx)(y,Object.assign({},e,{active:e.value===s}),e.value))),c&&l&&(0,b.jsx)(y,Object.assign({},l,{active:!0}),l.value),u>0&&(0,b.jsx)(y,{count:u,value:"Other",proportion:p},"__OTHERS__")]})]})}}const S=(0,r.HE)(j);S.displayName="LogLabelStats";var C=n(39609);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class N extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1}),k(this,"showField",(()=>{const{onClickShowDetectedField:e,parsedKey:t,row:n}=this.props;e&&e(t),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:n.datasourceType,logRowUid:n.uid,type:"enable"})})),k(this,"hideField",(()=>{const{onClickHideDetectedField:e,parsedKey:t,row:n}=this.props;e&&e(t),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:n.datasourceType,logRowUid:n.uid,type:"disable"})})),k(this,"filterLabel",(()=>{const{onClickFilterLabel:e,parsedKey:t,parsedValue:n,row:s}=this.props;e&&e(t,n),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:s.datasourceType,filterType:"include",logRowUid:s.uid})})),k(this,"filterOutLabel",(()=>{const{onClickFilterOutLabel:e,parsedKey:t,parsedValue:n,row:s}=this.props;e&&e(t,n),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:s.datasourceType,filterType:"exclude",logRowUid:s.uid})})),k(this,"showStats",(()=>{const{getStats:e,isLabel:t,row:n,app:s}=this.props,{showFieldsStats:a}=this.state;if(!a){const t=e(),n=t?t.reduce(((e,t)=>e+t.count),0):0;this.setState({fieldStats:t,fieldCount:n})}this.toggleFieldsStats(),(0,c.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:n.datasourceType,fieldType:t?"label":"detectedField",type:a?"close":"open",logRowUid:n.uid,app:s})}))}toggleFieldsStats(){this.setState((e=>({showFieldsStats:!e.showFieldsStats})))}hoverValueCopy(){const e=!this.state.mouseOver;this.setState({mouseOver:e})}render(){const{theme:e,parsedKey:t,parsedValue:n,isLabel:s,links:a,showDetectedFields:i,wrapLogMessage:r,onClickShowDetectedField:o,onClickHideDetectedField:d,onClickFilterLabel:c,onClickFilterOutLabel:u}=this.props,{showFieldsStats:h,fieldStats:p,fieldCount:v,mouseOver:x}=this.state,y=(e=>({noHoverBackground:l.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:l.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:l.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:l.css`
      color: ${e.colors.primary.text};
    `,hoverValueCopy:l.css`
      margin: ${e.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: ${e.shape.borderRadius(10)};
      width: ${e.spacing(3.25)};
      height: ${e.spacing(3.25)};
    `,wrapLine:l.css`
      label: wrapLine;
      white-space: pre-wrap;
    `}))(e),w=(0,C.h)(e),j=o&&d,k=c&&u,N=!s&&i&&i.includes(t)?(0,b.jsx)(g.h,{name:"eye",className:y.showingField,title:"Hide this field",onClick:this.hideField}):(0,b.jsx)(g.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return(0,b.jsxs)("tr",{className:(0,l.cx)(w.logDetailsValue,{[y.noHoverBackground]:h}),children:[(0,b.jsx)("td",{className:w.logsDetailsIcon,children:(0,b.jsx)(g.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})}),k&&s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:w.logsDetailsIcon,children:(0,b.jsx)(g.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})}),(0,b.jsx)("td",{className:w.logsDetailsIcon,children:(0,b.jsx)(g.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel})})]}),j&&!s&&(0,b.jsx)("td",{className:w.logsDetailsIcon,colSpan:2,children:N}),(0,b.jsx)("td",{className:w.logDetailsLabel,children:t}),(0,b.jsxs)("td",{className:(0,l.cx)(y.wordBreakAll,r&&y.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this),children:[n,x&&(0,b.jsx)(m.m,{getText:()=>n,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:y.hoverValueCopy}),null==a?void 0:a.map((e=>(0,b.jsxs)("span",{children:[" ",(0,b.jsx)(f.k,{link:e})]},e.title))),h&&(0,b.jsx)(S,{stats:p,label:t,value:n,rowCount:v,isLabel:s})]})]})}}const O=(0,r.HE)(N);O.displayName="LogDetailsRow";var I=n(27843),T=n(77372);const $=(0,s.Z)(o.MT),R=(0,s.Z)(((e,t)=>{const n=P(e.entry),s=[...D(e,t),...n].reduce(((e,t)=>{const n=t.value.replace(/(^")|("$)/g,""),s=`${t.key}=${n}`;return e[s]?e[s].links=[...e[s].links||[],...t.links||[]]:e[s]=t,e}),{}),a=Object.values(s);return a.sort(A),a})),P=(0,s.Z)((e=>{if(e.length>T.n)return[];const t=$(e);if(!t)return[];return t.getFields(e).map((e=>({key:t.getLabelFromField(e),value:t.getValueFromField(e)})))})),D=(0,s.Z)(((e,t)=>e.dataFrame.fields.map(((e,t)=>Object.assign({},e,{index:t}))).filter(((t,n)=>!function(e,t,n){var s;if("labels"===e.name&&e.type===I.fS.other)return!0;if("id"===e.name)return!0;if(n.entryFieldIndex===t)return!0;if(null!==(s=e.config.custom)&&void 0!==s&&s.hidden)return!0;if(null==e.values.get(n.rowIndex))return!0;return!1}(t,n,e))).map((n=>{const s=t?t(n,e.rowIndex,e.dataFrame):[];return{key:n.name,value:n.values.get(e.rowIndex).toString(),links:s,fieldIndex:n.index}}))));function A(e,t){var n,s,a,i;return null===(n=e.links)||void 0===n||!n.length||null!==(s=t.links)&&void 0!==s&&s.length?null!==(a=e.links)&&void 0!==a&&a.length||null===(i=t.links)||void 0===i||!i.length?e.key>t.key?1:e.key<t.key?-1:0:1:-1}var M,L;function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends a.PureComponent{constructor(){super(...arguments),F(this,"getParser",(0,s.Z)(o.MT)),F(this,"getStatsForDetectedField",(e=>{const t=this.getParser(this.props.row.entry).buildMatcher(e);return(0,o.zd)(this.props.getRows(),t)}))}render(){const{app:e,row:t,theme:n,hasError:s,onClickFilterOutLabel:a,onClickFilterLabel:i,getRows:r,showDuplicates:d,className:c,onClickShowDetectedField:u,onClickHideDetectedField:g,showDetectedFields:m,getFieldLinks:f,wrapLogMessage:v}=this.props,x=(0,C.h)(n,t.logLevel),y=(e=>({logsRowLevelDetails:l.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:l.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${e.colors.background.primary};
      }
    `}))(n),w=t.labels?t.labels:{},j=Object.keys(w).length>0,S=R(t,f),k=S&&S.length>0,N=(0,l.cx)(!s&&[x.logsRowLevel,y.logsRowLevelDetails]);return(0,b.jsxs)("tr",{className:(0,l.cx)(c,y.logDetails),children:[d&&(M||(M=(0,b.jsx)("td",{}))),(0,b.jsx)("td",{className:N,"aria-label":"Log level"}),(0,b.jsx)("td",{colSpan:4,children:(0,b.jsx)("div",{className:x.logDetailsContainer,children:(0,b.jsx)("table",{className:x.logDetailsTable,children:(0,b.jsxs)("tbody",{children:[j&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:x.logDetailsHeading,"aria-label":"Log labels",children:"Log labels"})}),Object.keys(w).sort().map((n=>{const s=w[n];return(0,b.jsx)(O,{parsedKey:n,parsedValue:s,isLabel:!0,getStats:()=>(0,o.lL)(r(),n),onClickFilterOutLabel:a,onClickFilterLabel:i,row:t,app:e},`${n}=${s}`)})),k&&(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:x.logDetailsHeading,"aria-label":"Detected fields",children:["Detected fields",(0,b.jsx)(h.u,{content:"Fields that are parsed from log message and detected by Grafana.",children:(0,b.jsx)(p.J,{name:"question-circle",size:"xs",className:l.css`
                            margin-left: ${n.spacing(.5)};
                          `})})]})}),S.sort().map((n=>{const{key:s,value:a,links:i,fieldIndex:r}=n;return(0,b.jsx)(O,{parsedKey:s,parsedValue:a,links:i,onClickShowDetectedField:u,onClickHideDetectedField:g,getStats:()=>void 0===r?this.getStatsForDetectedField(s):(0,o.i6)(t.dataFrame.fields[r].values.toArray()),showDetectedFields:m,wrapLogMessage:v,row:t,app:e},`${s}=${a}`)})),!k&&!j&&(L||(L=(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,"aria-label":"No details",children:"No details available"})})))]})})})})]})}}const V=(0,r.HE)(E);V.displayName="LogDetails";var z=n(17052),B=n(25981),_=n(68633),W=n(26222);const U=e=>{let{getRowContext:t,row:n,children:s,logsSortOrder:r}=e;const[o,l]=(0,a.useState)(10),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)({before:!0,after:!0}),{value:g}=(0,B.Z)((async()=>await(async(e,t,n,s)=>{const a=[e(t,{limit:n}),e(t,{limit:n+1,direction:"FORWARD"})],r=await Promise.all(a.map((e=>e.catch((e=>e))))),o=r.map((e=>{const a=e;if(!a.data)return[];const r=[];for(let e=0;e<a.data.length;e++){const s=(0,_.g0)(a.data[e]),i=new W.N(s),o=i.getFieldByName("ts"),l=i.getFieldByName("id");for(let e=0;e<o.values.length;e++){if(l){if(l.values.get(e)===t.uid)continue}else if(parseInt(o.values.get(e),10)===t.timeEpochMs)continue;const a=s.fields.filter((e=>"line"===e.name))[0].values.get(e);r.length<n&&r.push(a)}}return s===i.UV.Ascending?r.reverse():r})),l=r.map((e=>{const t=e;return t.message?t.message:""}));return{data:s===i.UV.Ascending?o.reverse():o,errors:s===i.UV.Ascending?l.reverse():l}})(t,n,o,r)),[o]);return(0,a.useEffect)((()=>{g&&u((e=>{let t=!0,n=!0;const s=null==e?void 0:e.data[0],a=null==e?void 0:e.data[1],i=g.data[0],r=g.data[1];return!e||i&&s.length!==i.length||(t=!1),!e||r&&a.length!==r.length||(n=!1),p({before:t,after:n}),g}))}),[g]),s({result:{before:d?d.data[0]:[],after:d?d.data[1]:[]},errors:{before:d?d.errors[0]:void 0,after:d?d.errors[1]:void 0},hasMoreContextRows:h,updateLimit:()=>{l(o+10);const{datasourceType:e,uid:t}=n;(0,c.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:e,logRowUid:t,newLimit:o+10})},limit:o,logsSortOrder:r})};class H extends a.PureComponent{render(){const{row:e,showDetectedFields:t,getFieldLinks:n,wrapLogMessage:s}=this.props,a=R(e,n),i=s?"":l.css`
          white-space: nowrap;
        `,r=t.map((e=>{const t=a.find((t=>{const{key:n}=t;return n===e}));return t?`${e}=${t.value}`:null})).filter((e=>null!==e)).join(" ");return(0,b.jsx)("td",{className:i,children:r})}}const q=(0,r.HE)(H);function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}q.displayName="LogRowMessageDetectedFields";class G extends a.PureComponent{constructor(){super(...arguments),Z(this,"state",{showContext:!1,showDetails:!1}),Z(this,"toggleContext",(e=>{var t,n;const{datasourceType:s,uid:a}=this.props.row;(0,c.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:s,logRowUid:a,type:e}),null===(t=(n=this.props).toggleContextIsOpen)||void 0===t||t.call(n),this.setState((e=>({showContext:!e.showContext})))})),Z(this,"toggleDetails",(()=>{this.props.enableLogDetails&&((0,c.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState((e=>({showDetails:!e.showDetails}))))}))}renderTimeStamp(e){return(0,d.dq)(e,{timeZone:this.props.timeZone})}renderLogRow(e,t,n,s,a){const{getRows:i,onClickFilterLabel:r,onClickFilterOutLabel:d,onClickShowDetectedField:c,onClickHideDetectedField:g,enableLogDetails:m,row:f,showDuplicates:v,showContextToggle:x,showRowMenu:y,showLabels:w,showTime:j,showDetectedFields:S,wrapLogMessage:k,prettifyLogMessage:N,theme:O,getFieldLinks:I,forceEscape:$,onLogRowHover:R,app:P,scrollElement:D}=this.props,{showDetails:A,showContext:M}=this.state,L=(0,C.h)(O,f.logLevel),F=(e=>({topVerticalAlign:l.css`
      label: topVerticalAlign;
      margin-top: -${e.spacing(.9)};
      margin-left: -${e.spacing(.25)};
    `,detailsOpen:l.css`
      &:hover {
        background-color: ${u.hoverColor(e.colors.background.primary,e)};
      }
    `,errorLogRow:l.css`
      label: erroredLogRow;
      color: ${e.colors.text.secondary};
    `}))(O),{errorMessage:E,hasError:B}=(0,o.Mi)(f),_=(0,l.cx)(L.logsRow,{[F.errorLogRow]:B,[L.contextBackground]:M}),W=f.hasUnescapedContent&&$?Object.assign({},f,{entry:(0,o.l3)(f.entry),raw:(0,o.l3)(f.raw)}):f;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{className:_,onClick:this.toggleDetails,onMouseEnter:()=>{R&&R(f)},onMouseLeave:()=>{R&&R(void 0)},children:[v&&(0,b.jsx)("td",{className:L.logsRowDuplicates,children:W.duplicates&&W.duplicates>0?`${W.duplicates+1}x`:null}),(0,b.jsx)("td",{className:(0,l.cx)({[L.logsRowLevel]:!B}),children:B&&(0,b.jsx)(h.u,{content:`Error: ${E}`,placement:"right",theme:"error",children:(0,b.jsx)(p.J,{className:L.logIconError,name:"exclamation-triangle",size:"xs"})})}),m&&(0,b.jsx)("td",{title:A?"Hide log details":"See log details",className:L.logsRowToggleDetails,children:(0,b.jsx)(p.J,{className:F.topVerticalAlign,name:A?"angle-down":"angle-right"})}),j&&(0,b.jsx)("td",{className:L.logsRowLocalTime,children:this.renderTimeStamp(f.timeEpochMs)}),w&&W.uniqueLabels&&(0,b.jsx)("td",{className:L.logsRowLabels,children:(0,b.jsx)(z.j,{labels:W.uniqueLabels})}),S&&S.length>0?(0,b.jsx)(q,{row:W,showDetectedFields:S,getFieldLinks:I,wrapLogMessage:k}):(0,b.jsx)(T.r,{row:W,getRows:i,errors:t,hasMoreContextRows:n,updateLimit:s,context:e,contextIsOpen:M,showContextToggle:x,showRowMenu:y,wrapLogMessage:k,prettifyLogMessage:N,onToggleContext:this.toggleContext,app:P,scrollElement:D,logsSortOrder:a})]}),this.state.showDetails&&(0,b.jsx)(V,{className:_,showDuplicates:v,getFieldLinks:I,onClickFilterLabel:r,onClickFilterOutLabel:d,onClickShowDetectedField:c,onClickHideDetectedField:g,getRows:i,row:W,wrapLogMessage:k,hasError:B,showDetectedFields:S,app:P})]})}render(){const{showContext:e}=this.state,{logsSortOrder:t,row:n,getRowContext:s}=this.props;return e?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(U,{row:n,getRowContext:s,logsSortOrder:t,children:e=>{let{result:t,errors:n,hasMoreContextRows:s,updateLimit:a,logsSortOrder:i}=e;return(0,b.jsx)(b.Fragment,{children:this.renderLogRow(t,n,s,a,i)})}})}):this.renderLogRow()}}const Q=(0,r.HE)(G);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Q.displayName="LogRow";class J extends a.PureComponent{constructor(){super(...arguments),K(this,"renderAllTimer",null),K(this,"state",{renderAll:!1,contextIsOpen:!1}),K(this,"toggleContextIsOpen",(()=>{this.setState((e=>({contextIsOpen:!e.contextIsOpen})))})),K(this,"makeGetRows",(0,s.Z)((e=>()=>e))),K(this,"sortLogs",(0,s.Z)(((e,t)=>(0,o.$u)(e,t))))}componentDidMount(){const{logRows:e,previewLimit:t}=this.props,n=(e?e.length:0)<=2*t;n?this.setState({renderAll:n}):this.renderAllTimer=window.setTimeout((()=>this.setState({renderAll:!0})),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:e,showContextToggle:t,showLabels:n,showTime:s,wrapLogMessage:a,prettifyLogMessage:r,logRows:o,deduplicatedRows:l,timeZone:d,onClickFilterLabel:c,onClickFilterOutLabel:u,theme:h,enableLogDetails:p,previewLimit:g,getFieldLinks:m,logsSortOrder:f,showDetectedFields:v,onClickShowDetectedField:x,onClickHideDetectedField:y,forceEscape:w,onLogRowHover:j,app:S,scrollElement:k}=this.props,{renderAll:N,contextIsOpen:O}=this.state,{logsRowsTable:I}=(0,C.h)(h),T=l||o,$=o&&o.length>0,R=T?T.reduce(((e,t)=>t.duplicates?e+t.duplicates:e),0):0,P=e!==i.Y4.none&&R>0,D=T||[],A=f?this.sortLogs(D,f):D,M=A.slice(0,g),L=A.slice(g,A.length),F=this.makeGetRows(A),E=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return(0,b.jsx)("table",{className:I,children:(0,b.jsxs)("tbody",{children:[$&&M.map(((e,i)=>(0,b.jsx)(Q,{getRows:F,getRowContext:E,row:e,showContextToggle:t,showRowMenu:!O,showDuplicates:P,showLabels:n,showTime:s,showDetectedFields:v,wrapLogMessage:a,prettifyLogMessage:r,timeZone:d,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:u,onClickShowDetectedField:x,onClickHideDetectedField:y,getFieldLinks:m,logsSortOrder:f,forceEscape:w,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:j,app:S,scrollElement:k},e.uid))),$&&N&&L.map(((e,i)=>(0,b.jsx)(Q,{getRows:F,getRowContext:E,row:e,showContextToggle:t,showRowMenu:!O,showDuplicates:P,showLabels:n,showTime:s,showDetectedFields:v,wrapLogMessage:a,prettifyLogMessage:r,timeZone:d,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:u,onClickShowDetectedField:x,onClickHideDetectedField:y,getFieldLinks:m,logsSortOrder:f,forceEscape:w,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:j,app:S,scrollElement:k},e.uid))),$&&!N&&(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,children:["Rendering ",A.length-g," rows..."]})})]})})}}K(J,"defaultProps",{previewLimit:100});const Y=(0,r.HE)(J);Y.displayName="LogsRows"},39609:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var s=n(52423),a=n(93246),i=n(58906);const r=(e,t)=>{let n=e.isLight?e.v1.palette.gray5:e.v1.palette.gray2;const r=i.hoverColor(e.colors.background.secondary,e);switch(t){case a.in.crit:case a.in.critical:n="#705da0";break;case a.in.error:case a.in.err:n="#e24d42";break;case a.in.warning:case a.in.warn:n=e.colors.warning.main;break;case a.in.info:n="#7eb26d";break;case a.in.debug:n="#1f78c1";break;case a.in.trace:n="#6ed0e0"}return{logsRowMatchHighLight:s.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${e.components.textHighlight.text}
      background-color: ${e.components.textHighlight};
    `,logsRowsTable:s.css`
      label: logs-rows;
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.bodySmall.fontSize};
      width: 100%;
    `,contextBackground:s.css`
      background: ${r};
    `,logsRow:s.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${r};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${e.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:s.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:s.css`
      label: logs-row__level;
      max-width: ${e.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${e.spacing(.5)};
        background-color: ${n};
      }
    `,logIconError:s.css`
      color: ${e.colors.warning.main};
    `,logsRowToggleDetails:s.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:s.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:s.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:s.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:s.css`
      label: logs-row-details-table;
      border: 1px solid ${e.colors.border.medium};
      padding: 0 ${e.spacing(1)} ${e.spacing(1)};
      border-radius: ${e.shape.borderRadius(1.5)};
      margin: ${e.spacing(2.5)} ${e.spacing(1)} ${e.spacing(2.5)} ${e.spacing(2)};
      cursor: default;
    `,logDetailsTable:s.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:s.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${e.v1.palette.gray3};
      padding-top: ${e.spacing(.75)};
      padding-left: ${e.spacing(.75)};
    `,logDetailsLabel:s.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${e.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:s.css`
      label: logs-row-details__heading;
      font-weight: ${e.typography.fontWeightBold};
      padding: ${e.spacing(1)} 0 ${e.spacing(.5)};
    `,logDetailsValue:s.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${r};
      }
    `}}},97281:(e,t,n)=>{"use strict";n.d(t,{$u:()=>v,DA:()=>g,MT:()=>p,Mi:()=>b,ZO:()=>r,bA:()=>l,i6:()=>u,j0:()=>f,jx:()=>o,l3:()=>x,lL:()=>c,zd:()=>d});var s=n(82897),a=n(93246);const i=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function r(e){if(!e)return a.in.unknown;let t,n=a.in.unknown;for(const s of Object.keys(a.in)){const i=new RegExp(`\\b${s}\\b`,"i").exec(e);i&&(void 0===t||i.index<t)&&(n=a.in[s],t=i.index)}return n}function o(e){const t=a.in[e.toString().toLowerCase()];return t||a.in.unknown}const l={JSON:{buildMatcher:e=>new RegExp(`(?:{|,)\\s*"${e}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:e=>{try{const t=JSON.parse(e);return Object.keys(t).map((e=>`"${e}":${JSON.stringify(t[e])}`))}catch{}return[]},getLabelFromField:e=>(e.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:e=>(e.match(/:\s*(.*)$/)||[])[1],test:e=>{let t;try{t=JSON.parse(e)}catch(e){}return"object"==typeof t}},logfmt:{buildMatcher:e=>new RegExp(`(?:^|\\s)${(0,s.escapeRegExp)(e)}=("[^"]*"|\\S+)`),getFields:e=>{const t=[];return e.replace(new RegExp(i,"g"),(e=>(t.push(e.trim()),""))),t},getLabelFromField:e=>(e.match(i)||[])[1],getValueFromField:e=>(e.match(i)||[])[2],test:e=>i.test(e)}};function d(e,t){const n=e.filter((e=>t.test(e.entry))),a=n.length,i=(0,s.countBy)(n,(e=>{const n=e.entry.match(t);return n?n[1]:null}));return h(i,a)}function c(e,t){const n=e.filter((e=>void 0!==e.labels[t])),a=n.length,i=(0,s.countBy)(n,(e=>e.labels[t]));return h(i,a)}function u(e){const t=e.filter((e=>null!=e)),n=(0,s.countBy)(t);return h(n,t.length)}const h=(e,t)=>(0,s.chain)(e).map(((e,n)=>({count:e,value:n,proportion:e/t}))).sortBy("count").reverse().value();function p(e){let t;try{l.JSON.test(e)&&(t=l.JSON)}catch(e){}return!t&&l.logfmt.test(e)&&(t=l.logfmt),t}const g=(e,t)=>e.timeEpochMs<t.timeEpochMs?-1:e.timeEpochMs>t.timeEpochMs?1:e.timeEpochNs<t.timeEpochNs?-1:e.timeEpochNs>t.timeEpochNs?1:0,m=(e,t)=>e.timeEpochMs>t.timeEpochMs?-1:e.timeEpochMs<t.timeEpochMs?1:e.timeEpochNs>t.timeEpochNs?-1:e.timeEpochNs<t.timeEpochNs?1:0,f=(e,t)=>{const n=e?v(e.rows,t):[];return e?Object.assign({},e,{rows:n}):{hasUniqueLabels:!1,rows:n}},v=(e,t)=>t===a.UV.Ascending?e.sort(g):e.sort(m),b=e=>e.labels.__error__?{hasError:!0,errorMessage:e.labels.__error__}:{hasError:!1},x=e=>e.replace(/\\r\\n|\\n|\\t|\\r/g,(e=>"t"===e.slice(1)?"\t":"\n"))},97801:(e,t,n)=>{"use strict";n.d(t,{H:()=>g});n(68404);var s=n(40941),a=n(8006),i=n(41519),r=n(52423),o=n(16755),l=n(2024),d=n(45916);const c=e=>{let{title:t}=e;const n=(0,o.wW)(h);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:n.title,children:"Do you want to delete this public dashboard?"}),(0,d.jsx)("p",{className:n.description,children:t?`This will delete the public dashboard for "${t}". Your dashboard will not be deleted.`:"Orphaned public dashboard will be deleted"})]})},u=e=>{let{dashboardTitle:t,onConfirm:n,onDismiss:s}=e;return(0,d.jsx)(l.s,{isOpen:!0,body:(0,d.jsx)(c,{title:t}),onConfirm:n,onDismiss:s,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},h=e=>({title:r.css`
    margin-bottom: ${e.spacing(1)};
  `,description:r.css`
    font-size: ${e.typography.bodySmall.fontSize};
  `}),p=["dashboard","publicDashboard","loader","children","onDismiss"];const g=e=>{let{dashboard:t,publicDashboard:n,loader:r,children:o,onDismiss:l}=e,c=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const[h,{isLoading:g}]=(0,i.bS)();return(0,d.jsx)(s.JY,{children:e=>{let{showModal:s,hideModal:i}=e;return(0,d.jsx)(a.zx,Object.assign({"aria-label":"Delete public dashboard",title:"Delete public dashboard",onClick:()=>s(u,{dashboardTitle:n.title,onConfirm:()=>{return s=i,h({dashboard:t,uid:(e=n).uid,dashboardUid:e.dashboardUid}),void s();var e,s},onDismiss:()=>{l?l():i()}})},c,{children:g&&r?r:o}))}})}},77281:(e,t,n)=>{"use strict";n.d(t,{t:()=>l});var s=n(42200);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i="dash-folder",r="dash-db";class o extends Error{constructor(e,t){super(t),a(this,"type",void 0),this.type=e}}const l=new class{constructor(){a(this,"rootName","general")}validateNewDashboardName(e,t){return this.validate(e,t,"A dashboard or a folder with the same name already exists")}validateNewFolderName(e){return this.validate(0,e,"A folder or dashboard in the general folder with the same name already exists")}async validate(e,t,n){const a=(t=(t||"").trim()).toLowerCase();if(0===t.length)throw new o("REQUIRED","Name is required");if(0===e&&a===this.rootName)throw new o("EXISTING","This is a reserved name and cannot be used for a folder.");const l=[];l.push(s.ae.search({type:i,folderIds:[e],query:t})),l.push(s.ae.search({type:r,folderIds:[e],query:t}));const d=await Promise.all(l);let c=[];d.length>0&&d[0].length>0&&(c=d[0]),d.length>1&&d[1].length>0&&(c=c.concat(d[1]));for(const e of c)if(a===e.title.toLowerCase())throw new o("EXISTING",n)}}},1671:(e,t,n)=>{"use strict";n.d(t,{$j:()=>b,EW:()=>I,Fd:()=>S,L6:()=>N,ZL:()=>O,ct:()=>y,iM:()=>T,nQ:()=>g,q_:()=>p,uC:()=>C,ys:()=>v});var s=n(36298),a=n(93570),i=n(80795),r=n(8910),o=n(93686),l=n(47900),d=n(60057),c=n(98865),u=n(64663),h=n(74731);function p(e){return async t=>{try{t((0,h.AK)());const n=await(0,a.i)().get(`/api/gnet/dashboards/${e}`);t((0,h.S9)(n)),t(m(n.json)),t(f(n.json))}catch(e){t((0,h.eh)()),(0,a.kW)(e)&&t((0,o.$l)((0,l.t_)(e.data.message||e)))}}}function g(e){return async t=>{t((0,h.Nw)(e)),t(m(e)),t(f(e))}}function m(e){return t=>{if(e&&e.__inputs){const n=[];e.__inputs.forEach((e=>{const t={name:e.name,label:e.label,info:e.description,value:e.value,type:e.type,pluginId:e.pluginId,options:[]};e.type===h.n$.DataSource?x(e,t):t.info||(t.info="Specify a string constant"),n.push(t)})),t((0,h.Zc)(n))}}}function f(e){return async function(t){if(!e||!e.__elements)return;const n=[];for(const t of Object.values(e.__elements)){if(t.kind!==u.V.Panel)continue;const e=t.model,{type:s,description:a}=e,{uid:i,name:r}=t,o={model:{model:e,uid:i,name:r,version:0,meta:{},id:0,type:s,kind:u.V.Panel,description:a},state:h.KQ.New};try{const e=await(0,c.Mh)(i,!0);o.state=h.KQ.Exists,o.model=e}catch(e){if(404!==e.status)throw e}n.push(o)}t((0,h.C2)(n))}}function v(){return e=>{e((0,h.MO)())}}function b(e){return async(t,n)=>{var r,o;const l=n().importDashboard.dashboard,d=n().importDashboard.inputs;let c=[];null===(r=e.dataSources)||void 0===r||r.forEach(((e,t)=>{const n=d.dataSources[t];c.push({name:n.name,type:n.type,pluginId:n.pluginId,value:e.uid})})),null===(o=e.constants)||void 0===o||o.forEach(((e,t)=>{const n=d.constants[t];c.push({value:e,name:n.name,type:n.type})}));const u=await(0,a.i)().post("api/dashboards/import",{dashboard:Object.assign({},l,{title:e.title,uid:e.uid||l.uid}),overwrite:!0,inputs:c,folderId:e.folder.id}),h=s.u.stripBaseFromUrl(u.importedUrl);i.E1.push(h)}}const x=(e,t)=>{0===(0,r.F)().getList({pluginId:e.pluginId}).length?t.info="No data sources of type "+e.pluginName+" found":t.info||(t.info="Select a "+e.pluginName+" data source")};function y(e,t){const n=[];for(const s of e)n.push(j(w,!0,s,t));return $(n).then((e=>({totalCount:e.length,successCount:e.filter((e=>e.succeeded)).length,alreadyInFolderCount:e.filter((e=>e.alreadyInFolder)).length})))}async function w(e,t){const n=await(0,a.i)().get(`/api/dashboards/uid/${e}`);if(!n.meta.folderId&&0===t.id||n.meta.folderId===t.id)return{alreadyInFolder:!0};const s={dashboard:n.dashboard,folderId:t.id,overwrite:!1};try{return await C(s),{succeeded:!0}}catch(e){if((0,a.kW)(e)){var i;if("plugin-dashboard"!==(null===(i=e.data)||void 0===i?void 0:i.status))return{succeeded:!1};e.isHandled=!0}s.overwrite=!0;try{return await C(s),{succeeded:!0}}catch(e){return{succeeded:!1}}}}function j(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];return async n=>{try{const t=await e(...s);return Array.prototype.concat(n,[t])}catch(e){if(t)return n;throw e}}}function S(e,t){const n=[];for(const t of e)n.push(j(k,!0,t,!0));for(const e of t)n.push(j(T,!0,e,!0));return $(n)}function C(e){var t,n;return d.H.ignoreNextSave(),(0,a.i)().post("/api/dashboards/db/",{dashboard:e.dashboard,message:null!==(t=e.message)&&void 0!==t?t:"",overwrite:null!==(n=e.overwrite)&&void 0!==n&&n,folderId:e.folderId})}function k(e,t){return(0,a.i)().delete(`/api/folders/${e}?forceDeleteRules=false`,void 0,{showSuccessAlert:t})}function N(e){return(0,a.i)().post("/api/folders",e)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.i)().get("/api/search",{query:e,type:"dash-folder",permission:t,accesscontrol:n})}function I(e){return(0,a.i)().get(`/api/folders/id/${e}`)}function T(e,t){return(0,a.i)().delete(`/api/dashboards/uid/${e}`,{showSuccessAlert:t})}function $(e){return e.reduce(((e,t)=>Promise.resolve(e).then(t)),[])}},74731:(e,t,n)=>{"use strict";n.d(t,{AK:()=>f,C2:()=>g,G7:()=>i,KQ:()=>o,MO:()=>c,Nw:()=>p,S9:()=>h,ZP:()=>v,Zc:()=>u,eh:()=>m,n$:()=>r,wg:()=>l});var s=n(23067),a=n(28173);let i,r,o;!function(e){e[e.Gcom=0]="Gcom",e[e.Json=1]="Json"}(i||(i={})),function(e){e.DataSource="datasource",e.Constant="constant",e.LibraryPanel="libraryPanel"}(r||(r={})),function(e){e.New="new",e.Exists="exists",e.Different="different"}(o||(o={}));const l={meta:{updatedAt:"",orgName:""},dashboard:{},source:i.Json,inputs:{},state:a.Gu.NotStarted},d=(0,s.oM)({name:"manageDashboards",initialState:l,reducers:{setGcomDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload.json,{id:null}),e.meta={updatedAt:t.payload.updatedAt,orgName:t.payload.orgName},e.source=i.Gcom,e.state=a.Gu.Done},setJsonDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload,{id:null}),e.meta=l.meta,e.source=i.Json,e.state=a.Gu.Done},clearDashboard:e=>{e.dashboard={},e.state=a.Gu.NotStarted},setInputs:(e,t)=>{e.inputs={dataSources:t.payload.filter((e=>e.type===r.DataSource)),constants:t.payload.filter((e=>e.type===r.Constant)),libraryPanels:[]}},setLibraryPanelInputs:(e,t)=>{e.inputs.libraryPanels=t.payload},fetchFailed:e=>{e.dashboard={},e.state=a.Gu.Error},fetchDashboard:e=>{e.state=a.Gu.Loading}}}),{clearDashboard:c,setInputs:u,setGcomDashboard:h,setJsonDashboard:p,setLibraryPanelInputs:g,fetchFailed:m,fetchDashboard:f}=d.actions,v={importDashboard:d.reducer}},6551:(e,t,n)=>{"use strict";n.d(t,{FV:()=>o,JE:()=>c,Q$:()=>l,RF:()=>r,Yi:()=>d});var s=n(93570),a=n(93686),i=n(66347);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{getBackendSrv:s.i};return async t=>{const n=await e.getBackendSrv().get("/api/org");return t((0,i.jR)(n)),n}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{getBackendSrv:s.i};return async(t,n)=>{const s=n().organization.organization;await e.getBackendSrv().put("/api/org",{name:s.name}),t((0,a.H7)(s.name)),t(r(e))}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getBackendSrv:s.i};return async n=>{const s=await t.getBackendSrv().post("/api/user/using/"+e);n((0,a.H7)(s.name))}}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getBackendSrv:s.i};return async n=>{n(l((await t.getBackendSrv().post("/api/orgs/",e)).orgId))}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{getBackendSrv:s.i};return async t=>{const n=await e.getBackendSrv().get("/api/user/orgs");return t((0,i.IM)(n)),n}}},66347:(e,t,n)=>{"use strict";n.d(t,{IM:()=>r,ZP:()=>o,jR:()=>i,xR:()=>a});const s=(0,n(23067).oM)({name:"organization",initialState:{organization:{},userOrgs:[]},reducers:{organizationLoaded:(e,t)=>Object.assign({},e,{organization:t.payload}),setOrganizationName:(e,t)=>Object.assign({},e,{organization:Object.assign({},e.organization,{name:t.payload})}),userOrganizationsLoaded:(e,t)=>Object.assign({},e,{userOrgs:t.payload})}}),{setOrganizationName:a,organizationLoaded:i,userOrganizationsLoaded:r}=s.actions,o={organization:s.reducer}},90374:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var s=n(52423),a=(n(68404),n(40389)),i=n(54316),r=n(16755),o=n(27783),l=n(40768),d=n(42949),c=n(78130),u=n(66190),h=n(15968),p=n(94722),g=n(64850),m=n(115),f=n(45916);function v(e){const t=(0,r.wW)(b),n=(0,o.R9)(),s=new a.mi(e.data),{dataSummary:v}=s,x=function(e,t){let{data:n,fieldConfig:s,message:a,needsNumberField:i,needsTimeField:r,needsStringField:o}=e;if(a)return a;var l;if(!n.series||0===n.series.length||1===n.series.length&&0===n.series[0].length)return null!==(l=null==s?void 0:s.defaults.noValue)&&void 0!==l?l:"No data";if(o&&!t.hasStringField)return"Data is missing a string field";if(i&&!t.hasNumberField)return"Data is missing a number field";if(r&&!t.hasTimeField)return"Data is missing a time field";return"Cannot visualize data"}(e,v),y=(0,g.I0)();return(0,f.jsxs)("div",{className:t.wrapper,children:[(0,f.jsx)("div",{className:t.message,children:x}),n.app===i.zj.PanelEditor&&v.hasData&&(0,f.jsxs)("div",{className:t.actions,children:[(0,f.jsx)(l.x,{icon:"table",onClick:()=>{var t;const n=null===(t=(0,p.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.panelId);n&&y((0,m.Kc)({panel:n,pluginId:"table"}))},children:"Switch to table"}),(0,f.jsx)(l.x,{icon:"chart-line",onClick:()=>{c.Z.setObject(d.FL,h.Ok.Suggestions),y((0,u.g_)(!0))},children:"Open visualization suggestions"})]})]})}const b=e=>({wrapper:(0,s.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,s.css)({textAlign:"center",color:e.colors.text.secondary,fontSize:e.typography.size.lg,width:"100%"}),actions:(0,s.css)({marginTop:e.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:e.spacing(1),rowGap:e.spacing(1),width:"100%",maxWidth:"600px"})})},27277:(e,t,n)=>{"use strict";n.d(t,{F:()=>u,X:()=>h});var s,a=n(68404),i=n(18151),r=n(15546),o=n(2843),l=n(64850),d=n(45916);class c extends a.PureComponent{constructor(e){super(e)}render(){return(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,d.jsx)(o.b,Object.assign({severity:l.F1.Error},this.props))})}}function u(e,t){const n=class extends a.PureComponent{render(){const t=(0,d.jsxs)(d.Fragment,{children:["Check the server startup logs for more information. ",s||(s=(0,d.jsx)("br",{})),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,d.jsx)(c,{title:`Error loading: ${e.id}`,text:t})}},r=new i.c(n);return r.meta=e,r.loadError=!0,r}function h(e,t){const n=class extends a.PureComponent{render(){return(0,d.jsx)(c,{title:`Panel plugin not found: ${e}`})}},s=new i.c(t?()=>null:n);return s.meta={id:e,name:e,sort:100,type:r.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},s}},13626:(e,t,n)=>{"use strict";n.d(t,{$:()=>x});var s,a,i,r=n(68404),o=n(36345),l=n(97254),d=n(7213),c=n(3448),u=n(71855),h=n(72767),p=n(16755),g=n(68374),m=n(58808),f=n(21167),v=n(45916);const b={defaults:{},overrides:[]};function x(e){const{pluginId:t,data:n,timeZone:x=(0,l.Z)(),options:y={},width:w,height:j,title:S,onOptionsChange:C=(()=>{}),onChangeTimeRange:k=(()=>{}),onFieldConfigChange:N=(()=>{}),fieldConfig:O=b}=e,[I,T]=(0,r.useState)((0,f.q1)(t)),[$,R]=(0,r.useState)(),P=function(e,t,n){return(0,r.useMemo)((()=>{if(e)return(0,m.d4)({plugin:e,currentOptions:t,currentFieldConfig:n,isAfterPluginChange:!1})}),[e,n,t])}(I,y,O),D=function(e,t,n,s){const a=null==t?void 0:t.fieldConfig,i=null==e?void 0:e.fieldConfigRegistry,l=(0,p.l4)(),d=(0,r.useRef)(0),h=(0,o.Z)(null==n?void 0:n.series);return(0,r.useMemo)((()=>{if(!i||!a||!n)return;const e=null==n?void 0:n.series;return null==n.structureRev&&e&&h&&!(0,c.nl)(e,h,c.Ch)&&d.current++,Object.assign({structureRev:d.current},n,{series:(0,u.SM)({data:e,fieldConfig:a,fieldConfigRegistry:i,replaceVariables:e=>e,theme:l,timeZone:s})})}),[i,a,n,h,s,l])}(I,P,n,x);if((0,r.useEffect)((()=>{I&&I.hasPluginId(t)||(0,f.Ub)(t).then((e=>T(e))).catch((e=>{R(e.message)}))}),[t,I]),$)return(0,v.jsxs)("div",{children:["Failed to load plugin: ",$]});if(!I||!I.hasPluginId(t))return s||(s=(0,v.jsx)("div",{children:"Loading plugin panel..."}));if(!I.panel)return a||(a=(0,v.jsx)("div",{children:"Seems like the plugin you are trying to load does not have a panel component."}));if(!D)return i||(i=(0,v.jsx)("div",{children:"No panel data"}));const A=I.panel;return(0,v.jsx)(h.z4,{dependencies:[I,n],children:(0,v.jsx)(d.b,{meta:I.meta,children:(0,v.jsx)(A,{id:1,data:D,title:S,timeRange:D.timeRange,timeZone:x,options:P.options,fieldConfig:O,transparent:!1,width:w,height:j,renderCounter:0,replaceVariables:e=>e,onOptionsChange:C,onFieldConfigChange:N,onChangeTimeRange:k,eventBus:g.h$})})})}},48951:(e,t,n)=>{"use strict";n.d(t,{H:()=>l,n:()=>o});var s=n(68633),a=n(55343),i=n(79869),r=n(2417);const o=e=>{const t=e.field.links;if(t&&0!==t.length)return{getLinks:n=>{const o={};if(e.view){const{dataFrame:t}=e.view;o.__series={value:{name:t.name,refId:t.refId},text:"Series"};const n=void 0!==e.colIndex?t.fields[e.colIndex]:void 0;if(n){if(o.__field={value:{name:n.name,labels:n.labels},text:"Field"},void 0!==e.rowIndex&&e.rowIndex>=0){const{timeField:i}=(0,s.sV)(t);o.__value={value:{raw:n.values.get(e.rowIndex),numeric:e.display.numeric,text:(0,a.zc)(e.display),time:i?i.values.get(e.rowIndex):void 0},text:"Value"}}e.view&&(o.__data={value:{name:t.name,refId:t.refId,fields:(0,i.z)({frame:t,rowIndex:e.rowIndex})},text:"Data"})}else o.__value={value:{raw:e.display.numeric,numeric:e.display.numeric,text:(0,a.zc)(e.display),calc:e.name},text:"Value"}}else console.log("VALUE",e);const l=(e,t,s)=>{const a=Object.assign({},o,t);return n(e,a,s)};return t.map((t=>(0,r.Bq)().getDataLinkUIModel(t,l,e)))}}},l=e=>{const t=e.links;if(t&&0!==t.length)return{getLinks:()=>t.map((t=>(0,r.Bq)().getDataLinkUIModel(t,e.replaceVariables,e)))}}},2417:(e,t,n)=>{"use strict";n.d(t,{Bq:()=>N,PR:()=>y,PW:()=>S});var s=n(82897),a=n(66827),i=n(66358),r=n(32934),o=n(27843),l=n(36298),d=n(76093),c=n(274),u=n(61069),h=n(2633),p=n(46782),g=n(53091),m=n(46076);const f=[{value:`${a.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:i.L.BuiltIn},{value:`${a.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:i.L.BuiltIn},{value:`${a.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:i.L.BuiltIn}],v=[{value:`${a.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:i.L.Series}],b=[{value:`${a.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:i.L.Value},{value:`${a.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:i.L.Value},{value:`${a.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:i.L.Value}],x=e=>e.includes(".")||e.trim().includes(" ")?`["${e}"]`:`.${e}`,y=()=>[...(0,h.J)().getVariables().map((e=>({value:e.name,label:e.name,origin:i.L.Template}))),{value:`${a.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:i.L.Template},...f],w=e=>{const t=[];for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.push(n);const n=(0,s.chain)(t).flatten().uniq().value();return[{value:`${a.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:i.L.Field},...n.map((e=>({value:`__field.labels${x(e)}`,label:`labels.${e}`,documentation:`${e} label value`,origin:i.L.Field})))]},j=e=>{let t,n;const s=[],a={};if(1!==e.length)return[];const l=e[0];for(const d of l.fields){const c=(0,r.C)(d,l,e);a[c]||(s.push({value:`__data.fields${x(c)}`,label:`${c}`,documentation:`Formatted value for ${c} on the same row`,origin:i.L.Fields}),a[c]=!0,t||d.type!==o.fS.number||(t=Object.assign({},d,{name:c})),!n&&d.config.displayName&&d.config.displayName!==d.name&&(n=Object.assign({},d,{name:c})))}return s.length&&s.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:i.L.Fields}),t&&(s.push({value:`__data.fields${x(t.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:i.L.Fields}),s.push({value:`__data.fields${x(t.name)}.text`,label:"Show text value",documentation:"the text value",origin:i.L.Fields})),n&&s.push({value:`__data.fields${x(n.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:i.L.Fields}),s},S=(e,t)=>{const n={value:`${a.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:i.L.Value};return t===i.o.Values?[...v,...w(e),...b,n,...j(e),...y()]:[...v,...w(e),...j(e),...y()]};class C{constructor(){var e,t,n;n=(e,t,n)=>{var s;let a=e.url;e.onBuildUrl&&(a=e.onBuildUrl({origin:n,replaceVariables:t}));const i={href:l.u.assureBaseUrl(a.replace(/\n/g,"")),title:null!==(s=e.title)&&void 0!==s?s:"",target:e.targetBlank?"_blank":void 0,origin:n};return t&&(i.href=t(i.href),i.title=t(e.title)),e.onClick&&(i.onClick=s=>{e.onClick({origin:n,replaceVariables:t,e:s})}),i.href=(0,p.iE)().disableSanitizeHtml?i.href:d.QX.sanitizeUrl(i.href),i},(t="getDataLinkUIModel")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getLinkUrl(e){let t=l.u.assureBaseUrl((0,h.J)().replace(e.url||"")),n={};if(e.keepTime){const e=(0,g.$t)().timeRangeForUrl();n.from=e.from,n.to=e.to}return e.includeVars&&(n=Object.assign({},n,(0,m.c)())),t=c.Cj.appendQueryToUrl(t,c.Cj.toUrlParams(n)),(0,p.iE)().disableSanitizeHtml?t:d.QX.sanitizeUrl(t)}getAnchorInfo(e){const t=(0,h.J)(),n={};return n.href=this.getLinkUrl(e),n.title=t.replace(e.title||""),n.tooltip=t.replace(e.tooltip||""),n}getPanelLinkAnchorInfo(e,t){(0,u.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");return this.getDataLinkUIModel(e,((e,n,s)=>(0,h.J)().replace(e,Object.assign({},t,n),s)),{})}}let k;function N(){return k||(k=new C),k}},115:(e,t,n)=>{"use strict";n.d(t,{JI:()=>d,Kc:()=>u,ih:()=>h,qj:()=>c});var s=n(58808),a=n(98865),i=n(27277),r=n(71482),o=n(8105),l=n(29705);function d(e){return async(t,n)=>{var s;if(null!==(s=e.libraryPanel)&&void 0!==s&&s.uid&&!("model"in e.libraryPanel))return void t(function(e){return async t=>{const n=e.libraryPanel.uid;try{const s=await(0,a.Mh)(n,!0);e.initLibraryPanel(s),t(d(e))}catch(s){console.log("ERROR: ",s),t((0,l.bc)({key:e.key,plugin:(0,i.X)("Unable to load library panel: "+n,!1)}))}}}(e));let o=e.type,c=n().plugins.panels[o];if(!c)try{c=await t((0,r.Ro)(o))}catch(e){c=(0,i.X)(o,"row"===o)}e.plugin||e.pluginLoaded(c),t((0,l.bc)({key:e.key,plugin:c}))}}function c(e){return t=>{t((0,l.WJ)({key:e}))}}function u(e){let{panel:t,pluginId:n,options:a,fieldConfig:i}=e;return async(e,o)=>{if(t.type===n&&!a&&!i)return;let d=o().plugins.panels[n];if(d||(d=await e((0,r.Ro)(n))),t.type!==n&&t.changePlugin(d),a||i){const e=(0,s.d4)({plugin:d,currentOptions:a||t.options,currentFieldConfig:i||t.fieldConfig,isAfterPluginChange:!1});t.options=e.options,t.fieldConfig=e.fieldConfig,t.configRev++}t.generateNewKey(),e((0,l.bc)({key:t.key,plugin:d}))}}function h(e,t){return async(n,s)=>{const a=t.model.type,i=e.type;if(e.restoreModel(Object.assign({},t.model,{gridPos:e.gridPos,id:e.id,libraryPanel:t})),e.getQueryRunner().clearLastResult(),i!==a){let t=s().plugins.panels[a];t||(t=await n((0,r.Ro)(a))),e.pluginLoaded(t),e.generateNewKey(),await n((0,l.bc)({key:e.key,plugin:t}))}else{const t=e.key;e.generateNewKey(),n((0,l.mr)({oldKey:t,newKey:e.key}))}e.configRev=0,e.hasSavedPanelEditChange=!0,e.refresh(),e.events.publish(o.pO),e.events.publish(o.Wj)}}},29705:(e,t,n)=>{"use strict";n.d(t,{Vl:()=>d,WJ:()=>l,ZP:()=>c,bc:()=>a,mr:()=>o,o8:()=>i,pC:()=>r});const s=(0,n(23067).oM)({name:"panels",initialState:{},reducers:{panelModelAndPluginReady:(e,t)=>{e[t.payload.key]={plugin:t.payload.plugin}},changePanelKey:(e,t)=>{e[t.payload.newKey]=e[t.payload.oldKey],delete e[t.payload.oldKey]},removePanel:(e,t)=>{delete e[t.payload.key]},removeAllPanels:e=>{Object.keys(e).forEach((t=>delete e[t]))},setPanelInstanceState:(e,t)=>{e[t.payload.key].instanceState=t.payload.value},setPanelAngularComponent:(e,t)=>{e[t.payload.key].angularComponent=t.payload.angularComponent}}}),{panelModelAndPluginReady:a,setPanelAngularComponent:i,setPanelInstanceState:r,changePanelKey:o,removePanel:l,removeAllPanels:d}=s.actions,c={panels:s.reducer}},17321:(e,t,n)=>{"use strict";function s(e,t){return e.panels[t.key]}n.d(t,{i:()=>s})},54876:(e,t,n)=>{"use strict";n.d(t,{r0:()=>u});var s=n(82897),a=n(36298),i=n(274),r=n(85699),o=n(80795),l=n(11603);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={kiosk:!0,autofitpanels:!0,orgId:!0};const u=new class{constructor(){d(this,"nextTimeoutId",void 0),d(this,"urls",[]),d(this,"index",0),d(this,"numberOfLoops",0),d(this,"locationListenerUnsub",void 0),d(this,"isPlaying",!1),this.locationUpdated=this.locationUpdated.bind(this)}next(){clearTimeout(this.nextTimeoutId);if(this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3)return void(window.location.href=this.startUrl);this.index=0}const e=this.urls[this.index],t=o.E1.getSearchObject(),n=(0,s.pickBy)(t,((e,t)=>c[t])),r=a.u.stripBaseFromUrl(e);this.index++,this.validPlaylistUrl=r,this.nextTimeoutId=setTimeout((()=>this.next()),this.interval),o.E1.push(r+"?"+i.Cj.toUrlParams(n))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(e){e.pathname!==this.validPlaylistUrl&&this.stop()}async start(e){var t;this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=o.E1.getHistory().listen(this.locationUpdated);const n=[];let s=await(0,l.A5)(e);if(null===(t=s.items)||void 0===t||!t.length)return;this.interval=r.intervalToMs(s.interval);const a=await(0,l.jc)(s.items);for(const e of a)if(e.dashboards)for(const t of e.dashboards)n.push(t.url);n.length&&(this.urls=n,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),o.E1.getSearchObject().kiosk&&o.E1.partial({kiosk:null}))}}},11603:(e,t,n)=>{"use strict";n.d(t,{A5:()=>f,CE:()=>g,Ds:()=>w,Dv:()=>v,cg:()=>p,d5:()=>y,jc:()=>x,l8:()=>m});var s=n(3363),a=n(32898),i=n(93570),r=n(65737),o=n(93686),l=n(47900),d=n(45857),c=n(18311),u=n(63454),h=n(20425);async function p(e){await b((()=>(0,i.i)().post("/api/playlists",e)))}async function g(e,t){await b((()=>(0,i.i)().put(`/api/playlists/${e}`,t)))}async function m(e){await b((()=>(0,i.i)().delete(`/api/playlists/${e}`)),"Playlist deleted")}async function f(e){const t=await(0,i.i)().get(`/api/playlists/${e}`);if(t.items)for(const e of t.items)if("dashboard_by_id"===e.type){e.type="dashboard_by_uid";const t=await(0,i.i)().get(`/api/dashboards/ids/${e.value}`);t.length&&(e.value=t[0])}return t}async function v(){return(0,i.i)().get("/api/playlists/")}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Playlist saved";try{await e(),(0,u.WI)((0,o.$l)((0,l.AT)(t)))}catch(e){e instanceof Error&&(0,u.WI)((0,o.$l)((0,l.t_)("Unable to save playlist",e)))}}async function x(e){let t=0;if(null==e||!e.length)return[];const n=[];for(const s of e){const e={query:"*",kind:["dashboard"],limit:1e3};switch(s.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":e.uid=[s.value];break;case"dashboard_by_tag":e.tags=[s.value]}n.push({refId:""+t++,queryType:c.hR.Search,search:e})}if(!r.v.featureToggles.panelTitleSearch){const t=(0,h.O)(),s=[];for(let a=0;a<n.length;a++){const i=(await t.search(n[a].search)).view;s.push(Object.assign({},e[a],{dashboards:i.map((e=>Object.assign({},e)))}))}return s}const i=await(0,d.e)(),o=await(0,s.n)(i.query({targets:n}));if(o.data.length!==e.length)throw new Error("unexpected result size");return e.map(((e,t)=>{const n=new a.U(o.data[t]);return Object.assign({},e,{dashboards:n.map((e=>Object.assign({},e)))})}))}function y(){return{items:[],interval:"5m",name:"",uid:""}}function w(e,t){var n;return null!==(n=t)&&void 0!==n&&n.length?(t=t.toLowerCase(),e.filter((e=>e.name.toLowerCase().includes(t)))):e}},60299:(e,t,n)=>{"use strict";n.d(t,{$F:()=>d,E1:()=>p,GP:()=>m,GV:()=>l,P6:()=>f,Tk:()=>g,jL:()=>c});var s=n(42870),a=n(93570),i=n(83997),r=n(68168),o=n(13467);async function l(e){var t,n,s,i;const o=await async function(e){try{return await(0,a.i)().get(`${r.tB}/plugins/${e}`,{})}catch(e){return void((0,a.kW)(e)&&(e.isHandled=!0))}}(e),l=Boolean(o),[d,c,g]=await Promise.all([p(),u(e,l),h(e)]),m=d.find((t=>t.id===e)),f=(null==m?void 0:m.dependencies)||(null==o||null===(t=o.json)||void 0===t?void 0:t.dependencies);return{grafanaDependency:null!==(n=null!==(s=null==f?void 0:f.grafanaDependency)&&void 0!==s?s:null==f?void 0:f.grafanaVersion)&&void 0!==n?n:"",pluginDependencies:(null==f?void 0:f.plugins)||[],links:(null==m?void 0:m.info.links)||(null==o||null===(i=o.json)||void 0===i?void 0:i.info.links)||[],readme:g||(null==o?void 0:o.readme),versions:c}}async function d(){const{items:e}=await(0,a.i)().get(`${r.tB}/plugins`);return e.filter(o.wB)}async function c(){try{return await(0,a.i)().get(`${r.O2}/errors`)}catch(e){return[]}}async function u(e,t){try{if(!t)return[];return((await(0,a.i)().get(`${r.tB}/plugins/${e}/versions`)).items||[]).map((e=>({version:e.version,createdAt:e.createdAt,isCompatible:e.isCompatible,grafanaDependency:e.grafanaDependency})))}catch(e){return(0,a.kW)(e)&&(e.isHandled=!0),[]}}async function h(e){try{const t=await(0,a.i)().get(`${r.O2}/${e}/markdown/README`);return t?(0,s.a)(t):""}catch(e){return(0,a.kW)(e)&&(e.isHandled=!0),""}}async function p(){return(await(0,a.i)().get(`${r.O2}`,(0,i.y)({embedded:0}))).filter(o.EP)}async function g(e){return await(0,a.i)().post(`${r.O2}/${e}/install`)}async function m(e){return await(0,a.i)().post(`${r.O2}/${e}/uninstall`)}async function f(e,t){const n=await(0,a.i)().datasourceRequest({url:`/api/plugins/${e}/settings`,method:"POST",data:t});return null==n?void 0:n.data}},37434:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(68404);var s=n(38953),a=n(45916);const i=e=>{let{text:t="Loading..."}=e;return(0,a.jsx)("div",{className:"page-loader-wrapper",children:(0,a.jsx)(s.u,{text:t})})}},68168:(e,t,n)=>{"use strict";n.d(t,{O2:()=>s,tB:()=>a,uJ:()=>i});const s="/api/plugins",a="/api/gnet",i="plugins"},13467:(e,t,n)=>{"use strict";n.d(t,{AA:()=>m,EP:()=>j,HT:()=>w,Nh:()=>g,RU:()=>x,Uj:()=>p,XB:()=>b,fG:()=>y,uR:()=>u,wB:()=>S});var s=n(15546),a=n(12482),i=n(65737),r=n(72677),o=n(68374),l=n(42200),d=n(64850),c=n(16371);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const s=[],a=f(n);return e.forEach((e=>{const n=t.find((t=>t.slug===e.id)),i=a[e.id];n||s.push(h(e,void 0,i))})),t.forEach((t=>{const n=e.find((e=>e.id===t.slug)),i=a[t.slug];s.push(h(n,t,i))})),s}function h(e,t,n){return!e&&t?function(e,t){const{name:n,slug:s,description:a,version:i,orgName:r,popularity:o,downloads:l,typeCode:d,updatedAt:c,createdAt:u,status:h}=e,p=!!t||k(d);return{description:a,downloads:l,id:s,info:{logos:{small:`https://grafana.com/api/plugins/${s}/versions/${i}/logos/small`,large:`https://grafana.com/api/plugins/${s}/versions/${i}/logos/large`}},name:n,orgName:r,popularity:o,publishedAt:u,signature:v({remote:e,error:t}),updatedAt:c,hasUpdate:!1,isPublished:!0,isInstalled:p,isDisabled:p,isCore:e.internal,isDev:!1,isEnterprise:"enterprise"===h,type:d,error:null==t?void 0:t.errorCode}}(t,n):e&&!t?function(e,t){const{name:n,info:{description:s,version:a,logos:i,updated:r,author:o},id:l,dev:d,type:c,signature:u,signatureOrg:h,signatureType:p,hasUpdate:g,accessControl:m}=e,f=!!t||k(c);return{description:s,downloads:0,id:l,info:{logos:i},name:n,orgName:o.name,popularity:0,publishedAt:"",signature:v({local:e,error:t}),signatureOrg:h,signatureType:p,updatedAt:r,installedVersion:a,hasUpdate:g,isInstalled:!0,isDisabled:f,isCore:"internal"===u,isPublished:!1,isDev:Boolean(d),isEnterprise:!1,type:c,error:null==t?void 0:t.errorCode,accessControl:m}}(e,n):function(e,t,n){const a=null==e?void 0:e.info.version,i=(null==t?void 0:t.slug)||(null==e?void 0:e.id)||"",r=(null==e?void 0:e.type)||(null==t?void 0:t.typeCode),o=!!n||k(r);let l={small:`/public/img/icn-${r}.svg`,large:`/public/img/icn-${r}.svg`};t?l={small:`https://grafana.com/api/plugins/${i}/versions/${t.version}/logos/small`,large:`https://grafana.com/api/plugins/${i}/versions/${t.version}/logos/large`}:e&&e.info.logos&&(l=e.info.logos);return{description:(null==e?void 0:e.info.description)||(null==t?void 0:t.description)||"",downloads:(null==t?void 0:t.downloads)||0,hasUpdate:(null==e?void 0:e.hasUpdate)||!1,id:i,info:{logos:l},isCore:Boolean((null==t?void 0:t.internal)||(null==e?void 0:e.signature)===s.Xy.internal),isDev:Boolean(null==e?void 0:e.dev),isEnterprise:"enterprise"===(null==t?void 0:t.status),isInstalled:Boolean(e)||o,isDisabled:o,isPublished:!0,name:(null==t?void 0:t.name)||(null==e?void 0:e.name)||"",orgName:(null==t?void 0:t.orgName)||(null==e?void 0:e.info.author.name)||"",popularity:(null==t?void 0:t.popularity)||0,publishedAt:(null==t?void 0:t.createdAt)||"",type:r,signature:v({local:e,remote:t,error:n}),signatureOrg:(null==e?void 0:e.signatureOrg)||(null==t?void 0:t.versionSignedByOrgName),signatureType:(null==e?void 0:e.signatureType)||(null==t?void 0:t.versionSignatureType)||(null==t?void 0:t.signatureType)||void 0,updatedAt:(null==t?void 0:t.updatedAt)||(null==e?void 0:e.info.updated)||"",installedVersion:a,error:null==n?void 0:n.errorCode,accessControl:null==e?void 0:e.accessControl}}(e,t,n)}const p=e=>`${i.v.pluginCatalogURL}${e}`;let g;!function(e){e.nameAsc="nameAsc",e.nameDesc="nameDesc",e.updated="updated",e.published="published",e.downloads="downloads"}(g||(g={}));const m=(e,t)=>{const n={nameAsc:(e,t)=>e.name.localeCompare(t.name),nameDesc:(e,t)=>t.name.localeCompare(e.name),updated:(e,t)=>(0,a.J)(t.updatedAt).valueOf()-(0,a.J)(e.updatedAt).valueOf(),published:(e,t)=>(0,a.J)(t.publishedAt).valueOf()-(0,a.J)(e.publishedAt).valueOf(),downloads:(e,t)=>t.downloads-e.downloads};return n[t]?e.sort(n[t]):e};function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>(e[t.pluginId]=t,e)),{})}function v(e){const{error:t,local:n,remote:a}=e;if(t)switch(t.errorCode){case s.w2.invalidSignature:return s.Xy.invalid;case s.w2.missingSignature:return s.Xy.missing;case s.w2.modifiedSignature:return s.Xy.modified}return null!=n&&n.signature?n.signature:null!=a&&a.signatureType||null!=a&&a.versionSignatureType?s.Xy.valid:s.Xy.missing}const b=()=>(0,l.i)().get("/api/frontend/settings").then((e=>{i.v.panels=e.panels}));function x(e){if(!e)return;const[t]=e.filter((e=>Boolean(e.isCompatible)));return t}const y=()=>i.v.pluginAdminEnabled,w=(e,t,n)=>{const a=i.v.pluginAdminExternalManageEnabled,l=o.Vt.hasAccess(d.bW.PluginsInstall,(0,c.bO)()),u=Boolean(n);return e.type===s.zV.renderer||e.type===s.zV.secretsmanager||e.isEnterprise&&!(0,r.v)("enterprise.plugins")||e.isDev||!l&&!a||!e.isPublished||!u||!t},j=e=>C(e.id),S=e=>C(e.slug);function C(e){const{pluginCatalogHiddenPlugins:t}=i.v;return!t.includes(e)}function k(e){return e===s.zV.secretsmanager&&!i.v.secretsManagerPluginEnabled}},16371:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>l,RN:()=>o,bO:()=>r});var s=n(46782),a=n(59196),i=n(64850);function r(){return s.vc.bootData.user.isGrafanaAdmin}function o(){return a.Vt.hasRole("Admin")}function l(){return a.Vt.hasPermission(i.bW.DataSourcesCreate)&&a.Vt.hasPermission(i.bW.DataSourcesWrite)}},71482:(e,t,n)=>{"use strict";n.d(t,{DD:()=>h,LP:()=>f,N9:()=>p,Qd:()=>c,Ro:()=>v,Tz:()=>g,m3:()=>m,tQ:()=>u});var s=n(23067),a=n(93570),i=n(21167),r=n(87060),o=n(60299),l=n(68168),d=n(13467);const c=(0,s.hg)(`${l.uJ}/fetchAll`,(async(e,t)=>{try{const{dispatch:e}=t,[n,s,{payload:a}]=await Promise.all([(0,o.E1)(),(0,o.jL)(),e(u())]);return(0,d.uR)(n,a,s)}catch(e){return t.rejectWithValue("Unknown error.")}})),u=(0,s.hg)(`${l.uJ}/fetchRemotePlugins`,(async(e,t)=>{try{return await(0,o.$F)()}catch(e){return(0,a.kW)(e)&&(e.isHandled=!0),t.rejectWithValue([])}})),h=(0,s.hg)(`${l.uJ}/fetchDetails`,(async(e,t)=>{try{return{id:e,changes:{details:await(0,o.GV)(e)}}}catch(e){return t.rejectWithValue("Unknown error.")}})),p=(0,s.hg)(`${l.uJ}/install`,(async(e,t)=>{let{id:n,version:s,isUpdating:a=!1}=e;const i=a?{isInstalled:!0,installedVersion:s,hasUpdate:!1}:{isInstalled:!0,installedVersion:s};try{return await(0,o.Tk)(n),await(0,d.XB)(),a&&(0,r.Hl)(n),{id:n,changes:i}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),g=(0,s.hg)(`${l.uJ}/uninstall`,(async(e,t)=>{try{return await(0,o.GP)(e),await(0,d.XB)(),(0,r.Hl)(e),{id:e,changes:{isInstalled:!1,installedVersion:void 0}}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),m=(0,s.hg)(`${l.uJ}/loadPluginDashboards`,(async(e,t)=>{const n=`api/plugins/${t.getState().dataSources.dataSource.type}/dashboards`;return(0,a.i)().get(n)})),f=(0,s.PH)(`${l.uJ}/panelPluginLoaded`),v=e=>async(t,n)=>{let s=n().plugins.panels[e];return s||(s=await(0,i.Ub)(e),n().plugins.panels[e]||t(f(s))),s}},45919:(e,t,n)=>{"use strict";n.d(t,{CD:()=>o,I6:()=>m,UC:()=>g});var s=n(23067),a=n(68168),i=n(95796),r=n(71482);const o=(0,s.HF)(),l=e=>new RegExp(`${a.uJ}/(.*)/pending`).test(e.type),d=e=>new RegExp(`${a.uJ}/(.*)/fulfilled`).test(e.type),c=e=>new RegExp(`${a.uJ}/(.*)/rejected`).test(e.type),u=e=>{const t=e.lastIndexOf("/");return e.substring(0,t)},h={items:o.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},p=(0,s.oM)({name:"plugins",initialState:h,reducers:{setDisplayMode(e,t){e.settings.displayMode=t.payload}},extraReducers:e=>e.addCase(r.Qd.fulfilled,((e,t)=>{o.upsertMany(e.items,t.payload)})).addCase(r.DD.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.N9.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.Tz.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.LP,((e,t)=>{e.panels[t.payload.meta.id]=t.payload})).addCase(r.m3.pending,((e,t)=>{e.isLoadingPluginDashboards=!0,e.dashboards=[]})).addCase(r.m3.fulfilled,((e,t)=>{e.isLoadingPluginDashboards=!1,e.dashboards=t.payload})).addMatcher(l,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Pending}})).addMatcher(d,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Fulfilled}})).addMatcher(c,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Rejected,error:t.payload}}))}),{setDisplayMode:g}=p.actions,m=p.reducer},95796:(e,t,n)=>{"use strict";let s,a,i,r,o,l,d;n.d(t,{Co:()=>i,cd:()=>a,eE:()=>d,lL:()=>s,tu:()=>l,vF:()=>r,xc:()=>o}),function(e){e.Grid="grid",e.List="list"}(s||(s={})),function(e){e.Home="plugins-home",e.Browse="plugins-browse",e.Details="plugins-details"}(a||(a={})),function(e){e.app="apps",e.datasource="database",e.panel="credit-card",e.renderer="capture",e.secretsmanager="key-skeleton-alt"}(i||(i={})),function(e){e.INSTALL="INSTALL",e.UNINSTALL="UNINSTALL",e.UPDATE="UPDATE",e.REINSTALL="REINSTALL"}(r||(r={})),function(e){e.OVERVIEW="Overview",e.VERSIONS="Version history",e.CONFIG="Config",e.DASHBOARDS="Dashboards",e.USAGE="Usage"}(o||(o={})),function(e){e.OVERVIEW="overview",e.VERSIONS="version-history",e.CONFIG="config",e.DASHBOARDS="dashboards",e.USAGE="usage"}(l||(l={})),function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(d||(d={}))},54700:(e,t,n)=>{"use strict";n.d(t,{a:()=>a,v:()=>s});const s=n(68404).createContext({sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}});function a(e){return{sectionNav:null!=e?e:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}s.displayName="PluginPageContext"},42833:(e,t,n)=>{"use strict";n.d(t,{ND:()=>m,ak:()=>v});var s=n(23214),a=n(94025),i=n(2633),r=n(23106),o=n(93570),l=n(8910),d=n(18474),c=n(2247),u=n(46782),h=n(91018),p=n(75534);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.J)();g(this,"datasources",{}),g(this,"settingsMapByName",{}),g(this,"settingsMapByUid",{}),g(this,"settingsMapById",{}),g(this,"defaultName",""),this.templateSrv=e}init(e,t){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=e,this.defaultName=t;for(const t of Object.values(e))t.uid||(t.uid=t.name),this.settingsMapByUid[t.uid]=t,this.settingsMapById[t.id]=t;this.datasources[d.hr.type]=h.mV,this.datasources[h.Yq]=h.mV,this.settingsMapByUid[d.hr.uid]=h.bE,this.settingsMapByUid[h.Yq]=h.bE}getDataSourceSettingsByUid(e){return this.settingsMapByUid[e]}getInstanceSettings(e,t){var n;const s="string"==typeof e;let a=s?e:null==e?void 0:e.uid;if("default"===a||null==a){var i;if(!s&&e){const t=null==e?void 0:e.type;if(t===d.hr.type)return h.mV.instanceSettings;t&&console.log("FIND Default instance for datasource type?",e)}return null!==(i=this.settingsMapByUid[this.defaultName])&&void 0!==i?i:this.settingsMapByName[this.defaultName]}if("$"===a[0]){const e=this.templateSrv.replace(a,t,f);let n;var r;if("default"===e)n=this.settingsMapByName[this.defaultName];else n=null!==(r=this.settingsMapByUid[e])&&void 0!==r?r:this.settingsMapByName[e];if(!n)return;return Object.assign({},n,{isDefault:!1,name:a,uid:a,rawRef:{type:n.type,uid:n.uid}})}return null!==(n=this.settingsMapByUid[a])&&void 0!==n?n:this.settingsMapByName[a]}get(e,t){let n="string"==typeof e?e:null==e?void 0:e.uid;if(!n)return this.get(this.defaultName);const s=this.settingsMapByName[n];return s&&(n=s.uid),this.datasources[n]?Promise.resolve(this.datasources[n]):(n=this.templateSrv.replace(n,t,f),"default"===n&&"default"!==this.defaultName?this.get(this.defaultName):this.datasources[n]?Promise.resolve(this.datasources[n]):this.loadDatasource(n))}async loadDatasource(e){var t,n;if(this.datasources[e])return Promise.resolve(this.datasources[e]);const i=null!==(t=null!==(n=this.settingsMapByUid[e])&&void 0!==n?n:this.settingsMapByName[e])&&void 0!==t?t:this.settingsMapById[e];if(!i)return Promise.reject({message:`Datasource ${e} was not found`});try{const t=await(0,p.nL)(i.meta);if(this.datasources[e])return this.datasources[e];let n;if(n=1!==t.DataSourceClass.length?(0,r.V)().instantiate(t.DataSourceClass,{instanceSettings:i}):new t.DataSourceClass(i),n.components=t.components,!(n instanceof s.MF)){const e=n;e.name=i.name,e.id=i.id,e.type=i.type,e.meta=i.meta,e.uid=i.uid,n.getRef=s.MF.prototype.getRef}return this.datasources[e]=n,this.datasources[n.uid]=n,n}catch(t){return t instanceof Error&&c.Z.emit(a.SI.alertError,[i.name+" plugin failed",t.toString()]),Promise.reject({message:`Datasource: ${e} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.values(this.settingsMapByName).filter((t=>"grafana"!==t.meta.id&&"mixed"!==t.meta.id&&"dashboard"!==t.meta.id&&(!(e.metrics&&!t.meta.metrics)&&(!(e.tracing&&!t.meta.tracing)&&(!(e.logs&&"logging"!==t.meta.category&&!t.meta.logs)&&(!(e.annotations&&!t.meta.annotations)&&(!(e.alerting&&!t.meta.alerting)&&((!e.pluginId||t.meta.id===e.pluginId)&&(!(e.filter&&!e.filter(t))&&(!(e.type&&!(Array.isArray(e.type)?e.type.includes(t.type):e.type===t.type))&&!(!e.all&&!0!==t.meta.metrics&&!0!==t.meta.annotations&&!0!==t.meta.tracing&&!0!==t.meta.logs&&!0!==t.meta.alerting)))))))))));if(e.variables)for(const e of this.templateSrv.getVariables()){if("datasource"!==e.type)continue;let n="default"===e.current.value?this.defaultName:e.current.value;Array.isArray(n)&&1===n.length&&(n=n[0]);const s=!Array.isArray(n)&&this.settingsMapByName[n];if(s){const n=`\${${e.name}}`;t.push(Object.assign({},s,{name:n,uid:n}))}}const n=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));if(!e.pluginId&&!e.alerting){if(e.mixed){const e=this.getInstanceSettings("-- Mixed --");e&&t.push(e)}if(e.dashboard){const e=this.getInstanceSettings("-- Dashboard --");e&&t.push(e)}if(!e.tracing){const e=this.getInstanceSettings("-- Grafana --");e&&t.push(e)}}return n}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map((e=>({name:e.name,value:e.name,meta:e.meta})))}getMetricSources(e){return this.getList({metrics:!0,variables:!(null!=e&&e.skipVariables)}).map((e=>({name:e.name,value:e.name,meta:e.meta})))}async reload(){const e=await(0,o.i)().get("/api/frontend/settings");u.ZP.datasources=e.datasources,u.ZP.defaultDatasource=e.defaultDatasource,this.init(e.datasources,e.defaultDatasource)}}function f(e){return Array.isArray(e)?e[0]:e}const v=()=>(0,l.F)()},21167:(e,t,n)=>{"use strict";n.d(t,{Ub:()=>d,_2:()=>c,q1:()=>u});var s=n(18151),a=n(46782),i=n(27277),r=n(75534);const o={},l={};function d(e){const t=o[e];if(t)return t;const n=a.ZP.panels[e];if(!n)throw new Error(`Plugin ${e} not found`);return o[e]=h(n),o[e]}function c(e){return h(e)}function u(e){return l[e]}function h(e){var t;return(0,r.N$)(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((e=>{if(e.plugin)return e.plugin;if(e.PanelCtrl){const t=new s.c(null);return t.angularPanelCtrl=e.PanelCtrl,t}throw new Error("missing export: plugin or PanelCtrl")})).then((t=>(t.meta=e,l[e.id]=t,t))).catch((t=>(console.warn("Error loading panel plugin: "+e.id,t),(0,i.F)(e,t))))}},87060:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>o,Vf:()=>r,hf:()=>l});var s=n(4020);const a={},i=Date.now();function r(e){let{path:t,version:n}=e;a[t]||(a[t]=encodeURI(n))}function o(e){const t=`plugins/${e}/module`;a[t]&&delete a[t],(0,s.Z)(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;const{address:n}=e,s=d(n);if(!s)return`${n}?_cache=${t}`;const r=a[s],o=r||t;return`${n}?_cache=${o}`}function d(e){const t=/\/public\/(plugins\/.+\/module)\.js/i.exec(e);if(!t)return;const[n,s]=t;return s||void 0}},4020:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r,a:()=>i});var s=n(93570);const a={};function i(e){const t=a[e];return t?Promise.resolve(t):(0,s.i)().get(`/api/plugins/${e}/settings`).then((t=>(a[e]=t,t))).catch((e=>Promise.reject(new Error("Unknown Plugin"))))}const r=e=>e?delete a[e]:Object.keys(a).forEach((e=>delete a[e]))},75534:(e,t,n)=>{"use strict";n.d(t,{kY:()=>zd,Av:()=>Ud,nL:()=>Wd,N$:()=>_d});var s={};n.r(s),n.d(s,{plugin:()=>De});var a={};n.r(a),n.d(a,{plugin:()=>Lt});var i={};n.r(i),n.d(i,{plugin:()=>gn});var r={};n.r(r),n.d(r,{plugin:()=>ws});var o={};n.r(o),n.d(o,{plugin:()=>Os});var l={};n.r(l),n.d(l,{plugin:()=>ii});var d={};n.r(d),n.d(d,{plugin:()=>gi});var c={};n.r(c),n.d(c,{plugin:()=>$i});var u={};n.r(u),n.d(u,{plugin:()=>Pi});var h={};n.r(h),n.d(h,{plugin:()=>nr});var p={};n.r(p),n.d(p,{plugin:()=>pr});var g={};n.r(g),n.d(g,{plugin:()=>Zr});var m={};n.r(m),n.d(m,{plugin:()=>eo});var f={};n.r(f),n.d(f,{plugin:()=>oo});var v={};n.r(v),n.d(v,{plugin:()=>vo});var b={};n.r(b),n.d(b,{plugin:()=>Qo});var x={};n.r(x),n.d(x,{plugin:()=>ol});var y={};n.r(y),n.d(y,{plugin:()=>gl});var w={};n.r(w),n.d(w,{plugin:()=>Il});var j={};n.r(j),n.d(j,{plugin:()=>_l});var S={};n.r(S),n.d(S,{plugin:()=>Yl});var C={};n.r(C),n.d(C,{plugin:()=>od});var k={};n.r(k),n.d(k,{plugin:()=>cd});var N={};n.r(N),n.d(N,{plugin:()=>Md});var O=n(52423),I=n(78966),T=n(24314),$=n(21256),R=n.n($),P=n(82897),D=n.n(P),A=n(36365),M=n.n(A),L=n(57706),F=n.n(L),E=n(68404),V=n(97394),z=n(36635),B=n(16144),_=n(31259),W=n(88232),U=n(70772),H=n(53594),q=n(40246),Z=n(57597),G=n(18151),Q=n(23214),K=n(54316),J=n(68089),Y=n(42914),X=n(40683),ee=n(28506),te=n(8681),ne=n(73505),se=n(46782),ae=n(68374),ie=n(42200),re=n(38467),oe=n(14186),le=n(9814),de=n(82782),ce=n(92720),ue=n(65737),he=n(39833),pe=n(43271),ge=n(22222),me=n(76938),fe=n(64834),ve=n(72710),be=n(74846),xe=n(5302),ye=n(64850),we=n(13960),je=n(16755),Se=n(8006),Ce=n(90062),ke=n(23542),Ne=n(27481),Oe=n(47659),Ie=n(23691),Te=n(8157),$e=n(45916);const Re=e=>{let{alertManagerSourceName:t,group:n,expandAll:s}=e;const[a,i]=(0,E.useState)(s),r=(0,je.wW)(Pe),o=(0,je.wW)(Oe.r);return(0,E.useEffect)((()=>i(s)),[s]),(0,$e.jsxs)("div",{className:r.group,"data-testid":"alert-group",children:[Object.keys(n.labels).length>0?(0,$e.jsx)(Ce.s,{labels:n.labels}):(0,$e.jsx)("div",{className:r.noGroupingText,children:"No grouping"}),(0,$e.jsxs)("div",{className:r.row,children:[(0,$e.jsx)(ke.U,{isCollapsed:!a,onToggle:()=>i(!a)})," ",(0,$e.jsx)(Ne.Z,{group:n})]}),a&&(0,$e.jsx)("div",{className:r.alerts,children:n.alerts.map(((e,n)=>{const s=e.status.state.toUpperCase(),a=(0,we.vT)({start:new Date(e.startsAt),end:Date.now()});return(0,$e.jsxs)("div",{"data-testid":"alert-group-alert",className:r.alert,children:[(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("span",{className:o[e.status.state],children:[s," "]}),"for ",a]}),(0,$e.jsx)("div",{children:(0,$e.jsx)(Ce.s,{labels:e.labels})}),(0,$e.jsxs)("div",{className:r.actionsRow,children:[e.status.state===Te.Z9.Suppressed&&(0,$e.jsx)(Se.Qj,{href:`${(0,Ie.eQ)("/alerting/silences",t)}&silenceIds=${e.status.silencedBy.join(",")}`,className:r.button,icon:"bell",size:"sm",children:"Manage silences"}),e.status.state===Te.Z9.Active&&(0,$e.jsx)(Se.Qj,{href:(0,Ie.VN)(t,e.labels),className:r.button,icon:"bell-slash",size:"sm",children:"Silence"}),e.generatorURL&&(0,$e.jsx)(Se.Qj,{className:r.button,href:e.generatorURL,icon:"chart-line",size:"sm",children:"See source"})]})]},`${e.fingerprint}-${n}`)}))})]})},Pe=e=>({noGroupingText:O.css`
    height: ${e.spacing(4)};
  `,group:O.css`
    background-color: ${e.colors.background.secondary};
    margin: ${e.spacing(.5,1,.5,1)};
    padding: ${e.spacing(1)};
  `,row:O.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${e.spacing(1)};
  `,alerts:O.css`
    margin: ${e.spacing(0,2,0,4)};
  `,alert:O.css`
    padding: ${e.spacing(1,0)};
    & + & {
      border-top: 1px solid ${e.colors.border.medium};
    }
  `,button:O.css`
    & + & {
      margin-left: ${e.spacing(1)};
    }
  `,actionsRow:O.css`
    padding: ${e.spacing(1,0)};
  `}),De=new G.c((e=>{var t;const n=(0,ye.I0)(),s=ue.v.unifiedAlertingEnabled,a=e.options.expandAll,i=e.options.alertmanager,r=((e,t)=>(0,E.useMemo)((()=>e.filter((e=>(0,ve.eD)(e.labels,t)||e.alerts.some((e=>(0,ve.eD)(e.labels,t)))))),[e,t]))((null===(t=((0,me._)((e=>e.amAlertGroups))||xe.oq)[i||""])||void 0===t?void 0:t.result)||[],e.options.labels?(0,ve.Zh)(e.options.labels):[]);(0,E.useEffect)((()=>{function e(){i&&n((0,fe.mS)(i))}e();const t=setInterval(e,be.iF);return()=>{clearInterval(t)}}),[n,i]);const o=r.length>0;return(0,$e.jsx)(ge.$,{autoHeightMax:"100%",autoHeightMin:"100%",children:s&&(0,$e.jsxs)("div",{children:[o&&r.map((e=>(0,$e.jsx)(Re,{alertManagerSourceName:i,group:e,expandAll:a},JSON.stringify(e.labels)))),!o&&"No alerts"]})})})).setPanelOptions((e=>e.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:pe.GC,category:["Options"],editor:function(e){const t=(0,E.useMemo)(pe.z3,[]);return(0,$e.jsx)(he.P,{current:e.value,onChange:t=>e.onChange(t),dataSources:t})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]})));var Ae=n(94570),Me=n(89716),Le=n(33257),Fe=n(99151),Ee=n.n(Fe),Ve=n(25004),ze=n(70917),Be=n(63939),_e=n(1671);async function We(e){let{query:t,permissionLevel:n,extraFolders:s}=e;const a=await async function(e){let{query:t,permissionLevel:n}=e;return(await(0,_e.ZL)(t,n)).map((e=>({id:e.id,title:e.title,url:e.url})))}({query:t,permissionLevel:n}),i=null!=s?s:[],r=t?i.filter((e=>{var n;return null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase())})):i;return a?r.concat(a):r}function Ue(e,t){return null==e?void 0:e.find((e=>{var n;return(null===(n=e.value)||void 0===n?void 0:n.id)===t}))}const He={id:void 0,title:"All"},qe={id:Be.pW,title:Be.fy};function Ze(e){let{onChange:t,extraFolders:n=[],initialFolderId:s,permissionLevel:a=ye.bf.View}=e;const[i,r]=(0,E.useState)(!1),[o,l]=(0,E.useState)(void 0),[d,c]=(0,E.useState)(void 0),u=(0,E.useCallback)((async e=>{let n=Ue(e,s);var a;n||(n=null!==(a=await async function(e){if(null!=e)try{const{id:t,title:n}=await(0,_e.EW)(e);return{value:{id:t,title:n},label:n}}catch(t){console.error(`Could not find folder with id:${e}`)}}(s))&&void 0!==a?a:e[0],t(n.value));r(!0),c(e),l(n)}),[s,t]),h=(0,E.useCallback)((async e=>{const t=await async function(e){let{query:t,permissionLevel:n=ye.bf.View,extraFolders:s=[]}=e;return(await We({query:t,permissionLevel:n,extraFolders:s})).map((e=>({value:e,label:e.title})))}({query:e,permissionLevel:a,extraFolders:n});return i||await u(t),t}),[a,n,i,u]),p=Ee()(h,300,{leading:!0}),g=(0,E.useCallback)((e=>{let{value:n}=e;const s=Ue(d,null==n?void 0:n.id);l(s),t(n)}),[d,t]);return(0,$e.jsx)("div",{"data-testid":Ve.wl.components.ReadonlyFolderPicker.container,children:(0,$e.jsx)(ze.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:o,value:o,loadOptions:p,onChange:g})})}var Ge=n(66015),Qe=n(88246),Ke=n(2633),Je=n(93570),Ye=n(1129),Xe=n(99500),et=n(50243),tt=n(94722),nt=n(23854);function st(e,t){if(e===nt.As.Importance)return(0,P.sortBy)(t,(e=>et.Z.alertStateSortScore[e.state||e.newState]));if(e===nt.As.TimeAsc)return(0,P.sortBy)(t,(e=>new Date(e.newStateDate||e.time)));if(e===nt.As.TimeDesc)return(0,P.sortBy)(t,(e=>new Date(e.newStateDate||e.time))).reverse();const n=(0,P.sortBy)(t,(e=>(e.name||e.alertName).toLowerCase()));return e===nt.As.AlphaDesc&&n.reverse(),n}function at(e){return Object.entries(e).filter((e=>{let[t,n]=e;return n})).map((e=>{let[t,n]=e;return t}))}const it=e=>({cardContainer:O.css`
    padding: ${e.spacing(.5)} 0 ${e.spacing(.25)} 0;
    line-height: ${e.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:O.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:O.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:O.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(.5)} ${e.spacing(1)};
    border-radius: ${e.shape.borderRadius(2)};
    margin-bottom: ${e.spacing(.5)};
  `,alertRuleItemIcon:O.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${e.spacing(4)};
    padding: 0 ${e.spacing(.5)} 0 ${e.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:O.css`
    font-weight: ${e.typography.fontWeightBold};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:O.css`
    color: ${e.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:O.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:O.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:O.css`
    margin-right: ${e.spacing(.5)};
  `});var rt,ot=n(22587);function lt(e,t){return(0,ot.ED)(e.state)===t}function dt(e,t){const{stateFilter:n}=e;return(0,P.isEmpty)(n)?t:t.filter((e=>n.firing&&(lt(e,ot.bj.Alerting)||lt(e,ot.x_.Firing))||n.pending&&(lt(e,ot.bj.Pending)||lt(e,ot.x_.Pending))||n.noData&&lt(e,ot.bj.NoData)||n.normal&&lt(e,ot.bj.Normal)||n.error&&lt(e,ot.bj.Error)||n.inactive&&lt(e,ot.x_.Inactive)))}function ct(e){return!(e.startsWith("__")&&e.endsWith("__"))}const ut=e=>{const{onChange:t,id:n,defaultValue:s}=e,a=(0,ye.I0)();(0,E.useEffect)((()=>{a((0,fe.lB)())}),[a]);const i=(0,me._)((e=>e.promRules)),r=(0,E.useMemo)(pe.mA,[]),o=(0,xe.ed)(i),l=(0,xe.yR)(i),d=(0,E.useMemo)((()=>{if((0,P.isEmpty)(i))return[];if(!o)return[];const e=r.flatMap((e=>{var t;return null!==(t=i[e].result)&&void 0!==t?t:[]})).flatMap((e=>e.groups)).flatMap((e=>e.rules.filter((e=>e.type===ot.pz.Alerting)))).flatMap((e=>{var t;return null!==(t=e.alerts)&&void 0!==t?t:[]})).map((e=>{var t;return Object.keys(null!==(t=e.labels)&&void 0!==t?t:{})})).flatMap((e=>e.filter(ct)));return(0,P.uniq)(e)}),[o,i,r]);return(0,$e.jsx)(ze.NU,{id:n,isLoading:l,defaultValue:s,"aria-label":"group by label keys",placeholder:"Group by",prefix:rt||(rt=(0,$e.jsx)(Xe.J,{name:"tag-alt"})),onChange:e=>{t(e.map((e=>{var t;return null!==(t=e.value)&&void 0!==t?t:""})))},options:d.map((e=>({label:e,value:e})))})};var ht=n(31423),pt=n(38251),gt=n(2843),mt=n(38953),ft=n(99749),vt=n(59196),bt=n(80458),xt=n(68143),yt=n(64681),wt=n.n(yt),jt=n(67610),St=n(42949);const Ct=e=>{let{alerts:t,options:n}=e;const s=n.groupMode===nt.LM.Custom||n.showInstances,[a,i]=(0,E.useState)(s),r=(0,je.wW)(kt),o=(0,E.useCallback)((()=>{i((e=>!e))}),[]),l=(0,E.useMemo)((()=>{var e;return null!==(e=dt(n,(0,Ie.Zl)(n.sortOrder,t)))&&void 0!==e?e:[]}),[t,n]),d=t.length-l.length,c=l.length>0,u=c?o:P.noop;return(0,E.useEffect)((()=>{0===l.length&&i(!1)}),[l]),(0,$e.jsxs)("div",{children:[n.groupMode===nt.LM.Default&&(0,$e.jsxs)("div",{className:c?r.clickable:"",onClick:()=>u(),children:[c&&(0,$e.jsx)(Xe.J,{name:a?"angle-down":"angle-right",size:"md"}),(0,$e.jsx)("span",{children:`${l.length} ${wt()("instance",l.length)}`}),d>0&&(0,$e.jsxs)("span",{children:[", ",`${d} hidden by filters`]})]}),a&&(0,$e.jsx)(jt.o,{instances:l,pagination:{itemsPerPage:2*St.gN}})]})},kt=e=>({clickable:O.css`
    cursor: pointer;
  `});function Nt(e){return[...new URLSearchParams(e)]}const Ot=e=>{let{rules:t,options:n}=e;const s=(0,je.wW)(Pt),a=n.groupBy,i=(0,E.useMemo)((()=>{const e=new Map;t.filter((e=>!a||function(e,t){return t.every((t=>{var n;return(null!==(n=e.rule.alerts)&&void 0!==n?n:[]).some((e=>e.labels[t]))}))}(e,a))).forEach((t=>{var n;(null!==(n=t.rule.alerts)&&void 0!==n?n:[]).forEach((t=>{var n;const s=function(e,t){return new URLSearchParams(e.map((e=>[e,t[e]]))).toString()}(a,t.labels),i=null!==(n=e.get(s))&&void 0!==n?n:[];e.set(s,[...i,t])}))}));return Array.from(e.entries()).reduce(((e,t)=>{let[s,a]=t;const i=dt(n,a);return i.length>0&&e.set(s,i),e}),new Map)}),[a,t,n]);return(0,$e.jsx)($e.Fragment,{children:Array.from(i).map((e=>{let[t,a]=e;return(0,$e.jsx)("li",{className:s.alertRuleItem,children:(0,$e.jsxs)("div",{children:[(0,$e.jsx)("div",{className:s.customGroupDetails,children:(0,$e.jsxs)("div",{className:s.alertLabels,children:[t&&Nt(t).map((e=>{let[t,n]=e;return(0,$e.jsx)(xt.i,{labelKey:t,value:n},t)})),!t&&"No grouping"]})}),(0,$e.jsx)(Ct,{alerts:a,options:n})]})},t)}))})},It=e=>({common:O.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:O.css`
    margin-top: ${e.spacing(2.5)};
    align-self: flex-start;
  `,good:O.css`
    color: ${e.colors.success.main};
  `,bad:O.css`
    color: ${e.colors.error.main};
  `,warning:O.css`
    color: ${e.colors.warning.main};
  `,neutral:O.css`
    color: ${e.colors.secondary.main};
  `,info:O.css`
    color: ${e.colors.primary.main};
  `}),Tt=e=>{let{rules:t,options:n}=e;const s=(0,je.wW)(Pt),a=(0,je.wW)(It),i=t.length<=n.maxItems?t:t.slice(0,n.maxItems);return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("ol",{className:s.alertRuleList,children:i.map(((e,t)=>{var i;const{rule:r,namespaceName:o,groupName:l}=e,d=(0,bt.ub)(r);return(0,$e.jsxs)("li",{className:s.alertRuleItem,children:[(0,$e.jsx)("div",{className:a.icon,children:(0,$e.jsx)(Xe.J,{name:et.Z.getStateDisplayModel(r.state).iconClass,className:a[(0,bt.Aq)(r.state)],size:"lg"})}),(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{className:s.instanceDetails,children:[(0,$e.jsx)("div",{className:s.alertName,title:r.name,children:r.name}),(0,$e.jsxs)("div",{className:s.alertDuration,children:[(0,$e.jsx)("span",{className:a[(0,bt.Aq)(r.state)],children:(0,bt.SS)(r.state)})," ",d&&r.state!==ot.x_.Inactive&&(0,$e.jsxs)($e.Fragment,{children:["for"," ",(0,$e.jsx)("span",{children:(0,we.vT)({start:d,end:Date.now()})})]})]})]}),(0,$e.jsx)(Ct,{alerts:null!==(i=e.rule.alerts)&&void 0!==i?i:[],options:n})]})]},`alert-${o}-${l}-${r.name}-${t}`)}))})})};var $t,Rt;const Pt=e=>({cardContainer:O.css`
    padding: ${e.spacing(.5)} 0 ${e.spacing(.25)} 0;
    line-height: ${e.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:O.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:O.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:O.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(.5)} ${e.spacing(1)};
    border-radius: ${e.shape.borderRadius(2)};
    margin-bottom: ${e.spacing(.5)};

    & > * {
      margin-right: ${e.spacing(1)};
    }
  `,alertName:O.css`
    font-size: ${e.typography.h6.fontSize};
    font-weight: ${e.typography.fontWeightBold};
  `,alertLabels:O.css`
    > * {
      margin-right: ${e.spacing(.5)};
    }
  `,alertDuration:O.css`
    font-size: ${e.typography.bodySmall.fontSize};
  `,alertRuleItemText:O.css`
    font-weight: ${e.typography.fontWeightBold};
    font-size: ${e.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:O.css`
    color: ${e.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:O.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:O.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:O.css`
    margin-right: ${e.spacing(.5)};
  `,instanceDetails:O.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:O.css`
    margin-bottom: ${e.spacing(.5)};
  `});function Dt(e){return e.showOptions===nt.kx.Current}const At=new G.c((function(e){const[t,n]=(0,E.useState)(""),s=(0,Ge.Z)((async()=>{var t;if(e.options.showOptions!==nt.kx.Current)return;const s={state:at(e.options.stateFilter)},a=null===(t=(0,tt.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.id);var i;(e.options.alertName&&(s.query=(0,Ke.J)().replace(e.options.alertName,a.scopedVars)),e.options.folderId>=0&&(s.folderId=e.options.folderId),e.options.dashboardTitle&&(s.dashboardQuery=e.options.dashboardTitle),e.options.dashboardAlerts)&&(s.dashboardId=null===(i=(0,tt.h4)().getCurrent())||void 0===i?void 0:i.id);e.options.tags&&(s.dashboardTag=e.options.tags);const r=await(0,Je.i)().get("/api/alerts",s,`alert-list-get-current-alert-state-${e.id}`);let o=st(e.options.sortOrder,r.map((e=>Object.assign({},e,{stateModel:et.Z.getStateDisplayModel(e.state),newStateDateAgo:(0,Qe.CQ)(e.newStateDate).locale("en").fromNow(!0)}))));return o.length>e.options.maxItems&&(o=o.slice(0,e.options.maxItems)),n(0===o.length?"No alerts":""),o}),[e.options.showOptions,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.maxItems,e.options.tags,e.options.dashboardAlerts,e.options.dashboardTitle,e.options.folderId,e.options.alertName,e.options.sortOrder,e.timeRange]),a=(0,Ge.Z)((async()=>{if(e.options.showOptions!==nt.kx.RecentChanges)return;const t={limit:e.options.maxItems,type:"alert",newState:at(e.options.stateFilter)},s=(0,tt.h4)().getCurrent();e.options.dashboardAlerts&&(t.dashboardId=null==s?void 0:s.id),t.from=1e3*Y.parse(null==s?void 0:s.time.from).unix(),t.to=1e3*Y.parse(null==s?void 0:s.time.to).unix();const a=await(0,Je.i)().get("/api/annotations",t,`alert-list-get-state-changes-${e.id}`),i=st(e.options.sortOrder,a.map((e=>Object.assign({},e,{time:null==s?void 0:s.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),stateModel:et.Z.getStateDisplayModel(e.newState),info:et.Z.getAlertAnnotationInfo(e)}))));return n(0===i.length?"No alerts in current time range":""),i}),[e.options.showOptions,e.options.maxItems,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.dashboardAlerts,e.options.sortOrder]),i=(0,je.wW)(it);return(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,$e.jsxs)("div",{className:i.container,children:[t&&(0,$e.jsx)("div",{className:i.noAlertsMessage,children:t}),(0,$e.jsx)("section",{children:(0,$e.jsx)("ol",{className:i.alertRuleList,children:e.options.showOptions===nt.kx.Current?!s.loading&&s.value&&s.value.map((e=>(0,$e.jsx)("li",{className:i.alertRuleItem,children:(0,$e.jsxs)(Ye.Z,{href:`${e.url}?viewPanel=${e.panelId}`,className:i.cardContainer,children:[(0,$e.jsx)(Ye.Z.Heading,{children:e.name}),(0,$e.jsx)(Ye.Z.Figure,{className:(0,O.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,$e.jsx)(Xe.J,{name:e.stateModel.iconClass,size:"xl",className:i.alertIcon})}),(0,$e.jsx)(Ye.Z.Meta,{children:(0,$e.jsxs)("div",{className:i.alertRuleItemText,children:[(0,$e.jsx)("span",{className:e.stateModel.stateClass,children:e.stateModel.text}),(0,$e.jsxs)("span",{className:i.alertRuleItemTime,children:[" for ",e.newStateDateAgo]})]})})]})},`alert-${e.id}`))):!a.loading&&a.value&&a.value.map((e=>(0,$e.jsx)("li",{className:i.alertRuleItem,children:(0,$e.jsxs)(Ye.Z,{className:i.cardContainer,children:[(0,$e.jsx)(Ye.Z.Heading,{children:e.alertName}),(0,$e.jsx)(Ye.Z.Figure,{className:(0,O.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,$e.jsx)(Xe.J,{name:e.stateModel.iconClass,size:"xl"})}),(0,$e.jsxs)(Ye.Z.Meta,{children:[(0,$e.jsx)("span",{className:(0,O.cx)(i.alertRuleItemText,e.stateModel.stateClass),children:e.stateModel.text}),(0,$e.jsx)("span",{children:e.time}),e.info&&(0,$e.jsx)("span",{className:i.alertRuleItemInfo,children:e.info})]})]})},`alert-${e.id}`)))})})]})})})).setPanelOptions((e=>{e.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:nt.kx.Current},{label:"Recent state changes",value:nt.kx.RecentChanges}]},defaultValue:nt.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:nt.As.AlphaAsc},{label:"Alphabetical (desc)",value:nt.As.AlphaDesc},{label:"Importance",value:nt.As.Importance},{label:"Time (asc)",value:nt.As.TimeAsc},{label:"Time (desc)",value:nt.As.TimeDesc}]},defaultValue:nt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Dt}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Dt}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function(e){let{value:t,onChange:n}=e;return(0,$e.jsx)(Ze,{initialFolderId:t,onChange:e=>n(null==e?void 0:e.id),extraFolders:[He,qe]})},category:["Filter"],showIf:Dt}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor:e=>(0,$e.jsx)(Me.B,{tags:e.value,onChange:e.onChange}),category:["Filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Dt})})).setMigrationHandler((e=>{var t,n,s,a,i,r,o,l,d,c,u,h,p,g,m,f,v,b;const x={showOptions:null!==(t=null!==(n=e.options.showOptions)&&void 0!==n?n:e.show)&&void 0!==t?t:nt.kx.Current,maxItems:null!==(s=null!==(a=e.options.maxItems)&&void 0!==a?a:e.limit)&&void 0!==s?s:10,sortOrder:null!==(i=null!==(r=e.options.sortOrder)&&void 0!==r?r:e.sortOrder)&&void 0!==i?i:nt.As.AlphaAsc,dashboardAlerts:null!==(o=null!==(l=e.options.dashboardAlerts)&&void 0!==l?l:e.onlyAlertsOnDashboard)&&void 0!==o&&o,alertName:null!==(d=null!==(c=e.options.alertName)&&void 0!==c?c:e.nameFilter)&&void 0!==d?d:"",dashboardTitle:null!==(u=null!==(h=e.options.dashboardTitle)&&void 0!==h?h:e.dashboardFilter)&&void 0!==u?u:"",folderId:null!==(p=e.options.folderId)&&void 0!==p?p:e.folderId,tags:null!==(g=null!==(m=e.options.tags)&&void 0!==m?m:e.dashboardTags)&&void 0!==g?g:[],stateFilter:null!==(f=null!==(v=e.options.stateFilter)&&void 0!==v?v:null===(b=e.stateFilter)||void 0===b?void 0:b.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}))&&void 0!==f?f:{}};if(parseFloat(e.pluginVersion||"7.4")<7.5){["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach((t=>delete e[t]))}return x})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(t.hasData)return;e.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}),Mt=new G.c((function(e){const t=(0,ye.I0)(),n=(0,E.useMemo)(pe.mA,[]);let s;(0,E.useEffect)((()=>{!0===e.options.stateFilter.inactive&&(e.options.stateFilter.normal=!0),e.options.stateFilter.inactive=void 0}),[e.options.stateFilter]),(0,ht.Z)((()=>{s=(0,tt.h4)().getCurrent()})),(0,E.useEffect)((()=>{var e;t((0,fe.lB)());const n=null===(e=s)||void 0===e?void 0:e.events.subscribe(pt.md,(()=>t((0,fe.lB)())));return()=>{null==n||n.unsubscribe()}}),[t,s]);const a=(0,me._)((e=>e.promRules)),i=n.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.dispatched})),r=n.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.loading})),o=n.some((e=>{var t,n,s;return(null===(t=a[e])||void 0===t||null===(n=t.result)||void 0===n?void 0:n.length)&&!(null!==(s=a[e])&&void 0!==s&&s.error)})),l=(0,je.wW)(Pt),d=(0,E.useMemo)((()=>function(e,t){const{options:n,replaceVariables:s}=e;let a=[...t];if(n.dashboardAlerts){var i;const e=null===(i=(0,tt.h4)().getCurrent())||void 0===i?void 0:i.uid;a=a.filter((t=>{let{rule:{annotations:n={}}}=t;return Object.entries(n).some((t=>{let[n,s]=t;return n===be.q6.dashboardUID&&s===e}))}))}if(n.alertName){const e=s(n.alertName);a=a.filter((t=>{let{rule:{name:n}}=t;return n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))}if(a=a.filter((e=>n.stateFilter.firing&&e.rule.state===ot.x_.Firing||n.stateFilter.pending&&e.rule.state===ot.x_.Pending||n.stateFilter.normal&&e.rule.state===ot.x_.Inactive)),n.alertInstanceLabelFilter){const e=s(n.alertInstanceLabelFilter),t=(0,ve.Zh)(e);a=a.reduce(((e,n)=>{var s;const a=(null!==(s=n.rule.alerts)&&void 0!==s?s:[]).filter((e=>{let{labels:n}=e;return(0,ve.eD)(n,t)}));return a.length&&e.push(Object.assign({},n,{rule:Object.assign({},n.rule,{alerts:a})})),e}),[])}n.folder&&(a=a.filter((e=>e.namespaceName===n.folder.title)));if(n.datasource){const e=n.datasource===pe.JY;a=a.filter(e?e=>{let{dataSourceName:t}=e;return t===pe.GC}:e=>{let{dataSourceName:t}=e;return t===n.datasource})}return a=a.reduce(((e,t)=>{var s;return dt(n,null!==(s=t.rule.alerts)&&void 0!==s?s:[]).length&&e.push(t),e}),[]),a}(e,function(e,t){if(e===nt.As.Importance)return(0,P.sortBy)(t,(e=>et.Z.alertStateSortScore[e.state]));if(e===nt.As.TimeAsc)return(0,P.sortBy)(t,(e=>(0,bt.ub)(e.rule)||new Date));if(e===nt.As.TimeDesc)return(0,P.sortBy)(t,(e=>(0,bt.ub)(e.rule)||new Date)).reverse();const n=(0,P.sortBy)(t,(e=>e.rule.name.toLowerCase()));e===nt.As.AlphaDesc&&n.reverse();return n}(e.options.sortOrder,Object.values(a).flatMap((e=>{let{result:t=[]}=e;return(0,bt.ZL)(t)}))))),[e,a]),c=0===d.length?"No alerts matching filters":void 0;return vt.Vt.hasPermission(ye.bW.AlertingRuleRead)||vt.Vt.hasPermission(ye.bW.AlertingRuleExternalRead)?(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,$e.jsxs)("div",{className:l.container,children:[i&&r&&!o&&(Rt||(Rt=(0,$e.jsx)(mt.u,{text:"Loading..."}))),c&&(0,$e.jsx)("div",{className:l.noAlertsMessage,children:c}),(0,$e.jsxs)("section",{children:[e.options.viewMode===nt.wO.Stat&&o&&(0,$e.jsx)(ft.w6,{width:e.width,height:e.height,graphMode:ft.IG.None,textMode:ft.jG.Auto,justifyMode:ft.ap.Auto,theme:se.vc.theme2,value:{text:`${d.length}`,numeric:d.length}}),e.options.viewMode===nt.wO.List&&e.options.groupMode===nt.LM.Custom&&o&&(0,$e.jsx)(Ot,{rules:d,options:e.options}),e.options.viewMode===nt.wO.List&&e.options.groupMode===nt.LM.Default&&o&&(0,$e.jsx)(Tt,{rules:d,options:e.options})]})]})}):$t||($t=(0,$e.jsx)(gt.b,{title:"Permission required",children:"Sorry, you do not have the required permissions to read alert rules"}))})).setPanelOptions((e=>{e.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:nt.wO.List,settings:{options:[{label:"List",value:nt.wO.List},{label:"Stat",value:nt.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:nt.LM.Default,settings:{options:[{value:nt.LM.Default,label:"Default grouping"},{value:nt.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:e=>e.groupMode===nt.LM.Custom,category:["Options"],editor:e=>{var t;return(0,$e.jsx)(ut,{id:null!==(t=e.id)&&void 0!==t?t:"groupBy",defaultValue:e.value.map((e=>({label:e,value:e}))),onChange:e.onChange})}}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:nt.As.AlphaAsc},{label:"Alphabetical (desc)",value:nt.As.AlphaDesc},{label:"Importance",value:nt.As.Importance},{label:"Time (asc)",value:nt.As.TimeAsc},{label:"Time (desc)",value:nt.As.TimeDesc}]},defaultValue:nt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(e){var t,n;return(0,$e.jsx)(Le.Es,Object.assign({enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:null===(t=e.value)||void 0===t?void 0:t.title,initialFolderId:null===(n=e.value)||void 0===n?void 0:n.id,permissionLevel:ye.bf.View,onClear:()=>e.onChange("")},e))},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(e){return(0,$e.jsx)(Ae.q,Object.assign({},e,{type:["prometheus","loki","grafana"],noDefault:!0,current:e.value,onChange:t=>e.onChange(t.name),onClear:()=>e.onChange(null)}))},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})})),Lt=ue.v.unifiedAlertingEnabled?Mt:At;var Ft,Et=n(95484),Vt=n(36298),zt=n(94025),Bt=n(92721),_t=n(80795),Wt=n(76961),Ut=n(50191),Ht=n(36624),qt=n(2247),Zt=n(4388),Gt=n(21888);const Qt=e=>{let{options:t,annotation:n,formatDate:s,onClick:a,onAvatarClick:i,onTagClick:r}=e;const o=(0,je.wW)(Yt),{showUser:l,showTags:d,showTime:c}=t,{text:u="",login:h,email:p,avatarUrl:g,tags:m,time:f,timeEnd:v}=n,b=h&&l,x=f&&c,y=v&&v!==f&&c;return(0,$e.jsxs)(Ye.Z,{className:o.card,onClick:()=>{a(n)},children:[(0,$e.jsx)(Ye.Z.Heading,{children:(0,$e.jsx)(Zt.D,{className:o.heading,onClick:e=>{e.stopPropagation()},content:u})}),x&&(0,$e.jsxs)(Ye.Z.Description,{className:o.timestamp,children:[(0,$e.jsx)(Jt,{formatDate:s,time:f}),y&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("span",{className:o.time,children:"-"}),(0,$e.jsx)(Jt,{formatDate:s,time:v})," "]})]}),b&&(0,$e.jsx)(Ye.Z.Meta,{className:o.meta,children:(0,$e.jsx)(Kt,{email:p,login:h,avatarUrl:g,onClick:()=>{i(n)}})}),d&&m&&(0,$e.jsx)(Ye.Z.Tags,{children:(0,$e.jsx)(Wt.P,{tags:m,onClick:e=>r(e,!1)})})]})},Kt=e=>{let{onClick:t,avatarUrl:n,login:s,email:a}=e;const i=(0,je.wW)(Yt),r=(0,$e.jsxs)("span",{children:["Created by:",Ft||(Ft=(0,$e.jsx)("br",{}))," ",a]});return(0,$e.jsx)(Gt.u,{content:r,theme:"info",placement:"top",children:(0,$e.jsx)("button",{onClick:e=>{e.stopPropagation(),t()},className:i.avatar,"aria-label":`Created by ${a}`,children:(0,$e.jsx)("img",{src:n,alt:"avatar icon"})})})},Jt=e=>{let{time:t,formatDate:n}=e;const s=(0,je.wW)(Yt);return(0,$e.jsx)("span",{className:s.time,children:(0,$e.jsx)("span",{children:n(t)})})};function Yt(e){return{card:(0,O.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:e.spacing(1),margin:e.spacing(.5),width:"inherit"}),heading:(0,O.css)({a:{zIndex:1,position:"relative",color:e.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,O.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,O.css)({margin:0,alignSelf:"center"}),time:(0,O.css)({marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary}),avatar:(0,O.css)({border:"none",background:"inherit",margin:0,padding:e.spacing(.5),img:{borderRadius:"50%",width:e.spacing(2),height:e.spacing(2)}})}}var Xt,en;function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nn extends E.PureComponent{constructor(e){super(e),tn(this,"style",sn(ue.v.theme2)),tn(this,"subs",new Et.w0),tn(this,"tagListRef",E.createRef()),tn(this,"onAnnoClick",(async e=>{var t;if(!e.time)return;const{options:n}=this.props,s=(0,tt.h4)().getCurrent(),a={from:this._timeOffset(e.time,n.navigateBefore,!0),to:this._timeOffset(null!==(t=e.timeEnd)&&void 0!==t?t:e.time,n.navigateAfter,!1)};if(n.navigateToPanel&&(a.viewPanel=e.panelId),(null==s?void 0:s.uid)===e.dashboardUID)return void _t.E1.partial(a);const i=await(0,Je.i)().get("/api/search",{dashboardUIDs:e.dashboardUID});if(i&&i.length&&i[0].uid===e.dashboardUID){const e=i[0],t=new URL(e.url,window.location.origin);return t.searchParams.set("from",a.from),t.searchParams.set("to",a.to),void _t.E1.push(Vt.u.stripBaseFromUrl(t.toString()))}qt.Z.emit(zt.SI.alertWarning,["Unknown Dashboard: "+e.dashboardUID])})),tn(this,"onTagClick",((e,t)=>{if(!t&&this.state.queryTags.includes(e))return;const n=t?this.state.queryTags.filter((t=>t!==e)):[...this.state.queryTags,e];let s;if(t){var a;const e=document.activeElement,t=null==e?void 0:e.getAttribute("data-tag-id");if(null!==(a=this.tagListRef.current)&&void 0!==a&&a.contains(e)&&t){var i;const e=Number.parseInt(t,10),n=null!==(i=this.tagListRef.current.querySelector(`[data-tag-id="${e+1}"]`))&&void 0!==i?i:this.tagListRef.current.querySelector(`[data-tag-id="${e-1}"]`);n instanceof HTMLElement&&(s=n)}}this.setState({queryTags:n},(()=>{var e;return null===(e=s)||void 0===e?void 0:e.focus()}))})),tn(this,"onUserClick",(e=>{this.setState({queryUser:{id:e.userId,login:e.login,email:e.email}})})),tn(this,"onClearUser",(()=>{this.setState({queryUser:void 0})})),tn(this,"renderItem",((e,t)=>{const{options:n}=this.props,s=(0,tt.h4)().getCurrent();return s?(0,$e.jsx)(Qt,{annotation:e,formatDate:s.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:n}):(0,$e.jsx)($e.Fragment,{})})),this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Bt.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(e,t){const{options:n,timeRange:s}=this.props;(n!==e.options||this.state.queryTags!==t.queryTags||this.state.queryUser!==t.queryUser||n.onlyInTimeRange&&s!==e.timeRange)&&this.doSearch()}async doSearch(){const{options:e}=this.props,{queryUser:t,queryTags:n}=this.state,s={tags:e.tags,limit:e.limit,type:"annotation"};var a;e.onlyFromThisDashboard&&(s.dashboardUID=null===(a=(0,tt.h4)().getCurrent())||void 0===a?void 0:a.uid);let i="";if(e.onlyInTimeRange){const{timeRange:e}=this.props;s.from=e.from.valueOf(),s.to=e.to.valueOf()}else i="All Time";t&&(s.userId=t.id),e.tags&&e.tags.length&&(s.tags=e.tags.map((e=>this.props.replaceVariables(e)))),n.length&&(s.tags=s.tags?[...s.tags,...n]:n);const r=await(0,Je.i)().get("/api/annotations",s,`anno-list-panel-${this.props.id}`);this.setState({annotations:r,timeInfo:i,loaded:!0})}_timeOffset(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=5,a="m";const i=/^(\d+)(\w)/.exec(t);i&&3===i.length&&(s=parseInt(i[1],10),a=i[2]);return n&&(s*=-1),(0,Qe.CQ)(e).add(s,a).valueOf()}render(){const{loaded:e,annotations:t,queryUser:n,queryTags:s}=this.state;if(!e)return Xt||(Xt=(0,$e.jsx)("div",{children:"loading..."}));const a=n||s.length>0;return(0,$e.jsxs)(ge.$,{autoHeightMin:"100%",children:[a&&(0,$e.jsxs)("div",{className:this.style.filter,children:[en||(en=(0,$e.jsx)("b",{children:"Filter:"})),n&&(0,$e.jsx)(Se.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${n.email}`,children:n.email}),s.length>0&&(0,$e.jsx)(Wt.P,{icon:"times",tags:s,onClick:e=>this.onTagClick(e,!0),getAriaLabel:e=>`Remove ${e} tag`,className:this.style.tagList,ref:this.tagListRef})]}),t.length<1&&(0,$e.jsx)("div",{className:this.style.noneFound,children:"No Annotations Found"}),(0,$e.jsx)(Ht.L,{items:t,renderItem:this.renderItem,getItemKey:e=>`${e.id}`})]})}}const sn=(0,Ut.B)((e=>({noneFound:O.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,O.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:e.spacing(.5),padding:e.spacing(.5)}),tagList:(0,O.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})}))),an=(Object.freeze([0,0]),10),rn="10m",on="10m",ln=!0,dn=!1,cn=!1,un=!0,hn=!0,pn=!0,gn=new G.c(nn).setPanelOptions((e=>{e.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:dn,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:cn,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor:e=>(0,$e.jsx)(Me.B,{tags:e.value,onChange:e.onChange})}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:an}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:pn}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:hn}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:un}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:ln,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:on,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:rn,description:""})})).setPanelChangeHandler(((e,t,n)=>"ryantxu-annolist-panel"===t?n:e.options));var mn=n(15399),fn=n(663),vn=n(97859),bn=n(32934),xn=n(40389),yn=n(27843),wn=n(27864),jn=n(33073),Sn=n(44108),Cn=n(33441),kn=n(23247),Nn=n(41185),On=n(94221),In=n(21505),Tn=n(3448),$n=n(678),Rn=n(27783),Pn=n(43456),Dn=n(28766),An=n(30733),Mn=n(38914),Ln=n(43501),Fn=n(22),En=n(48717),Vn=n(1700),zn=n(60053),Bn=n(47919);const _n=e=>{let{config:t,onUPlotClick:n,setFocusedSeriesIdx:s,setFocusedPointIdx:a,setCoords:i,setHover:r,isToolTipOpen:o,isActive:l,setIsActive:d,sync:c}=e;o.current=!1;const u=()=>{d&&d(!0)},h=()=>{o.current||(i(null),d&&d(!1))};let p=null,g=null;t.addHook("init",(e=>{var t;p=e.root.parentElement,g=e.over,null===(t=p)||void 0===t||t.addEventListener("click",n),g.addEventListener("mouseleave",h),g.addEventListener("mouseenter",u),c&&c()===zn.m.Crosshair&&e.root.classList.add("shared-crosshair")}));const m=()=>{o.current&&(i(null),n())};let f;t.addHook("drawClear",m),t.addHook("destroy",(()=>{var e,t,s;null===(e=p)||void 0===e||e.removeEventListener("click",n),null===(t=g)||void 0===t||t.removeEventListener("mouseleave",h),null===(s=g)||void 0===s||s.removeEventListener("mouseenter",u),m()})),t.addHook("syncRect",((e,t)=>{f=t}));const v=t.getTooltipInterpolator();return v&&t.addHook("setCursor",(e=>{o.current||v(s,a,(t=>{if(t&&l)return void i(null);if(!f)return;const{x:n,y:s}=(0,Bn._)(e,f);void 0!==n&&void 0!==s&&i({canvas:{x:e.cursor.left,y:e.cursor.top},viewport:{x:n,y:s}})}),e)})),t.addHook("setLegend",(e=>{if(o.current||v||a(e.legend.idx),null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const n=e.cursor.idxs[t];if(null!=n){const t={xIndex:n,yIndex:0,pageX:f.left+e.cursor.left,pageY:f.top+e.cursor.top};return void(o.current&&t||r(t))}}})),t.addHook("setSeries",((e,t)=>{o.current||s(t)})),t};var Wn=n(26006),Un=n(32654),Hn=n(83774),qn=n(49959),Zn=n(55343),Gn=n(31319),Qn=n(52902),Kn=n(94582),Jn=n(43917),Yn=n(34784),Xn=n(27565),es=n(39571),ts=n(20223),ns=n(66876),ss=n(68953),as=n(78321);const is=ss.Gj,rs=ss.Gj;function os(e,t){var n,s,a;const{xOri:i,xDir:r,rawValue:o,getColor:l,formatValue:d,fillOpacity:c=1,showValue:u,xSpacing:h=0}=e,p=i===wn.wN.Horizontal,g=!Boolean(null===(n=e.text)||void 0===n?void 0:n.valueSize),m=e.stacking!==wn.o0.None,f=e.stacking===wn.o0.Percent;let v,b,{groupWidth:x,barWidth:y,barRadius:w=0}=e;m&&([x,y]=[y,x]);const j=p?.1:.15,S=p?5:10;let C,k=[],N=[],O=1,I=null!==(s=null===(a=e.text)||void 0===a?void 0:a.valueSize)&&void 0!==s?s:30,T=S,$=1/0,R=1/0,P=null!=l,D=P?{fill:{unit:3,values:(e,t)=>N[t].fill},stroke:{unit:3,values:(e,t)=>N[t].stroke}}:{},A=qn.Z.paths.bars({radius:w,disp:Object.assign({x0:{unit:2,values:(e,t)=>k[t].offs},size:{unit:2,values:(e,t)=>k[t].size}},D),each:(t,n,s,a,i,r,l)=>{a-=t.bbox.left,i-=t.bbox.top;let c=t.data[n][s];p?($=Math.min($,c<0?t.bbox.height-(i+l):i),R=r):($=l,R=Math.min(R,c<0?a:t.bbox.width-(a+r)));let h={x:a,y:i,w:r,h:l,sidx:n,didx:s};if(v.add(h),u!==wn.Jp.Never){var m;const c=o(n,s);let u=1;f&&M[n][s]&&(u=M[n][s]);const h=d(n,0===u?0:c/u);if(T=Math.min(T,Math.round(j*(p?r:l))),void 0===C[s]&&(C[s]={}),C[s][n]={text:h,value:o(n,s),hidden:!1},g){const{fontSize:e,textMetrics:t}=function(e,t,n,s,a){const i=(0,Pn.X1)(e,14),r=t/(i.width+2)*14,o=n/s,l=Math.min(o,r);return{fontSize:Math.min(l,null!=a?a:l),textMetrics:i}}(C[s][n].text,R*(p?.65:1)-(p?0:T),$*(p?1:.65)-(p?T:0),1);C[s][n].textMetrics=t;let a=Math.round(Math.min(I,30,e));O=a/I*(a/14),I=a}else C[s][n].textMetrics=(0,Pn.X1)(C[s][n].text,I);let v=p?0:-Math.round(.1*I),b=o(n,s);if(null!==(m=e.negY)&&void 0!==m&&m[n]&&null!=b&&(b*=-1),null!=b){const e=t.bbox.left+(p?a+r/2:b<0?a-T:a+r+T),o=t.bbox.top+(p?b<0?i+l+T:i-T:i+l/2-v),{textMetrics:d={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=C[s][n];let c=0,u=0;p?(c=d.width*O/2,u=b>0?(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*O:0):(u=(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*O/2,c=b<0?d.width*O:0),C[s][n].x=e,C[s][n].y=o,C[s][n].bbox={x:e-c,y:o-u,w:d.width*O,h:(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*O}}}}});let M=null;return{cursor:{x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(e,t)=>{if(1===t){b=null;let t=e.cursor.left*devicePixelRatio,n=e.cursor.top*devicePixelRatio;v.get(t,n,1,1,(e=>{(0,as.Pn)(t,n,e.x,e.y,e.x+e.w,e.y+e.h)&&(m?(null==b||e.h*e.w<b.h*b.w)&&(b=e):b=e)}))}return b&&t===b.sidx?b.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(e,t)=>{let n=b&&t===b.sidx,s=0,a=0;return m&&n&&b.sidx>1&&(p?s=(0,as.zZ)(v,b.sidx-1,b.didx).h:a=(0,as.zZ)(v,b.sidx-1,b.didx).w),{left:n?(b.x+a)/devicePixelRatio:-10,top:n?b.y/devicePixelRatio:-10,width:n?(b.w-a)/devicePixelRatio:0,height:n?(b.h-s)/devicePixelRatio:0}}}},xRange:(e,t,n)=>{t=0,n=Math.max(1,e.data[0].length-1);let s=0;(0,ss.Qm)(e.data[0].length,x,is,0,((e,t,n)=>{s=t+n/2}));let a=n-t;if(.5===s)t-=a;else{let e=(1/(1-2*s)*a-a)/2;t-=e,n+=e}return[t,n]},xValues:(t,n,s,a,i)=>{if(e.xTimeAuto){let e=t.scales.x,r=e.min,o=e.max;e.min=t.data[0][0],e.max=t.data[0][t.data[0].length-1];let l=(0,Dn.mr)(t,n,s,a,i);return e.min=r,e.max=o,l}return n.map((e=>d(0,e)))},xSplits:e=>{const t=p?e.bbox.width:e.bbox.height,n=r*(p?1:-1);let s=e.data[0].length,a=s-1,i=0;if(0!==h){let e=t/devicePixelRatio,n=Math.abs(Math.floor(e/h));i=s<n?0:Math.ceil(s/n)}let o=[];return e.data[0].forEach(((e,t)=>{0!==i&&(h>0?t:a-t)%i>0||o.push(t)})),1===n?o:o.reverse()},barsBuilder:A,init:e=>{e.over.style.overflow="hidden",e.root.querySelectorAll(".u-cursor-pt").forEach((e=>{e.style.borderRadius="0"}))},drawClear:t=>{var n,s;if(v=v||new as.lW(0,0,t.bbox.width,t.bbox.height),v.clear(),t.series.forEach((e=>{e._paths=null})),k=[null].concat(m?((e,t)=>{let n=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,ss.Qm)(e,x,is,null,((e,s,a)=>{(0,ss.Qm)(t,y,rs,null,((t,i,r)=>{n[t].offs[e]=s,n[t].size[e]=a}))})),n})(t.data[0].length,t.data.length-1):((e,t)=>{let n=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,ss.Qm)(e,x,is,null,((e,s,a)=>{(0,ss.Qm)(t,y,rs,null,((t,i,r)=>{n[t].offs[e]=s+a*i,n[t].size[e]=a*r}))})),n})(t.data[0].length,t.data.length-1)),P){N=[null];for(let e=1;e<t.data.length;e++){let n=t.data[e].map(((t,n)=>null!=t?l(e,n,t):null));N.push({fill:c<1?n.map((e=>null!=e?(0,ns.alpha)(e,c):null)):n,stroke:n})}}C={},I=null!==(n=null===(s=e.text)||void 0===s?void 0:s.valueSize)&&void 0!==n?n:30,T=S,$=R=1/0},draw:n=>{if(u===wn.Jp.Never||I<8)return;let s,a;n.ctx.save(),n.ctx.fillStyle=t.colors.text.primary,n.ctx.font=`${I}px ${t.typography.fontFamily}`;for(const t in C){let r=!0;for(const o in C[t]){var i;const l=C[t][o],{text:d,x:c=0,y:h=0}=l;let{value:g}=l;null!==(i=e.negY)&&void 0!==i&&i[o]&&null!=g&&(g*=-1);let m=p?"center":null!==g&&g<0?"right":"left",f=p?null!==g&&g<0?"top":"alphabetic":"middle";if(m!==s&&(n.ctx.textAlign=s=m),f!==a&&(n.ctx.textBaseline=a=f),u===wn.Jp.Always)n.ctx.fillText(d,c,h);else if(u===wn.Jp.Auto){let{bbox:e}=l,s=!1;if(null==e)s=!0,l.hidden=!0;else if(!r)for(const n in C[t]){if(n===o)continue;const a=C[t][n],{bbox:i,hidden:r}=a;if(!r&&i&&(0,as.kK)(e,i)){s=!0,l.hidden=!0;break}}r=!1,!s&&n.ctx.fillText(d,c,h)}}}n.ctx.restore()},interpolateTooltip:(e,t,n,s)=>{b?(e(b.sidx),t(b.didx),n()):n(!0)},prepData:function(e,t){return M=null,(0,es.Bj)(e[0],t,(e=>{let{totals:t}=e;M=t}))}}}Object.freeze([0,0]);const ls={barRadius:0,barWidth:.97,groupWidth:.7,orientation:wn.wm.Auto,showValue:wn.Jp.Auto,stacking:wn.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},ds={fillOpacity:80,gradientMode:wn.FI.None,lineWidth:1};const cs=e=>{var t,n,s,a,i;let{frame:r,theme:o,orientation:l,showValue:d,groupWidth:c,barWidth:u,barRadius:h=0,stacking:p,text:g,rawValue:m,getColor:f,fillOpacity:v,allFrames:b,xTickLabelRotation:x,xTickLabelMaxLength:y,xTickLabelSpacing:w=0,legend:j,timeZone:S}=e;const C=new Xn.U,k=function(e){return e===xn.wm.Vertical?{xOri:wn.wN.Horizontal,xDir:wn.bQ.Right,yOri:wn.wN.Vertical,yDir:wn.bQ.Up}:{xOri:wn.wN.Vertical,xDir:wn.bQ.Down,yOri:wn.wN.Horizontal,yDir:wn.bQ.Right}}(l),N=(e,t)=>us((0,Zn.zc)(r.fields[e].display(t)),y);2===r.fields.length&&(c=u,u=1);const O=os({xOri:k.xOri,xDir:k.xDir,groupWidth:c,barWidth:u,barRadius:h,stacking:p,rawValue:m,getColor:f,fillOpacity:v,formatValue:N,timeZone:S,text:g,showValue:d,legend:j,xSpacing:w,xTimeAuto:(null===(t=r.fields[0])||void 0===t?void 0:t.type)===yn.fS.time&&!(null!==(n=r.fields[0].config.unit)&&void 0!==n&&n.startsWith("time:")),negY:r.fields.map((e=>{var t;return(null===(t=e.config.custom)||void 0===t?void 0:t.transform)===wn.pR.NegativeY}))},o);C.setCursor(O.cursor),C.addHook("init",O.init),C.addHook("drawClear",O.drawClear),C.addHook("draw",O.draw),C.setTooltipInterpolator(O.interpolateTooltip),k.xOri===wn.wN.Horizontal&&0!==x&&C.setPadding(function(e,t,n){var s;const a=e.fields[0].values,i=Dn.gD,r=null!==(s=e.fields[0].display)&&void 0!==s?s:e=>e;let o=0;for(let e=0;e<a.length;e++){let t=(0,Pn.X1)(us((0,Zn.zc)(r(a.get(e))),n),i);o=t.width>o?t.width:o}const l=t>0?Math.cos(t*Math.PI/180)*(0,Pn.X1)(us((0,Zn.zc)(r(a.get(a.length-1))),n),i).width:0,d=t<0?Math.cos(-1*t*Math.PI/180)*(0,Pn.X1)(us((0,Zn.zc)(r(a.get(0))),n),i).width:0,c=Math.sin((t>=0?t:-1*t)*Math.PI/180)*o;return[Math.round(Dn.gD*qn.Z.pxRatio),l,c,d]}(r,x,y)),C.setPrepData(O.prepData),C.addScale({scaleKey:"x",isTime:!1,range:O.xRange,distribution:wn.wf.Ordinal,orientation:k.xOri,direction:k.xDir});const I=(null===(s=r.fields[0].config.custom)||void 0===s?void 0:s.axisPlacement)!==wn.LB.Hidden?k.xOri===wn.wN.Horizontal?wn.LB.Bottom:wn.LB.Left:wn.LB.Hidden,T=(null===(a=r.fields[0].config.custom)||void 0===a?void 0:a.axisPlacement)!==wn.LB.Hidden;C.addAxis({scaleKey:"x",isTime:!1,placement:I,label:null===(i=r.fields[0].config.custom)||void 0===i?void 0:i.axisLabel,splits:O.xSplits,values:O.xValues,timeZone:S,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:-1*x,theme:o,show:T});let $=0;const R=ps(j);for(let e=1;e<r.fields.length;e++){var P,D,A;const t=r.fields[e];$++;const n=Object.assign({},ds,t.config.custom),s=t.config.unit||Fn.j,a=(0,Gn.fD)(t),i=(0,Gn.YO)(t,o).color;let l=n.axisSoftMin,d=n.axisSoftMax;if(null==l&&null==t.config.min&&(l=0),null==d&&null==t.config.max&&(d=0),n.thresholdsStyle&&t.config.thresholds){var M;(null!==(M=n.thresholdsStyle.mode)&&void 0!==M?M:wn.i3.Off)!==wn.i3.Off&&C.addThresholds({config:n.thresholdsStyle,thresholds:t.config.thresholds,scaleKey:s,theme:o,hardMin:t.config.min,hardMax:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax})}if(C.addSeries({scaleKey:s,pxAlign:!0,lineWidth:n.lineWidth,lineColor:i,fillOpacity:n.fillOpacity,theme:o,colorMode:a,pathBuilder:O.barsBuilder,show:!(null!==(P=n.hideFrom)&&void 0!==P&&P.viz),gradientMode:n.gradientMode,thresholds:t.config.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:l,softMax:d,dataFrameFieldIndex:{fieldIndex:R?e:b[0].fields.findIndex((e=>{var t;return e.type===yn.fS.number&&(null===(t=e.state)||void 0===t?void 0:t.seriesIndex)===$-1})),frameIndex:0}}),C.addScale({scaleKey:s,min:t.config.min,max:t.config.max,softMin:l,softMax:d,orientation:k.yOri,direction:k.yDir,distribution:null===(D=n.scaleDistribution)||void 0===D?void 0:D.type,log:null===(A=n.scaleDistribution)||void 0===A?void 0:A.log}),n.axisPlacement!==wn.LB.Hidden){let e=n.axisPlacement;e&&e!==wn.LB.Auto||(e=wn.LB.Left),1===k.xOri&&(e===wn.LB.Left&&(e=wn.LB.Bottom),e===wn.LB.Right&&(e=wn.LB.Top)),C.addAxis({scaleKey:s,label:n.axisLabel,size:n.axisWidth,placement:e,formatValue:(e,n)=>(0,Zn.zc)(t.display(e,n)),theme:o,grid:{show:n.axisGridShow}})}}let L=(0,es.i7)(r);return C.setStackingGroups(L),C};function us(e,t){return e.length>t?e.substring(0,t).concat("..."):e}function hs(e,t,n){if(null==e||!e.length)return{warn:"No data in response"};const s=1===e.length?(0,Qn.Y3)(e[0],e[0].fields.findIndex((e=>e.type===yn.fS.time))):(0,Qn._9)({frames:e});if(!s)return{warn:"Unable to join data"};let a,i,r,o;if(n.colorByField&&(a=(0,ts.PI)(s,n.colorByField),!a))return{warn:"Color field not found"};if(n.xField&&(i=(0,ts.PI)(s,n.xField),!i))return{warn:"Configured x field not found"};let l=[];for(const e of s.fields)if(e!==i)switch(e.type){case yn.fS.string:r||(r=e);break;case yn.fS.time:o||(o=e);break;case yn.fS.number:{const s=Object.assign({},e,{state:Object.assign({},e.state,{seriesIndex:l.length}),config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{stacking:{group:"_",mode:n.stacking}})}),values:new Kn.G(e.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))});n.stacking===wn.o0.Percent&&(s.config.unit="percentunit",s.display=(0,Jn.U)({field:s,theme:t})),l.push(s)}}let d=i;if(d||(d=r||o),!d)return{warn:"Bar charts requires a string or time field"};if(!l.length)return{warn:"No numeric fields found"};if(a&&l.length>1){const e=l.find((e=>e!==a));e&&(l=[e])}if(ps(n.legend)){var c;const e=n.legend.sortBy.toLowerCase(),t=null!==(c=n.legend.calcs)&&void 0!==c?c:[e];l=(0,P.orderBy)(l,(n=>(0,Yn.Kx)({field:n,reducers:t})[e]),n.legend.sortDesc?"desc":"asc")}return l.unshift(d),{aligned:s,colorByField:a,viz:[{length:d.values.length,fields:l}]}}const ps=e=>Boolean((null==e?void 0:e.sortBy)&&null!==e.sortDesc),gs=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(e,t)=>{var n,s;return(null===(n=t.text)||void 0===n?void 0:n.valueSize)===(null===(s=e.text)||void 0===s?void 0:s.valueSize)}];var ms=n(54761),fs=n(37625),vs=n(12310);const bs=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],xs=e=>{var t;let n=null!==(t=e.value)&&void 0!==t?t:0;const s=n<0;s&&(n*=-1);let a=bs[0];for(const e of bs)if(a=e,n<=a.value)break;return(0,$e.jsxs)(ms.Lh,{children:[(0,$e.jsx)(fs.S,{value:a.value,options:bs,onChange:t=>{e.onChange(t*(s?-1:1))}}),0!==n&&(0,$e.jsx)(Gt.u,{content:"Require space from the right side",placement:"top",children:(0,$e.jsx)("div",{children:(0,$e.jsx)(vs.X,{value:s,onChange:()=>{e.onChange(-1*e.value)},label:"RTL"})})})]})};var ys=n(29791);const ws=new G.c((e=>{let{data:t,options:n,fieldConfig:s,width:a,height:i,timeZone:r,id:o}=e;const l=(0,je.l4)(),{eventBus:d}=(0,Rn.R9)(),c=(0,E.useRef)(void 0),u=(0,E.useRef)(!1),[h,p]=(0,E.useState)(void 0),[g,m]=(0,E.useState)(null),[f,v]=(0,E.useState)(null),[b,x]=(0,E.useState)(null),[y,w]=(0,E.useState)(!1),[j,S]=(0,E.useState)(!1),C=()=>{u.current=!1,m(null),S(!1)},k=()=>{u.current=!u.current,S(u.current)},N=(0,E.useRef)(),O=(0,E.useRef)(),I=(0,E.useMemo)((()=>hs(null==t?void 0:t.series,l,n)),[t,l,n]),T="viz"in I?I:null;O.current=null==T?void 0:T.colorByField;const $=(0,E.useRef)(1e4);(0,E.useMemo)((()=>{$.current++}),[n]);const R=(0,E.useMemo)((()=>{var e;const n=null==T?void 0:T.viz[0],s=N.current;return n&&s&&(0,Tn.Ch)(n,s,!0)||$.current++,N.current=n,(null!==(e=t.structureRev)&&void 0!==e?e:0)+$.current}),[T,t.structureRev]),P=(0,E.useMemo)((()=>n.orientation&&n.orientation!==xn.wm.Auto?n.orientation:a<i?xn.wm.Horizontal:xn.wm.Vertical),[a,i,n.orientation]),D=(0,E.useMemo)((()=>{if(n.xTickLabelMaxLength)return n.xTickLabelMaxLength;{const e=n.xTickLabelRotation,t=(0,Pn.X1)("M",Dn.gD).width;return i/2/(Math.sin((e>=0?e:-1*e)*Math.PI/180)*t)-3}}),[i,n.xTickLabelRotation,n.xTickLabelMaxLength]);if("warn"in I)return(0,$e.jsx)($n.Z,{panelId:o,fieldConfig:s,data:t,message:I.warn,needsNumberField:!0});const A=(e,t,s)=>{const a=null==t?null:e.fields[t];if(a){const n=(0,bn.C)(a,e);t=I.aligned.fields.findIndex((e=>n===(0,bn.C)(e,I.aligned)))}return(0,$e.jsxs)($e.Fragment,{children:[j&&(0,$e.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(Wn.P,{onClick:C,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,$e.jsx)(Un.H,{data:I.aligned,rowIndex:s,columnIndex:t,sortOrder:n.tooltip.sort,mode:n.tooltip.mode})]})},M=(e,t)=>N.current.fields[e].values.get(t);let L,F=1;if(I.colorByField){var V;const e=I.colorByField,t=e.display;F=(null!==(V=e.config.custom.fillOpacity)&&void 0!==V?V:100)/100,L=(e,n)=>{var s;return t(null===(s=O.current)||void 0===s?void 0:s.values.get(n)).color}}else{if(N.current.fields.some((e=>{var t,n,s;return(null===(t=e.config.custom)||void 0===t?void 0:t.gradientMode)===wn.FI.Scheme&&(null===(n=e.config.color)||void 0===n?void 0:n.mode)===fn.S.Thresholds||(null===(s=e.config.mappings)||void 0===s?void 0:s.some((e=>"value"===e.type?Object.values(e.options).some((e=>null!=e.color)):null!=e.options.result.color)))}))){var z;let e=N.current.fields.find((e=>e.type===yn.fS.number));F=(null!==(z=e.config.custom.fillOpacity)&&void 0!==z?z:100)/100,L=(e,t)=>{let n=N.current.fields[e];return n.display(n.values.get(t)).color}}}return(0,$e.jsx)(Fn.d,{theme:l,frames:I.viz,prepConfig:(e,t,s)=>{const{barWidth:a,barRadius:i=0,showValue:o,groupWidth:c,stacking:u,legend:h,tooltip:p,text:g,xTickLabelRotation:m,xTickLabelSpacing:f}=n;return cs({frame:e,getTimeRange:s,timeZone:r,theme:l,timeZones:[r],eventBus:d,orientation:P,barWidth:a,barRadius:i,showValue:o,groupWidth:c,xTickLabelRotation:m,xTickLabelMaxLength:D,xTickLabelSpacing:f,stacking:u,legend:h,tooltip:p,text:g,rawValue:M,getColor:L,fillOpacity:F,allFrames:I.viz})},propsToDiff:gs,preparePlotFrame:e=>e[0],renderLegend:e=>{const{legend:t}=n;if(!e||!1===t.showLegend)return null;if(I.colorByField){const e=(0,Hn.$m)([I.colorByField],l);if(null!=e&&e.length)return(0,$e.jsx)(An.AY.Legend,{placement:t.placement,children:(0,$e.jsx)(Mn.l,{placement:t.placement,items:e,displayMode:t.displayMode})})}return(0,$e.jsx)(Ln.l,Object.assign({data:I.viz,config:e,maxHeight:"35%",maxWidth:"60%"},n.legend))},legend:n.legend,timeZone:r,timeRange:{from:1,to:1},structureRev:R,width:a,height:i,children:e=>(c.current!==e&&(c.current=_n({config:e,onUPlotClick:k,setFocusedSeriesIdx:v,setFocusedPointIdx:x,setCoords:m,setHover:p,isToolTipOpen:u,isActive:y,setIsActive:w})),n.tooltip.mode===wn.f3.None?null:(0,$e.jsx)(En.h_,{children:h&&g&&f&&(0,$e.jsx)(Vn.S,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:A(I.aligned,f,b)})}))})})).useFieldConfig({standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:fn.S.PaletteClassic}}},useCustomConfig:e=>{const t=ds;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:jn.q.fillGradient[0].value,settings:{options:jn.q.fillGradient}}),e.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:wn.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:wn.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),e.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:wn.i3.Off},settings:{options:jn.q.thresholdsDisplayModes},editor:In.F,override:In.F,process:vn.kG,shouldApply:()=>!0}),Sn.r(e,t,!1),Cn.B(e)}}).setPanelOptions(((e,t)=>{var n,s;const a=hs(t.data,ue.v.theme2,null!==(n=t.options)&&void 0!==n?n:{});let i="First string or time field";const r="viz"in a?a.viz[0]:void 0;if(null!=r&&null!==(s=r.fields)&&void 0!==s&&s.length){const e=r.fields[0];i+=` (${(0,bn.C)(e,r)})`}e.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:i}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:xn.wm.Auto,label:"Auto"},{value:xn.wm.Horizontal,label:"Horizontal"},{value:xn.wm.Vertical,label:"Vertical"}]},defaultValue:ls.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate bar labels",defaultValue:ls.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90°","-45":"-45°",0:"0°",45:"45°",90:"90°"},included:!1},showIf:e=>e.orientation===xn.wm.Auto||e.orientation===xn.wm.Vertical}).addNumberInput({path:"xTickLabelMaxLength",name:"Bar label max length",description:"Bar labels will be truncated to the length provided",settings:{placeholder:"None",min:0}}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"Bar labels minimum spacing",defaultValue:ls.xTickLabelSpacing,editor:xs}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:wn.Jp.Auto,label:"Auto"},{value:wn.Jp.Always,label:"Always"},{value:wn.Jp.Never,label:"Never"}]},defaultValue:ls.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:jn.q.stacking},defaultValue:ls.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:ls.groupWidth,settings:{min:0,max:1,step:.01},showIf:(e,t)=>(!e.stacking||e.stacking===wn.o0.None)&&1!==function(e){let t=0;if(e)for(const n of e)for(const e of n.fields)e.type===yn.fS.number&&t++;return t}(t)}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:ls.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:ls.barRadius,settings:{min:0,max:.5,step:.05}}),e.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),kn.L(e),Nn.J(e),On.Z(e,!1)})).setSuggestionsSupplier(new class{getListWithDefaults(e){return e.getListAppender({name:ys.y.BarChart,pluginId:"barchart",options:{showValue:wn.Jp.Never,legend:{showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.barWidth=.8}}})}getSuggestionsForData(e){const t=this.getListWithDefaults(e),{dataSummary:n}=e;1===n.frameCount&&n.hasNumberField&&n.hasStringField&&(n.rowCountTotal>50||(t.append({name:ys.y.BarChart}),n.numberFieldCount>1&&(t.append({name:ys.y.BarChartStacked,options:{stacking:wn.o0.Normal}}),t.append({name:ys.y.BarChartStackedPercent,options:{stacking:wn.o0.Percent}})),t.append({name:ys.y.BarChartHorizontal,options:{orientation:xn.wm.Horizontal}}),n.numberFieldCount>1&&(t.append({name:ys.y.BarChartHorizontalStacked,options:{stacking:wn.o0.Normal,orientation:xn.wm.Horizontal}}),t.append({name:ys.y.BarChartHorizontalStackedPercent,options:{orientation:xn.wm.Horizontal,stacking:wn.o0.Percent}}))))}});var js=n(69927),Ss=n(11887);var Cs=n(60942);Object.freeze([0,0]);const ks={displayMode:wn.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};var Ns=n(63179);const Os=new G.c(Cs.M).useFieldConfig().setPanelOptions((e=>{(0,Ss.j)(e),(0,Ss.h)(e),On.Z(e),e.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:wn.QH.Gradient,label:"Gradient"},{value:wn.QH.Lcd,label:"Retro LCD"},{value:wn.QH.Basic,label:"Basic"}]},defaultValue:ks.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:ks.showUnfilled,showIf:e=>"lcd"!==e.displayMode}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:ks.minVizWidth,showIf:e=>e.orientation===xn.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:ks.minVizHeight,showIf:e=>e.orientation===xn.wm.Horizontal})})).setPanelChangeHandler(js.ZH).setMigrationHandler((e=>(0,js.rD)(e))).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;const n=e.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});t.numberFieldCount>50||(t.hasStringField&&1===t.frameCount&&t.rowCountTotal<30?(n.append({name:ys.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Ns.QH.Basic,orientation:xn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),n.append({name:ys.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Ns.QH.Lcd,orientation:xn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(n.append({name:ys.y.BarGaugeBasic,options:{displayMode:Ns.QH.Basic,orientation:xn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),n.append({name:ys.y.BarGaugeLCD,options:{displayMode:Ns.QH.Lcd,orientation:xn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}});var Is=n(59821),Ts=n(71855),$s=n(32134),Rs=n(29173),Ps=n(1814),Ds=n(62124),As=n(11979),Ms=n(57971);const Ls=e=>t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||Ms.Jx);return{markerTriangle:O.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${n};
      `,markerBar:O.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${n};
      `}};var Fs=n(64214),Es=n(16319),Vs=n(3218),zs=n(65678),Bs=n(93194),_s=n(35258),Ws=n(89496),Us=n(73144);const Hs=["annotation","onSave","onDismiss","timeFormatter","className"],qs=["ref","onChange"];function Zs(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const Gs=E.forwardRef(((e,t)=>{var n;let{annotation:s,onSave:a,onDismiss:i,timeFormatter:r,className:o}=e,l=Zs(e,Hs);const d=(0,je.wW)(Qs),c=(0,Rn.R9)(),u=(0,E.useRef)(null);(0,Es.Z)(u,(()=>{i()}));const[h,p]=(0,Fs.default)((async e=>{const t=await c.onAnnotationCreate(e);return a&&a(),t})),[g,m]=(0,Fs.default)((async e=>{const t=await c.onAnnotationUpdate(e);return a&&a(),t})),f=void 0!==s.id,v=s.time!==s.timeEnd,b=f?m:p,x=f?g:h,y=v?`${r(s.time)} - ${r(s.timeEnd)}`:r(s.time),w=(0,$e.jsxs)("div",Object.assign({ref:t,className:(0,O.cx)(d.editor,o)},l,{children:[(0,$e.jsx)("div",{className:d.header,children:(0,$e.jsxs)(ms.Lh,{justify:"space-between",align:"center",children:[(0,$e.jsx)("div",{className:d.title,children:"Add annotation"}),(0,$e.jsx)("div",{className:d.ts,children:y})]})}),(0,$e.jsx)("div",{className:d.editorForm,children:(0,$e.jsx)(Vs.l,{onSubmit:e=>{let{tags:t,description:n}=e;b({id:s.id,tags:t,description:n,from:Math.round(s.time),to:Math.round(s.timeEnd)})},defaultValues:{description:null==s?void 0:s.text,tags:(null==s?void 0:s.tags)||[]},children:e=>{var t;let{register:s,errors:a,control:r}=e;return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(zs.g,{label:"Description",invalid:!!a.description,error:null==a||null===(t=a.description)||void 0===t?void 0:t.message,children:(0,$e.jsx)(Bs.K,Object.assign({},s("description",{required:"Annotation description is required"})))}),(0,$e.jsx)(zs.g,{label:"Tags",children:(0,$e.jsx)(_s.g,{control:r,name:"tags",render:e=>{let{field:{onChange:t}}=e,n=Zs(e.field,qs);return(0,$e.jsx)(Ws.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:t,tagOptions:Us.lK,tags:n.value})}})}),(0,$e.jsxs)(ms.Lh,{justify:"flex-end",children:[n||(n=(0,$e.jsx)(Se.zx,{size:"sm",variant:"secondary",onClick:i,fill:"outline",children:"Cancel"})),(0,$e.jsx)(Se.zx,{size:"sm",type:"submit",disabled:null==x?void 0:x.loading,children:null!=x&&x.loading?"Saving":"Save"})]})]})}})})]}));return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{className:d.backdrop}),(0,$e.jsx)("div",{ref:u,children:w})]})}));Gs.displayName="AnnotationEditorForm";const Qs=e=>({backdrop:O.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${e.zIndex.navbarFixed};
    `,editorContainer:O.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:O.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      z-index: ${e.zIndex.dropdown};
      border: 1px solid ${e.colors.border.weak};
      border-radius: ${e.shape.borderRadius()};
      width: 460px;
    `,editorForm:O.css`
      padding: ${e.spacing(1)};
    `,header:O.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: ${e.spacing(1.5,1)};
    `,title:O.css`
      font-weight: ${e.typography.fontWeightMedium};
    `,ts:O.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `}),Ks=e=>{let{onDismiss:t,onSave:n,timeZone:s,data:a,selection:i,annotation:r,style:o}=e;const l=(0,je.l4)(),d=(0,je.wW)(Js),c=(0,je.wW)(Ls),[u,h]=(0,E.useState)(null),[p,g]=(0,E.useState)(null),m=(0,As.D)(u,p,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let f=a.fields[0];if(!f)return null;const v=f.display||(0,Jn.U)({field:f,timeZone:s,theme:l}),b=i.min!==i.max;return(0,$e.jsx)(En.h_,{children:(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{style:o,children:(0,$e.jsx)("div",{className:(0,O.cx)(O.css`
                position: absolute;
                top: ${i.bbox.top}px;
                left: ${i.bbox.left}px;
                width: ${i.bbox.width}px;
                height: ${i.bbox.height}px;
              `,b?d.overlayRange(r):d.overlay(r)),children:(0,$e.jsx)("div",{ref:h,className:b?(0,O.cx)(c(r).markerBar,d.markerBar):(0,O.cx)(c(r).markerTriangle,d.markerTriangle)})})}),(0,$e.jsx)(Gs,Object.assign({annotation:r||{time:i.min,timeEnd:i.max},timeFormatter:e=>v(e).text,onSave:n,onDismiss:t,ref:g,style:m.styles.popper},m.attributes.popper))]})})},Js=e=>({overlay:t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||Ms.Jx);return O.css`
        border-left: 1px dashed ${n};
      `},overlayRange:t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||Ms.Jx);return O.css`
        background: ${ns.alpha(n,.1)};
        border-left: 1px dashed ${n};
        border-right: 1px dashed ${n};
      `},markerTriangle:O.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:O.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Ys=e=>{let{data:t,timeZone:n,config:s,children:a}=e;const i=(0,E.useRef)(),[r,o]=(0,E.useState)(),[l,d]=(0,E.useState)(!1),[c,u]=(0,E.useState)(null),h=(0,Ds.Z)(),p=(0,E.useCallback)((()=>{u(null),i.current&&i.current.setSelect({top:0,left:0,width:0,height:0}),d(!1)}),[d,u]);(0,E.useLayoutEffect)((()=>{let e=!1;s.addHook("init",(n=>{i.current=n;const s=n.hooks.setSelect;if(s)for(let n=0;n<s.length;n++){const a=s[n];a!==t&&(s[n]=function(){!e&&a(...arguments)})}})),s.addHook("syncRect",((e,t)=>{h()&&o(t)}));const t=t=>{e&&(d(!0),u({min:t.posToVal(t.select.left,"x"),max:t.posToVal(t.select.left+t.select.width,"x"),bbox:{left:t.select.left,top:0,height:t.select.height,width:t.select.width}}),e=!1)};s.addHook("setSelect",t),s.setCursor({bind:{mousedown:(t,n,s)=>t=>(e=0===t.button&&(t.metaKey||t.ctrlKey),s(t),null),mouseup:(t,n,s)=>n=>(e&&0===t.select.width&&(t.select.left=t.cursor.left,t.select.height=t.bbox.height/window.devicePixelRatio),s(n),null)}})}),[s,o,h]);const g=(0,E.useCallback)((e=>{let{coords:t}=e;if(!i.current||!r||!t)return;const n=i.current.posToVal(t.plotCanvas.x,"x");n&&(u({min:n,max:n,bbox:{left:t.plotCanvas.x,top:0,height:r.height,width:0}}),d(!0))}),[r]);return(0,$e.jsxs)($e.Fragment,{children:[l&&c&&r&&(0,$e.jsx)(Ks,{selection:c,onDismiss:p,onSave:p,data:t,timeZone:n,style:{position:"absolute",top:`${r.top}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${r.height}px`}}),a?a({startAnnotating:g}):null]})};var Xs=n(32898),ea=n(3876),ta=n(6432),na=n(74333),sa=n(58906),aa=n(76093),ia=n(23734),ra=n(51028),oa=n(91478);const la=e=>{let{annotation:t,timeFormatter:n,canEdit:s,canDelete:a,onEdit:i,onDelete:r}=e;const o=(0,je.wW)(da),l=n(t.time),d=n(t.timeEnd);let c=t.text;const u=t.tags;let h,p,g="",m=null;const f=(0,$e.jsx)("span",{className:o.time,children:Boolean(t.isRegion)?`${l} - ${d}`:l});if(t.login&&t.avatarUrl&&(h=(0,$e.jsx)("img",{className:o.avatar,alt:"Annotation avatar",src:t.avatarUrl})),void 0!==t.alertId&&t.newState){const e=et.Z.getStateDisplayModel(t.newState);m=(0,$e.jsx)("div",{className:o.alertState,children:(0,$e.jsx)("i",{className:e.stateClass,children:e.text})}),g=et.Z.getAlertAnnotationInfo(t)}else t.title&&(c=t.title+"<br />"+("string"==typeof c?c:""));(s||a)&&(p=(0,$e.jsxs)("div",{className:o.editControls,children:[s&&(0,$e.jsx)(ia.h,{name:"pen",size:"sm",onClick:i}),a&&(0,$e.jsx)(ia.h,{name:"trash-alt",size:"sm",onClick:r})]}));const v=se.ZP.featureToggles.annotationComments;return(0,$e.jsxs)("div",{className:o.wrapper,style:v?{minWidth:"300px"}:{},children:[(0,$e.jsx)("div",{className:o.header,children:(0,$e.jsxs)(ms.Lh,{justify:"space-between",align:"center",spacing:"md",children:[(0,$e.jsxs)("div",{className:o.meta,children:[(0,$e.jsxs)("span",{children:[h,m]}),f]}),p]})}),(0,$e.jsxs)("div",{className:o.body,children:[c&&(0,$e.jsx)("div",{dangerouslySetInnerHTML:{__html:aa.QX.sanitize(c)}}),g,(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)(ms.Lh,{spacing:"xs",wrap:!0,children:null==u?void 0:u.map(((e,t)=>(0,$e.jsx)(ra.V,{name:e},`${e}-${t}`)))})}),v&&(0,$e.jsx)("div",{className:o.commentWrapper,children:(0,$e.jsx)(oa.t,{objectType:"annotation",objectId:t.id.toString()})})]})]})};la.displayName="AnnotationTooltip";const da=e=>({wrapper:O.css`
      max-width: 400px;
    `,commentWrapper:O.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:O.css`
      padding: ${e.spacing(.5,1)};
      border-bottom: 1px solid ${e.colors.border.weak};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
    `,meta:O.css`
      display: flex;
      justify-content: space-between;
    `,editControls:O.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:O.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,alertState:O.css`
      padding-right: ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
    `,time:O.css`
      color: ${e.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:O.css`
      padding: ${e.spacing(1)};

      a {
        color: ${e.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),ca=["canAddAnnotations","canEditAnnotations","canDeleteAnnotations"];const ua={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function ha(e){let{annotation:t,timeZone:n,width:s}=e;const a=(0,Rn.R9)(),{canEditAnnotations:i,canDeleteAnnotations:r}=a,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,ca),l=(0,je.wW)(Ls),d=(0,je.wW)(pa),[c,u]=(0,E.useState)(!1),[h,p]=(0,E.useState)(!1),[g,m]=(0,E.useState)(null),[f,v]=(0,E.useState)(null),[b,x]=(0,E.useState)(null),y=(0,E.useRef)(),w=(0,As.D)(g,f,ua),j=(0,As.D)(g,b,ua),S=(0,E.useCallback)((()=>{p(!0),u(!1)}),[p,u]),C=(0,E.useCallback)((()=>{o.onAnnotationDelete&&o.onAnnotationDelete(t.id)}),[t,o]),k=(0,E.useCallback)((()=>{y.current&&clearTimeout(y.current),u(!0)}),[u]),N=(0,E.useCallback)((()=>{y.current&&clearTimeout(y.current)}),[]),O=(0,E.useCallback)((()=>{y.current=setTimeout((()=>{u(!1)}),100)}),[u]),I=(0,E.useCallback)((e=>(0,ta.dq)(e,{format:na.U6.fullDate,timeZone:n})),[n]),T=(0,E.useCallback)((()=>(0,$e.jsx)(la,{annotation:t,timeFormatter:I,onEdit:S,onDelete:C,canEdit:i(t.dashboardUID),canDelete:r(t.dashboardUID)})),[i,r,C,S,I,t]),$=Boolean(t.isRegion)&&s>6;let R=s/2+"px",P=(0,$e.jsx)("div",{className:l(t).markerTriangle,style:{left:R,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return $&&(P=(0,$e.jsx)("div",{className:l(t).markerBar,style:{width:`${s}px`,transform:"translate3d(0,-50%, 0)"}})),(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{ref:m,onMouseEnter:k,onMouseLeave:O,className:$?void 0:d.markerWrapper,children:P}),c&&(0,$e.jsx)(En.h_,{children:(0,$e.jsx)("div",Object.assign({ref:v,style:w.styles.popper},w.attributes.popper,{className:d.tooltip,onMouseEnter:N,onMouseLeave:O,children:T()}))}),h&&(0,$e.jsx)(En.h_,{children:(0,$e.jsx)(Gs,Object.assign({onDismiss:()=>p(!1),onSave:()=>p(!1),timeFormatter:I,annotation:t,ref:x,style:j.styles.popper},j.attributes.popper))})]})}const pa=e=>({markerWrapper:O.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:O.css`
      max-width: 400px;
    `,tooltip:O.css`
      ${(0,sa.getTooltipContainerStyles)(e)};
      padding: 0;
    `}),ga=e=>{let{annotations:t,timeZone:n,config:s}=e;const a=(0,je.l4)(),i=(0,E.useRef)(),r=(0,E.useRef)();(0,E.useEffect)((()=>{const e=[];for(const n of t)e.push(new Xs.U(n));r.current=e}),[t]),(0,E.useLayoutEffect)((()=>{s.addHook("init",(e=>{i.current=e})),s.addHook("draw",(e=>{if(!r.current)return null;const t=e.ctx;if(!t)return;t.save(),t.beginPath(),t.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),t.clip();const n=(n,s)=>{t.beginPath(),t.lineWidth=2,t.strokeStyle=s,t.setLineDash([5,5]),t.moveTo(n,e.bbox.top),t.lineTo(n,e.bbox.top+e.bbox.height),t.stroke(),t.closePath()};for(let s=0;s<r.current.length;s++){const i=r.current[s];for(let s=0;s<i.length;s++){const r=i.get(s);if(!r.time)continue;let o=e.valToPos(r.time,"x",!0);const l=a.visualization.getColorByName(r.color);if(n(o,l),r.isRegion&&r.timeEnd){let s=e.valToPos(r.timeEnd,"x",!0);n(s,l),t.fillStyle=ns.alpha(l,.1),t.rect(o,e.bbox.top,s-o,e.bbox.height),t.fill()}}}t.restore()}))}),[s,a]);const o=(0,E.useCallback)(((e,t)=>{const n=new Xs.U(e).get(t.fieldIndex);if(!n.time||!i.current)return;let s=i.current.valToPos(n.time,"x");return s<0&&(s=0),{x:s,y:i.current.bbox.height/window.devicePixelRatio+4}}),[]),l=(0,E.useCallback)(((e,t)=>{let s=0;const a=new Xs.U(e).get(t.fieldIndex);if(Boolean(a.isRegion)&&i.current){let e=i.current.valToPos(a.time,"x"),t=i.current.valToPos(a.timeEnd,"x");e<0&&(e=0),t>i.current.bbox.width/window.devicePixelRatio&&(t=i.current.bbox.width/window.devicePixelRatio),s=t-e}return(0,$e.jsx)(ha,{annotation:a,timeZone:n,width:s})}),[n]);return(0,$e.jsx)(ea.T,{id:"annotations",config:s,events:t,renderEventMarker:l,mapEventToXYCoords:o})};var ma=n(9139),fa=n(9593),va=n(9655),ba=n(21357),xa=n(33514);const ya=["data","config","onClose","timeZone","replaceVariables"],wa=["selection","timeZone","defaultItems","replaceVariables","data"];function ja(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const Sa=e=>{let{data:t,config:n,onClose:s,timeZone:a,replaceVariables:i}=e,r=ja(e,ya);const o=(0,E.useRef)(),[l,d]=(0,E.useState)(null),[c,u]=(0,E.useState)(null),[h,p]=(0,E.useState)(!1),g=(0,E.useCallback)((()=>{p(!0)}),[p]),m=(0,E.useCallback)((()=>{p(!1)}),[p]),f=(0,E.useCallback)((()=>{(0,es.Zp)("ContextMenuPlugin",!1,"clearing click selection"),u(null)}),[u]);(0,E.useLayoutEffect)((()=>{let e;const t=t=>{let n={viewport:{x:t.clientX,y:t.clientY},plotCanvas:{x:0,y:0}};e&&(n=Object.assign({},n,{plotCanvas:{x:t.clientX-e.left,y:t.clientY-e.top}})),d(n)};n.addHook("syncRect",((t,n)=>{e=n})),n.addHook("init",(e=>{var n,s,a,i;const r=e.over;o.current=r||void 0,null===(n=o.current)||void 0===n||n.addEventListener("mousedown",t),(0,es.Zp)("ContextMenuPlugin",!1,"init");let l=!1,d=Array.from(e.root.querySelectorAll(".u-cursor-pt"));null===(s=o.current)||void 0===s||s.addEventListener("mousedown",(()=>{l=!0})),null===(a=o.current)||void 0===a||a.addEventListener("mousemove",(()=>{l=!1})),null===(i=o.current)||void 0===i||i.addEventListener("mouseup",(e=>{if(!l||e.metaKey||e.ctrlKey)u(null);else{if(l=!0,e.target){e.target.classList.contains("u-cursor-pt")||((0,es.Zp)("ContextMenuPlugin",!1,"canvas click"),u({seriesIdx:null,dataIdx:null}))}g()}})),d.length>0&&d.forEach(((t,n)=>{t.addEventListener("click",(()=>{const t=n+1,s=e.cursor.idx;(0,es.Zp)("ContextMenuPlugin",!1,t,s),u({seriesIdx:t,dataIdx:null!=s?s:null})}))}))}))}),[n,g,d,u]);const v=(0,E.useMemo)((()=>r.defaultItems?r.defaultItems.map((e=>Object.assign({},e,{items:e.items.map((e=>Object.assign({},e,{onClick:t=>{l&&e.onClick&&e.onClick(t,{coords:l})}})))}))):[]),[l,r.defaultItems]);return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(I.Global,{styles:I.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),h&&l&&(0,$e.jsx)(Ca,{data:t,frames:r.frames,defaultItems:v,timeZone:a,selection:{point:c,coords:l},replaceVariables:i,onClose:()=>{f(),m(),s&&s()}})]})},Ca=e=>{let{selection:t,defaultItems:n,data:s}=e,a=ja(e,wa);const i=(0,E.useRef)(null),r=()=>{a.onClose&&a.onClose()};(0,ma.Z)(i,(()=>{r()}));const o=s.fields[0];if(!o)return null;const l=n?[...n]:[];let d=()=>null;if(t.point){const{seriesIdx:e,dataIdx:n}=t.point,i=o.display;if(e&&null!==n){const t=s.fields[e],r=t.display(t.values.get(n));t.config.links&&t.config.links.length>0&&t.getLinks&&l.push({items:t.getLinks({valueRowIndex:n}).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:"_self"===e.target?"link":"external-link-alt",onClick:e.onClick})))}),d=()=>(0,$e.jsx)(fa.b,{timestamp:i(o.values.get(n)).text,displayValue:r,seriesColor:r.color,displayName:(0,bn.C)(t,s,a.frames)})}}return(0,$e.jsx)(xa.x,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,$e.jsx)(va.k,{label:e.label,children:(e.items||[]).map((e=>(0,$e.jsx)(ba.s,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),renderHeader:d,x:t.coords.viewport.x,y:t.coords.viewport.y,onClose:r})};var ka=n(47974);const Na=e=>{var t,n,s,a,i,r,o;let{timeZone:l,dataFrame:d,dataFrameFieldIndex:c,config:u,getFieldLinks:h,exemplarColor:p}=e;const g=(0,je.wW)(Oa),[m,f]=(0,E.useState)(!1),[v,b]=E.useState(null),[x,y]=E.useState(null),{styles:w,attributes:j}=(0,As.D)(v,x),S=(0,E.useRef)(),C=(0,E.useCallback)((()=>{S.current&&clearTimeout(S.current),f(!0)}),[f]),k=(0,E.useCallback)((()=>{S.current=setTimeout((()=>{f(!1)}),100)}),[f]),N=(0,E.useCallback)((()=>{const e=d.fields.find((e=>"traceID"===e.name))||d.fields[0],t=[e,...d.fields.filter((t=>e!==t))],n=e=>(0,ta.dq)(e,{format:na.U6.fullDate,timeZone:l});return(0,$e.jsx)("div",Object.assign({onMouseEnter:C,onMouseLeave:k,className:g.tooltip,ref:y,style:w.popper},j.popper,{children:(0,$e.jsxs)("div",{className:g.wrapper,children:[(0,$e.jsx)("div",{className:g.header,children:(0,$e.jsx)("span",{className:g.title,children:"Exemplar"})}),(0,$e.jsx)("div",{className:g.body,children:(0,$e.jsx)("div",{children:(0,$e.jsx)("table",{className:g.exemplarsTable,children:(0,$e.jsx)("tbody",{children:t.map(((e,t)=>{var s;const a=e.values.get(c.fieldIndex),i=null!==(s=e.config.links)&&void 0!==s&&s.length?h(e,c.fieldIndex):void 0;return(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{valign:"top",children:e.name}),(0,$e.jsx)("td",{children:(0,$e.jsxs)("div",{className:g.valueWrapper,children:[(0,$e.jsx)("span",{children:e.type===yn.fS.time?n(a):a}),i&&(0,$e.jsx)(ka.Z,{links:i})]})})]},t)}))})})})})]})}))}),[j.popper,d.fields,h,c,C,k,w.popper,g,l]),I=null===(o=u.getSeries().find((e=>{var t;return(null===(t=e.props.dataFrameFieldIndex)||void 0===t?void 0:t.frameIndex)===c.frameIndex})))||void 0===o?void 0:o.props.lineColor;return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{ref:b,onMouseEnter:C,onMouseLeave:k,className:g.markerWrapper,"aria-label":Ve.wl.components.DataSource.Prometheus.exemplarMarker,children:(0,$e.jsx)("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:I},className:(0,O.cx)(g.marble,m&&g.activeMarble),children:(()=>{const e=[t||(t=(0,$e.jsx)("rect",{fill:p,x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"},"diamond")),n||(n=(0,$e.jsx)("path",{fill:p,d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"},"x")),s||(s=(0,$e.jsx)("path",{fill:p,d:"M4 0L7.4641 6H0.535898L4 0Z"},"triangle")),a||(a=(0,$e.jsx)("rect",{fill:p,width:"5",height:"5"},"rectangle")),i||(i=(0,$e.jsx)("path",{fill:p,d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"},"pentagon")),r||(r=(0,$e.jsx)("path",{fill:p,d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"},"plus"))];return e[c.frameIndex%e.length]})()})}),m&&(0,$e.jsx)(En.h_,{children:N()})]})},Oa=e=>{const t=e.isDark?e.v1.palette.dark2:e.v1.palette.white,n=e.isDark?e.v1.palette.dark9:e.v1.palette.gray5,s=e.isDark?e.v1.palette.black:e.v1.palette.white,a=e.isDark?e.v1.palette.dark3:e.v1.palette.gray6;return{markerWrapper:O.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:O.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${e.v1.palette.red};
      pointer-events: none;
    `,wrapper:O.css`
      background: ${t};
      border: 1px solid ${n};
      border-radius: ${e.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${s};
    `,exemplarsTable:O.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${e.components.panel.background};
      }

      tr {
        background-color: ${e.colors.background.primary};
        &:nth-child(even) {
          background-color: ${a};
        }
      }
    `,valueWrapper:O.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${e.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:O.css`
      background: none;
      padding: 0;
    `,header:O.css`
      background: ${n};
      padding: 6px 10px;
      display: flex;
    `,title:O.css`
      font-weight: ${e.typography.fontWeightMedium};
      padding-right: ${e.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:O.css`
      padding: ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
    `,marble:O.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:O.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},Ia=e=>{let{exemplars:t,timeZone:n,getFieldLinks:s,config:a,visibleSeries:i}=e;const r=(0,E.useRef)();(0,E.useLayoutEffect)((()=>{a.addHook("init",(e=>{r.current=e}))}),[a]);const o=(0,E.useCallback)(((e,t)=>{var n;const s=e.fields.find((e=>e.name===yn.Ls)),a=e.fields.find((e=>e.name===yn.M5));if(!s||!a||!r.current)return;const i=null!==(n=Object.keys(r.current.scales).find((e=>!["x","y"].some((t=>t===e)))))&&void 0!==n?n:Fn.j,o=r.current.scales[i].min,l=r.current.scales[i].max;let d=a.values.get(t.fieldIndex);return null!=o&&d<o&&(d=o),null!=l&&d>l&&(d=l),{x:r.current.valToPos(s.values.get(t.fieldIndex),"x"),y:r.current.valToPos(d,i)}}),[]),l=(0,E.useCallback)(((e,t)=>{const r=void 0===i||Ra(i,e,t),o=void 0!==i?$a(e,t,i):void 0;return r?(0,$e.jsx)(Na,{timeZone:n,getFieldLinks:s,dataFrame:e,dataFrameFieldIndex:t,config:a,exemplarColor:o}):(0,$e.jsx)($e.Fragment,{})}),[a,n,s,i]);return(0,$e.jsx)(ea.T,{config:a,id:"exemplars",events:t,renderEventMarker:l,mapEventToXYCoords:o})},Ta=(e,t)=>{const n=e.series.filter((e=>e.props.show)),s=[];return null!=t&&t.length&&n.forEach((e=>{var n,a,i,r;const o=null===(n=e.props)||void 0===n||null===(a=n.dataFrameFieldIndex)||void 0===a?void 0:a.frameIndex,l=null===(i=e.props)||void 0===i||null===(r=i.dataFrameFieldIndex)||void 0===r?void 0:r.fieldIndex;if(void 0!==o&&void 0!==l){var d;const n=null===(d=t[o])||void 0===d?void 0:d.fields[l];var c,u;if(null!=n&&n.labels)s.push({labels:n.labels,color:null!==(c=null===(u=e.props)||void 0===u?void 0:u.lineColor)&&void 0!==c?c:""})}})),{labels:s,totalSeriesCount:e.series.length}},$a=(e,t,n)=>{let s;return n.labels.some((n=>{const a=Object.keys(n.labels),i=e.fields.filter((e=>a.find((t=>t===e.name))));if(i.length){if(i.every(((e,s,a)=>{const i=e.values.get(t.fieldIndex);return n.labels[e.name]===i})))return s=n.color,!0}return!1})),s},Ra=(e,t,n)=>{let s=!1;return e.labels.length===e.totalSeriesCount?s=!0:e.labels.some((a=>{const i=Object.keys(a.labels);if(0===Object.keys(a.labels).length)s=!0;else{const a=t.fields.filter((e=>i.find((t=>t===e.name))));a.length&&(s=e.labels.some((e=>Object.keys(e.labels).every((t=>{const s=e.labels[t];return a.find((e=>e.values.get(n.fieldIndex)===s))})))))}return s})),s};var Pa;const Da=e=>{let{config:t,onChangeTimeRange:n}=e;const s=(0,E.useRef)(),[a,i]=(0,E.useState)([]),[r,o]=(0,E.useState)();if((0,E.useLayoutEffect)((()=>{t.addHook("init",(e=>{s.current=e})),t.addHook("setScale",(e=>{var t,n,s;i(null!==(t=null===(n=e.data)||void 0===n?void 0:n[0])&&void 0!==t?t:[]),o(null!==(s=e.scales.x)&&void 0!==s?s:void 0)}))}),[t]),a.length<2||!n)return null;if(!(r&&r.time&&r.min&&r.max))return null;let l=0,d=a.length-1;for(;l<=d&&null==a[l];)l++;for(;d>=0&&null==a[d];)d--;const c=a[l],u=a[d],h=r.min,p=r.max;return null==c||null==u||c<=p&&u>=h?null:(0,$e.jsx)("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"},children:(0,$e.jsxs)("div",{children:[Pa||(Pa=(0,$e.jsx)("div",{children:"Data outside time range"})),(0,$e.jsx)(Se.zx,{onClick:e=>n({from:c,to:u}),variant:"secondary",children:"Zoom to data"})]})})};Da.displayName="OutsideRangePlugin";var Aa=n(78846),Ma=n(53004),La=n.n(Ma);const Fa=e=>{var t,n;let{step:s,y:a,dragBounds:i,mapPositionToValue:r,formatValue:o,onChange:l}=e;const d=(0,je.l4)();let c=a,u="none";var h,p;(a<(null!==(t=i.top)&&void 0!==t?t:0)&&(u="top"),a>(null!==(n=i.bottom)&&void 0!==n?n:0)+22&&(u="bottom"),"bottom"===u)&&(c=null!==(h=i.bottom)&&void 0!==h?h:a);"top"===u&&(c=null!==(p=i.top)&&void 0!==p?p:a);const g=(0,je.wW)((e=>Ea(e,s,u))),[m,f]=(0,E.useState)(s.value),v=(0,E.useMemo)((()=>d.colors.getContrastText(d.visualization.getColorByName(s.color))),[s.color,d]);return(0,$e.jsx)(La(),{axis:"y",grid:[1,1],onStop:(e,t)=>(l(r(t.lastY)),!1),onDrag:(e,t)=>f(r(t.lastY)),position:{x:0,y:c},bounds:i,children:(0,$e.jsx)("div",{className:g.handle,style:{color:v},children:(0,$e.jsx)("span",{className:g.handleText,children:o(m)})})})};Fa.displayName="ThresholdDragHandle";const Ea=(e,t,n)=>{const s=e.visualization.getColorByName(t.color),a=function(e){const t=e=>O.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${e}px;
    border-right-color: inherit;
    border-top: ${e}px solid transparent;
    border-bottom: ${e}px solid transparent;
  `;if("none"===e)return O.css`
      ${t(9)};
      left: -9px;
    `;if("top"===e)return O.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `;if("bottom"===e)return O.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `;return""}(n),i="none"!==n;return{handle:O.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${s};
      cursor: grab;
      border-top-right-radius: ${e.shape.borderRadius(1)};
      border-bottom-right-radius: ${e.shape.borderRadius(1)};
      ${i&&O.css`
        margin-top: 0;
        border-radius: ${e.shape.borderRadius(1)};
      `}
      background: ${s};
      font-size: ${e.typography.bodySmall.fontSize};
      &:before {
        ${a};
      }
    `,handleText:O.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};const Va=e=>{let{config:t,fieldConfig:n,onThresholdsChange:s}=e;const a=(0,E.useRef)(),[i,r]=(0,E.useState)(0);(0,E.useLayoutEffect)((()=>{t.setPadding([0,60,0,0]),t.addHook("init",(e=>{a.current=e})),t.addHook("draw",(()=>{r((e=>e+1))}))}),[t]);const o=(0,E.useMemo)((()=>{const e=a.current;if(!e)return null;const t=n.defaults.thresholds;if(!t)return null;const i=(0,Aa.z)(n.defaults),r=n.defaults.decimals,o=[];for(let n=0;n<t.steps.length;n++){const a=t.steps[n],l=e.valToPos(a.value,i);if(Number.isNaN(l)||!Number.isFinite(l))continue;const d=e.bbox.height/window.devicePixelRatio,c=(0,$e.jsx)(Fa,{step:a,y:l,dragBounds:{top:0,bottom:d},mapPositionToValue:t=>e.posToVal(t,i),formatValue:e=>(0,Zn.Cf)(i)(e,r).text,onChange:e=>{const a=[...t.steps.slice(0,n),...t.steps.slice(n+1),Object.assign({},t.steps[n],{value:e})].sort(((e,t)=>e.value-t.value));s(Object.assign({},t,{steps:a}))}},`${a.value}-${n}`);o.push(c)}return o}),[i,n,s]);return a.current?(0,$e.jsx)("div",{style:{position:"absolute",overflow:"visible",left:(a.current.bbox.left+a.current.bbox.width)/window.devicePixelRatio+"px",top:a.current.bbox.top/window.devicePixelRatio+"px",width:"60px",height:a.current.bbox.height/window.devicePixelRatio+"px"},children:o}):null};Va.displayName="ThresholdControlsPlugin";var za=n(21131),Ba=n(36577),_a=n(96904);function Wa(e,t,n){var s,a;if(null==e||!e.length)return null;let i;const r=[];for(let o of e){const e=[];let l=!1,d=!1,c=(0,Ba.w)({frame:o,refFieldPseudoMin:null==n?void 0:n.from.valueOf(),refFieldPseudoMax:null==n?void 0:n.to.valueOf()});for(const n of(0,_a.I)(c).fields)switch(n.type){case yn.fS.time:l=!0,e.push(n);break;case yn.fS.number:d=!0,i=Object.assign({},n,{values:new Kn.G(n.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))}),e.push(i);break;case yn.fS.string:i=Object.assign({},n,{values:new Kn.G(n.values.toArray())}),e.push(i);break;case yn.fS.boolean:d=!0;const r=null!==(s=null===(a=n.config)||void 0===a?void 0:a.custom)&&void 0!==s?s:{},o=Object.assign({},n.config,{max:1,min:0,custom:r});r.lineInterpolation!==wn.KC.StepBefore&&(r.lineInterpolation=wn.KC.StepAfter),i=Object.assign({},n,{config:o,type:yn.fS.number,values:new Kn.G(n.values.toArray().map((e=>null==e?e:Boolean(e)?1:0)))}),(0,Zn.br)(o.unit)||(o.unit="bool",i.display=(0,Jn.U)({field:i,theme:t})),e.push(i)}l&&d&&r.push(Object.assign({},o,{length:c.length,fields:e}))}return r.length?r:null}function Ua(e,t){return e&&e.length?e.map((e=>null!=e&&e.length?e:t)):[t]}Object.freeze([1,0]);let Ha,qa,Za;!function(e){e.CandlesVolume="candles+volume",e.Candles="candles",e.Volume="volume"}(Ha||(Ha={})),function(e){e.Candles="candles",e.OHLCBars="ohlcbars"}(qa||(qa={})),function(e){e.OpenClose="open-close",e.CloseClose="close-close"}(Za||(Za={}));const Ga={up:"green",down:"red",flat:"gray"},Qa={mode:Ha.CandlesVolume,candleStyle:qa.Candles,colorStrategy:Za.OpenClose,colors:Ga,fields:{},legend:{displayMode:wn.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},Ka={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Ja(e,t,n){const s=(0,ts.PI)(e,n[t.key]);if(!s)for(const n of e.fields){const s=(0,bn.C)(n,e).toLowerCase();if(t.defaults.includes(s)||t.defaults.includes(n.name))return n}return s}function Ya(e,t,n,s){var a;if(null==e||!e.length)return null;const i=null!==(a=t.fields)&&void 0!==a?a:{},r=1===e.length?(0,Qn.Y3)(e[0],e[0].fields.findIndex((e=>e.type===yn.fS.time))):(0,Qn._9)({frames:e});if(null==r||!r.length)return null;const o={aligned:r,frame:r,names:{}},l=Wa([r],n,s);if(!l)return null;const d=o.frame=l[0],c=d.fields.findIndex((e=>e.type===yn.fS.time));if(c<0)return null;const u=new Set;for(const e of Object.values(Ka)){const t=Ja(d,e,i);t&&(o[e.key]=t,u.add(t))}if(o.open||o.close||(o.open=d.fields.find((e=>e.type===yn.fS.number)),o.open&&u.add(o.open)),o.open&&!o.close&&!i.close){const e=o.open.values.toArray().slice(1);e.push(e[e.length-1]),o.close=Object.assign({},o.open,{values:new Kn.G(e),name:"Next open",state:void 0}),u.add(o.close),d.fields.push(o.close),o.autoOpenClose=!0}if(o.close&&!o.open&&!i.open){const e=o.close.values.toArray().slice();e.unshift(e[0]),e.length=d.length,o.open=Object.assign({},o.close,{values:new Kn.G(e),name:"Previous close",state:void 0}),u.add(o.open),d.fields.push(o.open),o.autoOpenClose=!0}o.high||i.high||(o.high=o.open),o.low||i.low||(o.low=o.open),t.mode===Ha.Volume?(o.high&&(o.high!==o.open&&u.delete(o.high),o.high=void 0),o.low&&(o.low!==o.open&&u.delete(o.low),o.low=void 0)):t.mode===Ha.Candles&&o.volume&&(u.delete(o.volume),o.volume=void 0);for(const e of Object.values(Ka)){const t=o[e.key];t&&(o.names[e.key]=(0,bn.C)(t,o.frame))}const h=d.fields[c],p=[h];t.includeAllFields?p.push(...d.fields.filter((e=>e!==h))):p.push(...u),o.frame=Object.assign({},o.frame,{fields:p});for(let e=0;e<o.frame.fields.length;e++){const t=o.frame.fields[e];t.state=Object.assign({},t.state,{seriesIndex:e-1,origin:{fieldIndex:e,frameIndex:0}})}return o}const{alpha:Xa}=ns;const ei=[{label:"Candles",value:Ha.Candles},{label:"Volume",value:Ha.Volume},{label:"Both",value:Ha.CandlesVolume}],ti=[{label:"Candles",value:qa.Candles},{label:"OHLC Bars",value:qa.OHLCBars}],ni=[{label:"Since Open",value:Za.OpenClose},{label:"Since Prior Close",value:Za.CloseClose}],si=e=>e.type===yn.fS.number;function ai(e,t,n){let s="Auto ";if(n){const e=n[t.key];null!=e&&e.config?(s+="= "+(0,bn.C)(e),e===(null==n?void 0:n.open)&&"open"!==t.key&&(s+=` (${t.defaults.join(",")})`)):s+=`(${t.defaults.join(",")})`}e.addFieldNamePicker({path:`fields.${t.key}`,name:t.name,description:t.description,settings:{filter:si,placeholderText:s}})}const ii=new G.c((e=>{let{data:t,id:n,timeRange:s,timeZone:a,width:i,height:r,options:o,fieldConfig:l,onChangeTimeRange:d,replaceVariables:c}=e;const{sync:u,canAddAnnotations:h,onThresholdsChange:p,canEditThresholds:g,onSplitOpen:m}=(0,Rn.R9)(),f=(e,t)=>(0,Ps.a)({field:e,rowIndex:t,splitOpenFn:m,range:s}),v=(0,je.l4)(),b=(0,E.useMemo)((()=>Ya(t.series,o,v,s)),[t,o,v,s]),{renderers:x,tweakScale:y,tweakAxis:w}=(0,E.useMemo)((()=>{let e=(e,t)=>e,t=(e,t)=>e,n={renderers:[],tweakScale:e,tweakAxis:t};if(!b)return n;const s=b.names;if(!Object.keys(s).length)return n;const{mode:a,candleStyle:i,colorStrategy:r}=o,l=Object.assign({},Ga,o.colors);let{open:d,high:c,low:u,close:h,volume:p}=s;if(null==d||null==h)return n;let g=.5,m=-1,f=!1;if(null!=p&&a!==Ha.Candles){let n=b.volume;if(null!=n){f=!0;let{fillOpacity:s}=n.config.custom;s&&(g=s/100),a!==Ha.Volume&&(n.config=Object.assign({},n.config),n.config.unit="short",n.display=(0,Jn.U)({field:n,theme:se.vc.theme2}),t=(e,t)=>{var n;if(t.name===(null===(n=b.volume)||void 0===n?void 0:n.name)){let t=(e,t)=>{let n=[],s=e.series[m].max;for(let e=0;e<t.length&&(n.push(t[e]),!(t[e]>s));e++);return n};e.space=20,e.filter=t,e.ticks=Object.assign({},e.ticks,{filter:t})}return e},e=(e,t)=>{var n;return t.name===(null===(n=b.volume)||void 0===n?void 0:n.name)&&(e.range=(e,t,n)=>[0,7*n]),e})}}let v=a!==Ha.Volume&&null!=c&&null!=u;if(!v&&!f)return n;let x={},y=[];if(v){x={open:d,high:c,low:u,close:h};for(let e in x){let t=b[e];t.config=Object.assign({},t.config,{custom:Object.assign({},t.config.custom,{hideFrom:{legend:!0,tooltip:!1,viz:!1}})})}}else y.push(d,h);return f&&(x.volume=p,x.open=d,x.close=h),{renderers:[{fieldMap:x,indicesOnly:y,init:(e,t)=>{m=t.volume,e.addHook("drawAxes",function(e){let{mode:t,candleStyle:n,fields:s,colorStrategy:a,upColor:i,downColor:r,flatColor:o,volumeAlpha:l,flatAsUp:d=!0}=e;const c=t!==Ha.Volume&&null!=s.high&&null!=s.low,u=c&&n===qa.Candles,h=t!==Ha.Candles&&null!=s.volume;function p(e,t,n,s,a){return e>0?n:e<0?s:a?n:t}let g=s.open,m=s.high,f=s.low,v=s.close,b=s.volume;return e=>{let t,n,s,x,y,w;c&&(s=new Path2D,n=new Path2D,t=new Path2D),h&&(x=new Path2D,y=new Path2D,w=new Path2D);let j=new Path2D,S=e.ctx,C=e.data[0],k=e.data[g],N=e.data[v],O=c?e.data[m]:null,I=c?e.data[f]:null,T=h?e.data[b]:null,$=null!=b?Math.round(e.valToPos(0,e.series[b].scale,!0)):null,[R,P]=e.series[0].idxs,D=e.data[0],A=k,M=e.bbox.width;if(D.length>1){let t=null;for(let n=0,s=1/0;n<D.length;n++)if(void 0!==A[n]){if(null!=t){let a=Math.abs(D[n]-D[t]);a<s&&(s=a,M=Math.abs(e.valToPos(D[n],"x",!0)-e.valToPos(D[t],"x",!0)))}t=n}}let L=Math.round(.6*M),F=2,E=2;L<=12&&(F=E=1);let V=Math.floor(L/2);for(let i=R;i<=P;i++){let r=Math.round(e.valToPos(C[i],"x",!0)),o=i===R?0:Math.sign(N[i]-N[i-1]),l=Math.sign(N[i]-k[i]);if(h){let t=p(a===Za.CloseClose?o:l,w,y,x,(i!==R||!Za.CloseClose)&&d),n=Math.round(e.valToPos(T[i],e.series[b].scale,!0));t.rect(r-V,n,L,$-n)}if(c){let c=p(a===Za.CloseClose?o:l,s,n,t,(i!==R||!Za.CloseClose)&&d),h=Math.round(e.valToPos(O[i],e.series[m].scale,!0)),b=Math.round(e.valToPos(I[i],e.series[f].scale,!0));c.rect(r-Math.floor(F/2),h,F,b-h);let x=Math.round(e.valToPos(k[i],e.series[g].scale,!0)),y=Math.round(e.valToPos(N[i],e.series[v].scale,!0));if(u){let e=Math.min(x,y),t=Math.max(x,y),n=Math.max(1,t-e);c.rect(r-V,e,L,n),a===Za.CloseClose&&l>=0&&n>2*E&&j.rect(r-V+E,e+E,L-2*E,n-2*E)}else c.rect(r-V,x,V,F),c.rect(r,y,V,F)}}S.save(),S.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),S.clip(),h&&(S.fillStyle=Xa(i,l),S.fill(y),S.fillStyle=Xa(r,l),S.fill(x),S.fillStyle=Xa(o,l),S.fill(w)),c&&(S.fillStyle=i,S.fill(n),S.fillStyle=r,S.fill(t),S.fillStyle=o,S.fill(s),S.globalCompositeOperation="destination-out",S.fill(j)),S.restore()}}({mode:a,fields:t,upColor:se.vc.theme2.visualization.getColorByName(l.up),downColor:se.vc.theme2.visualization.getColorByName(l.down),flatColor:se.vc.theme2.visualization.getColorByName(l.flat),volumeAlpha:g,colorStrategy:r,candleStyle:i,flatAsUp:!0}))}}],tweakScale:e,tweakAxis:t}}),[o,t.structureRev,t.series.length]);if(!b)return(0,$e.jsx)($n.Z,{panelId:n,fieldConfig:l,data:t,needsTimeField:!0,needsNumberField:!0});const j=Boolean(h&&h());return(0,$e.jsx)($s.p,{frames:[b.frame],structureRev:t.structureRev,timeRange:s,timeZone:a,width:i,height:r,legend:o.legend,renderers:x,tweakAxis:w,tweakScale:y,options:o,children:(e,n)=>(n.fields.forEach((e=>{e.getLinks=(0,Ts.oB)(n,e,e.state.scopedVars,c,a)})),(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Rs.R,{config:e,onZoom:d}),(0,$e.jsx)(Bn.i,{data:n,config:e,mode:wn.f3.Multi,sync:u,timeZone:a}),t.annotations&&(0,$e.jsx)(ga,{annotations:t.annotations,config:e,timeZone:a}),j?(0,$e.jsx)(Ys,{data:n,timeZone:a,config:e,children:t=>{let{startAnnotating:s}=t;return(0,$e.jsx)(Sa,{data:n,config:e,timeZone:a,replaceVariables:c,defaultItems:j?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&s({coords:t.coords})}}]}]:[]})}}):(0,$e.jsx)(Sa,{data:n,config:e,timeZone:a,replaceVariables:c,defaultItems:[]}),t.annotations&&(0,$e.jsx)(Ia,{config:e,exemplars:t.annotations,timeZone:a,getFieldLinks:f}),g&&p&&(0,$e.jsx)(Va,{config:e,fieldConfig:l,onThresholdsChange:p}),(0,$e.jsx)(Da,{config:e,onChangeTimeRange:d})]}))})})).useFieldConfig((0,Is.F)(Is.r)).setPanelOptions(((e,t)=>{var n;const s=null!==(n=t.options)&&void 0!==n?n:Qa,a=Ya(t.data,s,ue.v.theme2);e.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Qa.mode,settings:{options:ei}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Qa.candleStyle,settings:{options:ti},showIf:e=>e.mode!==Ha.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Qa.colorStrategy,settings:{options:ni}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Ga.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Ga.down}),ai(e,Ka.open,a),s.mode!==Ha.Volume&&(ai(e,Ka.high,a),ai(e,Ka.low,a)),ai(e,Ka.close,a),s.mode!==Ha.Candles&&ai(e,Ka.volume,a),e.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Qa.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Nn.J(e)})).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new class{getSuggestionsForData(e){var t;const{dataSummary:n}=e;if(null===(t=e.data)||void 0===t||!t.series||!n.hasData||n.timeFieldCount<1||n.numberFieldCount<2||n.numberFieldCount>10)return;const s=Ya(e.data.series,Qa,ue.v.theme2);if(!s)return;if(s.open===s.high&&s.open===s.low)return;e.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ys.y.Candlestick,options:Qa,fieldConfig:{defaults:{},overrides:[]},score:s.autoOpenClose?xn._.Good:xn._.Best})}});var ri=n(26056),oi=n(9787);Object.freeze([0,0]);let li;!function(e){e.List="list",e.Previews="previews"}(li||(li={}));const di={layout:li.List,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},ci=e=>({dashlistSectionHeader:O.css`
    margin-bottom: ${e.spacing(2)};
    color: ${e.colors.secondary.text};
  `,dashlistSection:O.css`
    margin-bottom: ${e.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:O.css`
    ${sa.listItem(e)}
    display: flex;
    cursor: pointer;
    margin: 3px;
    padding: 7px;
  `,dashlistStar:O.css`
    align-self: center;
    margin-right: 0px;
    color: ${e.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:O.css`
    color: ${e.colors.secondary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    line-height: ${e.typography.body.lineHeight};
  `,dashlistTitle:O.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:O.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:O.css`
    position: relative;
    list-style: none;
  `,gridContainer:O.css`
    display: grid;
    gap: ${e.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${e.spacing(1)};
  `}),ui=["enabled","disabled","checked","onClick","className","aria-label"];function hi(e){let{enabled:t,disabled:n,checked:s,onClick:a,className:i,"aria-label":r}=e,o=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ui);const l=(0,E.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),null==a||a(e)}),[a]),d=s?t:n,c=Object.assign({},o,d),u=(0,je.wW)(pi);return(0,$e.jsxs)("label",{className:u.wrapper,children:[(0,$e.jsx)("input",{type:"checkbox",defaultChecked:s,onClick:l,className:u.checkBox,"aria-label":r}),(0,$e.jsx)(Xe.J,Object.assign({className:(0,O.cx)(u.icon,i)},c))]})}const pi=(0,Ut.B)((e=>({wrapper:(0,O.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,O.css)({appearance:"none","&:focus-visible + *":Object.assign({},(0,sa.getFocusStyles)(e),{borderRadius:e.shape.borderRadius(1)})}),icon:(0,O.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})}))),gi=new G.c((function(e){const[t,n]=(0,E.useState)(new Map),s=(0,ye.I0)();(0,E.useEffect)((()=>{(async function(e,t){let n=Promise.resolve([]);if(e.showStarred){const t={limit:e.maxItems,starred:"true"};n=(0,ie.i)().search(t)}let s=Promise.resolve([]),a=[];if(e.showRecentlyViewed){let t=await re.Z.getDashboardOpened();a=(0,P.take)(t,e.maxItems),s=(0,ie.i)().search({dashboardUIDs:a,limit:e.maxItems})}let i=Promise.resolve([]);if(e.showSearch){const n={limit:e.maxItems,query:t(e.query,{},"text"),folderIds:e.folderId,tag:e.tags.map((e=>t(e,{},"text"))),type:"dash-db"};i=(0,ie.i)().search(n)}const[r,o,l]=await Promise.all([n,i,s]);let d=new Map;for(const e of a){const t=l.find((t=>t.uid===e));t&&d.set(e,Object.assign({},t,{isRecent:!0}))}return o.forEach((e=>{e.uid&&(d.has(e.uid)?d.get(e.uid).isSearchResult=!0:d.set(e.uid,Object.assign({},e,{isSearchResult:!0})))})),r.forEach((e=>{e.uid&&(d.has(e.uid)?d.get(e.uid).isStarred=!0:d.set(e.uid,Object.assign({},e,{isStarred:!0})))})),d})(e.options,e.replaceVariables).then((e=>{n(e)}))}),[e.options,e.replaceVariables,e.renderCounter]);const a=async(e,a)=>{var i;const{uid:r,title:o,url:l}=a;e.preventDefault(),e.stopPropagation();const d=await(0,tt.h4)().starDashboard(a.id.toString(),a.isStarred),c=new Map(t);c.set(null!==(i=null==a?void 0:a.uid)&&void 0!==i?i:"",Object.assign({},a,{isStarred:d})),n(c),s((0,ri.OQ)({id:null!=r?r:"",title:o,url:l,isStarred:d}))},[i,r,o]=(0,E.useMemo)((()=>{const e=[...t.values()];return[e.filter((e=>e.isStarred)).sort(((e,t)=>e.title.localeCompare(t.title))),e.filter((e=>e.isRecent)),e.filter((e=>e.isSearchResult)).sort(((e,t)=>e.title.localeCompare(t.title)))]}),[t]),{showStarred:l,showRecentlyViewed:d,showHeadings:c,showSearch:u,layout:h}=e.options,p=[{header:"Starred dashboards",dashboards:i,show:l},{header:"Recently viewed dashboards",dashboards:r,show:d},{header:"Search",dashboards:o,show:u}],g=(0,je.wW)(ci),m=e=>(0,$e.jsx)("ul",{children:e.map((e=>(0,$e.jsx)("li",{className:g.dashlistItem,children:(0,$e.jsxs)("div",{className:g.dashlistLink,children:[(0,$e.jsxs)("div",{className:g.dashlistLinkBody,children:[(0,$e.jsx)("a",{className:g.dashlistTitle,href:e.url,children:e.title}),e.folderTitle&&(0,$e.jsx)("div",{className:g.dashlistFolder,children:e.folderTitle})]}),(0,$e.jsx)(hi,{"aria-label":`Star dashboard "${e.title}".`,className:g.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:e.isStarred,onClick:t=>a(t,e)})]})},`dash-${e.uid}`)))}),f=e=>(0,$e.jsx)("ul",{className:g.gridContainer,children:e.map((e=>(0,$e.jsx)("li",{children:(0,$e.jsx)(oi.K,{item:e})},e.uid)))});return(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:p.map(((e,t)=>{let{show:n,header:s,dashboards:a}=e;return n&&(0,$e.jsxs)("div",{className:g.dashlistSection,children:[c&&(0,$e.jsx)("h6",{className:g.dashlistSectionHeader,children:s}),h===li.Previews?f(a):m(a)]},`dash-group-${t}`)}))})})).setPanelOptions((e=>{ue.v.featureToggles.dashboardPreviews&&e.addRadio({path:"layout",name:"Layout",defaultValue:li.List,settings:{options:[{value:li.List,label:"List"},{value:li.Previews,label:"Preview"}]}}),e.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:di.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:di.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:di.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:di.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:di.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:di.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function(e){let{value:t,onChange:n}=e;return(0,$e.jsx)(Ze,{initialFolderId:t,onChange:e=>n(null==e?void 0:e.id),extraFolders:[He,qe]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:di.tags,editor:e=>(0,$e.jsx)(Me.B,{tags:e.value,onChange:e.onChange})})})).setMigrationHandler((e=>{var t,n,s,a,i,r,o,l;const d={showStarred:null!==(t=e.options.showStarred)&&void 0!==t?t:e.starred,showRecentlyViewed:null!==(n=e.options.showRecentlyViewed)&&void 0!==n?n:e.recent,showSearch:null!==(s=e.options.showSearch)&&void 0!==s?s:e.search,showHeadings:null!==(a=e.options.showHeadings)&&void 0!==a?a:e.headings,maxItems:null!==(i=e.options.maxItems)&&void 0!==i?i:e.limit,query:null!==(r=e.options.query)&&void 0!==r?r:e.query,folderId:null!==(o=e.options.folderId)&&void 0!==o?o:e.folderId,tags:null!==(l=e.options.tags)&&void 0!==l?l:e.tags};if(parseFloat(e.pluginVersion||"6.1")<6.3){["starred","recent","search","headings","limit","query","folderId"].forEach((t=>delete e[t]))}return d}));var mi;function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vi extends E.Component{constructor(){super(...arguments),fi(this,"subscription",new Et.w0),fi(this,"state",{})}componentDidMount(){const{eventBus:e}=this.props;this.subscription.add(e.subscribe(Bt.es,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(Bt.xH,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(zt.IA,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(zt.oi,(e=>{this.setState({event:e})})))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:e}=this.state;if(!e)return mi||(mi=(0,$e.jsx)("div",{children:"no events yet"}));const{type:t,payload:n,origin:s}=e;return(0,$e.jsxs)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,$e.jsxs)("h3",{children:["Origin: ",null==s?void 0:s.path]}),(0,$e.jsxs)("span",{children:["Type: ",t]}),Boolean(n)&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("pre",{children:JSON.stringify(n.point,null,"  ")}),n.data&&(0,$e.jsx)(Un.H,{data:n.data,rowIndex:n.rowIndex,columnIndex:n.columnIndex})]})]})}}var bi=n(35315);function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let yi=100;class wi extends E.PureComponent{constructor(e){super(e),xi(this,"history",new bi.d({capacity:40,append:"head"})),xi(this,"subs",void 0),xi(this,"eventObserver",{next:e=>{const t=e.origin;this.history.add({key:yi++,type:e.type,path:null==t?void 0:t.path,payload:e.payload}),this.setState({counter:yi})}}),this.state={counter:yi};const t=[];t.push(e.eventBus.getStream(Bt.es).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(Bt.xH).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(Bt.v9).subscribe(this.eventObserver)),this.subs=t}componentWillUnmount(){for(const e of this.subs)e.unsubscribe()}render(){return(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map(((e,t)=>(0,$e.jsxs)("div",{children:[JSON.stringify(e.path)," ",e.type," / X:",JSON.stringify(e.payload.x)," / Y:",JSON.stringify(e.payload.y)]},e.key)))})}}var ji;function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ci extends E.Component{constructor(){super(...arguments),Si(this,"lastRender",Date.now()),Si(this,"counters",{render:0,dataChanged:0,schemaChanged:0}),Si(this,"resetCounters",(()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}))}shouldComponentUpdate(e){const{data:t,options:n}=this.props;var s;if(e.data!==t&&(this.counters.dataChanged++,null!==(s=n.counters)&&void 0!==s&&s.schemaChanged)){var a;const n=null===(a=e.data)||void 0===a?void 0:a.series,s=t.series;if(s&&n){(0,Tn.nl)(s,n,Tn.Ch)||this.counters.schemaChanged++}}return!0}render(){var e;const{data:t,options:n}=this.props,s=null!==(e=n.counters)&&void 0!==e?e:{};this.counters.render++;const a=Date.now(),i=a-this.lastRender;this.lastRender=a;const r=Yn.TB.get(Yn.gz.lastNotNull);return(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{children:[(0,$e.jsx)(ia.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),(0,$e.jsxs)("span",{children:[s.render&&(0,$e.jsxs)("span",{children:["Render: ",this.counters.render," "]}),s.dataChanged&&(0,$e.jsxs)("span",{children:["Data: ",this.counters.dataChanged," "]}),s.schemaChanged&&(0,$e.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged," "]}),(0,$e.jsxs)("span",{children:["TIME: ",i,"ms"]})]})]}),t.series&&t.series.map(((e,n)=>(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("h4",{children:[(0,bn.n)(e,n)," (",e.length,")"]}),(0,$e.jsxs)("table",{className:"filter-table",children:[ji||(ji=(0,$e.jsx)("thead",{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:"Field"}),(0,$e.jsx)("td",{children:"Type"}),(0,$e.jsx)("td",{children:"Last"})]})})),(0,$e.jsx)("tbody",{children:e.fields.map(((n,s)=>{const a=r.reduce(n,!1,!1)[r.id];return(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:(0,bn.C)(n,e,t.series)}),(0,$e.jsx)("td",{children:n.type}),(0,$e.jsx)("td",{children:`${a}`})]},`${s}/${n.name}`)}))})]})]},`${n}/${e.refId}`)))]})}}var ki=n(4645);function Ni(e){var t,n;const s=(0,Rn.R9)();return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)(zs.g,{label:"State name",children:(0,$e.jsx)(ki.I,{value:null!==(t=null===(n=s.instanceState)||void 0===n?void 0:n.name)&&void 0!==t?t:"",onChange:e=>{s.onInstanceStateChange({name:e.currentTarget.value})}})})})}function Oi(e){var t;let{value:n,context:s,onChange:a,item:i}=e;return(0,$e.jsxs)("div",{children:["Current value: ",null===(t=s.instanceState)||void 0===t?void 0:t.name," "]})}let Ii;!function(e){e.Render="render",e.Events="events",e.Cursor="cursor",e.State="State",e.ThrowError="ThrowError"}(Ii||(Ii={}));class Ti extends E.Component{render(){const{options:e}=this.props;switch(e.mode){case Ii.Events:return(0,$e.jsx)(wi,{eventBus:this.props.eventBus});case Ii.Cursor:return(0,$e.jsx)(vi,{eventBus:this.props.eventBus});case Ii.State:return(0,$e.jsx)(Ni,Object.assign({},this.props));case Ii.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return(0,$e.jsx)(Ci,Object.assign({},this.props))}}}const $i=new G.c(Ti).useFieldConfig().setPanelOptions((e=>{e.addSelect({path:"mode",name:"Mode",defaultValue:Ii.Render,settings:{options:[{label:"Render",value:Ii.Render},{label:"Events",value:Ii.Events},{label:"Cursor",value:Ii.Cursor},{label:"Cursor",value:Ii.Cursor},{label:"Share state",value:Ii.State},{label:"Throw error",value:Ii.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:e=>{let{mode:t}=e;return t===Ii.State},editor:Oi}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Ii.Render}}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Ii.Render}}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Ii.Render}}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})}));var Ri=n(69748);const Pi=new G.c((e=>(0,$e.jsx)(Ri.Z,{data:e.data.series[0],app:K.zj.Unknown,flameGraphHeight:e.height})));var Di=n(37275),Ai=n(81691);const Mi=(e,t)=>{const n="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",s=t?n:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",a=t?n:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",i=e.isDark?s:a;return`\n      background-color: ${e.colors.background.secondary};\n      margin-right: ${e.spacing(4)};\n      border: 1px solid ${e.colors.border.weak};\n      border-bottom-left-radius: ${e.shape.borderRadius(2)};\n      border-bottom-right-radius: ${e.shape.borderRadius(2)};\n      position: relative;\n      max-height: 230px;\n\n      ${e.breakpoints.down("xxl")} {\n        margin-right: ${e.spacing(2)};\n      }\n      &::before {\n        display: block;\n        content: ' ';\n        position: absolute;\n        left: 0;\n        right: 0;\n        height: 2px;\n        top: 0;\n        background-image: ${i};\n      }\n`},Li=(e,t)=>O.css`
  color: ${t?e.v1.palette.blue95:e.colors.text.secondary};

  ${e.breakpoints.down("sm")} {
    display: none;
  }
`,Fi=O.css`
  padding: 16px;
`;var Ei;const Vi=e=>{let{card:t}=e;const n=(0,je.wW)((0,E.useCallback)((e=>zi(e,t.done)),[t.done])),s=(0,je.wW)((0,E.useCallback)((e=>Li(e,t.done)),[t.done]));return(0,$e.jsxs)("div",{className:n.card,children:[(0,$e.jsx)("div",{className:Fi,children:(0,$e.jsxs)("a",{href:`${t.href}?utm_source=grafana_gettingstarted`,className:n.url,children:[(0,$e.jsx)("div",{className:n.heading,children:t.done?"complete":t.heading}),(0,$e.jsx)("h4",{className:n.title,children:t.title}),(0,$e.jsx)("div",{children:(0,$e.jsx)(Xe.J,{className:s,name:t.icon,size:"xxl"})})]})}),(0,$e.jsxs)("a",{href:`${t.learnHref}?utm_source=grafana_gettingstarted`,className:n.learnUrl,target:"_blank",rel:"noreferrer",children:["Learn how in the docs ",Ei||(Ei=(0,$e.jsx)(Xe.J,{name:"external-link-alt"}))]})]})},zi=(e,t)=>({card:O.css`
      ${Mi(e,t)}

      min-width: 230px;

      ${e.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:O.css`
      text-transform: uppercase;
      color: ${t?e.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${e.spacing(2)};
    `,title:O.css`
      margin-bottom: ${e.spacing(2)};
    `,url:O.css`
      display: inline-block;
    `,learnUrl:O.css`
      border-top: 1px solid ${e.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var Bi=n(78130);const _i=e=>{let{card:t}=e;const n=(0,je.wW)((0,E.useCallback)((e=>Ui(e,t.done)),[t.done])),s=(0,je.wW)((0,E.useCallback)((e=>Li(e,t.done)),[t.done]));return(0,$e.jsx)("a",{className:n.card,target:"_blank",rel:"noreferrer",href:`${t.href}?utm_source=grafana_gettingstarted`,onClick:e=>Wi(e,t),children:(0,$e.jsxs)("div",{className:Fi,children:[(0,$e.jsx)("div",{className:n.type,children:t.type}),(0,$e.jsx)("div",{className:n.heading,children:t.done?"complete":t.heading}),(0,$e.jsx)("h4",{className:n.cardTitle,children:t.title}),(0,$e.jsx)("div",{className:n.info,children:t.info}),(0,$e.jsx)(Xe.J,{className:s,name:t.icon,size:"xxl"})]})})},Wi=(e,t)=>{e.preventDefault();Bi.Z.get(t.key)||Bi.Z.set(t.key,!0)},Ui=(e,t)=>({card:O.css`
      ${Mi(e,t)}
      width: 460px;
      min-width: 460px;

      ${e.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${e.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:O.css`
      color: ${e.colors.primary.text};
      text-transform: uppercase;
    `,heading:O.css`
      text-transform: uppercase;
      color: ${e.colors.primary.text};
      margin-bottom: ${e.spacing(1)};
    `,cardTitle:O.css`
      margin-bottom: ${e.spacing(2)};
    `,info:O.css`
      margin-bottom: ${e.spacing(2)};
    `,status:O.css`
      display: flex;
      justify-content: flex-end;
    `}),Hi=e=>{let{step:t}=e;const n=(0,je.wW)(qi);return(0,$e.jsxs)("div",{className:n.setup,children:[(0,$e.jsxs)("div",{className:n.info,children:[(0,$e.jsx)("h2",{className:n.title,children:t.title}),(0,$e.jsx)("p",{children:t.info})]}),(0,$e.jsx)("div",{className:n.cards,children:t.cards.map(((e,t)=>{const n=`${e.title}-${t}`;return"tutorial"===e.type?(0,$e.jsx)(_i,{card:e},n):(0,$e.jsx)(Vi,{card:e},n)}))})]})},qi=e=>({setup:O.css`
      display: flex;
      width: 95%;
    `,info:O.css`
      width: 172px;
      margin-right: 5%;

      ${e.breakpoints.down("xxl")} {
        margin-right: ${e.spacing(4)};
      }
      ${e.breakpoints.down("sm")} {
        display: none;
      }
    `,title:O.css`
      color: ${e.v1.palette.blue95};
    `,cards:O.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${e.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var Zi=n(42833);const Gi="Grafana fundamentals",Qi="getting.started.",Ki=`${Qi}${Gi.replace(" ","-").trim().toLowerCase()}`,Ji=`${Qi}${"Create users and teams".replace(" ","-").trim().toLowerCase()}`;var Yi;function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class er extends E.PureComponent{constructor(){super(...arguments),Xi(this,"state",{checksDone:!1,currentStep:0,steps:[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Gi,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the “Data source” and “Dashboards” steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Bi.Z.get(Ki)),key:Ki,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise((e=>{e((0,Zi.ak)().getMetricSources().filter((e=>!0!==e.meta.builtIn)).length>0)})),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,ie.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard – it is, after all, a fully customizable dashboard – and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Ji,check:()=>Promise.resolve(Bi.Z.get(Ji)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const e=await(0,ie.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(e.length>0)},done:!1}]}]}),Xi(this,"onForwardClick",(()=>{this.setState((e=>({currentStep:e.currentStep+1})))})),Xi(this,"onPreviousClick",(()=>{this.setState((e=>({currentStep:e.currentStep-1})))})),Xi(this,"dismiss",(()=>{const{id:e}=this.props,t=(0,tt.h4)().getCurrent(),n=null==t?void 0:t.getPanelById(e);null==t||t.removePanel(n),ie.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then((e=>{ae.Vt.user.helpFlags1=e.helpFlags1}))}))}async componentDidMount(){const{steps:e}=this.state,t=e.map((async e=>{const t=e.cards.map((e=>e.check().then((t=>Object.assign({},e,{done:t}))))),n=await Promise.all(t);return Object.assign({},e,{done:n.every((e=>e.done)),cards:n})})),n=await Promise.all(t);this.setState({currentStep:n[0].done?1:0,steps:n,checksDone:!0})}render(){const{checksDone:e,currentStep:t,steps:n}=this.state,s=tr(),a=n[t];return(0,$e.jsx)("div",{className:s.container,children:e?(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Se.zx,{variant:"secondary",fill:"text",className:s.dismiss,onClick:this.dismiss,children:"Remove this panel"}),t===n.length-1&&(0,$e.jsx)(Se.zx,{className:(0,O.cx)(s.backForwardButtons,s.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),(0,$e.jsx)("div",{className:s.content,children:(0,$e.jsx)(Hi,{step:a})}),t<n.length-1&&(0,$e.jsx)(Se.zx,{className:(0,O.cx)(s.backForwardButtons,s.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})]}):(0,$e.jsxs)("div",{className:s.loading,children:[(0,$e.jsx)("div",{className:s.loadingText,children:"Checking completed setup steps"}),Yi||(Yi=(0,$e.jsx)(Ai.$,{size:24,inline:!0}))]})})}}const tr=(0,Ut.B)((()=>{const e=ue.v.theme2;return{container:O.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${e.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${e.spacing(4)} ${e.spacing(2)} 0;
    `,content:O.css`
      label: content;
      display: flex;
      justify-content: center;

      ${e.breakpoints.down("xxl")} {
        margin-left: ${e.spacing(3)};
        justify-content: flex-start;
      }
    `,header:O.css`
      label: header;
      margin-bottom: ${e.spacing(3)};
      display: flex;
      flex-direction: column;

      ${e.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:O.css`
      height: 58px;
      padding-right: ${e.spacing(2)};
      display: none;

      ${e.breakpoints.up("md")} {
        display: block;
      }
    `,heading:O.css`
      label: heading;
      margin-right: ${e.spacing(3)};
      margin-bottom: ${e.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${e.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:O.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:O.css`
      left: 10px;

      ${e.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:O.css`
      right: 10px;

      ${e.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:O.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${e.spacing(1)};
    `,loading:O.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:O.css`
      margin-right: ${e.spacing(1)};
    `}})),nr=new G.c(er).setNoPadding();var sr=n(37800),ar=n(13131);Object.freeze([0,0]);const ir={bucketOffset:0},rr={fillOpacity:80,gradientMode:wn.FI.None,lineWidth:1};function or(e){return e.fields[1].values.get(0)-e.fields[0].values.get(0)}const lr=(e,t)=>{let n=new Xn.U,s=or(e);n.addScale({scaleKey:"x",isTime:!1,distribution:wn.wf.Linear,orientation:wn.wN.Horizontal,direction:wn.bQ.Right,range:(e,t,n)=>{let a=e.data[0][0];var i,r;return n===e.data[0][e.data[0].length-1]?n+=s:(i=n,r=s,n=Math.ceil(i/r)*r),t>a&&(t=function(e,t){return Math.floor(e/t)*t}(t,s)),[t,n]}}),n.addScale({scaleKey:"y",isTime:!1,distribution:wn.wf.Linear,orientation:wn.wN.Vertical,direction:wn.bQ.Up});const a=e.fields[0].display,i=e=>(0,Zn.zc)(a(e));n.addAxis({scaleKey:"x",isTime:!1,placement:wn.LB.Bottom,incrs:sr.Zi,splits:(e,t,n,a,i,r)=>{let o=e.axes[t]._space,l=e.valToPos(e.data[0][0]+s,"x")-e.valToPos(e.data[0][0],"x"),d=e.data[0][0],c=e.data[0][e.data[0].length-1]+s,u=[],h=Math.ceil(o/l);for(let e=0,t=d;t<=c;e++,t+=s)!(e%h)&&u.push(t);return u},values:(e,t)=>{const n=t.map(i),s=n.reduce(((e,t)=>Math.max((0,Pn.X1)(t,Dn.gD).width,e)),0),a=e.bbox.width/((s+10)*devicePixelRatio),r=Math.ceil(n.length/a);return n.map(((e,t)=>t%r==0?e:null))},theme:t});let r=e.fields[2].display;n.addAxis({scaleKey:"y",isTime:!1,placement:wn.LB.Left,formatValue:(e,t)=>(0,Zn.zc)(r(e,t)),theme:t}),n.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let o=qn.Z.paths.bars({align:1,size:[1,1/0]}),l=0;for(let s=2;s<e.fields.length;s++){var d,c;const a=e.fields[s];a.state=null!==(d=a.state)&&void 0!==d?d:{},a.state.seriesIndex=l++;const i=Object.assign({},rr,a.config.custom),r="y",u=(0,Gn.fD)(a),h=(0,Gn.YO)(a,t).color;n.addSeries({scaleKey:r,lineWidth:i.lineWidth,lineColor:h,fillOpacity:i.fillOpacity,theme:t,colorMode:u,pathBuilder:o,show:!(null!==(c=i.hideFrom)&&void 0!==c&&c.viz),gradientMode:i.gradientMode,thresholds:a.config.thresholds,hardMin:a.config.min,hardMax:a.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax,dataFrameFieldIndex:{fieldIndex:1,frameIndex:s-2}})}return n},dr=e=>{let t=[];for(const n of e.fields)n.name!==sr.cO&&t.push(n.values.toArray());for(let e=1;e<t.length;e++){let n=t[e];for(let e=0;e<n.length;e++)0===n[e]&&(n[e]=null)}return t};class cr extends E.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;const{alignedFrame:s}=e;return s&&(n={alignedData:dr(s)},t&&(n.config=lr(s,this.props.theme))),n}renderLegend(e){const{legend:t}=this.props;return e&&!1!==t.showLegend&&this.props.rawSeries?(0,$e.jsx)(Ln.l,Object.assign({data:this.props.rawSeries,config:e,maxHeight:"35%",maxWidth:"60%"},t)):null}componentDidUpdate(e){const{structureRev:t,alignedFrame:n,bucketSize:s}=this.props;if(n!==e.alignedFrame){let a=this.prepState(this.props,!1);if(a){(s!==e.bucketSize||this.props.options!==e.options||void 0===this.state.config||t!==e.structureRev||!t)&&(a.config=lr(n,this.props.theme))}a&&this.setState(a)}}render(){const{width:e,height:t,children:n,alignedFrame:s}=this.props,{config:a}=this.state;return a?(0,$e.jsx)(An.AY,{width:e,height:t,legend:this.renderLegend(a),children:(e,t)=>(0,$e.jsx)(ar.N,{config:this.state.config,data:this.state.alignedData,width:e,height:t,timeRange:null,children:n?n(a,s):null})}):null}}var ur;function hr(e){if(1!==(null==e?void 0:e.length))return!1;const t=e[0];if(t.fields.length<3)return!1;if(t.fields[0].name!==sr.wL||t.fields[1].name!==sr.cO)return!1;for(const e of t.fields)if(e.type!==yn.fS.number)return!1;return!0}const pr=new G.c((e=>{let{data:t,options:n,width:s,height:a}=e;const i=(0,je.l4)(),r=(0,E.useMemo)((()=>{var e;if(null==t||null===(e=t.series)||void 0===e||!e.length)return;if(1===t.series.length){const e=(0,sr.qr)(t.series[0]);if(e)return(0,sr.zM)(e)}const s=(0,sr.gY)(t.series,n);return s?(0,sr.zM)(s,i):void 0}),[t.series,n,i]);if(!r||!r.fields.length)return ur||(ur=(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:"No histogram found in response"})}));const o=or(r);return(0,$e.jsx)(cr,{options:n,theme:i,legend:n.legend,rawSeries:t.series,structureRev:t.structureRev,width:s,height:a,alignedFrame:r,bucketSize:o,children:(e,t)=>null})})).setPanelOptions((e=>{e.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,t)=>hr(t)}).addNumberInput({path:"bucketSize",name:sr.py.bucketSize.name,description:sr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:ir.bucketSize,showIf:(e,t)=>!hr(t)}).addNumberInput({path:"bucketOffset",name:sr.py.bucketOffset.name,description:sr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:ir.bucketOffset,showIf:(e,t)=>!hr(t)}).addBooleanSwitch({path:"combine",name:sr.py.combine.name,description:sr.py.combine.description,defaultValue:ir.combine,showIf:(e,t)=>!hr(t)}),Nn.J(e)})).useFieldConfig({standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:fn.S.PaletteClassic}}},useCustomConfig:e=>{const t=rr;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:jn.q.fillGradient[0].value,settings:{options:jn.q.fillGradient}}),Cn.B(e)}});var gr,mr,fr,vr,br=n(22543),xr=n(83744);function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wr=[{label:"Grafana",value:br.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:br.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:br.z.Plugin,description:"Plugins with live support"}];class jr extends E.PureComponent{constructor(){super(...arguments),yr(this,"state",{namespaces:[],paths:[]}),yr(this,"onScopeChanged",(e=>{e.value&&this.props.onChange({scope:e.value,namespace:void 0,path:void 0})})),yr(this,"onNamespaceChanged",(e=>{var t;const n={scope:null===(t=this.props.value)||void 0===t?void 0:t.scope,path:void 0};e.value&&(n.namespace=e.value),this.props.onChange(n)})),yr(this,"onPathChanged",(e=>{const{value:t,onChange:n}=this.props,s={scope:t.scope,namespace:t.namespace};e.value&&(s.path=e.value),n(s)}))}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(e){this.props.value!==e.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){var e;const{namespaces:t,paths:n}=this.state,{scope:s,namespace:a,path:i}=this.props.value,r=Cr(se.vc.theme2);return(0,$e.jsxs)($e.Fragment,{children:[gr||(gr=(0,$e.jsx)(gt.b,{title:"Grafana Live",severity:"info",children:"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."})),(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{className:r.dropWrap,children:[mr||(mr=(0,$e.jsx)(xr._,{children:"Scope"})),(0,$e.jsx)(ze.Ph,{options:wr,value:wr.find((e=>e.value===s)),onChange:this.onScopeChanged})]}),s&&(0,$e.jsxs)("div",{className:r.dropWrap,children:[fr||(fr=(0,$e.jsx)(xr._,{children:"Namespace"})),(0,$e.jsx)(ze.Ph,{options:t,value:null!==(e=t.find((e=>e.value===a)))&&void 0!==e?e:a?{label:a,value:a}:void 0,onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]}),s&&a&&(0,$e.jsxs)("div",{className:r.dropWrap,children:[vr||(vr=(0,$e.jsx)(xr._,{children:"Path"})),(0,$e.jsx)(ze.Ph,{options:n,value:Sr(n,i),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]})]})]})}}function Sr(e,t){const n=e.find((e=>e.value===t));return n||(t?{label:t,value:t}:void 0)}const Cr=(0,Ut.B)((e=>({dropWrap:O.css`
    margin-bottom: ${e.spacing(1)};
  `})));var kr=n(28173),Nr=n(98251),Or=n(89946),Ir=n(31787),Tr=n(36551),$r=n(31919),Rr=n(70332),Pr=n(41345),Dr=n(84145),Ar=n(63454);function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lr extends E.Component{constructor(e){super(e),Mr(this,"onColumnResize",((e,t)=>{const{fieldConfig:n}=this.props,{overrides:s}=n,a=$r.mi.byName,i="custom.width",r=s.find((t=>t.matcher.id===a&&t.matcher.options===e));if(r){const e=r.properties.find((e=>e.id===i));e?e.value=t:r.properties.push({id:i,value:t})}else s.push({matcher:{id:a,options:e},properties:[{id:i,value:t}]});this.props.onFieldConfigChange(Object.assign({},n,{overrides:s}))})),Mr(this,"onSortByChange",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{sortBy:e}))})),Mr(this,"onChangeTableSelection",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{frameIndex:e.value||0})),this.forceUpdate()})),Mr(this,"onCellFilterAdded",(e=>{var t;const{key:n,value:s,operator:a}=e,i=null===(t=(0,tt.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(this.props.id);if(!i)return;const r=(0,Zi.ak)().getInstanceSettings(i.datasource),o=r&&(0,Rr.iU)(r);o&&(0,Ar.WI)((0,Dr.m2)({datasource:o,key:n,operator:a,value:s}))}))}renderTable(e,t,n,s){var a;const{options:i}=this.props;return(0,$e.jsx)(Pr.i,{height:n,width:t,data:e,noHeader:!i.showHeader,showTypeIcons:i.showTypeIcons,resizable:!0,initialSortBy:i.sortBy,onSortByChange:this.onSortByChange,onColumnResize:this.onColumnResize,onCellFilterAdded:this.onCellFilterAdded,footerOptions:i.footer,enablePagination:null===(a=i.footer)||void 0===a?void 0:a.enablePagination,subData:s})}getCurrentFrameIndex(e,t){return t.frameIndex>0&&t.frameIndex<e.length?t.frameIndex:0}render(){var e;const{data:t,height:n,width:s,options:a,fieldConfig:i,id:r}=this.props,o=t.series,l=o.filter((e=>{var t,n;return void 0===(null===(t=e.meta)||void 0===t||null===(n=t.custom)||void 0===n?void 0:n.parentRowIndex)})),d=o.filter((e=>{var t,n;return void 0!==(null===(t=e.meta)||void 0===t||null===(n=t.custom)||void 0===n?void 0:n.parentRowIndex)})),c=null==l?void 0:l.length,u=null===(e=l[0])||void 0===e?void 0:e.fields.length;if(!c||!u)return(0,$e.jsx)($n.Z,{panelId:r,fieldConfig:i,data:t});if(c>1){const e=se.vc.theme2.spacing.gridSize*se.vc.theme2.components.height.md,t=16,i=this.getCurrentFrameIndex(l,a),r=l.map(((e,t)=>({label:(0,bn.n)(e),value:t}))),o=l[i],c=d.filter((e=>e.refId===o.refId));return(0,$e.jsxs)("div",{className:Fr.wrapper,children:[this.renderTable(o,s,n-e-t,c),(0,$e.jsx)("div",{className:Fr.selectWrapper,children:(0,$e.jsx)(ze.Ph,{options:r,value:r[i],onChange:this.onChangeTableSelection})})]})}const h=o.filter((e=>{var t,n;return void 0!==(null===(t=e.meta)||void 0===t||null===(n=t.custom)||void 0===n?void 0:n.parentRowIndex)}));return this.renderTable(t.series[0],s,n,h)}}const Fr={wrapper:O.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:O.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:O.css`
    padding: 8px;
  `};let Er;var Vr,zr,Br,_r,Wr;function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Raw="raw",e.JSON="json",e.Auto="auto",e.None="none"}(Er||(Er={}));class Hr extends E.PureComponent{constructor(e){super(e),Ur(this,"isValid",void 0),Ur(this,"subscription",void 0),Ur(this,"styles",qr(ue.v.theme2)),Ur(this,"streamObserver",{next:e=>{(0,br.se)(e)?this.setState({status:e,changed:Date.now()}):(0,br.RL)(e)?this.setState({message:e.message,changed:Date.now()}):console.log("ignore",e)}}),Ur(this,"unsubscribe",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)})),Ur(this,"onSaveJSON",(e=>{const{options:t,onOptionsChange:n}=this.props;try{const s=JSON.parse(e);n(Object.assign({},t,{json:s}))}catch(e){console.log("Error reading JSON",e)}})),Ur(this,"onPublishClicked",(async()=>{var e;const{addr:t}=this.state;if(!t)return void console.log("invalid address");const n=null===(e=this.props.options)||void 0===e?void 0:e.json;if(!n)return void console.log("nothing to publish");const s=await(0,Nr.gj)().publish(t,n);console.log("onPublishClicked (response from publish)",s)})),this.isValid=!!(0,Nr.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){var t,n;(null===(t=this.props.options)||void 0===t?void 0:t.channel)!==(null===(n=e.options)||void 0===n?void 0:n.channel)&&this.loadChannel()}async loadChannel(){var e;const t=null===(e=this.props.options)||void 0===e?void 0:e.channel;if(!(0,br.nU)(t))return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});if((0,P.isEqual)(t,this.state.addr))return void console.log("Same channel",this.state.addr);const n=(0,Nr.gj)();if(!n)return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});this.unsubscribe(),console.log("LOAD",t);try{this.subscription=n.getStream(t).subscribe(this.streamObserver),this.setState({addr:t,error:void 0})}catch(e){this.setState({addr:void 0,error:e})}}renderNotEnabled(){return(0,$e.jsxs)(gt.b,{title:"Grafana Live",severity:"info",children:[Vr||(Vr=(0,$e.jsx)("p",{children:"Grafana live requires a feature flag to run"})),zr||(zr=(0,$e.jsx)("b",{children:"custom.ini:"})),(0,$e.jsx)("pre",{children:"[feature_toggles]\n    enable = live"})]})}renderMessage(e){const{options:t}=this.props,{message:n}=this.state;var s,a,i;if(!n)return(0,$e.jsxs)("div",{children:[Br||(Br=(0,$e.jsx)("h4",{children:"Waiting for data:"})),null===(s=t.channel)||void 0===s?void 0:s.scope,"/",null===(a=t.channel)||void 0===a?void 0:a.namespace,"/",null===(i=t.channel)||void 0===i?void 0:i.path]});if(t.message===Er.JSON)return(0,$e.jsx)(Or.g,{json:n,open:5});if(t.message===Er.Auto&&n instanceof Tr.Av){const t={series:(0,Ts.SM)({data:[n],theme:ue.v.theme2,replaceVariables:e=>e,fieldConfig:{defaults:{},overrides:[]}}),state:kr.Gu.Streaming},s=Object.assign({},this.props,{options:{frameIndex:0,showHeader:!0}});return(0,$e.jsx)(Lr,Object.assign({},s,{data:t,height:e}))}return(0,$e.jsx)("pre",{children:JSON.stringify(n)})}renderPublish(e){const{options:t}=this.props;return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Ir.p,{height:e-32,language:"json",value:t.json?JSON.stringify(t.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),(0,$e.jsx)("div",{style:{height:32},children:(0,$e.jsx)(Se.zx,{onClick:this.onPublishClicked,children:"Publish"})})]})}renderStatus(){const{status:e}=this.state;if((null==e?void 0:e.state)===br.yS.Connected)return;let t="";return e&&(t=this.styles.status[e.state]),(0,$e.jsx)("div",{className:(0,O.cx)(t,this.styles.statusWrap),children:null==e?void 0:e.state})}renderBody(){const{status:e}=this.state,{options:t,height:n}=this.props;if(t.publish){if(t.message===Er.None)return(0,$e.jsx)("div",{children:this.renderPublish(n)});const e=n/2;return(0,$e.jsxs)("div",{children:[(0,$e.jsx)("div",{style:{height:e,overflow:"hidden"},children:(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(e)})}),(0,$e.jsx)("div",{children:this.renderPublish(e)})]})}return t.message===Er.None?(0,$e.jsx)("pre",{children:JSON.stringify(e)}):(0,$e.jsx)("div",{style:{overflow:"hidden",height:n},children:(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(n)})})}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:e,error:t}=this.state;return e?t?(0,$e.jsxs)("div",{children:[Wr||(Wr=(0,$e.jsx)("h2",{children:"ERROR"})),(0,$e.jsx)("div",{children:JSON.stringify(t)})]}):(0,$e.jsxs)($e.Fragment,{children:[this.renderStatus(),this.renderBody()]}):_r||(_r=(0,$e.jsx)(gt.b,{title:"Grafana Live",severity:"info",children:"Use the panel editor to pick a channel"}))}}const qr=(0,Ut.B)((e=>({statusWrap:O.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.components.panel.background};
    padding: 10px;
    z-index: ${e.zIndex.modal};
  `,status:{[br.yS.Pending]:O.css`
      border: 1px solid ${e.v1.palette.orange};
    `,[br.yS.Connected]:O.css`
      border: 1px solid ${e.colors.success.main};
    `,[br.yS.Connecting]:O.css`
      border: 1px solid ${e.v1.palette.brandWarning};
    `,[br.yS.Disconnected]:O.css`
      border: 1px solid ${e.colors.warning.main};
    `,[br.yS.Shutdown]:O.css`
      border: 1px solid ${e.colors.error.main};
    `,[br.yS.Invalid]:O.css`
      border: 1px solid red;
    `}}))),Zr=new G.c(Hr).setPanelOptions((e=>{e.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:jr,defaultValue:{}}),e.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Er.Raw,label:"Raw Text"},{value:Er.JSON,label:"JSON"},{value:Er.Auto,label:"Auto"},{value:Er.None,label:"None"}]},defaultValue:Er.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})}));var Gr=n(93246),Qr=n(57322),Kr=n(90374),Jr=n(17052),Yr=n(67543);const Xr=(e,t)=>n=>({container:O.css`
    margin-bottom: ${n.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${n.spacing(e?0:2.5)};
  `,labelContainer:O.css`
    margin: ${t?n.spacing(.5,0,.5,0):n.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:O.css`
    margin-right: ${n.spacing(.5)};
    font-size: ${n.typography.bodySmall.fontSize};
    font-weight: ${n.typography.fontWeightMedium};
  `});const eo=new G.c((e=>{let{data:t,timeZone:n,fieldConfig:s,options:{showLabels:a,showTime:i,wrapLogMessage:r,showCommonLabels:o,prettifyLogMessage:l,sortOrder:d,dedupStrategy:c,enableLogDetails:u},title:h,id:p}=e;const g=d===Gr.UV.Ascending,m=(0,je.wW)(Xr(h,g)),[f,v]=(0,E.useState)(0),b=(0,E.useRef)(null),{eventBus:x}=(0,Rn.R9)(),y=(0,E.useCallback)((e=>{e?x.publish(new Bt.es({point:{time:e.timeEpochMs}})):x.publish(new Bt.xH)}),[x]),[w,j,S]=(0,E.useMemo)((()=>{var e,n,s;const a=t?(0,Qr.aB)(t.series,null===(e=t.request)||void 0===e?void 0:e.intervalMs,void 0,null===(n=t.request)||void 0===n?void 0:n.targets):null,i=(null==a?void 0:a.rows)||[],r=null==a||null===(s=a.meta)||void 0===s?void 0:s.find((e=>e.label===Qr.Qp));return[i,(0,Qr.UW)(i,c),r]}),[t,c]);(0,E.useLayoutEffect)((()=>{g&&b.current?v(b.current.offsetHeight):v(0)}),[g,w]);const C=(0,E.useCallback)(((e,n)=>(0,Ps.a)({field:e,rowIndex:n,range:t.timeRange})),[t]);if(!t||0===w.length)return(0,$e.jsx)(Kr.Z,{fieldConfig:s,panelId:p,data:t,needsStringField:!0});const k=()=>(0,$e.jsxs)("div",{className:m.labelContainer,children:[(0,$e.jsx)("span",{className:m.label,children:"Common labels:"}),(0,$e.jsx)(Jr.j,{labels:S?S.value:{labels:"(no common labels)"}})]});return(0,$e.jsx)(ge.$,{autoHide:!0,scrollTop:f,children:(0,$e.jsxs)("div",{className:m.container,ref:b,children:[o&&!g&&k(),(0,$e.jsx)(Yr.w,{logRows:w,deduplicatedRows:j,dedupStrategy:c,showLabels:a,showTime:i,wrapLogMessage:r,prettifyLogMessage:l,timeZone:n,getFieldLinks:C,logsSortOrder:d,enableLogDetails:u,previewLimit:g?w.length:void 0,onLogRowHover:y,app:K.zj.Dashboard}),o&&g&&k()]})})})).setPanelOptions((e=>{e.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:Gr.Y4.none,label:"None",description:Gr.Uv[Gr.Y4.none]},{value:Gr.Y4.exact,label:"Exact",description:Gr.Uv[Gr.Y4.exact]},{value:Gr.Y4.numbers,label:"Numbers",description:Gr.Uv[Gr.Y4.numbers]},{value:Gr.Y4.signature,label:"Signature",description:Gr.Uv[Gr.Y4.signature]}]},defaultValue:Gr.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:Gr.UV.Descending,label:"Newest first"},{value:Gr.UV.Ascending,label:"Oldest first"}]},defaultValue:Gr.UV.Descending})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:n}=e;n.hasData&&n.hasTimeField&&n.hasStringField&&("logs"===n.preferredVisualisationType?t.append({name:ys.y.Logs,score:xn._.Best}):t.append({name:ys.y.Logs}))}});var to,no,so=n(53543),ao=n(81359),io=n(46479);Object.freeze([0,0]);const ro={showImage:!0},oo=new G.c((function(e){const{width:t,options:{feedUrl:n=ao.k,showImage:s}}=e,{state:a,getNews:i}=(0,io.j)(n);return(0,E.useEffect)((()=>{const t=e.eventBus.subscribe(pt.U5,i);return()=>{t.unsubscribe()}}),[i,e.eventBus]),(0,E.useEffect)((()=>{i()}),[i]),a.error?to||(to=(0,$e.jsx)("div",{children:"Error loading RSS feed."})):a.loading?no||(no=(0,$e.jsx)("div",{children:"Loading..."})):a.value?(0,$e.jsx)(ge.$,{autoHeightMin:"100%",autoHeightMax:"100%",children:a.value.map(((e,n)=>(0,$e.jsx)(so.S,{index:n,width:t,showImage:s,data:a.value},n)))}):null})).setPanelOptions((e=>{e.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:ao.k},defaultValue:ro.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:ro.showImage})}));var lo,co=n(58635),uo=n(81434),ho=n(10098);var po=n(32933),go=n(90261);const mo=e=>{let{value:t,onChange:n,context:s}=e;const a=(0,je.wW)(fo),i=(e,s,a)=>{var i;let r=null!==(i=null==t?void 0:t.slice())&&void 0!==i?i:[];r[e][s]=a,n(r)};return(0,$e.jsxs)($e.Fragment,{children:[null==t?void 0:t.map(((e,r)=>{var o;return(0,$e.jsxs)("div",{className:a.section,children:[(0,$e.jsx)(go.b,{context:s,value:null!==(o=e.field)&&void 0!==o?o:"",onChange:e=>{i(r,"field",e)},item:{settings:{filter:e=>e.name.includes("arc__")},id:`arc-field-${r}`,name:`arc-field-${r}`,editor:()=>null}}),(0,$e.jsx)(po.zH,{color:e.color||"#808080",onChange:e=>{i(r,"color",e)}}),(0,$e.jsx)(Se.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>(e=>{const s=null==t?void 0:t.slice();s.splice(e,1),n(s)})(r),title:"Remove arc"})]},r)})),(0,$e.jsx)(Se.zx,{size:"sm",icon:"plus",onClick:()=>{const e={field:"",color:""};n(t?[...t,e]:[e])},variant:"secondary",children:"Add arc"})]})},fo=()=>({section:O.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),vo=new G.c((e=>{let{width:t,height:n,data:s,options:a}=e;const i=(0,Ps.u)(s.timeRange);if(!s||!s.series.length)return lo||(lo=(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:"No data found in response"})}));const r=(0,co.Z)(ho.Ee);return(0,$e.jsx)("div",{style:{width:t,height:n},children:(0,$e.jsx)(uo.E,{dataFrames:r(s.series,a),getLinks:i})})})).setPanelOptions(((e,t)=>{e.addNestedOptions({category:["Nodes"],path:"nodes",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),e.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:mo})}}),e.addNestedOptions({category:["Edges"],path:"edges",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})}));var bo=n(39949),xo=n(39329),yo=n(50300),wo=n(42365),jo=n(78668),So=n(47833),Co=n(82992),ko=n(22038),No=n(35008),Oo=n.n(No),Io=n(11549),To=n(62335);let $o=0;function Ro(e){const t=(0,E.useRef)(null);return null===t.current&&(t.current=e+$o++),t.current.toString()}Object.freeze([0,0]);let Po,Do,Ao;!function(e){e.Donut="donut",e.Pie="pie"}(Po||(Po={})),function(e){e.Name="name",e.Percent="percent",e.Value="value"}(Do||(Do={})),function(e){e.Percent="percent",e.Value="value"}(Ao||(Ao={}));function Mo(e){var t,n;return!(null!==(t=e.field.custom)&&void 0!==t&&null!==(n=t.hideFrom)&&void 0!==n&&n.viz||isNaN(e.display.numeric))}function Lo(e,t){return t.display.numeric+e}const Fo=e=>{let{fieldDisplayValues:t,pieType:n,width:s,height:a,highlightedTitle:i,displayLabels:r=[],tooltipOptions:o}=e;const l=(0,je.l4)(),d=Ro("PieChart"),c=(0,je.wW)(qo),u=(0,Co.Z)(),{containerRef:h,TooltipInPortal:p}=(0,ko.Z)({detectBounds:!0,scroll:!0}),g=t.filter(Mo),m=e=>`${d}-${Oo()(e).toHex()}`,f=e=>`url(#${m(e)})`,v=r.length>0,b="none"!==o.mode&&u.tooltipOpen,x=g.reduce(Lo,0),y=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;const a=Math.min(t,e),i=(a-2*s)/2,r=n===Po.Pie?i:Math.max(i/3,20),o=i-r;return{position:(a-2*s)/2+s,size:a,outerRadius:i,innerRadius:o,gradientFromOffset:1-(i-o)/i}}(s,a,n),w=[...new Set(g.map((e=>{var t;return null!==(t=e.display.color)&&void 0!==t?t:fn.R})))];return(0,$e.jsxs)("div",{className:c.container,children:[(0,$e.jsx)("svg",{width:y.size,height:y.size,ref:h,children:(0,$e.jsxs)(jo.Z,{top:y.position,left:y.position,children:[w.map((e=>(0,$e.jsx)(wo.Z,{id:m(e),from:Bo(e,l),to:_o(e,l),fromOffset:y.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:y.outerRadius},e))),(0,$e.jsx)(So.Z,{data:g,pieValue:e=>e.display.numeric,outerRadius:y.outerRadius,innerRadius:y.innerRadius,cornerRadius:3,padAngle:.005,children:e=>(0,$e.jsxs)($e.Fragment,{children:[e.arcs.map((t=>{var n;const s=null!==(n=t.data.display.color)&&void 0!==n?n:fn.R,a=Uo(i,t);return t.data.hasLinks&&t.data.getLinks?(0,$e.jsx)(Io.V,{links:t.data.getLinks,children:n=>(0,$e.jsx)(Eo,{tooltip:u,highlightState:a,arc:t,pie:e,fill:f(s),openMenu:n.openMenu,tooltipOptions:o})},t.index):(0,$e.jsx)(Eo,{highlightState:a,tooltip:u,arc:t,pie:e,fill:f(s),tooltipOptions:o},t.index)})),v&&e.arcs.map((e=>{const t=Uo(i,e);return(0,$e.jsx)(Vo,{arc:e,highlightState:t,outerRadius:y.outerRadius,innerRadius:y.innerRadius,displayLabels:r,total:x,color:l.colors.text.primary},e.index)}))]})})]})}),b?(0,$e.jsx)(p,{top:u.tooltipTop,className:c.tooltipPortal,left:u.tooltipLeft,unstyled:!0,applyPositionStyle:!0,children:(0,$e.jsx)(To.c,{series:u.tooltipData})},Math.random()):null]})};function Eo(e){let{arc:t,pie:n,highlightState:s,openMenu:a,fill:i,tooltip:r,tooltipOptions:o}=e;const l=(0,je.l4)(),d=(0,je.wW)(qo),{eventBus:c}=(0,Rn.R9)(),u=(0,E.useCallback)((e=>{null==c||c.publish({type:Bt.xH.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}}),r.hideTooltip()}),[c,t,r]),h=(0,E.useCallback)((e=>{null==c||c.publish({type:Bt.es.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}});const s=(0,yo.Z)(e.target.ownerSVGElement,e);r.showTooltip({tooltipLeft:s.x,tooltipTop:s.y,tooltipData:zo(n,t,o)})}),[c,t,r,n,o]),p=Ho(s,d);return(0,$e.jsx)("g",{className:p,onMouseMove:"none"!==o.mode?h:void 0,onMouseOut:u,onClick:a,"aria-label":Ve.wl.components.Panels.Visualization.PieChart.svgSlice,children:(0,$e.jsx)("path",{d:n.path(Object.assign({},t)),fill:i,stroke:l.colors.background.primary,strokeWidth:1})},t.data.display.title)}function Vo(e){var t;let{arc:n,outerRadius:s,innerRadius:a,displayLabels:i,total:r,color:o,highlightState:l}=e;const d=(0,je.wW)(qo),c=0===a?s/6:a,[u,h]=function(e,t,n){const s=(t+n)/2,a=(+e.startAngle+ +e.endAngle)/2-Math.PI/2;return[Math.cos(a)*s,Math.sin(a)*s]}(n,s,c);if(!(n.endAngle-n.startAngle>=.3))return null;let p=i.includes(Do.Name)?Math.min(Math.max(s/150*14,12),30):Math.min(Math.max(s/100*14,12),36);return(0,$e.jsx)("g",{className:Ho(l,d),children:(0,$e.jsxs)("text",{fill:o,x:u,y:h,dy:".33em",fontSize:p,fontWeight:500,textAnchor:"middle",pointerEvents:"none",children:[i.includes(Do.Name)&&(0,$e.jsx)("tspan",{x:u,dy:"1.2em",children:n.data.display.title}),i.includes(Do.Value)&&(0,$e.jsx)("tspan",{x:u,dy:"1.2em",children:(0,Zn.zc)(n.data.display)}),i.includes(Do.Percent)&&(0,$e.jsx)("tspan",{x:u,dy:"1.2em",children:(n.data.display.numeric/r*100).toFixed(null!==(t=n.data.field.decimals)&&void 0!==t?t:0)+"%"})]})})}function zo(e,t,n){var s;return"multi"===n.mode?e.arcs.filter((e=>{var t,n,s,a;const i=e.data.field;return i&&!(null!==(t=i.custom)&&void 0!==t&&null!==(n=t.hideFrom)&&void 0!==n&&n.tooltip)&&!(null!==(s=i.custom)&&void 0!==s&&null!==(a=s.hideFrom)&&void 0!==a&&a.viz)})).map((e=>{var n;return{color:null!==(n=e.data.display.color)&&void 0!==n?n:fn.R,label:e.data.display.title,value:(0,Zn.zc)(e.data.display),isActive:e.index===t.index}})):[{color:null!==(s=t.data.display.color)&&void 0!==s?s:fn.R,label:t.data.display.title,value:(0,Zn.zc)(t.data.display)}]}function Bo(e,t){return Oo()(e).darken(20*(t.isDark?1:-.7)).spin(4).toRgbString()}function _o(e,t){return Oo()(e).darken(10*(t.isDark?1:-.7)).spin(-4).toRgbString()}var Wo;function Uo(e,t){return e?e===t.data.display.title?Wo.Highlighted:Wo.Deemphasized:Wo.Normal}function Ho(e,t){switch(e){case Wo.Highlighted:return t.svgArg.highlighted;case Wo.Deemphasized:return t.svgArg.deemphasized;case Wo.Normal:default:return t.svgArg.normal}}!function(e){e[e.Highlighted=0]="Highlighted",e[e.Deemphasized=1]="Deemphasized",e[e.Normal=2]="Normal"}(Wo||(Wo={}));const qo=e=>({container:O.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:O.css`
        transition: all 200ms ease-in-out;
      `,highlighted:O.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:O.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:O.css`
      ${(0,sa.getTooltipContainerStyles)(e)}
    `}),Zo={displayMode:wn.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Ao.Percent]};function Go(e,t){var n;const s=null!==(n=e.options.legend)&&void 0!==n?n:Zo;if(!1===s.showLegend)return;const a=t.filter(Mo).reduce(Lo,0),i=t.sort(((e,t)=>isNaN(e.display.numeric)?1:isNaN(t.display.numeric)?-1:t.display.numeric-e.display.numeric)).map(((t,n)=>{var i,r,o,l;const d=null!==(i=null===(r=t.field.custom)||void 0===r?void 0:r.hideFrom)&&void 0!==i?i:{};if(d.legend)return;const c=Boolean(d.viz),u=t.display;return{label:null!==(o=u.title)&&void 0!==o?o:"",color:null!==(l=u.color)&&void 0!==l?l:fn.R,yAxis:1,disabled:c,getItemKey:()=>{var e;return(null!==(e=u.title)&&void 0!==e?e:"")+n},getDisplayValues:()=>{var n;const i=null!==(n=s.values)&&void 0!==n?n:[];let r=[];if(i.includes(Ao.Value)&&r.push({numeric:u.numeric,text:(0,Zn.zc)(u),title:"Value"}),i.includes(Ao.Percent)){var o,l;const n=c?0:u.numeric/a,s=100*n;r.push({numeric:n,percent:s,text:c||isNaN(n)?null!==(o=e.fieldConfig.defaults.noValue)&&void 0!==o?o:"-":s.toFixed(null!==(l=t.field.decimals)&&void 0!==l?l:0)+"%",title:i.length>1?"Percent":""})}return r}}})).filter((e=>!!e));return(0,$e.jsx)(Mn.l,{items:i,seriesVisibilityChangeBehavior:xo.Y.Hide,placement:s.placement,displayMode:s.displayMode})}const Qo=new G.c((function(e){const{data:t,timeZone:n,fieldConfig:s,replaceVariables:a,width:i,height:r,options:o,id:l}=e,d=(0,je.l4)(),c=function(){const[e,t]=(0,E.useState)(),{eventBus:n}=(0,Rn.R9)();return(0,E.useEffect)((()=>{const e=e=>{t(e.payload.dataId)},s=e=>{t(void 0)},a=new Et.w0;return a.add(n.getStream(Bt.es).subscribe({next:e})),a.add(n.getStream(Bt.xH).subscribe({next:s})),()=>{a.unsubscribe()}}),[t,n]),e}(),u=(0,bo.nG)({fieldConfig:s,reduceOptions:o.reduceOptions,data:t.series,theme:d,replaceVariables:a,timeZone:n});return function(e){return e.some((e=>{var t;return null===(t=e.view)||void 0===t?void 0:t.dataFrame.length}))}(u)?(0,$e.jsx)(An.AY,{width:i,height:r,legend:Go(e,u),children:(e,t)=>(0,$e.jsx)(Fo,{width:e,height:t,highlightedTitle:c,fieldDisplayValues:u,tooltipOptions:o.tooltip,pieType:o.pieType,displayLabels:o.displayLabels})}):(0,$e.jsx)($n.Z,{panelId:l,fieldConfig:s,data:t})})).setPanelChangeHandler(((e,t,n)=>{if("grafana-piechart-panel"===t&&n.angular){const t=n.angular,s=[];let a=e.options;if(t.aliasColors)for(const e of Object.keys(t.aliasColors)){const n=t.aliasColors[e];n&&s.push({matcher:{id:$r.mi.byName,options:e},properties:[{id:mn.qb.Color,value:{mode:fn.S.Fixed,fixedColor:n}}]})}if(e.fieldConfig={overrides:s,defaults:{unit:t.format,decimals:t.decimals?t.decimals:0}},a.legend={placement:"right",values:[],displayMode:wn.jK.Table,showLegend:!0,calcs:[]},t.valueName)switch(a.reduceOptions={calcs:[]},t.valueName){case"current":a.reduceOptions.calcs=["lastNotNull"];break;case"min":a.reduceOptions.calcs=["min"];break;case"max":a.reduceOptions.calcs=["max"];break;case"avg":a.reduceOptions.calcs=["mean"];break;case"total":a.reduceOptions.calcs=["sum"]}switch(t.legendType){case"Under graph":a.legend.placement="bottom";break;case"Right side":a.legend.placement="right"}switch(t.pieType){case"pie":a.pieType=Po.Pie;break;case"donut":a.pieType=Po.Donut}return t.legend&&(t.legend.show||(a.legend.showLegend=!1),t.legend.values&&a.legend.values.push(Ao.Value),t.legend.percentage&&a.legend.values.push(Ao.Percent),t.legend.percentage||t.legend.values||(a.legend.showLegend=!1)),"On graph"===t.legendType&&(a.legend.showLegend=!1,a.displayLabels=[Do.Name],t.legend.values&&a.displayLabels.push(Do.Value),t.legend.percentage&&a.displayLabels.push(Do.Percent)),a}return{}})).useFieldConfig({disableStandardOptions:[mn.qb.Thresholds],standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:fn.S.PaletteClassic}}},useCustomConfig:e=>{Cn.B(e)}}).setPanelOptions((e=>{(0,Ss.j)(e),e.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Po.Pie,label:"Pie"},{value:Po.Donut,label:"Donut"}]},defaultValue:Po.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Do.Percent,label:"Percent"},{value:Do.Name,label:"Name"},{value:Do.Value,label:"Value"}]}}),kn.L(e),Nn.J(e,!1),e.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Ao.Percent,label:"Percent"},{value:Ao.Value,label:"Value"}]},showIf:e=>!1!==e.legend.showLegend})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:ys.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Do.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:e=>{e.options.legend.showLegend=!1}}}),{dataSummary:n}=e;if(n.hasNumberField){if(n.hasStringField&&1===n.frameCount){if(n.rowCountTotal>30||n.rowCountTotal<2)return;return t.append({name:ys.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),void t.append({name:ys.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Po.Donut}})}n.numberFieldCount>30||n.numberFieldCount<2||(t.append({name:ys.y.PieChart}),t.append({name:ys.y.PieChartDonut,options:{pieType:Po.Donut}}))}}});var Ko,Jo,Yo,Xo=n(21126),el=n(81943);const tl=e=>{var t;let{data:n,alignedData:s,seriesIdx:a,datapointIdx:i,timeZone:r,onAnnotationAdd:o}=e;const l=(0,je.l4)();if(!n||null==i)return null;const d=s.fields[a],c=[],u=new Set;if(d.getLinks){const e=d.values.get(i),t=d.display?d.display(e):{text:`${e}`,numeric:+e};d.getLinks({calculatedValue:t,valueRowIndex:i}).forEach((e=>{const t=`${e.title}/${e.href}`;u.has(t)||(c.push(e),u.add(t))}))}const h=s.fields[0],p=h.display||(0,Jn.U)({field:h,timeZone:r,theme:l}),g=null===(t=d.state)||void 0===t?void 0:t.origin,m=(d.display||(0,Jn.U)({field:d,timeZone:r,theme:l}))(d.values.get(i)),f=g?(0,bn.C)(n[g.frameIndex].fields[g.fieldIndex],n[g.frameIndex],n):null,v=(0,Hn.iK)(d,i);let b;v&&(b=h.values.get(v));const x=h.values.get(i);let y=null,w=null;if(b){const e=b&&(0,Hn.Y)(b-x);w=(0,$e.jsxs)($e.Fragment,{children:[Ko||(Ko=(0,$e.jsx)("br",{})),Jo||(Jo=(0,$e.jsx)("strong",{children:"Duration:"}))," ",e]}),y=(0,$e.jsxs)($e.Fragment,{children:[" to"," ",(0,$e.jsx)("strong",{children:p(h.values.get(v)).text})]})}return(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{style:{fontSize:l.typography.bodySmall.fontSize},children:[f,Yo||(Yo=(0,$e.jsx)("br",{})),(0,$e.jsx)(To.V,{label:m.text,color:m.color||fn.R,isActive:!0}),"From ",(0,$e.jsx)("strong",{children:p(h.values.get(i)).text}),y,w]}),(0,$e.jsxs)("div",{style:{margin:l.spacing(1,-1,-1,-1),borderTop:`1px solid ${l.colors.border.weak}`},children:[o&&(0,$e.jsx)(ba.s,{label:"Add annotation",icon:"comment-alt",onClick:o}),c.length>0&&c.map(((e,t)=>(0,$e.jsx)(ba.s,{icon:"external-link-alt",target:e.target,label:e.title,url:e.href,onClick:e.onClick},t)))]})]})};function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tl.displayName="StateTimelineTooltip";const sl=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class al extends E.Component{constructor(){super(...arguments),nl(this,"panelContext",{}),nl(this,"getValueColor",((e,t,n)=>{const s=this.props.frames[e].fields[t];if(s.display){const e=s.display(n);if(e.color)return e.color}return fn.R})),nl(this,"prepConfig",((e,t,n)=>{this.panelContext=this.context;const{eventBus:s,sync:a}=this.panelContext;return(0,Hn.Nj)(Object.assign({frame:e,getTimeRange:n,eventBus:s,sync:a,allFrames:this.props.frames},this.props,{timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:e.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor}))})),nl(this,"renderLegend",(e=>{const{legend:t,legendItems:n}=this.props;return e&&n&&t&&!1!==t.showLegend?(0,$e.jsx)(An.AY.Legend,{placement:t.placement,children:(0,$e.jsx)(Mn.l,{placement:t.placement,items:n,displayMode:t.displayMode,readonly:!0})}):null}))}render(){return(0,$e.jsx)(Fn.d,Object.assign({},this.props,{fields:{x:e=>e.type===yn.fS.time,y:e=>e.type===yn.fS.number||e.type===yn.fS.boolean||e.type===yn.fS.string},prepConfig:this.prepConfig,propsToDiff:sl,renderLegend:this.renderLegend}))}}nl(al,"contextType",Rn.bb);var il=n(33725);var rl=n(12812);const ol=new G.c((e=>{let{data:t,timeRange:n,timeZone:s,options:a,width:i,height:r,replaceVariables:o,onChangeTimeRange:l}=e;const d=(0,je.l4)(),c=(0,E.useRef)(void 0),u=(0,E.useRef)(!1),[h,p]=(0,E.useState)(void 0),[g,m]=(0,E.useState)(null),[f,v]=(0,E.useState)(null),[b,x]=(0,E.useState)(null),[y,w]=(0,E.useState)(!1),[j,S]=(0,E.useState)(!1),{sync:C,canAddAnnotations:k}=(0,Rn.R9)(),N=()=>{u.current=!1,m(null),S(!1)},O=()=>{u.current=!u.current,S(u.current)},{frames:I,warn:T}=(0,E.useMemo)((()=>{var e;return(0,Hn.AR)(null==t?void 0:t.series,null===(e=a.mergeValues)||void 0===e||e,n,d)}),[t,a.mergeValues,n,d]),$=(0,E.useMemo)((()=>(0,Hn.SA)(I,a.legend,d)),[I,a.legend,d]),R=(0,E.useMemo)((()=>Ua(a.timezone,s)),[a.timezone,s]),P=(0,E.useCallback)(((e,t,n,a)=>{var i,r;const o=null!=I?I:[],l=o.reduce(((e,t)=>e+t.fields.filter((e=>e.type!==yn.fS.time)).length),0);return null===t||null===n?null:(null!==(i=e.meta)&&void 0!==i&&null!==(r=i.transformations)&&void 0!==r&&r.length||e.fields.length-1===l)&&e.fields[t]?(0,$e.jsxs)($e.Fragment,{children:[j&&(0,$e.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(Wn.P,{onClick:N,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,$e.jsx)(tl,{data:o,alignedData:e,seriesIdx:t,datapointIdx:n,timeZone:s,onAnnotationAdd:a})]}):null}),[s,I,j]);if(!I||T)return(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:null!=T?T:"No data found in response"})});if(1===I.length){(0,Tr.MB)(I[0])}const D=Boolean(k&&k());return(0,$e.jsx)(al,Object.assign({theme:d,frames:I,structureRev:t.structureRev,timeRange:n,timeZone:R,width:i,height:r,legendItems:$},a,{mode:il.KN.Changes,children:(e,n)=>(c.current!==e&&(c.current=_n({config:e,onUPlotClick:O,setFocusedSeriesIdx:v,setFocusedPointIdx:x,setCoords:m,setHover:p,isToolTipOpen:u,isActive:y,setIsActive:w,sync:C})),(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Rs.R,{config:e,onZoom:l}),(0,$e.jsx)(Da,{config:e,onChangeTimeRange:l}),t.annotations&&(0,$e.jsx)(ga,{annotations:t.annotations,config:e,timeZone:s}),D?(0,$e.jsx)(Ys,{data:n,timeZone:s,config:e,children:e=>{let{startAnnotating:t}=e;return a.tooltip.mode===wn.f3.None||null===b||!y&&C&&C()===zn.m.Crosshair?null:(0,$e.jsx)(En.h_,{children:h&&g&&f&&(0,$e.jsx)(Vn.S,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:P(n,f,b,(()=>{t({coords:{plotCanvas:g.canvas,viewport:g.viewport}}),N()}))})})}}):(0,$e.jsx)(En.h_,{children:a.tooltip.mode!==wn.f3.None&&h&&g&&(0,$e.jsx)(Vn.S,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:P(n,f,b)})})]}))}))})).setPanelChangeHandler(((e,t,n)=>{var s;let a=null!==(s=e.options)&&void 0!==s?s:{};if("natel-discrete-panel"===t&&n.angular){var i;const t=n.angular,s=null!==(i=e.fieldConfig)&&void 0!==i?i:{defaults:{},overrides:[]};t.units&&(s.defaults.unit=t.units);const r={fillOpacity:100,lineWidth:0};s.defaults.custom=r,a.mergeValues=!0;const o={type:rl.H.ValueToText,options:{}};if(s.defaults.mappings=[o],(0,P.isArray)(t.colorMaps))for(const e of t.colorMaps){const t=e.color;t&&(o.options[e.text]={color:t})}if((0,P.isArray)(t.valueMaps))for(const e of t.valueMaps){const t=e.text,n=e.value;if(t&&n){let e=o.options[n];e?e.text=t:o.options[n]={text:t}}}if((0,P.isArray)(t.rangeMaps))for(const e of t.rangeMaps){let t=+e.from,n=+e.to;const a=e.text;a&&s.defaults.mappings.push({type:rl.H.RangeToText,options:{from:t,to:n,result:{text:a}}})}e.fieldConfig=s}return a})).useFieldConfig({standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:fn.S.ContinuousGrYlRd}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:il.Uv.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:il.Uv.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:el.c,override:el.c,shouldApply:e=>e.type!==yn.fS.time,process:vn.kG})}}).setPanelOptions((e=>{e.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:il.mP.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:wn.Jp.Auto,label:"Auto"},{value:wn.Jp.Always,label:"Always"},{value:wn.Jp.Never,label:"Never"}]},defaultValue:il.mP.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:il.mP.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:il.mP.rowHeight}),Nn.J(e,!1),kn.L(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ys.y.StateTimeline})}}).setDataSupport({annotations:!0});var ll;const dl=e=>{var t;let{data:n,alignedData:s,seriesIdx:a,datapointIdx:i,timeZone:r}=e;const o=(0,je.l4)();if(!n||null==i)return null;const l=s.fields[a],d=[],c=new Set;if(l.getLinks){const e=l.values.get(i),t=l.display?l.display(e):{text:`${e}`,numeric:+e};l.getLinks({calculatedValue:t,valueRowIndex:i}).forEach((e=>{const t=`${e.title}/${e.href}`;c.has(t)||(d.push(e),c.add(t))}))}const u=s.fields[0],h=u.display||(0,Jn.U)({field:u,timeZone:r,theme:o}),p=null===(t=l.state)||void 0===t?void 0:t.origin,g=(l.display||(0,Jn.U)({field:l,timeZone:r,theme:o}))(l.values.get(i)),m=p?(0,bn.C)(n[p.frameIndex].fields[p.fieldIndex],n[p.frameIndex],n):null;return(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{style:{fontSize:o.typography.bodySmall.fontSize},children:[(0,$e.jsx)("strong",{children:h(u.values.get(i)).text}),ll||(ll=(0,$e.jsx)("br",{})),(0,$e.jsx)(To.V,{label:g.text,color:g.color||fn.R,isActive:!0}),m]}),d.length>0&&(0,$e.jsx)("div",{style:{margin:o.spacing(1,-1,-1,-1),borderTop:`1px solid ${o.colors.border.weak}`},children:d.map(((e,t)=>(0,$e.jsx)(ba.s,{icon:"external-link-alt",target:e.target,label:e.title,url:e.href,onClick:e.onClick},t)))})]})};var cl,ul;dl.displayName="StatusHistoryTooltip";const hl=1,pl=70,gl=new G.c((e=>{let{data:t,timeRange:n,timeZone:s,options:a,width:i,height:r,onChangeTimeRange:o}=e;const l=(0,je.l4)(),d=(0,E.useRef)(void 0),c=(0,E.useRef)(!1),[u,h]=(0,E.useState)(void 0),[p,g]=(0,E.useState)(null),[m,f]=(0,E.useState)(null),[v,b]=(0,E.useState)(null),[x,y]=(0,E.useState)(!1),[w,j]=(0,E.useState)(!1),{sync:S}=(0,Rn.R9)(),C=()=>{c.current=!1,g(null),j(!1)},k=()=>{c.current=!c.current,j(c.current)},{frames:N,warn:O}=(0,E.useMemo)((()=>(0,Hn.AR)(null==t?void 0:t.series,!1,n,l)),[t,n,l]),I=(0,E.useMemo)((()=>(0,Hn.SA)(N,a.legend,l)),[N,a.legend,l]),T=(0,E.useCallback)(((e,t,n)=>{var a,i;const r=null!=N?N:[],o=r.reduce(((e,t)=>e+t.fields.filter((e=>e.type!==yn.fS.time)).length),0);return null===t||null===n?null:(null!==(a=e.meta)&&void 0!==a&&null!==(i=a.transformations)&&void 0!==i&&i.length||e.fields.length-1===o)&&e.fields[t]?(0,$e.jsxs)($e.Fragment,{children:[w&&(0,$e.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(Wn.P,{onClick:C,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,$e.jsx)(dl,{data:r,alignedData:e,seriesIdx:t,datapointIdx:n,timeZone:s})]}):null}),[s,N,w]),$=e=>a.tooltip.mode===wn.f3.None||null===v||!x&&S&&S()===zn.m.Crosshair?null:(0,$e.jsx)(En.h_,{children:u&&p&&m&&(0,$e.jsx)(Vn.S,{position:{x:p.viewport.x,y:p.viewport.y},offset:{x:10,y:10},allowPointerEvents:c.current,children:T(e,m,v)})}),R=(0,E.useMemo)((()=>Ua(a.timezone,s)),[a.timezone,s]);return!N||O?(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:null!=O?O:"No data found in response"})}):N[0].length>i/2?(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsxs)("p",{children:["Too many points to visualize properly. ",cl||(cl=(0,$e.jsx)("br",{})),"Update the query to return fewer points. ",ul||(ul=(0,$e.jsx)("br",{})),"(",N[0].length," points received)"]})}):(0,$e.jsx)(al,Object.assign({theme:l,frames:N,structureRev:t.structureRev,timeRange:n,timeZone:R,width:i,height:r,legendItems:I},a,{mode:il.KN.Samples,children:(e,t)=>(d.current!==e&&(d.current=_n({config:e,onUPlotClick:k,setFocusedSeriesIdx:f,setFocusedPointIdx:b,setCoords:g,setHover:h,isToolTipOpen:c,isActive:x,setIsActive:y})),(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Rs.R,{config:e,onZoom:o}),$(t),(0,$e.jsx)(Da,{config:e,onChangeTimeRange:o})]}))}))})).useFieldConfig({standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:fn.S.Thresholds}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:hl,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:pl,settings:{min:0,max:100,step:1}})}}).setPanelOptions((e=>{e.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:wn.Jp.Auto,label:"Auto"},{value:wn.Jp.Always,label:"Always"},{value:wn.Jp.Never,label:"Never"}]},defaultValue:wn.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Nn.J(e,!1),kn.L(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if(t.rowCountMax>100)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:fn.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.colWidth=.7}}}).append({name:ys.y.StatusHistory})}});var ml=n(68959),fl=n(70800);function vl(e){let{onChange:t,value:n,context:s}=e;return(0,$e.jsx)(fl.r,{value:Boolean(n),onChange:e=>{null!=e&&e.currentTarget.checked&&(s.options.footer.show=!1),t(null==e?void 0:e.currentTarget.checked)}})}var bl=n(87602);const xl={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},yl={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},wl={cell:"color-background",row:"color-background",value:"color-text"},jl=(e,t)=>[-1/0,...e].map(((e,n)=>({color:t[n],value:(0,P.isNumber)(e)?e:parseInt(e,10)}))),Sl=e=>{var t;const n={matcher:{id:/^\/.*\/$/.test(e.pattern)?$r.mi.byRegexp:$r.mi.byName,options:e.pattern},properties:[]};return e.alias&&n.properties.push({id:"displayName",value:e.alias}),e.unit&&n.properties.push({id:"unit",value:e.unit}),e.decimals&&n.properties.push({id:"decimals",value:e.decimals}),"date"===e.type&&n.properties.push({id:"unit",value:`time: ${e.dateFormat}`}),e.link&&n.properties.push({id:"links",value:[{title:(0,P.defaultTo)(e.linkTooltip,""),url:(0,P.defaultTo)(e.linkUrl,""),targetBlank:(0,P.defaultTo)(e.linkTargetBlank,!1)}]}),e.colorMode&&n.properties.push({id:"custom.displayMode",value:wl[e.colorMode]}),e.align&&n.properties.push({id:"custom.align",value:"auto"===e.align?null:e.align}),null!==(t=e.thresholds)&&void 0!==t&&t.length&&n.properties.push({id:"thresholds",value:{mode:bl.H.Absolute,steps:jl(e.thresholds,e.colors)}}),n},Cl=(Object.freeze([1,0]),!0),kl={show:!1,reducer:[]},Nl={displayMode:wn.h2.Auto,align:"auto",inspect:!1};const Ol="Table footer",Il=new G.c(Lr).setPanelChangeHandler(((e,t,n)=>{if("table-old"===t&&n.angular){const t=n.angular,s=((e,t)=>{var n;const s=null!==(n=e.transformations)&&void 0!==n?n:[];if(Object.keys(xl).includes(t.transform)){const e={reducers:[]};"timeseries_aggregations"===t.transform&&(e.includeTimeField=!1,e.reducers=t.columns.map((e=>yl[e.value]))),s.push({id:xl[t.transform],options:e})}return s})(e,t),a=(e=>{let t={custom:{}};if(e&&(t=(0,P.omitBy)({unit:e.unit,decimals:e.decimals,displayName:e.alias,custom:{align:"auto"===e.align?null:e.align,displayMode:wl[e.colorMode]}},P.isNil),e.thresholds.length)){const n={mode:bl.H.Absolute,steps:jl(e.thresholds,e.colors)};t.thresholds=n}return t})(t.styles.find((e=>"/.*/"===e.pattern))),i=t.styles.filter((e=>"/.*/"!==e.pattern)).map(Sl);e.transformations=s,e.fieldConfig={defaults:a,overrides:i}}return{}})).setMigrationHandler((e=>(!e.pluginVersion&&e.columns&&console.log("Was angular table",e),e.options))).setNoPadding().useFieldConfig({useCustomConfig:e=>{e.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Nl.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Nl.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Nl.align}).addSelect({path:"displayMode",name:"Cell display mode",description:"Color text, background, show as gauge, etc",settings:{options:[{value:wn.h2.Auto,label:"Auto"},{value:wn.h2.ColorText,label:"Color text"},{value:wn.h2.ColorBackground,label:"Color background (gradient)"},{value:wn.h2.ColorBackgroundSolid,label:"Color background (solid)"},{value:wn.h2.GradientGauge,label:"Gradient gauge"},{value:wn.h2.LcdGauge,label:"LCD gauge"},{value:wn.h2.BasicGauge,label:"Basic gauge"},{value:wn.h2.JSONView,label:"JSON View"},{value:wn.h2.Image,label:"Image"}]},defaultValue:Nl.displayMode}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,showIf:e=>e.displayMode===wn.h2.Auto||e.displayMode===wn.h2.JSONView||e.displayMode===wn.h2.ColorText||e.displayMode===wn.h2.ColorBackground||e.displayMode===wn.h2.ColorBackgroundSolid}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Nl.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions((e=>{var t;e.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Cl}).addBooleanSwitch({path:"footer.show",category:[Ol],name:"Show table footer",defaultValue:null===(t=kl)||void 0===t?void 0:t.show}).addCustomEditor({id:"footer.reducer",category:[Ol],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:ml.S.get("stats-picker").editor,defaultValue:[Yn.gz.sum],showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}}).addMultiSelect({path:"footer.fields",category:[Ol],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async e=>{const t=[];if(e&&e.data&&e.data.length>0){const n=e.data[0];for(const s of n.fields)if(s.type===yn.fS.number){const a=(0,bn.C)(s,n,e.data),i=s.name;t.push({value:i,label:a})}}return t}},defaultValue:"",showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:vl})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:ys.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.fieldConfig.defaults.custom.minWidth=50}}});0===e.dataSummary.fieldCount?t.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):t.append({})}});var Tl=n(54391),$l=n(42870);Object.freeze([0,0]);let Rl,Pl;!function(e){e.Code="code",e.HTML="html",e.Markdown="markdown"}(Rl||(Rl={})),function(e){e.Go="go",e.Html="html",e.Json="json",e.Markdown="markdown",e.Plaintext="plaintext",e.Sql="sql",e.Typescript="typescript",e.Xml="xml",e.Yaml="yaml"}(Pl||(Pl={}));Pl.Plaintext;const Dl={language:Pl.Plaintext,showLineNumbers:!1,showMiniMap:!1},Al={content:"# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",mode:Rl.Markdown};function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ll extends E.PureComponent{constructor(e){super(e),Ml(this,"updateHTML",(0,P.debounce)((()=>{const e=this.processContent(this.props.options);e!==this.state.html&&this.setState({html:e})}),150)),this.state={html:this.processContent(e.options)}}componentDidUpdate(e){this.updateHTML()}prepareHTML(e){const t=this.interpolateString(e);return se.ZP.disableSanitizeHtml?t:this.sanitizeString(t)}prepareMarkdown(e){let t=this.interpolateString(e);return se.ZP.disableSanitizeHtml?(t=(0,$l.x)(t,{noSanitize:!0}),t):(t=(0,$l.x)(t),this.sanitizeString(t))}interpolateString(e){var t;const{replaceVariables:n,options:s}=this.props;return n(e,{},"json"===(null===(t=s.code)||void 0===t?void 0:t.language)?"json":"html")}sanitizeString(e){return aa.QX.sanitizeTextPanelContent(e)}processContent(e){const{mode:t,content:n}=e;return n?t===Rl.HTML?this.prepareHTML(n):t===Rl.Code?this.interpolateString(n):this.prepareMarkdown(n):""}render(){const{html:e}=this.state,{options:t}=this.props,n=Fl(this.context);if(t.mode===Rl.Code){var s,a;const{width:i,height:r}=this.props,o=null!==(s=t.code)&&void 0!==s?s:Dl;return(0,$e.jsx)(Ir.p,{value:e,language:null!==(a=o.language)&&void 0!==a?a:Dl.language,width:i,height:r,containerStyles:n.codeEditorContainer,showMiniMap:o.showMiniMap,showLineNumbers:o.showLineNumbers,readOnly:!0},`${o.showLineNumbers}/${o.showMiniMap}`)}return(0,$e.jsx)(ge.$,{autoHeightMin:"100%",children:(0,$e.jsx)(Tl.Z,{html:e,className:n.markdown,"data-testid":"TextPanel-converted-content"})})}}Ml(Ll,"contextType",je.Ni);const Fl=(0,Ut.B)((e=>({codeEditorContainer:O.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${e.colors.background.primary};
    }
  `,markdown:(0,O.cx)("markdown-html",O.css`
      height: 100%;
    `)})));var El=n(89050),Vl=n(85896);const zl=e=>{let{value:t,onChange:n,context:s}=e;const a=(0,E.useMemo)((()=>{var e,t;return null!==(e=null===(t=s.options)||void 0===t?void 0:t.mode)&&void 0!==e?e:Rl.Markdown}),[s]),i=(0,je.wW)(Bl),r=()=>s.getSuggestions?s.getSuggestions().map((e=>(0,Vl.T)(e))):[];return(0,$e.jsx)("div",{className:(0,O.cx)(i.editorBox),children:(0,$e.jsx)(El.Z,{disableHeight:!0,children:e=>{let{width:s}=e;return 0===s?null:(0,$e.jsx)(Ir.p,{value:t,onBlur:n,onSave:n,language:a,width:s,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:r})}})})},Bl=e=>({editorBox:O.css`
    label: editorBox;
    border: 1px solid ${e.colors.border.medium};
    border-radius: ${e.shape.borderRadius(1)};
    margin: ${e.spacing(.5)} 0;
    width: 100%;
  `}),_l=new G.c(Ll).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",description:"text mode of the panel",settings:{options:[{value:Rl.Markdown,label:"Markdown"},{value:Rl.HTML,label:"HTML"},{value:Rl.Code,label:"Code"}]},defaultValue:Al.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Pl).map((e=>({value:e,label:e})))},defaultValue:Dl.language,showIf:e=>e.mode===Rl.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Dl.showLineNumbers,showIf:e=>e.mode===Rl.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Dl.showMiniMap,showIf:e=>e.mode===Rl.Code}).addCustomEditor({id:"content",path:"content",name:"Content",description:"Content of the panel",editor:zl,defaultValue:Al.content})})).setMigrationHandler((e=>{const t=parseFloat(e.pluginVersion||"6.1");let n=e.options;if(e.hasOwnProperty("content")&&e.hasOwnProperty("mode")){const s=e,a=s.content,i=s.mode;delete s.content,delete s.mode,t<7.1&&(n={content:a,mode:i})}return[Rl.Code,Rl.HTML,Rl.Markdown].find((e=>e===n.mode))||(n=Object.assign({},n,{mode:Rl.Markdown})),n}));var Wl=n(80046);var Ul=n(25214),Hl=n(82261);const ql=e=>{var t;let{value:n,onChange:s}=e;const a=(0,je.wW)(Zl);(!n||n.length<1)&&(n=[""]);const i=()=>{s([...n,Ul.RQ.default])};return(0,$e.jsx)("div",{children:n.map(((e,r)=>(0,$e.jsxs)("div",{className:a.wrapper,children:[(0,$e.jsx)("span",{className:a.first,children:(0,$e.jsx)(Hl.O,{onChange:e=>((e,t)=>{const a=n.slice();a[e]=null!=t?t:Ul.RQ.default,0===a.length||1===a.length&&""===a[0]?s(void 0):s(a)})(r,e),includeInternal:!0,value:null!=e?e:Ul.RQ.default})}),r===n.length-1?t||(t=(0,$e.jsx)(ia.h,{ariaLabel:"Add timezone",name:"plus",onClick:i})):(0,$e.jsx)(ia.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>(e=>{const t=n.slice();t.splice(e,1),s(t)})(r)})]},`${r}.${e}`)))})},Zl=e=>({wrapper:O.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:O.css`
    margin-right: 8px;
    flex-grow: 2;
  `});function Gl(e){return"critical"===e.colorMode?"red":"warning"===e.colorMode?"orange":"custom"===e.colorMode?e.fillColor||e.lineColor:"red"}function Ql(e){if(!e)return{};const t={axisPlacement:e.show?wn.LB.Auto:wn.LB.Hidden};if(e.label&&(t.axisLabel=e.label),e.logBase){const n=e.logBase;2!==n&&10!==n||(t.scaleDistribution={type:wn.wf.Log,log:n})}return(0,P.omitBy)({unit:e.format,decimals:Jl(e.decimals),min:Jl(e.min),max:Jl(e.max),custom:t},P.isNil)}function Kl(e,t,n){var s,a;for(const s of Object.keys(t)){const a=t[s];"custom"!==s&&a!==e[s]&&n.push({id:s,value:a})}const i=null!==(s=e.custom)&&void 0!==s?s:{},r=null!==(a=t.custom)&&void 0!==a?a:{};for(const e of Object.keys(r)){const t=r[e];t!==i[e]&&n.push({id:`custom.${e}`,value:t})}}function Jl(e){if((0,P.isNumber)(e))return e;if((0,P.isString)(e)){const t=Number(e);if(!isNaN(t))return t}}const Yl=new G.c((e=>{let{data:t,timeRange:n,timeZone:s,width:a,height:i,options:r,fieldConfig:o,onChangeTimeRange:l,replaceVariables:d,id:c}=e;const{sync:u,canAddAnnotations:h,onThresholdsChange:p,canEditThresholds:g,onSplitOpen:m}=(0,Rn.R9)(),f=(e,t)=>(0,Ps.a)({field:e,rowIndex:t,splitOpenFn:m,range:n}),v=(0,E.useMemo)((()=>Wa(t.series,se.vc.theme2,n)),[t,n]),b=(0,E.useMemo)((()=>Ua(r.timezone,s)),[r.timezone,s]);if(!v)return(0,$e.jsx)($n.Z,{panelId:c,fieldConfig:o,data:t,needsTimeField:!0,needsNumberField:!0});const x=Boolean(h&&h());return(0,$e.jsx)($s.p,{frames:v,structureRev:t.structureRev,timeRange:n,timeZone:b,width:a,height:i,legend:r.legend,options:r,children:(e,n)=>(n.fields.filter((e=>void 0!==e.config.links&&e.config.links.length>0)).length>0&&(n=function(e,t,n,s){return e.fields.forEach((a=>{var i,r,o,l;if(void 0===(null===(i=a.state)||void 0===i||null===(r=i.origin)||void 0===r?void 0:r.frameIndex)||void 0===t[null===(o=a.state)||void 0===o||null===(l=o.origin)||void 0===l?void 0:l.frameIndex])return;const d=[];for(const e of t[null===(c=a.state)||void 0===c||null===(u=c.origin)||void 0===u?void 0:u.frameIndex].fields){var c,u;if(e.type===yn.fS.string)if(a.values instanceof za.o){const t=Object.assign({},e);t.values=new za.o(e.values,a.values.getOrderArray()),d.push(t)}else d.push(e)}const h={fields:[...e.fields,...d],length:e.fields.length+d.length};a.getLinks=(0,Ts.oB)(h,a,a.state.scopedVars,n,s)})),e}(n,v,d,s)),(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Wl.C,{config:e}),(0,$e.jsx)(Rs.R,{config:e,onZoom:l}),r.tooltip.mode===wn.f3.None||(0,$e.jsx)(Bn.i,{frames:v,data:n,config:e,mode:r.tooltip.mode,sortOrder:r.tooltip.sort,sync:u,timeZone:s}),t.annotations&&(0,$e.jsx)(ga,{annotations:t.annotations,config:e,timeZone:s}),x?(0,$e.jsx)(Ys,{data:n,timeZone:s,config:e,children:t=>{let{startAnnotating:a}=t;return(0,$e.jsx)(Sa,{data:n,config:e,timeZone:s,replaceVariables:d,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&a({coords:t.coords})}}]}]})}}):(0,$e.jsx)(Sa,{data:n,frames:v,config:e,timeZone:s,replaceVariables:d,defaultItems:[]}),t.annotations&&(0,$e.jsx)(Ia,{visibleSeries:Ta(e,v),config:e,exemplars:t.annotations,timeZone:s,getFieldLinks:f}),g&&p&&(0,$e.jsx)(Va,{config:e,fieldConfig:o,onThresholdsChange:p}),(0,$e.jsx)(Da,{config:e,onChangeTimeRange:l})]}))})})).setPanelChangeHandler(((e,t,n,s)=>{if("graph"===t&&n.angular){const{fieldConfig:t,options:a}=function(e){var t,n,s,a,i,r,o,l;const d=null!==(t=null===(n=e.fieldConfig)||void 0===n?void 0:n.overrides)&&void 0!==t?t:[],c=null!==(s=e.yaxes)&&void 0!==s?s:[];let u=Ql(c[0]);var h;null!==(a=e.fieldConfig)&&void 0!==a&&a.defaults&&(u=Object.assign({},null===(h=e.fieldConfig)||void 0===h?void 0:h.defaults,u));const p={fill:e.dashes?"dash":"solid",dash:[null!==(i=e.dashLength)&&void 0!==i?i:10,null!==(r=e.spaceLength)&&void 0!==r?r:10]};if(e.aliasColors)for(const t of Object.keys(e.aliasColors)){const n=e.aliasColors[t];n&&d.push({matcher:{id:$r.mi.byName,options:t},properties:[{id:mn.qb.Color,value:{mode:fn.S.Fixed,fixedColor:n}}]})}let g=!1;if(null!==(o=e.seriesOverrides)&&void 0!==o&&o.length)for(const t of e.seriesOverrides){if(!t.alias)continue;const e={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(t.alias)?$r.mi.byRegexp:$r.mi.byName,options:t.alias},properties:[]};let n;for(const s of Object.keys(t)){const a=t[s];switch(s){case"alias":case"$$hashKey":break;case"yaxis":if(2===a){Kl(u,Ql(c[1]),e.properties)}break;case"fill":e.properties.push({id:"custom.fillOpacity",value:10*a});break;case"fillBelowTo":g=!0,e.properties.push({id:"custom.fillBelowTo",value:a});break;case"fillGradient":a&&(e.properties.push({id:"custom.fillGradient",value:"opacity"}),e.properties.push({id:"custom.fillOpacity",value:10*a}));break;case"points":e.properties.push({id:"custom.showPoints",value:a?wn.Jp.Always:wn.Jp.Never});break;case"bars":a?(e.properties.push({id:"custom.drawStyle",value:wn.l8.Bars}),e.properties.push({id:"custom.fillOpacity",value:100})):e.properties.push({id:"custom.drawStyle",value:wn.l8.Line});break;case"lines":e.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":e.properties.push({id:"custom.lineWidth",value:a});break;case"pointradius":e.properties.push({id:"custom.pointSize",value:2+2*a});break;case"dashLength":case"spaceLength":case"dashes":switch(n||(n={fill:p.fill,dash:[...p.dash]}),s){case"dashLength":n.dash[0]=a;break;case"spaceLength":n.dash[1]=a;break;case"dashes":n.fill=a?"dash":"solid"}break;case"stack":e.properties.push({id:"custom.stacking",value:{mode:wn.o0.Normal,group:a}});break;case"color":e.properties.push({id:"color",value:{fixedColor:a,mode:fn.S.Fixed}});break;case"transform":e.properties.push({id:"custom.transform",value:"negative-Y"===a?wn.pR.NegativeY:wn.pR.Constant});break;default:console.log("Ignore override migration:",t.alias,s,a)}}n&&e.properties.push({id:"custom.lineStyle",value:n}),e.properties.length&&d.push(e)}const m=null!==(l=u.custom)&&void 0!==l?l:{};m.drawStyle=e.bars?wn.l8.Bars:e.lines?wn.l8.Line:wn.l8.Points,e.points?(m.showPoints=wn.Jp.Always,(0,P.isNumber)(e.pointradius)&&(m.pointSize=2+2*e.pointradius)):m.drawStyle!==wn.l8.Points&&(m.showPoints=wn.Jp.Never);m.lineWidth=e.linewidth,"solid"!==p.fill&&(m.lineStyle=p);g?m.fillOpacity=35:(0,P.isNumber)(e.fill)&&(m.fillOpacity=10*e.fill);(0,P.isNumber)(e.fillGradient)&&e.fillGradient>0&&(m.gradientMode=wn.FI.Opacity,m.fillOpacity=10*e.fillGradient);m.spanNulls=e.nullPointMode===kr.Gl.Ignore,e.steppedLine&&(m.lineInterpolation=wn.KC.StepAfter);m.drawStyle===wn.l8.Bars&&(m.fillOpacity=100);e.stack&&(m.stacking={mode:wn.o0.Normal,group:Is.r.stacking.group});u.custom=(0,P.omitBy)(m,P.isNil),u.nullValueMode=e.nullPointMode;const f={legend:{displayMode:wn.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:wn.f3.Single,sort:wn.As.None}},v=e.legend;if(v){if(v.show?f.legend.displayMode=v.alignAsTable?wn.jK.Table:wn.jK.List:f.legend.showLegend=!1,v.rightSide&&(f.legend.placement="right"),e.legend.values){const t=(0,P.pickBy)(e.legend);f.legend.calcs=function(e){const t=[];for(const n of Object.keys(e)){const e=Yn.TB.getIfExists(n);e&&t.push(e.id)}return t}(t)}e.legend.sideWidth&&(f.legend.width=e.legend.sideWidth)}const b=e.tooltip;if(b&&(void 0!==b.shared&&(f.tooltip.mode=b.shared?wn.f3.Multi:wn.f3.Single),void 0!==b.sort&&b.shared))switch(b.sort){case 1:f.tooltip.sort=wn.As.Ascending;break;case 2:f.tooltip.sort=wn.As.Descending;break;default:f.tooltip.sort=wn.As.None}if(e.thresholds&&e.thresholds.length>0){let t=[],n=!1,s=!1;const a=e.thresholds.sort(((e,t)=>e.value>t.value?1:-1));for(let e=0;e<a.length;e++){const i=a[e],r=a.length>e+1?a[e+1]:null;i.fill&&(n=!0),i.line&&(s=!0),"gt"===i.op&&t.push({value:i.value,color:Gl(i)}),"lt"===i.op&&(0===t.length&&t.push({value:-1/0,color:Gl(i)}),r&&"gt"===r.op&&r.value>i.value?t.push({value:i.value,color:"transparent"}):r&&"lt"===r.op?t.push({value:i.value,color:Gl(r)}):t.push({value:i.value,color:"transparent"}))}t.length>0&&t[0].value!==-1/0&&t.unshift({color:"transparent",value:-1/0});let i=n?wn.i3.Area:wn.i3.Line;s&&n&&(i=wn.i3.LineAndArea),u.custom.thresholdsStyle={mode:i},u.thresholds={mode:bl.H.Absolute,steps:t}}e.xaxis&&!1===e.xaxis.show&&"time"===e.xaxis.mode&&d.push({matcher:{id:$r.mi.byType,options:yn.fS.time},properties:[{id:"custom.axisPlacement",value:wn.LB.Hidden}]});return{fieldConfig:{defaults:(0,P.omitBy)(u,P.isNil),overrides:d},options:f}}(Object.assign({},n.angular,{fieldConfig:s}));return e.fieldConfig=t,e.alert=n.angular.alert,a}return function(e){var t,n,s,a,i;void 0!==(null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults)||void 0===n||null===(s=n.custom)||void 0===s||null===(a=s.hideFrom)||void 0===a?void 0:a.graph)&&(e.fieldConfig.defaults.custom.hideFrom.viz=e.fieldConfig.defaults.custom.hideFrom.graph,delete e.fieldConfig.defaults.custom.hideFrom.graph);null!==(i=e.fieldConfig)&&void 0!==i&&i.overrides&&(e.fieldConfig.overrides=e.fieldConfig.overrides.map((e=>(e.properties=e.properties.map((e=>("custom.hideFrom"===e.id&&e.value.graph&&(e.value.viz=e.value.graph,delete e.value.graph),e))),e))))}(e),{}})).useFieldConfig((0,Is.F)(Is.r)).setPanelOptions((e=>{kn.L(e),Nn.J(e),e.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:ql,defaultValue:void 0})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasTimeField||!t.hasNumberField||t.rowCountTotal<2)return;const n=e.getListAppender({name:ys.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{var t,n,s;(e.options.legend.showLegend=!1,(null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults.custom)||void 0===n?void 0:n.drawStyle)!==wn.l8.Bars)&&(e.fieldConfig.defaults.custom.lineWidth=Math.max(null!==(s=e.fieldConfig.defaults.custom.lineWidth)&&void 0!==s?s:1,2))}}});if(n.append({name:ys.y.LineChart}),t.rowCountMax<200&&n.append({name:ys.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:wn.KC.Smooth}},overrides:[]}}),1===t.numberFieldCount)return n.append({name:ys.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),n.append({name:ys.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:fn.S.ContinuousGrYlRd},custom:{gradientMode:wn.FI.Scheme,lineInterpolation:wn.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),void(t.rowCountMax<100&&(n.append({name:ys.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:wn.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:wn.FI.Hue}},overrides:[]}}),n.append({name:ys.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:fn.S.ContinuousGrYlRd},custom:{drawStyle:wn.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:wn.FI.Scheme}},overrides:[]}})));n.append({name:ys.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:wn.o0.Normal,group:"A"}}},overrides:[]}}),n.append({name:ys.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:wn.o0.Percent,group:"A"}}},overrides:[]}}),t.rowCountTotal/t.numberFieldCount<100&&(n.append({name:ys.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:wn.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:wn.FI.Hue,stacking:{mode:wn.o0.Normal,group:"A"}}},overrides:[]}}),n.append({name:ys.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:wn.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:wn.FI.Hue,stacking:{mode:wn.o0.Percent,group:"A"}}},overrides:[]}}))}}).setDataSupport({annotations:!0,alertStates:!0});var Xl,ed=n(5849),td=n(60456),nd=n(8910),sd=n(6119),ad=n(71266),id=n(2527);const rd={wrapper:O.css`
    height: 100%;
    overflow: scroll;
  `},od=new G.c((e=>{var t,n;let{data:s}=e;const a=(0,E.createRef)(),i=(0,E.useMemo)((()=>(0,id.N)(s.series[0])),[s.series]),{search:r,setSearch:o,spanFindMatches:l}=(0,ad.R)(null==i?void 0:i.spans),[d,c]=(0,E.useState)(""),[u,h]=(0,E.useState)(""),p=(0,Ge.Z)((async()=>{var e,t;return await(0,nd.F)().get(null===(e=s.request)||void 0===e||null===(t=e.targets[0].datasource)||void 0===t?void 0:t.uid)})),g=document.getElementsByClassName(rd.wrapper)[0];return s&&s.series.length&&i?(0,$e.jsxs)("div",{className:rd.wrapper,children:[(0,$e.jsx)("div",{ref:a}),"trace"===(null===(t=s.series[0])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.preferredVisualisationType)?(0,$e.jsx)(ed.Z,{navigable:!0,searchValue:r,setSearch:o,spanFindMatches:l,searchBarSuffix:u,setSearchBarSuffix:h,focusedSpanIdForSearch:d,setFocusedSpanIdForSearch:c}):null,(0,$e.jsx)(sd.m,{dataFrames:s.series,scrollElement:g,traceProp:i,spanFindMatches:l,search:r,focusedSpanIdForSearch:d,queryResponse:s,datasource:p.value,topOfViewRef:a,topOfViewRefType:td.l4.Panel})]}):Xl||(Xl=(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:"No data found in response"})}))})),ld=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],dd=e=>({container:O.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${e.spacing(3)};

      ${e.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${e.breakpoints.down("sm")} {
        padding: 0 ${e.spacing(1)};
      }
    `,title:O.css`
      margin-bottom: 0;

      ${e.breakpoints.down("lg")} {
        margin-bottom: ${e.spacing(1)};
      }

      ${e.breakpoints.down("md")} {
        font-size: ${e.typography.h2.fontSize};
      }
      ${e.breakpoints.down("sm")} {
        font-size: ${e.typography.h3.fontSize};
      }
    `,help:O.css`
      display: flex;
      align-items: baseline;
    `,helpText:O.css`
      margin-right: ${e.spacing(2)};
      margin-bottom: 0;

      ${e.breakpoints.down("md")} {
        font-size: ${e.typography.h4.fontSize};
      }

      ${e.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:O.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:O.css`
      margin-right: ${e.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${e.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),cd=new G.c((()=>{const e=(0,je.wW)(dd);return(0,$e.jsxs)("div",{className:e.container,children:[(0,$e.jsx)("h1",{className:e.title,children:"Welcome to Grafana"}),(0,$e.jsxs)("div",{className:e.help,children:[(0,$e.jsx)("h3",{className:e.helpText,children:"Need help?"}),(0,$e.jsx)("div",{className:e.helpLinks,children:ld.map(((t,n)=>(0,$e.jsx)("a",{className:e.helpLink,href:`${t.href}?utm_source=grafana_gettingstarted`,children:t.label},`${t.label}-${n}`)))})]})]})})).setNoPadding();let ud;function hd(e){return e.type===yn.fS.number}function pd(e){return e?t=>e===t||!(!e.state||e.state!==t.state):()=>!1}function gd(e){if(!e)return()=>!1;const t=pd(e);return e=>!t(e,void 0,void 0)}var md;!function(e){e[e.NoData=0]="NoData",e[e.BadFrameSelection=1]="BadFrameSelection",e[e.XNotFound=2]="XNotFound"}(ud||(ud={}));const fd=e=>{var t;let{value:n,onChange:s,context:a}=e;const i=(0,E.useMemo)((()=>{var e;return null!=a&&null!==(e=a.data)&&void 0!==e&&e.length?a.data.map(((e,t)=>({value:t,label:(0,bn.n)(e,t)}))):[{value:0,label:"First result"}]}),[a.data]),r=(0,E.useMemo)((()=>function(e,t){var n;if(!t||!t.length)return{error:ud.NoData};e||(e={frame:0});let s=t[null!==(n=e.frame)&&void 0!==n?n:0];if(!s)return{error:ud.BadFrameSelection};let a=-1;for(let n=0;n<s.fields.length;n++){const i=s.fields[n];if(e.x&&e.x===(0,bn.C)(i,s,t)){a=n;break}if(hd(i)&&!e.x){a=n;break}}let i=!1;const r=s.fields[a],o=[r];for(const n of s.fields)if(n.type===yn.fS.time&&(i=!0),n!==r&&hd(n)){if(e.exclude){const a=(0,bn.C)(n,s,t);if(e.exclude.includes(a))continue}o.push(n)}return{x:r,fields:{x:pd(r),y:gd(r)},frame:Object.assign({},s,{fields:o}),hasData:s.fields.length>0,hasTime:i}}(n,a.data)),[a.data,n]),o=(0,E.useMemo)((()=>{var e;const t={label:"?",value:void 0},s={numberFields:[t],yFields:[],xAxis:null!=n&&n.x?{label:`${n.x} (Not found)`,value:n.x}:t},i=a.data?a.data[null!==(e=null==n?void 0:n.frame)&&void 0!==e?e:0]:void 0;if(i){const e=r.x?(0,bn.C)(r.x,r.frame,a.data):void 0;for(let r of i.fields)if(hd(r)){const l=(0,bn.C)(r,i,a.data),d={label:l,value:l};var o;if(s.numberFields.push(d),"?"===t.label&&(t.label=`${l} (First)`),null!=n&&n.x&&l===n.x&&(s.xAxis=d),e!==l)s.yFields.push({label:l,value:null==n||null===(o=n.exclude)||void 0===o?void 0:o.includes(l)})}}return s}),[r,a.data,n]),l=(0,je.wW)(vd);return a.data?(0,$e.jsxs)("div",{children:[(0,$e.jsx)(zs.g,{label:"Data",children:(0,$e.jsx)(ze.Ph,{options:i,value:null!==(t=i.find((e=>e.value===(null==n?void 0:n.frame))))&&void 0!==t?t:i[0],onChange:e=>{s(Object.assign({},n,{frame:e.value}))}})}),(0,$e.jsx)(zs.g,{label:"X Field",children:(0,$e.jsx)(ze.Ph,{options:o.numberFields,value:o.xAxis,onChange:e=>{s(Object.assign({},n,{x:e.value}))}})}),(0,$e.jsx)(zs.g,{label:"Y Fields",children:(0,$e.jsx)("div",{children:o.yFields.map((e=>(0,$e.jsxs)("div",{className:l.row,children:[(0,$e.jsx)(ia.h,{name:e.value?"eye-slash":"eye",onClick:()=>{const t=null!=n&&n.exclude?[...n.exclude]:[];let a=t.indexOf(e.label);a<0?t.push(e.label):t.splice(a,1),s(Object.assign({},n,{exclude:t}))}}),e.label]},e.label)))})})]}):md||(md=(0,$e.jsx)("div",{children:"No data..."}))},vd=e=>({sorter:O.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:O.css`
    padding: ${e.spacing(.5,1)};
    border-radius: ${e.shape.borderRadius(1)};
    background: ${e.colors.background.secondary};
    min-height: ${e.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${e.components.input.borderColor};
  `});var bd=n(30418),xd=n(31428);let yd,wd;!function(e){e.Points="points",e.Lines="lines",e.PointsAndLines="points+lines"}(yd||(yd={})),function(e){e.Auto="auto",e.Manual="manual"}(wd||(wd={}));const jd={show:yd.Points,lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:wn.LB.Auto},Sd=e=>{var t,n;let{value:s,onChange:a,context:i}=e;const[r,o]=(0,E.useState)(0),l=(0,je.wW)(Cd),d=(e,t,n)=>{a(s.map(((s,a)=>a===t?Object.assign({},s,{[n]:e}):s)))},c=()=>{a([...s,{pointColor:{},pointSize:jd.pointSize}]),o(s.length)};(0,E.useEffect)((()=>{null!=s&&s.length||c()}),[]);const u=e=>e===r?`${l.row} ${l.sel}`:l.row;return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(Se.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:c,className:l.marginBot,children:"Add series"}),(0,$e.jsx)("div",{className:l.marginBot,children:s.map(((e,t)=>{var n;return(0,$e.jsxs)("div",{className:u(t),onMouseDown:()=>o(t),children:[(0,$e.jsx)(bd.X,{name:null!==(n=e.name)&&void 0!==n?n:`Series ${t+1}`,onChange:e=>d(e,t,"name")}),(0,$e.jsx)(ia.h,{name:"trash-alt",title:"remove",className:(0,O.cx)(l.actionIcon),onClick:()=>(e=>{a(s.filter(((t,n)=>n!==e)))})(t)})]},`series/${t}`)}))}),r>=0&&s[r]&&(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("div",{children:[(0,$e.jsx)(zs.g,{label:"X Field",children:(0,$e.jsx)(go.b,{value:null!==(t=s[r].x)&&void 0!==t?t:"",context:i,onChange:e=>d(e,r,"x"),item:{}})}),(0,$e.jsx)(zs.g,{label:"Y Field",children:(0,$e.jsx)(go.b,{value:null!==(n=s[r].y)&&void 0!==n?n:"",context:i,onChange:e=>d(e,r,"y"),item:{}})}),(0,$e.jsx)(zs.g,{label:"Point color",children:(0,$e.jsx)(xd.Lm,{value:s[r].pointColor,context:i,onChange:e=>d(e,r,"pointColor"),item:{}})}),(0,$e.jsx)(zs.g,{label:"Point size",children:(0,$e.jsx)(xd.cL,{value:s[r].pointSize,context:i,onChange:e=>d(e,r,"pointSize"),item:{settings:{min:1,max:100}}})})]},`series/${r}`)})]})},Cd=e=>({marginBot:O.css`
    margin-bottom: 20px;
  `,row:O.css`
    padding: ${e.spacing(.5,1)};
    border-radius: ${e.shape.borderRadius(1)};
    background: ${e.colors.background.secondary};
    min-height: ${e.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${e.components.input.borderColor};
    &:hover {
      border: 1px solid ${e.components.input.borderHover};
    }
  `,sel:O.css`
    border: 1px solid ${e.colors.primary.border};
    &:hover {
      border: 1px solid ${e.colors.primary.border};
    }
  `,actionIcon:O.css`
    color: ${e.colors.text.secondary};
    &:hover {
      color: ${e.colors.text};
    }
  `});var kd=n(36345);const Nd=e=>{let{allSeries:t,data:n,manualSeriesConfigs:s,seriesMapping:a,rowIndex:i,hoveredPointIndex:r,options:o,range:l}=e;const d=(0,je.wW)(Id),{onSplitOpen:c}=(0,Rn.R9)();if(!t||null==i)return null;const u=t[r],h=u.frame(n),p=u.x(h),g=u.y(h),m=(0,Ps.a)({field:g,splitOpenFn:c,rowIndex:i,range:l});let f=null,v=null;if(a===wd.Manual&&s){var b,x,y,w;const e=null!==(b=null===(x=s[r].pointColor)||void 0===x?void 0:x.field)&&void 0!==b?b:"",t=null!==(y=null===(w=s[r].pointSize)||void 0===w?void 0:w.field)&&void 0!==y?y:"",n=e?h.fields.find((t=>t.name===e)):void 0,a=t?h.fields.find((e=>e.name===t)):void 0;v={colorFacetFieldName:e,sizeFacetFieldName:t,colorFacetValue:null==n?void 0:n.values.get(i),sizeFacetValue:null==a?void 0:a.values.get(i)}}return f={name:(0,bn.C)(g,h),val:g.values.get(i),field:g,color:u.pointColor(h)},(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("table",{className:d.infoWrap,children:[(0,$e.jsx)("tr",{children:(0,$e.jsx)("th",{colSpan:2,style:{backgroundColor:f.color}})}),(0,$e.jsxs)("tbody",{children:[(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("th",{children:p.name}),(0,$e.jsx)("td",{children:Od(h.fields[0],p.values.get(i))})]}),(0,$e.jsxs)("tr",{children:[(0,$e.jsxs)("th",{children:[f.name,":"]}),(0,$e.jsx)("td",{children:Od(f.field,f.val)})]}),null!==v&&v.colorFacetFieldName&&(0,$e.jsxs)("tr",{children:[(0,$e.jsxs)("th",{children:[v.colorFacetFieldName,":"]}),(0,$e.jsx)("td",{children:v.colorFacetValue})]}),null!==v&&v.sizeFacetFieldName&&(0,$e.jsxs)("tr",{children:[(0,$e.jsxs)("th",{children:[v.sizeFacetFieldName,":"]}),(0,$e.jsx)("td",{children:v.sizeFacetValue})]}),m.length>0&&(0,$e.jsx)("tr",{children:(0,$e.jsx)("td",{colSpan:2,children:(0,$e.jsx)(ms.wc,{children:m.map(((e,t)=>(0,$e.jsx)(Se.Qj,{icon:"external-link-alt",target:e.target,href:e.href,onClick:e.onClick,fill:"text",style:{width:"100%"},children:e.title},t)))})})})]})]})})};function Od(e,t){return e.display?(0,Zn.zc)(e.display(t)):`${t}`}const Id=e=>({infoWrap:O.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:O.css`
    background: ${e.colors.action.hover};
  `,xVal:O.css`
    font-weight: ${e.typography.fontWeightBold};
  `,icon:O.css`
    margin-right: ${e.spacing(1)};
    vertical-align: middle;
  `});function Td(e,t,n,s,a,i){let r,o;try{r=function(e,t){var n,s;let a=0;if(!t.length)throw"Missing data";if("manual"===e.seriesMapping){var i;if(null===(i=e.series)||void 0===i||!i.length)throw"Missing series config";const n=[];for(const s of e.series){if(null==s||!s.x)throw"Select X dimension";if(null==s||!s.y)throw"Select Y dimension";for(let e=0;e<t.length;e++){const i=t[e],d=(0,ts.rj)(i,s.x);if(null!=d){var r,o,l;const c=(0,ts.rj)(i,s.y);if(null==c)throw"Y must be in the same frame as X";const u={pointColorFixed:null===(r=s.pointColor)||void 0===r?void 0:r.fixed,pointColorIndex:(0,ts.rj)(i,null===(o=s.pointColor)||void 0===o?void 0:o.field),pointSizeConfig:s.pointSize,pointSizeIndex:(0,ts.rj)(i,null===(l=s.pointSize)||void 0===l?void 0:l.field)};n.push($d(a++,t,e,d,c,u))}}}return n}const d=null!==(n=e.dims)&&void 0!==n?n:{},c=null!==(s=d.frame)&&void 0!==s?s:0,u=t[c],h=[];let p=(0,ts.rj)(u,d.x);for(let e=0;e<u.fields.length;e++)if(hd(u.fields[e])){if(null==p||e===p){p=e;continue}if(d.exclude&&d.exclude.includes((0,bn.C)(u.fields[e],u,t)))continue;h.push(e)}if(null==p)throw"Missing X dimension";if(!h.length)throw"No Y values";return h.map((e=>$d(a++,t,c,p,e,{})))}(e,t()),o=Rd(t,r,n,s,a,i)}catch(e){let t="Unknown error in prepScatter";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message),{error:t,series:[]}}return{series:r,builder:o}}function $d(e,t,n,s,a,i){var r,o,l,d,c,u,h,p;const g=t[n],m=g.fields[a];let f=null!==(r=m.state)&&void 0!==r?r:{};f.seriesIndex=e,m.state=f;let v=i.pointColorFixed?ue.v.theme2.visualization.getColorByName(i.pointColorFixed):(0,Gn.YO)(m,ue.v.theme2).color,b=()=>v;const x=Object.assign({},jd,m.config.custom);let y=Gn.WO.get(fn.S.PaletteClassic);if(i.pointColorIndex){const e=t[n].fields[i.pointColorIndex];if(e){var w;const t=null!==(w=e.display)&&void 0!==w?w:(0,Jn.U)({field:e,theme:ue.v.theme2});if(y=(0,Gn.fD)(m),y.isByValue){const e=i.pointColorIndex;b=n=>n.fields[e].values.toArray().map((e=>t(e).color))}else v=y.getCalculator(e,ue.v.theme2)(e.values.get(0),1),b=()=>v}}let j=i.pointSizeConfig,S=null!==(o=null!==(l=null===(d=i.pointSizeConfig)||void 0===d?void 0:d.fixed)&&void 0!==l?l:null===(c=m.config.custom)||void 0===c||null===(u=c.pointSize)||void 0===u?void 0:u.fixed)&&void 0!==o?o:5,C=()=>S;i.pointSizeIndex?C=e=>{const t=(0,ts.A)(e.fields[i.pointSizeIndex],i.pointSizeConfig,ts.B5.Quadratic),n=Array(e.length);for(let s=0;s<e.length;s++)n[s]=t.get(s);return n}:j={fixed:S,min:S,max:S};const k=(0,bn.C)(m,g,t);return{name:k,frame:e=>e[n],x:e=>e.fields[s],y:e=>e.fields[a],legend:()=>[{label:k,color:v,getItemKey:()=>k,yAxis:a}],showLine:x.show!==yd.Points,lineWidth:null!==(h=x.lineWidth)&&void 0!==h?h:2,lineStyle:x.lineStyle,lineColor:()=>v,showPoints:x.show!==yd.Lines?wn.Jp.Always:wn.Jp.Never,pointSize:C,pointColor:b,pointSymbol:(e,t)=>"circle",label:wn.Jp.Never,labelValue:()=>"",show:!(null!==(p=g.fields[a].config.custom.hideFrom)&&void 0!==p&&p.viz),hints:{pointSize:j,pointColor:{mode:y}}}}const Rd=(e,t,n,s,a,i)=>{var r,o;let l,d;let c=(u={disp:{size:{values:(e,t)=>e.data[t][2]},color:{values:(e,t)=>e.data[t][3],alpha:(e,t)=>e.data[t][4]}},each:(e,t,n,s,a,i,r)=>{s-=e.bbox.left,a-=e.bbox.top,l.add({x:s,y:a,w:i,h:r,sidx:t,didx:n})}},(n,s,a,i)=>(qn.Z.orient(n,s,((a,i,r,o,l,d,c,h,p,g,m,f,v,b,x)=>{var y;const w=t[s-1];let j=n.data[s],S=w.showLine,C=w.showPoints===wn.Jp.Always;C||w.showPoints!==wn.Jp.Auto||(C=j[0].length<1e3),C||S||(S=!0),n.ctx.save(),n.ctx.rect(n.bbox.left,n.bbox.top,n.bbox.width,n.bbox.height),n.ctx.clip(),n.ctx.fillStyle=a.fill(),n.ctx.strokeStyle=a.stroke(),n.ctx.lineWidth=1;let k=2*Math.PI,N=o.key,O=l.key,I=w.hints.pointSize;const T=w.hints.pointColor.mode.isByValue;let $=(null!==(y=I.max)&&void 0!==y?y:I.fixed)*devicePixelRatio,R=n.posToVal(-$/2,N),P=n.posToVal(n.bbox.width/devicePixelRatio+$/2,N),D=n.posToVal(n.bbox.height/devicePixelRatio+$/2,O),A=n.posToVal(-$/2,O),M=u.disp.size.values(n,s),L=u.disp.color.values(n,s),F=u.disp.color.alpha(n,s),E=S?new Path2D:null;for(let e=0;e<j[0].length;e++){let t=j[0][e],a=j[1][e],i=M[e]*devicePixelRatio;if(t>=R&&t<=P&&a>=D&&a<=A){let r=d(t,o,g,h),f=c(a,l,m,p);S&&E.lineTo(r,f),C&&(n.ctx.moveTo(r+i/2,f),n.ctx.beginPath(),n.ctx.arc(r,f,i/2,0,k),T&&(n.ctx.fillStyle=F[e],n.ctx.strokeStyle=L[e]),n.ctx.fill(),n.ctx.stroke(),u.each(n,s,e,r-i/2-.5,f-i/2-.5,i+1,i+1))}}if(S){let t=w.frame(e());n.ctx.strokeStyle=w.lineColor(t),n.ctx.lineWidth=w.lineWidth*devicePixelRatio;const{lineStyle:s}=w;var V;s&&"solid"!==s.fill&&("dot"===s.fill&&(n.ctx.lineCap="round"),n.ctx.setLineDash(null!==(V=s.dash)&&void 0!==V?V:[10,10])),n.ctx.stroke(E)}n.ctx.restore()})),null));var u;const h=new Xn.U;h.setCursor({drag:{setScale:!0},dataIdx:(e,t)=>{if(1===t){d=null;let t=1/0,n=e.cursor.left*devicePixelRatio,s=e.cursor.top*devicePixelRatio;l.get(n,s,1,1,(e=>{if((0,as.Pn)(n,s,e.x,e.y,e.x+e.w,e.y+e.h)){let a=e.x+e.w/2,i=e.y+e.h/2,r=a-n,o=i-s,l=Math.sqrt(r**2+o**2);l<=e.w/2&&l<=t&&(t=l,d=e)}}))}return d&&t===d.sidx?d.didx:null},points:{size:(e,t)=>d&&t===d.sidx?d.w/devicePixelRatio:0,fill:(e,t)=>"rgba(255,255,255,0.4)"}});const p=()=>{i.current&&(s(void 0),a&&a())};let g,m=null;h.addHook("init",((e,t)=>{var n;(e.over.style.overflow="hidden",m=e.root.parentElement,a)&&(null===(n=m)||void 0===n||n.addEventListener("click",a))})),h.addHook("destroy",(e=>{var t;a&&(null===(t=m)||void 0===t||t.removeEventListener("click",a),p())})),h.addHook("syncRect",((e,t)=>{g=t})),h.addHook("setLegend",(e=>{if(null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const n=e.cursor.idxs[t];if(null!=n&&!i.current)return void s({scatterIndex:t-1,xIndex:n,pageX:g.left+e.cursor.left,pageY:g.top+e.cursor.top})}i.current||s(void 0)})),h.addHook("drawClear",(e=>{p(),l=l||new as.lW(0,0,e.bbox.width,e.bbox.height),l.clear(),e.series.forEach(((e,t)=>{t>0&&(e._paths=null)}))})),h.setMode(2);const f=e();let v=t[0].x(t[0].frame(f));h.addScale({scaleKey:"x",isTime:!1,orientation:wn.wN.Horizontal,direction:wn.bQ.Right,min:v.config.min,max:v.config.max});let b=v.config.custom.axisLabel;return h.addAxis({scaleKey:"x",placement:(null===(r=v.config.custom)||void 0===r?void 0:r.axisPlacement)!==wn.LB.Hidden?wn.LB.Bottom:wn.LB.Hidden,show:(null===(o=v.config.custom)||void 0===o?void 0:o.axisPlacement)!==wn.LB.Hidden,theme:n,label:null==b||""===b?(0,bn.C)(v,t[0].frame(f),f):b}),t.forEach(((e,s)=>{var a,i,r;let o=e.frame(f),l=e.y(o);const d=e.lineColor(o),u=function(e,t){const n=t(e);if(Array.isArray(n))return n[0];return n}(o,e.pointColor);let p=null!==(a=l.config.unit)&&void 0!==a?a:"y";if(h.addScale({scaleKey:p,orientation:wn.wN.Vertical,direction:wn.bQ.Up,max:l.config.max,min:l.config.min}),(null===(i=l.config.custom)||void 0===i?void 0:i.axisPlacement)!==wn.LB.Hidden){var g,m;let e=null===(g=l.config.custom)||void 0===g?void 0:g.axisLabel;h.addAxis({scaleKey:p,theme:n,placement:null===(m=l.config.custom)||void 0===m?void 0:m.axisPlacement,label:null==e||""===e?(0,bn.C)(l,t[s].frame(f),f):e,values:(e,t)=>t.map((e=>l.display(e).text))})}h.addSeries({facets:[{scale:"x",auto:!0},{scale:p,auto:!0}],pathBuilder:c,theme:n,scaleKey:"",lineColor:d,fillColor:(0,ns.alpha)(u,.5),show:!(null!==(r=l.config.custom.hideFrom)&&void 0!==r&&r.viz)})})),h};function Pd(e,t,n){return e.error||!t.length?[null]:[null,...e.series.map(((e,n)=>{const s=e.frame(t);let a,i;const r=e.pointColor(s);return Array.isArray(r)?(a=r,i=r.map((e=>(0,ns.alpha)(e,.5)))):(a=Array(s.length).fill(r),i=Array(s.length).fill((0,ns.alpha)(r,.5))),[e.x(s).values.toArray(),e.y(s).values.toArray(),Dd(s,e.pointSize),a,i]}))]}function Dd(e,t){const n=t(e);return Array.isArray(n)?n:Array(e.length).fill(n)}var Ad=n(40449);const Md=new G.c((e=>{const[t,n]=(0,E.useState)(),[s,a]=(0,E.useState)([]),[i,r]=(0,E.useState)(),[o,l]=(0,E.useState)(),[d,c]=(0,E.useState)(),[u,h]=(0,E.useState)(!1),p=(0,E.useRef)(!1),g=(0,kd.Z)(e.options),m=(0,kd.Z)(e.data),f=()=>{p.current=!p.current,h(p.current)},v=e=>{c(e)},b=(0,E.useCallback)((()=>{const t=Td(e.options,(()=>e.data.series),ue.v.theme2,v,f,p);t.error?n(t.error):t.series.length&&e.data.series&&(r(t.builder),a(t.series),l((()=>Pd(t,e.data.series))),n(void 0))}),[e.data.series,e.options]),x=(0,E.useCallback)((()=>{l((()=>Pd({error:t,series:s},e.data.series)))}),[e.data.series,t,s]);(0,E.useEffect)((()=>{g!==e.options||(null==m?void 0:m.structureRev)!==e.data.structureRev?b():m!==e.data&&x()}),[e]);return!t&&i&&o?(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(An.AY,{width:e.width,height:e.height,legend:(()=>{const t=[],n=e=>null==e?"-":e.toFixed(1),a=ue.v.theme2;for(let d=0;d<s.length;d++){const c=s[d],u=c.frame(e.data.series);if(u)for(const s of c.legend()){var i,r,o,l;if(s.getDisplayValues=()=>{var t;const s=e.options.legend.calcs;if(null==s||!s.length)return[];const i=c.y(u),r=null!==(t=i.display)&&void 0!==t?t:n;let o=null;const l=(0,Yn.Kx)({field:i,reducers:s});return s.map((e=>{const t=Yn.TB.get(e);let n=r;return t.id===Yn.gz.diffperc&&(n=(0,Jn.U)({field:Object.assign({},i,{config:Object.assign({},i.config,{unit:"percent"})}),theme:a})),t.id!==Yn.gz.count&&t.id!==Yn.gz.changeCount&&t.id!==Yn.gz.distinctCount||(o||(o=(0,Jn.U)({field:Object.assign({},i,{config:Object.assign({},i.config,{unit:"none"})}),theme:a})),n=o),Object.assign({},n(l[e]),{title:t.name,description:t.description})}))},s.disabled=!(null===(i=c.show)||void 0===i||i),e.options.seriesMapping===wd.Manual)s.label=null!==(r=null===(o=e.options.series)||void 0===o||null===(l=o[d])||void 0===l?void 0:l.name)&&void 0!==r?r:`Series ${d+1}`;t.push(s)}}if(!e.options.legend.showLegend)return null;const d={flexStart:O.css`
        div {
          justify-content: flex-start !important;
        }
      `};return(0,$e.jsx)(An.AY.Legend,{placement:e.options.legend.placement,width:e.options.legend.width,children:(0,$e.jsx)(Mn.l,{className:d.flexStart,placement:e.options.legend.placement,items:t,displayMode:e.options.legend.displayMode})})})(),children:(t,n)=>(0,$e.jsx)(ar.N,{config:i,data:o,width:t,height:n,timeRange:e.timeRange})}),(0,$e.jsx)(En.h_,{children:d&&e.options.tooltip.mode!==wn.f3.None&&(0,$e.jsxs)(Vn.S,{position:{x:d.pageX,y:d.pageY},offset:{x:10,y:10},allowPointerEvents:p.current,children:[u&&(0,$e.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(Wn.P,{onClick:()=>{p.current=!1,h(!1),v(void 0)},style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,$e.jsx)(Nd,{options:e.options.tooltip,allSeries:s,manualSeriesConfigs:e.options.series,seriesMapping:e.options.seriesMapping,rowIndex:d.xIndex,hoveredPointIndex:d.scatterIndex,data:e.data.series,range:e.timeRange})]})})]}):(0,$e.jsx)("div",{className:"panel-empty",children:(0,$e.jsx)("p",{children:t})})})).useFieldConfig((Ld=jd,{standardOptions:{[mn.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:fn.S.PaletteClassic}}},useCustomConfig:e=>{var t;e.addRadio({path:"show",name:"Show",defaultValue:Ld.show,settings:{options:[{label:"Points",value:yd.Points},{label:"Lines",value:yd.Lines},{label:"Both",value:yd.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:null===(t=Ld.pointSize)||void 0===t?void 0:t.fixed,settings:{min:1,max:100,step:1},showIf:e=>e.show!==yd.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:e=>e.show!==yd.Points,editor:Ad.j,override:Ad.j,process:vn.kG,shouldApply:e=>e.type===yn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Ld.lineWidth,settings:{min:0,max:10,step:1},showIf:e=>e.show!==yd.Points}),Sn.r(e,Ld),Cn.B(e)}})).setPanelOptions((e=>{e.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:fd,showIf:e=>"auto"===e.seriesMapping}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Sd,showIf:e=>"manual"===e.seriesMapping}),kn.L(e),Nn.J(e)}));var Ld;if(ue.v.featureToggles.useLegacyHeatmapPanel){const e=ue.v.panels.heatmap,t=ue.v.panels["heatmap-old"];t.id=e.id,t.module=e.module,t.state=e.state,ue.v.panels.heatmap=t}delete ue.v.panels["heatmap-old"];const Fd={"app/plugins/datasource/graphite/module":async()=>await n.e(7494).then(n.bind(n,24734)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([n.e(8832),n.e(8831)]).then(n.bind(n,48832)),"app/plugins/datasource/dashboard/module":async()=>await n.e(1501).then(n.bind(n,1501)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([n.e(4644),n.e(9897)]).then(n.bind(n,86207)),"app/plugins/datasource/opentsdb/module":async()=>await n.e(3168).then(n.bind(n,54485)),"app/plugins/datasource/grafana/module":async()=>await n.e(7537).then(n.bind(n,23151)),"app/plugins/datasource/influxdb/module":async()=>await n.e(5783).then(n.bind(n,54083)),"app/plugins/datasource/loki/module":async()=>await Promise.all([n.e(8935),n.e(7813),n.e(7725),n.e(8985),n.e(533),n.e(1598)]).then(n.bind(n,67768)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([n.e(1898),n.e(890)]).then(n.bind(n,79007)),"app/plugins/datasource/zipkin/module":async()=>await Promise.all([n.e(1898),n.e(4023)]).then(n.bind(n,30832)),"app/plugins/datasource/mixed/module":async()=>await n.e(2001).then(n.bind(n,14435)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([n.e(8242),n.e(4251)]).then(n.bind(n,23150)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([n.e(8242),n.e(534)]).then(n.bind(n,72727)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([n.e(8242),n.e(5032)]).then(n.bind(n,55658)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([n.e(7813),n.e(4644),n.e(8985),n.e(7004)]).then(n.bind(n,9970)),"app/plugins/datasource/testdata/module":async()=>await n.e(319).then(n.bind(n,30612)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([n.e(7796),n.e(3549)]).then(n.bind(n,71091)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([n.e(8112),n.e(2364)]).then(n.bind(n,98112)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([n.e(5434),n.e(1898),n.e(533),n.e(295)]).then(n.bind(n,88999)),"app/plugins/datasource/alertmanager/module":async()=>await n.e(6795).then(n.bind(n,17571)),"app/plugins/datasource/phlare/module":async()=>await n.e(9704).then(n.bind(n,79220)),"app/plugins/datasource/parca/module":async()=>await n.e(2015).then(n.bind(n,77936)),"app/plugins/panel/text/module":j,"app/plugins/panel/timeseries/module":S,"app/plugins/panel/state-timeline/module":x,"app/plugins/panel/status-history/module":y,"app/plugins/panel/candlestick/module":l,"app/plugins/panel/graph/module":async()=>await n.e(1260).then(n.bind(n,75678)),"app/plugins/panel/xychart/module":N,"app/plugins/panel/geomap/module":async()=>await Promise.all([n.e(2665),n.e(8096)]).then(n.bind(n,54178)),"app/plugins/panel/canvas/module":async()=>await Promise.all([n.e(7638),n.e(9534),n.e(3330)]).then(n.bind(n,35434)),"app/plugins/panel/icon/module":async()=>await Promise.all([n.e(9534),n.e(53)]).then(n.bind(n,11411)),"app/plugins/panel/dashlist/module":d,"app/plugins/panel/alertlist/module":a,"app/plugins/panel/annolist/module":i,"app/plugins/panel/heatmap/module":ue.v.featureToggles.useLegacyHeatmapPanel?async()=>await n.e(5745).then(n.bind(n,19898)):async()=>await n.e(6987).then(n.bind(n,41412)),"app/plugins/panel/table/module":w,"app/plugins/panel/table-old/module":async()=>await n.e(6784).then(n.bind(n,49877)),"app/plugins/panel/news/module":f,"app/plugins/panel/live/module":g,"app/plugins/panel/stat/module":Xo,"app/plugins/panel/debug/module":c,"app/plugins/panel/flamegraph/module":u,"app/plugins/panel/gettingstarted/module":h,"app/plugins/panel/gauge/module":Di,"app/plugins/panel/piechart/module":b,"app/plugins/panel/bargauge/module":o,"app/plugins/panel/barchart/module":r,"app/plugins/panel/logs/module":m,"app/plugins/panel/traces/module":C,"app/plugins/panel/welcome/module":k,"app/plugins/panel/nodeGraph/module":v,"app/plugins/panel/histogram/module":p,"app/plugins/panel/alertGroups/module":s};var Ed=n(87060);n(89377),n(4027),n(59554),n(65103),n(85095),n(28844),n(26189),n(47825),n(7540);const Vd=te;function zd(e,t){X.i.registerDynamic(e,[],!0,((e,n,s)=>{s.exports=t}))}Vd.PanelPlugin=G.c,Vd.DataSourcePlugin=Q.hf,Vd.AppPlugin=K.k8,Vd.DataSourceApi=Q.MF,X.i.registry.set("plugin-loader",X.i.newModule({locate:Ed.hf})),X.i.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}}),zd("@grafana/data",J),zd("@grafana/ui",Vd),zd("@grafana/runtime",ee),zd("lodash",D()),zd("moment",M()),zd("jquery",R()),zd("d3",T),zd("rxjs",W),zd("rxjs/operators",U),zd("react-router-dom",B),zd("prismjs",F()),zd("slate",H.ZP),zd("slate-react",Z.ZP),zd("@grafana/slate-react",Z.ZP),zd("slate-plain-serializer",q.Z),zd("react",E),zd("react-dom",V),zd("react-redux",z),zd("redux",_),zd("emotion",O),zd("@emotion/css",O),zd("@emotion/react",I),zd("app/features/dashboard/impression_store",{impressions:re.Z,__esModule:!0}),zd("app/core/services/backend_srv",{BackendSrv:ie.y$,getBackendSrv:ie.i}),zd("app/core/utils/datemath",Y),zd("app/core/utils/flatten",le),zd("app/core/utils/kbn",de.Z),zd("app/core/utils/ticks",ce),zd("app/core/config",se.ZP),zd("app/core/time_series",oe.Z),zd("app/core/time_series2",oe.Z),zd("app/core/table_model",ne.Z),zd("app/core/app_events",ae.h$),zd("app/core/core",{appEvents:ae.h$,contextSrv:ae.Vt,__esModule:!0});const Bd=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const e of Bd)zd(e,{fakeDep:1});async function _d(e,t){t&&(0,Ed.Vf)({path:e,version:t});const n=Fd[e];return n?"function"==typeof n?await n():n:X.i.import(e)}function Wd(e){var t;return _d(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{if(t.plugin){const n=t.plugin;return n.meta=e,n}if(t.Datasource){const n=new Q.hf(t.Datasource);return n.setComponentsFromLegacyExports(t),n.meta=e,n}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")}))}function Ud(e){var t;return _d(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{const n=t.plugin?t.plugin:new K.k8;return n.init(e),n.meta=e,n.setComponentsFromLegacyExports(t),n}))}},86821:(e,t,n)=>{"use strict";n.d(t,{O:()=>l,d:()=>d});var s=n(15546),a=n(65737),i=n(21167),r=n(4020),o=n(75534);async function l(e){const t=await(0,r.a)(e);let n;if(t.type===s.zV.app&&(n=await(0,o.Av)(t)),t.type===s.zV.datasource&&(n=await(0,o.nL)(t)),t.type===s.zV.panel){n=await(0,i._2)(t)}if(t.type===s.zV.renderer&&(n={meta:t}),!n)throw new Error("Unknown Plugin type: "+t.type);return n}function d(e,t,n){var s,i;if(!a.v.featureToggles.topnav)return null!=t?t:void 0;let r,o=Object.assign({},e);function l(e,t){var n,s,a,i,o;return t.startsWith(null!==(n=e.url)&&void 0!==n?n:"")?r&&(null!==(s=null===(a=r.url)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>(null!==(i=null===(o=e.url)||void 0===o?void 0:o.length)&&void 0!==i?i:0)?e:(r&&(r.active=!1),r=Object.assign({},e,{active:!0}),r):e}return o.children=(null!==(s=null==o?void 0:o.children)&&void 0!==s?s:[]).map((e=>e.children?Object.assign({},l(e,n),{children:e.children.map((e=>l(e,n)))}):l(e,n))),{main:o,node:null!==(i=r)&&void 0!==i?i:o}}},40455:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var s=n(93570);const a={changePassword:async function(e){try{await(0,s.i)().put("/api/user/password",e)}catch(e){console.error(e)}},revokeUserSession:async function(e){await(0,s.i)().post("/api/user/revoke-auth-token",{authTokenId:e})},loadUser:function(){return(0,s.i)().get("/api/user")},loadSessions:function(){return(0,s.i)().get("/api/user/auth-tokens")},loadOrgs:function(){return(0,s.i)().get("/api/user/orgs")},loadTeams:function(){return(0,s.i)().get("/api/user/teams")},setUserOrg:async function(e){await(0,s.i)().post("/api/user/using/"+e.orgId,{})},updateUserProfile:async function(e){try{await(0,s.i)().put("/api/user",e)}catch(e){console.error(e)}}}},69638:(e,t,n)=>{"use strict";n.d(t,{$S:()=>m,Ns:()=>f,PL:()=>b,Uk:()=>w,YT:()=>h,ZP:()=>N,aw:()=>x,p$:()=>y,qD:()=>v,rf:()=>u,z0:()=>j,zW:()=>p,zc:()=>g});var s=n(23067),a=n(82897),i=n(6432),r=n(88246),o=n(46782),l=n(68374);const d={orgId:o.ZP.bootData.user.orgId,timeZone:o.ZP.bootData.user.timezone,weekStart:o.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,s.oM)({name:"user/profile",initialState:d,reducers:{updateTimeZone:(e,t)=>{e.timeZone=t.payload.timeZone},updateWeekStart:(e,t)=>{e.weekStart=t.payload.weekStart},updateFiscalYearStartMonth:(e,t)=>{e.fiscalYearStartMonth=t.payload.fiscalYearStartMonth},setUpdating:(e,t)=>{e.isUpdating=t.payload.updating},userLoaded:(e,t)=>{e.user=t.payload.user},initLoadTeams:(e,t)=>{e.teamsAreLoading=!0},teamsLoaded:(e,t)=>{e.teams=t.payload.teams,e.teamsAreLoading=!1},initLoadOrgs:(e,t)=>{e.orgsAreLoading=!0},orgsLoaded:(e,t)=>{e.orgs=t.payload.orgs,e.orgsAreLoading=!1},initLoadSessions:(e,t)=>{e.sessionsAreLoading=!0},sessionsLoaded:(e,t)=>{const n=t.payload.sessions.sort(((e,t)=>Number(t.isActive)-Number(e.isActive)));e.sessions=n.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,i.E8)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device}))),e.sessionsAreLoading=!1},userSessionRevoked:(e,t)=>{e.sessions=e.sessions.filter((e=>e.id!==t.payload.tokenId)),e.isUpdating=!1}}}),u=e=>async t=>{(0,a.set)(l.Vt,"user.fiscalYearStartMonth",e),t(k({fiscalYearStartMonth:e}))},h=e=>async t=>{var n,s;(0,a.isString)(e)&&!(0,a.isEmpty)(e)||(e=null===o.ZP||void 0===o.ZP||null===(n=o.ZP.bootData)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.timezone);(0,a.set)(l.Vt,"user.timezone",e),t(S({timeZone:e}))},p=e=>async t=>{var n,s;(0,a.isString)(e)&&!(0,a.isEmpty)(e)||(e=null===o.ZP||void 0===o.ZP||null===(n=o.ZP.bootData)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.weekStart);(0,a.set)(l.Vt,"user.weekStart",e),t(C({weekStart:e})),(0,r.Ls)(e)},{setUpdating:g,initLoadOrgs:m,orgsLoaded:f,initLoadTeams:v,teamsLoaded:b,userLoaded:x,userSessionRevoked:y,initLoadSessions:w,sessionsLoaded:j,updateTimeZone:S,updateWeekStart:C,updateFiscalYearStartMonth:k}=c.actions,N=(c.reducer,{user:c.reducer})},67040:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,i:()=>a});const s=e=>e.timeZone,a=e=>e.fiscalYearStartMonth},57157:(e,t,n)=>{"use strict";n.d(t,{S:()=>a,f:()=>i});class s{constructor(){var e,t,n;n=[],(t="extraRenderActions")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}addExtraRenderAction(e){this.extraRenderActions=this.extraRenderActions.concat(e)}getAllExtraRenderAction(){return this.extraRenderActions}}const a=new s,i=new s},279:(e,t,n)=>{"use strict";n.d(t,{x:()=>_,t:()=>W});var s=n(9085),a=n.n(s),i=n(82897),r=n(64681),o=n.n(r),l=n(68404),d=n(54316),c=n(39498),u=n(25317),h=n(28173),p=n(68633),g=n(94025),m=n(25004),f=n(70194),v=n(64313),b=n(54761),x=n(72767),y=n(86495),w=n(9735),j=n(17690),S=n(53091),C=n(38591),k=n(42833),N=n(57157),O=n(52423),I=n(94570),T=n(16755),$=n(99500),R=n(4645),P=n(31625),D=n(45916);const A=e=>{const{query:t,queries:n,onClick:s,onChange:a,collapsedText:i,renderExtras:r,disabled:o}=e,d=(0,T.wW)(L),[c,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(null),g=e=>{u(!1),h?p(null):t.refId!==e&&a(Object.assign({},t,{refId:e}))};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:d.wrapper,children:[!c&&(0,D.jsxs)("button",{className:d.queryNameWrapper,"aria-label":m.wl.components.QueryEditorRow.title(t.refId),title:"Edit query name",onClick:e=>{u(!0)},"data-testid":"query-name-div",type:"button",children:[(0,D.jsx)("span",{className:d.queryName,children:t.refId}),(0,D.jsx)($.J,{name:"pen",className:d.queryEditIcon,size:"sm"})]}),c&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(R.I,{type:"text",defaultValue:t.refId,onBlur:e=>{g(e.currentTarget.value.trim())},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&g(e.target.value)},onFocus:e=>{e.target.select()},invalid:null!==h,onChange:e=>{const s=e.currentTarget.value.trim();if(0!==s.length){for(const e of n)if(e!==t&&s===e.refId)return void p("Query name already exists");h&&p(null)}else p("An empty query name is not allowed")},className:d.queryNameInput,"data-testid":"query-name-input"}),h&&(0,D.jsx)(P.S,{horizontal:!0,children:h})]}),M(e,d),r&&(0,D.jsx)("div",{className:d.itemWrapper,children:r()}),o&&(0,D.jsx)("em",{className:d.contextInfo,children:"Disabled"})]}),i&&(0,D.jsx)("div",{className:d.collapsedText,onClick:s,children:i})]})},M=(e,t)=>{const{alerting:n,dataSource:s,onChangeDataSource:a}=e;return a?(0,D.jsx)("div",{className:t.itemWrapper,children:(0,D.jsx)(I.q,{variables:!0,alerting:n,current:s.name,onChange:a})}):(0,D.jsxs)("em",{className:t.contextInfo,children:["(",s.name,")"]})},L=e=>({wrapper:O.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${e.spacing(.5)};
    `,queryNameWrapper:O.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${e.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${e.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${e.colors.action.hover};
        border: 1px dashed ${e.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${e.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:O.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${e.spacing(.5)};
    `,queryEditIcon:(0,O.cx)(O.css`
        margin-left: ${e.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:O.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:O.css`
      font-weight: ${e.typography.fontWeightRegular};
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
      padding-left: ${e.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:O.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${e.colors.text.secondary};
      padding-left: 10px;
    `,itemWrapper:O.css`
      display: flex;
      margin-left: 4px;
    `});var F;function E(e){var t,n,s;let{error:a}=e;const i=(0,T.wW)(V),r=null!==(t=null!==(n=null==a?void 0:a.message)&&void 0!==n?n:null==a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==t?t:"Query error";return(0,D.jsxs)("div",{className:i.wrapper,children:[(0,D.jsx)("div",{className:i.icon,children:F||(F=(0,D.jsx)($.J,{name:"exclamation-triangle"}))}),(0,D.jsx)("div",{className:i.message,children:r})]})}const V=e=>({wrapper:(0,O.css)({marginTop:e.spacing(.5),background:e.colors.background.secondary,display:"flex"}),icon:(0,O.css)({background:e.colors.error.main,color:e.colors.error.contrastText,padding:e.spacing(1)}),message:(0,O.css)({fontSize:e.typography.bodySmall.fontSize,fontFamily:e.typography.fontFamilyMonospace,padding:e.spacing(1)})});var z;function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends l.PureComponent{constructor(){super(...arguments),B(this,"element",null),B(this,"angularScope",null),B(this,"angularQueryEditor",null),B(this,"id",""),B(this,"state",{datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1}),B(this,"renderAngularQueryEditor",(()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const e=(0,f.w)(),t={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=e.load(this.element,t,'<plugin-component type="query-ctrl" />'),this.angularScope=t.ctrl})),B(this,"onOpen",(()=>{this.renderAngularQueryEditor()})),B(this,"renderPluginEditor",(()=>{var e;const{query:t,onChange:n,queries:s,onRunQuery:a,onAddQuery:i,app:r=d.zj.PanelEditor,history:o}=this.props,{datasource:l,data:u}=this.state;if(null!=l&&null!==(e=l.components)&&void 0!==e&&e.QueryCtrl)return(0,D.jsx)("div",{ref:e=>this.element=e});if(l){let e=this.getReactQueryEditor(l);if(e)return(0,D.jsx)(c.n,{instanceSettings:this.props.dataSource,children:(0,D.jsx)(e,{query:t,datasource:l,onChange:n,onRunQuery:a,onAddQuery:i,data:u,range:(0,S.$t)().timeRange(),queries:s,app:r,history:o},null==l?void 0:l.name)})}return z||(z=(0,D.jsx)("div",{children:"Data source plugin does not export any Query Editor component"}))})),B(this,"onToggleEditMode",((e,t)=>{var n;(e.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode)&&(this.angularScope.toggleEditorMode(),null===(n=this.angularQueryEditor)||void 0===n||n.digest(),t.isOpen||t.onOpen())})),B(this,"onRemoveQuery",(()=>{const{onRemoveQuery:e,query:t,onQueryRemoved:n}=this.props;e(t),n&&n()})),B(this,"onCopyQuery",(()=>{const{query:e,onAddQuery:t,onQueryCopied:n}=this.props;t((0,i.cloneDeep)(e)),n&&n()})),B(this,"onDisableQuery",(()=>{const{query:e,onChange:t,onRunQuery:n,onQueryToggled:s}=this.props;t(Object.assign({},e,{hide:!e.hide})),n(),s&&s(e.hide)})),B(this,"onToggleHelp",(()=>{this.setState((e=>({showingHelp:!e.showingHelp})))})),B(this,"onClickExample",(e=>{void 0===e.datasource&&(e.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange(Object.assign({},e,{refId:this.props.query.refId})),this.onToggleHelp()})),B(this,"renderWarnings",(()=>{var e,t;const{data:n,query:s}=this.props,a=(null!==(e=null===(t=W(n,s.refId))||void 0===t?void 0:t.series)&&void 0!==e?e:[]).reduce(((e,t)=>{var n,s;if(null===(n=t.meta)||void 0===n||!n.notices)return e;const a=null!==(s=(0,i.filter)(t.meta.notices,{severity:"warning"}))&&void 0!==s?s:[];return e.concat(a)}),[]),r=(0,i.uniqBy)(a,"text");if(!(r.length>0))return null;const l=r.map((e=>e.text)).join("\n");return(0,D.jsx)(v.C,{color:"orange",icon:"exclamation-triangle",text:(0,D.jsxs)(D.Fragment,{children:[r.length," ",o()("warning",r.length)]}),tooltip:l})})),B(this,"renderExtraActions",(()=>{const{query:e,queries:t,data:n,onAddQuery:s,dataSource:a}=this.props,i=N.f.getAllExtraRenderAction().map(((i,r)=>i({query:e,queries:t,timeRange:n.timeRange,onAddQuery:s,dataSource:a,key:r}))).filter(Boolean);return i.push(this.renderWarnings()),i})),B(this,"renderActions",(e=>{var t;const{query:n,hideDisableQuery:s=!1}=this.props,{hasTextEditMode:a,datasource:i,showingHelp:r}=this.state,o=n.hide,l=null==i||null===(t=i.components)||void 0===t?void 0:t.QueryEditorHelp;return(0,D.jsxs)(b.Lh,{width:"auto",children:[l&&(0,D.jsx)(w.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:r}),a&&(0,D.jsx)(w.y,{title:"Toggle text edit mode",icon:"pen",onClick:t=>{this.onToggleEditMode(t,e)}}),this.renderExtraActions(),(0,D.jsx)(w.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),s?null:(0,D.jsx)(w.y,{title:"Disable/enable query",icon:o?"eye-slash":"eye",active:o,onClick:this.onDisableQuery}),(0,D.jsx)(w.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery})]})})),B(this,"renderHeader",(e=>{const{alerting:t,query:n,dataSource:s,onChangeDataSource:a,onChange:i,queries:r,renderHeaderExtras:o}=this.props;return(0,D.jsx)(A,{query:n,queries:r,onChangeDataSource:a,dataSource:s,disabled:n.hide,onClick:t=>this.onToggleEditMode(t,e),onChange:i,collapsedText:e.isOpen?null:this.renderCollapsedText(),renderExtras:o,alerting:t})}))}componentDidMount(){const{data:e,query:t,id:n}=this.props,s=W(e,t.refId);this.id=(0,i.uniqueId)(n+"_"),this.setState({data:s}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:e,queries:t}=this.props,{datasource:n}=this.state,s=new C.r({targets:t}),a=this;return{datasource:n,target:e,panel:s,dashboard:{},refresh:()=>{e.hide!==a.props.query.hide&&(e.hide=a.props.query.hide),this.props.onChange(e),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new u.F,range:(0,S.$t)().timeRange()}}getQueryDataSourceIdentifier(){var e,t;const{query:n,dataSource:s}=this.props;return null!==(e=null===(t=n.datasource)||void 0===t?void 0:t.uid)&&void 0!==e?e:s.uid}async loadDatasource(){const e=(0,k.ak)();let t;const n=this.getQueryDataSourceIdentifier();try{t=await e.get(n)}catch(n){t=await e.get()}this.setState({datasource:t,loadedDataSourceIdentifier:n,hasTextEditMode:(0,i.has)(t,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(e){const{datasource:t,loadedDataSourceIdentifier:n}=this.state,{data:s,query:a}=this.props;if(e.id!==this.props.id&&(this.id=(0,i.uniqueId)(this.props.id+"_")),s!==e.data){const e=W(s,a.refId);this.setState({data:e}),this.angularScope&&(this.angularScope.range=(0,S.$t)().timeRange()),this.angularQueryEditor&&e&&function(e,t,n){if(t.state===h.Gu.Done){const n=t.series.map((e=>(0,p.Zr)(e)));e.events.emit(g.Kh.dataReceived,n)}else t.state===h.Gu.Error&&e.events.emit(g.Kh.dataError,t.error);setTimeout(n.digest)}(this.angularScope,e,this.angularQueryEditor)}if(t&&n!==this.getQueryDataSourceIdentifier())return this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),void this.loadDatasource();this.element&&!this.angularQueryEditor&&this.renderAngularQueryEditor()}getReactQueryEditor(e){var t,n,s,a,i;if(e)switch(this.props.app){case d.zj.Explore:return(null===(t=e.components)||void 0===t?void 0:t.ExploreMetricsQueryField)||(null===(n=e.components)||void 0===n?void 0:n.ExploreLogsQueryField)||(null===(s=e.components)||void 0===s?void 0:s.ExploreQueryField)||(null===(a=e.components)||void 0===a?void 0:a.QueryEditor);case d.zj.PanelEditor:case d.zj.Dashboard:default:return null===(i=e.components)||void 0===i?void 0:i.QueryEditor}}renderCollapsedText(){const{datasource:e}=this.state;return null!=e&&e.getQueryDisplayText?e.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){var e;const{query:t,index:n,visualization:s}=this.props,{datasource:i,showingHelp:r,data:o}=this.state,l=t.hide,d=a()("query-editor-row",{"query-editor-row--disabled":l,"gf-form-disabled":l});if(!i)return null;const c=this.renderPluginEditor(),u=null===(e=i.components)||void 0===e?void 0:e.QueryEditorHelp;return(0,D.jsx)("div",{"aria-label":m.wl.components.QueryEditorRows.rows,children:(0,D.jsx)(j.t,{id:this.id,draggable:!0,index:n,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen,children:(0,D.jsxs)("div",{className:d,id:this.id,children:[(0,D.jsxs)(x.z4,{children:[r&&u&&(0,D.jsx)(y.h,{children:(0,D.jsx)(u,{onClickExample:e=>this.onClickExample(e),query:this.props.query,datasource:i})}),c]}),(null==o?void 0:o.error)&&o.error.refId===t.refId&&(0,D.jsx)(E,{error:o.error}),s]})})})}}function W(e,t){const n=e.series.filter((e=>e.refId===t));if(e.state!==h.Gu.Loading&&e.error&&!e.series.length)return Object.assign({},e,{state:h.Gu.Error});let s=e.state;const a=e.error&&e.error.refId===t?e.error:void 0;a?s=h.Gu.Error:a||e.state!==h.Gu.Error||(s=h.Gu.Done);const i=e.timeRange;return Object.assign({},e,{state:s,series:n,error:a,timeRange:i})}},45921:(e,t,n)=>{"use strict";n.d(t,{Tl:()=>K,kt:()=>Q});var s=n(16527),a=n(96209),i=n(95484),r=n(16313),o=n(4561),l=n(2101),d=n(67305),c=n(15562),u=n(38581),h=n(97218),p=n(44962),g=n(7356),m=n(38251),f=n(46782),v=n(82897);function b(e){let t=[];const n=(0,v.partition)(e,"id"),s=(0,v.groupBy)(n[0],"id");return t=(0,v.map)(s,(e=>e.length>1&&!(0,v.every)(e,x)?(0,v.find)(e,(e=>"panel-alert"!==e.eventType)):(0,v.head)(e))),t=(0,v.concat)(t,n[1]),t}function x(e){return"panel-alert"===e.eventType}var y=n(53091),w=n(85526),j=n(94514),S=n(93570),C=n(26270);class k{canWork(e){let{dashboard:t,range:n}=e;return!!t.id&&("now"===n.raw.to&&!!t.panels.find((e=>!!e.alert)))}work(e){if(!this.canWork(e))return(0,C.H_)();const{dashboard:t}=e;return(0,w.D)((0,S.i)().get("/api/alerts/states-for-dashboard",{dashboardId:t.id},`dashboard-query-runner-alert-states-${t.id}`)).pipe((0,l.U)((e=>({alertStates:e,annotations:[]}))),(0,j.K)(C.Rc))}}var N=n(53786),O=n(98356),I=n(14542),T=n(8910),$=n(8105),R=n(33971),P=n(6877);class D{canRun(e){return!!e&&Boolean(!e.annotationQuery||e.annotations)}run(e){let{annotation:t,datasource:n,dashboard:s,range:a}=e;if(!this.canRun(n))return(0,N.of)([]);return(0,P.r)({dashboard:s,range:a,panel:{}},n,t).pipe((0,l.U)((e=>{var t;return null!==(t=e.events)&&void 0!==t?t:[]})),(0,j.K)(C.h1))}}var A=n(99159);class M{canRun(e){return!!e&&(!!(0,A.yr)(e)||Boolean(e.annotationQuery&&!e.annotations))}run(e){let{annotation:t,datasource:n,dashboard:s,range:a}=e;return this.canRun(n)?(0,w.D)(n.annotationQuery({range:a,rangeRaw:a.raw,annotation:t,dashboard:s})).pipe((0,j.K)(C.h1)):(0,N.of)([])}}class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new M,new D];this.runners=e}canWork(e){let{dashboard:t}=e;const n=t.annotations.list.find(L.getAnnotationsToProcessFilter);return Boolean(n)}work(e){if(!this.canWork(e))return(0,C.H_)();const{dashboard:t,range:n}=e;let s=t.annotations.list.filter(L.getAnnotationsToProcessFilter);t.meta.publicDashboardAccessToken&&s.length>0&&(s=[s[0]]);const a=s.map((e=>{let s;if((0,f.iE)().isPublicDashboardView){const e=new R.lh(R.Qi);s=(0,N.of)(e).pipe((0,j.K)(C.hs))}else s=(0,w.D)((0,T.F)().get(e.datasource)).pipe((0,j.K)(C.hs));return s.pipe((0,O.z)((s=>{const a=this.runners.find((e=>e.canRun(s)));return a?(t.events.publish(new $.z(e)),a.run({annotation:e,datasource:s,dashboard:t,range:n}).pipe((0,d.R)(Q().cancellations().pipe((0,I.h)((t=>t===e)))),(0,l.U)((n=>(t.snapshot&&(e.snapshotData=(0,v.cloneDeep)(n)),t.meta.publicDashboardAccessToken?n:(0,C.pG)(e,n)))),(0,h.x)((()=>{t.events.publish(new $.RB(e))})))):(0,N.of)([])})))}));return(0,r.T)(a).pipe((0,c.J)(),(0,u.u)(((e,t)=>e.concat(t))),(0,l.U)((e=>({annotations:e,alertStates:[]}))))}static getAnnotationsToProcessFilter(e){return e.enable&&!Boolean(e.snapshotData)}}var F=n(8959),E=n(39003),V=n(59196),z=n(74846),B=n(80458),_=n(64850),W=n(22587);class U{constructor(){var e,t,n;n={},(t="hasAlertRules")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}canWork(e){let{dashboard:t,range:n}=e;if(!t.uid)return!1;if(t.meta.publicDashboardAccessToken)return!1;if("now"!==n.raw.to)return!1;if(!1===this.hasAlertRules[t.uid])return!1;return!(!V.Vt.hasPermission(_.bW.AlertingRuleRead)||!V.Vt.hasPermission(_.bW.AlertingRuleExternalRead))}work(e){if(!this.canWork(e))return(0,C.H_)();const{dashboard:t}=e;return(0,w.D)((0,S.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:t.uid},`dashboard-query-runner-unified-alert-states-${t.id}`)).pipe((0,l.U)((e=>{if("success"===e.status){this.hasAlertRules[t.uid]=!1;const n={};return e.data.groups.forEach((e=>e.rules.forEach((e=>{if((0,B.x_)(e)&&e.annotations&&e.annotations[z.q6.panelID]){this.hasAlertRules[t.uid]=!0;const s=Number(e.annotations[z.q6.panelID]),a=function(e){if(e===W.x_.Firing)return E.Z.Alerting;if(e===W.x_.Pending)return E.Z.Pending;return E.Z.OK}(e.state);n[s]?a===E.Z.Alerting&&n[s].state!==E.Z.Alerting?n[s].state=E.Z.Alerting:a===E.Z.Pending&&n[s].state!==E.Z.Alerting&&n[s].state!==E.Z.Pending&&(n[s].state=E.Z.Pending):n[s]={state:a,id:Object.keys(n).length,panelId:s,dashboardId:t.id}}})))),{alertStates:Object.values(n),annotations:[]}}throw new Error("Unexpected alert rules response.")})),(0,j.K)(C.Rc))}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.$t)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[f.vc.unifiedAlertingEnabled?new U:new k,new F.g,new L];H(this,"results",void 0),H(this,"runs",void 0),H(this,"cancellationStream",void 0),H(this,"runsSubscription",void 0),H(this,"eventsSubscription",void 0),this.dashboard=e,this.timeSrv=t,this.workers=n,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new s.t(1),this.runs=new a.x,this.cancellationStream=new a.x,this.runsSubscription=this.runs.subscribe((e=>this.executeRun(e))),this.eventsSubscription=e.events.subscribe(m.U5,(e=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})}))}run(e){this.runs.next(e)}getResult(e){return this.results.asObservable().pipe((0,l.U)((t=>{const n=(0,C.tD)(t.annotations,e),s=t.alertStates.find((t=>Boolean(e)&&t.panelId===e));return{annotations:b(n),alertState:s}})))}executeRun(e){const t=this.workers.filter((t=>t.canWork(e))).map((t=>t.work(e))),n=new i.w0,s=(0,r.T)(t).pipe((0,d.R)(this.runs.asObservable()),(0,c.J)(),(0,u.u)(((e,t)=>(e.annotations=e.annotations.concat(t.annotations),e.alertStates=e.alertStates.concat(t.alertStates),e))),(0,h.x)((()=>{n.unsubscribe()})),(0,p.B)()),a=new i.w0,l=(0,o.H)(200).pipe((0,g.h)({annotations:[],alertStates:[]}),(0,d.R)(s),(0,h.x)((()=>{a.unsubscribe()})));a.add(l.subscribe((e=>{this.results.next(e)}))),n.add(s.subscribe((e=>{this.results.next(e)})))}cancel(e){this.cancellationStream.next(e)}cancellations(){return this.cancellationStream.asObservable().pipe((0,p.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let Z,G;function Q(){if(!Z)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return Z}function K(e){G||(G=e=>{let{dashboard:t,timeSrv:n,workers:s}=e;return new q(t,n,s)});const t=G(e);return function(e){Z&&Z.destroy(),Z=e}(t),t}},8959:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var s=n(53786),a=n(26270);class i{canWork(e){var t,n;let{dashboard:s}=e;return null==s||null===(t=s.annotations)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.some((e=>e.enable&&Boolean(e.snapshotData)))}work(e){if(!this.canWork(e))return(0,a.H_)();const t=this.getAnnotationsFromSnapshot(e.dashboard);return(0,s.of)({annotations:t,alertStates:[]})}getAnnotationsFromSnapshot(e){var t,n;return(null==e||null===(t=e.annotations)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.filter((e=>e.enable))).filter((e=>Boolean(e.snapshotData))).reduce(((e,t)=>e.concat((0,a.pG)(t,t.snapshotData))),[])}getAnnotationsInSnapshot(e,t){const n=this.getAnnotationsFromSnapshot(e);return(0,a.tD)(n,t)}}},26270:(e,t,n)=>{"use strict";n.d(t,{H_:()=>p,Rc:()=>g,em:()=>b,h1:()=>u,hs:()=>h,pG:()=>v,tD:()=>f});var s=n(82897),a=n(53786),i=n(32898),r=n(75386),o=n(65737),l=n(63454),d=n(47900),c=n(11035);function u(e){return e.cancelled||m("AnnotationQueryRunner failed",e),(0,a.of)([])}function h(e){return m("Failed to retrieve datasource",e),(0,a.of)(void 0)}const p=()=>(0,a.of)({annotations:[],alertStates:[]});function g(e){return e.cancelled||m("DashboardQueryRunner failed",e),p()}function m(e,t){const n=(0,r.P)(t);console.error("handleAnnotationQueryRunnerError",n);const s=(0,d.t_)(e,n.message);(0,l.WI)((0,c.$l)(s))}function f(e,t){return e.filter((e=>{var n;return void 0===t||!e.panelId||"dashboard"!==(null===(n=e.source)||void 0===n?void 0:n.type)||e.panelId===t}))}function v(e,t){var n;e.snapshotData&&delete(e=(0,s.cloneDeep)(e)).snapshotData;for(const s of t)switch(s.source=e,s.color=o.v.theme2.visualization.getColorByName(e.iconColor),s.type=e.name,s.isRegion=Boolean(s.timeEnd&&s.time!==s.timeEnd),null===(n=s.newState)||void 0===n?void 0:n.toLowerCase()){case"pending":s.color="yellow";break;case"alerting":s.color="red";break;case"ok":case"normal":s.color="green";break;case"no_data":case"nodata":s.color="gray"}return t}function b(e){if(!e||!e.length)return[];const t=[];for(const n of e){const e=new i.U(n);for(let a=0;a<n.length;a++){const n=(0,s.cloneDeep)(e.get(a));t.push(n)}}return t}},59558:(e,t,n)=>{"use strict";n.d(t,{o:()=>T,t:()=>I});var s=n(82897),a=n(53786),i=n(16527),r=n(98356),o=n(2101),l=n(55998),d=n(28173),c=n(68633),u=n(12717),h=n(71855),p=n(3448),g=n(54316),m=n(85699),f=n(2633),v=n(18474),b=n(88113),x=n(42833),y=n(42204),w=n(33971),j=n(45921),S=n(86680),C=n(22458);var k=n(8343);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let O=100;function I(){return"Q"+O++}class T{constructor(e){N(this,"subject",void 0),N(this,"subscription",void 0),N(this,"lastResult",void 0),N(this,"dataConfigSource",void 0),N(this,"lastRequest",void 0),N(this,"getTransformationsStream",(e=>t=>t.pipe((0,r.z)((t=>{if(!e)return(0,a.of)(t);const n=this.dataConfigSource.getTransformations();if(!n||0===n.length)return(0,a.of)(t);const s=e=>{var n;return(0,f.J)().replace(e,null==t||null===(n=t.request)||void 0===n?void 0:n.scopedVars)};return n.forEach((e=>{e.replace=s})),(0,l.H)(n,t.series).pipe((0,o.U)((e=>Object.assign({},t,{series:e}))))}))))),N(this,"resendLastResult",(()=>{this.lastResult&&this.subject.next(this.lastResult)})),this.subject=new i.t(1),this.dataConfigSource=e}getData(e){const{withFieldConfig:t,withTransforms:n}=e;let s=1,i=[],r=!0,l=-1;if(this.dataConfigSource.snapshotData){const e={state:d.Gu.Done,series:this.dataConfigSource.snapshotData.map((e=>(0,c.g0)(e))),timeRange:(0,u.JK)()};return(0,a.of)(e)}return this.subject.pipe(this.getTransformationsStream(n),(0,o.U)((e=>{var n;let a=e,o=!1;if(t&&null!==(n=e.series)&&void 0!==n&&n.length){if(l===this.dataConfigSource.configRev){const t=e.series.find((e=>(0,b.iL)(e)));t&&!t.packetInfo.schemaChanged&&i[0].fields.length===t.fields.length&&(a=Object.assign({},a,{series:i.map(((t,n)=>Object.assign({},t,{length:e.series[n].length,fields:t.fields.map(((t,s)=>Object.assign({},t,{values:e.series[n].fields[s].values,state:Object.assign({},t.state,{calcs:void 0,range:void 0})})))})))}),o=!0)}let t=this.dataConfigSource.getFieldOverrideOptions();var d,c;if(null!=t&&(r||!o))l=this.dataConfigSource.configRev,a=Object.assign({},a,{series:(0,h.SM)(Object.assign({timeZone:null!==(d=null===(c=e.request)||void 0===c?void 0:c.timezone)&&void 0!==d?d:"browser",data:a.series},t))}),r=!1}return o||(0,p.nl)(i,a.series,p.Ch)||s++,i=a.series,Object.assign({},a,{structureRev:s})})))}async run(e){const{queries:t,timezone:n,datasource:a,panelId:i,dashboardId:r,dashboardUID:o,publicDashboardAccessToken:l,timeRange:d,timeInfo:c,cacheTimeout:u,maxDataPoints:h,scopedVars:p,minInterval:b}=e;if((0,y.yl)(a))return void this.pipeToSubject((0,y.AK)(e,t[0]),i);const j={app:g.zj.Dashboard,requestId:I(),timezone:n,panelId:i,dashboardId:r,dashboardUID:o,publicDashboardAccessToken:l,range:d,timeInfo:c,interval:"",intervalMs:0,targets:(0,s.cloneDeep)(t),maxDataPoints:h,scopedVars:p||{},cacheTimeout:u,startTime:Date.now()};j.rangeRaw=d.raw;try{var S;const e=await async function(e,t,n){if(!n&&e&&"object"==typeof e&&"query"in e)return e;const s=await(0,x.ak)().get(e,t);if(n)return new w.lh(s);return s}(a,j.scopedVars,l),t=null===(S=e.meta)||void 0===S?void 0:S.mixed;j.targets=j.targets.map((n=>{var s;const a=(null===(s=n.datasource)||void 0===s?void 0:s.type)===v.hr.type;return n.datasource&&(n.datasource.uid===e.uid||t||a)||(n.datasource=e.getRef()),n}));const n=b?(0,f.J)().replace(b,j.scopedVars):e.interval,s=m.calculateInterval(d,h,n);j.scopedVars=Object.assign({},j.scopedVars,{__interval:{text:s.interval,value:s.interval},__interval_ms:{text:s.intervalMs.toString(),value:s.intervalMs}}),j.interval=s.interval,j.intervalMs=s.intervalMs,this.lastRequest=j,this.pipeToSubject((0,k.v7)(e,j),i)}catch(e){console.error("PanelQueryRunner Error",e)}}pipeToSubject(e,t){this.subscription&&this.subscription.unsubscribe();let n=e;const s=this.dataConfigSource.getDataSupport();if(s.alertStates||s.annotations){const t=this.dataConfigSource;i=e,o=(0,j.kt)().getResult(t.id),n=(0,S.a)([i,o]).pipe((0,r.z)((e=>{var t;const[n,s]=e;if(Boolean(null===(t=s.annotations)||void 0===t?void 0:t.length)||Boolean(s.alertState)){n.annotations||(n.annotations=[]);const e=n.annotations.concat(new C.i(s.annotations)),t=s.alertState;return(0,a.of)(Object.assign({},n,{annotations:e,alertState:t}))}return(0,a.of)(n)})))}var i,o;this.subscription=n.subscribe({next:e=>{this.lastResult=(0,k.zR)(e,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===d.Gu.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:d.Gu.Done})))}clearLastResult(){this.lastResult=void 0,this.subject=new i.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(e){this.lastResult=e.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(e){this.lastResult=e}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}},95160:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var s=n(97218);function a(e,t){return(0,s.x)((()=>{t&&e.resolveCancelerIfExists(t)}))}},15203:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var s=n(3448);const a=(e,t)=>{let n=1;if(null!=t&&t.structureRev&&t.series){n=t.structureRev;(0,s.nl)(e.series,t.series,s.Ch)||n++}return e.structureRev=n,e}},8343:(e,t,n)=>{"use strict";n.d(t,{F9:()=>D,zR:()=>A,v7:()=>R});var s=n(82897),a=n(53786),i=n(16313),r=n(4561),o=n(85526),l=n(2101),d=n(94514),c=n(29236),u=n(44962),h=n(7356),p=n(67305),g=n(28173),m=n(84403),f=n(42914),v=n(54316),b=n(68633),x=n(75386),y=n(18474),w=n(42200),j=n(52253),S=n(91018),C=n(95160),k=n(274),N=n(27904),O=n(31181),I=n(46782),T=n(94722);function $(e,t){var n,a,i,r;const o=t.panelData.request,l=Object.assign({},t.packets);l[null!==(n=null!==(a=e.key)&&void 0!==a?a:null===(i=e.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.refId)&&void 0!==n?n:"A"]=e;let d,c=e.state||g.Gu.Done;const u=[],h=[];for(const e in l){const t=l[e];if(t.error&&(c=g.Gu.Error,d=t.error),t.data&&t.data.length)for(const e of t.data){var p;(null===(p=e.meta)||void 0===p?void 0:p.dataTopic)!==m.w5.Annotations?u.push(e):h.push(e)}}const v=function(e,t){const n=e.range;if(!(0,s.isString)(n.raw.from)||t!==g.Gu.Streaming)return n;return Object.assign({},n,{from:f.parse(n.raw.from,!1),to:f.parse(n.raw.to,!0)})}(o,c);return{packets:l,panelData:{state:c,series:u,annotations:h,error:d,request:o,timeRange:v}}}function R(e,t,n){let m={panelData:{state:g.Gu.Loading,series:[],request:t,timeRange:t.range},packets:{}};if(!t.targets.length)return t.endTime=Date.now(),m.panelData.state=g.Gu.Done,(0,a.of)(m.panelData);const f=function(e,t,n){if(t.targets=t.targets.map((t=>{var n;return(0,j.vH)(t)?Object.assign({},null==e||null===(n=e.getDefaultQuery)||void 0===n?void 0:n.call(e,v.zj.PanelEditor),t):t})),"public-ds"===e.type)return(0,o.D)(e.query(t));for(const e of t.targets)if((0,y.Pr)(e.datasource))return S.mV.query(t);const s=n?n(t):e.query(t);return(0,o.D)(s)}(e,t,n).pipe((0,l.U)((e=>{if(!(0,s.map)(e.data))throw new Error(`Expected response data to be array, got ${typeof e.data}.`);return t.endTime=Date.now(),m=$(e,m),m.panelData})),(0,d.K)((e=>{const t="string"==typeof e?e:JSON.stringify(e);return console.error("runRequest.catchError",t),(0,a.of)(Object.assign({},m.panelData,{state:g.Gu.Error,error:(0,x.P)(e)}))})),(0,c.b)(function(e){let t=!1;return n=>{if(!n.request||t||n.request.app===v.zj.Explore)return;if(null!=k.Cj.getUrlSearchParams().editPanel)return;if(n.state!==g.Gu.Done&&n.state!==g.Gu.Error)return;const s={};for(let e=0;e<n.series.length;e++){const t=n.series[e].refId;var a,i;t&&!s[t]&&(s[t]=null!==(a=null===(i=n.series[e].meta)||void 0===i?void 0:i.isCachedResponse)&&void 0!==a&&a)}const r=Object.keys(s).length,o=Object.values(s).filter((e=>!0===e)).length,l={eventName:N.ct.DataRequest,datasourceName:e.name,datasourceId:e.id,datasourceUid:e.uid,datasourceType:e.type,panelId:n.request.panelId,dashboardId:n.request.dashboardId,dataSize:0,duration:n.request.endTime-n.request.startTime,totalQueries:r,cachedQueries:o},d=(0,T.h4)().getCurrent();d&&(l.dashboardId=d.id,l.dashboardName=d.title,l.dashboardUid=d.uid,l.folderName=d.meta.folderTitle,(0,I.iE)().isPublicDashboardView&&(l.publicDashboardUid=d.meta.publicDashboardUid)),n.series&&n.series.length>0&&(l.dataSize=n.series.length),n.error&&(l.error=n.error.message),(0,O.r_)(l),t=!0}}(e)),(0,C.V)(w.ae,t.requestId),(0,u.B)());return(0,i.T)((0,r.H)(200).pipe((0,h.h)(m.panelData),(0,p.R)(f)),f)}function P(e){const t=(0,b.SX)((0,b.g0)(e));if(t.fields&&t.fields.length)for(const e of t.fields)e.state=null;return t}function D(e){return e&&(0,s.map)(e)?e.map((e=>P(e))):[]}function A(e,t){const{series:n,annotations:s}=e;if(e.state===g.Gu.Loading&&0===n.length)return t||(t=e),Object.assign({},t,{state:g.Gu.Loading,request:e.request});const a=performance.now(),i=n.map((e=>P(e))),r=D(s),o=performance.now();return Object.assign({},e,{series:i,annotations:r,timings:{dataProcessingTime:o-a}})}},9787:(e,t,n)=>{"use strict";n.d(t,{K:()=>N,A:()=>k});var s,a,i,r,o=n(52423),l=n(68404),d=n(95148),c=n(11979),u=n(25004),h=n(16755),p=n(99500),g=n(76961),m=n(48717),f=n(42200),v=n(9085),b=n.n(v),x=n(81691),y=n(45916);function w(e){let{className:t,imageHeight:n,imageWidth:o,item:c,lastUpdated:u,onClick:m}=e;const f=(0,h.l4)(),[v,w]=(0,l.useState)(!0),S=k(c.uid,f.isLight),C=j(f,n,o),N=c.folderTitle||"General";return(0,y.jsxs)("a",{className:b()(t,C.card),href:c.url,onClick:m,children:[(0,y.jsx)("div",{className:C.imageContainer,children:v?(0,y.jsx)("img",{loading:"lazy",alt:"Dashboard preview",className:C.image,src:S,onLoad:()=>w(!0),onError:()=>w(!1)}):(0,y.jsx)("div",{className:C.imagePlaceholder,children:c.icon?(0,y.jsx)(d.Z,{src:c.icon,width:36,height:36,title:c.title}):s||(s=(0,y.jsx)(p.J,{name:"apps",size:"xl"}))})}),(0,y.jsxs)("div",{className:C.info,children:[(0,y.jsxs)("div",{className:C.infoHeader,children:[(0,y.jsxs)("div",{className:C.titleContainer,children:[(0,y.jsx)("div",{children:c.title}),(0,y.jsxs)("div",{className:C.folder,children:[a||(a=(0,y.jsx)(p.J,{name:"folder"})),N]})]}),null!==u&&(0,y.jsxs)("div",{className:C.updateContainer,children:[i||(i=(0,y.jsx)("div",{children:"Last updated"})),u?(0,y.jsx)("div",{className:C.update,children:u}):r||(r=(0,y.jsx)(x.$,{}))]})]}),(0,y.jsx)("div",{children:(0,y.jsx)(g.P,{className:C.tagList,tags:c.tags})})]})]},c.uid)}const j=(e,t,n)=>{const s=e.spacing(4);return{card:o.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${n}px + (${s} * 2))};
      width: 100%;
    `,folder:o.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      font-size: ${e.typography.size.sm};
      gap: ${e.spacing(.5)};
    `,image:o.css`
      box-shadow: ${e.shadows.z2};
      height: ${t}px;
      margin: ${e.spacing(1)} calc(${s} - 1px) 0;
      width: ${n}px;
    `,imageContainer:o.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} calc(${s} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:o.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      height: ${t}px;
      justify-content: center;
      margin: ${e.spacing(1)} ${s} 0;
      width: ${n}px;
    `,info:o.css`
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
      z-index: 1;
    `,infoHeader:o.css`
      display: flex;
      gap: ${e.spacing(1)};
      justify-content: space-between;
    `,tagList:o.css`
      justify-content: flex-start;
    `,titleContainer:o.css`
      display: flex;
      flex-direction: column;
      gap: ${e.spacing(.5)};
    `,updateContainer:o.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${e.typography.bodySmall.fontSize};
      gap: ${e.spacing(.5)};
    `,update:o.css`
      color: ${e.colors.text.secondary};
      text-align: right;
    `}};var S,C=n(94567);function k(e,t){return`/api/dashboards/uid/${e}/img/thumb/${t?"light":"dark"}`}function N(e){let{editable:t,item:n,onTagSelected:s,onToggleChecked:a,onClick:i}=e;const[r,o]=(0,l.useState)(!0),[v,b]=(0,l.useState)(null),[x,j]=(0,l.useState)(!1),N=(0,l.useRef)(null),I=(0,l.useCallback)((e=>{let{placement:t,reference:n,popper:s}=e,a=[0,0];return"bottom"===t||"top"===t?a=[0,-(n.height+s.height)/2]:"left"!==t&&"right"!==t||(a=[-(n.width+s.width)/2,0]),a}),[]),[T,$]=l.useState(null),[R,P]=l.useState(null),{styles:D,attributes:A}=(0,c.D)(T,R,{modifiers:[{name:"offset",options:{offset:I}}]}),M=(0,h.l4)(),L=k(n.uid,M.isLight),F=O(M,null==T?void 0:T.getBoundingClientRect().width,null==R?void 0:R.getBoundingClientRect().width),E=async()=>{if(j(!0),n.uid&&!v){const e=await f.ae.getDashboardByUid(n.uid),{updated:t}=e.meta;b(t?new Date(t).toLocaleString():null)}};return(0,y.jsxs)("a",{"data-testid":u.wl.components.Search.dashboardCard(n.title),className:F.card,href:n.url,ref:e=>$(e),onMouseEnter:()=>{N.current=window.setTimeout(E,500)},onMouseLeave:()=>{N.current&&window.clearTimeout(N.current),j(!1)},onMouseMove:()=>{N.current&&window.clearTimeout(N.current),N.current=window.setTimeout(E,500)},onClick:i,children:[(0,y.jsxs)("div",{className:F.imageContainer,children:[(0,y.jsx)(C.R,{className:F.checkbox,"aria-label":`Select dashboard ${n.title}`,editable:t,checked:n.checked,onClick:e=>{e.stopPropagation(),e.preventDefault(),null==a||a(n)}}),r?(0,y.jsx)("img",{loading:"lazy",className:F.image,src:L,alt:"Dashboard preview",onError:()=>o(!1)}):(0,y.jsx)("div",{className:F.imagePlaceholder,children:n.icon?(0,y.jsx)(d.Z,{src:n.icon,width:36,height:36,title:n.title}):S||(S=(0,y.jsx)(p.J,{name:"apps",size:"xl"}))})]}),(0,y.jsxs)("div",{className:F.info,children:[(0,y.jsx)("div",{className:F.title,children:n.title}),(0,y.jsx)(g.P,{displayMax:1,tags:n.tags,onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),null==s||s(e)}})]}),x&&(0,y.jsx)(m.h_,{className:F.portal,children:(0,y.jsx)("div",Object.assign({ref:P,style:D.popper},A.popper,{children:(0,y.jsx)(w,{className:F.expandedView,imageHeight:240,imageWidth:320,item:n,lastUpdated:v,onClick:i})}))})]},n.uid)}const O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e.spacing(4);return{card:o.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }
    `,checkbox:o.css`
      left: 0;
      margin: ${e.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:o.css`
      @keyframes expand {
        0% {
          transform: scale(${t/n});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${e.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
    `,image:o.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${e.shadows.z1};
      margin: ${e.spacing(1)} ${s} 0;
      width: calc(100% - (2 * ${s}));
    `,imageContainer:o.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} ${s} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:o.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${e.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${e.spacing(1)} ${s} 0;
      width: calc(100% - (2 * ${s}));
    `,info:o.css`
      align-items: center;
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: 0 ${e.spacing(2)};
      z-index: 1;
    `,portal:o.css`
      pointer-events: none;
    `,title:o.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},94567:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var s=n(68404),a=n(12310),i=n(45916);const r=(0,s.memo)((e=>{let{onClick:t,className:n,checked:s=!1,editable:r=!1,"aria-label":o}=e;return r?(0,i.jsx)("div",{onClick:t,className:n,children:(0,i.jsx)(a.X,{value:s,"aria-label":o})}):null}));r.displayName="SearchCheckbox"},43628:(e,t,n)=>{"use strict";n.d(t,{T:()=>f});var s,a=n(52423),i=n(68404),r=n(25004),o=n(16755),l=n(1129),d=n(99500),c=n(76961),u=n(63939),h=n(94567),p=n(45916);const g=r.wl.components.Search,m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new Map([["errors","info-circle"],["views","eye"]]);return t.has(e)?t.get(e):"sort-amount-down"},f=e=>{let{item:t,editable:n,onToggleChecked:a,onTagSelected:r,onClickItem:f}=e;const b=(0,o.wW)(v),x=(0,i.useCallback)(((e,t)=>{t.stopPropagation(),t.preventDefault(),r(e)}),[r]),y=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),a&&a(t)}),[t,a]),w=t.folderTitle||"General";return(0,p.jsxs)(l.Z,{"data-testid":g.dashboardItem(t.title),href:t.url,style:{minHeight:u.CN},className:b.container,onClick:f,children:[(0,p.jsx)(l.Z.Heading,{children:t.title}),(0,p.jsx)(l.Z.Figure,{align:"center",className:b.checkbox,children:(0,p.jsx)(h.R,{"aria-label":"Select dashboard",editable:n,checked:t.checked,onClick:y})}),(0,p.jsxs)(l.Z.Meta,{separator:"",children:[(0,p.jsxs)("span",{className:b.metaContainer,children:[s||(s=(0,p.jsx)(d.J,{name:"folder","aria-hidden":!0})),w]}),t.sortMetaName&&(0,p.jsxs)("span",{className:b.metaContainer,children:[(0,p.jsx)(d.J,{name:m(t.sortMetaName)}),t.sortMeta," ",t.sortMetaName]})]}),(0,p.jsx)(l.Z.Tags,{children:(0,p.jsx)(c.P,{tags:t.tags,onClick:x,getAriaLabel:e=>`Filter by tag "${e}"`})})]})},v=e=>({container:a.css`
      margin-bottom: ${e.spacing(.75)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
    `,metaContainer:a.css`
      display: flex;
      align-items: center;
      margin-right: ${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(.5)};
      }
    `,checkbox:a.css`
      margin-right: 0;
    `})},63939:(e,t,n)=>{"use strict";n.d(t,{CN:()=>a,E_:()=>p,YQ:()=>l,fy:()=>d,pW:()=>o,qi:()=>r,rh:()=>u,to:()=>c,xb:()=>h,yw:()=>i});var s=n(86112);const a=58,i={label:"A–Z",value:"alpha-asc"},r="search.sections",o=0,l="general",d="General",c="grafana.search.include.panels",u="grafana.search.layout",h={dashboard:s.o.DashDB,folder:s.o.DashFolder,home:s.o.DashHome},p=1e3},34176:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,v:()=>l});var s=n(68404),a=n(96209),i=n(36298),r=n(80795);function o(){const e=(0,s.useRef)(new a.x);return{keyboardEvents:e.current,onKeyDown:t=>{switch(t.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":e.current.next(t)}}}}function l(e,t,n){const a=(0,s.useRef)({x:0,y:-1}),[o,l]=(0,s.useState)({x:0,y:-1}),d=(0,s.useRef)();return(0,s.useEffect)((()=>{d.current=n.view.fields.url,a.current.x=0,a.current.y=-1,l(Object.assign({},a.current))}),[n]),(0,s.useEffect)((()=>{const n=e.subscribe({next:e=>{var n;switch(null==e?void 0:e.code){case"ArrowDown":a.current.y++,l(Object.assign({},a.current));break;case"ArrowUp":a.current.y=Math.max(0,a.current.y-1),l(Object.assign({},a.current));break;case"ArrowRight":t>0&&(a.current.x=Math.min(t,a.current.x+1),l(Object.assign({},a.current)));break;case"ArrowLeft":t>0&&(a.current.x=Math.max(0,a.current.x-1),l(Object.assign({},a.current)));break;case"Enter":if(!d.current)break;const e=a.current.x*t+a.current.y;if(e<0){a.current.x=0,a.current.y=0,l(Object.assign({},a.current));break}const s=null===(n=d.current.values)||void 0===n?void 0:n.get(e);s&&r.E1.push(i.u.stripBaseFromUrl(s))}}});return()=>n.unsubscribe()}),[e,t]),o}},15459:(e,t,n)=>{"use strict";n.d(t,{T:()=>s.T,_:()=>N});var s=n(43628),a=n(68404),i=n(65737),r=n(70356),o=n(80795);var l=n(52423),d=n(16755),c=n(23734),u=n(50191),h=n(34176),p=n(58411),g=n(36769),m=n(45916);function f(e){var t;let{}=e;const n=(0,d.wW)(v),s=(0,g.hD)(),i=s.useState();(0,a.useEffect)((()=>s.initStateFromUrl()),[s]);const{onKeyDown:r,keyboardEvents:o}=(0,h.A)();return(0,m.jsx)("div",{className:n.overlay,children:(0,m.jsxs)("div",{className:n.container,children:[(0,m.jsxs)("div",{className:n.searchField,children:[(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"text",placeholder:i.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:null!==(t=i.query)&&void 0!==t?t:"",onChange:e=>s.onQueryChange(e.currentTarget.value),onKeyDown:r,spellCheck:!1,className:n.input})}),(0,m.jsx)("div",{className:n.closeBtn,children:(0,m.jsx)(c.h,{name:"times",onClick:s.onCloseSearch,size:"xxl",tooltip:"Close search"})})]}),(0,m.jsx)("div",{className:n.search,children:(0,m.jsx)(p.Z,{showManage:!1,keyboardEvents:o})})]})})}const v=(0,u.B)((e=>({overlay:l.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${e.zIndex.sidemenu};
      position: fixed;
      background: ${e.colors.background.canvas};
      padding: ${e.spacing(1)};

      ${e.breakpoints.up("md")} {
        left: ${e.components.sidemenu.width}px;
        z-index: ${e.zIndex.navbarFixed+1};
        padding: ${e.spacing(2)};
      }
    `,container:l.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${e.spacing(1)};
      background: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      height: 100%;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(3)};
      }
    `,closeBtn:l.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:l.css`
      position: relative;
    `,search:l.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${e.spacing(2,0,3,0)};
    `,input:l.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${e.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${e.v1.colors.textWeak};
      }
    `})));var b=n(99510),x=n(81699),y=n(6665),w=n(22163);function j(e){var t;let{isOpen:n}=e;const s=(0,d.wW)(C),i=(0,d.wW)((e=>S(e,200))),r=(0,g.hD)(),o=r.useState(),l=(0,a.useRef)(null),u=(0,a.useRef)(null),[f,v]=(0,a.useState)(!1),{overlayProps:j,underlayProps:k}=(0,y.Ir)({isOpen:n,onClose:r.onCloseSearch},l),{dialogProps:N}=(0,b.R)({},l),{onKeyDown:O,keyboardEvents:I}=(0,h.A)();return(0,a.useEffect)((()=>r.initStateFromUrl()),[r]),(0,m.jsxs)(y.Xj,{children:[(0,m.jsx)(w.Z,{nodeRef:u,appear:!0,in:!0,timeout:200,classNames:i.underlay,children:(0,m.jsx)("div",Object.assign({ref:u,onClick:r.onCloseSearch,className:s.underlay},k))}),(0,m.jsx)(w.Z,{nodeRef:l,onEntered:()=>v(!0),appear:!0,in:!0,timeout:200,classNames:i.overlay,children:(0,m.jsx)("div",Object.assign({ref:l,className:s.overlay},j,N,{children:(0,m.jsxs)(x.MT,{contain:!0,autoFocus:!0,children:[(0,m.jsxs)("div",{className:s.searchField,children:[(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"text",placeholder:o.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:null!==(t=o.query)&&void 0!==t?t:"",onChange:e=>r.onQueryChange(e.currentTarget.value),onKeyDown:O,tabIndex:0,spellCheck:!1,className:s.input})}),(0,m.jsx)("div",{className:s.closeBtn,children:(0,m.jsx)(c.h,{name:"times",onClick:r.onCloseSearch,size:"xl",tooltip:"Close search"})})]}),f&&(0,m.jsx)("div",{className:s.search,children:(0,m.jsx)(p.Z,{showManage:!1,keyboardEvents:I})})]})}))})]})}const S=(e,t)=>{const n={transitionDuration:`${t}ms`,transitionTimingFunction:e.transitions.easing.easeInOut},s={[e.breakpoints.up("md")]:Object.assign({},n,{transitionProperty:"opacity"})},a={[e.breakpoints.up("md")]:{opacity:0}},i={[e.breakpoints.up("md")]:{opacity:1}},r={[e.breakpoints.up("md")]:Object.assign({},n,{transitionProperty:"height, width",overflow:"hidden"})},o={height:"100%",width:"100%",[e.breakpoints.up("md")]:{height:"32px",width:"50%"}},d={height:"100%",width:"100%",[e.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,l.css)(o),appearActive:(0,l.css)(r,d),appearDone:(0,l.css)(d)},underlay:{appear:(0,l.css)(a),appearActive:(0,l.css)(s,i),appearDone:(0,l.css)(i)}}},C=e=>({underlay:l.css`
      background-color: ${e.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${e.zIndex.modalBackdrop};
    `,overlay:l.css`
      background: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${e.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${e.zIndex.modal};

      ${e.breakpoints.up("md")} {
        border-radius: ${e.shape.borderRadius(2)};
        box-shadow: ${e.shadows.z3};
        left: 0;
        margin: ${e.spacing(.5,"auto",0)};
        padding: ${e.spacing(1)};
        right: 0;
      }
    `,closeBtn:l.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:l.css`
      position: relative;
    `,search:l.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${e.spacing(2,0,3,0)};
    `,input:l.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${e.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${e.colors.text.disabled};
      }
    `});var k;const N=(0,a.memo)((()=>{const[e]=function(){const e=(0,r.TH)();return[new URLSearchParams(e.search),(e,t)=>{o.E1.partial(e,t)}]}(),t="open"===e.get("search"),n=i.v.featureToggles.topnav;return t?n?(0,m.jsx)(j,{isOpen:t}):k||(k=(0,m.jsx)(f,{})):null}));N.displayName="SearchWrapper"},13330:(e,t,n)=>{"use strict";n.d(t,{Q:()=>V});var s=n(52423),a=n(68404),i=n(91742),r=n(75478),o=n(47535),l=n(16755),d=n(3520),c=n(90517),u=n(34176),h=n(27843),p=n(43917),g=n(32934),m=n(55343),f=n(65737),v=n(8910),b=n(23734),x=n(12310),y=n(99500),w=n(76961),j=n(2247),S=n(95796),C=n(8105),k=n(55278),N=n(78941),O=n(71873),I=n(31787),T=n(32654),$=n(45916);const R=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function P(e){let{name:t,explain:n,frame:s,row:i}=e;const[r,o]=(0,a.useState)(!0),[l,d]=(0,a.useState)("score"),c=(0,$.jsx)(k.H,{title:t,icon:"info",tabs:R,activeTab:l,onChangeTab:e=>{d(e.value)}});return(0,$.jsx)(N.u,{title:c,isOpen:r,onDismiss:()=>o(!1),closeOnBackdropClick:!0,closeOnEscape:!0,children:(0,$.jsxs)(O.I,{children:[l===R[0].value&&(0,$.jsx)(I.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(n,null,2),readOnly:!1}),l===R[1].value&&(0,$.jsx)("div",{children:(0,$.jsx)(T.H,{data:s,rowIndex:i})}),l===R[2].value&&(0,$.jsx)(I.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{var e,t,n,a;const r=null===(e=s.fields.find((e=>"allowed_actions"===e.name)))||void 0===e||null===(t=e.values)||void 0===t?void 0:t.get(i),o=null===(n=s.fields.find((e=>"ds_uid"===e.name)))||void 0===n||null===(a=n.values)||void 0===a?void 0:a.get(i);return JSON.stringify({dsUids:null!=o?o:[],allowedActions:null!=r?r:[]},null,2)})(),readOnly:!1})]})})}const D=(e,t,n,a,i,r,o,l,d)=>{var c,u,m;const k=[],N=e.view.fields,O=N.uid,I=N.kind;let T=0;const R=N[null===(c=e.view.dataFrame.meta)||void 0===c||null===(u=c.custom)||void 0===u?void 0:u.sortBy];R&&(T=175,R.type===h.fS.time&&(T+=25),t-=T),N.explain&&N.score&&(t-=100);let D=50;n&&a&&(D=30,k.push({id:"column-checkbox",width:D,Header:()=>n("*","*")?(0,$.jsx)("div",{className:r.checkboxHeader,children:(0,$.jsx)(b.h,{name:"check-square",onClick:i})}):(0,$.jsx)("div",{className:r.checkboxHeader,children:(0,$.jsx)(x.X,{checked:!1,onChange:t=>{t.stopPropagation(),t.preventDefault();const{view:s}=e,i=Math.min(s.length,50);for(let e=0;e<i;e++){const t=s.get(e);t.uid&&t.kind&&(n(t.kind,t.uid)||a(t.kind,t.uid))}}})}),Cell:e=>{const t=O.values.get(e.row.index),s=I?I.values.get(e.row.index):"dashboard",i=n(s,t),o=null!=t;return(0,$.jsx)("div",Object.assign({},e.cellProps,{children:(0,$.jsx)("div",{className:r.checkbox,children:(0,$.jsx)(x.X,{disabled:!o,value:i&&o,onChange:e=>{a(s,t)}})})}))},field:O}),t-=D),D=Math.max(.2*t,300),k.push({Cell:t=>{var n;let a=(0,s.cx)(r.nameCellStyle),i=N.name.values.get(t.row.index);if(null===(n=i)||void 0===n||!n.length){i=t.row.index>=e.view.dataFrame.length?"Loading...":"Missing title",a+=" "+r.missingTitleText}return(0,$.jsx)("a",Object.assign({},t.cellProps,{href:t.userProps.href,onClick:t.userProps.onClick,className:a,title:i,children:i}))},id:"column-name",field:N.name,Header:()=>(0,$.jsx)("div",{className:r.headerNameStyle,children:"Name"}),width:D}),t-=D,D=175,k.push(function(e,t,n,s){return{id:"column-type",field:null!=e?e:t,Header:"Type",Cell:n=>{var a;const i=n.row.index,r=null!==(a=null==e?void 0:e.values.get(i))&&void 0!==a?a:"dashboard";let o="apps",l="Dashboard";if(r)switch(l=r,l){case"dashboard":l="Dashboard";break;case"folder":o="folder",l="Folder";break;case"panel":o=`${S.Co.panel}`;const e=t.values.get(i);if(e){l=e;const t=f.v.panels[l];if(null!=t&&t.name)l=t.name;else switch(e){case"row":l="Row",o="bars";break;case"singlestat":l="Singlestat";break;default:o="question-circle"}}}return(0,$.jsxs)("div",Object.assign({},n.cellProps,{className:s.typeText,children:[(0,$.jsx)(y.J,{name:o,size:"sm",title:l,className:s.typeIcon}),l]}))},width:n}}(N.kind,N.panel_type,D,r)),t-=D,N.ds_uid&&l&&(D=Math.min(t/2.5,200),k.push(function(e,t,n,a,i,r){const o=(0,v.F)();return{id:"column-datasource",field:e,Header:"Data source",Cell:t=>{const l=e.values.get(t.row.index);return null!=l&&l.length?(0,$.jsx)("div",Object.assign({},t.cellProps,{className:(0,s.cx)(a),children:l.map(((e,t)=>{var s,a,l;const d=o.getInstanceSettings(e),c=null==d||null===(s=d.meta)||void 0===s||null===(a=s.info)||void 0===a||null===(l=a.logos)||void 0===l?void 0:l.small;return c?(0,$.jsxs)("span",{onClick:e=>{e.stopPropagation(),e.preventDefault(),r(d.uid)},children:[(0,$.jsx)("img",{src:c,alt:"",width:14,height:14,title:d.type,className:n}),d.name]},t):(0,$.jsx)("span",{className:i,children:e},t)}))})):null},width:t}}(N.ds_uid,D,r.typeIcon,r.datasourceItem,r.invalidDatasourceItem,l)),t-=D);const L=!d||function(e){for(let t=0;t<e.values.length;t++)if(null!=e.values.get(t))return!0;return!1}(e.view.fields.tags),F=null===(m=e.view.dataFrame.meta)||void 0===m?void 0:m.custom;var E;null!=F&&F.locationInfo&&t>0&&(D=L?Math.max(t/1.75,300):t,t-=D,k.push({Cell:e=>{var t,n;const a=(null!==(t=null===(n=N.location)||void 0===n?void 0:n.values.get(e.row.index))&&void 0!==t?t:"").split("/");return(0,$.jsx)("div",Object.assign({},e.cellProps,{className:(0,s.cx)(r.locationCellStyle),children:a.map((e=>{const t=F.locationInfo[e];return t?(0,$.jsxs)("a",{href:t.url,className:r.locationItem,children:[(0,$.jsx)(y.J,{name:A(t.kind)})," ",t.name]},e):(0,$.jsx)("span",{children:e},e)}))}))},id:"column-location",field:null!==(E=N.location)&&void 0!==E?E:N.url,Header:"Location",width:D}));if(t>0&&L&&k.push(function(e,t,n,s){return{Cell:t=>{const a=e.values.get(t.row.index);return a?(0,$.jsx)("div",Object.assign({},t.cellProps,{children:(0,$.jsx)(w.P,{className:n,tags:a,onClick:s})})):null},id:"column-tags",field:e,Header:"Tags",width:t}}(N.tags,t,r.tagList,o)),R&&T){var V;const e=null!==(V=R.display)&&void 0!==V?V:(0,p.U)({field:R,theme:f.v.theme2});k.push({Header:()=>(0,$.jsx)("div",{className:r.sortedHeader,children:(0,g.C)(R)}),Cell:t=>(0,$.jsx)("div",Object.assign({},t.cellProps,{className:r.sortedItems,children:M({sortField:R,getDisplay:e,index:t.row.index,kind:N.kind})})),id:"column-sort-field",field:R,width:T})}if(N.explain&&N.score){const t=N.score.values,n=t=>{j.Z.publish(new C.Dn({component:P,props:{name:N.name.values.get(t),explain:N.explain.values.get(t),frame:e.view.dataFrame,row:t}}))};k.push({Header:()=>(0,$.jsx)("div",{className:r.sortedHeader,children:"Score"}),Cell:e=>(0,$.jsx)("div",Object.assign({},e.cellProps,{className:r.explainItem,onClick:()=>n(e.row.index),children:t.get(e.row.index)})),id:"column-score-field",field:N.score,width:100})}return k};function A(e){return"dashboard"===e?"apps":"folder"===e?"folder":"question-circle"}function M(e){let{kind:t,sortField:n,index:s,getDisplay:a}=e;const i=n.values.get(s);return["folder","panel"].includes(t.values.get(s))&&0===i?"-":(0,m.zc)(a(i))}const L=["key"],F=["key"];function E(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const V=a.memo((e=>{var t;let{response:n,width:s,height:h,selection:p,selectionToggle:g,clearSelection:m,onTagSelected:f,onDatasourceChange:v,onClickItem:b,keyboardEvents:x}=e;const y=(0,l.wW)(z),w=(0,l.wW)(B),j=(0,l.wW)(c.V),S=(0,a.useRef)(null),[C,k]=(0,a.useState)(null),N=(0,u.v)(x,0,n),O=(0,a.useMemo)((()=>{var e;return null!=n&&null!==(e=n.view)&&void 0!==e&&e.dataFrame.fields.length?Array(n.totalRows).fill(0):[]}),[n]);(0,a.useEffect)((()=>{S.current&&S.current.resetloadMoreItemsCache(),C&&C.scrollTo(0)}),[O,C]);const I=(0,a.useMemo)((()=>{var e;return D(n,s,p,g,m,w,f,v,(null===(e=n.view)||void 0===e?void 0:e.length)>=n.totalRows)}),[n,s,w,p,g,m,f,v]),T=(0,a.useMemo)((()=>({columns:I,data:O})),[I,O]),{getTableProps:R,getTableBodyProps:P,headerGroups:A,rows:M,prepareRow:V}=(0,i.useTable)(T,i.useAbsoluteLayout),_=(0,a.useCallback)((e=>{var t;let{index:s,style:a}=e;const i=M[s];V(i);const r=null===(t=n.view.fields.url)||void 0===t?void 0:t.values.get(s);let o=y.rowContainer;return s===N.y&&(o+=" "+y.selectedRow),(0,$.jsx)("div",Object.assign({},i.getRowProps({style:a}),{className:o,children:i.cells.map(((e,t)=>(0,$.jsx)(d.p,{tableStyles:j,cell:e,columnIndex:t,columnCount:i.cells.length,userProps:{href:r,onClick:b}},t)))}))}),[M,V,null===(t=n.view.fields.url)||void 0===t?void 0:t.values,N,y,j,b]);return M.length?(0,$.jsxs)("div",Object.assign({},R(),{"aria-label":"Search results table",role:"table",children:[(0,$.jsx)("div",{children:A.map((e=>{const t=e.getHeaderGroupProps(),{key:n}=t,s=E(t,L);return(0,$.jsx)("div",Object.assign({},s,{className:y.headerRow,children:e.headers.map((e=>{const t=e.getHeaderProps(),{key:n}=t,s=E(t,F);return(0,$.jsx)("div",Object.assign({},s,{role:"columnheader",className:y.headerCell,children:e.render("Header")}),n)}))}),n)}))}),(0,$.jsx)("div",Object.assign({},P(),{children:(0,$.jsx)(o.Z,{ref:S,isItemLoaded:n.isItemLoaded,itemCount:M.length,loadMoreItems:n.loadMoreItems,children:e=>{let{onItemsRendered:t,ref:n}=e;return(0,$.jsx)(r.t7,{ref:e=>{n(e),k(e)},onItemsRendered:t,height:h-36,itemCount:M.length,itemSize:j.rowHeight,width:"100%",style:{overflow:"hidden auto"},children:_})}})}))]})):(0,$.jsx)("div",{className:y.noData,children:"No data"})}));V.displayName="SearchResultsTable";const z=e=>{const t=e.colors.emphasize(e.colors.background.primary,.03);return{noData:s.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:s.css`
      padding: ${e.spacing(1)};
    `,headerRow:s.css`
      background-color: ${e.colors.background.secondary};
      height: ${36}px;
      align-items: center;
    `,selectedRow:s.css`
      background-color: ${t};
      box-shadow: inset 3px 0px ${e.colors.primary.border};
    `,rowContainer:s.css`
      label: row;
      &:hover {
        background-color: ${t};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},B=e=>({nameCellStyle:s.css`
      border-right: none;
      padding: ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:s.css`
      padding-left: ${e.spacing(1)};
    `,typeIcon:s.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${e.v1.spacing.xxs};
      fill: ${e.colors.text.secondary};
    `,datasourceItem:s.css`
      span {
        &:hover {
          color: ${e.colors.text.link};
        }
      }
    `,missingTitleText:s.css`
      color: ${e.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:s.css`
      color: ${e.colors.error.main};
      text-decoration: line-through;
    `,typeText:s.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
    `,locationItem:s.css`
      color: ${e.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:s.css`
      text-align: right;
      padding-right: ${e.spacing(2)};
    `,sortedItems:s.css`
      text-align: right;
      padding: ${e.spacing(1)} ${e.spacing(3)} ${e.spacing(1)} ${e.spacing(1)};
    `,explainItem:s.css`
      text-align: right;
      padding: ${e.spacing(1)} ${e.spacing(3)} ${e.spacing(1)} ${e.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:s.css`
      padding-top: ${e.spacing(1)};
      padding-right: ${e.spacing(1)};
    `,checkboxHeader:s.css`
      margin-left: 2px;
    `,checkbox:s.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:s.css`
      padding-top: ${e.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},58411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>we});var s,a,i=n(52423),r=n(68404),o=n(94255),l=n(89050),d=n(16755),c=n(81691),u=n(8006),h=n(75442),p=n(65737),g=n(2843),m=n(45916);const f=e=>{let{text:t}=e;return(0,m.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:t})},v=e=>{let{requiredImageRendererPluginVersion:t}=e;return t?(0,m.jsxs)(m.Fragment,{children:["You must update the ",s||(s=(0,m.jsx)(f,{text:"Grafana image renderer plugin"}))," to version"," ",t," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."]}):(0,m.jsxs)(m.Fragment,{children:["You must install the ",a||(a=(0,m.jsx)(f,{text:"Grafana image renderer plugin"}))," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."]})},b=e=>{let{showPreviews:t,onRemove:n,topSpacing:s,bottomSpacing:a}=e;const i=(0,d.wW)(x),r=p.v.featureToggles.dashboardPreviews,o=p.v.rendererAvailable,{systemRequirements:{met:l,requiredImageRendererPluginVersion:c},thumbnailsExist:u}=p.v.dashboardPreviews,h=r&&t&&!(o&&l||u),f=c?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return(0,m.jsx)(m.Fragment,{children:h&&(0,m.jsx)("div",{className:i.wrapper,children:(0,m.jsx)(g.b,{className:i.alert,topSpacing:s,bottomSpacing:a,severity:"info",title:f,onRemove:n,children:(0,m.jsx)(v,{requiredImageRendererPluginVersion:c})})})})},x=()=>({wrapper:i.css`
      display: flex;
      justify-content: center;
    `,alert:i.css`
      max-width: 800px;
    `});var y=n(20425),w=n(36769),j=n(86112);var S=n(54761),C=n(12310),k=n(37625),N=n(23514),O=n(89496);const I=[{value:j.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:j.A.List,icon:"list-ul",ariaLabel:"View as list"}];function T(e){var t;const n=null!==(t=e.layout)&&void 0!==t?t:j.A.Folders;return n===j.A.Folders&&(e.query||e.sort||e.starred)?j.A.List:n!==j.A.Grid||p.v.featureToggles.dashboardPreviews?n:j.A.List}p.v.featureToggles.dashboardPreviews&&I.push({value:j.A.Grid,icon:"apps",ariaLabel:"Grid view"});const $=e=>{var t;let{onLayoutChange:n,onSortChange:s,onStarredFilterChange:a=(()=>{}),onTagFilterChange:i,getTagOptions:r,getSortOptions:o,sortPlaceholder:l,onDatasourceChange:c,onSetIncludePanels:h,state:g,showStarredFilter:f,hideLayout:v}=e;const b=(0,d.wW)(R),x=T(g),y=g.query?[j.A.Folders]:[];return(0,m.jsxs)("div",{className:b.actionRow,children:[(0,m.jsxs)(S.Lh,{spacing:"md",width:"auto",children:[(0,m.jsx)(O.D,{isClearable:!1,tags:g.tag,tagOptions:r,onChange:i}),p.v.featureToggles.panelTitleSearch&&(0,m.jsx)(C.X,{"data-testid":"include-panels",disabled:x===j.A.Folders,value:g.includePanels,onChange:()=>h(!g.includePanels),label:"Include panels"}),f&&(0,m.jsx)("div",{className:b.checkboxWrapper,children:(0,m.jsx)(C.X,{label:"Starred",onChange:a,value:g.starred})}),g.datasource&&(0,m.jsxs)(u.zx,{icon:"times",variant:"secondary",onClick:()=>c(void 0),children:["Datasource: ",g.datasource]})]}),(0,m.jsx)("div",{className:b.rowContainer,children:(0,m.jsxs)(S.Lh,{spacing:"md",width:"auto",children:[!v&&(0,m.jsx)(k.S,{options:I,disabledOptions:y,onChange:n,value:x}),(0,m.jsx)(N.P,{onChange:s,value:null===(t=g.sort)||void 0===t?void 0:t.value,getSortOptions:o,placeholder:l,isClearable:!0})]})})]})};$.displayName="ActionRow";const R=e=>({actionRow:i.css`
      display: none;

      ${e.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${e.spacing(2)};
        width: 100%;
      }
    `,rowContainer:i.css`
      margin-right: ${e.v1.spacing.md};
    `,checkboxWrapper:i.css`
      label {
        line-height: 1.2;
      }
    `});var P,D,A=n(53257),M=n(66015),L=n(25004),F=n(1129),E=n(75342),V=n(99500),z=n(91955),B=n(52370),_=n(15459);const W=e=>{let{section:t,selectionToggle:n,onClickItem:s,onTagSelected:a,selection:i,renderStandaloneBody:o,tags:l}=e;const u=null!=n,h=(0,d.wW)((0,r.useCallback)((e=>U(e,t.selected,u)),[t.selected,u])),[p,g]=(0,A.Z)((0,z.tT)(t.title),!1),f=(0,M.Z)((async()=>{if(!p&&!o)return Promise.resolve([]);let e=t.uid,n=t.title,s={query:"*",kind:["dashboard"],location:t.uid,sort:"name_sort",limit:1e3};t.itemsUIDs&&(s={uid:t.itemsUIDs},e=void 0,n=void 0);const a=await(0,y.O)().search(Object.assign({},s,{tags:l}));return a.view.map((t=>{var s,i,r;return{uid:t.uid,title:t.name,url:t.url,uri:t.url,type:"folder"===t.kind?j.o.DashFolder:j.o.DashDB,id:666,isStarred:!1,tags:null!==(s=t.tags)&&void 0!==s?s:[],folderUid:e||t.location,folderTitle:n||(null===(i=a.view.dataFrame.meta)||void 0===i||null===(r=i.custom)||void 0===r?void 0:r.locationInfo[t.location].name)}}))}),[p,l]),v=`section-header-label-${(0,B.L)()}`;let b=t.icon;b||(b=p?"folder-open":"folder");const x=()=>f.value?0!==f.value.length||f.loading?f.value.map((e=>{if(i&&n){const t=e.type===j.o.DashFolder?"folder":"dashboard";e=Object.assign({},e,{checked:i(t,e.uid)})}return(0,m.jsx)(_.T,{item:e,onTagSelected:a,onToggleChecked:e=>{n&&n("dashboard",e.uid)},editable:Boolean(null!=i),onClickItem:s},e.uid)})):P||(P=(0,m.jsx)(F.Z,{children:(0,m.jsx)(F.Z.Heading,{children:"No results found"})})):null;var w;return o?(0,m.jsx)("div",{className:h.folderViewResults,children:null!==(w=f.value)&&void 0!==w&&w.length||!f.loading?x():(0,m.jsx)(c.$,{className:h.spinner})}):(0,m.jsx)(E.s,{headerDataTestId:L.wl.components.Search.folderHeader(t.title),contentDataTestId:L.wl.components.Search.folderContent(t.title),isOpen:null!=p&&p,onToggle:()=>{g(!p)},className:h.wrapper,contentClassName:h.content,loading:f.loading,labelId:v,label:(0,m.jsxs)(m.Fragment,{children:[n&&i&&(0,m.jsx)("div",{className:h.checkbox,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),n&&i){var s;const e=!i(t.kind,t.uid);n(t.kind,t.uid);const a=null!==(s=f.value)&&void 0!==s?s:[];for(const t of a)i("dashboard",t.uid)!==e&&n("dashboard",t.uid)}},children:(0,m.jsx)(C.X,{value:i(t.kind,t.uid),"aria-label":"Select folder"})}),(0,m.jsx)("div",{className:h.icon,children:(0,m.jsx)(V.J,{name:b})}),(0,m.jsxs)("div",{className:h.text,children:[(0,m.jsx)("span",{id:v,children:t.title}),t.url&&"general"!==t.uid&&(0,m.jsxs)("a",{href:t.url,className:h.link,children:[(0,m.jsx)("span",{className:h.separator,children:"|"})," ",D||(D=(0,m.jsx)(V.J,{name:"folder-upload"}))," Go to folder"]})]})]}),children:f.value&&(0,m.jsx)("ul",{className:h.sectionItems,children:x()})})},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const s=e.spacing(1);return{wrapper:(0,i.cx)(i.css`
        align-items: center;
        font-size: ${e.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${e.colors.text.secondary};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${e.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:t}),sectionItems:i.css`
      margin: 0 24px 0 32px;
    `,checkbox:i.css`
      padding: 0 ${s} 0 0;
    `,icon:i.css`
      padding: 0 ${s} 0 ${n?0:s};
    `,folderViewResults:i.css`
      overflow: auto;
    `,text:i.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:i.css`
      padding: 2px 10px 0;
      color: ${e.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:i.css`
      margin-right: 6px;
    `,content:i.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:i.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var H=n(93570),q=n(59196),Z=n(38467),G=n(63939);const Q=e=>{let{selection:t,selectionToggle:n,onTagSelected:s,tags:a,hidePseudoFolders:i,onClickItem:r}=e;const o=(0,d.wW)(K),l=(0,M.Z)((async()=>{const e=[];if(!i){if(q.Vt.isSignedIn){const t=await(0,H.i)().get("api/user/stars");t.length>0&&e.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:t})}const t=await Z.Z.getDashboardOpened();t.length&&e.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:t})}e.push({title:"General",url:"/dashboards",kind:"folder",uid:G.YQ});const t=(0,y.O)(),n=await t.search({query:"*",kind:["folder"],sort:t.getFolderViewSort(),limit:1e3});for(const t of n.view)e.push({title:t.name,url:t.url,uid:t.uid,kind:t.kind});return e}),[]);return(0,m.jsx)("div",{className:o.wrapper,children:l.loading?(0,m.jsx)(c.$,{className:o.spinner}):l.value?l.value.map((e=>(0,m.jsx)("div",{"data-testid":L.wl.components.Search.sectionV2,className:o.section,children:e.title&&(0,m.jsx)(W,{selection:t,selectionToggle:n,onTagSelected:s,section:e,tags:a,onClickItem:r})},e.title))):(0,m.jsx)(g.b,{className:o.error,title:l.error?l.error.message:"Something went wrong"})})},K=e=>({wrapper:i.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${e.v1.colors.border2};
    `,section:i.css`
      display: flex;
      flex-direction: column;
      background: ${e.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${e.v1.colors.border2};
      }
    `,spinner:i.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:i.css`
      margin: ${e.spacing(4)} auto;
    `});var J=n(23734),Y=n(2024),X=n(1671);const ee=e=>{var t,n;let{results:s,onDeleteItems:a,isOpen:i,onDismiss:r}=e;const o=(0,d.wW)(te),l=Array.from(null!==(t=s.get("dashboard"))&&void 0!==t?t:[]),c=Array.from(null!==(n=s.get("folder"))&&void 0!==n?n:[]),u=c.length,h=l.length;let p,g="Do you want to delete the ";const f=1===h?"":"s",v=1===u?"":"s";u>0&&h>0?(g+=`selected folder${v} and dashboard${f}?\n`,p=`All dashboards and alerts of the selected folder${v} will also be deleted`):g+=u>0?`selected folder${v} and all ${1===u?"its":"their"} dashboards and alerts?`:`${h} selected dashboard${f}?`;return i?(0,m.jsx)(Y.s,{isOpen:i,title:"Delete",body:(0,m.jsxs)(m.Fragment,{children:[g," ",p&&(0,m.jsx)("div",{className:o.subtitle,children:p})]}),confirmText:"Delete",onConfirm:()=>{(0,X.Fd)(c,l).then((()=>{a(),r()}))},onDismiss:r}):null},te=e=>({subtitle:i.css`
    font-size: ${e.typography.fontSize}px;
    padding-top: ${e.spacing(2)};
  `});var ne=n(78941),se=n(33257),ae=n(47900);const ie=e=>{var t;let{results:n,onMoveItems:s,isOpen:a,onDismiss:i}=e;const[o,l]=(0,r.useState)(null),c=(0,d.wW)(re),h=(0,ae.iG)(),p=Array.from(null!==(t=n.get("dashboard"))&&void 0!==t?t:[]),[g,f]=(0,r.useState)(!1);return a?(0,m.jsx)(ne.u,{className:c.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:a,onDismiss:i,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:c.content,children:[(0,m.jsxs)("p",{children:["Move the ",p.length," selected dashboard",1===p.length?"":"s"," to the following folder:"]}),(0,m.jsx)(se.Es,{onChange:e=>l(e)})]}),(0,m.jsxs)(S.Lh,{justify:"center",children:[(0,m.jsx)(u.zx,{icon:g?"fa fa-spinner":void 0,variant:"primary",onClick:()=>{if(o&&p.length){var e;const t=null!==(e=o.title)&&void 0!==e?e:"General";f(!0),(0,X.ct)(p,o).then((e=>{if(e.successCount>0){const n=1===e.successCount?"":"s",s=`Dashboard${n} Moved`,a=`${e.successCount} dashboard${n} moved to ${t}`;h.success(s,a)}e.totalCount===e.alreadyInFolderCount?h.error("Error",`Dashboard already belongs to folder ${t}`):s(),f(!1),i()}))}},children:"Move"}),(0,m.jsx)(u.zx,{variant:"secondary",onClick:i,children:"Cancel"})]})]})}):null},re=e=>({modal:i.css`
      width: 500px;
    `,content:i.css`
      margin-bottom: ${e.spacing(3)};
    `});function oe(e){var t;let{items:n,folder:s,onChange:a,clearSelection:i}=e;const o=(0,d.wW)(R),l=null==s?void 0:s.canSave,c=s?l:q.Vt.hasEditPermissionInFolders,h=c,p=Array.from(null!==(t=n.get("folder"))&&void 0!==t?t:[]).find((e=>e===G.YQ)),g=c&&!p,[f,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1);return(0,m.jsxs)("div",{className:o.actionRow,"data-testid":"manage-actions",children:[(0,m.jsx)("div",{className:o.rowContainer,children:(0,m.jsxs)(S.Lh,{spacing:"md",width:"auto",children:[(0,m.jsx)(J.h,{name:"check-square",onClick:i,title:"Uncheck everything"}),(0,m.jsx)(u.zx,{disabled:!h,onClick:()=>{v(!0)},icon:"exchange-alt",variant:"secondary",children:"Move"}),(0,m.jsx)(u.zx,{disabled:!g,onClick:()=>{x(!0)},icon:"trash-alt",variant:"destructive",children:"Delete"})]})}),(0,m.jsx)(ee,{onDeleteItems:a,results:n,isOpen:b,onDismiss:()=>x(!1)}),(0,m.jsx)(ie,{onMoveItems:a,results:n,isOpen:f,onDismiss:()=>v(!1)})]})}var le=n(75478),de=n(47535),ce=n(43628),ue=n(34176);const he=r.memo((e=>{let{response:t,width:n,height:s,selection:a,selectionToggle:i,onTagSelected:o,keyboardEvents:l,onClickItem:c}=e;const u=(0,d.wW)(pe),h=(0,r.useRef)(null),[p,g]=(0,r.useState)(null),f=(0,ue.v)(l,0,t);(0,r.useEffect)((()=>{h.current&&h.current.resetloadMoreItemsCache(),p&&p.scrollTo(0)}),[t,p]);const v=(0,r.useCallback)((e=>{var n,s;let{index:r,style:l}=e;const d=null===(n=t.view.dataFrame.meta)||void 0===n?void 0:n.custom;let h="";r===f.y&&(h+=" "+u.selectedRow);const p=t.view.get(r);let g={uid:p.uid,title:p.name,url:p.url,uri:p.url,type:"folder"===p.kind?j.o.DashFolder:j.o.DashDB,id:666,isStarred:!1,tags:null!==(s=p.tags)&&void 0!==s?s:[]};if(p.location){const e=p.location.split("/")[0],t=d.locationInfo[e];t&&(g.folderUid=p.location,g.folderTitle=t.name)}if(a&&i){const e=g.type===j.o.DashFolder?"folder":"dashboard";g=Object.assign({},g,{checked:a(e,g.uid)})}return(0,m.jsx)("div",{style:l,className:h,role:"row",children:(0,m.jsx)(ce.T,{item:g,onTagSelected:o,onToggleChecked:e=>{i&&i("dashboard",e.uid)},editable:Boolean(null!=a),onClickItem:c})},p.uid)}),[t.view,f,u,o,a,i,c]);return t.totalRows?(0,m.jsx)("div",{"aria-label":"Search results list",style:{width:n},role:"list",children:(0,m.jsx)(de.Z,{ref:h,isItemLoaded:t.isItemLoaded,itemCount:t.totalRows,loadMoreItems:t.loadMoreItems,children:e=>{let{onItemsRendered:n,ref:a}=e;return(0,m.jsx)(le.t7,{ref:e=>{a(e),g(e)},onItemsRendered:n,height:s,itemCount:t.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"},children:v})}})}):(0,m.jsx)("div",{className:u.noData,style:{width:n},children:"No data"})}));he.displayName="SearchResultsCards";const pe=e=>({noData:i.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:i.css`
      border-left: 3px solid ${e.colors.primary.border};
    `});var ge=n(9787);const me=e=>{var t;let{response:n,width:s,height:a,selection:i,selectionToggle:r,onTagSelected:o,onClickItem:l,keyboardEvents:c}=e;const u=(0,d.wW)(fe),h={editable:null!=i,onToggleChecked:e=>{const t=e,n=t.type===j.o.DashFolder?"folder":"dashboard";r&&r(n,t.uid)},onTagSelected:o,onClick:l},g=null!==(t=n.totalRows)&&void 0!==t?t:n.view.length,f=n.view,v=Math.ceil(s/320),b=s/v,x=.75*(b-64)+56+8,y=Math.ceil(g/v),w=(0,ue.v)(c,v,n);return(0,m.jsx)(de.Z,{isItemLoaded:n.isItemLoaded,itemCount:g,loadMoreItems:n.loadMoreItems,children:e=>{let{onItemsRendered:t,ref:n}=e;return(0,m.jsx)(le.Ym,{ref:n,onItemsRendered:e=>{t({visibleStartIndex:e.visibleRowStartIndex*v,visibleStopIndex:e.visibleRowStopIndex*v,overscanStartIndex:e.overscanRowStartIndex*v,overscanStopIndex:e.overscanColumnStopIndex*v})},columnCount:v,columnWidth:b,rowCount:y,rowHeight:x,className:u.wrapper,innerElementType:"ul",height:a,width:s-2,children:e=>{var t,n;let{columnIndex:s,rowIndex:a,style:r}=e;const o=a*v+s;if(o>=f.length)return null;const l=f.get(o),d=null!==(t=l.kind)&&void 0!==t?t:"dashboard",c={uid:l.uid,title:l.name,url:l.url,uri:l.url,type:"folder"===d?j.o.DashFolder:j.o.DashDB,id:666,isStarred:!1,tags:null!==(n=l.tags)&&void 0!==n?n:[],checked:!!i&&i(d,l.uid)};if("panel"===d){const e=l.panel_type;if(c.icon="public/img/icons/unicons/graph-bar.svg",e){const t=p.v.panels[e];if(null!=t&&t.name){var g;const e=null===(g=t.info)||void 0===g?void 0:g.logos.small;e&&e.endsWith(".svg")&&(c.icon=e)}}}let b=u.virtualizedGridItemWrapper;return a===w.y&&s===w.x&&(b+=" "+u.selectedItem),l?(0,m.jsx)("li",{style:r,className:b,children:(0,m.jsx)(ge.K,Object.assign({},h,{item:c}),l.uid)}):null}})}})},fe=e=>({virtualizedGridItemWrapper:i.css`
    padding: 4px;
  `,wrapper:i.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:i.css`
    box-shadow: inset 1px 1px 3px 3px ${e.colors.primary.border};
  `});var ve,be,xe,ye=n(13330);const we=e=>{var t;let{showManage:n,folderDTO:s,hidePseudoFolders:a,keyboardEvents:i}=e;const p=(0,d.wW)(je),g=(0,w.hD)(),f=g.useState(),[v,x]=(0,r.useState)(function(){const e=new Map;return{items:e,isSelected:(t,n)=>{var s;return Boolean(null===(s=e.get(t))||void 0===s?void 0:s.has(n))}}}()),S=T(f),C=S===j.A.Folders,[k,N]=(0,r.useState)(Date.now());(0,o.Z)(g.onReportSearchUsage,1e3,[]);const O=(0,r.useCallback)((()=>{v.items.clear(),x(Object.assign({},v))}),[v]),I=(0,r.useCallback)(((e,t)=>{const n=v.isSelected(e,t);x(function(e,t,n,s){const a=e.items;if(s.length){const e=a.get(n);if(e){for(const n of s)t?e.add(n):e.delete(n);e.size<1&&a.delete(n)}else t&&a.set(n,new Set(s))}return{items:a,isSelected:(e,t)=>{var n;if("*"===t){var s;if("*"===e){for(const e of a.keys()){var i;if(null!==(i=a.get(e))&&void 0!==i&&i.size)return!0}return!1}return Boolean(null===(s=a.get(e))||void 0===s?void 0:s.size)}return Boolean(null===(n=a.get(e))||void 0===n?void 0:n.has(t))}}}(v,!n,e,[t]))}),[v]);return!s||f.loading||null!==(t=f.result)&&void 0!==t&&t.totalRows||f.query.length?(0,m.jsxs)(m.Fragment,{children:[Boolean(v.items.size>0)?(0,m.jsx)(oe,{items:v.items,onChange:async()=>{O(),N(Date.now()),g.onQueryChange(f.query)},clearSelection:O}):(0,m.jsx)($,{onLayoutChange:g.onLayoutChange,showStarredFilter:a,onStarredFilterChange:a?g.onStarredFilterChange:void 0,onSortChange:g.onSortChange,onTagFilterChange:g.onTagFilterChange,getTagOptions:g.getTagOptions,getSortOptions:(0,y.O)().getSortOptions,sortPlaceholder:(0,y.O)().sortPlaceholder,onDatasourceChange:g.onDatasourceChange,state:f,includePanels:f.includePanels,onSetIncludePanels:g.onSetIncludePanels}),S===j.A.Grid&&(0,m.jsx)(b,{bottomSpacing:3,showPreviews:!0,onRemove:()=>g.onLayoutChange(j.A.List)}),(()=>{const e=f.result;if(!(e&&e.totalRows||C))return f.loading&&!e?ve||(ve=(0,m.jsx)(c.$,{})):(0,m.jsxs)("div",{className:p.noResults,children:[be||(be=(0,m.jsx)("div",{children:"No results found for your query."})),xe||(xe=(0,m.jsx)("br",{})),(0,m.jsx)(u.zx,{variant:"secondary",onClick:()=>{var e;f.query&&g.onQueryChange(""),null!==(e=f.tag)&&void 0!==e&&e.length&&g.onTagFilterChange([]),f.datasource&&g.onDatasourceChange(void 0)},children:"Clear search and filters"})]});const t=n?v.isSelected:void 0;return S===j.A.Folders?s?(0,m.jsx)(W,{section:{uid:s.uid,kind:"folder",title:s.title},selection:t,selectionToggle:I,onTagSelected:g.onAddTag,renderStandaloneBody:!0,tags:f.tag,onClickItem:g.onSearchItemClicked},k):(0,m.jsx)(Q,{selection:t,selectionToggle:I,tags:f.tag,onTagSelected:g.onAddTag,hidePseudoFolders:a,onClickItem:g.onSearchItemClicked},k):(0,m.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,m.jsx)(l.Z,{children:n=>{let{width:s,height:a}=n;const r={response:e,selection:t,selectionToggle:I,clearSelection:O,width:s,height:a,onTagSelected:g.onAddTag,keyboardEvents:i,onDatasourceChange:f.datasource?g.onDatasourceChange:void 0,onClickItem:g.onSearchItemClicked};return S===j.A.Grid?(0,m.jsx)(me,Object.assign({},r)):s<800?(0,m.jsx)(he,Object.assign({},r)):(0,m.jsx)(ye.Q,Object.assign({},r))}})})})()]}):(0,m.jsx)(h.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderId=${s.id}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""})},je=e=>({searchInput:i.css`
    margin-bottom: 6px;
    min-height: ${e.spacing(4)};
  `,unsupported:i.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:i.css`
    padding: ${e.v1.spacing.md};
    background: ${e.v1.colors.bg2};
    font-style: italic;
    margin-top: ${e.v1.spacing.md};
  `})},31511:(e,t,n)=>{"use strict";n.d(t,{Jy:()=>d,Nw:()=>u,OY:()=>l,Qw:()=>o,TP:()=>c});var s=n(31181),a=n(65737),i=n(86112);const r=["error"];const o=(e,t)=>{(0,s.ff)(`${e}_viewed`,h(t))},l=(e,t)=>{(0,s.ff)(`${e}_result_clicked`,h(t))},d=(e,t)=>{(0,s.ff)(`${e}_query_submitted`,h(t))},c=(e,t)=>{let{error:n}=t,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,r);(0,s.ff)(`${e}_query_failed`,Object.assign({},h(a),{error:n}))},u=(e,t,n)=>{(0,s.ff)(`grafana_panel_inspect_${e}_${t}_clicked`,n)},h=e=>{var t,n,s,r,o,l;const d=e.layout===i.A.Grid;return{previews:Boolean(a.v.featureToggles.panelTitleSearch)?d?"on":"off":"feature_disabled",layout:e.layout,starredFilter:null!==(t=e.starred)&&void 0!==t&&t,sort:null!==(n=e.sortValue)&&void 0!==n?n:"",tagCount:null!==(s=e.tagCount)&&void 0!==s?s:0,queryLength:null!==(r=null===(o=e.query)||void 0===o?void 0:o.length)&&void 0!==r?r:0,includePanels:null!==(l=e.includePanels)&&void 0!==l&&l}}},20425:(e,t,n)=>{"use strict";n.d(t,{O:()=>R});var s=n(65737),a=n(68633),i=n(43917),r=n(32898),o=n(93570),l=n(94722);async function d(e){var t;e.query&&e.query.indexOf("folder:current")>=0&&(null!==(t=(e=Object.assign({},e,{location:await c(),query:e.query.replace("folder:current","").trim()})).query)&&void 0!==t&&t.length||(e.query="*"));return Promise.resolve(e)}async function c(){try{var e,t;let s=(0,l.h4)().getCurrent();return s||(await(n=500,new Promise((e=>setTimeout(e,n)))),s=(0,l.h4)().getCurrent()),Promise.resolve(null===(e=s)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.folderUid)}catch(e){console.error(e)}var n}const u="Loading",h="api/search-v2";class p{constructor(e){this.fallbackSearcher=e}async search(e){var t;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");return this.doSearchQuery(e)}async starred(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const s={uid:await(0,o.i)().get("api/user/stars"),query:null!==(n=e.query)&&void 0!==n?n:"*"};return this.doSearchQuery(s)}async tags(e){var t,n;const s=Object.assign({},e,{query:null!==(t=e.query)&&void 0!==t?t:"*",sort:void 0,facet:[{field:"tag"}],limit:1}),i=(await(0,o.i)().post(h,s)).frames.map((e=>(0,a.g0)(e)));if((null===(n=i[0])||void 0===n?void 0:n.name)===u)return this.fallbackSearcher.tags(e);for(const e of i)if("tag"===e.fields[0].name)return f(e);return[]}getSortOptions(){const e=[{value:"name_sort",label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(s.v.licenseInfo.enabledFeatures.analytics){for(const t of v)e.push({value:`-${t.name}`,label:`${t.display} (most)`}),e.push({value:`${t.name}`,label:`${t.display} (least)`});for(const t of b)e.push({value:`-${t.name}`,label:`${t.display} (recent)`}),e.push({value:`${t.name}`,label:`${t.display} (oldest)`})}return Promise.resolve(e)}async doSearchQuery(e){var t,n,l,c,p;e=await d(e);const f=Object.assign({},e,{query:null!==(t=e.query)&&void 0!==t?t:"*",limit:null!==(n=e.limit)&&void 0!==n?n:g}),x=(await(0,o.i)().post(h,f)).frames.map((e=>(0,a.g0)(e))),y=x.length?(0,a.g0)(x[0]):{fields:[],length:0};if(y.name===u)return this.fallbackSearcher.search(e);for(const e of y.fields)e.display=(0,i.U)({field:e,theme:s.v.theme2});null!==(l=y.meta)&&void 0!==l&&l.custom||(y.meta=Object.assign({},y.meta,{custom:{count:y.length,max_score:1}}));const w=y.meta.custom;if(w.locationInfo||(w.locationInfo={}),null!==(c=w.sortBy)&&void 0!==c&&c.length){const e=y.fields.find((e=>e.name===w.sortBy));if(e){const t=function(e){for(const t of v)if(t.name===e)return t.display;for(const t of b)if(t.name===e)return t.display;return e}(e.name);w.sortBy=t,e.name=t}}let j,S=0;const C=new r.U(y);return{totalRows:null!==(p=w.count)&&void 0!==p?p:y.length,view:C,loadMoreItems:async(e,t)=>(S=Math.max(S,t),j||(j=(async()=>{for(;S>C.dataFrame.length;){var e;const t=C.dataFrame.length;if(t>=w.count)return;const n=await(0,o.i)().post(h,Object.assign({},null!=f?f:{},{from:t,limit:m})),s=(0,a.g0)(n.frames[0]);if(!s)return void console.log("no results",s);if(s.fields.length!==C.dataFrame.fields.length)return void console.log("invalid shape",s,C.dataFrame);const i=s.length+C.dataFrame.length;for(let e=0;e<s.fields.length;e++)C.dataFrame.fields[e].values.buffer.push(...s.fields[e].values.toArray());C.dataFrame.length=i;const r=null===(e=s.meta)||void 0===e?void 0:e.custom;if(null!=r&&r.locationInfo&&w)for(const[e,t]of Object.entries(r.locationInfo))w.locationInfo[e]=t}j=void 0})()),j),isItemLoaded:e=>e<C.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const g=50,m=100;function f(e){const t=e.fields[0].values,n=e.fields[1].values,s=[];for(let a=0;a<e.length;a++)s.push({term:t.get(a),count:n.get(a)});return s}const v=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],b=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];var x=n(26300),y=n(94582);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j{constructor(e){w(this,"cache",new Map),w(this,"sortPlaceholder","Default (Relevance)"),this.parent=e}async search(e){var t,n,s;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");if(null!=e.sort)throw new Error("custom sorting is not supported yet");if(null!==(n=e.tags)&&void 0!==n&&n.length||null!==(s=e.ds_uid)&&void 0!==s&&s.length)return this.parent.search(e);const a=(await this.getCache(e.kind)).search(e.query);return{isItemLoaded:()=>!0,loadMoreItems:async(e,t)=>{},totalRows:a.length,view:a}}async getCache(e){const t=e?e.sort().join(","):"*",n=this.cache.get(t);if(n)try{return await n}catch(e){return this.cache.delete(t),new S(new r.U({name:"error",fields:[],length:0}))}const s=this.parent.search({kind:e,limit:5e3}).then((e=>new S(e.view)));return this.cache.set(t,s),s}async starred(e){return this.parent.starred(e)}async getSortOptions(){return this.parent.getSortOptions()}async tags(e){return this.parent.tags(e)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class S{constructor(e){w(this,"names",void 0),w(this,"empty",void 0),w(this,"ufuzzy",new x.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),this.full=e,this.names=this.full.fields.name.values.toArray(),this.empty=new r.U(Object.assign({},this.full.dataFrame,{fields:this.full.dataFrame.fields.map((e=>Object.assign({},e,{values:new y.G([])}))),length:0}))}search(e){if(null==e||!e.length||"*"===e)return this.full;const t=this.full.dataFrame.fields,n=this.names,s=t.map((e=>[])),a=new Set,i=this.ufuzzy.split(e);return x.Z.permute(i).map((e=>e.join(" "))).forEach((e=>{let i=this.ufuzzy.filter(n,e),r=this.ufuzzy.info(i,n,e),o=this.ufuzzy.sort(r,n,e);for(let e=0;e<o.length;e++){let n=r.idx[o[e]];if(!a.has(n)){a.add(n);for(let e=0;e<t.length;e++)s[e].push(t[e].values.get(n))}}})),this.empty.dataFrame.fields.forEach(((e,t)=>{e.values=new y.G(s[t])})),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var C=n(27843),k=n(42200),N=n(63939),O=n(86112);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T{constructor(){I(this,"locationInfo",{general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}}),I(this,"getFolderViewSort",(()=>""))}async composeQuery(e,t){var n,s;const a=await d(t);var i;"*"===a.query?1===(null===(i=a.kind)||void 0===i?void 0:i.length)&&N.xb[a.kind[0]]&&(e.type=N.xb[a.kind[0]]):null!==(n=a.query)&&void 0!==n&&n.length&&(e.query=a.query);if(a.uid)e.dashboardUID=a.uid;else if(null!==(s=a.location)&&void 0!==s&&s.length){var r,o;let t=this.locationInfo[a.location];t||(await this.doAPIQuery({type:O.o.DashFolder,limit:999}),t=this.locationInfo[a.location]),e.folderIds=[null!==(r=null===(o=t)||void 0===o?void 0:o.folderId)&&void 0!==r?r:0]}return e}async search(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const s=await this.composeQuery({limit:null!==(n=e.limit)&&void 0!==n?n:N.E_,tag:e.tags,sort:e.sort},e);return this.doAPIQuery(s)}async starred(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const s=await this.composeQuery({limit:null!==(n=e.limit)&&void 0!==n?n:N.E_,tag:e.tags,sort:e.sort,starred:e.starred},e);return this.doAPIQuery(s)}async getSortOptions(){return(await k.ae.get("/api/search/sorting")).sortOptions.map((e=>({value:e.name,label:e.displayName})))}async tags(e){return(await k.ae.get("/api/dashboards/tags")).sort(((e,t)=>t.count-e.count))}async doAPIQuery(e){var t;const n=await k.ae.get("/api/search",e),a=[],o=[],l=[],d=[],c=[],u=[],h=[];let p;for(let e of n){var g;const t="dash-folder"===e.type?"folder":"dashboard";a.push(t),o.push(e.title),l.push(e.uid),d.push(e.url),c.push(e.tags),h.push(e.sortMeta);let n=e.folderUid;n||"dashboard"!==t||(n="general"),u.push(n),null!==(g=e.sortMetaName)&&void 0!==g&&g.length&&(p=e.sortMetaName),e.folderUid&&e.folderTitle?this.locationInfo[e.folderUid]={kind:"folder",name:e.folderTitle,url:e.folderUrl,folderId:e.folderId}:"folder"===t&&(this.locationInfo[e.uid]={kind:t,name:e.title,url:e.url,folderId:e.id})}const m={fields:[{name:"kind",type:C.fS.string,config:{},values:new y.G(a)},{name:"name",type:C.fS.string,config:{},values:new y.G(o)},{name:"uid",type:C.fS.string,config:{},values:new y.G(l)},{name:"url",type:C.fS.string,config:{},values:new y.G(d)},{name:"tags",type:C.fS.other,config:{},values:new y.G(c)},{name:"location",type:C.fS.string,config:{},values:new y.G(u)}],length:o.length,meta:{custom:{count:o.length,max_score:1,locationInfo:this.locationInfo}}};null!==(t=p)&&void 0!==t&&t.length&&h.length&&(m.meta.custom.sortBy=p,m.fields.push({name:p,type:C.fS.number,config:{},values:new y.G(h)}));for(const e of m.fields)e.display=(0,i.U)({field:e,theme:s.v.theme2});const f=new r.U(m);return{totalRows:m.length,view:f,loadMoreItems:async(e,t)=>{},isItemLoaded:e=>!0}}}let $;function R(){if(!$){const e=new T,t=s.v.featureToggles.panelTitleSearch;$=t?new p(e):e,t&&location.search.includes("do-frontend-query")&&($=new j($))}return $}},36769:(e,t,n)=>{"use strict";n.d(t,{hD:()=>v});var s=n(82897),a=n(80795),i=n(62806),r=n(78130),o=n(63939),l=n(31511),d=n(20425),c=n(86112),u=n(91955);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={query:"",tag:[],sort:null,starred:!1,layout:c.A.Folders,prevSort:null,eventTrackingNamespace:"dashboard_search"},g={sort:null,starred:null,query:null,tag:null,layout:null};class m extends i.b{constructor(){super(...arguments),h(this,"updateLocation",(0,s.debounce)((e=>a.E1.partial(e,!0)),300)),h(this,"doSearchWithDebounce",(0,s.debounce)((()=>this.doSearch()),300)),h(this,"lastQuery",void 0),h(this,"onCloseSearch",(()=>{this.updateLocation(Object.assign({search:null,folder:null},g))})),h(this,"onQueryChange",(e=>{this.setStateAndDoSearch({query:e})})),h(this,"onRemoveTag",(e=>{this.setStateAndDoSearch({tag:this.state.tag.filter((t=>t!==e))})})),h(this,"onTagFilterChange",(e=>{this.setStateAndDoSearch({tag:e})})),h(this,"onAddTag",(e=>{this.state.tag&&this.state.tag.includes(e)||this.setStateAndDoSearch({tag:[...this.state.tag,e]})})),h(this,"onDatasourceChange",(e=>{this.setStateAndDoSearch({datasource:e})})),h(this,"onStarredFilterChange",(e=>{const t=e.target.checked;this.setStateAndDoSearch({starred:t})})),h(this,"onClearStarred",(()=>{this.setStateAndDoSearch({starred:!1})})),h(this,"onSortChange",(e=>{this.state.layout===c.A.Folders?this.setStateAndDoSearch({sort:e,layout:c.A.List}):this.setStateAndDoSearch({sort:e})})),h(this,"onLayoutChange",(e=>{localStorage.setItem(o.rh,e),this.state.sort&&e===c.A.Folders?this.setStateAndDoSearch({layout:e,prevSort:this.state.sort,sort:null}):this.setStateAndDoSearch({layout:e,sort:this.state.prevSort})})),h(this,"onSetIncludePanels",(e=>{this.setStateAndDoSearch({includePanels:e}),r.Z.set(o.to,e)})),h(this,"getTagOptions",(()=>(0,d.O)().tags(this.lastQuery))),h(this,"onSearchItemClicked",(e=>{var t,n;e.altKey||e.ctrlKey||e.metaKey||this.setState({tag:[],starred:!1,sort:null,query:"",folderUid:void 0}),(0,l.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:null===(t=this.state.sort)||void 0===t?void 0:t.value,query:this.state.query,tagCount:null===(n=this.state.tag)||void 0===n?void 0:n.length,includePanels:this.state.includePanels})}))}initStateFromUrl(e){const t=(0,u.vj)(a.E1.getSearchObject());f.setState(Object.assign({},t,{folderUid:e,eventTrackingNamespace:e?"manage_dashboards":"dashboard_search"})),this.doSearch()}setStateAndDoSearch(e){this.setState(e),this.updateLocation({query:0===this.state.query.length?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}getSearchQuery(){var e,t,n,s;const a={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,location:this.state.folderUid,sort:null===(e=this.state.sort)||void 0===e?void 0:e.value,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return null!==(t=a.sort)&&void 0!==t&&t.length&&!a.sort.includes("name")&&(a.kind=["dashboard","folder"]),null!==(n=a.query)&&void 0!==n&&n.length||(a.query="*",a.location||(a.kind=["dashboard","folder"])),this.state.includePanels||a.kind||(a.kind=["dashboard","folder"]),"*"!==a.query||null!==(s=a.sort)&&void 0!==s&&s.length||(a.sort="name_sort"),a}doSearch(){var e,t;const n={layout:this.state.layout,starred:this.state.starred,sortValue:null===(e=this.state.sort)||void 0===e?void 0:e.value,query:this.state.query,tagCount:null===(t=this.state.tag)||void 0===t?void 0:t.length,includePanels:this.state.includePanels};(0,l.Jy)(this.state.eventTrackingNamespace,n),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,d.O)().starred(this.lastQuery).then((e=>this.setState({result:e,loading:!1}))).catch((e=>{(0,l.TP)(this.state.eventTrackingNamespace,Object.assign({},n,{error:null==e?void 0:e.message})),this.setState({loading:!1})})):(0,d.O)().search(this.lastQuery).then((e=>this.setState({result:e,loading:!1}))).catch((e=>{(0,l.TP)(this.state.eventTrackingNamespace,Object.assign({},n,{error:null==e?void 0:e.message})),this.setState({loading:!1})}))}onReportSearchUsage(){var e,t;(0,l.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:null===(e=this.state.sort)||void 0===e?void 0:e.value,query:this.state.query,tagCount:null===(t=this.state.tag)||void 0===t?void 0:t.length,includePanels:this.state.includePanels})}}let f;function v(){if(!f){const e=localStorage.getItem(o.rh),t=null!=e?e:p.layout;let n=r.Z.getBool(o.to,!0);n&&(n=!1),f=new m(Object.assign({},p,{layout:t,includePanels:n}))}return f}},86112:(e,t,n)=>{"use strict";let s,a;n.d(t,{A:()=>a,o:()=>s}),function(e){e.DashDB="dash-db",e.DashHome="dash-home",e.DashFolder="dash-folder"}(s||(s={})),function(e){e.List="list",e.Folders="folders",e.Grid="grid"}(a||(a={}))},91955:(e,t,n)=>{"use strict";n.d(t,{L:()=>a,tT:()=>i,vj:()=>r});var s=n(63939);const a=e=>{var t;return!!e&&Boolean(e.query||(null===(t=e.tag)||void 0===t?void 0:t.length)>0||e.starred||e.sort)},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"General";return`${s.qi}.${e.toLowerCase()}`},r=e=>{const t=Object.entries(e).reduce(((e,t)=>{let[n,s]=t;return s?"tag"!==n||Array.isArray(s)?"sort"===n?Object.assign({},e,{sort:{value:s}}):Object.assign({},e,{[n]:s}):Object.assign({},e,{tag:[s]}):e}),{});if(e.folder){var n;const s=`folder:${e.folder}`;return Object.assign({},t,{query:`${s} ${(null!==(n=t.query)&&void 0!==n?n:"").replace(s,"")}`})}return Object.assign({},t)}},98669:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>b,LA:()=>u,M4:()=>j,P4:()=>l,Ub:()=>v,ZP:()=>C,aj:()=>S,cB:()=>x,dt:()=>f,e7:()=>d,gl:()=>y,pN:()=>m,s3:()=>c});var s=n(23067),a=n(64850);const i=["totalCount","perPage"];const r=(0,s.oM)({name:"serviceaccount",initialState:{serviceAccount:{},isLoading:!0,tokens:[]},reducers:{serviceAccountFetchBegin:e=>Object.assign({},e,{isLoading:!0}),serviceAccountFetchEnd:e=>Object.assign({},e,{isLoading:!1}),serviceAccountLoaded:(e,t)=>Object.assign({},e,{serviceAccount:t.payload,isLoading:!1}),serviceAccountTokensLoaded:(e,t)=>Object.assign({},e,{tokens:t.payload,isLoading:!1})}}),o=r.reducer,{serviceAccountLoaded:l,serviceAccountTokensLoaded:d,serviceAccountFetchBegin:c,serviceAccountFetchEnd:u}=r.actions,h={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.Wc.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},p=(0,s.oM)({name:"serviceaccounts",initialState:h,reducers:{serviceAccountsFetched:(e,t)=>{const n=t.payload,{totalCount:s,perPage:a}=n,r=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,i),o=Math.ceil(s/a);return Object.assign({},e,r,{totalPages:o,perPage:a,showPaging:o>1,isLoading:!1})},serviceAccountsFetchBegin:e=>Object.assign({},e,{isLoading:!0}),serviceAccountsFetchEnd:e=>Object.assign({},e,{isLoading:!1}),acOptionsLoaded:(e,t)=>Object.assign({},e,{roleOptions:t.payload}),apiKeysMigrationStatusLoaded:(e,t)=>Object.assign({},e,{apiKeysMigrated:t.payload}),showApiKeysMigrationInfoLoaded:(e,t)=>Object.assign({},e,{showApiKeysMigrationInfo:t.payload}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),stateFilterChanged:(e,t)=>Object.assign({},e,{serviceAccountStateFilter:t.payload})}}),g=p.reducer,{serviceAccountsFetchBegin:m,serviceAccountsFetchEnd:f,serviceAccountsFetched:v,acOptionsLoaded:b,apiKeysMigrationStatusLoaded:x,showApiKeysMigrationInfoLoaded:y,pageChanged:w,stateFilterChanged:j,queryChanged:S}=p.actions,C={serviceAccountProfile:o,serviceAccounts:g}},81508:(e,t,n)=>{"use strict";n.d(t,{$:()=>u,J:()=>d});var s=n(99511),a=n(43917),i=n(93570),r=n(65737),o=n(42200);class l{constructor(){}async get(e){const t=`api/storage/read/${e}`.replace("//","/");return(0,i.i)().get(t)}async list(e){let t="api/storage/list/";e&&(t+=e+"/");const n=await(0,i.i)().get(t);if(null!=n&&n.data){const e=(0,s.vP)(n);for(const t of e.fields)t.display=(0,a.U)({field:t,theme:r.v.theme2});return e}}async createFolder(e){const t=await(0,i.i)().post("/api/storage/createFolder",JSON.stringify({path:e}));var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async deleteFolder(e){const t=await(0,i.i)().post("/api/storage/deleteFolder",JSON.stringify(e));var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async deleteFile(e){const t=await(0,i.i)().post(`/api/storage/delete/${e.path}`);var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async delete(e){return e.isFolder?this.deleteFolder({path:e.path,force:!0}):this.deleteFile({path:e.path})}async upload(e,t,n){const s=new FormData;s.append("folder",e),s.append("file",t),s.append("overwriteExistingFile",String(n));const a=await fetch("/api/storage/upload",{method:"POST",body:s});let i=await a.json();return i||(i={}),i.status=a.status,i.statusText=a.statusText,200===a.status||i.err||(i.err=!0),i}async getDashboard(e){if(!r.v.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");e.endsWith(".json")||(e+=".json"),e.startsWith("content/")||(e=`content/${e}`);const t=await o.ae.get(`/api/storage/read/${e}`);return t.uid=e,delete t.id,{meta:{uid:e,slug:e,canEdit:!0,canSave:!0,canStar:!1},dashboard:t}}async write(e,t){return o.ae.post(`/api/storage/write/${e}`,t)}async getConfig(){return(0,i.i)().get("/api/storage/config")}async getOptions(e){return(0,i.i)().get(`/api/storage/options/${e}`)}}function d(e,t){const n=e.toLowerCase().trim();return t.map((e=>e.trim().toLowerCase())).includes(n)}let c;function u(){return c||(c=new l),c}},30778:(e,t,n)=>{"use strict";let s,a;n.d(t,{c:()=>a,i:()=>s}),function(e){e.Data="data",e.Config="config",e.Perms="perms",e.Export="export",e.History="history",e.AddRoot="add"}(s||(s={})),function(e){e.Save="save",e.PR="pr",e.Push="push"}(a||(a={}))},7686:(e,t,n)=>{"use strict";n.d(t,{PL:()=>r,UD:()=>g,ZP:()=>m,iI:()=>h,n2:()=>p,ot:()=>l,p3:()=>a,ql:()=>o,y$:()=>u});var s=n(23067);const a={teams:[],searchQuery:"",searchPage:1,hasFetched:!1},i=(0,s.oM)({name:"teams",initialState:a,reducers:{teamsLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,teams:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:a.searchPage}),setTeamsSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{teamsLoaded:r,setSearchQuery:o,setTeamsSearchPage:l}=i.actions,d=i.reducer,c=(0,s.oM)({name:"team",initialState:{team:{},members:[],groups:[],searchMemberQuery:""},reducers:{teamLoaded:(e,t)=>Object.assign({},e,{team:t.payload}),teamMembersLoaded:(e,t)=>Object.assign({},e,{members:t.payload}),setSearchMemberQuery:(e,t)=>Object.assign({},e,{searchMemberQuery:t.payload}),teamGroupsLoaded:(e,t)=>Object.assign({},e,{groups:t.payload})}}),{teamLoaded:u,teamGroupsLoaded:h,teamMembersLoaded:p,setSearchMemberQuery:g}=c.actions,m={teams:d,team:c.reducer}},9483:(e,t,n)=>{"use strict";n.d(t,{QC:()=>c,Vl:()=>u});var s=n(82897),a=n(2238),i=n(76093),r=n(88246),o=n(82782),l=n(35335),d=n(88364);let c;!function(e){e.lucene="lucene",e.raw="raw",e.regex="regex",e.pipe="pipe",e.distributed="distributed",e.csv="csv",e.html="html",e.json="json",e.percentEncode="percentencode",e.singleQuote="singlequote",e.doubleQuote="doublequote",e.sqlString="sqlstring",e.date="date",e.glob="glob",e.text="text",e.queryParam="queryparam"}(c||(c={}));const u=new a.B((()=>[{id:c.lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return h(t);if(t instanceof Array&&0===t.length)return"__empty__";return"("+(0,s.map)(t,(e=>'"'+h(e)+'"')).join(" OR ")+")"}},{id:c.raw,name:"raw",description:"Keep value as is",formatter:e=>{let{value:t}=e;return t}},{id:c.regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return o.Z.regexEscape(t);const n=(0,s.map)(t,o.Z.regexEscape);return 1===n.length?n[0]:"("+n.join("|")+")"}},{id:c.pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>{let{value:t}=e;return"string"==typeof t?t:t.join("|")}},{id:c.distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t)=>{let{value:n}=e;return"string"==typeof n?n:(n=(0,s.map)(n,((e,n)=>0!==n?t.name+"="+e:e)),n.join(","))}},{id:c.csv,name:"Csv",description:"Comma-separated values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?t.join(","):t}},{id:c.html,name:"HTML",description:"HTML escaping of values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?i.QX.escapeHtml(t.join(", ")):i.QX.escapeHtml(t)}},{id:c.json,name:"JSON",description:"JSON stringify valu",formatter:e=>{let{value:t}=e;return JSON.stringify(t)}},{id:c.percentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?p("{"+t.join(",")+"}"):p(t)}},{id:c.singleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{let{value:t}=e;const n=new RegExp("'","g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`'${(0,s.replace)(e,n,"\\'")}'`)).join(","):`'${(0,s.replace)(t,n,"\\'")}'`}},{id:c.doubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{let{value:t}=e;const n=new RegExp('"',"g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`"${(0,s.replace)(e,n,'\\"')}"`)).join(","):`"${(0,s.replace)(t,n,'\\"')}"`}},{id:c.sqlString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:e=>{let{value:t}=e;const n=new RegExp("'","g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`'${(0,s.replace)(e,n,"''")}'`)).join(","):`'${(0,s.replace)(t,n,"''")}'`}},{id:c.date,name:"Date",description:"Format date in different ways",formatter:e=>{var t;let{value:n,args:s}=e;const a=null!==(t=s[0])&&void 0!==t?t:"iso";switch(a){case"ms":return n;case"seconds":return`${Math.round(parseInt(n,10)/1e3)}`;case"iso":return(0,r.CQ)(parseInt(n,10)).toISOString();default:return(0,r.CQ)(parseInt(n,10)).format(a)}}},{id:c.glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)&&t.length>1?"{"+t.join(",")+"}":t}},{id:c.text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t)=>{if("string"==typeof e.text)return e.value===l.r2?l.xk:e.text;return(null==t?void 0:t.current)?(0,d.y)(t):e.value}},{id:c.queryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t)=>{const{value:n}=e,{name:s}=t;return Array.isArray(n)?n.map((e=>g(s,e))).join("&"):g(s,n)}}]));function h(e){return!1===isNaN(+e)?e:e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))}function g(e,t){return`var-${e}=${p(t)}`}},79328:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var s=n(82897),a=n(61069),i=n(8910),r=n(2633),o=n(80025),l=n(35335),d=n(96668),c=n(84455),u=n(98142),h=n(9483);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={getFilteredVariables:c.Q4,getVariables:c.ng,getVariableWithName:c._K};const m=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;p(this,"_variables",void 0),p(this,"regex",u.J7),p(this,"index",{}),p(this,"grafanaVariables",{}),p(this,"timeRange",null),p(this,"fieldAccessorCache",{}),this.dependencies=e,this._variables=[]}init(e,t){this._variables=e,this.timeRange=t,this.updateIndex()}get variables(){return(0,a.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){if(this.index=this._variables.reduce(((e,t)=>{var n;return t.current&&(t.current.isNone||((n=t.current.value)||""===n))&&(e[t.name]=t),e}),{}),this.timeRange){const e=this.timeRange.from.valueOf().toString(),t=this.timeRange.to.valueOf().toString();this.index=Object.assign({},this.index,{__from:{current:{value:e,text:e}},__to:{current:{value:t,text:t}}})}}updateTimeRange(e){this.timeRange=e,this.updateIndex()}variableInitialized(e){this.index[e.name]=e}getAdhocFilters(e){let t=[],n=(0,i.F)().getInstanceSettings(e);if(!n)return[];for(const a of this.getAdHocVariables()){var s;const i=null===(s=a.datasource)||void 0===s?void 0:s.uid;(i===n.uid||0===(null==i?void 0:i.indexOf("$"))&&this.replace(i)===e)&&(t=t.concat(a.filters))}return t}formatValue(e,t,n,s){if(n=n||{},null==e)return"";if((0,d.Kn)(n)&&t!==h.QC.queryParam)return"";if(Array.isArray(e)||"object"!=typeof e||(e=`${e}`),"function"==typeof t)return t(e,n,this.formatValue);t||(t=h.QC.glob);let a=t.split(":");a.length>1?(t=a[0],a=a.slice(1)):a=[];let i=h.Vl.getIfExists(t);i||(console.error(`Variable format ${t} not found. Using glob format as fallback.`),i=h.Vl.get(h.QC.glob));const r={value:e,args:a,text:null!=s?s:e};return i.formatter(r,n)}setGrafanaVariable(e,t){this.grafanaVariables[e]=t}setGlobalVariable(e,t){(0,a.d)("template_srv.ts","setGlobalVariable",""),this.index=Object.assign({},this.index,{[e]:{current:t}})}getVariableName(e){this.regex.lastIndex=0;const t=this.regex.exec(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}containsTemplate(e){if(!e)return!1;const t=this.getVariableName(e),n=t&&this.getVariableAtIndex(t);return null!=n}variableExists(e){return(0,a.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(e)}highlightVariablesAsHtml(e){return e&&(0,s.isString)(e)?(e=(0,s.escape)(e),this.regex.lastIndex=0,e.replace(this.regex,((e,t,n,s,a)=>this.getVariableAtIndex(t||n||a)?'<span class="template-variable">'+e+"</span>":e))):e}getAllValue(e){if(e.allValue)return e.allValue;const t=[];for(let n=1;n<e.options.length;n++)t.push(e.options[n].value);return t}getFieldAccessor(e){const t=this.fieldAccessorCache[e];return t||(this.fieldAccessorCache[e]=(0,s.property)(e))}getVariableValue(e,t,n){const s=n[e];return s?t?this.getFieldAccessor(t)(s.value):s.value:null}getVariableText(e,t,n){const s=n[e];return s?s.value===t||"string"!=typeof t?s.text:t:null}replace(e,t,n){return e?(this.regex.lastIndex=0,e.replace(this.regex,((e,s,a,i,r,c,u)=>{const p=s||a||r,g=this.getVariableAtIndex(p),m=i||u||n;if(t){const e=this.getVariableValue(p,c,t),n=this.getVariableText(p,e,t);if(null!=e)return this.formatValue(e,m,g,n)}if(!g)return e;if(m===h.QC.queryParam||(0,d.Kn)(g)){const e=o.z.get(g.type).getValueForUrl(g),t=(0,d.Kn)(g)?g.id:g.current.text;return this.formatValue(e,m,g,t)}const f=this.grafanaVariables[g.current.value];if(f)return this.formatValue(f,m,g);let v=g.current.value,b=g.current.text;if(this.isAllValue(v)&&(v=this.getAllValue(g),b=l.xk,g.allValue&&m!==h.QC.text))return this.replace(v);if(c){const e=this.getVariableValue(p,c,{[p]:{value:v,text:b}});if(null!=e)return this.formatValue(e,m,g,b)}return this.formatValue(v,m,g,b)}))):null!=e?e:""}isAllValue(e){return e===l.r2||Array.isArray(e)&&e[0]===l.r2}replaceWithText(e,t){return(0,a.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(e,t,"text")}getVariableAtIndex(e){if(e)return this.index[e]?this.index[e]:this.dependencies.getVariableWithName(e)}getAdHocVariables(){return this.dependencies.getFilteredVariables(d.Kn)}};(0,r.l)(m);const f=()=>m},20909:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var s=n(27864),a=n(44108),i=n(57337),r=(n(68404),n(54761)),o=n(37625),l=n(4645),d=n(45916);const c=[{label:"Size",value:i.k.Size,description:"Split the buckets based on size"},{label:"Count",value:i.k.Count,description:"Split the buckets based on count"}],u=[{label:"Split",value:i.k.Size,description:"Split the buckets based on size"}],h=e=>{var t,n;let{value:a,onChange:h,item:p}=e;return(0,d.jsxs)(r.Lh,{children:[(0,d.jsx)(o.S,{value:(null==a?void 0:a.mode)||i.k.Size,options:(null==a||null===(t=a.scale)||void 0===t?void 0:t.type)===s.wf.Log?u:c,onChange:e=>{h(Object.assign({},a,{mode:e}))}}),(0,d.jsx)(l.I,{value:null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"",placeholder:"Auto",onChange:e=>{h(Object.assign({},a,{value:e.currentTarget.value}))}})]})};function p(e,t,n,r){t.addCustomEditor({id:"xBuckets",path:`${e}xBuckets`,name:"X Bucket",editor:h,category:r,defaultValue:{mode:i.k.Size}}),t.addCustomEditor({id:"yBuckets",path:`${e}yBuckets`,name:"Y Bucket",editor:h,category:r,defaultValue:{mode:i.k.Size}}),t.addCustomEditor({id:"yBuckets-scale",path:`${e}yBuckets.scale`,name:"Y Bucket scale",category:r,editor:a.Y,defaultValue:{type:s.wf.Linear}})}},72828:(e,t,n)=>{"use strict";n.d(t,{xf:()=>A,Oy:()=>$,qJ:()=>P,d8:()=>R,Cj:()=>D});var s=n(2101),a=n(20410),i=n(27843),r=n(32934),o=n(55343),l=n(74658),d=n(94582),c=n(13960),u=n(37800),h=n(27864),p=n(57337),g=n(95369);const{abs:m,pow:f}=Math,v=new Map;function b(e,t,n,s){let a=[],i=s.map(g.d);for(let r=t;r<n;r++){let t=m(r),n=(0,g.O)(f(e,r),t);for(let e=0;e<s.length;e++){let o=s[e]*n,l=(o>=0&&r>=0?0:t)+(r>=i[e]?0:i[e]),d=(0,g.O)(o,l);a.push(d),v.set(d,l)}}return a}const x=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],y=b(10,-16,0,x),w=b(10,0,16,x),j=w.filter((e=>e%1==0)),S=(y.concat(w),y.concat(j)),C=1e3,k=6e4,N=60*k,O=24*N,I=365*O,T=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,C,2e3,4e3,5e3,1e4,15e3,2e4,3e4,k,2*k,4*k,5*k,6e5,9e5,20*k,30*k,N,2*N,4*N,6*N,8*N,12*N,18*N,O,2*O,3*O,4*O,5*O,6*O,7*O,10*O,15*O,30*O,45*O,60*O,90*O,180*O,I,2*I,3*I,4*I,5*I,6*I,7*I,8*I,9*I,10*I],$={id:a.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:e=>t=>t.pipe((0,s.U)((t=>$.transformer(e)(t)))),transformer:e=>t=>{const n=A(t,e);return e.keepOriginalData?[n,...t]:[n]}};function R(e){var t,n;return null!==(t=null==e||null===(n=e.meta)||void 0===n?void 0:n.custom)&&void 0!==t?t:{}}function P(e){let t=!1;for(let n of e.fields)switch(n.name){case"y":case"yMin":case"yMax":if(t)return!1;t=!0}return t}function D(e){var t,n,s,a;const c=e.frame.fields[0],u=c.values.toArray(),h=e.frame.fields.filter(((e,t)=>e.type===i.fS.number&&t>0)),g=u.length*h.length,m=new Array(g),f=new Array(g),v=new Array(g),b=h.map((e=>e.values.toArray().slice()));b.forEach(((e,t)=>{for(let n=0;n<e.length;n++)v[b.length*n+t]=e[n]}));const x=Array.from({length:h.length},((e,t)=>t));for(let e=0,t=0,n=0;e<g;t=++e%x.length)f[e]=x[t],0===t&&e>=x.length&&n++,m[e]=u[n];let y=null!=(null===(t=h[0].labels)||void 0===t?void 0:t.le)?"yMax":"y";switch(e.layout){case p.D.le:y="yMax";break;case p.D.ge:y="yMin";break;case p.D.unknown:y="y"}const w={yOrdinalDisplay:h.map((t=>(0,r.C)(t,e.frame))),yMatchWithLabel:Object.keys(null!==(n=h[0].labels)&&void 0!==n?n:{})[0]};if(w.yMatchWithLabel&&(w.yOrdinalLabel=h.map((e=>{var t,n;return null!==(t=null===(n=e.labels)||void 0===n?void 0:n[w.yMatchWithLabel])&&void 0!==t?t:""})),"le"===w.yMatchWithLabel&&(w.yMinDisplay="0.0")),null!==(s=e.unit)&&void 0!==s&&s.length||null!=e.decimals){var j;const t=(0,o.Cf)(null!==(j=e.unit)&&void 0!==j?j:"short");w.yMinDisplay&&(w.yMinDisplay=(0,o.zc)(t(0,e.decimals))),w.yOrdinalDisplay=w.yOrdinalDisplay.map((n=>{let s=+n;return Number.isNaN(s)?n:(0,o.zc)(t(s,e.decimals))}))}return{length:m.length,refId:e.frame.refId,meta:{type:l.P.HeatmapCells,custom:w},fields:[{name:"xMax",type:c.type,values:new d.G(m),config:c.config},{name:y,type:i.fS.number,values:new d.G(f),config:{unit:"short"}},{name:null!==(a=e.value)&&void 0!==a&&a.length?e.value:"Value",type:i.fS.number,values:new d.G(v),config:h[0].config,display:h[0].display}]}}function A(e,t){var n,s,a,o,g,m;let f,v,b=0;for(let t of e){t.fields.find((e=>e.type===i.fS.time))&&(b+=t.length)}let x=Array(b),y=Array(b),w=0;for(let t of e){const e=t.fields.find((e=>e.type===i.fS.time));if(!e)continue;f||(f=e);const n=e.values.toArray();for(let s of t.fields)if(s!==e&&s.type===i.fS.number){const e=s.values.toArray();for(let t=0;t<n.length;t++,w++)x[w]=n[t],y[w]=e[t];v||(v=s)}}if(!f||!v)throw"no heatmap fields found";if(!x.length||!y.length)throw"no values found";const j=null!==(n=t.xBuckets)&&void 0!==n?n:{},C=null!==(s=t.yBuckets)&&void 0!==s?s:{};if((null===(a=j.scale)||void 0===a?void 0:a.type)===h.wf.Log)throw"X axis only supports linear buckets";const k=null!==(o=null===(g=t.yBuckets)||void 0===g?void 0:g.scale)&&void 0!==o?o:{type:h.wf.Linear},N=function(e,t,n){var s,a,i,r;let o=e.length,l=null!==(s=null==n?void 0:n.xSorted)&&void 0!==s&&s,d=null!==(a=null==n?void 0:n.ySorted)&&void 0!==a&&a,c=l?e[0]:1/0,h=d?t[0]:1/0,g=l?e[o-1]:-1/0,m=d?t[o-1]:-1/0,f=null==n?void 0:n.yLog;for(let n=0;n<o;n++)l||(c=Math.min(c,e[n]),g=Math.max(g,e[n])),d||(!f||t[n]>0)&&(h=Math.min(h,t[n]),m=Math.max(m,t[n]));let v=null!==(i=null==n?void 0:n.xSize)&&void 0!==i?i:0,b=null!==(r=null==n?void 0:n.ySize)&&void 0!==r?r:0,x=null==n?void 0:n.xMode,y=null==n?void 0:n.yMode;(!Number.isFinite(v)||v<=0)&&(x=p.k.Count,v=20);(!Number.isFinite(b)||b<=0)&&(y=p.k.Count,b=10);if(x===p.k.Count){let e=(g-c)/Math.max(v-1,1),t=null!=n&&n.xTime?T:S,s=t.findIndex((t=>t>e))-1;v=t[Math.max(s,0)]}if(y===p.k.Count){let e=(m-h)/Math.max(b-1,1),t=null!=n&&n.yTime?T:S,s=t.findIndex((t=>t>e))-1;b=t[Math.max(s,0)]}let w=null!=n&&n.xCeil?e=>(0,u.UO)(e,v):e=>(0,u.mB)(e,v),j=null!=n&&n.yCeil?e=>(0,u.UO)(e,b):e=>(0,u.mB)(e,b);if(f){var C;b=1/(null!==(C=null==n?void 0:n.ySize)&&void 0!==C?C:1);let e=2===f?Math.log2:Math.log10;j=null!=n&&n.yCeil?t=>(0,u.UO)(e(t),b):t=>(0,u.mB)(e(t),b)}let k=w(c),N=w(g),O=j(h),I=j(m),$=Math.round((N-k)/v)+1,R=Math.round((I-O)/b)+1,[P,D,A]=function(e,t,n,s,a,i,r){const o=e*t,l=new Array(o),d=new Array(o),c=new Array(o);for(let e=0,u=0,h=n;e<o;u=++e%t)c[e]=0,d[e]=r?r**(a+u*i):a+u*i,0===u&&e>=t&&(h+=s),l[e]=h;return[l,d,c]}($,R,k,v,O,b,f);for(let n=0;n<o;n++){if(f&&t[n]<=0)continue;A[(w(e[n])-k)/v*R+(j(t[n])-O)/b]++}return{x:P,y:D,count:A}}(x,y,{xSorted:!0,xTime:f.type===i.fS.time,xMode:j.mode,xSize:j.mode===p.k.Size?(0,c.iX)((0,c.RA)(null!==(m=j.value)&&void 0!==m?m:"")):j.value?+j.value:void 0,yMode:C.mode,ySize:C.value?+C.value:void 0,yLog:(null==k?void 0:k.type)===h.wf.Log?null==k?void 0:k.log:void 0});return{length:N.x.length,name:(0,r.C)(v),meta:{type:l.P.HeatmapCells},fields:[{name:"xMin",type:f.type,values:new d.G(N.x),config:f.config},{name:"yMin",type:i.fS.number,values:new d.G(N.y),config:Object.assign({},v.config,{custom:{scaleDistribution:k}})},{name:"Count",type:i.fS.number,values:new d.G(N.count),config:{unit:"short"}}]}}},57337:(e,t,n)=>{"use strict";let s,a;n.d(t,{D:()=>a,k:()=>s}),function(e){e.Size="size",e.Count="count"}(s||(s={})),function(e){e.le="le",e.ge="ge",e.unknown="unknown",e.auto="auto"}(a||(a={}))},81689:(e,t,n)=>{"use strict";n.d(t,{Ii:()=>i,JJ:()=>a,ac:()=>r});var s=n(80622);let a,i,r;!function(e){e.Prepare="prepare",e.Calculate="calculate",e.Modify="modify"}(a||(a={})),function(e){e.Heading="heading",e.Distance="distance",e.Area="area"}(i||(i={})),function(e){e.AsLine="asLine",e.LineBuilder="lineBuilder"}(r||(r={}));a.Prepare,s.q.Auto},71383:(e,t,n)=>{"use strict";n.d(t,{Lb:()=>p,Lp:()=>u,N7:()=>m});var s=n(68208),a=n(54428),i=n(18788),r=n(61331),o=n(12527),l=n(27843),d=n(94582),c=n(81689);function u(e){const t=[];for(const n of e.values.toArray())n&&t.push(p(n));return new a.Z(t)}function h(e){const t=new Array(e.length);if(e.length>1){let n=g(e[0]);for(let s=1;s<e.length;s++){let a=g(e[s]);if(n&&a){let e=180*Math.atan2(a[0]-n[0],a[1]-n[1])/Math.PI;e<0&&(e+=360),t[s-1]=t[s]=e}}}else t.fill(0);return t}function p(e){return e instanceof i.Z?e.getCoordinates():(0,s.qg)(e.getExtent())}function g(e){if(e)return(0,r.bU)(p(e))}function m(e,t){var n,s;const a=e.values.toArray(),i=new Array(e.values.length),r=null!==(n=t.calc)&&void 0!==n?n:c.Ii.Heading,u=null!==(s=t.field)&&void 0!==s?s:r;switch(r){case c.Ii.Area:for(let e=0;e<a.length;e++){const t=a[e];t&&(i[e]=(0,o.bg)(t))}return{name:u,type:l.fS.number,config:{unit:"areaM2"},values:new d.G(i)};case c.Ii.Distance:for(let e=0;e<a.length;e++){const t=a[e];t&&(i[e]=(0,o.xA)(t))}return{name:u,type:l.fS.number,config:{unit:"lengthm"},values:new d.G(i)};case c.Ii.Heading:default:return{name:u,type:l.fS.number,config:{unit:"degree"},values:new d.G(h(a))}}}},97208:(e,t,n)=>{"use strict";n.d(t,{TQ:()=>l,ZP:()=>c,eT:()=>d,oX:()=>o});var s=n(23067),a=n(46782);const i={users:[],searchQuery:"",searchPage:1,canInvite:!a.ZP.externalUserMngLinkName,externalUserMngInfo:a.ZP.externalUserMngInfo,externalUserMngLinkName:a.ZP.externalUserMngLinkName,externalUserMngLinkUrl:a.ZP.externalUserMngLinkUrl,hasFetched:!1},r=(0,s.oM)({name:"users",initialState:i,reducers:{usersLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,users:t.payload}),setUsersSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:i.searchPage}),setUsersSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{setUsersSearchQuery:o,setUsersSearchPage:l,usersLoaded:d}=r.actions,c={users:r.reducer}},80025:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});const s=new(n(2238).B)},84145:(e,t,n)=>{"use strict";n.d(t,{KJ:()=>v,M6:()=>m,Ue:()=>b,Z$:()=>x,ku:()=>f,m2:()=>g});var s=n(82897),a=n(42833),i=n(68288),r=n(96668),o=n(90155),l=n(31835),d=n(84455),c=n(47908),u=n(98142),h=n(7429);const p="Filters",g=e=>async(t,n)=>{let s=w(e,n());if(!s&&(t(y(e)),s=w(e,n()),!s))return;const a=s.filters.findIndex((t=>t.key===e.key&&t.value===e.value));if(-1===a){const{value:n,key:a,operator:i}=e,r={value:n,key:a,operator:i,condition:""};return await t(v((0,u.yQ)(s),r))}const i=Object.assign({},s.filters[a],{operator:e.operator});return await t(m((0,u.yQ)(s),{index:a,filter:i}))},m=(e,t)=>async(n,s)=>{const a=(0,d.E0)(e,s());n((0,l.mb)(e.rootStateKey,(0,h.e_)((0,u.Y6)(a,t)))),await n((0,o.MB)((0,u.yQ)(a),!0))},f=(e,t)=>async(n,s)=>{const a=(0,d.E0)(e,s());n((0,l.mb)(e.rootStateKey,(0,h.DO)((0,u.Y6)(a,t)))),await n((0,o.MB)((0,u.yQ)(a),!0))},v=(e,t)=>async(n,s)=>{const a=(0,d.E0)(e,s());n((0,l.mb)(e.rootStateKey,(0,h.QL)((0,u.Y6)(a,t)))),await n((0,o.MB)((0,u.yQ)(a),!0))},b=(e,t)=>async(n,s)=>{const a=(0,d.E0)(e,s());n((0,l.mb)(e.rootStateKey,(0,h.aM)((0,u.Y6)(a,t)))),await n((0,o.MB)((0,u.yQ)(a),!0))},x=(e,t)=>async(n,s)=>{const r=(0,d.E0)(e,s());n((0,l.mb)(e.rootStateKey,(0,c.Pl)((0,u.Y6)(r,{propName:"datasource",propValue:t}))));const o=await(0,a.ak)().get(t),h=null!=o&&o.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";n((0,l.mb)(e.rootStateKey,(0,i.z7)({infoText:h})))},y=e=>(t,n)=>{const a=(0,d.S_)(n()),i=Object.assign({},(0,s.cloneDeep)(h.Js),{datasource:e.datasource,name:p,id:p,rootStateKey:a}),r=(0,d.Eo)(a,n()),o={type:"adhoc",id:i.id,rootStateKey:a};t((0,l.mb)(a,(0,c.VN)((0,u.Y6)(o,{global:!1,model:i,index:r}))))},w=(e,t)=>{const n=(0,d.S_)(t),s=(0,d.AE)(n,t);return Object.values(s.variables).find((t=>{var n;return(0,r.Kn)(t)&&(null===(n=t.datasource)||void 0===n?void 0:n.uid)===e.datasource.uid}))}},67684:(e,t,n)=>{"use strict";n.d(t,{F:()=>C});var s=n(68404),a=n(65335),i=n(89089),r=n(99500),o=n(42833),l=n(45916);const d=e=>{let{datasource:t,onChange:n,disabled:s,filterKey:a,getTagKeysOptions:r}=e;const o=()=>p(t,r);return null===a?(0,l.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,l.jsx)(i.V,{disabled:s,className:"query-segment-key",Component:h,value:a,onChange:n,loadOptions:o,inputMinWidth:90})}):(0,l.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,l.jsx)(i.V,{disabled:s,className:"query-segment-key",value:a,onChange:n,loadOptions:()=>g(t,r),inputMinWidth:90})})},c="-- remove filter --",u={label:c,value:c},h=(0,l.jsx)("span",{className:"gf-form-label query-part","aria-label":"Add Filter",children:(0,l.jsx)(r.J,{name:"plus"})}),p=async(e,t)=>{const n=await(0,o.ak)().get(e);if(!n||!n.getTagKeys)return[];return(await n.getTagKeys(t)).map((e=>({label:e.text,value:e.text})))},g=async(e,t)=>{const n=await p(e,t);return[u,...n]},m=e=>{let{datasource:t,disabled:n,onChange:s,filterKey:a,filterValue:r,placeHolder:o}=e;return(0,l.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,l.jsx)(i.V,{className:"query-segment-value",disabled:n,placeholder:o,value:r,onChange:s,loadOptions:()=>f(t,a)})})},f=async(e,t)=>{const n=await(0,o.ak)().get(e);if(!n||!n.getTagValues)return[];return(await n.getTagValues({key:t})).map((e=>({label:e.text,value:e.text})))},v=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),b=e=>{let{value:t,disabled:n,onChange:s}=e;return(0,l.jsx)(a.X,{className:"query-segment-operator",value:t,disabled:n,options:v,onChange:s})},x=e=>{let{datasource:t,filter:{key:n,operator:s,value:a},onKeyChange:i,onOperatorChange:r,onValueChange:o,placeHolder:c,getTagKeysOptions:u,disabled:h}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{disabled:h,datasource:t,filterKey:n,onChange:i,getTagKeysOptions:u}),(0,l.jsx)("div",{className:"gf-form",children:(0,l.jsx)(b,{disabled:h,value:s,onChange:r})}),(0,l.jsx)(m,{disabled:h,datasource:t,filterKey:n,filterValue:a,onChange:o,placeHolder:c})]})},y=e=>{let{datasource:t,appendBefore:n,onCompleted:a,getTagKeysOptions:i}=e;const[r,o]=(0,s.useState)(null),[u,h]=(0,s.useState)("="),p=(0,s.useCallback)((e=>{var t;e.value===c?o(null):o(null!==(t=e.value)&&void 0!==t?t:"")}),[o]),g=(0,s.useCallback)((e=>{var t;return h(null!==(t=e.value)&&void 0!==t?t:"")}),[h]),m=(0,s.useCallback)((e=>{var t;a({value:null!==(t=e.value)&&void 0!==t?t:"",operator:u,condition:"",key:r}),o(null),h("=")}),[a,u,r]);return null===r?(0,l.jsx)(d,{datasource:t,filterKey:r,onChange:p,getTagKeysOptions:i}):(0,l.jsxs)(s.Fragment,{children:[n,(0,l.jsx)(x,{datasource:t,filter:{key:r,value:"",operator:u,condition:""},placeHolder:"select value",onKeyChange:p,onOperatorChange:g,onValueChange:m,getTagKeysOptions:i})]},"filter-builder")},w=e=>{let{label:t}=e;return(0,l.jsx)("div",{className:"gf-form",children:(0,l.jsx)("span",{className:"gf-form-label query-keyword",children:t})})};var j;function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends s.PureComponent{constructor(){super(...arguments),S(this,"onChange",((e,t)=>n=>{const{filters:s}=this.props,{value:a}=n;return n.value===c?this.props.removeFilter(e):this.props.changeFilter(e,Object.assign({},s[e],{[t]:a}))})),S(this,"appendFilterToVariable",(e=>{this.props.addFilter(e)}))}render(){const{filters:e,disabled:t}=this.props;return(0,l.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e,t),!t&&(0,l.jsx)(y,{datasource:this.props.datasource,appendBefore:e.length>0?j||(j=(0,l.jsx)(w,{label:"AND"})):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions})]})}renderFilters(e,t){return 0===e.length&&t?(0,l.jsx)(a.X,{disabled:t,value:"No filters",options:[],onChange:()=>{}}):e.reduce(((e,n,s)=>(e.length>0&&e.push((0,l.jsx)(w,{label:"AND"},`condition-${s}`)),e.push(this.renderFilterSegments(n,s,t)),e)),[])}renderFilterSegments(e,t,n){return(0,l.jsx)(s.Fragment,{children:(0,l.jsx)(x,{disabled:n,datasource:this.props.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value"),getTagKeysOptions:this.props.getTagKeysOptions})},`filter-${t}`)}}},7429:(e,t,n)=>{"use strict";n.d(t,{DO:()=>c,Js:()=>o,QL:()=>d,aM:()=>h,e_:()=>u,jo:()=>p});var s=n(23067),a=n(72379),i=n(84455),r=n(7856);const o=Object.assign({},a.Eg,{type:"adhoc",datasource:null,filters:[]}),l=(0,s.oM)({name:"templating/adhoc",initialState:r.s,reducers:{filterAdded:(e,t)=>{const n=(0,i.ir)(e,t.payload.id);"adhoc"===n.type&&n.filters.push(t.payload.data)},filterRemoved:(e,t)=>{const n=(0,i.ir)(e,t.payload.id);if("adhoc"!==n.type)return;const s=t.payload.data;n.filters.splice(s,1)},filterUpdated:(e,t)=>{const n=(0,i.ir)(e,t.payload.id);if("adhoc"!==n.type)return;const{filter:s,index:a}=t.payload.data;n.filters[a]=s},filtersRestored:(e,t)=>{const n=(0,i.ir)(e,t.payload.id);"adhoc"===n.type&&(n.filters=t.payload.data)}}}),{filterAdded:d,filterRemoved:c,filterUpdated:u,filtersRestored:h}=l.actions,p=l.reducer},35335:(e,t,n)=>{"use strict";n.d(t,{BH:()=>r,QX:()=>o,UY:()=>s,r2:()=>i,xk:()=>a});const s="00000000-0000-0000-0000-000000000000",a="All",i="$__all",r="None",o=""},93707:(e,t,n)=>{"use strict";n.d(t,{R:()=>u,z:()=>c});var s=n(42066),a=n(68404),i=n(25004),r=n(16755),o=n(93194),l=n(31531),d=n(45916);const c="Grafana-LegacyVariableQueryEditor",u=e=>{let{onChange:t,query:n}=e;const c=(0,r.wW)(l.w),[u,h]=(0,a.useState)(n),p=(0,a.useCallback)((e=>{t(e.currentTarget.value,e.currentTarget.value)}),[t]),g=(0,s.Me)();return(0,d.jsx)(o.K,{id:g,rows:2,value:u,onChange:e=>{h(e.currentTarget.value)},onBlur:p,placeholder:"Metric name or tags query",required:!0,"aria-label":i.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:c.textarea})};u.displayName=c},26830:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var s=n(52423),a=(n(68404),n(16755)),i=n(58101),r=n(45916);const o=["className"];function l(e){let{className:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);const l=(0,a.wW)(d);return(0,r.jsx)(i.D,Object.assign({},n,{className:(0,s.cx)(l.legend,t)}))}function d(e){return{legend:(0,s.css)({marginTop:e.spacing(3),marginBottom:e.spacing(1)})}}},63350:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var s=n(52423),a=(n(68404),n(16755)),i=n(65678),r=n(70917),o=n(52370),l=n(45916);function d(e){let{name:t,description:n,value:s,options:d,onChange:u,testId:h,width:p}=e;const g=(0,a.wW)(c),m=`variable-select-input-${t}-${(0,o.L)()}`;return(0,l.jsx)(i.g,{label:t,description:n,htmlFor:m,children:(0,l.jsx)("div",{"data-testid":h,children:(0,l.jsx)(r.Ph,{inputId:m,onChange:u,value:s,width:null!=p?p:30,options:d,className:g.selectContainer})})})}function c(e){return{selectContainer:s.css`
      margin-right: ${e.spacing(.5)};
    `}}},31531:(e,t,n)=>{"use strict";n.d(t,{W:()=>d,w:()=>c});var s=n(52423),a=n(42066),i=(n(68404),n(16755)),r=n(65678),o=n(93194),l=n(45916);function d(e){let{value:t,name:n,description:s,placeholder:d,onChange:u,onBlur:h,ariaLabel:p,required:g,width:m,testId:f}=e;const v=(0,i.wW)(c),b=(0,a.Me)();return(0,l.jsx)(r.g,{label:n,description:s,htmlFor:b,children:(0,l.jsx)(o.K,{id:b,rows:2,value:t,onChange:u,onBlur:h,placeholder:d,required:g,"aria-label":p,cols:m,className:v.textarea,"data-testid":f})})}function c(e){return{textarea:s.css`
      white-space: pre-wrap;
      min-height: ${e.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${e.spacing(.75,1)};
      width: inherit;
    `}}},98841:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var s=n(42066),a=(n(68404),n(65678)),i=n(4645),r=n(45916);function o(e){let{value:t,name:n,placeholder:o="",onChange:l,testId:d,width:c,required:u,onBlur:h,grow:p,description:g,invalid:m,error:f,maxLength:v}=e;const b=(0,s.Me)(n);return(0,r.jsx)(a.g,{label:n,description:g,invalid:m,error:f,htmlFor:b,children:(0,r.jsx)(i.I,{type:"text",id:b,placeholder:o,value:t,onChange:l,onBlur:h,width:p?void 0:null!=c?c:30,"data-testid":d,maxLength:v,required:u})})}},68288:(e,t,n)=>{"use strict";n.d(t,{PF:()=>a,PV:()=>p,QR:()=>g,Sg:()=>h,Yo:()=>o,gl:()=>r,qe:()=>c,wJ:()=>d,y8:()=>l,z7:()=>u});var s=n(23067);const a={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,s.oM)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(e,t)=>{e.name=t.payload.name,e.id=t.payload.id},variableEditorUnMounted:(e,t)=>a,changeVariableNameSucceeded:(e,t)=>{e.name=t.payload.data.newName,delete e.errors.name,e.isValid=0===Object.keys(e.errors).length},changeVariableNameFailed:(e,t)=>{e.name=t.payload.newName,e.errors.name=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},addVariableEditorError:(e,t)=>{e.errors[t.payload.errorProp]=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},removeVariableEditorError:(e,t)=>{delete e.errors[t.payload.errorProp],e.isValid=0===Object.keys(e.errors).length},changeVariableEditorExtended:(e,t)=>{e.extended=Object.assign({},e.extended,t.payload)},cleanEditorState:()=>a}}),r=i.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:l,variableEditorMounted:d,variableEditorUnMounted:c,changeVariableEditorExtended:u,addVariableEditorError:h,removeVariableEditorError:p,cleanEditorState:g}=i.actions},46076:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var s=n(2633),a=n(80025);function i(e){const t={},n=(0,s.J)().getVariables();for(let s=0;s<n.length;s++){const i=n[s];if(e&&void 0!==e[i.name]){if(e[i.name].skipUrlSync)continue;t["var-"+i.name]=e[i.name].value}else{if(i.skipUrlSync)continue;t["var-"+i.name]=a.z.get(i.type).getValueForUrl(i)}}return t}},96668:(e,t,n)=>{"use strict";n.d(t,{$7:()=>f,Ju:()=>h,Kn:()=>r,Kr:()=>c,NX:()=>m,R:()=>u,U4:()=>l,VC:()=>o,X7:()=>g,Xh:()=>i,d7:()=>p,eL:()=>d});var s=n(58193),a=n(93707);const i=e=>"query"===e.type,r=e=>"adhoc"===e.type,o=e=>"constant"===e.type,l=e=>"multi"in e,d=e=>"options"in e,c=e=>"current"in e;const u=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),h=e=>{if(!e.variables)return!1;if(e.variables.getType()!==s.j2.Standard)return!1;const t=e.variables;return"toDataQuery"in t&&Boolean(t.toDataQuery)},p=e=>{if(!e.variables)return!1;if(e.variables.getType()!==s.j2.Custom)return!1;const t=e.variables;return"query"in t&&"editor"in t&&Boolean(t.query)&&Boolean(t.editor)},g=e=>!!e.variables&&e.variables.getType()===s.j2.Datasource;function m(e,t){return!!e&&(e.displayName===a.z||u(t))}function f(e,t){return!!e&&(e.displayName!==a.z&&(g(t)||h(t)||p(t)))}},30486:(e,t,n)=>{"use strict";n.d(t,{Kf:()=>a,iV:()=>r,j4:()=>o});var s=n(23067);const a={usages:[],usagesNetwork:[]},i=(0,s.oM)({name:"templating/inspect",initialState:a,reducers:{initInspect:(e,t)=>{const{usages:n,usagesNetwork:s}=t.payload;e.usages=n,e.usagesNetwork=s}}}),r=i.reducer,{initInspect:o}=i.actions},3612:(e,t,n)=>{"use strict";n.d(t,{MJ:()=>u,GQ:()=>d,V:()=>m,Of:()=>c,PQ:()=>v,dH:()=>j,Yg:()=>f,Rv:()=>w,vI:()=>x});var s=n(66827);var a=n(38591),i=n(11848),r=(n(37437),n(80025)),o=n(96668),l=n(98142);const d=e=>{const t=[];for(const n of e)t.push({id:n.id,label:`${n.id}`});return t},c=(e,t)=>e.filter((e=>t.some((t=>t.from===e.id||t.to===e.id)))),u=e=>{const t=[];for(const n of e)for(const s of e){if(n===s)continue;r.z.get(n.type).dependsOn(n,s)&&t.push({from:n.id,to:s.id})}return t};function h(e){const t=(0,l.a9)(e);if(!t)return;return t.slice(1).find((e=>void 0!==e))}const p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},g=(e,t,n)=>{const s=Object.keys(t.value).reduce(((n,s)=>{const a=t.value[s];if(!a||"string"!=typeof a)return n;const i=p[s]?p[s].find((t=>t.test(e))):void 0;let r=(0,l.QI)(a,e);return"repeat"===s&&a===e&&(r=!0),!i&&r&&(n=Object.assign({},n,{[s]:a})),n}),{}),a=Object.keys(t.value).reduce(((n,s)=>{const a=t.value[s];if(a&&"object"==typeof a&&Object.keys(a).length){let i=a.title||a.name||a.id||s;Array.isArray(t.value)&&"panels"===t.key&&(i=`${i}[${a.id}]`);const r=g(e,{key:s,value:a},{});Object.keys(r).length&&(n=Object.assign({},n,{[i]:r}))}return n}),{});return(Object.keys(s).length||Object.keys(a).length)&&(n=Object.assign({},n,s,a)),n},m=(e,t)=>{if(!t)return{unUsed:[],usages:[]};const n=[];let s=[];const a=t.getSaveModelClone();for(const t of e){const e=t.id,i=g(e,{key:"model",value:a},{});Object.keys(i).length||(0,o.Kn)(t)||n.push(t),Object.keys(i).length&&s.push({variable:t,tree:i})}return{unUsed:n,usages:s}};async function f(e,t){return new Promise(((n,s)=>{setTimeout((()=>{try{const s=function(e,t){if(!t)return[];let n=[];const s=t.getSaveModelClone(),a=((e,t)=>{l.J7.lastIndex=0;const n=[],s=(0,i.Xh)(t,2).match(l.J7);if(!s)return n;for(const t of s){if(!t)continue;if(-1!==t.indexOf("$__"))continue;if(-1!==t.indexOf("${__"))continue;if(-1!==t.indexOf("$hashKey"))continue;const s=h(t);e.some((e=>e.id===s))||n.find((e=>e===s))||s&&n.push(s)}return n})(e,s);for(const e of a){const t=g(e,{key:"model",value:s},{});if(Object.keys(t).length){const s={id:e,name:e};n.push({variable:s,tree:t})}}return n}(e,t);n(x(s))}catch(e){s(e)}}),200)}))}function v(e,t,n){const a=function(e,t){const n=new Set;for(const s of e)n.add(t(s));return n}(t.descendants(e),(e=>e.name));a.add(s.W.includeVars);for(const t of e)a.add(t);return function(e,t){const n=[];for(const s of e)t[s]&&n.push(...t[s]);return new Set(n)}([...a],n)}const b=(e,t)=>{const{id:n,value:s}=t,{nodes:a,edges:i}=e;if(s&&"string"==typeof s){const r=`${t.id}-${s}`;return a.push({id:r,label:s}),i.push({from:r,to:n}),e}if(s&&"object"==typeof s){const r=Object.keys(s);for(const o of r){const r=`${t.id}-${o}`;a.push({id:r,label:o}),i.push({from:r,to:n}),e=b(e,{id:r,value:s[o]})}return e}return e},x=e=>{const t=[];for(const n of e){const{variable:e,tree:s}=n,a={variable:e,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};t.push(b(a,{id:"dashboard",value:s}))}return t},y=e=>Object.values(e).reduce(((e,t)=>"object"==typeof t?e+y(t):e+1),0),w=(e,t)=>{const n=t.find((t=>t.variable.id===e));return n?y(n.tree):0};function j(e){const t={};for(const i of e){var n,s;const e=(0,a.J)(i),r=[...[...e.matchAll(/"repeat":"([^"]+)"/g)].map((e=>e[1])),...null!==(n=null===(s=e.match(l.J7))||void 0===s?void 0:s.map((e=>h(e))))&&void 0!==n?n:[]];for(const e of r)e in t?t[e].add(i.id):t[e]=new Set([i.id])}return t}},14830:(e,t,n)=>{"use strict";n.d(t,{XJ:()=>S,nn:()=>v,yy:()=>d,Ew:()=>b,cv:()=>C,aN:()=>f,iQ:()=>x,_M:()=>m,ss:()=>w,wF:()=>j,Ug:()=>y});var s=n(23067),a=n(82897);const i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.reduce(((e,t)=>t(e)),e)};var r=n(35335),o=n(96668),l=n(98142);const d={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},c=e=>{if(!Array.isArray(e.options))return e.options=[],e;const t=(n=e.selectedValues,Array.isArray(n)?n.reduce(((e,t)=>((0,a.isString)(t.value)&&(e[t.value]=t),e)),{}):{});var n;return e.selectedValues=Object.values(t),e.options=e.options.map((e=>{if(!(0,a.isString)(e.value))return e;const n=!!t[e.value];return e.selected===n?e:Object.assign({},e,{selected:n})})),e.options=u(e.options),e},u=e=>Array.isArray(e)?e.length<=1e3?e:e.slice(0,1e3):[],h=e=>{const{options:t,selectedValues:n}=e;return 0===t.length||n.length>0?e:t[0]&&t[0].value===r.r2?(e.selectedValues=[Object.assign({},t[0],{selected:!0})],e):e},p=e=>{const{selectedValues:t}=e;return t.length>1&&(e.selectedValues=t.filter((e=>e.value!==r.r2))),e},g=(0,s.oM)({name:"templating/optionsPicker",initialState:d,reducers:{showOptions:(e,t)=>{const{query:n,options:s}=t.payload;var r;(e.highlightIndex=-1,e.options=(0,a.cloneDeep)(s),e.id=t.payload.id,e.queryValue="",e.multi=!1,(0,o.U4)(t.payload))&&(e.multi=null!==(r=t.payload.multi)&&void 0!==r&&r);if((0,o.Xh)(t.payload)){const{queryValue:s}=t.payload,a=(0,l.bf)(n);e.queryValue=a&&s?s:""}return e.selectedValues=e.options.filter((e=>e.selected)),i(e,h,c)},hideOptions:(e,t)=>Object.assign({},d),toggleOption:(e,t)=>{const{option:n,clearOthers:s,forceSelect:a}=t.payload,{multi:o,selectedValues:l}=e;if(n){const t=!l.find((e=>e.value===n.value&&e.text===n.text));if(n.value===r.r2||!o||s)return e.selectedValues=t||a?[Object.assign({},n,{selected:!0})]:[],i(e,h,p,c);if(a||t)return e.selectedValues.push(Object.assign({},n,{selected:!0})),i(e,h,p,c);e.selectedValues=l.filter((e=>e.value!==n.value&&e.text!==n.text))}else e.selectedValues=[];return i(e,h,p,c)},moveOptionsHighlight:(e,t)=>{let n=e.highlightIndex+t.payload;return n<0?n=0:n>=e.options.length&&(n=e.options.length-1),Object.assign({},e,{highlightIndex:n})},toggleAllOptions:(e,t)=>e.selectedValues.length>0?(e.selectedValues=[],i(e,c)):(e.selectedValues=e.options.filter((e=>e.value!==r.r2)).map((e=>Object.assign({},e,{selected:!0}))),i(e,c)),updateSearchQuery:(e,t)=>(e.queryValue=t.payload,e),updateOptionsAndFilter:(e,t)=>{var n;const s=(0,a.trim)((null!==(n=e.queryValue)&&void 0!==n?n:"").toLowerCase());return e.options=t.payload.filter((e=>{var t;const n=null!==(t=e.text)&&void 0!==t?t:"";return-1!==(Array.isArray(n)?n.toString():n).toLowerCase().indexOf(s)})),e.highlightIndex=0,i(e,h,c)},updateOptionsFromSearch:(e,t)=>(e.options=t.payload,e.highlightIndex=0,i(e,h,c)),cleanPickerState:()=>d}}),{toggleOption:m,showOptions:f,hideOptions:v,moveOptionsHighlight:b,toggleAllOptions:x,updateSearchQuery:y,updateOptionsAndFilter:w,updateOptionsFromSearch:j,cleanPickerState:S}=g.actions,C=g.reducer},88364:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});const s=e=>{if(!a(e))return e.name;const{current:t}=e;return Array.isArray(t.text)?t.text.join(" + "):t.text},a=e=>Array.isArray(null==e?void 0:e.options)||"object"==typeof(null==e?void 0:e.current)},777:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});const s=(e,t)=>e?t&&!Array.isArray(e.value)?Object.assign({},e,{value:i(e.value),text:i(e.text)}):!t&&Array.isArray(e.value)?Object.assign({},e,{value:a(e.value),text:a(e.text)}):e:e,a=e=>Array.isArray(e)?e.length>0?e[0]:"":e,i=e=>Array.isArray(e)?e:[e]},90155:(e,t,n)=>{"use strict";n.d(t,{wX:()=>Y,Z7:()=>M,kG:()=>J,LX:()=>K,DU:()=>H,Fz:()=>_,Ci:()=>z,xs:()=>Z,Rk:()=>X,xQ:()=>B,MB:()=>U});var s=n(82897),a=n(28173),i=n(70332),r=n(80795),o=n(93686),l=n(59196),d=n(53091),c=n(63454),u=n(47900),h=n(68374),p=n(42200);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{constructor(){g(this,"inputNode",void 0),g(this,"outputNode",void 0)}_linkTo(e,t){t<=0&&e.inputEdges.push(this),t>=0&&e.outputEdges.push(this),e.edges.push(this)}link(e,t){if(!e)throw Error("inputNode is required");if(!t)throw Error("outputNode is required");return this.unlink(),this.inputNode=e,this.outputNode=t,this._linkTo(e,1),this._linkTo(t,-1),this}unlink(){let e;const t=this.inputNode,n=this.outputNode;t&&n&&(e=t.edges.indexOf(this),e>-1&&t.edges.splice(e,1),e=n.edges.indexOf(this),e>-1&&n.edges.splice(e,1),e=t.outputEdges.indexOf(this),e>-1&&t.outputEdges.splice(e,1),e=n.inputEdges.indexOf(this),e>-1&&n.inputEdges.splice(e,1))}}class f{constructor(e){g(this,"name",void 0),g(this,"edges",void 0),g(this,"inputEdges",void 0),g(this,"outputEdges",void 0),this.name=e,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(e){return e?"object"==typeof e?this.inputEdges.find((t=>{var n;return(null===(n=t.inputNode)||void 0===n?void 0:n.name)===e.name})):this.inputEdges.find((t=>{var n;return(null===(n=t.inputNode)||void 0===n?void 0:n.name)===e})):null}getEdgeTo(e){return e?"object"==typeof e?this.outputEdges.find((t=>{var n;return(null===(n=t.outputNode)||void 0===n?void 0:n.name)===e.name})):this.outputEdges.find((t=>{var n;return(null===(n=t.outputNode)||void 0===n?void 0:n.name)===e})):null}getOptimizedInputEdges(){const e=[];return this.inputEdges.forEach((t=>{var n;const s=null===(n=t.inputNode)||void 0===n?void 0:n.inputEdges.map((e=>e.inputNode));null==s||s.forEach((t=>{const n=null==t?void 0:t.getEdgeTo(this.name);n&&e.push(n)}))})),this.inputEdges.filter((t=>-1===e.indexOf(t)))}}class v{constructor(){g(this,"nodes",{})}createNode(e){const t=new f(e);return this.nodes[e]=t,t}createNodes(e){const t=[];return e.forEach((e=>{t.push(this.createNode(e))})),t}link(e,t){let n=[],s=[];const a=[],i=[];n=e instanceof Array?e:[e],s=t instanceof Array?t:[t];for(let e=0;e<n.length;e++){const t=n[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link input node named ${t} since it doesn't exist in graph`);a.push(e)}else a.push(t)}for(let e=0;e<s.length;e++){const t=s[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link output node named ${t} since it doesn't exist in graph`);i.push(e)}else i.push(t)}const r=[];return a.forEach((e=>{i.forEach((t=>{r.push(this.createEdge().link(e,t))}))})),r}descendants(e){if(!e.length)return new Set;const t=new Set((n=e).length>0&&"string"==typeof n[0]?e.map((e=>this.nodes[e])).filter((e=>void 0!==e)):e);var n;return this.descendantsRecursive(t)}descendantsRecursive(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e){const e=new Set;for(const{inputNode:s}of n.inputEdges)s&&!t.has(s)&&(t.add(s),e.add(s));this.descendantsRecursive(e,t)}return t}createEdge(){return new m}getNode(e){return this.nodes[e]}}var b=n(42833),x=n(79328),y=n(80025),w=n(35335),j=n(68288),S=n(96668),C=n(3612),k=n(14830),N=n(777),O=n(72379),I=n(98142),T=n(31835),$=n(84455),R=n(47908),P=n(50729),D=n(97791);function A(e){if(!(0,S.eL)(e))return e;let t=!1;for(const n of e.options)if(n.selected=!1,Array.isArray(e.current.value))for(const s of e.current.value)n.value===s&&(n.selected=t=!0);else n.value===e.current.value&&(n.selected=t=!0);return!t&&e.options.length&&(e.options[0].selected=!0),e}const M=(e,t)=>(n,s)=>{const{rootStateKey:a}=e,i=(0,$.E0)(e,s());if(!(0,S.U4)(i))return;const r=(0,N.x)(i.current,t);n((0,T.mb)(a,(0,R.Pl)((0,I.Y6)(e,{propName:"multi",propValue:t})))),n((0,T.mb)(a,(0,R.Pl)((0,I.Y6)(e,{propName:"current",propValue:r}))))},L=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return!!n.has(e.id)||(n=new Set([...n,e.id]),F(e,t).some((e=>L(e,t,n))))},F=(e,t)=>{if(!e.rootStateKey)return[];const n=[];for(const s of(0,$.gt)(e.rootStateKey,t))e!==s&&y.z.getIfExists(e.type)&&y.z.get(e.type).dependsOn(e,s)&&n.push(s);return n},E=(e,t,n)=>{if(0===t.length)return!1;const s=(0,$.gt)(e,n);return t.filter((e=>s.some((t=>t.id===e.id&&(t.state===a.Gu.NotStarted||t.state===a.Gu.Loading))))).length>0},V=(e,t)=>async(n,s)=>{const a=(0,$.E0)(e,s());await(async(e,t)=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);if(L(e,t))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const n=F(e,t);E(e.rootStateKey,n,t)&&await new Promise((t=>{const s=c.h.subscribe((()=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);E(e.rootStateKey,n,c.h.getState())||(s(),t())}))}))})(a,s());const i=t["var-"+a.name];if(void 0===i){if(a.hasOwnProperty("refresh")){const e=a;if(e.refresh===O.Bd.onDashboardLoad||e.refresh===O.Bd.onTimeRangeChanged)return void await n(X((0,I.yQ)(e)))}n(te(e))}else{const e=(0,I.Hi)(i);await y.z.get(a.type).setValueFromUrl(a,e)}},z=(e,t)=>async(n,a)=>{const i=(0,I.Hi)(t),r=(0,$.E0)(e,a());(0,I.iD)(r)!==O.Bd.never&&await n(X((0,I.yQ)(r)));const o=(0,$.E0)((0,I.yQ)(r),a());if(!(0,S.eL)(o))return;if(!o)throw new Error(`Couldn't find variable with name: ${r.name}`);let l=o.options.find((e=>e.text===i||e.value===i));if(!l&&(0,S.U4)(o)&&o.allValue&&i===o.allValue&&(l={text:w.xk,value:w.r2,selected:!1}),!l){let e=i;const t=i;Array.isArray(i)&&(e=i.reduce(((e,t)=>{const n=o.options.find((e=>e.value===t));return[].concat(e,n?[n.text]:[t])}),[])),l={text:e,value:t,selected:!1}}(0,S.U4)(o)&&(l=(0,N.x)({text:(0,s.castArray)(l.text),value:(0,s.castArray)(l.value),selected:!1},o.multi)),await y.z.get(r.type).setValue(o,l)},B=(e,t)=>(n,s)=>{var a;const i=(0,$.E0)(e,s());if(!(0,S.eL)(i))return Promise.resolve();const r=i.current||{},o=y.z.get(i.type).setValue;if(Array.isArray(r.value)){const e=(e=>{let t,n,s,a;const i=[];for(t=0;t<e.options.length;t++)if(a=Object.assign({},e.options[t]),a.selected=!1,Array.isArray(e.current.value))for(n=0;n<e.current.value.length;n++)s=e.current.value[n],a.value===s&&(a.selected=!0,i.push(a));else a.value===e.current.value&&(a.selected=!0,i.push(a));return i})(i);if(0===e.length){return o(i,i.options[0])}return o(i,{value:e.map((e=>e.value)),text:e.map((e=>e.text)),selected:!0})}let l=null;const d=(0,I.Tt)(i);if(l=null===(a=i.options)||void 0===a?void 0:a.find((e=>e.text===d)),l)return o(i,l);var c;if(t&&(l=null===(c=i.options)||void 0===c?void 0:c.find((e=>e.text===t)),l))return o(i,l);if(i.options){const e=i.options[0];if(e)return o(i,e)}return Promise.resolve()},_=(e,t,n)=>async s=>{const{rootStateKey:a}=e;return s((0,T.mb)(a,(0,R.Q8)((0,I.Y6)(e,{option:t})))),await s(U(e,n))},W=e=>{const t=new v;return e.forEach((e=>{t.createNode(e.name)})),e.forEach((n=>{e.forEach((e=>{n!==e&&y.z.get(n.type).dependsOn(n,e)&&t.link(n.name,e.name)}))})),t},U=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.h$;return async(s,a)=>{var i,o,l;const d=a(),{rootStateKey:c}=e,u=(0,$.E0)(e,d);if((0,$.AE)(c,d).transaction.status===O.LN.Fetching)return(0,I.iD)(u)===O.Bd.never&&(await s(ne((0,I.yQ)(u))),s(te(e))),Promise.resolve();const h=(0,$.gt)(c,d),p=W(h),g=null!==(i=null===(o=d.dashboard)||void 0===o||null===(l=o.getModel())||void 0===l?void 0:l.panels)&&void 0!==i?i:[],m=(0,C.dH)(g),f=(0,S.Kn)(u)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,C.PQ)([u.id],p,m))},v=p.getNode(u.name);let b=[];return v&&(b=v.getOptimizedInputEdges().map((e=>{const t=h.find((t=>{var n;return t.name===(null===(n=e.inputNode)||void 0===n?void 0:n.name)}));return t?s(X((0,I.yQ)(t))):Promise.resolve()}))),Promise.all(b).then((()=>{t&&(n.publish(new O.x9(f)),r.E1.partial(Q(c,a)))}))}},H=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{templateSrv:(0,x.J)(),events:h.h$};return async(s,a)=>{n.templateSrv.updateTimeRange(t);const i=(0,$.gt)(e,a()).filter((e=>{if(e.hasOwnProperty("refresh")&&e.hasOwnProperty("options")){return e.refresh===O.Bd.onTimeRangeChanged}return!1})),r=i.map((e=>e.id)),l=i.map((e=>s(q((0,I.yQ)(e)))));try{await Promise.all(l),n.events.publish(new O.eq({variableIds:r}))}catch(e){console.error(e),s((0,o.$l)(ee("Template variable service failed",e)))}}},q=e=>async(t,n)=>{const s=(0,$.E0)(e,n());if(!(0,S.eL)(s))return;const a=s.options.slice();await t(X((0,I.yQ)(s),!0));const i=(0,$.E0)(e,n());if(!(0,S.eL)(i))return;const r=i.options;if(JSON.stringify(a)!==JSON.stringify(r)){const e=n().dashboard.getModel();null==e||e.templateVariableValueUpdated()}},Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.h$;return async(s,a)=>{var i;const r=[],o=a().dashboard.getModel(),l=(0,$.gt)(e,a());for(const e of l){const n=`var-${e.name}`;if(!t.hasOwnProperty(n))continue;if(!G(e,t[n].value))continue;let s=t[n].value;if(t[n].removed){const t=null==o?void 0:o.templating.list.find((t=>t.name===e.name));t&&(0,S.Kr)(t)&&(s=t.current.value),t&&(0,S.VC)(t)&&(s=t.query)}const a=y.z.get(e.type).setValueFromUrl(e,s);r.push(a)}const d=l.filter((e=>{const n=`var-${e.name}`;return t.hasOwnProperty(n)&&G(e,t[n].value)&&!(0,S.Kn)(e)})),c=W(l),u=(0,C.dH)(null!==(i=null==o?void 0:o.panels)&&void 0!==i?i:[]),h=(0,C.PQ)(d.map((e=>e.id)),c,u);r.length&&(await Promise.all(r),n.publish(new O.Wy({refreshAll:0===h.size,panelIds:Array.from(h)})))}};function G(e,t){const n=y.z.get(e.type).getValueForUrl(e);let a=(0,I.Hi)(t);return Array.isArray(n)&&!Array.isArray(a)&&(a=[a]),!(0,s.isEqual)(n,a)}const Q=(e,t)=>{const n=r.E1.getSearchObject(),s=Object.keys(n).filter((e=>-1===e.indexOf("var-"))).reduce(((e,t)=>(e[t]=n[t],e)),{});for(const n of(0,$.gt)(e,t())){if(n.skipUrlSync)continue;const e=y.z.get(n.type);s["var-"+n.name]=e.getValueForUrl(n)}return s},K=(e,t)=>async(n,s)=>{try{const o=(0,I.mn)(e),c=s(),u=(0,$.cp)(c);if(u){(0,$.AE)(u,c).transaction.status===O.LN.Fetching&&n(Y(u))}n((0,T.mb)(o,(0,P.Z9)({uid:o}))),n(((e,t)=>n=>{const s=Object.assign({},O.Eg,{id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:O.bU.hideVariable,current:{value:{name:t.title,uid:t.uid,toString:()=>t.title}}});n((0,T.mb)(e,(0,R.VN)((0,I.Y6)(s,{global:s.global,index:s.index,model:s}))));const a=Object.assign({},O.Eg,{id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:O.bU.hideVariable,current:{value:{name:l.Vt.user.orgName,id:l.Vt.user.orgId,toString:()=>l.Vt.user.orgId.toString()}}});n((0,T.mb)(e,(0,R.VN)((0,I.Y6)(a,{global:a.global,index:a.index,model:a}))));const i=Object.assign({},O.Eg,{id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:O.bU.hideVariable,current:{value:{login:l.Vt.user.login,id:l.Vt.user.id,email:l.Vt.user.email,toString:()=>l.Vt.user.id.toString()}}});n((0,T.mb)(e,(0,R.VN)((0,I.Y6)(i,{global:i.global,index:i.index,model:i}))))})(o,t)),n(((e,t)=>(n,s)=>{let a=0;const i=t.templating.list;for(let t=0;t<i.length;t++){const s=A(i[t]);s.rootStateKey=e,y.z.getIfExists(s.type)&&n((0,T.mb)(e,(0,R.VN)((0,I.Y6)(s,{global:!1,index:a++,model:s}))))}(0,x.J)().updateTimeRange((0,d.$t)().timeRange());const r=(0,$.gt)(e,s());for(const t of r)n((0,T.mb)(e,(0,R.Mn)((0,I.Y6)(t))))})(o,t)),n(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.ak;return(n,s)=>{const a=(0,$.gt)(e,s());for(const s of a){if(!(0,S.Kn)(s)&&!(0,S.Xh)(s))continue;const{datasource:a}=s;if((0,i.cv)(a))continue;const r=t().getInstanceSettings(a),o=r?(0,i.iU)(r):{uid:a};n((0,T.mb)(e,(0,R.Pl)((0,I.Y6)(s,{propName:"datasource",propValue:o}))))}}}(o)),await n((a=o,async(e,t)=>{const n=r.E1.getSearchObject(),s=(0,$.gt)(a,t()).map((async t=>await e(V((0,I.yQ)(t),n))));await Promise.all(s)})),n((0,T.mb)(o,(0,P.iv)({uid:o})))}catch(e){n((0,o.$l)(ee("Templating init failed",e))),console.error(e)}var a};const J=e=>t=>{t((0,T.mb)(e,(0,D.S)())),t((0,T.mb)(e,(0,j.QR)())),t((0,T.mb)(e,(0,k.XJ)())),t((0,T.mb)(e,(0,P.p3)()))},Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getBackendSrv:p.i};return n=>{t.getBackendSrv().cancelAllInFlightRequests(),n(J(e))}},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(n,s)=>{const{rootStateKey:a}=e;try{if(!(0,I.A3)(a,s()))return;const t=(0,$.E0)(e,s());n((0,T.mb)(a,(0,R.$M)((0,I.Y6)(t)))),await n(ne((0,I.yQ)(t))),await y.z.get(t.type).updateOptions(t),n(te(e))}catch(s){if(n((0,T.mb)(a,(0,R.Le)((0,I.Y6)(e,{error:s})))),t||(console.error(s),n((0,o.$l)(ee("Error updating options:",s,e)))),t)throw s}}},ee=(e,t,n)=>(0,u.t_)(""+(n?`Templating [${n.id}]`:"Templating"),`${e} ${t.message}`),te=e=>(t,n)=>{const{rootStateKey:s}=e;if(!(0,I.A3)(s,n()))return;const i=(0,$.E0)(e,n());i.state!==a.Gu.Done&&t((0,T.mb)(e.rootStateKey,(0,R.qQ)((0,I.Y6)(i))))};function ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.ak;return async function(n,s){const{id:a,rootStateKey:i}=e;if(!(0,I.A3)(i,s()))return;const r=(0,$.E0)(e,s());if("query"===r.type)try{var l;const s=await t().get(null!==(l=r.datasource)&&void 0!==l?l:"");if((0,S.R)(s))return;if(!(0,S.Ju)(s))return;if(se(r.query))return;const o={refId:`${s.name}-${a}-Variable-Query`,query:r.query};n((0,T.mb)(i,(0,R.Pl)((0,I.Y6)(e,{propName:"query",propValue:o}))))}catch(e){n((0,o.$l)(ee("Failed to upgrade legacy queries",e))),console.error(e)}}}function se(e){return!!e&&(e.hasOwnProperty("refId")&&"string"==typeof e.refId)}},31835:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>d,mb:()=>o,qM:()=>r});var s=n(98142),a=n(96744),i=n(50729);const r={keys:{}};function o(e,t){const n=(0,s.mn)(e);return{type:`templating/keyed/${(a={key:n,action:t}).action.type.replace(/^templating\//,"")}`,payload:a};var a}const l=e=>"string"==typeof e.type&&e.type.startsWith("templating/keyed")&&"payload"in e&&"string"==typeof e.payload.key;const d={templating:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;if(l(t)){const{key:n,action:r}=t.payload,o=(0,s.mn)(n),l=i.Z9.match(r)?o:e.lastKey,d=(0,a.Q)()(e.keys[o],r);return Object.assign({},e,{lastKey:l,keys:Object.assign({},e.keys,{[o]:d})})}return e}}},96744:(e,t,n)=>{"use strict";n.d(t,{L:()=>h,Q:()=>u});var s=n(31259),a=n(68288),i=n(30486),r=n(14830),o=n(50729),l=n(7856),d=n(97791);let c;function u(){return c||(c=(0,s.combineReducers)({editor:a.gl,variables:d.L,optionsPicker:r.cv,transaction:o.vw,inspect:i.iV})),c}function h(){return{editor:a.PF,variables:l.s,optionsPicker:r.yy,transaction:o.xO,inspect:i.Kf}}},84455:(e,t,n)=>{"use strict";n.d(t,{AE:()=>d,E0:()=>o,Eo:()=>g,IV:()=>h,Q4:()=>b,QT:()=>m,S_:()=>v,_K:()=>y,cp:()=>f,gt:()=>c,ir:()=>w,ng:()=>x,xD:()=>p});var s=n(58635),a=n(63454),i=n(98142),r=n(96744);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)(),n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{id:s,rootStateKey:i}=e,r=d(i,t),o=r.variables[s];if(o)return o;if(n)throw new Error(`Couldn't find variable with id:${s}`)}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.y0)();return Object.values(d(t,n).variables).filter(e).sort(((e,t)=>e.index-t.index))}function d(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)();return null!==(t=n.templating.keys[(0,i.mn)(e)])&&void 0!==t?t:(0,r.L)()}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)();return l(u,e,t)}function u(e){return"system"!==e.type}const h=(0,s.Z)(((e,t)=>c(e,(0,a.y0)()))),p=(e,t)=>c(e,t);function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)();return m(Object.values(d(e,t).variables))}function m(e){const t=e.filter(u).sort(((e,t)=>e.index-t.index));return t.length>0?t[t.length-1].index+1:0}function f(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.y0)();return null===(e=t.templating)||void 0===e?void 0:e.lastKey}function v(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.y0)();if(null===(e=t.templating)||void 0===e||!e.lastKey)throw new Error("Accessing lastKey without initializing it variables");return t.templating.lastKey}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)();const n=f(t);return n?l(e,n,t):[]}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.y0)();const t=f(e);return t?c(t,e):[]}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.y0)();const n=f(t);if(n)return o({id:e,rootStateKey:n,type:"query"},t,!1)}function w(e,t){return e[t]}},47908:(e,t,n)=>{"use strict";n.d(t,{$M:()=>j,Be:()=>y,Le:()=>C,Mn:()=>w,Pl:()=>f,Q8:()=>x,VN:()=>m,Y9:()=>b,b5:()=>p,gE:()=>v,mZ:()=>g,qQ:()=>S});var s=n(23067),a=n(82897),i=n(28173),r=n(80025),o=n(68288),l=n(96668),d=n(98142),c=n(84455),u=n(7856);const h=(0,s.oM)({name:"templating/shared",initialState:u.s,reducers:{addVariable:(e,t)=>{var n;const s=null!==(n=t.payload.id)&&void 0!==n?n:t.payload.data.model.name,i=r.z.get(t.payload.type),o=(0,a.cloneDeep)(i.initialState),l=i.beforeAdding?i.beforeAdding(t.payload.data.model):(0,a.cloneDeep)(t.payload.data.model),d=Object.assign({},(0,a.defaults)({},l,o),{id:s,index:t.payload.data.index,global:t.payload.data.global});e[s]=d},variableStateNotStarted:(e,t)=>{const n=(0,c.ir)(e,t.payload.id);n.state=i.Gu.NotStarted,n.error=null},variableStateFetching:(e,t)=>{const n=(0,c.ir)(e,t.payload.id);n.state=i.Gu.Loading,n.error=null},variableStateCompleted:(e,t)=>{const n=(0,c.ir)(e,t.payload.id);n&&(n.state=i.Gu.Done,n.error=null)},variableStateFailed:(e,t)=>{const n=(0,c.ir)(e,t.payload.id);n&&(n.state=i.Gu.Error,n.error=t.payload.data.error)},removeVariable:(e,t)=>{if(delete e[t.payload.id],!t.payload.data.reIndex)return;const n=Object.values(e).sort(((e,t)=>e.index-t.index));for(let e=0;e<n.length;e++)n[e].index=e},duplicateVariable:(e,t)=>{var n,s;const i=(0,a.cloneDeep)(e[t.payload.id]),o=`copy_of_${i.name}`,l=null!==(n=null===(s=t.payload.data)||void 0===s?void 0:s.newId)&&void 0!==n?n:o,d=(0,c.QT)(Object.values(e));e[l]=Object.assign({},(0,a.cloneDeep)(r.z.get(t.payload.type).initialState),i,{id:l,name:o,index:d})},changeVariableOrder:(e,t)=>{const{toIndex:n,fromIndex:s}=t.payload.data,a=Object.values(e);for(let e=0;e<a.length;e++){const t=a[e];t.index===s?t.index=n:t.index>s&&t.index<=n?t.index--:t.index<s&&t.index>=n&&t.index++}},changeVariableType:(e,t)=>{const{id:n}=t.payload,{label:s,name:i,index:o,description:l,rootStateKey:d}=e[n];e[n]=Object.assign({},(0,a.cloneDeep)(r.z.get(t.payload.data.newType).initialState),{id:n,rootStateKey:d,label:s,name:i,index:o,description:l})},setCurrentVariableValue:(e,t)=>{if(!t.payload.data.option)return;const n=(0,c.ir)(e,t.payload.id);if(!(0,l.eL)(n))return;const{option:s}=t.payload.data,a=Object.assign({},s,{text:(0,d.Hi)(null==s?void 0:s.text),value:(0,d.Hi)(null==s?void 0:s.value)});n.current=a,n.options=n.options.map((e=>{e.value=(0,d.Hi)(e.value),e.text=(0,d.Hi)(e.text);let t=!1;if(Array.isArray(a.value))for(let n=0;n<a.value.length;n++){const s=a.value[n];if(e.value===s){t=!0;break}}else e.value===a.value&&(t=!0);return e.selected=t,e}))},changeVariableProp:(e,t)=>{(0,c.ir)(e,t.payload.id)[t.payload.data.propName]=t.payload.data.propValue}},extraReducers:e=>e.addCase(o.Yo,((e,t)=>{(0,c.ir)(e,t.payload.id).name=t.payload.data.newName}))}),p=h.reducer,{removeVariable:g,addVariable:m,changeVariableProp:f,changeVariableOrder:v,duplicateVariable:b,setCurrentVariableValue:x,changeVariableType:y,variableStateNotStarted:w,variableStateFetching:j,variableStateCompleted:S,variableStateFailed:C}=h.actions},50729:(e,t,n)=>{"use strict";n.d(t,{Z9:()=>d,iv:()=>u,p3:()=>c,vw:()=>h,xO:()=>r});var s=n(23067),a=n(72379),i=n(47908);const r={uid:null,status:a.LN.NotStarted,isDirty:!1},o=(0,s.oM)({name:"templating/transaction",initialState:r,reducers:{variablesInitTransaction:(e,t)=>{e.uid=t.payload.uid,e.status=a.LN.Fetching},variablesCompleteTransaction:(e,t)=>{e.uid===t.payload.uid&&(e.status=a.LN.Completed)},variablesClearTransaction:(e,t)=>{e.uid=null,e.status=a.LN.NotStarted,e.isDirty=!1}},extraReducers:e=>e.addMatcher(l,((e,t)=>{e.status===a.LN.Completed&&(e.isDirty=!0)}))});function l(e){return i.mZ.match(e)||i.VN.match(e)||i.Pl.match(e)||i.gE.match(e)||i.Y9.match(e)||i.Be.match(e)}const{variablesInitTransaction:d,variablesClearTransaction:c,variablesCompleteTransaction:u}=o.actions,h=o.reducer},7856:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});const s={}},97791:(e,t,n)=>{"use strict";n.d(t,{L:()=>l,S:()=>o});var s=n(23067),a=n(80025),i=n(47908),r=n(7856);const o=(0,s.PH)("templating/cleanVariables"),l=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.s,s=arguments.length>1?arguments[1]:void 0;if(o.match(s)){const e=Object.values(n).filter((e=>e.global));if(!e)return r.s;const t=e.reduce(((e,t)=>(e[t.id]=t,e)),{});return t}return null!=s&&null!==(e=s.payload)&&void 0!==e&&e.type&&a.z.getIfExists(null==s||null===(t=s.payload)||void 0===t?void 0:t.type)?a.z.get(s.payload.type).reducer((0,i.b5)(n,s),s):n}},72379:(e,t,n)=>{"use strict";n.d(t,{$U:()=>s.$U,Bd:()=>s.Bd,Eg:()=>d,LN:()=>l,Wy:()=>h,bU:()=>s.bU,eq:()=>u,x9:()=>c});var s=n(51389),a=n(28173),i=n(54209),r=n(35335);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l;!function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Completed="Completed"}(l||(l={}));const d={id:r.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:s.bU.dontHide,skipUrlSync:!1,state:a.Gu.NotStarted,error:null,description:null};class c extends i.R{}o(c,"type","variables-changed");class u extends i.R{}o(u,"type","variables-time-range-process-done");class h extends i.R{}o(h,"type","variables-changed-in-url")},98142:(e,t,n)=>{"use strict";n.d(t,{A3:()=>O,AQ:()=>w,HY:()=>v,Hi:()=>N,J7:()=>h,N9:()=>x,QI:()=>f,Tt:()=>b,Y6:()=>$,_6:()=>m,a9:()=>p,bf:()=>g,bi:()=>S,gR:()=>y,iD:()=>j,mn:()=>I,xT:()=>k,yQ:()=>T});var s=n(82897),a=n(2633),i=n(11848),r=n(63454),o=n(53091),l=n(80025),d=n(35335),c=n(84455),u=n(72379);const h=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,p=e=>(h.lastIndex=0,h.exec(e)),g=e=>!(!e||"string"!=typeof e)&&-1!==e.indexOf("__searchFilter"),m=e=>{const{query:t,wildcardChar:n}=e;if(!g(t))return{};let{options:s}=e;s=s||{searchFilter:""};return{__searchFilter:{value:s.searchFilter?`${s.searchFilter}${n}`:`${n}`,text:""}}};function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t[t.length-1];t[0]="string"==typeof t[0]?t[0]:(0,i.Xh)(t[0]);const a=t.slice(0,-1).join(" "),r=a.match(h),o=null!==r&&r.find((e=>{const t=p(e);return null!==t&&t.indexOf(s)>-1}));return!!o}const v=e=>{if(!e)return!1;if(!e.current)return!1;if(e.current.value){const t=Array.isArray(e.current.value);if(t&&e.current.value.length&&e.current.value[0]===d.r2)return!0;if(!t&&e.current.value===d.r2)return!0}if(e.current.text){const t=Array.isArray(e.current.text);if(t&&e.current.text.length&&e.current.text[0]===d.xk)return!0;if(!t&&e.current.text===d.xk)return!0}return!1},b=e=>e&&e.current&&e.current.text?Array.isArray(e.current.text)?e.current.text.toString():"string"!=typeof e.current.text?"":e.current.text:"",x=e=>e&&e.current&&void 0!==e.current.value&&null!==e.current.value?Array.isArray(e.current.value)?e.current.value.toString():"string"!=typeof e.current.value?null:e.current.value:null;function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.J)();return e&&e.regex?t.replace(e.regex,{},"regex"):""}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.$t)();const s={range:void 0,variable:e,searchFilter:t};return e.refresh!==u.Bd.onTimeRangeChanged&&e.refresh!==u.Bd.onDashboardLoad||(s.range=n.timeRange()),s}function j(e){if(!e||!e.hasOwnProperty("refresh"))return u.Bd.never;const t=e;return t.refresh!==u.Bd.onTimeRangeChanged&&t.refresh!==u.Bd.onDashboardLoad&&t.refresh!==u.Bd.never?u.Bd.never:t.refresh}function S(){return l.z.list().filter((e=>"system"!==e.id)).map((e=>{let{id:t,name:n,description:s}=e;return{label:n,value:t,description:s}}))}function C(e){return(0,s.isArray)(e)&&(0===e.length?e=void 0:1===e.length&&(e=e[0])),e}function k(e,t){let n=0;const a={};for(const i in e){if(!i.startsWith("var-"))continue;let r=C(t[i]),o=C(e[i]);(0,s.isEqual)(o,r)||(a[i]={value:e[i]},n++)}for(const i in t){if(!i.startsWith("var-"))continue;const r=t[i];(0,s.isArray)(r)&&0===r.length||(e.hasOwnProperty(i)||(a[i]={value:"",removed:!0},n++))}return n?a:void 0}function N(e){return Array.isArray(e)?e.map(String):null==e?"":"number"==typeof e?e.toString(10):"string"==typeof e?e:"boolean"==typeof e?e.toString():""}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.y0)();return(0,c.AE)(e,t).transaction.status!==u.LN.NotStarted}function I(e){return String(e)}const T=e=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);return{type:e.type,id:e.id,rootStateKey:e.rootStateKey}};function $(e,t){return{type:e.type,id:e.id,data:t}}},39708:(e,t,n)=>{"use strict";n(32478),n(78831),n(17103),n(44032),n(10800),n(3574),n(21256);var s=n(42833),a=(n(32086),n(94722)),i=(n(85322),n(50622),n(7060),n(76917),n(82897)),r=n.n(i),o=n(68404),l=n(97394),d=n(88246),c=n(97254),u=n(68959),h=n(99612),p=n(27105),g=n(36298),m=n(93570),f=n(45926),v=n(80795),b=n(6794),x=n(8910),y=n(74903),w=n(678),j=n(76308),S=n(62027),C=n(6778),k=n(46782),N=n(17549),O=n(52423),I=n(27843),T=n(77401),$=n(31919),R=n(32934),P=n(20410),D=n(64517),A=n(43605),M=n(37625),L=n(8006),F=n(50191),E=n(70917),V=n(2238),z=n(4645);function B(e,t){switch(t.type){case I.fS.boolean:return!(0,i.isUndefined)(e)&&_(e);case I.fS.number:return isNaN(e)?0:parseFloat(e);case I.fS.string:return e?String(e):"";default:return e}}const _=e=>(0,i.isString)(e)?!("F"===e[0]||"f"===e[0]||"0"===e[0]):!!e;var W=n(45916);function U(e){return function(t){let{options:n,onChange:s,field:a}=t;const{validator:i,converter:r=B}=e,{value:l}=n,[d,c]=(0,o.useState)(!i(l)),u=(0,o.useCallback)((e=>{c(!i(e.currentTarget.value))}),[c,i]),h=(0,o.useCallback)((e=>{if(d)return;const{value:t}=e.currentTarget;s(Object.assign({},n,{value:r(t,a)}))}),[n,s,d,a,r]);return(0,W.jsx)(z.I,{className:"flex-grow-1",invalid:d,defaultValue:String(n.value),placeholder:"Value",onChange:u,onBlur:h})}}const H=()=>null;var q;function Z(e){return function(t){let{options:n,onChange:s,field:a}=t;const{validator:i}=e,[r,l]=(0,o.useState)({from:!i(n.from),to:!i(n.to)}),d=(0,o.useCallback)(((e,t)=>{l(Object.assign({},r,{[t]:!i(e.currentTarget.value)}))}),[l,i,r]),c=(0,o.useCallback)(((e,t)=>{if(r[t])return;const{value:i}=e.currentTarget;s(Object.assign({},n,{[t]:B(i,a)}))}),[n,s,r,a]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.I,{className:"flex-grow-1 gf-form-spacing",invalid:r.from,defaultValue:String(n.from),placeholder:"From",onChange:e=>d(e,"from"),onBlur:e=>c(e,"from")}),q||(q=(0,W.jsx)("div",{className:"gf-form-label",children:"and"})),(0,W.jsx)(z.I,{className:"flex-grow-1",invalid:r.to,defaultValue:String(n.to),placeholder:"To",onChange:e=>d(e,"to"),onBlur:e=>c(e,"to")})]})}}const G=new V.B((()=>[{name:"Is greater",id:$.mE.greater,component:U({validator:e=>!isNaN(e)})},{name:"Is greater or equal",id:$.mE.greaterOrEqual,component:U({validator:e=>!isNaN(e)})},{name:"Is lower",id:$.mE.lower,component:U({validator:e=>!isNaN(e)})},{name:"Is lower or equal",id:$.mE.lowerOrEqual,component:U({validator:e=>!isNaN(e)})},{name:"Is equal",id:$.mE.equal,component:U({validator:()=>!0})},{name:"Is not equal",id:$.mE.notEqual,component:U({validator:()=>!0})},{name:"Regex",id:$.mE.regex,component:U({validator:()=>!0,converter:e=>String(e)})},{name:"Is null",id:$.mE.isNull,component:H},{name:"Is not null",id:$.mE.isNotNull,component:H},{name:"Is between",id:$.mE.between,component:Z({validator:e=>!isNaN(e)})}]));var Q,K,J;const Y=e=>{var t,n;const{onDelete:s,onChange:a,filter:i,fieldsInfo:r}=e,{fieldsAsOptions:l,fieldByDisplayName:d}=r,c=d[null!==(t=te(i,l))&&void 0!==t?t:""],u=c?X(c):[],h=ee(i,u),p=G.getIfExists(h),g=(0,o.useCallback)((e=>{null!=e&&e.value&&a(Object.assign({},i,{fieldName:e.value}))}),[a,i]),m=(0,o.useCallback)((e=>{if(null==e||!e.value)return;const t=e.value,n=T.U8.get(t).getDefaultOptions(c);a(Object.assign({},i,{config:{id:t,options:n}}))}),[a,i,c]),f=(0,o.useCallback)((e=>{a(Object.assign({},i,{config:Object.assign({},i.config,{options:e})}))}),[a,i]);return c&&p&&p.component?(0,W.jsxs)("div",{className:"gf-form-inline",children:[(0,W.jsxs)("div",{className:"gf-form gf-form-spacing",children:[Q||(Q=(0,W.jsx)("div",{className:"gf-form-label width-7",children:"Field"})),(0,W.jsx)(E.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:l,value:i.fieldName,onChange:g})]}),(0,W.jsxs)("div",{className:"gf-form gf-form-spacing",children:[K||(K=(0,W.jsx)("div",{className:"gf-form-label",children:"Match"})),(0,W.jsx)(E.Ph,{className:"width-12",placeholder:"Select test",options:u,value:h,onChange:m})]}),(0,W.jsxs)("div",{className:"gf-form gf-form--grow gf-form-spacing",children:[J||(J=(0,W.jsx)("div",{className:"gf-form-label",children:"Value"})),(0,W.jsx)(p.component,{field:c,options:null!==(n=i.config.options)&&void 0!==n?n:{},onChange:f})]}),(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)(L.zx,{icon:"times",onClick:s,variant:"secondary"})})]}):null},X=e=>{const t=[];for(const n of T.U8.list()){if(!n.isApplicable(e))continue;G.getIfExists(n.id)&&t.push({value:n.id,label:n.name,description:n.description})}return t},ee=(e,t)=>{var n;const s=t.find((t=>t.value===e.config.id));return s&&s.value?s.value:null!==(n=t[0])&&void 0!==n&&n.value?null===(a=t[0])||void 0===a?void 0:a.value:void 0;var a},te=(e,t)=>{var n;const s=t.find((t=>t.value===e.fieldName));return s&&s.value?s.value:null!==(n=t[0])&&void 0!==n&&n.value?null===(a=t[0])||void 0===a?void 0:a.value:void 0;var a};var ne,se;const ae=[{label:"Include",value:A.PQ.include},{label:"Exclude",value:A.PQ.exclude}],ie=[{label:"Match all",value:A.ER.all},{label:"Match any",value:A.ER.any}],re={id:P.W.filterByValue,editor:e=>{const{input:t,options:n,onChange:s}=e,a=oe(),r=le(t),l=(0,o.useCallback)((()=>{const e=t[0],a=e.fields.find((e=>e.type!==I.fS.time));if(!a)return;const r=(0,i.cloneDeep)(n.filters),o=T.U8.get($.mE.greater);r.push({fieldName:(0,R.C)(a,e,t),config:{id:o.id,options:o.getDefaultOptions(a)}}),s(Object.assign({},n,{filters:r}))}),[s,n,t]),d=(0,o.useCallback)((e=>{let t=(0,i.cloneDeep)(n.filters);t.splice(e,1),s(Object.assign({},n,{filters:t}))}),[n,s]),c=(0,o.useCallback)(((e,t)=>{let a=(0,i.cloneDeep)(n.filters);a[t]=e,s(Object.assign({},n,{filters:a}))}),[n,s]),u=(0,o.useCallback)((e=>{s(Object.assign({},n,{type:null!=e?e:A.PQ.include}))}),[n,s]),h=(0,o.useCallback)((e=>{s(Object.assign({},n,{match:null!=e?e:A.ER.all}))}),[n,s]);return(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{className:"gf-form gf-form-inline",children:[ne||(ne=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Filter type"})),(0,W.jsx)("div",{className:"width-15",children:(0,W.jsx)(M.S,{options:ae,value:n.type,onChange:u,fullWidth:!0})})]}),(0,W.jsxs)("div",{className:"gf-form gf-form-inline",children:[se||(se=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Conditions"})),(0,W.jsx)("div",{className:"width-15",children:(0,W.jsx)(M.S,{options:ie,value:n.match,onChange:h,fullWidth:!0})})]}),(0,W.jsxs)("div",{className:a.conditions,children:[n.filters.map(((e,t)=>(0,W.jsx)(Y,{filter:e,fieldsInfo:r,onChange:e=>c(e,t),onDelete:()=>d(t)},t))),(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)(L.zx,{icon:"plus",size:"sm",onClick:l,variant:"secondary",children:"Add condition"})})]})]})},transformation:D.Y.filterByValueTransformer,name:D.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},oe=(0,F.B)((()=>({conditions:O.css`
    padding-left: 16px;
  `}))),le=e=>(0,o.useMemo)((()=>{const t={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(e)?e.reduce(((t,n)=>n.fields.reduce(((t,s)=>{const a=(0,R.C)(s,n,e);return t.fieldByDisplayName[a]||(t.fieldsAsOptions.push({label:a,value:a,type:s.type}),t.fieldByDisplayName[a]=s),t}),t)),t):t}),[e]);var de=n(15546),ce=n(54251),ue=n(81154),he=n(58620),pe=n(58575);function ge(e,t){const n={data:e.input,options:e.options},s=new ue.j({id:"root",title:"root"}),a={getValue:t=>(0,i.get)(e.options,t),onChange:(t,n)=>{e.onChange((0,pe.hs)(e.options,t,n))}};return(0,he.HZ)(t,a,(e=>{if(null!=e&&e.length){const t=e[0];let n=s.categories.find((e=>e.props.id===t));return n||(n=new ue.j({id:t,title:t}),s.categories.push(n)),n}return s}),n),s}function me(e){const t={},n=new ce.rt;e(n,{data:[],options:{}});for(const e of n.getItems())null!=e.defaultValue&&(0,i.set)(t,e.path,e.defaultValue);return t}var fe=n(20909),ve=n(72828);const be=(e,t)=>{var n;const s=null!==(n=t.options)&&void 0!==n?n:{};(0,fe.J)("",e,s)},xe={id:ve.Oy.id,editor:e=>{(0,o.useEffect)((()=>{var t;if(null===(t=e.options.xBuckets)||void 0===t||!t.mode){const t=me(be);e.onChange(Object.assign({},t,e.options)),console.log("geometry useEffect",t)}}));const t=ge(e,be);return(0,W.jsx)("div",{children:(0,W.jsx)("div",{children:t.items.map((e=>e.render()))})})},transformation:ve.Oy,name:ve.Oy.name,description:ve.Oy.description,state:de.BV.alpha};var ye=n(16755),we=n(26908),je=n(34117),Se=n(46889),Ce=n(34784),ke=n(4116),Ne=n(663),Oe=n(57897),Ie=n(87602),Te=n(12812);function $e(e,t,n){const s={},a={};for(const r of e.fields){const o=(0,R.C)(r,e),l=n.index[o].handler;if(!l)continue;const d=r.values.get(t);if(null==d)continue;const c=l.processor(d,s,a);var i;if(null!=c)s[null!==(i=l.targetProperty)&&void 0!==i?i:l.key]=c}return a.mappingValues&&(s.mappings=function(e){const t={type:Te.H.ValueToText,options:{}};if(!e.mappingValues)return[];for(let n=0;n<e.mappingValues.length;n++){const s=e.mappingValues[n];null!=s&&(t.options[s.toString()]={color:e.mappingColors&&e.mappingColors[n],text:e.mappingTexts&&e.mappingTexts[n],index:n})}return[t]}(a)),s}let Re;!function(e){e.Name="field.name",e.Value="field.value",e.Label="field.label",e.Ignore="__ignore"}(Re||(Re={}));const Pe=[{key:Re.Name,name:"Field name",processor:()=>{}},{key:Re.Value,name:"Field value",processor:()=>{}},{key:Re.Label,name:"Field label",processor:()=>{}},{key:Re.Ignore,name:"Ignore",processor:()=>{}},{key:"max",processor:Ae},{key:"min",processor:Ae},{key:"unit",processor:e=>e.toString()},{key:"decimals",processor:Ae},{key:"displayName",name:"Display name",processor:e=>e.toString()},{key:"color",processor:e=>({fixedColor:e,mode:Ne.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(e,t)=>{const n=(0,Oe.I)(e);if(!isNaN(n))return t.thresholds||(t.thresholds={mode:Ie.H.Absolute,steps:[{value:-1/0,color:"green"}]}),t.thresholds.steps.push({value:n,color:"red"}),t.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Ce.gz.allValues,processor:(e,t,n)=>{if((0,i.isArray)(e))return n.mappingValues=e,t.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Ce.gz.allValues,processor:(e,t,n)=>{if((0,i.isArray)(e))return n.mappingColors=e,t.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Ce.gz.allValues,processor:(e,t,n)=>{if((0,i.isArray)(e))return n.mappingTexts=e,t.mappings}}];let De=null;function Ae(e){const t=(0,Oe.I)(e);if(!isNaN(t))return t}function Me(e){return e?function(){if(null===De){De={};for(const e of Pe)De[e.key]=e}return De}()[e]:null}function Le(e,t,n){const s={index:{}};let a=t.find((e=>e.handlerKey===Re.Name)),i=t.find((e=>e.handlerKey===Re.Value));for(const d of e.fields){var r,o,l;const c=(0,R.C)(d,e),u=t.find((e=>e.fieldName===c));let h=Me(u?u.handlerKey:c.toLowerCase());n&&(h?(h.key===Re.Name&&(s.nameField=d),h.key===Re.Value&&(s.valueField=d)):u||(s.nameField||a||d.type!==I.fS.string||(s.nameField=d,h=Me(Re.Name)),s.valueField||i||d.type!==I.fS.number||(s.valueField=d,h=Me(Re.Value)))),!h&&n&&(h=Me(Re.Label)),s.index[c]={automatic:!u,handler:h,reducerId:null!==(r=null!==(o=null==u?void 0:u.reducerId)&&void 0!==o?o:null===(l=h)||void 0===l?void 0:l.defaultReducer)&&void 0!==r?r:Ce.gz.lastNotNull}}return s}var Fe,Ee,Ve;function ze(e){let{frame:t,mappings:n,onChange:s,withReducers:a,withNameAndValue:i}=e;const r=(0,ye.wW)(_e),o=function(e,t,n){const s=[],a=Le(e,null!=t?t:[],n);for(const t of e.fields){var i,r;const n=(0,R.C)(t,e),o=a.index[n],l=Be(o.handler,o.automatic);s.push({fieldName:n,configOption:o.automatic?null:l,placeholder:o.automatic?null==l?void 0:l.label:"Choose",handlerKey:null!==(i=null===(r=o.handler)||void 0===r?void 0:r.key)&&void 0!==i?i:null,reducerId:o.reducerId})}for(const e of t)if(!s.find((t=>t.fieldName===e.fieldName))){var o;const t=Me(e.handlerKey);s.push({fieldName:e.fieldName,handlerKey:e.handlerKey,configOption:Be(t,!1),missingInFrame:!0,reducerId:null!==(o=e.reducerId)&&void 0!==o?o:Ce.gz.lastNotNull})}return Object.values(s)}(t,n,i),l=Pe.map((e=>Be(e,!1)));return(0,W.jsxs)("table",{className:r.table,children:[(0,W.jsx)("thead",{children:(0,W.jsxs)("tr",{children:[Fe||(Fe=(0,W.jsx)("th",{children:"Field"})),Ee||(Ee=(0,W.jsx)("th",{children:"Use as"})),a&&(Ve||(Ve=(0,W.jsx)("th",{children:"Select"})))]})}),(0,W.jsx)("tbody",{children:o.map((e=>(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{className:r.labelCell,children:e.fieldName}),(0,W.jsx)("td",{className:r.selectCell,"data-testid":`${e.fieldName}-config-key`,children:(0,W.jsx)(E.Ph,{options:l,value:e.configOption,placeholder:e.placeholder,isClearable:!0,onChange:t=>((e,t)=>{const a=n.findIndex((t=>t.fieldName===e.fieldName));if(t)if(-1!==a){const e=[...n];e.splice(a,1,Object.assign({},n[a],{handlerKey:t.value})),s(e)}else s([...n,{fieldName:e.fieldName,handlerKey:t.value}]);else s(-1!==a?n.filter(((e,t)=>t!==a)):[...n,{fieldName:e.fieldName,handlerKey:"__ignore"}])})(e,t)})}),a&&(0,W.jsx)("td",{"data-testid":`${e.fieldName}-reducer`,className:r.selectCell,children:(0,W.jsx)(ke.m,{stats:[e.reducerId],defaultStat:e.reducerId,onChange:t=>((e,t)=>{const a=n.findIndex((t=>t.fieldName===e.fieldName));if(-1!==a){const e=[...n];e.splice(a,1,Object.assign({},n[a],{reducerId:t})),s(e)}else s([...n,{fieldName:e.fieldName,handlerKey:e.handlerKey,reducerId:t}])})(e,t[0])})})]},e.fieldName)))})]})}function Be(e,t){var n;if(!e)return null;let s=null!==(n=e.name)&&void 0!==n?n:(0,i.capitalize)(e.key);return t&&(s=`${s} (auto)`),{label:s,value:e.key}}const _e=e=>({table:O.css`
    margin-top: ${e.spacing(1)};

    td,
    th {
      border-right: 4px solid ${e.colors.background.primary};
      border-bottom: 4px solid ${e.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${e.typography.bodySmall.fontSize};
      line-height: ${e.spacing(4)};
      padding: ${e.spacing(0,1)};
    }
  `,labelCell:O.css`
    font-size: ${e.typography.bodySmall.fontSize};
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:O.css`
    padding: 0;
    min-width: 161px;
  `});var We=n(2101),Ue=n(94582);const He={id:P.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:e=>t=>t.pipe((0,We.U)((t=>function(e,t){var n;let s=null;for(const n of t)if(n.refId===e.configRefId){s=n;break}if(!s)return t;const a={fields:[],length:1},i=Le(s,null!==(n=e.mappings)&&void 0!==n?n:[],!1);for(const e of s.fields){const t=Object.assign({},e),n=(0,R.C)(e,s),r=i.index[n],o=(0,Ce.Kx)({field:e,reducers:[r.reducerId]});t.values=new Ue.G([o[r.reducerId]]),a.fields.push(t)}const r=[],o=(0,T.sq)(e.applyTo||{id:$.mi.numeric});for(const e of t){if(e===s&&t.length>1)continue;const n={fields:[],length:e.length};for(const s of e.fields)if(o(s,e,t)){const e=$e(a,0,i);n.fields.push(Object.assign({},s,{config:Object.assign({},s.config,e)}))}else n.fields.push(s);r.push(n)}return r}(e,t))))};const qe={id:He.id,editor:function(e){var t;let{input:n,onChange:s,options:a}=e;const i=(0,ye.wW)(Ze),r=n.map((e=>e.refId)).filter((e=>null!=e)).map((e=>({label:e,value:e}))),o=a.configRefId||"config",l=null!==(t=a.applyTo)&&void 0!==t?t:{id:$.mi.byType,options:"number"},d=we.i.get(l.id),c=n.find((e=>e.refId===o)),u=we.i.list().filter((e=>!e.excludeFromPicker)).map((e=>({label:e.name,value:e.id,description:e.description})));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Config query",labelWidth:20,children:(0,W.jsx)(E.Ph,{onChange:e=>{s(Object.assign({},a,{configRefId:e.value||"config"}))},options:r,value:o,width:30})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Apply to",labelWidth:20,children:(0,W.jsx)(E.Ph,{onChange:e=>{s(Object.assign({},a,{applyTo:{id:e.value}}))},options:u,value:l.id,width:30})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Apply to options",labelWidth:20,className:i.matcherOptions,children:(0,W.jsx)(d.component,{matcher:d.matcher,data:n,options:l.options,onChange:e=>{s(Object.assign({},a,{applyTo:{id:l.id,options:e}}))}})})}),(0,W.jsx)(je.Z,{children:c&&(0,W.jsx)(ze,{frame:c,mappings:a.mappings,onChange:e=>s(Object.assign({},a,{mappings:e})),withReducers:!0})})]})},transformation:He,name:He.name,description:He.description,state:de.BV.beta,help:"\n### Use cases\n\nThis transformation allows you select one query and from it extract standard options such as\n**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.\nThis enables dynamic query driven visualization configuration.\n\n### Options\n\n- **Config query**: Selet the query that returns the data you want to use as configuration.\n- **Apply to**: Select what fields or series to apply the configuration to.\n- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.\n\n### Field mapping table\n\nBelow the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.\n\n## Example\n\nInput[0] (From query: A, name: ServerA)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 10    |\n| 1626178119129 | 30    |\n\nInput[1] (From query: B)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 100   |\n| 1626178119129 | 100   |\n\nOutput (Same as Input[0] but now with config on the Value field)\n\n| Time          | Value (config: Max=100) |\n| ------------- | ----------------------- |\n| 1626178119127 | 10                      |\n| 1626178119129 | 30                      |\n\nEach row in the source data becomes a separate field. Each field now also has a maximum\nconfiguration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.\nin the panel editor options pane.\n\n## Value mappings\n\nYou can also transform a query result into value mappings. This is is a bit different because every\nrow in the configuration query result is used to define a single value mapping row. See the following example.\n\nConfig query result:\n\n| Value | Text   | Color |\n| ----- | ------ | ----- |\n| L     | Low    | blue  |\n| M     | Medium | green |\n| H     | High   | red   |\n\nIn the field mapping specify:\n\n| Field | Use as                  | Select     |\n| ----- | ----------------------- | ---------- |\n| Value | Value mappings / Value  | All values |\n| Text  | Value mappings / Text   | All values |\n| Color | Value mappings / Ciolor | All values |\n\nGrafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.\n"},Ze=e=>({matcherOptions:O.css`
    min-width: 404px;
  `});var Ge,Qe,Ke,Je,Ye,Xe=n(53786),et=n(81960),tt=n(42414),nt=n(54761),st=n(45904),at=n(52777);function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rt=[{value:tt.ie.BinaryOperation,label:"Binary operation"},{value:tt.ie.ReduceRow,label:"Reduce row"}],ot=new Set([I.fS.time,I.fS.number,I.fS.string]);class lt extends o.PureComponent{constructor(e){var t,n;super(e),it(this,"onToggleReplaceFields",(()=>{const{options:e}=this.props;this.props.onChange(Object.assign({},e,{replaceFields:!e.replaceFields}))})),it(this,"onModeChanged",(e=>{var t;const{options:n,onChange:s}=this.props,a=null!==(t=e.value)&&void 0!==t?t:tt.ie.BinaryOperation;s(Object.assign({},n,{mode:a}))})),it(this,"onAliasChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{alias:e.target.value}))})),it(this,"updateReduceOptions",(e=>{const{options:t,onChange:n}=this.props;n(Object.assign({},t,{mode:tt.ie.ReduceRow,reduce:e}))})),it(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),it(this,"onChange",(e=>{this.setState({selected:e});const{reduce:t}=this.props.options;this.updateReduceOptions(Object.assign({},t,{include:e}))})),it(this,"onStatsChange",(e=>{const t=e.length?e[0]:Ce.gz.sum,{reduce:n}=this.props.options;this.updateReduceOptions(Object.assign({},n,{reducer:t}))})),it(this,"updateBinaryOptions",(e=>{const{options:t,onChange:n}=this.props;n(Object.assign({},t,{mode:tt.ie.BinaryOperation,binary:e}))})),it(this,"onBinaryLeftChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{left:e.value}))})),it(this,"onBinaryRightChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{right:e.value}))})),it(this,"onBinaryOperationChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{operator:e.value}))})),this.state={include:(null===(t=e.options)||void 0===t||null===(n=t.reduce)||void 0===n?void 0:n.include)||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e;const{options:t}=this.props,n=(null==t||null===(e=t.reduce)||void 0===e?void 0:e.include)||[],s=(0,Xe.of)(this.props.input).pipe(D.Y.ensureColumnsTransformer.operator(null),this.extractAllNames(),this.extractNamesAndSelected(n)).subscribe((e=>{let{selected:t,names:n}=e;this.setState({names:n,selected:t},(()=>s.unsubscribe()))}))}extractAllNames(){return e=>e.pipe((0,We.U)((e=>{const t=[],n={};for(const s of e)for(const a of s.fields){if(!ot.has(a.type))continue;const i=(0,R.C)(a,s,e);n[i]||(n[i]=!0,t.push(i))}return t})))}extractNamesAndSelected(e){return t=>t.pipe((0,We.U)((t=>{if(!e.length)return{names:t,selected:[]};const n=[],s=[];for(const a of t)e.includes(a)&&s.push(a),n.push(a);return{names:n,selected:s}})))}renderReduceRow(e){const{names:t,selected:n}=this.state;return e=(0,i.defaults)(e,{reducer:Ce.gz.sum}),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[Ge||(Ge=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,W.jsx)(nt.Lh,{spacing:"xs",align:"flex-start",wrap:!0,children:t.map(((e,t)=>(0,W.jsx)(st.B,{onClick:()=>{this.onFieldToggle(e)},label:e,selected:n.indexOf(e)>-1},`${e}/${t}`)))})]})}),(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form",children:[Qe||(Qe=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Calculation"})),(0,W.jsx)(ke.m,{allowMultiple:!1,className:"width-18",stats:[e.reducer],onChange:this.onStatsChange,defaultStat:Ce.gz.sum})]})})]})}renderBinaryOperation(e){var t,n,s,a,r,o,l,d,c;let u=!(null!==(t=e=(0,i.defaults)(e,{reducer:Ce.gz.sum}))&&void 0!==t&&t.left),h=!(null!==(n=e)&&void 0!==n&&n.right);const p=this.state.names.map((t=>{var n,s;return t===(null===(n=e)||void 0===n?void 0:n.left)&&(u=!0),t===(null===(s=e)||void 0===s?void 0:s.right)&&(h=!0),{label:t,value:t}})),g=u?p:[...p,{label:null===(s=e)||void 0===s?void 0:s.left,value:null===(a=e)||void 0===a?void 0:a.left}],m=h?p:[...p,{label:null===(r=e)||void 0===r?void 0:r.right,value:null===(o=e)||void 0===o?void 0:o.right}],f=et.n.list().map((e=>({label:e.id,value:e.id})));return(0,W.jsxs)("div",{className:"gf-form-inline",children:[Ke||(Ke=(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Operation"})})),(0,W.jsxs)("div",{className:"gf-form",children:[(0,W.jsx)(E.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:g,className:"min-width-18 gf-form-spacing",value:null===(l=e)||void 0===l?void 0:l.left,onChange:this.onBinaryLeftChanged}),(0,W.jsx)(E.Ph,{className:"width-8 gf-form-spacing",options:f,value:null!==(d=e.operator)&&void 0!==d?d:f[0].value,onChange:this.onBinaryOperationChanged}),(0,W.jsx)(E.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:m,value:null===(c=e)||void 0===c?void 0:c.right,onChange:this.onBinaryRightChanged})]})]})}render(){var e,t;const{options:n}=this.props,s=null!==(e=n.mode)&&void 0!==e?e:tt.ie.BinaryOperation;return(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form",children:[Je||(Je=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Mode"})),(0,W.jsx)(E.Ph,{className:"width-18",options:rt,value:rt.find((e=>e.value===s)),onChange:this.onModeChanged})]})}),s===tt.ie.BinaryOperation&&this.renderBinaryOperation(n.binary),s===tt.ie.ReduceRow&&this.renderReduceRow(n.reduce),(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form",children:[Ye||(Ye=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Alias"})),(0,W.jsx)(z.I,{className:"width-18",value:null!==(t=n.alias)&&void 0!==t?t:"",placeholder:(0,tt.h)(n),onChange:this.onAliasChanged})]})}),(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)(at.vw6.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!n.replaceFields,onChange:this.onToggleReplaceFields})})})]})}}const dt={id:P.W.calculateField,editor:lt,transformation:D.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ct,ut,ht=n(75499);function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gt=[{value:ht.HO.FieldName,label:"Copy frame name to field name"},{value:ht.HO.Label,label:"Add a label with the frame name"},{value:ht.HO.Drop,label:"Ignore the frame name"}];class mt extends o.PureComponent{constructor(e){super(e),pt(this,"onModeChanged",(e=>{var t;const{options:n,onChange:s}=this.props,a=null!==(t=e.value)&&void 0!==t?t:ht.HO.FieldName;s(Object.assign({},n,{frameNameMode:a}))})),pt(this,"onLabelChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{frameNameLabel:e.target.value}))}))}render(){var e,t;const{options:n}=this.props,s=null!==(e=n.frameNameMode)&&void 0!==e?e:ht.HO.FieldName;return(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form",children:[ct||(ct=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Name"})),(0,W.jsx)(E.Ph,{className:"width-18",options:gt,value:gt.find((e=>e.value===s)),onChange:this.onModeChanged})]})}),s===ht.HO.Label&&(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form",children:[ut||(ut=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Label"})),(0,W.jsx)(z.I,{className:"width-18",value:null!==(t=n.frameNameLabel)&&void 0!==t?t:"",placeholder:"frame",onChange:this.onLabelChanged})]})})]})}}const ft={id:P.W.concatenate,editor:mt,transformation:D.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var vt=n(90261);const bt={settings:{width:24}},xt={id:P.W.convertFieldType,editor:e=>{let{input:t,options:n,onChange:s}=e;const a=[{value:I.fS.number,label:"Numeric"},{value:I.fS.string,label:"String"},{value:I.fS.time,label:"Time"},{value:I.fS.boolean,label:"Boolean"},{value:I.fS.other,label:"JSON"}],i=(0,o.useCallback)((e=>t=>{const a=n.conversions;a[e]=Object.assign({},a[e],{targetField:null!=t?t:""}),s(Object.assign({},n,{conversions:a}))}),[s,n]),r=(0,o.useCallback)((e=>t=>{const a=n.conversions;a[e]=Object.assign({},a[e],{destinationType:t.value}),s(Object.assign({},n,{conversions:a}))}),[s,n]),l=(0,o.useCallback)((e=>t=>{const a=n.conversions;a[e]=Object.assign({},a[e],{dateFormat:t.currentTarget.value}),s(Object.assign({},n,{conversions:a}))}),[s,n]),d=(0,o.useCallback)((()=>{s(Object.assign({},n,{conversions:[...n.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]}))}),[s,n]),c=(0,o.useCallback)((e=>{const t=n.conversions;t.splice(e,1),s(Object.assign({},n,{conversions:t}))}),[s,n]);return(0,W.jsxs)(W.Fragment,{children:[n.conversions.map(((e,n)=>{var s;return(0,W.jsxs)(je.Z,{children:[(0,W.jsx)(Se._,{label:"Field",children:(0,W.jsx)(vt.b,{context:{data:t},value:null!==(s=e.targetField)&&void 0!==s?s:"",onChange:i(n),item:bt})}),(0,W.jsx)(Se._,{label:"as",children:(0,W.jsx)(E.Ph,{options:a,value:e.destinationType,placeholder:"Type",onChange:r(n),width:18})}),e.destinationType===I.fS.time&&(0,W.jsx)(Se._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly.",children:(0,W.jsx)(z.I,{value:e.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:l(n),width:24})}),(0,W.jsx)(L.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>c(n),"aria-label":"Remove convert field type transformer"})]},`${e.targetField}-${n}`)})),(0,W.jsx)(L.zx,{size:"sm",icon:"plus",onClick:d,variant:"secondary","aria-label":"Add a convert field type transformer",children:"Convert field type"})]})},transformation:D.Y.convertFieldTypeTransformer,name:D.Y.convertFieldTypeTransformer.name,description:D.Y.convertFieldTypeTransformer.description};var yt,wt=n(56949),jt=n(65678);function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ct extends o.PureComponent{constructor(e){var t,n;super(e),St(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),St(this,"onChange",(e=>{const{regex:t,isRegexValid:n}=this.state,s=Object.assign({},this.props.options,{include:{names:e}});var a;t&&n&&(s.include=null!==(a=s.include)&&void 0!==a?a:{},s.include.pattern=t);this.setState({selected:e},(()=>{this.props.onChange(s)}))})),St(this,"onInputBlur",(e=>{const{selected:t,regex:n}=this.state;let s=!0;try{n&&(0,wt.jO)(n)}catch(e){s=!1}s?this.props.onChange(Object.assign({},this.props.options,{include:{pattern:n}})):this.props.onChange(Object.assign({},this.props.options,{include:{names:t}})),this.setState({isRegexValid:s})})),this.state={include:(null===(t=e.options.include)||void 0===t?void 0:t.names)||[],regex:null===(n=e.options.include)||void 0===n?void 0:n.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e,t,n;const{input:s,options:a}=this.props,i=Array.from(null!==(e=null===(t=a.include)||void 0===t?void 0:t.names)&&void 0!==e?e:[]),r=[],o={};for(const e of s)for(const t of e.fields){const n=(0,R.C)(t,e,s);let a=o[n];a||(a=o[n]={name:n,count:0},r.push(a)),a.count++}if(null!==(n=a.include)&&void 0!==n&&n.pattern)try{const e=(0,wt.jO)(a.include.pattern);for(const t of r)e.test(t.name)&&i.push(t.name)}catch(e){console.error(e)}if(i.length){var l;const e=r.filter((e=>i.includes(e.name)));this.setState({options:r,selected:e.map((e=>e.name)),regex:null===(l=a.include)||void 0===l?void 0:l.pattern})}else{var d;this.setState({options:r,selected:r.map((e=>e.name)),regex:null===(d=a.include)||void 0===d?void 0:d.pattern})}}render(){const{options:e,selected:t,isRegexValid:n}=this.state;return(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[yt||(yt=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Identifier"})),(0,W.jsxs)(nt.Lh,{spacing:"xs",align:"flex-start",wrap:!0,children:[(0,W.jsx)(jt.g,{invalid:!n,error:n?void 0:"Invalid pattern",className:O.css`
                margin-bottom: 0;
              `,children:(0,W.jsx)(z.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:e=>this.setState({regex:e.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),e.map(((e,n)=>{const s=`${e.name}${e.count>1?" ("+e.count+")":""}`,a=t.indexOf(e.name)>-1;return(0,W.jsx)(st.B,{onClick:()=>{this.onFieldToggle(e.name)},label:s,selected:a},`${e.name}/${n}`)}))]})]})})}}const kt={id:P.W.filterFieldsByName,editor:Ct,transformation:D.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Nt;function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class It extends o.PureComponent{constructor(e){super(e),Ot(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),Ot(this,"onChange",(e=>{this.setState({selected:e}),this.props.onChange(Object.assign({},this.props.options,{include:e.join("|")}))})),this.state={include:e.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){const{input:e,options:t}=this.props,n=t.include?t.include.split("|"):[],s=[],a={};for(const t of e)if(t.refId){let e=a[t.refId];e||(e=a[t.refId]={refId:t.refId,count:0},s.push(e)),e.count++}if(n.length){const e=[],t=[];for(const a of s)n.includes(a.refId)&&t.push(a),e.push(a);this.setState({options:e,selected:t.map((e=>e.refId))})}else this.setState({options:s,selected:[]})}render(){const{options:e,selected:t}=this.state;return(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[Nt||(Nt=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Series refId"})),(0,W.jsx)(nt.Lh,{spacing:"xs",align:"flex-start",wrap:!0,children:e.map(((e,n)=>{const s=`${e.refId}${e.count>1?" ("+e.count+")":""}`,a=t.indexOf(e.refId)>-1;return(0,W.jsx)(st.B,{onClick:()=>{this.onFieldToggle(e.refId)},label:s,selected:a},`${e.refId}/${n}`)}))})]})})}}const Tt={id:P.W.filterByRefId,editor:It,transformation:D.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var $t=n(10802);function Rt(e){return(0,o.useMemo)((()=>Array.isArray(e)?Object.keys(e.reduce(((t,n)=>n&&Array.isArray(n.fields)?n.fields.reduce(((t,s)=>(t[(0,R.C)(s,n,e)]=!0,t)),t):t),{})):[]),[e])}function Pt(e){const t=new Set;for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.add(n);return t}const Dt=[{label:"Group by",value:$t.x.groupBy},{label:"Calculate",value:$t.x.aggregate}],At=e=>{let{fieldName:t,config:n,onConfigChange:s}=e;const a=Mt(),i=(0,o.useCallback)((e=>{var t,a;s({aggregations:null!==(t=null==n?void 0:n.aggregations)&&void 0!==t?t:[],operation:null!==(a=null==e?void 0:e.value)&&void 0!==a?a:null})}),[n,s]);return(0,W.jsxs)("div",{className:(0,O.cx)("gf-form-inline",a.row),children:[(0,W.jsx)("div",{className:(0,O.cx)("gf-form",a.fieldName),children:(0,W.jsx)("div",{className:(0,O.cx)("gf-form-label",a.rowSpacing),children:t})}),(0,W.jsx)("div",{className:(0,O.cx)("gf-form",a.cell),children:(0,W.jsx)("div",{className:(0,O.cx)("gf-form-spacing",a.rowSpacing),children:(0,W.jsx)(E.Ph,{className:"width-12",options:Dt,value:null==n?void 0:n.operation,placeholder:"Ignored",onChange:i,isClearable:!0})})}),(null==n?void 0:n.operation)===$t.x.aggregate&&(0,W.jsx)("div",{className:(0,O.cx)("gf-form","gf-form--grow",a.calculations),children:(0,W.jsx)(ke.m,{className:(0,O.cx)("flex-grow-1",a.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:n.aggregations,onChange:e=>{s(Object.assign({},n,{aggregations:e}))}})})]})},Mt=(0,F.B)((()=>{const e=O.css`
    display: table-cell;
  `;return{row:O.css`
      display: table-row;
    `,cell:e,rowSpacing:O.css`
      margin-bottom: 4px;
    `,fieldName:O.css`
      ${e}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:O.css`
      ${e}
      width: 99%;
    `}})),Lt={id:P.W.groupBy,editor:e=>{let{input:t,options:n,onChange:s}=e;const a=Rt(t),i=(0,o.useCallback)((e=>t=>{s(Object.assign({},n,{fields:Object.assign({},n.fields,{[e]:t})}))}),[s]);return(0,W.jsx)("div",{children:a.map((e=>(0,W.jsx)(At,{onConfigChange:i(e),fieldName:e,config:n.fields[e]},e)))})},transformation:D.Y.groupByTransformer,name:D.Y.groupByTransformer.name,description:D.Y.groupByTransformer.description},Ft={id:P.W.groupingToMatrix,editor:e=>{let{input:t,options:n,onChange:s}=e;const a=Rt(t).map((e=>({label:e,value:e}))),i=(0,o.useCallback)((e=>{s(Object.assign({},n,{columnField:null==e?void 0:e.value}))}),[s,n]),r=(0,o.useCallback)((e=>{s(Object.assign({},n,{rowField:null==e?void 0:e.value}))}),[s,n]),l=(0,o.useCallback)((e=>{s(Object.assign({},n,{valueField:null==e?void 0:e.value}))}),[s,n]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(je.Z,{children:[(0,W.jsx)(Se._,{label:"Column",labelWidth:8,children:(0,W.jsx)(E.Ph,{options:a,value:n.columnField,onChange:i,isClearable:!0})}),(0,W.jsx)(Se._,{label:"Row",labelWidth:8,children:(0,W.jsx)(E.Ph,{options:a,value:n.rowField,onChange:r,isClearable:!0})}),(0,W.jsx)(Se._,{label:"Cell Value",labelWidth:10,children:(0,W.jsx)(E.Ph,{options:a,value:n.valueField,onChange:l,isClearable:!0})})]})})},transformation:D.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Et=n(37800),Vt=n(70800),zt=n(92155);const Bt={id:P.W.histogram,editor:e=>{var t;let{input:n,options:s,onChange:a}=e;const i=(0,o.useCallback)((e=>{a(Object.assign({},s,{bucketSize:e}))}),[a,s]),r=(0,o.useCallback)((e=>{a(Object.assign({},s,{bucketOffset:e}))}),[a,s]),l=(0,o.useCallback)((()=>{a(Object.assign({},s,{combine:!s.combine}))}),[a,s]);return(0,W.jsxs)("div",{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{labelWidth:18,label:Et.py.bucketSize.name,tooltip:Et.py.bucketSize.description,children:(0,W.jsx)(zt.Y,{value:s.bucketSize,placeholder:"auto",onChange:i,min:0})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{labelWidth:18,label:Et.py.bucketOffset.name,tooltip:Et.py.bucketOffset.description,children:(0,W.jsx)(zt.Y,{value:s.bucketOffset,placeholder:"none",onChange:r,min:0})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{labelWidth:18,label:Et.py.combine.name,tooltip:Et.py.combine.description,children:(0,W.jsx)(Vt.x,{value:null!==(t=s.combine)&&void 0!==t&&t,onChange:l})})})]})},transformation:D.Y.histogramTransformer,name:D.Y.histogramTransformer.name,description:D.Y.histogramTransformer.description};var _t=n(25783);const Wt=[{value:_t.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:_t.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];const Ut={id:P.W.joinByField,aliasIds:[P.W.seriesToColumns],editor:function(e){var t;let{input:n,options:s,onChange:a}=e;const i=Rt(n).map((e=>({label:e,value:e}))),r=(0,o.useCallback)((e=>{a(Object.assign({},s,{byField:null==e?void 0:e.value}))}),[a,s]),l=(0,o.useCallback)((e=>{a(Object.assign({},s,{mode:null==e?void 0:e.value}))}),[a,s]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Mode",labelWidth:8,grow:!0,children:(0,W.jsx)(E.Ph,{options:Wt,value:null!==(t=s.mode)&&void 0!==t?t:_t.c.outer,onChange:l})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Field",labelWidth:8,grow:!0,children:(0,W.jsx)(E.Ph,{options:i,value:s.byField,onChange:r,placeholder:"time",isClearable:!0})})})]})},transformation:D.Y.joinByFieldTransformer,name:D.Y.joinByFieldTransformer.name,description:D.Y.joinByFieldTransformer.description};var Ht=n(9695),qt=n(68522);const Zt=["keepLabels"];const Gt=[{value:Ht.k.Columns,label:"Columns"},{value:Ht.k.Rows,label:"Rows"}],Qt={id:P.W.labelsToFields,editor:e=>{var t;let{input:n,options:s,onChange:a}=e;const{labelNames:i,selected:r}=(0,o.useMemo)((()=>{var e;let t=[],a={};for(const e of n)for(const n of e.fields)if(n.labels)for(const e of Object.keys(n.labels))a[e]||(t.push({value:e,label:e}),a[e]=!0);return{labelNames:t,selected:new Set(null!==(e=s.keepLabels)&&void 0!==e&&e.length?s.keepLabels:Object.keys(a))}}),[s.keepLabels,n]),l=e=>{if(r.has(e)?r.delete(e):r.add(e),r.size!==i.length&&r.size)a(Object.assign({},s,{keepLabels:[...r]}));else{const e=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(s,Zt);a(e)}};return(0,W.jsxs)("div",{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Mode",labelWidth:20,children:(0,W.jsx)(M.S,{options:Gt,value:null!==(t=s.mode)&&void 0!==t?t:Ht.k.Columns,onChange:e=>a(Object.assign({},s,{mode:e}))})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Labels",labelWidth:20,children:(0,W.jsx)(qt.Stack,{gap:1,wrap:!0,children:i.map(((e,t)=>{const n=e.label;return(0,W.jsx)(st.B,{onClick:()=>l(n),label:n,selected:r.has(n)},`${n}/${t}`)}))})})}),s.mode!==Ht.k.Rows&&(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name",children:(0,W.jsx)(E.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:i,value:null==s?void 0:s.valueLabel,onChange:e=>{a(Object.assign({},s,{valueLabel:null==e?void 0:e.value}))},className:"min-width-16"})})})]})},transformation:D.Y.labelsToFieldsTransformer,name:"Labels to fields",description:"Groups series by time and return labels or tags as fields.\n                Useful for showing time series with labels in a table where each label key becomes a separate column"},Kt={id:P.W.limit,editor:e=>{let{options:t,onChange:n}=e;const s=(0,o.useCallback)((e=>{n(Object.assign({},t,{limitField:Number(e.currentTarget.value)}))}),[n,t]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Limit",labelWidth:8,children:(0,W.jsx)(z.I,{placeholder:"Limit count",pattern:"[0-9]*",value:t.limitField,onChange:s,width:25})})})})},transformation:D.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."};var Jt,Yt=n(31625);const Xt={id:P.W.merge,editor:e=>{let{input:t,options:n,onChange:s}=e;return t.length<=1?Jt||(Jt=(0,W.jsx)(Yt.S,{children:"Merge has no effect when applied on a single frame."})):null},transformation:D.Y.mergeTransformer,name:"Merge",description:"Merge many series/tables and return a single table where mergeable values will be combined into the same row.\n                Useful for showing multiple series, tables or a combination of both visualized in a table."};var en,tn=n(19677),nn=n(18602),sn=n(99500),an=n(23734);const rn=e=>{const{options:t,input:n,onChange:s}=e,{indexByName:a,excludeByName:i,renameByName:r}=t,l=Rt(n),d=(0,o.useMemo)((()=>cn(l,a)),[l,a]),c=(0,o.useCallback)(((e,n)=>{s(Object.assign({},t,{excludeByName:Object.assign({},i,{[e]:n})}))}),[s,t,i]),u=(0,o.useCallback)((e=>{if(!e||!e.destination)return;const n=e.source.index,a=e.destination.index;n!==a&&s(Object.assign({},t,{indexByName:dn(l,n,a)}))}),[s,t,l]),h=(0,o.useCallback)(((e,n)=>{s(Object.assign({},t,{renameByName:Object.assign({},t.renameByName,{[e]:n})}))}),[s,t]);return n.length>1?en||(en=(0,W.jsx)(Yt.S,{children:"Organize fields only works with a single frame. Consider applying a join transformation first."})):(0,W.jsx)(tn.Z5,{onDragEnd:u,children:(0,W.jsx)(tn.bK,{droppableId:"sortable-fields-transformer",direction:"vertical",children:e=>(0,W.jsxs)("div",Object.assign({ref:e.innerRef},e.droppableProps,{children:[d.map(((e,t)=>(0,W.jsx)(on,{fieldName:e,renamedFieldName:r[e],index:t,onToggleVisibility:c,onRenameField:h,visible:!i[e]},e))),e.placeholder]}))})})};rn.displayName="OrganizeFieldsTransformerEditor";const on=e=>{let{fieldName:t,renamedFieldName:n,index:s,visible:a,onToggleVisibility:i,onRenameField:r}=e;const o=(0,ye.wW)(ln);return(0,W.jsx)(tn._l,{draggableId:t,index:s,children:e=>(0,W.jsx)("div",Object.assign({className:"gf-form-inline",ref:e.innerRef},e.draggableProps,{children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,W.jsxs)("div",{className:"gf-form-label gf-form-label--justify-left width-30",children:[(0,W.jsx)(sn.J,Object.assign({name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:o.draggable},e.dragHandleProps)),(0,W.jsx)(an.h,{className:o.toggle,size:"md",name:a?"eye":"eye-slash",onClick:()=>i(t,a)}),(0,W.jsx)("span",{className:o.name,title:t,children:t})]}),(0,W.jsx)(z.I,{className:"flex-grow-1",defaultValue:n||"",placeholder:`Rename ${t}`,onBlur:e=>r(t,e.currentTarget.value)})]})}))})};on.displayName="DraggableFieldName";const ln=e=>({toggle:O.css`
    margin: 0 8px;
    color: ${e.colors.text.secondary};
  `,draggable:O.css`
    opacity: 0.4;
    &:hover {
      color: ${e.colors.text.maxContrast};
    }
  `,name:O.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${e.typography.bodySmall.fontSize};
    font-weight: ${e.typography.fontWeightMedium};
  `}),dn=(e,t,n)=>{const s=Array.from(e),[a]=s.splice(t,1);return s.splice(n,0,a),s.reduce(((e,t,n)=>(e[t]=n,e)),{})},cn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||0===Object.keys(t).length)return e;const n=(0,nn.$)(t);return e.sort(n)},un={id:P.W.organize,editor:rn,transformation:D.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var hn=n(27275),pn=n(25004);const gn={id:P.W.reduce,editor:e=>{let{options:t,onChange:n}=e;const s=[{label:"Series to rows",value:hn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:hn.AL.ReduceFields,description:"Collapse each field into a single value"}],a=(0,o.useCallback)((e=>{const s=e.value;n(Object.assign({},t,{mode:s,includeTimeField:s===hn.AL.ReduceFields&&!!t.includeTimeField}))}),[n,t]),i=(0,o.useCallback)((()=>{n(Object.assign({},t,{includeTimeField:!t.includeTimeField}))}),[n,t]),r=(0,o.useCallback)((()=>{n(Object.assign({},t,{labelsToFields:!t.labelsToFields}))}),[n,t]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,W.jsx)("div",{className:"gf-form-label width-8","aria-label":pn.wl.components.Transforms.Reduce.modeLabel,children:"Mode"}),(0,W.jsx)(E.Ph,{options:s,value:s.find((e=>e.value===t.mode))||s[0],onChange:a,className:"flex-grow-1"})]})}),(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,W.jsx)("div",{className:"gf-form-label width-8","aria-label":pn.wl.components.Transforms.Reduce.calculationsLabel,children:"Calculations"}),(0,W.jsx)(ke.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:t.reducers||[],onChange:e=>{n(Object.assign({},t,{reducers:e}))}})]})}),t.mode===hn.AL.ReduceFields&&(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)(at.vw6.Switch,{label:"Include time",labelClass:"width-8",checked:!!t.includeTimeField,onChange:i})})}),t.mode!==hn.AL.ReduceFields&&(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsx)("div",{className:"gf-form",children:(0,W.jsx)(at.vw6.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!t.labelsToFields,onChange:r})})})]})},transformation:D.Y.reduceTransformer,name:D.Y.reduceTransformer.name,description:D.Y.reduceTransformer.description};var mn,fn;function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class bn extends o.PureComponent{constructor(e){super(e),vn(this,"handleRegexChange",(e=>{const t=e.currentTarget.value;let n=!0;if(t)try{t&&(0,wt.jO)(t)}catch(e){n=!1}this.setState((e=>Object.assign({},e,{regex:t,isRegexValid:n})))})),vn(this,"handleRenameChange",(e=>{const t=e.currentTarget.value;this.setState((e=>Object.assign({},e,{renamePattern:t})))})),vn(this,"handleRegexBlur",(e=>{const t=e.currentTarget.value;let n=!0;try{t&&(0,wt.jO)(t)}catch(e){n=!1}this.setState({isRegexValid:n},(()=>{n&&this.props.onChange(Object.assign({},this.props.options,{regex:t}))}))})),vn(this,"handleRenameBlur",(e=>{const t=e.currentTarget.value;this.setState({renamePattern:t},(()=>this.props.onChange(Object.assign({},this.props.options,{renamePattern:t}))))})),this.state={regex:e.options.regex,renamePattern:e.options.renamePattern,isRegexValid:!0}}render(){const{regex:e,renamePattern:t,isRegexValid:n}=this.state;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[mn||(mn=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Match"})),(0,W.jsx)(jt.g,{invalid:!n,error:n?void 0:"Invalid pattern",className:O.css`
                margin-bottom: 0;
              `,children:(0,W.jsx)(z.I,{placeholder:"Regular expression pattern",value:e||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})})]})}),(0,W.jsx)("div",{className:"gf-form-inline",children:(0,W.jsxs)("div",{className:"gf-form gf-form--grow",children:[fn||(fn=(0,W.jsx)("div",{className:"gf-form-label width-8",children:"Replace"})),(0,W.jsx)(jt.g,{className:O.css`
                margin-bottom: 0;
              `,children:(0,W.jsx)(z.I,{placeholder:"Replacement pattern",value:t||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})})]})}}const xn={id:P.W.renameByRegex,editor:bn,transformation:D.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},yn={id:P.W.seriesToRows,editor:e=>{let{input:t,options:n,onChange:s}=e;return null},transformation:D.Y.seriesToRowsTransformer,name:"Series to rows",description:"Merge many series and return a single series with time, metric and value as columns.\n                Useful for showing multiple time series visualized in a table."},wn={id:P.W.sortBy,editor:e=>{var t;let{input:n,options:s,onChange:a}=e;const i=Rt(n).map((e=>({label:e,value:e}))),r=(0,o.useCallback)(((e,t)=>{a(Object.assign({},s,{sort:[t]}))}),[a,s]),l=null!==(t=s.sort)&&void 0!==t&&t.length?s.sort:[{}];return(0,W.jsx)("div",{children:l.map(((e,t)=>(0,W.jsxs)(je.Z,{children:[(0,W.jsx)(Se._,{label:"Field",labelWidth:10,grow:!0,children:(0,W.jsx)(E.Ph,{options:i,value:e.field,placeholder:"Select field",onChange:n=>{r(t,Object.assign({},e,{field:n.value}))}})}),(0,W.jsx)(Se._,{label:"Reverse",children:(0,W.jsx)(Vt.x,{value:!!e.desc,onChange:()=>{r(t,Object.assign({},e,{desc:!e.desc}))}})})]},`${e.field}/${t}`)))})},transformation:D.Y.sortByTransformer,name:D.Y.sortByTransformer.name,description:D.Y.sortByTransformer.description};var jn=n(68633),Sn=n(20223);let Cn;!function(e){e.JSON="json",e.KeyValues="kvp",e.Auto="auto"}(Cn||(Cn={}));const kn=[{id:Cn.JSON,name:"JSON",description:"Parse JSON string",parse:e=>JSON.parse(e)},{id:Cn.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:function(e){const t=[];let n="",s="";const a={};for(let i=0;i<e.length;i++){let r=e[i];r===n&&(n="",r=e[++i]);const o="\\"===r;if(o&&(r=e[++i]),o||n.length)t.push(r);else switch('"'!==r&&"'"!==r||(n=r),r){case":":case"=":t.length&&(s&&(a[s]=""),s=t.join(""),t.length=0);break;case'"':case"'":case" ":case"\n":case"\t":case"\r":case"\n":t.length&&""===s&&(a[t.join("")]="",t.length=0);case",":case";":case"&":case"{":case"}":if(t.length){const e=t.join("");s.length?(a[s]=e,s=""):s=e,t.length=0}break;default:t.push(r),i===e.length-1&&""===s&&t.length&&(a[t.join("")]="",t.length=0)}}return s.length&&(a[s]=t.join("")),a}}],Nn={id:Cn.Auto,name:"Auto",description:"parse new fields automatically",parse:e=>{for(const t of kn)try{const n=t.parse(e);if(null!=n)return n}catch{}}},On=new V.B((()=>[...kn,Nn])),In={id:P.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:e=>t=>t.pipe((0,We.U)((t=>In.transformer(e)(t)))),transformer:e=>t=>t.map((t=>function(e,t){var n;if(!t.source)return e;const s=(0,Sn.PI)(e,t.source);if(!s)return e;const a=On.getIfExists(null!==(n=t.format)&&void 0!==n?n:Cn.Auto);if(!a)throw new Error("unkonwn extractor");const r=e.length,o=[],l=new Map;for(let e=0;e<r;e++){let t=s.values.get(e);if((0,i.isString)(t))try{t=a.parse(t)}catch{t={}}for(const[n,s]of Object.entries(t)){let t=l.get(n);null==t&&(t=new Array(r),l.set(n,t),o.push(n)),t[e]=s}}const d=o.map((e=>{const t=l.get(e);return{name:e,values:new Ue.G(t),type:t?(0,jn.DP)(t.find((e=>null!=e))):I.fS.other,config:{}}}));t.replace||d.unshift(...e.fields);return Object.assign({},e,{fields:d})}(t,e)))};const Tn={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},$n={id:P.W.extractFields,editor:e=>{var t,n;let{input:s,options:a,onChange:i}=e;const r=On.selectOptions(a.format?[a.format]:void 0);return(0,W.jsxs)("div",{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Source",labelWidth:16,children:(0,W.jsx)(vt.b,{context:{data:s},value:null!==(t=a.source)&&void 0!==t?t:"",onChange:e=>{i(Object.assign({},a,{source:e}))},item:Tn})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Format",labelWidth:16,children:(0,W.jsx)(E.Ph,{value:r.current[0],options:r.options,onChange:e=>{i(Object.assign({},a,{format:null==e?void 0:e.value}))},width:24,placeholder:"Auto"})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Replace all fields",labelWidth:16,children:(0,W.jsx)(Vt.x,{value:null!==(n=a.replace)&&void 0!==n&&n,onChange:()=>{i(Object.assign({},a,{replace:!a.replace}))}})})})]})},transformation:In,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Rn=n(2843),Pn=n(15013);const Dn={id:P.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:e=>t=>t.pipe((0,We.U)((t=>Dn.transformer(e)(t)))),transformer:e=>t=>t&&t.length?[An(e,t)]:t};function An(e,t){var n,s;if(null===(n=e.value)||void 0===n||!n.length)return Mn("No value labele configured");const a=Pt(t);if(a.size<1)return Mn("No labels in result");if(!a.has(e.value))return Mn("Value label not found");let i=null!==(s=e.join)&&void 0!==s&&s.length?e.join:Array.from(a);i=i.filter((t=>t!==e.value));const r=new Set,o=new Map,l={};for(const n of t)for(const t of n.fields)if(t.labels&&t.type!==I.fS.time){const n=i.map((e=>t.labels[e])),s=n.join(",");let a=o.get(s);a||(a={keys:n,values:{}},o.set(s,a));const d=t.labels[e.value],c=t.values.toArray(),u=a.values[d];a.values[d]=u?u.concat(c):c,l[d]||(l[d]=t),r.add(d)}const d=Array.from(r),c=i.map((()=>[])),u=d.map((()=>[]));for(const e of o.values()){let t=-1,n=!1;for(;!n;){t++,n=!0;for(let t=0;t<i.length;t++)c[t].push(e.keys[t]);for(let s=0;s<d.length;s++){var h;const a=d[s],i=null!==(h=e.values[a])&&void 0!==h?h:[];u[s].push(i[t]),i.length>t+1&&(n=!1)}}}const p={fields:[],length:u[0].length};for(let e=0;e<i.length;e++)p.fields.push({name:i[e],config:{},type:I.fS.string,values:new Ue.G(c[e])});for(let e=0;e<d.length;e++){var g;const t=l[d[e]];p.fields.push({name:d[e],config:{},type:null!==(g=t.type)&&void 0!==g?g:I.fS.number,values:new Ue.G(u[e])})}return p}function Mn(e){return{meta:{notices:[{severity:"error",text:e}]},fields:[{name:"Error",type:I.fS.string,config:{},values:new Ue.G([e])}],length:0}}var Ln,Fn;const En={id:Dn.id,editor:function(e){var t;let{input:n,options:s,onChange:a}=e;const i=(0,o.useMemo)((()=>{var e;let t;const a=Pt(n),i=Array.from(a).map((e=>({label:e,value:e})));let r=i.find((e=>e.value===s.value));!r&&s.value&&(r={label:`${s.value} (not found)`,value:s.value},i.push(r)),n.length?0===a.size&&(t=Fn||(Fn=(0,W.jsx)(Rn.b,{title:"No labels found",children:"The input does not contain any labels"}))):t=Ln||(Ln=(0,W.jsx)(Rn.b,{title:"No input found",children:"No input (or labels) found"})),a.delete(s.value);const o=Array.from(a).map((e=>({label:e,value:e})));let l=o;const d=Boolean(null===(e=s.join)||void 0===e?void 0:e.length);let c="Join";return d?l=o.filter((e=>!s.join.includes(e.value))):c=o.map((e=>e.value)).join(", "),{warn:t,valueOptions:i,valueOption:r,joinOptions:o,addOptions:l,addText:c,hasJoin:d,key:Date.now()}}),[s,n]),r=e=>{const t=null==e?void 0:e.value;if(!t)return;const n=s.join?s.join.slice():[];n.push(t),a(Object.assign({},s,{join:n}))},l="No labels found";return(0,W.jsxs)("div",{children:[i.warn,(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{error:"required",invalid:!Boolean(null===(t=s.value)||void 0===t?void 0:t.length),label:"Value",labelWidth:10,tooltip:"Select the label indicating the values name",children:(0,W.jsx)(E.Ph,{options:i.valueOptions,value:i.valueOption,onChange:e=>a(Object.assign({},s,{value:e.value})),noOptionsMessage:l})})}),i.hasJoin?s.join.map(((e,t)=>(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Join",labelWidth:10,error:"Unable to join by the value label",invalid:e===s.value,children:(0,W.jsxs)(nt.Lh,{children:[(0,W.jsx)(E.Ph,{options:i.joinOptions,value:i.joinOptions.find((t=>t.value===e)),isClearable:!0,onChange:e=>((e,t)=>{if(!s.join)return;const n=s.join.slice();if(t)n[e]=t;else if(n.splice(e,1),!n.length)return void a(Object.assign({},s,{join:void 0}));const i=new Set(n);s.value&&i.delete(s.value),a(Object.assign({},s,{join:Array.from(i)}))})(t,null==e?void 0:e.value),noOptionsMessage:l}),Boolean(i.addOptions.length&&t===s.join.length-1)&&(0,W.jsx)(Pn.b,{icon:"plus",label:"",options:i.addOptions,onChange:r,variant:"secondary"})]})})},e+t))):(0,W.jsx)(W.Fragment,{children:Boolean(i.addOptions.length)&&(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Join",labelWidth:10,children:(0,W.jsx)(E.Ph,{options:i.addOptions,placeholder:i.addText,onChange:r,noOptionsMessage:l})})})})]})},transformation:Dn,name:Dn.name,description:Dn.description,state:de.BV.beta};var Vn=n(48819),zn=n(98356),Bn=n(85526),_n=n(48750);const Wn={id:P.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:e=>t=>t.pipe((0,zn.z)((t=>(0,Bn.D)(async function(e,t){var n;const s=T.Ls.get($.mi.byName).get(null==t?void 0:t.lookupField),a=await(0,_n.so)(null!==(n=null==t?void 0:t.gazetteer)&&void 0!==n?n:_n.LI);if(!a.frame)return Promise.reject("missing frame in gazetteer");return function(e,t,n){var s;const a=null===(s=t.frame())||void 0===s?void 0:s.fields;if(!a)return e;return e.map((s=>{const i=s.length,r=[];for(const o of s.fields)if(r.push(o),n(o,s,e)){const e=o.values.toArray(),n=[];for(const e of a){const t=new Array(i);n.push(t),r.push(Object.assign({},e,{values:new Ue.G(t)}))}for(let s=0;s<n.length;s++){const i=t.find(e[s]);if(null!=(null==i?void 0:i.index))for(let e=0;e<a.length;e++)n[e][s]=a[e].values.get(i.index)}}return Object.assign({},s,{fields:r})}))}(e,a,s)}(t,e)))))};const Un={settings:{width:30,filter:e=>e.type===I.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Hn={settings:{}},qn={id:P.W.fieldLookup,editor:e=>{var t,n;let{input:s,options:a,onChange:i}=e;const r=(0,o.useCallback)((e=>{i(Object.assign({},a,{lookupField:e}))}),[i,a]),l=(0,o.useCallback)((e=>{i(Object.assign({},a,{gazetteer:e}))}),[i,a]);return(0,W.jsxs)("div",{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Field",labelWidth:12,children:(0,W.jsx)(vt.b,{context:{data:s},value:null!==(t=null==a?void 0:a.lookupField)&&void 0!==t?t:"",onChange:r,item:Un})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Lookup",labelWidth:12,children:(0,W.jsx)(Vn.Q,{value:null!==(n=null==a?void 0:a.gazetteer)&&void 0!==n?n:"",context:{data:s},item:Hn,onChange:l})})})]})},transformation:Wn,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:de.BV.alpha};var Zn=n(94698),Gn=n(50820),Qn=n(62037);const Kn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return 0===t?n.push(e):e.forEach((e=>{Kn(e,t-1,n)})),n};const Jn={append:!1,withFields:!1,separator1:"=",separator2:" "};const Yn={id:P.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:e=>t=>t.pipe((0,We.U)((t=>Yn.transformer(e)(t)))),transformer:e=>{const t=(0,Gn.f)({names:e.fields});if(!t)return Qn.d.transformer({});const n=(0,T.sq)(t);return t=>{if(!t.length)return t;const s=t[0],a=s.fields.filter((e=>n(e,s,t))),i=a.map((e=>e.values.toArray())),r=a.map((e=>e.name)),o=Object.assign({},Jn,e.naming);return function(e){const t=e[0].length,n=e.length,s=new Map;for(let a=0;a<t;a++){let t=s;for(let s=0;s<n;s++){let i=e[s][a],r=t.get(i);null==r&&(r=s===n-1?[]:new Map,t.set(i,r)),t=r}t.push(a)}return Kn(s,n)}(i).map((t=>{var n;let l=function(e,t,n){return t.map(((t,s)=>e.withFields?`${t}${e.separator1}${n[s]}`:n[s])).join(e.separator2)}(o,r,a.map(((e,n)=>i[n][t[0]])));return null!==(n=e.naming)&&void 0!==n&&n.append&&s.name&&(l=`${s.name} ${l}`),Object.assign({},s,{name:l,length:t.length,fields:s.fields.map((e=>{const n=e.values.toArray(),s=Array(t.length);for(let e=0;e<t.length;e++)s[e]=n[t[e]];return Object.assign({},e,{state:void 0,values:new Ue.G(s)})}))})}))}}};var Xn;const es={id:P.W.partitionByValues,editor:function(e){let{input:t,options:n,onChange:s}=e;const a=(0,Zn.IX)(t),i=(0,Zn.nw)(a),r=(0,o.useMemo)((()=>{const e=new Set(n.fields);return e.size<1?i:i.filter((t=>!e.has(t.value)))}),[i,n]),l=(0,o.useCallback)((e=>{if(!e.value)return;const t=new Set(n.fields);t.add(e.value),s(Object.assign({},n,{fields:[...t]}))}),[s,n]),d=(0,o.useCallback)((e=>{if(!e)return;const t=new Set(n.fields);t.delete(e),s(Object.assign({},n,{fields:[...t]}))}),[s,n]);if(t.length>1)return Xn||(Xn=(0,W.jsx)(Yt.S,{children:"Partition by values only works with a single frame."}));const c=[...new Set(n.fields)];return(0,W.jsx)("div",{children:(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Field",labelWidth:10,grow:!0,children:(0,W.jsxs)(nt.Lh,{children:[c.map((e=>(0,W.jsx)(L.zx,{icon:"times",variant:"secondary",size:"md",onClick:()=>d(e),children:e},e))),r.length&&(0,W.jsx)(Pn.b,{variant:"secondary",size:"md",options:r,onChange:l,label:"Select field",icon:"plus"})]})})})})},transformation:Yn,name:Yn.name,description:Yn.description,state:de.BV.alpha};var ts=n(74658),ns=n(57171),ss=n(52902);let as;function is(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const n of rs(e)){const e=n.fields[0];if(!e||e.type!==I.fS.time)continue;const s=[],a=[];for(const e of n.fields)switch(e.type){case I.fS.number:case I.fS.boolean:s.push(e);break;case I.fS.string:a.push(e)}for(const i of s)if(a.length){const s=new Map;for(let t=0;t<n.length;t++){const n=e.values.get(t),r=i.values.get(t);if(void 0===r||null==n)continue;const o=a.map((e=>e.values.get(t))).join("/");let l=s.get(o);if(!l){l={key:o,time:[],value:[],labels:{}};for(const e of a)l.labels[e.name]=e.values.get(t);s.set(o,l)}l.time.push(n),l.value.push(r)}for(const a of s.values())t.push({name:n.name,refId:n.refId,meta:Object.assign({},n.meta,{type:ts.P.TimeSeriesMany}),fields:[Object.assign({},e,{values:new Ue.G(a.time)}),Object.assign({},i,{values:new Ue.G(a.value),labels:a.labels})],length:a.time.length})}else t.push({name:n.name,refId:n.refId,meta:Object.assign({},n.meta,{type:ts.P.TimeSeriesMany}),fields:[e,i],length:n.length})}return t}function rs(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const n of e){let e;const s=[],a={},i={},r={},o={};for(let t=0;t<n.fields.length;t++){const l=n.fields[t];switch(l.type){case I.fS.string:case I.fS.boolean:l.name in o||(o[l.name]=t,i[l.name]=!0);break;case I.fS.time:if(!e){e=l;break}default:if(l.name in a){const e=a[l.name];if(l.type!==e)continue}else a[l.name]=l.type,s.push(l.name);const n=JSON.stringify(l.labels),d=r[n];if(void 0!==d?d.push(t):r[n]=[t],null!=l.labels)for(const e in l.labels)i[e]=!0}}if(!e)continue;const l=[],d=[],c=[],u=[];for(let t=0;t<n.length;t++)l.push({time:e.values.get(t),wideRowIndex:t});for(const e in r)d.push(e);for(const e in i)c.push(e);for(const e in o)u.push(e);l.sort(((e,t)=>e.time-t.time)),d.sort(),c.sort(),s.sort();const h=new ns.v(Object.assign({},n,{meta:Object.assign({},n.meta,{type:ts.P.TimeSeriesLong}),fields:[{name:e.name,type:e.type}]}));for(const e of s)h.addField({name:e,type:a[e]});for(const e of c)h.addField({name:e,type:I.fS.string});for(const t of l){const{time:s,wideRowIndex:a}=t;for(const t of d){const i={};for(const e of u)i[e]=n.fields[o[e]].values.get(a);let l=0;for(const e of r[t]){const t=n.fields[e];if(0==l++&&null!=t.labels)for(const e in t.labels)i[e]=t.labels[e];i[t.name]=t.values.get(a)}i[e.name]=s,h.add(i)}}t.push(h)}return t}!function(e){e.TimeSeriesWide="wide",e.TimeSeriesMany="many",e.TimeSeriesLong="long"}(as||(as={}));const os={id:P.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:e=>t=>t.pipe((0,We.U)((t=>os.transformer(e)(t)))),transformer:e=>{var t;const n=null!==(t=null==e?void 0:e.format)&&void 0!==t?t:as.TimeSeriesWide;return n===as.TimeSeriesMany?is:n===as.TimeSeriesLong?rs:e=>{const t=(0,ss._9)({frames:e,joinBy:T.Ls.get($.mi.firstTimeField).get({}),keepOriginIndices:!0});return t?[t]:[]}}},ls=[{label:"Wide time series",value:as.TimeSeriesWide,description:"Creates a single frame joined by time",info:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"Single frame"}),(0,W.jsx)("li",{children:"1st field is shared time field"}),(0,W.jsx)("li",{children:"Time in ascending order"}),(0,W.jsx)("li",{children:"Multiple value fields of any type"})]})},{label:"Multi-frame time series",value:as.TimeSeriesMany,description:"Creates a new frame for each time/number pair",info:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"Multiple frames"}),(0,W.jsx)("li",{children:"Each frame has two fields: time, value"}),(0,W.jsx)("li",{children:"Time in ascending order"}),(0,W.jsx)("li",{children:"String values are represented as labels"}),(0,W.jsx)("li",{children:"All values are numeric"})]})},{label:"Long time series",value:as.TimeSeriesLong,description:"Convert each frame to long format",info:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"Single frame"}),(0,W.jsx)("li",{children:"1st field is time field"}),(0,W.jsx)("li",{children:"Time in ascending order, but may have duplictes"}),(0,W.jsx)("li",{children:"String values are represented as separate fields rather than as labels"}),(0,W.jsx)("li",{children:"Multiple value fields may exist"})]})}];const ds=e=>({info:O.css`
    margin-left: 20px;
  `}),cs={id:os.id,editor:function(e){const{options:t,onChange:n}=e,s=(0,ye.wW)(ds),a=(0,o.useCallback)((e=>{n(Object.assign({},t,{format:e.value}))}),[n,t]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Format",labelWidth:12,children:(0,W.jsx)(E.Ph,{width:35,options:ls,value:ls.find((e=>e.value===t.format))||ls[0],onChange:a,className:"flex-grow-1"})})}),(0,W.jsx)(je.Z,{children:(0,W.jsx)(Se._,{label:"Info",labelWidth:12,children:(0,W.jsx)("div",{className:s.info,children:(ls.find((e=>e.value===t.format))||ls[0]).info})})})]})},transformation:os,name:os.name,description:os.description,help:"\n  ### Use cases\n\n  This takes query results and transforms them into a predictable timeseries format.\n  This transformer may be especially useful when using old panels that only expect the\n  many-frame timeseries format.\n  "},us={id:P.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:e=>t=>t.pipe((0,We.U)((t=>t.map((t=>function(e,t){var n;const s=Le(t,null!==(n=e.mappings)&&void 0!==n?n:[],!0),{nameField:a,valueField:i}=s;if(!a||!i)return t;const r=[];for(let e=0;e<a.values.length;e++){const n=a.values.get(e),o=i.values.get(e),l=$e(t,e,s),d=hs(t,e,s),c={name:`${n}`,type:i.type,values:new Ue.G([o]),config:l,labels:d};r.push(c)}return{fields:r,length:1}}(e,t))))))};function hs(e,t,n){const s=Object.assign({},n.nameField.labels);for(let a=0;a<e.fields.length;a++){const i=e.fields[a],r=(0,R.C)(i,e),o=n.index[r];if(o.handler&&o.handler.key!==Re.Label)continue;const l=i.values.get(t);null!=l&&(s[r]=l)}return s}const ps={id:us.id,editor:function(e){var t;let{input:n,options:s,onChange:a}=e;return 0===n.length?null:(0,W.jsx)("div",{children:(0,W.jsx)(ze,{frame:n[0],mappings:null!==(t=s.mappings)&&void 0!==t?t:[],onChange:e=>a(Object.assign({},s,{mappings:e})),withNameAndValue:!0})})},transformation:us,name:us.name,description:us.description,state:de.BV.beta,help:"\n### Use cases \n\nThis transforms rows into separate fields. This can be useful as fields can be styled and configured \nindividually, something rows cannot. It can also use additional fields as sources for dynamic field \nconfiguration or map them to field labels. The additional labels can then be used to define better \ndisplay names for the resulting fields.\n\nUseful when visualization data in:\n- Gauge\n- Stat\n- Pie chart\n\n## Example\n\nInput:\n\n| Name    | Value | Max |\n| ------- | ----- | --- |\n| ServerA | 10    | 100 |\n| ServerB | 20    | 200 |\n| ServerC | 30    | 300 |\n\nOutput:\n\n| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |\n| ------------------------- | ------------------------- | ------------------------- |\n| 10                        | 20                        | 30                        |\n\nAs you can see each row in the source data becomes a separate field. Each field now also has a max \nconfig option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field \nconfiguration and if set like this will be used by the visualization instead of any options manually \nconfigured in the panel editor options pane.\n\n"};var gs=n(80622),ms=n(85995),fs=n(81689),vs=n(70109),bs=n(83493),xs=n(71383);const ys={id:P.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:e=>t=>t.pipe((0,zn.z)((t=>(0,Bn.D)(async function(e,t){const n=await(0,bs.cJ)(t.source);if(ws(t)){var s;const a=await(0,bs.cJ)(null===(s=t.modify)||void 0===s?void 0:s.target);return e.map((e=>{const t=(0,bs.g6)(e,n),s=(0,bs.g6)(e,a);if(t.field&&s.field){const n=[...e.fields],a=(0,vs.Fh)(t.field,s.field),i=n[0];return i.type===I.fS.geo&&i!==t.field&&i!==s.field?n[0]=(0,vs.EK)(i,a):n.unshift(a),Object.assign({},e,{fields:n})}return e}))}return e.map((e=>{var s;let a=(0,bs.g6)(e,n);if(a.field){if(t.action===fs.JJ.Modify){if((null===(s=t.modify)||void 0===s?void 0:s.op)===fs.ac.AsLine){let t=a.field.name;return t&&"Point"!==t||(t="Line"),Object.assign({},e,{length:1,fields:[Object.assign({},a.field,{name:t,type:I.fS.geo,values:new Ue.G([(0,xs.Lp)(a.field)])})]})}return e}const n=a.derived?[a.field,...e.fields]:e.fields.slice(0);var i;if(t.action===fs.JJ.Calculate)n.push((0,xs.N7)(a.field,null!==(i=t.calculate)&&void 0!==i?i:{})),a.derived=!0;if(a.derived)return Object.assign({},e,{fields:n})}return e}))}(t,e)))))};function ws(e){var t;return e.action===fs.JJ.Modify&&(null===(t=e.modify)||void 0===t?void 0:t.op)===fs.ac.LineBuilder}const js=(e,t)=>{var n;const s=null!==(n=t.options)&&void 0!==n?n:{};e.addSelect({path:"action",name:"Action",description:"",defaultValue:fs.JJ.Prepare,settings:{options:[{value:fs.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:fs.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:fs.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),s.action===fs.JJ.Calculate?e.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:fs.Ii.Heading,settings:{options:[{value:fs.Ii.Heading,label:"Heading"},{value:fs.Ii.Area,label:"Area"},{value:fs.Ii.Distance,label:"Distance"}]}}):s.action===fs.JJ.Modify&&e.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:fs.ac.AsLine,settings:{options:[{value:fs.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:fs.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),ws(s)?(e.addNestedOptions({category:["Source"],path:"source",build:(e,t)=>{var n;const a=null!==(n=s.source)&&void 0!==n?n:{};a.mode||(a.mode=gs.q.Auto),(0,ms.C)("Point","",e,a)}}),e.addNestedOptions({category:["Target"],path:"modify",build:(e,t)=>{var n,a;const i=null!==(n=null===(a=s.modify)||void 0===a?void 0:a.target)&&void 0!==n?n:{};i.mode||(i.mode=gs.q.Auto),(0,ms.C)("Point","target.",e,i)}})):(0,ms.C)("Location","source.",e,s.source)},Ss=e=>({wrap:O.css`
      margin-bottom: 20px;
    `,item:O.css`
      border-left: 4px solid ${e.colors.border.strong};
      padding-left: 10px;
    `}),Cs={id:P.W.spatial,editor:e=>{(0,o.useEffect)((()=>{var t;if(null===(t=e.options.source)||void 0===t||!t.mode){const t=me(js);e.onChange(Object.assign({},t,e.options)),console.log("geometry useEffect",t)}}),[]);const t=Ss((0,ye.l4)()),n=ge(e,js);return(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{children:n.items.map((e=>e.render()))}),(0,W.jsx)("div",{children:n.categories.map((e=>(0,W.jsxs)("div",{className:t.wrap,children:[(0,W.jsx)("h5",{children:e.props.title}),(0,W.jsx)("div",{className:t.item,children:e.items.map((e=>e.render()))})]},e.props.id)))})]})},transformation:ys,name:ys.name,description:ys.description,state:de.BV.alpha},ks=()=>[gn,kt,xn,Tt,re,un,Ut,yn,ft,dt,Qt,Lt,wn,Xt,Bt,ps,qe,cs,xt,Cs,qn,$n,xe,Ft,Kt,En,es];var Ns;const Os=(null!==(Ns=window.__grafana_public_path__)&&void 0!==Ns?Ns:"public/")+"lib/monaco/min/vs",Is=[[`${Os}/language/kusto/bridge.min.js`],[`${Os}/language/kusto/kusto.javascript.client.min.js`,`${Os}/language/kusto/newtonsoft.json.min.js`,`${Os}/language/kusto/Kusto.Language.Bridge.min.js`]];async function Ts(){let e=Promise.resolve();for(const t of Is){await e;const n=t.filter((e=>!document.querySelector(`script[src="${e}"]`))).map((e=>{return t=e,new Promise(((e,n)=>{let s;"string"==typeof t?(s=document.createElement("script"),s.src=t):s=t,s.onload=()=>e(),s.onerror=e=>n(e),document.body.appendChild(s)}));var t}));await Promise.all(n)}await new Promise((e=>{window.__monacoKustoResolvePromise=e;const t=document.createElement("script");return t.innerHTML="require(['vs/language/kusto/monaco.contribution'], function() {\n      window.__monacoKustoResolvePromise();\n    });",document.body.appendChild(t)}))}function $s(){return[{id:"kusto",name:"kusto",init:Ts}]}var Rs=n(34371),Ps=n(60532),Ds=n(63479),As=n(94025),Ms=n(2247),Ls=n(35448),Fs=n(78130);var Es=n(64850);function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zs={text:"Grafana"};class Bs{constructor(){Vs(this,"searchBarStorageKey","SearchBar_Hidden"),Vs(this,"currentRoute",void 0),Vs(this,"routeChangeHandled",void 0),Vs(this,"state",new Ds.X({chromeless:!0,sectionNav:zs,searchBarHidden:Fs.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null})),Vs(this,"onToggleMegaMenu",(()=>{this.update({megaMenuOpen:!this.state.getValue().megaMenuOpen})})),Vs(this,"setMegaMenu",(e=>{this.update({megaMenuOpen:e})})),Vs(this,"onToggleSearchBar",(()=>{const e=!this.state.getValue().searchBarHidden;Fs.Z.set(this.searchBarStorageKey,e),this.update({searchBarHidden:e})})),Vs(this,"onToggleKioskMode",(()=>{const e=this.getNextKioskMode();this.update({kioskMode:e}),v.E1.partial({kiosk:this.getKioskUrlValue(e)})}))}setMatchedRoute(e){this.currentRoute!==e&&(this.currentRoute=e,this.routeChangeHandled=!1)}update(e){var t;const n=this.state.getValue(),s=Object.assign({},n);var a;this.routeChangeHandled||(s.actions=void 0,s.pageNav=void 0,s.sectionNav=zs,s.chromeless=null===(a=this.currentRoute)||void 0===a?void 0:a.chromeless,this.routeChangeHandled=!0);Object.assign(s,e),s.chromeless=s.kioskMode===Es.UX.Full||(null===(t=this.currentRoute)||void 0===t?void 0:t.chromeless),function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;const n=Object.keys(e),s=n.length;for(let e=0;e<s;e++)if(!(n[e]in t))return!1;for(let a=0;a<s;a++)if(e[n[a]]!==t[n[a]])return!1;return s===Object.keys(t).length}(n,s)||this.state.next(s)}useState(){return(0,Ps.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),v.E1.partial({kiosk:null})}setKioskModeFromUrl(e){switch(e){case"tv":this.update({kioskMode:Es.UX.TV});break;case"1":case!0:this.update({kioskMode:Es.UX.Full})}}getKioskUrlValue(e){switch(e){case Es.UX.TV:return"tv";case Es.UX.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:e,searchBarHidden:t}=this.state.getValue();return t||e===Es.UX.TV?(Ms.Z.emit(As.SI.alertSuccess,[(0,Ls.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),Es.UX.Full):e?null:Es.UX.TV}}var _s=n(3404),Ws=n(54700),Us=n(37417);function Hs(e){let{actions:t,children:n,info:s,pageNav:a,layout:i,renderTitle:r,subTitle:l}=e;const d=(0,o.useContext)(Ws.v);return(0,W.jsx)(Us.T,{navModel:d.sectionNav,pageNav:a,layout:i,actions:t,renderTitle:r,info:s,subTitle:l,children:(0,W.jsx)(Us.T.Contents,{children:n})})}var qs=n(274);function Zs(e){const t=function(e){for(;null!==e&&e.tagName;){if("A"===e.tagName.toUpperCase())return e;e=e.parentNode}return null}(e.target);if(!(e.ctrlKey||e.metaKey||e.defaultPrevented)&&t){let n=t.getAttribute("href");const s=t.getAttribute("target");if(n&&!s){const t=qs.Cj.parseKeyValue(n.split("?")[1]),s=t.orgId&&Number(t.orgId)!==k.vc.bootData.user.orgId;if((0,v.GQ)("utils",!1,"intercepting link click",e),e.preventDefault(),n=g.u.stripBaseFromUrl(n),"/"!==n[0]||s){if(n.indexOf("://")>0||0===n.indexOf("mailto:")||s)return void(window.location.href=n);if(0===n.indexOf("#"))return void(window.location.hash=n);n=`/${n}`}v.E1.push(n)}}}var Gs,Qs=n(76093),Ks=n(38251),Js=n(65737),Ys=n(2024),Xs=n(13631),ea=n(8105),ta=n(40941),na=n(36635),sa=n(63454);const aa=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=(0,na.connect)(...n)(e);return e=>(0,W.jsx)(na.Provider,{store:sa.h,children:(0,W.jsx)(a,Object.assign({},e,{store:sa.h}))})}((e=>(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(ta.$i,Object.assign({},e,{children:Gs||(Gs=(0,W.jsx)(ta.Y0,{}))}))})));var ia=n(72122);function ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class oa{constructor(){ra(this,"reactModalRoot",document.body),ra(this,"reactModalNode",document.createElement("div")),ra(this,"onReactModalDismiss",(()=>{l.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}))}init(){Ms.Z.subscribe(ea.VJ,(e=>this.showConfirmModal(e.payload))),Ms.Z.subscribe(ea.Dn,(e=>this.showModalReact(e.payload))),Ms.Z.subscribe(Ks.EK,(e=>(0,Xs.bY)(e.payload)))}showModalReact(e){const{component:t,props:n}=e,s={component:t,props:Object.assign({},n,{isOpen:!0,onDismiss:this.onReactModalDismiss})},a=o.createElement((0,ia.E)(aa,Js.v.theme2),s);this.reactModalRoot.appendChild(this.reactModalNode),l.render(a,this.reactModalNode)}showConfirmModal(e){const{confirmText:t,onConfirm:n=(()=>{}),onDismiss:s,text2:a,altActionText:i,onAltAction:r,noText:d,text:c,text2htmlBind:u,yesText:h="Yes",icon:p,title:g="Confirm",yesButtonVariant:m}=e,f={confirmText:h,confirmButtonVariant:m,confirmationText:t,icon:p,title:g,body:c,description:a&&u?Qs.QX.sanitize(a):a,isOpen:!0,dismissText:d,onConfirm:()=>{n(),this.onReactModalDismiss()},onDismiss:()=>{null==s||s(),this.onReactModalDismiss()},onAlternative:r?()=>{r(),this.onReactModalDismiss()}:void 0,alternativeText:i},v={component:Ys.s,props:f},b=o.createElement((0,ia.E)(aa,Js.v.theme2),v);this.reactModalRoot.appendChild(this.reactModalNode),l.render(b,this.reactModalNode)}}var la=n(42200),da=n(59196),ca=n(44385),ua=n(987);function ha(e){return e.externalUserId.length?e.externalUserId:e.email}function pa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((n=>{const s=document.createElement("script");s.onload=n,s.src=e,s.async=t,document.head.appendChild(s)}))}const ga=(0,ca.h)("EchoSrv"),ma=ga.logger;function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,ua.x)("echo",void 0,ga);class va{constructor(e){fa(this,"config",{flushInterval:1e4,debug:!1}),fa(this,"backends",[]),fa(this,"flush",(()=>{for(const e of this.backends)e.flush()})),fa(this,"addBackend",(e=>{ma("Adding backend",!1,e),this.backends.push(e)})),fa(this,"addEvent",((e,t)=>{const n=this.getMeta(),s=Object.assign({},e,{meta:Object.assign({},n,t)});for(const e of this.backends)(0===e.supportedEvents.length||e.supportedEvents.indexOf(s.type)>-1)&&e.addEvent(s);ma("Reporting event",!1,s)})),fa(this,"getMeta",(()=>({sessionId:"",userId:da.Vt.user.id,userLogin:da.Vt.user.login,userSignedIn:da.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:(new Date).getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}))),this.config=Object.assign({},this.config,e),setInterval(this.flush,this.config.flushInterval)}}const ba=(e,t)=>{(0,y.RP)().addEvent({type:y.ee.Performance,payload:{name:e,value:t}})};function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ya{constructor(e){xa(this,"buffer",[]),xa(this,"supportedEvents",[y.ee.Performance]),xa(this,"addEvent",(e=>{this.buffer.push(e.payload)})),xa(this,"flush",(()=>{0!==this.buffer.length&&(la.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])})),this.options=e}}var wa=n(27904);function ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sa{constructor(e){ja(this,"supportedEvents",[y.ee.Pageview,y.ee.Interaction]),ja(this,"addEvent",(e=>{if(window.applicationInsights){var t,n,s,a;if((0,wa.Si)(e))null===(t=(n=window.applicationInsights).trackPageView)||void 0===t||t.call(n);if((0,wa.fV)(e))null===(s=(a=window.applicationInsights).trackEvent)||void 0===s||s.call(a,{name:e.payload.interactionName,properties:e.payload.properties})}})),ja(this,"flush",(()=>{})),this.options=e;const t={config:{connectionString:e.connectionString,endpointUrl:e.endpointUrl}};pa("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then((()=>{const e=new window.Microsoft.ApplicationInsights.ApplicationInsights(t);window.applicationInsights=e.loadAppInsights()}))}}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ka{constructor(e){Ca(this,"supportedEvents",[y.ee.Pageview]),Ca(this,"googleAnalytics4SendManualPageViews",!1),Ca(this,"addEvent",(e=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:e.payload.page})})),Ca(this,"flush",(()=>{})),this.options=e;pa(`https://www.googletagmanager.com/gtag/js?id=${e.googleAnalyticsId}`,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const t={page_path:window.location.pathname};e.user&&(t.user_id=ha(e.user)),this.googleAnalytics4SendManualPageViews=e.googleAnalytics4SendManualPageViews,window.gtag("config",e.googleAnalyticsId,t)}}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Oa{constructor(e){Na(this,"supportedEvents",[y.ee.Pageview]),Na(this,"trackedUserId",null),Na(this,"addEvent",(e=>{if(!window.ga)return;window.ga("set",{page:e.payload.page}),window.ga("send","pageview");const{userSignedIn:t,userId:n}=e.meta;t&&n!==this.trackedUserId&&(this.trackedUserId=n,window.ga("set","userId",n))})),Na(this,"flush",(()=>{})),this.options=e;pa(`https://www.google-analytics.com/analytics${e.debug?"_debug":""}.js`);const t=window.ga=window.ga||function(){(t.q=t.q||[]).push(arguments)};t.l=+new Date,t("create",e.googleAnalyticsId,"auto"),t("set","anonymizeIp",!0)}}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ta{constructor(e){var t,n;Ia(this,"supportedEvents",[y.ee.Pageview,y.ee.Interaction,y.ee.ExperimentView]),Ia(this,"addEvent",(e=>{if(window.rudderanalytics){var t,n,s,a,i,r;if((0,wa.Si)(e))null===(t=(n=window.rudderanalytics).page)||void 0===t||t.call(n);if((0,wa.fV)(e))null===(s=(a=window.rudderanalytics).track)||void 0===s||s.call(a,e.payload.interactionName,e.payload.properties);if((0,wa.mR)(e))null===(i=(r=window.rudderanalytics).track)||void 0===i||i.call(r,"experiment_viewed",{experiment_id:e.payload.experimentId,experiment_group:e.payload.experimentGroup,experiment_variant:e.payload.experimentVariant})}})),Ia(this,"flush",(()=>{})),this.options=e;pa(e.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js");const s=window.rudderanalytics=[],a=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let e=0;e<a.length;e++){const t=a[e];s[t]=function(e){return function(){s.push([e].concat(Array.prototype.slice.call(arguments)))}}(t)}if(null===(t=window.rudderanalytics)||void 0===t||null===(n=t.load)||void 0===n||n.call(t,e.writeKey,e.dataPlaneUrl,{configUrl:e.configUrl}),e.user){var i,r;const t=ha(e.user);null===(i=window.rudderanalytics)||void 0===i||null===(r=i.identify)||void 0===r||r.call(i,t,{email:e.user.email,orgId:e.user.orgId})}}}var $a=n(64331),Ra=n(43252),Pa=n(29723),Da=n(93886),Aa=n(92106),Ma=n(94810),La=n(66952);function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ea extends La.d{constructor(){super(...arguments),Fa(this,"name","EchoSrvTransport"),Fa(this,"version",Js.v.buildInfo.version)}send(e){(0,y.RP)().addEvent({type:y.ee.GrafanaJavascriptAgent,payload:e})}getIgnoreUrls(){return[]}}function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class za{constructor(e){Va(this,"supportedEvents",[y.ee.GrafanaJavascriptAgent]),Va(this,"faroInstance",void 0),Va(this,"transports",void 0),Va(this,"addEvent",(e=>{this.transports.forEach((t=>t.send(e.payload)))})),Va(this,"flush",(()=>{})),this.options=e;const t=[];this.transports=[],e.customEndpoint&&this.transports.push(new $a.V({url:e.customEndpoint,apiKey:e.apiKey})),e.errorInstrumentalizationEnabled&&t.push(new Ra.w),e.consoleInstrumentalizationEnabled&&t.push(new Pa.J),e.webVitalsInstrumentalizationEnabled&&t.push(new Da.P);const n={globalObjectKey:e.globalObjectKey||"faro",preventGlobalExposure:e.preventGlobalExposure||!1,app:{version:e.buildInfo.version,environment:e.buildInfo.env},instrumentations:t,transports:[new Ea],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Aa.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Ma.p)(n),e.user&&this.faroInstance.api.setUser({id:e.user.id,attributes:{orgId:String(e.user.orgId)||""}})}}var Ba=n(37916),_a=n(81534),Wa=n(34785),Ua=n(48606),Ha=n(51401),qa=n(51499),Za=n(76501),Ga=n(28466),Qa=n(3469);function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ja{constructor(e){var t;Ka(this,"_disabledUntil",new Date(Date.now())),Ka(this,"_buffer",void 0),this.options=e,this._buffer=(0,Ha.x)(null!==(t=e.maxConcurrentRequests)&&void 0!==t?t:3)}sendEvent(e){var t,n,s;if(new Date(Date.now())<this._disabledUntil){const t="Dropping frontend event due to too many requests.";return console.warn(t),Promise.resolve({event:e,reason:t,status:"skipped"})}const a={body:JSON.stringify(Object.assign({},e,{level:null!==(t=e.level)&&void 0!==t?t:e.exception?Ua.z.Error:Ua.z.Info,exception:e.exception?{values:null===(n=e.exception.values)||void 0===n?void 0:n.map((e=>Object.assign({},e,{value:Xa(e.value)})))}:e.exception,breadcrumbs:null===(s=e.breadcrumbs)||void 0===s?void 0:s.map((e=>Object.assign({},e,{timestamp:Ya(e.timestamp)}))),timestamp:Ya(e.timestamp)})),url:this.options.endpoint},i={body:a.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,qa.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(i,this.options.fetchParameters),this._buffer.add((()=>new Za.cW(((e,t)=>{window.fetch(a.url,i).then((n=>{if(200!==n.status){if(429===n.status){const e=Date.now(),t=n.headers.get("Retry-After");this._disabledUntil=t?new Date(e+(0,Ga.JY)(t,e)):new Date(e+5e3),Qa.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}t(n)}else e({status:"success"})})).catch(t)})))).then(void 0,(t=>{if("Not adding Promise due to buffer limit reached."===t.message){const t="Dropping frontend log event due to too many requests in flight.";return console.warn(t),{event:e,reason:t,status:"skipped"}}throw t}))}}function Ya(e){return e?new Date(1e3*e).toISOString():(new Date).toISOString()}function Xa(e){return"string"==typeof e||void 0===e?e:e&&"object"==typeof e&&0===Object.keys(e).length?"":String(e)}class ei extends Wa.d8{sendEvent(e){return(0,y.RP)().addEvent({type:y.ee.Sentry,payload:e}),Promise.resolve({status:"success",event:e})}sendSession(e){return Promise.resolve({status:"skipped"})}_sendRequest(e,t){throw new Error("should not happen")}}function ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ni{constructor(e){ti(this,"supportedEvents",[y.ee.Sentry]),ti(this,"transports",void 0),ti(this,"addEvent",(e=>{this.transports.forEach((t=>t.sendEvent(e.payload)))})),ti(this,"flush",(()=>{})),this.options=e,this.transports=[],e.dsn&&this.transports.push(new Wa.Vh({dsn:e.dsn},fetch)),e.customEndpoint&&this.transports.push(new Ja({endpoint:e.customEndpoint}));const t={release:e.buildInfo.version,environment:e.buildInfo.env,dsn:e.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:e.sampleRate,transport:ei,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};e.user&&(0,Ba.av)({email:e.user.email,id:String(e.user.id)}),(0,_a.S1)(t)}}var si=n(35582),ai=n.n(si),ii=(n(76767),n(93013),n(11848)),ri=n(48460),oi=n(60129),li=n(53091),di=n(45560),ci=n(68374),ui=n(63092);class hi{constructor(e,t){this.locationService=e,this.chromeService=t}clearAndInitGlobalBindings(){ai().reset(),"/login"!==this.locationService.getLocation().pathname&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("s o",this.openSearch),this.bind("t a",this.makeAbsoluteTime),this.bind("f",this.openSearch),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",(()=>(0,ui.X)(!1))),this.bind("c r",(()=>(0,ui.X)(!0)))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const e=document.activeElement;document.querySelectorAll(".slate-typeahead--open").length>0||(e&&e instanceof HTMLElement&&("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName||e.hasAttribute("data-slate-editor"))?e.blur():this.exit())}toggleNav(){window.location.href=Js.v.appSubUrl+g.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!Js.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}makeAbsoluteTime(){Ms.Z.publish(new ea.QI)}showHelpModal(){Ms.Z.publish(new ea.Dn({component:di.B}))}exit(){const e=this.locationService.getSearchObject();if(e.editview)return void this.locationService.partial({editview:null,editIndex:null});if(e.inspect)return void this.locationService.partial({inspect:null,inspectTab:null});if(e.editPanel)return void this.locationService.partial({editPanel:null,tab:null});if(e.viewPanel)return void this.locationService.partial({viewPanel:null,tab:null});const{kioskMode:t}=this.chromeService.state.getValue();t&&this.chromeService.exitKioskMode(),e.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(e,t){ai().bind(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}bindGlobal(e,t){ai().bindGlobal(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}unbind(e,t){ai().unbind(e,t)}bindWithPanelId(e,t){this.bind(e,function(e){return()=>{const t=document.querySelectorAll(":hover");for(let a=t.length-1;a>0;a--){var n;const i=t[a];var s;i instanceof HTMLElement&&null!==(n=i.dataset)&&void 0!==n&&n.panelid&&e(parseInt(null===(s=i.dataset)||void 0===s?void 0:s.panelid,10))}}}(t))}setupTimeRangeBindings(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.bind("t z",(()=>{Ms.Z.publish(new ea.p8({scale:2,updateUrl:e}))})),this.bind("ctrl+z",(()=>{Ms.Z.publish(new ea.p8({scale:2,updateUrl:e}))})),this.bind("t left",(()=>{Ms.Z.publish(new ea.Qt({direction:ea.Im.Left,updateUrl:e}))})),this.bind("t right",(()=>{Ms.Z.publish(new ea.Qt({direction:ea.Im.Right,updateUrl:e}))}))}setupDashboardBindings(e){this.bind("mod+o",(()=>{e.graphTooltip=(e.graphTooltip+1)%3,e.events.publish(new As.oi),e.startRefresh()})),this.bind("mod+s",(()=>{e.meta.canSave&&Ms.Z.publish(new ea.Dn({component:ri.d,props:{dashboard:e}}))})),this.setupTimeRangeBindings(),this.bindWithPanelId("e",(t=>{if(e.canEditPanelById(t)){const e=void 0!==this.locationService.getSearchObject().editPanel;this.locationService.partial({editPanel:e?null:t})}})),this.bindWithPanelId("v",(e=>{const t=void 0!==this.locationService.getSearchObject().viewPanel;this.locationService.partial({viewPanel:t?null:e})})),this.bindWithPanelId("p l",(t=>{const n=e.getPanelById(t),s=Object.assign({},n.options);s.legend.showLegend?s.legend.showLegend=!1:s.legend.showLegend=!0,n.updateOptions(s)})),this.bindWithPanelId("i",(e=>{this.locationService.partial({inspect:e})})),ci.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",(async t=>{const n=e.getPanelById(t),a=await(0,ii.H6)({panel:n,datasourceSrv:(0,s.ak)(),timeSrv:(0,li.$t)()});if(a){const e=g.u.stripBaseFromUrl(a);e&&this.locationService.push(e)}})),this.bindWithPanelId("p r",(t=>{!e.canEditPanelById(t)||e.panelInView||e.panelInEdit||Ms.Z.publish(new ea.Eb(t))})),this.bindWithPanelId("p d",(t=>{if(e.canEditPanelById(t)){const n=e.getPanelInfoById(t).index;e.duplicatePanel(e.panels[n])}})),this.bindWithPanelId("p s",(t=>{const n=e.getPanelInfoById(t);Ms.Z.publish(new ea.Dn({component:oi.V8,props:{dashboard:e,panel:null==n?void 0:n.panel}}))})),this.bind("d l",(()=>{e.toggleLegendsForAll()})),this.bind("d shift+c",(()=>{e.collapseRows()})),this.bind("d shift+e",(()=>{e.expandRows()})),this.bind("d n",(()=>{this.locationService.push("/dashboard/new")})),this.bind("d r",(()=>{e.startRefresh()})),this.bind("d s",(()=>{this.showDashEditView()})),this.bind("d k",(()=>{this.chromeService.onToggleKioskMode()})),this.bind("d a",(()=>{const e=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+e}))}}var pi=n(90374),gi=n(13626),mi=n(75534);async function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];await Promise.all(e.map(vi))}async function vi(e){const{path:t,version:n}=e;try{await(0,mi.N$)(t,n)}catch(e){console.error(`Failed to load plugin: ${t} (version: ${n})`,e)}}var bi=n(16527),xi=n(43464),yi=n(54316),wi=n(85699),ji=n(28173),Si=n(2633),Ci=n(59558),ki=n(15203),Ni=n(8343);function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ii{constructor(){Oi(this,"subject",void 0),Oi(this,"subscription",void 0),Oi(this,"lastResult",void 0),this.subject=new bi.t(1)}get(){return this.subject.asObservable()}run(e){const{queries:t,timezone:n,datasource:a,panelId:r,app:o,dashboardId:l,timeRange:d,timeInfo:c,cacheTimeout:u,maxDataPoints:h,scopedVars:p,minInterval:g}=e;this.subscription&&this.subscription.unsubscribe();const m={app:null!=o?o:yi.zj.Unknown,requestId:(0,Ci.t)(),timezone:n,panelId:r,dashboardId:l,range:d,timeInfo:c,interval:"",intervalMs:0,targets:(0,i.cloneDeep)(t),maxDataPoints:h,scopedVars:p||{},cacheTimeout:u,startTime:Date.now()};m.rangeRaw=d.raw,(0,Bn.D)(async function(e,t){if(e&&"query"in e)return e;return(0,s.ak)().get(e,t)}(a,m.scopedVars)).pipe((0,xi.P)()).subscribe({next:e=>{m.targets=m.targets.map((t=>(t.datasource||(t.datasource=e.getRef()),t)));const t=g?(0,Si.J)().replace(g,m.scopedVars):e.interval,n=wi.calculateInterval(d,h,t);m.scopedVars=Object.assign({},m.scopedVars,{__interval:{text:n.interval,value:n.interval},__interval_ms:{text:n.intervalMs.toString(),value:n.intervalMs}}),m.interval=n.interval,m.intervalMs=n.intervalMs,this.subscription=(0,Ni.v7)(e,m).subscribe({next:e=>{const t=(0,Ni.zR)(e,this.lastResult);this.lastResult=(0,ki.C)(t,this.lastResult),this.subject.next(this.lastResult)}})},error:e=>console.error("PanelQueryRunner Error",e)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===ji.Gu.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:ji.Gu.Done})))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}var Ti=n(80025),$i=n(98142),Ri=n(70332),Pi=n(94570),Di=n(26830),Ai=n(68288);function Mi(e){return e.extended&&"infoText"in e.extended?e.extended:null}function Li(e){return e.extended&&"dataSourceTypes"in e.extended?e.extended:null}function Fi(e){return e.extended&&"dataSource"in e.extended?e.extended:null}var Ei,Vi=n(84455),zi=n(84145);const Bi={changeVariableDatasource:zi.Z$},_i=(0,na.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;if(!n)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Mi(Ai.PF)};const{editor:s}=(0,Vi.AE)(n,e);return{extended:Mi(s)}}),Bi);class Wi extends o.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{this.props.changeVariableDatasource((0,$i.yQ)(this.props.variable),(0,Ri.iU)(e))},(t="onDatasourceChanged")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}componentDidMount(){const{rootStateKey:e}=this.props.variable;e||console.error("AdHocVariableEditor: variable has no rootStateKey")}render(){var e;const{variable:t,extended:n}=this.props,s=null!==(e=null==n?void 0:n.infoText)&&void 0!==e?e:null;return(0,W.jsxs)(W.Fragment,{children:[Ei||(Ei=(0,W.jsx)(Di.e,{children:"Ad-hoc options"})),(0,W.jsx)(jt.g,{label:"Data source",htmlFor:"data-source-picker",children:(0,W.jsx)(Pi.q,{current:t.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})}),s?(0,W.jsx)(Rn.b,{title:s,severity:"info"}):null]})}}const Ui=_i(Wi);var Hi=n(67684);function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zi={addFilter:zi.KJ,removeFilter:zi.ku,changeFilter:zi.M6},Gi=(0,na.connect)(null,Zi);class Qi extends o.PureComponent{constructor(){super(...arguments),qi(this,"addFilter",(e=>{this.props.addFilter((0,$i.yQ)(this.props.variable),e)})),qi(this,"removeFilter",(e=>{this.props.removeFilter((0,$i.yQ)(this.props.variable),e)})),qi(this,"changeFilter",((e,t)=>{this.props.changeFilter((0,$i.yQ)(this.props.variable),{index:e,filter:t})}))}render(){const{filters:e,datasource:t}=this.props.variable;return(0,W.jsx)(Hi.F,{datasource:t,filters:e,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Ki=Gi(Qi);Ki.displayName="AdHocPicker";var Ji=n(7429);function Yi(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function Xi(e){return null==e?"":/__gfp__/g[Symbol.replace](e,"|")}function er(e){if(!(0,i.isString)(e)||0===e.length)return null;const t=e.split("|").map(Xi);return{key:t[0],operator:t[1],value:t[2],condition:""}}function tr(e){return null!==e&&(0,i.isString)(e.value)}const nr=["index","id","state","global","rootStateKey"];const sr=async()=>{},ar=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Ji.Js,reducer:Ji.jo,picker:Ki,editor:Ui,dependsOn:()=>!1,setValue:sr,setValueFromUrl:async(e,t)=>{const n=(e=>{if((0,i.isArray)(e))return e.map(er).filter(tr);const t=er(e);return null===t?[]:[t]})(t);await(0,sa.WI)((0,zi.Ue)((0,$i.yQ)(e),n))},updateOptions:sr,getSaveModel:e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}((0,i.cloneDeep)(e),nr),getValueForUrl:e=>{var t;return(e=>e.map((e=>function(e){return[e.key,e.operator,e.value]}(e).map(Yi).join("|"))))(null!==(t=null==e?void 0:e.filters)&&void 0!==t?t:[])}});var ir=n(31259),rr=n(55910),or=n(96668),lr=n(96209),dr=n(37537),cr=n(16313),ur=n(14542),hr=n(89689),pr=n(67305),gr=n(94514),mr=n(97218),fr=n(44288),vr=n(12717),br=n(72379),xr=n(90155),yr=n(31835),wr=n(23067),jr=n(35335),Sr=n(7856);const Cr=Object.assign({},br.Eg,{type:"query",datasource:null,query:"",regex:"",sort:br.$U.disabled,refresh:br.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""}),kr=(e,t)=>{const n=[];let s=null;t.lastIndex=0;do{s=t.exec(e),s&&n.push(s)}while(t.global&&s&&""!==s[0]&&void 0!==s[0]);return n},Nr=(e,t,n)=>{let s,a=[];e&&(s=(0,wt.jO)(e));for(let e=0;e<n.length;e++){const t=n[e];let h=void 0===t.text||null===t.text?t.value:t.text,p=void 0===t.value||null===t.value?t.text:t.value;if((0,i.isNumber)(p)&&(p=p.toString()),(0,i.isNumber)(h)&&(h=h.toString()),s){const e=kr(p,s);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),n=e.find((e=>e.groups&&e.groups.text)),i=e.find((e=>e.length>1)),g=e.length>1&&i;if(t||n){var r,o,l,d,c,u;p=null!==(r=null==t||null===(o=t.groups)||void 0===o?void 0:o.value)&&void 0!==r?r:null==n||null===(l=n.groups)||void 0===l?void 0:l.text,h=null!==(d=null==n||null===(c=n.groups)||void 0===c?void 0:c.text)&&void 0!==d?d:null==t||null===(u=t.groups)||void 0===u?void 0:u.value}else{if(g){for(let t=0;t<e.length;t++){const n=e[t];a.push({text:n[1],value:n[1],selected:!1})}continue}i&&(h=i[1],p=i[1])}}a.push({text:h,value:p,selected:!1})}return a=(0,i.uniqBy)(a,"value"),((e,t)=>{if(t===br.$U.disabled)return e;const n=Math.ceil(t/2),s=t%2==0;return 1===n?e=(0,i.sortBy)(e,"text"):2===n?e=(0,i.sortBy)(e,(e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)})):3===n&&(e=(0,i.sortBy)(e,(e=>(0,i.toLower)(e.text)))),s&&(e=e.reverse()),e})(a,t)},Or=(0,wr.oM)({name:"templating/query",initialState:Sr.s,reducers:{updateVariableOptions:(e,t)=>{const{results:n,templatedRegex:s}=t.payload.data,a=(0,Vi.ir)(e,t.payload.id);if("query"!==a.type)return;const{includeAll:i,sort:r}=a,o=Nr(s,r,n);i&&o.unshift({text:jr.xk,value:jr.r2,selected:!1}),o.length||o.push({text:jr.BH,value:jr.QX,isNone:!0,selected:!1}),a.options=o}}}),Ir=Or.reducer,{updateVariableOptions:Tr}=Or.actions;function $r(){return e=>e.pipe((0,We.U)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,jn.aY)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const n=e.toLowerCase();if("text"===n||"value"===n)return!0}return!1}(t))return t;const n=(0,Ni.F9)(t),s=[];let a=-1,i=-1,r=-1,o=-1;for(const e of n)for(let n=0;n<e.fields.length;n++){const s=e.fields[n],l=(0,R.C)(s,e,t).toLowerCase();s.type===I.fS.string&&-1===r&&(r=n),"text"===l&&s.type===I.fS.string&&-1===i&&(i=n),"value"===l&&s.type===I.fS.string&&-1===a&&(a=n),"expandable"!==l||s.type!==I.fS.boolean&&s.type!==I.fS.number||-1!==o||(o=n)}if(-1===r)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const n=-1!==o?e.fields[o].values.get(t):void 0,l=e.fields[r].values.get(t),d=-1!==i?e.fields[i].values.get(t):null,c=-1!==a?e.fields[a].values.get(t):null;-1!==a||-1!==i?-1!==a||-1===i?-1===a||-1!==i?s.push({text:d,value:c,expandable:n}):s.push({text:c,value:c,expandable:n}):s.push({text:d,value:d,expandable:n}):s.push({text:l,value:l,expandable:n})}return s})))}var Rr=n(58193);function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Dr{constructor(){Pr(this,"runners",void 0),this.runners=[new Ar,new Mr,new Lr,new Fr]}getRunnerForDatasource(e){const t=this.runners.find((t=>t.canRun(e)));if(t)return t;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Ar{constructor(){Pr(this,"type",Rr.j2.Legacy)}canRun(e){return(0,or.R)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,or.R)(t))return n.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,variable:s,searchFilter:a,timeSrv:i}=e;if(!(0,or.R)(n))return Er();const r=(0,$i.AQ)(s,a,i);return(0,Bn.D)(n.metricFindQuery(s.query,r)).pipe((0,zn.z)((e=>{if(!e||!e.length)return Er();const t=e;return(0,Xe.of)({series:t,state:ji.Gu.Done,timeRange:r.range})})))}}class Mr{constructor(){Pr(this,"type",Rr.j2.Standard)}canRun(e){return(0,or.Ju)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,or.Ju)(t))return t.variables.toDataQuery(n.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:s}=e;return(0,or.Ju)(n)?n.variables.query?s(n,t,n.variables.query):s(n,t):Er()}}class Lr{constructor(){Pr(this,"type",Rr.j2.Custom)}canRun(e){return(0,or.d7)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,or.d7)(t))return n.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:s}=e;return(0,or.d7)(n)?s(n,t,n.variables.query):Er()}}class Fr{constructor(){Pr(this,"type",Rr.j2.Datasource)}canRun(e){return(0,or.X7)(e)}getTarget(e){let{datasource:t,variable:n}=e;var s;if((0,or.X7)(t))return Object.assign({},n.query,{refId:null!==(s=n.query.refId)&&void 0!==s?s:"variable-query"});throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:s}=e;return(0,or.X7)(n)?s(n,t):Er()}}function Er(){return(0,Xe.of)({state:ji.Gu.Done,series:[],timeRange:(0,vr.JK)()})}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dispatch:sa.WI,getState:sa.y0,getVariable:Vi.E0,getTemplatedRegex:$i.gR,getTimeSrv:li.$t,queryRunners:new Dr,runRequest:Ni.v7};Vr(this,"updateOptionsRequests",void 0),Vr(this,"updateOptionsResults",void 0),Vr(this,"cancelRequests",void 0),Vr(this,"subscription",void 0),this.dependencies=e,this.updateOptionsRequests=new lr.x,this.updateOptionsResults=new lr.x,this.cancelRequests=new lr.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(e){this.updateOptionsRequests.next(e)}getResponse(e){return this.updateOptionsResults.asObservable().pipe((0,ur.h)((t=>t.identifier===e)))}cancelRequest(e){this.cancelRequests.next({identifier:e})}destroy(){this.subscription.unsubscribe()}onNewRequest(e){const{datasource:t,identifier:n,searchFilter:s}=e;try{const{dispatch:a,runRequest:i,getTemplatedRegex:r,getVariable:o,queryRunners:l,getTimeSrv:d,getState:c}=this.dependencies,u=(0,Vi.S_)(c());this.updateOptionsResults.next({identifier:n,state:ji.Gu.Loading});const h=o(n,c());if("query"!==h.type)return;const p={variable:h,datasource:t,searchFilter:s,timeSrv:d(),runRequest:i},g=l.getRunnerForDatasource(t),m=g.getTarget({datasource:t,variable:h}),f=this.getRequest(h,e,m);g.runRequest(p,f).pipe((0,ur.h)((()=>{const e=(0,Vi.S_)(c());return u===e})),(0,ur.h)((e=>e.state===ji.Gu.Done||e.state===ji.Gu.Error)),(0,hr.q)(1),(0,zn.z)((e=>e.state===ji.Gu.Error?(0,dr._)((()=>e.error)):(0,Xe.of)(e))),$r(),function(e){return t=>t.pipe((0,We.U)((t=>{const{variable:n,dispatch:s,getTemplatedRegexFunc:a}=e;if(!n.rootStateKey)return void console.error("updateOptionsState: variable.rootStateKey is not defined");const i=a(n),r=(0,$i.Y6)(n,{results:t,templatedRegex:i});s((0,yr.mb)(n.rootStateKey,Tr(r)))})))}({variable:h,dispatch:a,getTemplatedRegexFunc:r}),function(e){return t=>t.pipe((0,zn.z)((()=>{const{dispatch:t,variable:n,searchFilter:s}=e;return s?(0,Xe.of)():(0,Bn.D)(t((0,xr.xQ)((0,$i.yQ)(n))))})))}({variable:h,dispatch:a,searchFilter:s}),(0,pr.R)((0,cr.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,ur.h)((e=>{let t=!1;return e.identifier.id===n.id&&(t=!0,this.updateOptionsResults.next({identifier:n,state:ji.Gu.Loading,cancelled:t})),t})))),(0,gr.K)((e=>e.cancelled?(0,Xe.of)({}):(this.updateOptionsResults.next({identifier:n,state:ji.Gu.Error,error:e}),(0,dr._)((()=>e))))),(0,mr.x)((()=>{this.updateOptionsResults.next({identifier:n,state:ji.Gu.Done})}))).subscribe()}catch(e){this.updateOptionsResults.next({identifier:n,state:ji.Gu.Error,error:e})}}getRequest(e,t,n){const{searchFilter:s}=t,a={variable:{text:e.current.text,value:e.current.value}},i=s?{searchFilter:{text:s,value:s}}:{},r=Object.assign({},i,a),o=e.refresh===br.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,vr.JK)();return{app:yi.zj.Dashboard,requestId:(0,fr.Z)(),timezone:"",range:o,interval:"",intervalMs:0,targets:[n],scopedVars:r,startTime:Date.now()}}}let Br;function _r(){return Br}var Wr=n(88364);let Ur;!function(e){e[e.moveUp=38]="moveUp",e[e.moveDown=40]="moveDown",e[e.select=32]="select",e[e.cancel=27]="cancel",e[e.selectAndClose=13]="selectAndClose"}(Ur||(Ur={}));const Hr=["value","id","onNavigate"];function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Zr extends o.PureComponent{constructor(){super(...arguments),qr(this,"onKeyDown",(e=>{if(Ur[e.keyCode]){const t=e.ctrlKey||e.metaKey||e.shiftKey;this.props.onNavigate(e.keyCode,t),e.preventDefault()}})),qr(this,"onChange",(e=>{this.props.onChange(e.target.value)}))}render(){const e=this.props,{value:t}=e,n=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Hr);return(0,W.jsx)("input",Object.assign({},n,{ref:e=>{e&&(e.focus(),e.setAttribute("style",`width:${Math.max(e.width,150)}px`))},type:"text",className:"gf-form-input",value:null!=t?t:"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ls.t)("variable.picker.input","Enter variable value")}))}}var Gr,Qr=n(21888);const Kr=e=>{let{loading:t,disabled:n,onClick:s,text:a,onCancel:i,id:r}=e;const l=(0,ye.wW)(Xr),d=(0,o.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),s()}),[s]);return t?(0,W.jsxs)("div",{className:l.container,"data-testid":pn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${a}`),title:a,id:r,children:[(0,W.jsx)(Jr,{text:a}),(0,W.jsx)(Yr,{onCancel:i})]}):(0,W.jsxs)("button",{onClick:d,className:l.container,"data-testid":pn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${a}`),"aria-expanded":!1,"aria-controls":`options-${r}`,id:r,title:a,disabled:n,children:[(0,W.jsx)(Jr,{text:a}),Gr||(Gr=(0,W.jsx)(sn.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))]})},Jr=e=>{let{text:t}=e;const n=(0,ye.wW)(Xr);return(0,W.jsx)("span",{className:n.textAndTags,children:t===jr.xk?(0,Ls.t)("variable.picker.link-all","All"):t})},Yr=e=>{let{onCancel:t}=e;const n=(0,o.useCallback)((e=>{e.preventDefault(),t()}),[t]);return(0,W.jsx)(Qr.u,{content:"Cancel query",children:(0,W.jsx)(sn.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:n,"aria-label":pn.wl.components.LoadingIndicator.icon})})},Xr=e=>({container:O.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${e.spacing(1)};
    background-color: ${e.components.input.background};
    border: 1px solid ${e.components.input.borderColor};
    border-radius: ${e.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${e.colors.text};
    height: ${e.spacing(e.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      border: 1px solid ${e.colors.action.disabledBackground};
    }
  `,textAndTags:O.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${e.spacing(.25)};
    user-select: none;
  `});var eo,to,no,so,ao=n(9085),io=n.n(ao);const ro=["multi","values","highlightIndex","selectedValues","onToggle","onToggleAll"];function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lo extends o.PureComponent{constructor(){super(...arguments),oo(this,"onToggle",(e=>t=>{const n=t.shiftKey||t.ctrlKey||t.metaKey;this.handleEvent(t),this.props.onToggle(e,n)})),oo(this,"onToggleAll",(e=>{this.handleEvent(e),this.props.onToggleAll()}))}handleEvent(e){e.preventDefault(),e.stopPropagation()}render(){const e=this.props,{multi:t,values:n}=e,s=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ro);return(0,W.jsx)("div",{className:""+(t?"variable-value-dropdown multi":"variable-value-dropdown single"),children:(0,W.jsx)("div",{className:"variable-options-wrapper",children:(0,W.jsxs)("ul",Object.assign({className:co,"aria-label":pn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown},s,{children:[this.renderMultiToggle(),n.map(((e,t)=>this.renderOption(e,t)))]}))})})}renderOption(e,t){const{highlightIndex:n,theme:s}=this.props,a=e.selected?"variable-option pointer selected":"variable-option pointer",i=t===n?`${a} highlighted`:a,r=e.value===jr.r2;return(0,W.jsx)("li",{children:(0,W.jsxs)("button",{role:"checkbox",type:"button","aria-checked":e.selected,className:io()(i,(0,L.gN)(s),uo),onClick:this.onToggle(e),children:[eo||(eo=(0,W.jsx)("span",{className:"variable-option-icon"})),(0,W.jsx)("span",{"data-testid":pn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${e.text}`),children:r?(0,Ls.t)("variable.picker.option-all","All"):e.text})]})},`${e.value}`)}renderMultiToggle(){const{multi:e,selectedValues:t,theme:n}=this.props;if(!e)return null;return(0,W.jsx)(Qr.u,{content:()=>to||(to=(0,W.jsx)(Ls.cC,{i18nKey:"variable.picker.option-tooltip",children:"Clear selections"})),placement:"top",children:(0,W.jsxs)("button",{className:`${t.length>1?"variable-options-column-header many-selected":"variable-options-column-header"} ${uo} ${(0,L.gN)(n)}`,role:"checkbox","aria-checked":t.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top",children:[no||(no=(0,W.jsx)("span",{className:"variable-option-icon"})),so||(so=(0,W.jsx)(Ls.cC,{i18nKey:"variable.picker.option-selected-values",children:"Selected"}))," (",t.length,")"]})})}}const co=(0,O.cx)("variable-options-column",O.css`
    list-style-type: none;
  `),uo=O.css`
  width: 100%;
  text-align: left;
`,ho=(0,ye.HE)(lo);var po=n(47908),go=n(14830);const mo=(e,t,n)=>async(s,a)=>t===Ur.cancel?await s(vo(e)):t===Ur.select?s(xo(e,n)):t===Ur.selectAndClose?(s(xo(e,n,!0)),await s(vo(e))):t===Ur.moveDown?s((0,yr.mb)(e,(0,go.Ew)(1))):t===Ur.moveUp?s((0,yr.mb)(e,(0,go.Ew)(-1))):void 0,fo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return async(n,s)=>{const{rootStateKey:a}=e,{id:r,queryValue:o}=(0,Vi.AE)(a,s()).optionsPicker,l={id:r,rootStateKey:a,type:"query"},d=(0,Vi.E0)(l,s());if(!(0,or.eL)(d))return;const{query:c,options:u}=d;return n((0,yr.mb)(a,(0,go.Ug)(t))),(0,i.trim)(o)!==(0,i.trim)(t)?(0,$i.bf)(c)?yo(n,s,t,a):n((0,yr.mb)(a,(0,go.ss)(u))):void 0}},vo=(e,t)=>async(n,s)=>{const a=(0,Vi.AE)(e,s()).optionsPicker,i={id:a.id,rootStateKey:e,type:"query"},r=(0,Vi.E0)(i,s());if(!(0,or.eL)(r))return;const o={option:wo(a)},l={propName:"queryValue",propValue:a.queryValue};n((0,yr.mb)(e,(0,po.Q8)((0,$i.Y6)(r,o)))),n((0,yr.mb)(e,(0,po.Pl)((0,$i.Y6)(r,l))));const d=(0,Vi.E0)(i,s());return(0,or.eL)(d)&&(n((0,yr.mb)(e,(0,go.nn)())),(0,$i.N9)(r)!==(0,$i.N9)(d))?t?t(d):await(async e=>{const t=Ti.z.get(e.type);await t.setValue(e,e.current,!0)})(d):void 0},bo=(e,t)=>async(n,s)=>{const{id:a,rootStateKey:i}=e,r=(0,Vi.AE)(i,s()).optionsPicker;r.id&&r.id!==a&&await n(vo(i,t));const o=(0,Vi.E0)(e,s());(0,or.eL)(o)&&n((0,yr.mb)(i,(0,go.aN)(o)))},xo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(s,a)=>{const{highlightIndex:i,options:r}=(0,Vi.AE)(e,a()).optionsPicker,o=r[i];s((0,yr.mb)(e,(0,go._M)({option:o,forceSelect:n,clearOthers:t})))}},yo=(0,i.debounce)((async(e,t,n,s)=>{try{const{id:a}=(0,Vi.AE)(s,t()).optionsPicker,i={id:a,rootStateKey:s,type:"query"},r=(0,Vi.E0)(i,t());if(!(0,or.eL)(r))return;const o=Ti.z.get(r.type);await o.updateOptions(r,n);const l=(0,Vi.E0)(i,t());if(!(0,or.eL)(l))return;e((0,yr.mb)(s,(0,go.wF)(l.options)))}catch(e){console.error(e)}}),500);function wo(e){const{options:t,selectedValues:n,queryValue:s,multi:a}=e;if(0===t.length&&s&&s.length>0)return{text:s,value:s,selected:!1};if(!a)return n.find((e=>e.selected));const i=[],r=[];for(const e of n)e.selected&&(i.push(e.text.toString()),r.push(e.value.toString()));return{value:r,text:i,selected:!0}}function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const So=()=>{const e=(0,na.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;return n?{picker:(0,Vi.AE)(n,e).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:go.yy})}),(e=>Object.assign({},(0,ir.bindActionCreators)({openOptions:bo,commitChangesToVariable:vo,navigateOptions:mo},e),{filterOrSearchOptions:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(fo(t,n))},toggleAllOptions:t=>e((0,yr.mb)(t.rootStateKey,(0,go.iQ)())),toggleOption:(t,n,s,a)=>e((0,yr.mb)(t.rootStateKey,(0,go._M)({option:n,clearOthers:s,forceSelect:a})))})));class t extends o.PureComponent{constructor(){super(...arguments),jo(this,"onShowOptions",(()=>this.props.openOptions((0,$i.yQ)(this.props.variable),this.props.onVariableChange))),jo(this,"onHideOptions",(()=>{this.props.variable.rootStateKey?this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange):console.error("Variable has no rootStateKey")})),jo(this,"onToggleOption",((e,t)=>{((0,or.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(e,t)})),jo(this,"onToggleSingleValueVariable",((e,t)=>{this.props.toggleOption((0,$i.yQ)(this.props.variable),e,t,!1),this.onHideOptions()})),jo(this,"onToggleMultiValueVariable",((e,t)=>{this.props.toggleOption((0,$i.yQ)(this.props.variable),e,t,!1)})),jo(this,"onToggleAllOptions",(()=>{this.props.toggleAllOptions((0,$i.yQ)(this.props.variable))})),jo(this,"onFilterOrSearchOptions",(e=>{this.props.filterOrSearchOptions((0,$i.yQ)(this.props.variable),e)})),jo(this,"onNavigate",((e,t)=>{this.props.variable.rootStateKey?this.props.navigateOptions(this.props.variable.rootStateKey,e,t):console.error("Variable has no rootStateKey")})),jo(this,"onCancel",(()=>{_r().cancelRequest((0,$i.yQ)(this.props.variable))}))}render(){const{variable:e,picker:t}=this.props,n=t.id===e.id;return(0,W.jsx)("div",{className:"variable-link-wrapper",children:n?this.renderOptions(t):this.renderLink(e)})}renderLink(e){const t=(0,Wr.y)(e),n=e.state===ji.Gu.Loading;return(0,W.jsx)(Kr,{id:`var-${e.id}`,text:t,onClick:this.onShowOptions,loading:n,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(e){const{id:t}=this.props.variable;return(0,W.jsxs)(rr.L,{onClick:this.onHideOptions,children:[(0,W.jsx)(Zr,{id:`var-${t}`,value:e.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${t}`}),(0,W.jsx)(ho,{values:e.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:e.highlightIndex,multi:e.multi,selectedValues:e.selectedValues,id:`options-${t}`})]})}}const n=e(t);return n.displayName="OptionsPicker",n};var Co,ko=n(98841);function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Oo extends o.PureComponent{constructor(){super(...arguments),No(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),No(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,W.jsxs)(W.Fragment,{children:[Co||(Co=(0,W.jsx)(Di.e,{children:"Constant options"})),(0,W.jsx)(ko.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30})]})}}const Io=Object.assign({},br.Eg,{type:"constant",hide:br.bU.hideVariable,query:"",current:{},options:[]}),To=(0,wr.oM)({name:"templating/constant",initialState:Sr.s,reducers:{createConstantOptionsFromQuery:(e,t)=>{const n=(0,Vi.ir)(e,t.payload.id);"constant"===n.type&&(n.options=[{text:n.query.trim(),value:n.query.trim(),selected:!1}])}}}),$o=To.reducer,{createConstantOptionsFromQuery:Ro}=To.actions,Po=["index","id","state","global","current","options","rootStateKey"],Do=["current","options","query"];function Ao(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const Mo=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:Io,reducer:$o,picker:So(),editor:Oo,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)((0,xr.Ci)((0,$i.yQ)(e),t))},updateOptions:async e=>{var t;await(0,sa.WI)((t=(0,$i.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,yr.mb)(n,Ro((0,$i.Y6)(t)))),await e((0,xr.xQ)(t))}))},getSaveModel:e=>Ao((0,i.cloneDeep)(e),Po),getValueForUrl:e=>e.current.value,beforeAdding:e=>{const t=(0,i.cloneDeep)(e),{query:n}=t,s=Ao(t,Do),a={selected:!0,text:n,value:n};return Object.assign({},s,{current:a,options:[a],query:n})}});var Lo=n(42066),Fo=n(12310);function Eo(e){let{value:t,name:n,description:s,onChange:a,ariaLabel:i}=e;const r=(0,Lo.Me)();return(0,W.jsx)(Fo.X,{id:r,label:n,description:s,value:t,onChange:a,"aria-label":i})}const Vo=e=>{var t;let{onMultiChanged:n,onPropChange:s,variable:a}=e;const i=(0,o.useCallback)((e=>{n((0,$i.yQ)(a),e.target.checked)}),[n,a]),r=(0,o.useCallback)((e=>{s({propName:"includeAll",propValue:e.target.checked})}),[s]),l=(0,o.useCallback)((e=>{s({propName:"allValue",propValue:e.currentTarget.value})}),[s]);return(0,W.jsxs)(nt.wc,{spacing:"md",height:"inherit",children:[(0,W.jsx)(Eo,{value:a.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:i}),(0,W.jsx)(Eo,{value:a.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:r}),a.includeAll&&(0,W.jsx)(ko.V,{value:null!==(t=a.allValue)&&void 0!==t?t:"",onChange:l,name:"Custom all value",placeholder:"blank = auto",testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2})]})};Vo.displayName="SelectionOptionsEditor";var zo,Bo,_o=n(31531);function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Uo extends o.PureComponent{constructor(){super(...arguments),Wo(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Wo(this,"onSelectionOptionsChange",(async e=>{let{propName:t,propValue:n}=e;this.props.onPropChange({propName:t,propValue:n,updateOptions:!0})})),Wo(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,W.jsxs)(W.Fragment,{children:[zo||(zo=(0,W.jsx)(Di.e,{children:"Custom options"})),(0,W.jsx)(_o.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),Bo||(Bo=(0,W.jsx)(Di.e,{children:"Selection options"})),(0,W.jsx)(Vo,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})}}const Ho=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=(0,na.connect)(...n)(e);return e=>(0,W.jsx)(a,Object.assign({},e,{store:sa.h}))}(Uo,((e,t)=>({})),{changeVariableMultiValue:xr.Z7}),qo=Object.assign({},br.Eg,{type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}}),Zo=(0,wr.oM)({name:"templating/custom",initialState:Sr.s,reducers:{createCustomOptionsFromQuery:(e,t)=>{var n;const s=(0,Vi.ir)(e,t.payload.id);if("custom"!==s.type)return;const{includeAll:a,query:i}=s,r=(null!==(n=i.match(/(?:\\,|[^,])+/g))&&void 0!==n?n:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const n=null!==(t=/^(.+)\s:\s(.+)$/g.exec(e))&&void 0!==t?t:[];if(3===n.length){const[,e,t]=n;return{text:e.trim(),value:t.trim(),selected:!1}}return{text:e.trim(),value:e.trim(),selected:!1}}));a&&r.unshift({text:jr.xk,value:jr.r2,selected:!1}),s.options=r}}}),Go=Zo.reducer,{createCustomOptionsFromQuery:Qo}=Zo.actions,Ko=["index","id","state","global","rootStateKey"];const Jo=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:qo,reducer:Go,picker:So(),editor:Ho,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)((0,xr.Ci)((0,$i.yQ)(e),t))},updateOptions:async e=>{var t;await(0,sa.WI)((t=(0,$i.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,yr.mb)(n,Qo((0,$i.Y6)(t)))),await e((0,xr.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}((0,i.cloneDeep)(e),Ko),getValueForUrl:e=>(0,$i.HY)(e)?jr.xk:e.current.value});var Yo=n(63350);const Xo=Object.assign({},br.Eg,{type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:br.Bd.onDashboardLoad}),el=(0,wr.oM)({name:"templating/datasource",initialState:Sr.s,reducers:{createDataSourceOptions:(e,t)=>{const{sources:n,regex:s}=t.payload.data,a=[],i=(0,Vi.ir)(e,t.payload.id);if("datasource"===i.type){for(let e=0;e<n.length;e++){const t=n[e];t.meta.id===i.query&&(tl(t,s)&&a.push({text:t.name,value:t.name,selected:!1}),nl(t,s)&&a.push({text:"default",value:"default",selected:!1}))}0===a.length&&a.push({text:"No data sources found",value:"",selected:!1}),i.includeAll&&a.unshift({text:jr.xk,value:jr.r2,selected:!1}),i.options=a}}}});function tl(e,t){return!t||t.exec(e.name)}function nl(e,t){return!!e.isDefault&&(!t||t.exec("default"))}const sl=el.reducer,{createDataSourceOptions:al}=el.actions;var il,rl,ol;function ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dl={initDataSourceVariableEditor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:s.ak};return n=>{const s=t.getDatasourceSrv().getList({metrics:!0,variables:!0}),a=(0,i.chain)(s).uniqBy("meta.id").map((e=>({text:e.meta.name,value:e.meta.id}))).value();a.unshift({text:"",value:""}),n((0,yr.mb)(e,(0,Ai.z7)({dataSourceTypes:a})))}},changeVariableMultiValue:xr.Z7},cl=(0,na.connect)(((e,t)=>{const{variable:{rootStateKey:n}}=t;if(!n)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Li(Ai.PF)};const{editor:s}=(0,Vi.AE)(n,e);return{extended:Li(s)}}),dl);class ul extends o.PureComponent{constructor(){super(...arguments),ll(this,"onRegExChange",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value})})),ll(this,"onRegExBlur",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value,updateOptions:!0})})),ll(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:n}=e;this.props.onPropChange({propName:n,propValue:t,updateOptions:!0})})),ll(this,"getSelectedDataSourceTypeValue",(()=>{const{extended:e}=this.props;if(null==e||!e.dataSourceTypes.length)return"";const t=e.dataSourceTypes.find((e=>e.value===this.props.variable.query)),n=t?t.value:e.dataSourceTypes[0].value;return null!=n?n:""})),ll(this,"onDataSourceTypeChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.value,updateOptions:!0})}))}componentDidMount(){const{rootStateKey:e}=this.props.variable;e?this.props.initDataSourceVariableEditor(e):console.error("DataSourceVariableEditor: variable has no rootStateKey")}render(){var e,t,n;const{variable:s,extended:a,changeVariableMultiValue:i}=this.props,r=null!=a&&null!==(e=a.dataSourceTypes)&&void 0!==e&&e.length?null===(t=a.dataSourceTypes)||void 0===t?void 0:t.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.text}})):[],o=null!==(n=r.find((e=>e.value===s.query)))&&void 0!==n?n:r[0];return(0,W.jsxs)(W.Fragment,{children:[il||(il=(0,W.jsx)(Di.e,{children:"Data source options"})),(0,W.jsx)(Yo.u,{name:"Type",value:o,options:r,onChange:this.onDataSourceTypeChanged,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),(0,W.jsx)(ko.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:rl||(rl=(0,W.jsxs)("div",{children:["Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",(0,W.jsx)("br",{}),(0,W.jsx)("br",{}),"Example: ",(0,W.jsx)("code",{children:"/^prod/"})]}))}),ol||(ol=(0,W.jsx)(Di.e,{children:"Selection options"})),(0,W.jsx)(Vo,{variable:s,onPropChange:this.onSelectionOptionsChange,onMultiChanged:i})]})}}const hl=cl(ul),pl=["index","id","state","global","rootStateKey"];const gl=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Xo,reducer:sl,picker:So(),editor:hl,dependsOn:(e,t)=>!!e.regex&&(0,$i.QI)(e.regex,t.name),setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)((0,xr.Ci)((0,$i.yQ)(e),t))},updateOptions:async e=>{await(0,sa.WI)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:s.ak};return async(n,s)=>{const{rootStateKey:a}=e,i=t.getDatasourceSrv().getList({metrics:!0,variables:!1}),r=(0,Vi.E0)(e,s());if("datasource"!==r.type)return;let o;r.regex&&(o=(0,Si.J)().replace(r.regex,void 0,"regex"),o=(0,wt.jO)(o)),n((0,yr.mb)(a,al((0,$i.Y6)(e,{sources:i,regex:o})))),await n((0,xr.xQ)(e))}}((0,$i.yQ)(e)))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}((0,i.cloneDeep)(e),pl);return Object.assign({},t,{options:[]})},getValueForUrl:e=>(0,$i.HY)(e)?jr.xk:e.current.value});var ml,fl=n(46076);const vl=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map((e=>({label:`${e}`,value:e}))),bl=o.memo((e=>{var t;let{onPropChange:n,variable:s}=e;const a=null!==(t=vl.find((e=>e.value===s.auto_count)))&&void 0!==t?t:vl[0],i=(0,ye.wW)(xl);return(0,W.jsxs)(W.Fragment,{children:[ml||(ml=(0,W.jsx)(Di.e,{children:"Interval options"})),(0,W.jsx)(ko.V,{value:s.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:e=>{n({propName:"query",propValue:e.currentTarget.value})},onBlur:e=>{n({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})},testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),(0,W.jsx)(Eo,{value:s.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:e=>{n({propName:"auto",propValue:e.target.checked,updateOptions:!0})}}),s.auto&&(0,W.jsxs)("div",{className:i.autoFields,children:[(0,W.jsx)(Yo.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:a,options:vl,onChange:e=>{n({propName:"auto_count",propValue:e.value,updateOptions:!0})},width:9}),(0,W.jsx)(ko.V,{value:s.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:e=>{n({propName:"auto_min",propValue:e.currentTarget.value,updateOptions:!0})},width:11})]})]})}));function xl(e){return{autoFields:(0,O.css)({marginTop:e.spacing(2),display:"flex",flexDirection:"column"})}}bl.displayName="IntervalVariableEditor";var yl=n(79328);const wl=Object.assign({},br.Eg,{type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:br.Bd.onTimeRangeChanged,current:{}}),jl=(0,wr.oM)({name:"templating/interval",initialState:Sr.s,reducers:{createIntervalOptions:(e,t)=>{const n=(0,Vi.ir)(e,t.payload.id);if("interval"!==n.type)return;const s=(0,i.map)(n.query.match(/(["'])(.*?)\1|\w+/g),(e=>({text:(e=e.replace(/["']+/g,"")).trim(),value:e.trim(),selected:!1})));n.auto&&s.length&&"auto"!==s[0].text&&s.unshift({text:"auto",value:"$__auto_interval_"+n.name,selected:!1}),n.options=s}}}),Sl=jl.reducer,{createIntervalOptions:Cl}=jl.actions,kl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{calculateInterval:wi.calculateInterval,getTimeSrv:li.$t,templateSrv:(0,yl.J)()};return(n,s)=>{const a=(0,Vi.E0)(e,s());if("interval"===a.type&&a.auto){const e=t.calculateInterval(t.getTimeSrv().timeRange(),a.auto_count,a.auto_min);t.templateSrv.setGrafanaVariable("$__auto_interval_"+a.name,e.interval),t.templateSrv.setGrafanaVariable("$__auto_interval",e.interval)}}},Nl=["index","id","state","global","rootStateKey"];const Ol=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:wl,reducer:Sl,picker:So(),editor:bl,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)(kl((0,$i.yQ)(e))),await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)(kl((0,$i.yQ)(e))),await(0,sa.WI)((0,xr.Ci)((0,$i.yQ)(e),t))},updateOptions:async e=>{var t;await(0,sa.WI)((t=(0,$i.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,yr.mb)(n,Cl((0,$i.Y6)(t)))),await e(kl(t)),await e((0,xr.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}((0,i.cloneDeep)(e),Nl),getValueForUrl:e=>e.current.value});var Il=n(51389);const Tl=[{label:"On dashboard load",value:Il.Bd.onDashboardLoad},{label:"On time range change",value:Il.Bd.onTimeRangeChanged}];function $l(e){let{onChange:t,refresh:n}=e;const s=(0,o.useMemo)((()=>{var e,t;return null!==(e=null===(t=Tl.find((e=>e.value===n)))||void 0===t?void 0:t.value)&&void 0!==e?e:Tl[0].value}),[n]);return(0,W.jsx)(jt.g,{label:"Refresh",description:"When to update the values of this variable",children:(0,W.jsx)(M.S,{options:Tl,onChange:t,value:s})})}const Rl=[{label:"Disabled",value:br.$U.disabled},{label:"Alphabetical (asc)",value:br.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:br.$U.alphabeticalDesc},{label:"Numerical (asc)",value:br.$U.numericalAsc},{label:"Numerical (desc)",value:br.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:br.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:br.$U.alphabeticalCaseInsensitiveDesc}];function Pl(e){let{onChange:t,sort:n}=e;const s=(0,o.useMemo)((()=>{var e;return null!==(e=Rl.find((e=>e.value===n)))&&void 0!==e?e:Rl[0]}),[n]);return(0,W.jsx)(Yo.u,{name:"Sort",description:"How to sort the values of this variable",value:s,options:Rl,onChange:t,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Dl=n(95484),Al=n(75386),Ml=n(93707);function Ll(e){let{datasource:t,query:n,onChange:s}=e;const a=(0,o.useCallback)((e=>{s({refId:"StandardVariableQuery",query:e})}),[s]);return(0,W.jsx)(Ml.R,{query:n.query,onChange:a,datasource:t,templateSrv:(0,Si.J)()})}const Fl=(e,t)=>async(n,s)=>{try{var a;const{rootStateKey:i}=e;if(!(0,$i.A3)(i,s()))return;const r=(0,Vi.E0)(e,s());if("query"!==r.type)return;(0,Vi.AE)(i,s()).editor.id===r.id&&n((0,yr.mb)(i,(0,Ai.PV)({errorProp:"update"})));const o=await(0,x.F)().get(null!==(a=r.datasource)&&void 0!==a?a:"");await new Promise(((n,s)=>{const a=new Dl.w0,i=function(e,t,n){return{next:s=>s.state===ji.Gu.Error?(n.unsubscribe(),void t(s.error)):s.state===ji.Gu.Done?(n.unsubscribe(),void e()):void 0,error:e=>{n.unsubscribe(),t(e)},complete:()=>{n.unsubscribe(),e()}}}(n,s,a),r=_r().getResponse(e).subscribe(i);a.add(r),_r().queueRequest({identifier:e,datasource:o,searchFilter:t})}))}catch(t){if(t instanceof Error){const a=(0,Al.P)(t),{rootStateKey:i}=e;throw(0,Vi.AE)(i,s()).editor.id===e.id&&n((0,yr.mb)(i,(0,Ai.Sg)({errorProp:"update",errorText:a.message}))),a}}},El=(e,t)=>async(n,s)=>{try{const{rootStateKey:a}=e,{editor:i}=(0,Vi.AE)(a,s()),r=Fi(i),o=null==r?void 0:r.dataSource,l=await(0,x.F)().get(null!=t?t:"");o&&o.type!==(null==l?void 0:l.type)&&n((0,yr.mb)(a,(0,po.Pl)((0,$i.Y6)(e,{propName:"query",propValue:""}))));const d=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi.nL;if((0,or.d7)(e))return e.variables.editor;if((0,or.X7)(e)){var n;const s=await t(e.meta);if(!s.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return null!==(n=s.components.QueryEditor)&&void 0!==n?n:null}return(0,or.Ju)(e)?Ll:(0,or.R)(e)?null!==(s=(await t(e.meta)).components.VariableQueryEditor)&&void 0!==s?s:Ml.R:null;var s}(l);n((0,yr.mb)(a,(0,Ai.z7)({dataSource:l,VariableQueryEditor:d})))}catch(e){console.error(e)}};function Vl(e){if("object"!=typeof e)return{query:e};return Object.keys(e).reduce(((t,n)=>{const s=e[n];if("object"!=typeof s)return t[n]=s,t;const a=Vl(s);for(let e in a)a.hasOwnProperty(e)&&(t[`${n}_${e}`]=a[e]);return t}),{})}var zl,Bl,_l;function Wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ul={initQueryVariableEditor:e=>async(t,n)=>{const s=(0,Vi.E0)(e,n());"query"===s.type&&await t(El((0,$i.yQ)(s),s.datasource))},changeQueryVariableDataSource:El,changeQueryVariableQuery:(e,t,n)=>async(s,a)=>{const{rootStateKey:i}=e,r=(0,Vi.E0)(e,a());if("query"===r.type)if(function(e,t){if("string"==typeof t&&t.match(new RegExp("\\$"+e+"(/| |$)")))return!0;const n=Vl(t);for(let t in n)if(n.hasOwnProperty(t)){const s=n[t];if("string"==typeof s&&s.match(new RegExp("\\$"+e+"(/| |$)")))return!0}return!1}(r.name,t)){const e="Query cannot contain a reference to itself. Variable: $"+r.name;s((0,yr.mb)(i,(0,Ai.Sg)({errorProp:"query",errorText:e})))}else s((0,yr.mb)(i,(0,Ai.PV)({errorProp:"query"}))),s((0,yr.mb)(i,(0,po.Pl)((0,$i.Y6)(e,{propName:"query",propValue:t})))),n?s((0,yr.mb)(i,(0,po.Pl)((0,$i.Y6)(e,{propName:"definition",propValue:n})))):"string"==typeof t&&s((0,yr.mb)(i,(0,po.Pl)((0,$i.Y6)(e,{propName:"definition",propValue:t})))),await s((0,xr.Rk)(e))},changeVariableMultiValue:xr.Z7},Hl=(0,na.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;if(!n)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Fi(Ai.PF)};const{editor:s}=(0,Vi.AE)(n,e);return{extended:Fi(s)}}),Ul);class ql extends o.PureComponent{constructor(){super(...arguments),Wl(this,"state",{regex:null,tagsQuery:null,tagValuesQuery:null}),Wl(this,"onDataSourceChange",(e=>{this.props.onPropChange({propName:"datasource",propValue:e.isDefault?null:(0,Ri.iU)(e)})})),Wl(this,"onLegacyQueryChange",(async(e,t)=>{this.props.variable.query!==e&&this.props.changeQueryVariableQuery((0,$i.yQ)(this.props.variable),e,t)})),Wl(this,"onQueryChange",(async e=>{if(this.props.variable.query!==e){let t="";e&&e.hasOwnProperty("query")&&"string"==typeof e.query&&(t=e.query),this.props.changeQueryVariableQuery((0,$i.yQ)(this.props.variable),e,t)}})),Wl(this,"onRegExChange",(e=>{this.setState({regex:e.currentTarget.value})})),Wl(this,"onRegExBlur",(async e=>{const t=e.currentTarget.value;this.props.variable.regex!==t&&this.props.onPropChange({propName:"regex",propValue:t,updateOptions:!0})})),Wl(this,"onRefreshChange",(e=>{this.props.onPropChange({propName:"refresh",propValue:e})})),Wl(this,"onSortChange",(async e=>{this.props.onPropChange({propName:"sort",propValue:e.value,updateOptions:!0})})),Wl(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:n}=e;this.props.onPropChange({propName:n,propValue:t,updateOptions:!0})})),Wl(this,"renderQueryEditor",(()=>{const{extended:e,variable:t}=this.props;if(!e||!e.dataSource||!e.VariableQueryEditor)return null;const n=t.query,s=e.dataSource,a=e.VariableQueryEditor;if((0,or.NX)(a,s))return(0,W.jsx)(jt.g,{label:"Query",children:(0,W.jsx)(a,{datasource:s,query:n,templateSrv:(0,Si.J)(),onChange:this.onLegacyQueryChange})});const i=(0,li.$t)().timeRange();return(0,or.$7)(a,s)?(0,W.jsx)(jt.g,{label:"Query",children:(0,W.jsx)(a,{datasource:s,query:n,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:ji.Gu.Done,timeRange:i},range:i,onBlur:()=>{},history:[]})}):null}))}async componentDidMount(){await this.props.initQueryVariableEditor((0,$i.yQ)(this.props.variable))}componentDidUpdate(e){e.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,$i.yQ)(this.props.variable),this.props.variable.datasource)}render(){var e;return(0,W.jsxs)(W.Fragment,{children:[zl||(zl=(0,W.jsx)(Di.e,{children:"Query options"})),(0,W.jsx)(jt.g,{label:"Data source",htmlFor:"data-source-picker",children:(0,W.jsx)(Pi.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})}),this.renderQueryEditor(),(0,W.jsx)(_o.W,{value:null!==(e=this.state.regex)&&void 0!==e?e:this.props.variable.regex,name:"Regex",description:Bl||(Bl=(0,W.jsxs)("div",{children:["Optional, if you want to extract part of a series name or metric node segment.",(0,W.jsx)("br",{}),"Named capture groups can be used to separate the display text and value (",(0,W.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank",children:"see examples"}),")."]})),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),(0,W.jsx)(Pl,{onChange:this.onSortChange,sort:this.props.variable.sort}),(0,W.jsx)($l,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),_l||(_l=(0,W.jsx)(Di.e,{children:"Selection options"})),(0,W.jsx)(Vo,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})}}const Zl=Hl(ql),Gl=["index","id","state","global","queryValue","rootStateKey"];const Ql=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Cr,reducer:Ir,picker:So(),editor:Zl,dependsOn:(e,t)=>{var n;return(0,$i.QI)(e.query,null===(n=e.datasource)||void 0===n?void 0:n.uid,e.regex,t.name)},setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)((0,xr.Ci)((0,$i.yQ)(e),t))},updateOptions:async(e,t)=>{await(0,sa.WI)(Fl((0,$i.yQ)(e),t))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}((0,i.cloneDeep)(e),Gl);return e.refresh!==br.Bd.never?Object.assign({},t,{options:[]}):t},getValueForUrl:e=>(0,$i.HY)(e)?jr.xk:e.current.value});var Kl;function Jl(e){let{onPropChange:t,variable:{query:n}}=e;const s=(0,o.useCallback)(((e,n)=>{e.preventDefault(),t({propName:"originalQuery",propValue:e.currentTarget.value,updateOptions:!1}),t({propName:"query",propValue:e.currentTarget.value,updateOptions:n})}),[t]),a=(0,o.useCallback)((e=>s(e,!1)),[s]),i=(0,o.useCallback)((e=>s(e,!0)),[s]);return(0,W.jsxs)(W.Fragment,{children:[Kl||(Kl=(0,W.jsx)(Di.e,{children:"Text options"})),(0,W.jsx)(ko.V,{value:n,name:"Default value",placeholder:"default value, if any",onChange:a,onBlur:i,width:30,testId:pn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function Yl(e){let{variable:t,onVariableChange:n,readOnly:s}=e;const a=(0,Es.I0)(),[i,r]=(0,o.useState)(t.current.value);(0,o.useEffect)((()=>{r(t.current.value)}),[t]);const l=(0,o.useCallback)((()=>{t.rootStateKey?t.current.value!==i&&(a((0,yr.mb)(t.rootStateKey,(0,po.Pl)((0,$i.Y6)({id:t.id,type:t.type},{propName:"query",propValue:i})))),n?n(Object.assign({},t,{current:Object.assign({},t.current,{value:i})})):Ti.z.get(t.type).updateOptions(t)):console.error("Cannot update variable without rootStateKey")}),[t,i,a,n]),d=(0,o.useCallback)((e=>r(e.target.value)),[r]);return(0,W.jsx)(z.I,{type:"text",value:i,onChange:d,onBlur:e=>l(),disabled:s,onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),l())},placeholder:"Enter variable value",id:`var-${t.id}`})}const Xl=Object.assign({},br.Eg,{type:"textbox",query:"",current:{},options:[],originalQuery:null}),ed=(0,wr.oM)({name:"templating/textbox",initialState:Sr.s,reducers:{createTextBoxOptions:(e,t)=>{const n=(0,Vi.ir)(e,t.payload.id);if("textbox"!==n.type)return;const s={text:n.query.trim(),value:n.query.trim(),selected:!1};n.options=[s],n.current=s}}}),td=ed.reducer,{createTextBoxOptions:nd}=ed.actions,sd=["index","id","state","global","originalQuery","rootStateKey"];const ad=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Xl,reducer:td,picker:Yl,editor:Jl,dependsOn:(e,t)=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,sa.WI)((0,xr.Fz)((0,$i.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,sa.WI)(((e,t)=>async(n,s)=>{const{rootStateKey:a}=e,i=(0,Vi.E0)(e,s());if("textbox"!==i.type)return;const r=(0,$i.Hi)(t);n((0,yr.mb)(a,(0,po.Pl)((0,$i.Y6)(i,{propName:"query",propValue:r})))),await n((0,xr.Ci)((0,$i.yQ)(i),r))})((0,$i.yQ)(e),t))},updateOptions:async e=>{var t;await(0,sa.WI)((t=(0,$i.yQ)(e),async(e,n)=>{const{rootStateKey:s,type:a}=t;e((0,yr.mb)(s,nd((0,$i.Y6)(t))));const i=(0,Vi.E0)(t,n());"textbox"===i.type&&await Ti.z.get(a).setValue(i,i.options[0],!0)}))},getSaveModel:(e,t)=>{const n=(0,i.cloneDeep)(e),{originalQuery:s}=n,a=function(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,sd);if(e.query!==s&&!t){const e=null!=s?s:"",t={selected:!1,text:e,value:e};return Object.assign({},a,{query:e,current:t,options:[t]})}return a},getValueForUrl:e=>e.current.value,beforeAdding:e=>Object.assign({},(0,i.cloneDeep)(e),{originalQuery:e.query})});var id=n(75971);r().move=N.R;const rd=n(72866),od=rd.keys().map((e=>rd(e)));function ld(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=r().first(performance.getEntriesByName(e));if(s){const e=s.name.replace(/-/g,"_");ba(`${t}${e}${n}`,Math.round(s.startTime)/1e3)}}const dd=new class{constructor(){var e,t,n;n=void 0,(t="context")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}async init(){try{parent.postMessage("GrafanaAppInit","*");const t=(0,Ls.uC)(k.ZP.bootData.user.locale);(0,m.jW)(la.ae),function(){(0,y.tz)(new va({debug:!1})),window.addEventListener("load",(e=>{const t="frontend_boot_load_time_seconds",n="frontend_boot_js_done_time_seconds",s="frontend_boot_css_time_seconds";performance&&(performance.mark(t),ld("first-paint","frontend_boot_","_time_seconds"),ld("first-contentful-paint","frontend_boot_","_time_seconds"),ld(t),ld(n),ld(s))})),""!==da.Vt.user.orgRole&&(0,y.e6)(new ya({}));k.ZP.sentry.enabled&&(0,y.e6)(new ni(Object.assign({},k.ZP.sentry,{user:k.ZP.bootData.user,buildInfo:k.ZP.buildInfo})));var e,t;k.ZP.grafanaJavascriptAgent.enabled&&(0,y.e6)(new za(Object.assign({},k.ZP.grafanaJavascriptAgent,{app:{version:k.ZP.buildInfo.version,environment:k.ZP.buildInfo.env},buildInfo:k.ZP.buildInfo,user:{id:String(null===(e=k.ZP.bootData.user)||void 0===e?void 0:e.id),email:null===(t=k.ZP.bootData.user)||void 0===t?void 0:t.email}})));k.ZP.googleAnalyticsId&&(0,y.e6)(new Oa({googleAnalyticsId:k.ZP.googleAnalyticsId}));k.ZP.googleAnalytics4Id&&(0,y.e6)(new ka({googleAnalyticsId:k.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:k.ZP.googleAnalytics4SendManualPageViews}));k.ZP.rudderstackWriteKey&&k.ZP.rudderstackDataPlaneUrl&&(0,y.e6)(new Ta({writeKey:k.ZP.rudderstackWriteKey,dataPlaneUrl:k.ZP.rudderstackDataPlaneUrl,user:k.ZP.bootData.user,sdkUrl:k.ZP.rudderstackSdkUrl,configUrl:k.ZP.rudderstackConfigUrl}));k.ZP.applicationInsightsConnectionString&&(0,y.e6)(new Sa({connectionString:k.ZP.applicationInsightsConnectionString,endpointUrl:k.ZP.applicationInsightsEndpointUrl}))}(),(0,C.n)()>0&&document.body.classList.add("no-overlay-scrollbar"),(0,d.i_)(k.ZP.bootData.user.locale),(0,d.Ls)(k.ZP.bootData.user.weekStart),(0,j.L)(gi.$),(0,S.t)(Hs),(0,w.$)(pi.Z),(0,f.x)(v.E1),(0,c.K)((()=>k.ZP.bootData.user.timezone)),od.length>0&&od[0].addExtensionReducers(),(0,id.x)(),od.length>0&&od[0].init(),u.S.setInit(_s.u),u.N.setInit(_s.l),h.Z.setInit(ks),Ti.z.setInit((()=>[Ql(),Jo(),ad(),Mo(),gl(),Ol(),ar(),{id:"system",description:"",name:"system",initialState:Object.assign({},br.Eg,{type:"system",hide:br.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:ji.Gu.Done}),reducer:(e,t)=>e,picker:null,editor:null,dependsOn:()=>!1,setValue:async function(e,t){},setValueFromUrl:async(e,t)=>{},updateOptions:async e=>{},getSaveModel:e=>({}),getValueForUrl:e=>""}])),p.F.setInit($s),(0,b.p)((()=>new Ii)),e=new zr,Br=e,g.u.initialize({config:k.ZP,getTimeRangeForUrl:(0,li.$t)().timeRangeForUrl,getVariablesUrlParams:fl.c}),document.addEventListener("click",Zs);const n=new s.ND;n.init(k.ZP.datasources,k.ZP.defaultDatasource),(0,x.w)(n),window.grafanaRuntime={getDashboardSaveModel:()=>{const e=(0,a.h4)().getCurrent();if(e)return e.getSaveModelClone()},getDashboardTimeRange:()=>{const e=(0,li.$t)().timeRange();return{from:e.from.valueOf(),to:e.to.valueOf(),raw:e.raw}},getPanelData:()=>{const e=(0,a.h4)().getCurrent();if(e)return e.panels.reduce(((e,t)=>(e[t.id]=t.getQueryRunner().getLastResult(),e)),{})}};(new oa).init(),await Promise.all([t,await fi(k.ZP.pluginsToPreload)]);const i=v.E1.getSearchObject(),r=new Bs,N=new hi(v.E1,r);r.setKioskModeFromUrl(i.kiosk),this.context={backend:la.ae,location:v.E1,chrome:r,keybindings:N,config:k.ZP},l.render(o.createElement(Rs.Or,{app:this}),document.getElementById("reactRoot"))}catch(e){console.error("Failed to start Grafana",e),window.__grafana_load_failed()}var e}};window.public_cdn_path&&(n.p=window.public_cdn_path),window.__grafana_public_path__=n.p.substring(0,n.p.lastIndexOf("build/"))||n.p,window.nonce&&(n.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,dd.init()},8157:(e,t,n)=>{"use strict";let s,a,i,r,o;n.d(t,{As:()=>s,TE:()=>r,Z9:()=>a,_M:()=>i,sK:()=>o}),function(e){e.Active="active",e.Expired="expired",e.Pending="pending"}(s||(s={})),function(e){e.Unprocessed="unprocessed",e.Active="active",e.Suppressed="suppressed"}(a||(a={})),function(e){e.equal="=",e.notEqual="!=",e.regex="=~",e.notRegex="!~"}(i||(i={})),function(e){e.Internal="internal",e.External="external",e.All="all"}(r||(r={})),function(e){e.cortex="cortex",e.mimir="mimir",e.prometheus="prometheus"}(o||(o={}))},41181:(e,t,n)=>{"use strict";let s,a,i,r;n.d(t,{$5:()=>s,KB:()=>i,MQ:()=>a,wf:()=>r}),function(e){e[e.Search=0]="Search",e[e.Query=1]="Query"}(s||(s={})),function(e){e[e.Builder=0]="Builder",e[e.Code=1]="Code"}(a||(a={})),function(e){e.Scheduled="Scheduled",e.Running="Running",e.Complete="Complete",e.Failed="Failed",e.Cancelled="Cancelled",e.Timeout="Timeout"}(i||(i={})),function(e){e.Regions="regions",e.Namespaces="namespaces",e.Metrics="metrics",e.DimensionKeys="dimensionKeys",e.DimensionValues="dimensionValues",e.EBSVolumeIDs="ebsVolumeIDs",e.EC2InstanceAttributes="ec2InstanceAttributes",e.ResourceArns="resourceARNs",e.Statistics="statistics",e.LogGroups="logGroups",e.Accounts="accounts"}(r||(r={}))},42204:(e,t,n)=>{"use strict";n.d(t,{hD:()=>A,yl:()=>d,AK:()=>c});var s=n(46060),a=n(84403),i=n(28173),r=n(12717),o=n(94722);const l="-- Dashboard --";function d(e){return!!e&&("string"==typeof e?e===l:"meta"in e&&e.meta.name===l||e.uid===l)}function c(e,t){return new s.y((n=>{const s=(0,o.h4)().getCurrent(),i=function(e){if(!e||!e.length)return;return e[0].panelId}(e.queries);if(!i)return void n.next(u("Missing panel reference ID"));const r=null==s?void 0:s.getPanelById(i);if(!r)return void n.next(u("Unknown Panel: "+i));const l=r.getQueryRunner(),d=l.getData({withTransforms:Boolean(null==t?void 0:t.withTransforms),withFieldConfig:!1}).subscribe({next:e=>{var s;(null==t?void 0:t.topic)===a.w5.Annotations&&(e=Object.assign({},e,{series:null!==(s=e.annotations)&&void 0!==s?s:[],annotations:void 0}));n.next(e)}});if(!r.isInView){const{datasource:t,targets:n}=r,s=Object.assign({},e,{datasource:t,panelId:i,queries:n});l.run(s)}return()=>{d.unsubscribe()}}))}function u(e){return{state:i.Gu.Error,series:[],request:{},error:{message:e},timeRange:(0,r.JK)()}}var h,p,g=n(52423),m=n(42066),f=n(64681),v=n.n(f),b=n(68404),x=n(66015),y=n(16755),w=n(65678),j=n(70917),S=n(81691),C=n(54761),k=n(99500),N=n(70800),O=n(37625),I=n(46782),T=n(42833),$=n(279),R=n(45916);function P(e){return JSON.stringify(e)}const D=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function A(e){var t;let{panelData:n,queries:s,onChange:i,onRunQueries:r}=e;const{value:d}=(0,x.Z)((()=>(0,T.ak)().get())),c=s[0],u=(0,b.useMemo)((()=>{var e;const t=(0,o.h4)().getCurrent();return null==t?void 0:t.getPanelById(null!==(e=c.panelId)&&void 0!==e?e:-124134)}),[c.panelId]),{value:g,loading:f}=(0,x.Z)((async()=>{if(!u)return[];const e=await(0,T.ak)().get(u.datasource);return Promise.all(u.targets.map((async t=>{var s;const a=t.datasource?await(0,T.ak)().get(t.datasource):e,i=a.getQueryDisplayText||P,r=null!==(s=(0,$.t)(n,t.refId))&&void 0!==s?s:n;return{refId:t.refId,query:i(t),img:a.meta.info.logos.small,data:r.series,error:r.error}})))}),[n,u]),A=(0,b.useCallback)((e=>{i([e]),r()}),[i,r]),L=(0,b.useCallback)((e=>{A(Object.assign({},c,{panelId:e}))}),[c,A]),F=(0,b.useCallback)((()=>{A(Object.assign({},c,{withTransforms:!c.withTransforms}))}),[c,A]),E=(0,b.useCallback)((e=>{A(Object.assign({},c,{topic:e?a.w5.Annotations:void 0}))}),[c,A]),V=(0,b.useCallback)((e=>{var t,n;const s=null!==(t=e.datasource)&&void 0!==t?t:d,a=null===(n=(0,T.ak)().getInstanceSettings(s))||void 0===n?void 0:n.name,i=e.targets.length;return`${i} ${v()("query",i)} to ${a}`}),[d]),z=(0,o.h4)().getCurrent(),B=(0,b.useMemo)((()=>{var e;return null!==(e=null==z?void 0:z.panels.filter((e=>{var t,n;return I.ZP.panels[e.type]&&e.targets&&e.id!==(null===(t=z.panelInEdit)||void 0===t?void 0:t.id)&&(null===(n=e.datasource)||void 0===n?void 0:n.uid)!==l})).map((e=>{var t;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:"Panel "+e.id,description:V(e),imgUrl:I.ZP.panels[e.type].info.logos.small}})))&&void 0!==e?e:[]}),[z,V]),_=(0,y.wW)(M),W=(0,m.Me)();if(!z)return null;if(B.length<1)return(0,R.jsx)("p",{className:_.noQueriesText,children:"This dashboard does not have any other panels. Add queries to other panels and try again."});const U=B.find((e=>e.value===c.panelId)),H=`d/${z.uid}/${z.title}?&editPanel=${c.panelId}`,q=Boolean(c.withTransforms||(null==u||null===(t=u.transformations)||void 0===t?void 0:t.length));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(w.g,{label:"Source",description:"Use the same results as panel",children:(0,R.jsx)(j.Ph,{inputId:W,placeholder:"Choose panel",isSearchable:!0,options:B,value:U,onChange:e=>L(e.value)})}),f?h||(h=(0,R.jsx)(S.$,{})):(0,R.jsx)(R.Fragment,{children:g&&Boolean(g.length)&&(0,R.jsx)(w.g,{label:"Queries",children:(0,R.jsx)(C.wc,{spacing:"sm",children:g.map(((e,t)=>(0,R.jsxs)("div",{className:_.queryEditorRowHeader,children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("img",{src:e.img,alt:"",width:16}),(0,R.jsxs)("span",{className:_.refId,children:[e.refId,":"]})]}),(0,R.jsx)("div",{children:(0,R.jsxs)("a",{href:H,children:[e.query," ",p||(p=(0,R.jsx)(k.J,{name:"external-link-alt"}))]})})]},`DashboardQueryRow-${t}`)))})})}),q&&(0,R.jsx)(w.g,{label:"Transform",description:"Apply panel transformations from the source panel",children:(0,R.jsx)(N.r,{value:Boolean(c.withTransforms),onChange:F})}),(0,R.jsx)(w.g,{label:"Data",children:(0,R.jsx)(O.S,{options:D,value:c.topic===a.w5.Annotations,onChange:E})})]})}function M(e){return{results:(0,g.css)({padding:e.spacing(2)}),noQueriesText:(0,g.css)({padding:e.spacing(1.25)}),refId:(0,g.css)({padding:e.spacing(1.25)}),queryEditorRowHeader:g.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${e.colors.background.secondary};
      align-items: center;
    `}}},45857:(e,t,n)=>{"use strict";n.d(t,{k:()=>L,e:()=>F});var s=n(82897),a=n(85526),i=n(53786),r=n(16313),o=n(2101),l=n(99511),d=n(28173),c=n(22543),u=n(57171),h=n(32898),p=n(68633),g=n(18474),m=n(2633),f=n(98251),v=n(93570),b=n(8910),x=n(80720),y=n(94722),w=n(52423),j=(n(68404),n(71980)),S=n(65678),C=n(70917),k=n(70800),N=n(89496),O=n(73144),I=n(18311),T=n(45916);const $=(0,T.jsx)("div",{children:"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."}),R=[{label:"Dashboard",value:I._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:I._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],P=[10,50,100,200,300,500,1e3,2e3].map((e=>({label:String(e),value:e})));function D(e){let{query:t,onChange:n}=e;const s=t,{limit:a,matchAny:i,tags:r,type:o}=s,l=A();return(0,T.jsxs)(j.C,{className:l.container,children:[(0,T.jsx)(S.g,{label:"Filter by",children:(0,T.jsx)(C.Ph,{inputId:"grafana-annotations__filter-by",options:R,value:o,onChange:e=>n(Object.assign({},s,{type:e.value}))})}),(0,T.jsx)(S.g,{label:"Max limit",children:(0,T.jsx)(C.Ph,{inputId:"grafana-annotations__limit",width:16,options:P,value:a,onChange:e=>n(Object.assign({},s,{limit:e.value}))})}),o===I._$.Tags&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(S.g,{label:"Match any",description:"Enabling this returns annotations that match any of the tags specified below",children:(0,T.jsx)(k.r,{id:"grafana-annotations__match-any",value:i,onChange:e=>n(Object.assign({},s,{matchAny:e.target.checked}))})}),(0,T.jsx)(S.g,{label:"Tags",description:$,children:(0,T.jsx)(N.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:e=>n(Object.assign({},s,{tags:e})),tagOptions:O.lK,tags:null!=r?r:[]})})]})]})}const A=()=>({container:w.css`
      max-width: 600px;
    `});let M=100;class L extends g.CK{constructor(e){super(e),this.annotations={QueryEditor:D,prepareAnnotation(e){var t,n,s,a,i;return e.target=null!==(t=e.target)&&void 0!==t?t:{type:null!==(n=e.type)&&void 0!==n?n:I._$.Dashboard,limit:null!==(s=e.limit)&&void 0!==s?s:100,tags:null!==(a=e.tags)&&void 0!==a?a:[],matchAny:null!==(i=e.matchAny)&&void 0!==i&&i},e},prepareQuery(e){let t;if((0,s.isString)(e.datasource)){const n=(0,x.p)(e.datasource,{returnDefaultAsNull:!1});n&&(t=n)}else t=e.datasource;return Object.assign({},e,{refId:e.name,queryType:I.hR.Annotations,datasource:t})}}}query(e){const t=[],n=[],s=(0,m.J)();for(const r of e.targets){if(r.queryType===I.hR.Annotations)return(0,a.D)(this.getAnnotations({range:e.range,rangeRaw:e.range.raw,annotation:r,dashboard:(0,y.h4)().getCurrent()}));var o;if(!r.hide)if(r.queryType!==I.hR.Snapshot)if(r.queryType===I.hR.LiveMeasurements){var u,h;let n=s.replace(r.channel,e.scopedVars);const{filter:a}=r,i=(0,c.H7)(n);if(!(0,c.nU)(i))continue;const o={maxLength:null!==(u=e.maxDataPoints)&&void 0!==u?u:500};r.buffer?(o.maxDelta=r.buffer,o.maxLength=2*o.maxLength):"now"===(null===(h=e.rangeRaw)||void 0===h?void 0:h.to)&&(o.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),t.push((0,f.gj)().getDataStream({key:`${e.requestId}.${M++}`,addr:i,filter:a,buffer:o}))}else r.queryType||(r.queryType=I.hR.RandomWalk),n.push(r);else t.push((0,i.of)({data:(null!==(o=r.snapshot)&&void 0!==o?o:[]).map((e=>(0,l.vP)(e))),state:d.Gu.Done}))}return n.length&&t.push(super.query(Object.assign({},e,{targets:n}))),t.length?1===t.length?t[0]:(0,r.T)(...t):(0,i.of)()}listFiles(e){return this.query({targets:[{refId:"A",queryType:I.hR.List,path:e}]}).pipe((0,o.U)((e=>{var t;const n=null!==(t=e.data[0])&&void 0!==t?t:new u.v;return new h.U(n)})))}metricFindQuery(e){return Promise.resolve([])}async getAnnotations(e){var t;const n=(0,m.J)(),s=e.annotation,a=s.target,i={from:e.range.from.valueOf(),to:e.range.to.valueOf(),limit:a.limit,tags:a.tags,matchAny:a.matchAny};if(a.type===I._$.Dashboard){if(!e.dashboard.uid)return Promise.resolve({data:[]});i.dashboardUID=e.dashboard.uid,delete i.tags}else{if(!Array.isArray(a.tags)||0===a.tags.length)return Promise.resolve({data:[]});const e="__delimiter__",t=[];for(const s of i.tags){const a=n.replace(s,{},(t=>"string"==typeof t?t:t.join(e)));for(const n of a.split(e))t.push(n)}i.tags=t}const r=await(0,v.i)().get("/api/annotations",i,`grafana-data-source-annotations-${s.name}-${null===(t=e.dashboard)||void 0===t?void 0:t.uid}`);return{data:[(0,p.g0)(r)]}}testDatasource(){return Promise.resolve()}}async function F(){return await(0,b.F)().get("-- Grafana --")}},18311:(e,t,n)=>{"use strict";let s;n.d(t,{_$:()=>i,hR:()=>s,wi:()=>a}),function(e){e.LiveMeasurements="measurements",e.Annotations="annotations",e.Snapshot="snapshot",e.RandomWalk="randomWalk",e.List="list",e.Read="read",e.Search="search"}(s||(s={}));const a={refId:"A",queryType:s.RandomWalk};let i;!function(e){e.Dashboard="dashboard",e.Tags="tags"}(i||(i={}))},52370:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var s=n(82897),a=n(68404);function i(){const e=(0,a.useRef)(null);return null==e.current&&(e.current=(0,s.uniqueId)()),e.current}},31135:(e,t,n)=>{"use strict";n.d(t,{D:()=>v,w:()=>b});var s=n(82897),a=n(53786),i=n(85526),r=n(74687),o=n(98356),l=n(2101),d=n(73273),c=n(94514),u=n(15562),h=n(38581),p=n(23214),g=n(28173),m=n(8910),f=n(75386);const v="-- Mixed --";class b extends p.MF{constructor(e){super(e)}query(e){const t=e.targets.filter((e=>{var t;return(null===(t=e.datasource)||void 0===t?void 0:t.uid)!==v}));if(!t.length)return(0,a.of)({data:[]});const n=(0,s.groupBy)(t,"datasource.uid"),i=[];for(const t in n){const s=n[t];i.push({datasource:(0,m.F)().get(s[0].datasource,e.scopedVars),targets:s})}return i.length?this.batchQueries(i,e):(0,a.of)({data:[]})}batchQueries(e,t){const n=e.filter(this.isQueryable).map(((e,n)=>(0,i.D)(e.datasource).pipe((0,o.z)((r=>{const o=(0,s.cloneDeep)(t);return o.requestId=`mixed-${n}-${o.requestId||""}`,o.targets=e.targets,(0,i.D)(r.query(o)).pipe((0,l.U)((e=>Object.assign({},e,{data:e.data||[],state:g.Gu.Loading,key:`mixed-${n}-${e.key||""}`}))),(0,d.q)(),(0,c.K)((e=>((e=(0,f.P)(e)).message=`${r.name}: ${e.message}`,(0,a.of)([{data:[],state:g.Gu.Error,error:e,key:`mixed-${n}-${o.requestId||""}`}])))))})))));return(0,r.D)(n).pipe((0,h.u)(((e,t)=>t.reduce(((e,t)=>(e.push.apply(e,t),e)),e)),[]),(0,l.U)(this.finalizeResponses),(0,u.J)())}testDatasource(){return Promise.resolve({})}getQueryDisplayText(e){var t,n;const a=(0,s.omit)(e,["key","refId","datasource"]),i=JSON.stringify(a);return`${null!==(t=e.datasource)&&void 0!==t&&t.type?`${null===(n=e.datasource)||void 0===n?void 0:n.type}: `:""}${i}`}isQueryable(e){return e&&Array.isArray(e.targets)&&e.targets.length>0}finalizeResponses(e){const{length:t}=e;if(0===t)return e;const n=e.find((e=>e.state===g.Gu.Error));return n?e.push(n):e[t-1].state=g.Gu.Done,e}}},23854:(e,t,n)=>{"use strict";let s,a,i,r;n.d(t,{As:()=>s,LM:()=>i,kx:()=>a,wO:()=>r}),function(e){e[e.AlphaAsc=1]="AlphaAsc",e[e.AlphaDesc=2]="AlphaDesc",e[e.Importance=3]="Importance",e[e.TimeAsc=4]="TimeAsc",e[e.TimeDesc=5]="TimeDesc"}(s||(s={})),function(e){e.Current="current",e.RecentChanges="changes"}(a||(a={})),function(e){e.Default="default",e.Custom="custom"}(i||(i={})),function(e){e.List="list",e.Stat="stat"}(r||(r={}))},68953:(e,t,n)=>{"use strict";n.d(t,{Gj:()=>a,Qm:()=>r});var s=n(95369);const a=1,i=(e,t,n,a)=>(0,s.O)(t+e*(n+a),6);function r(e,t,n,r,o){let l=1-t,d=n===a?l/(e-1):2===n?l/e:3===n?l/(e+1):0;(isNaN(d)||d===1/0)&&(d=0);let c=n===a?0:2===n?d/2:3===n?d:0,u=t/e,h=(0,s.O)(u,6);if(null==r)for(let t=0;t<e;t++)o(t,i(t,c,u,d),h);else o(r,i(r,c,u,d),h)}},78321:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Pn:()=>a,kK:()=>r,lW:()=>o,zZ:()=>i});function a(e,t,n,s,a,i){return e>=n&&e<=a&&t>=s&&t<=i}function i(e,t,n){let s;if(e.o.length&&(s=e.o.find((e=>e.sidx===t&&e.didx===n))),null==s&&e.q)for(let a=0;a<e.q.length&&(s=i(e.q[a],t,n),!s);a++);return s}function r(e,t){return e.x<=t.x+t.w&&e.x+e.w>=t.x&&e.y+e.h>=t.y&&e.y<=t.y+t.h}class o{constructor(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;s(this,"o",void 0),s(this,"q",void 0),this.x=e,this.y=t,this.w=n,this.h=a,this.l=i,this.o=[],this.q=null}split(){let e=this,t=e.x,n=e.y,s=e.w/2,a=e.h/2,i=e.l+1;e.q=[new o(t+s,n,s,a,i),new o(t,n,s,a,i),new o(t,n+a,s,a,i),new o(t+s,n+a,s,a,i)]}quads(e,t,n,s,a){let i=this,r=i.q,o=i.x+i.w/2,l=i.y+i.h/2,d=t<l,c=e<o,u=e+n>o,h=t+s>l;d&&u&&a(r[0]),c&&d&&a(r[1]),c&&h&&a(r[2]),u&&h&&a(r[3])}add(e){let t=this;if(null!=t.q)t.quads(e.x,e.y,e.w,e.h,(t=>{t.add(e)}));else{let n=t.o;if(n.push(e),n.length>10&&t.l<4){t.split();for(let e=0;e<n.length;e++){let s=n[e];t.quads(s.x,s.y,s.w,s.h,(e=>{e.add(s)}))}t.o.length=0}}}get(e,t,n,s,a){let i=this,r=i.o;for(let e=0;e<r.length;e++)a(r[e]);null!=i.q&&i.quads(e,t,n,s,(i=>{i.get(e,t,n,s,a)}))}clear(){this.o.length=0,this.q=null}}},60942:(e,t,n)=>{"use strict";n.d(t,{M:()=>p,l:()=>g});var s=n(82897),a=n(68404),i=n(40389),r=n(39949),o=n(63179),l=n(11549),d=n(25700),c=n(46782),u=n(45916);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.PureComponent{constructor(){super(...arguments),h(this,"renderComponent",((e,t)=>{const{options:n,fieldConfig:a}=this.props,{value:i,alignmentFactors:r,orientation:l,width:d,height:h,count:p}=e,{field:m,display:f,view:v,colIndex:b}=i,{openMenu:x,targetClassName:y}=t;let w;return v&&(0,s.isNumber)(b)&&(w=v.getFieldDisplayProcessor(b)),(0,u.jsx)(o.xf,{value:g(p,a.defaults,f),width:d,height:h,orientation:l,field:m,text:n.text,display:w,theme:c.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:n.displayMode,onClick:x,className:y,alignmentFactors:p>1?r:void 0,showUnfilled:n.showUnfilled})})),h(this,"renderValue",(e=>{const{value:t,orientation:n}=e,{hasLinks:s,getLinks:a}=t;return s&&a?(0,u.jsx)("div",{style:{width:"100%",display:n===i.wm.Vertical?"flex":"initial"},children:(0,u.jsx)(l.V,{links:a,children:t=>this.renderComponent(e,t)})}):this.renderComponent(e,{})})),h(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:s,timeZone:a}=this.props;return(0,r.nG)({fieldConfig:s,reduceOptions:t.reduceOptions,replaceVariables:n,theme:c.vc.theme2,data:e.series,timeZone:a})}))}getItemSpacing(){return"lcd"===this.props.options.displayMode?2:10}render(){const{height:e,width:t,options:n,data:s,renderCounter:a}=this.props;return(0,u.jsx)(d.Q,{source:s,getAlignmentFactors:r.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:a,width:t,height:e,minVizWidth:n.minVizWidth,minVizHeight:n.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:n.orientation})}}function g(e,t,n){return 1!==e||t.displayName?n:Object.assign({},n,{title:void 0})}},69748:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ae});var s=n(52423),a=n(68404),i=n(65065),r=n(32898),o=n(54316),l=n(16755);const d=22*window.devicePixelRatio,c=10*window.devicePixelRatio,u=.5*window.devicePixelRatio,h=20*window.devicePixelRatio,p=.5*window.devicePixelRatio,g=4*window.devicePixelRatio;var m=n(27843),f=n(43917),v=n(35765);let b,x,y;!function(e){e.Bytes="bytes",e.Short="short",e.Nanoseconds="ns"}(b||(b={})),function(e){e.Symbol="Symbol",e.Self="Self",e.Total="Total"}(x||(x={})),function(e){e.TopTable="topTable",e.FlameGraph="flameGraph",e.Both="both"}(y||(y={}));var w,j,S,C,k=n(21888),N=n(45916);const O=()=>({tooltip:s.css`
    position: fixed;
  `,lastParagraph:s.css`
    margin-bottom: 0;
  `,name:s.css`
    margin-bottom: 10px;
  `}),I=e=>{let{tooltipRef:t,tooltipData:n,showTooltip:s}=e;const a=(0,l.wW)(O);return(0,N.jsx)("div",{ref:t,className:a.tooltip,children:n&&s&&(0,N.jsx)(k.u,{content:(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{children:n.name}),(0,N.jsxs)("p",{className:a.lastParagraph,children:[n.unitTitle,w||(w=(0,N.jsx)("br",{})),"Total: ",(0,N.jsx)("b",{children:n.unitValue})," (",n.percentValue,"%)",j||(j=(0,N.jsx)("br",{})),"Self: ",(0,N.jsx)("b",{children:n.unitSelf})," (",n.percentSelf,"%)",S||(S=(0,N.jsx)("br",{})),"Samples: ",(0,N.jsx)("b",{children:n.samples})]})]}),placement:"right",show:!0,children:C||(C=(0,N.jsx)("span",{}))})})};var T=n(57971);function $(e,t,n,s,a,i){const r=[];for(let o=0;o<e.length;o+=1){const l=e[o],u=P(l.start,n,s,a);let h=l.value;const g=h*a<=c;if(g)for(;o<e.length-1&&l.start+h===e[o+1].start&&e[o+1].value*a<=c;)o+=1,h+=e[o].value;const m=i(l.value);let f=m.suffix?m.text+m.suffix:m.text;const v=h*a-(g?0:2*p);r.push({width:v,height:d,x:u,y:t*d,collapsed:g,ticks:h,label:l.label,unitLabel:f})}return r}function R(e,t,n,s,a,i,r,o){if(t.width<u)return;e.beginPath(),e.rect(t.x+(t.collapsed?0:p),t.y,t.width,t.height);const l=Math.min(1,t.ticks/n/(a-s)),c=50-50*l,m=65+7*l,f=t.label,v=i&&f.toLowerCase().includes(i.toLowerCase());t.collapsed?e.fillStyle=v?D(c,m):T.O9[55]:(e.stroke(),e.fillStyle=i?v?D(c,m):T.O9[55]:D(c,r>o-1?m:m+15)),e.fill(),!t.collapsed&&t.width>=h&&(e.save(),e.clip(),e.fillStyle="#222",e.fillText(`${f} (${t.unitLabel})`,Math.max(t.x,0)+g,t.y+d/2),e.restore())}function P(e,t,n,s){return(e-t*n)*s}function D(e,t){return`hsl(${e}, 100%, ${t}%)`}const A=(e,t,n)=>({graph:s.css`
    cursor: pointer;
    float: left;
    overflow: scroll;
    width: ${e===y.FlameGraph?"100%":"50%"};
    ${t!==o.zj.Explore?`height: calc(${n}px - 44px)`:""}; // 44px to adjust for header pushing content down
  `}),M=(e,t,n,s,a)=>{if(t){let i=0,r=t.length-1;for(;i<=r;){const o=i+r>>1,l=P(t[o].start,s,a,n),d=P(t[o].start+t[o].value,s,a,n);if(l<=e&&d>=e)return o;l>e?r=o-1:i=o+1}}return-1},L=e=>{var t;let{data:n,app:s,flameGraphHeight:r,levels:o,topLevelIndex:l,rangeMin:c,rangeMax:u,search:h,setTopLevelIndex:p,setRangeMin:g,setRangeMax:x,selectedView:y}=e;const w=A(y,s,r),j=n.fields[1].values.get(0),S=null!==(t=n.fields.find((e=>"value"===e.name)))&&void 0!==t?t:n.fields.find((e=>e.type===m.fS.number));if(!S)throw new Error("Malformed dataFrame: value field of type number is not in the query response");const[C,{width:k}]=(0,i.Z)(),O=(0,a.useRef)(null),T=(0,a.useRef)(null),[P,D]=(0,a.useState)(),[L,F]=(0,a.useState)(!1),E=(0,a.useCallback)(((e,t,n)=>{const s=Math.floor(t/(d/window.devicePixelRatio));return{levelIndex:s,barIndex:M(e,o[s],n,j,c)}}),[o,j,c]),V=(0,a.useCallback)((e=>{var t;if(!o.length)return;const n=null===(t=O.current)||void 0===t?void 0:t.getContext("2d"),s=O.current,a=d*o.length;s.width=Math.round(k*window.devicePixelRatio),s.height=Math.round(a*window.devicePixelRatio),s.style.width=`${k}px`,s.style.height=`${a}px`,n.textBaseline="middle",n.font=12*window.devicePixelRatio+"px monospace",n.strokeStyle="white";const i=(0,f.U)({field:S,theme:(0,v.j)()});for(let t=0;t<o.length;t++){const s=$(o[t],t,j,c,e,i);for(const e of s)R(n,e,j,c,u,h,t,l)}}),[o,k,S,j,c,u,h,l]);return(0,a.useEffect)((()=>{if(O.current){const e=k*window.devicePixelRatio/j/(u-c);V(e),O.current.onclick=e=>{const t=O.current.clientWidth/j/(u-c),{levelIndex:n,barIndex:s}=E(e.offsetX,e.offsetY,t);-1===s||isNaN(n)||isNaN(s)||(p(n),g(o[n][s].start/j),x((o[n][s].start+o[n][s].value)/j))},O.current.onmousemove=e=>{if(T.current){F(!1);const t=O.current.clientWidth/j/(u-c),{levelIndex:n,barIndex:s}=E(e.offsetX,e.offsetY,t);if(-1!==s&&!isNaN(n)&&!isNaN(s)){T.current.style.left=e.clientX+10+"px",T.current.style.top=e.clientY+"px";const t=o[n][s],a=((e,t,n,s,a)=>{let i,r;const o=(0,f.U)({field:e,theme:(0,v.j)()}),l=o(n),d=o(s),c=Math.round(n/a*1e4)/100,u=Math.round(s/a*1e4)/100;let h=l.text+l.suffix,p=d.text+d.suffix;switch(e.config.unit){case b.Bytes:i="% of total",r="RAM";break;case b.Nanoseconds:i="% of total time",r="Time";break;default:i="% of total",r="Count",l.suffix||(h=l.text),d.suffix||(p=d.text)}return{name:t,percentTitle:i,percentValue:c,percentSelf:u,unitTitle:r,unitValue:h,unitSelf:p,samples:n.toLocaleString()}})(S,t.label,t.value,t.self,j);D(a),F(!0)}}},O.current.onmouseleave=()=>{F(!1)}}}),[V,E,o,c,u,l,j,k,p,g,x,y,S]),(0,N.jsxs)("div",{className:w.graph,ref:C,children:[(0,N.jsx)("canvas",{ref:O,"data-testid":"flameGraph"}),(0,N.jsx)(I,{tooltipRef:T,tooltipData:P,showTooltip:L})]})};var F=n(4645),E=n(8006),V=n(37625);const z=(e,t)=>({header:s.css`
    display: flow-root;
    width: 100%;
    background: ${e.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${e.zIndex.navbarFixed};
    ${t===o.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:s.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:s.css`
    float: left;
  `,rightContainer:s.css`
    float: right;
  `}),B=e=>{let{app:t,search:n,setTopLevelIndex:s,setRangeMin:a,setRangeMax:i,setSearch:r,selectedView:o,setSelectedView:d,containerWidth:c}=e;const u=(0,l.wW)((e=>z(e,t)));let h=[{value:y.TopTable,label:"Top Table",description:"Only show top table"},{value:y.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return c>=800&&h.push({value:y.Both,label:"Both",description:"Show both the top table and flame graph"}),(0,N.jsxs)("div",{className:u.header,children:[(0,N.jsxs)("div",{className:u.leftContainer,children:[(0,N.jsx)("div",{className:u.inputContainer,children:(0,N.jsx)(F.I,{value:n||"",onChange:e=>{r(e.currentTarget.value)},placeholder:"Search..",width:24})}),(0,N.jsx)(E.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{s(0),a(0),i(1),r("")},children:"Reset View"})]}),(0,N.jsx)("div",{className:u.rightContainer,children:(0,N.jsx)(V.S,{options:h,value:o,onChange:e=>{d(e)}})})]})};var _=n(89050),W=n(91742),U=n(75478),H=n(99500),q=n(22222);const Z=["key"],G=["key"],Q=["key"];function K(e,t){if(null==e)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}const J=e=>{let{cell:{value:t}}=e;return(0,N.jsx)("div",{children:t})},Y=e=>{let{cell:{value:t}}=e;return(0,N.jsx)("div",{children:t.unitValue})},X=e=>({table:t=>s.css`
      background-color: ${e.colors.background.primary};
      height: ${t}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:s.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:s.css`
    background-color: ${e.colors.background.secondary};
    color: ${e.colors.primary.text};
    padding: ${e.spacing(1)};
  `,matchedRow:s.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${e.colors.background.secondary} !important;
    }
  `,row:s.css`
    border-top: 1px solid ${e.components.panel.borderColor};

    &:hover {
      background-color: ${e.colors.emphasize(e.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:s.css`
    border-right: 1px solid ${e.components.panel.borderColor};
    padding: ${e.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${e.colors.primary.main};
      background-color: ${e.colors.emphasize(e.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:s.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),ee=e=>{let{width:t,height:n,data:i,search:r,setSearch:o,setTopLevelIndex:d,setRangeMin:c,setRangeMax:u}=e;const h=(0,l.wW)((e=>X(e))),p=(e,t,n)=>e.values[n].localeCompare(t.values[n]),g=(e,t,n)=>e.values[n].value.toString().localeCompare(t.values[n].value.toString(),"en",{numeric:!0}),m=(0,a.useMemo)((()=>[{accessor:x.Symbol.toLowerCase(),header:x.Symbol,cell:J,sortType:p,width:t-240},{accessor:x.Self.toLowerCase(),header:x.Self,cell:Y,sortType:g,width:120},{accessor:x.Total.toLowerCase(),header:x.Total,cell:Y,sortType:g,width:120}]),[t]),f=(0,a.useMemo)((()=>({columns:m,data:i,initialState:{sortBy:[{id:x.Self.toLowerCase(),desc:!0}]}})),[m,i]),v=(0,a.useCallback)((e=>{r===e?o(""):(o(e),d(0),c(0),u(1))}),[r,u,c,o,d]),{headerGroups:b,rows:y,prepareRow:w}=(0,W.useTable)(f,W.useSortBy,W.useAbsoluteLayout),j=a.useCallback((e=>{let{index:t,style:n}=e,a=y[t];w(a);const i=a.values[x.Symbol.toLowerCase()],o=(0,s.cx)(i===r&&h.matchedRow,h.row);return(0,N.jsx)("div",Object.assign({},a.getRowProps({style:n}),{className:o,onClick:()=>{v(i)},children:a.cells.map((e=>{const t=e.getCellProps(),{key:n}=t,s=K(t,Z);return s.style&&(s.style.minWidth=s.style.width),(0,N.jsx)("div",Object.assign({className:h.cell},s,{children:e.render("cell")}),n)}))}))}),[y,w,r,h.matchedRow,h.row,h.cell,v]);return(0,N.jsxs)("div",{className:h.table(n),"data-testid":"topTable",children:[b.map((e=>{const t=e.getHeaderGroupProps(),{key:n}=t,s=K(t,G);return(0,N.jsx)("div",Object.assign({className:h.header},s,{children:e.headers.map((e=>{const t=e.getHeaderProps(e.canSort?e.getSortByToggleProps():void 0),{key:n}=t,s=K(t,Q);return(0,N.jsxs)("div",Object.assign({className:h.headerCell},s,{children:[e.render("header"),e.isSorted&&(0,N.jsx)(H.J,{name:e.isSortedDesc?"arrow-down":"arrow-up"})]}),n)}))}),n)})),y.length>0?(0,N.jsx)(q.$,{hideVerticalTrack:!0,children:(0,N.jsx)(U.t7,{height:n,itemCount:y.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"},children:j})}):(0,N.jsx)("div",{style:{height:n},className:h.noData,children:"No data"})]})},te=(e,t)=>{const n="20px";return{topTableContainer:s.css`
      cursor: pointer;
      float: left;
      margin-right: ${n};
      width: ${e===y.TopTable?"100%":"calc(50% - 20px)"};
      ${t!==o.zj.Explore?"height: calc(100% - 44px)":""}; // 44px to adjust for header pushing content down
    `}},ne=e=>{var t,n;let{data:s,app:i,totalLevels:r,selectedView:o,search:c,setSearch:u,setTopLevelIndex:h,setRangeMin:p,setRangeMax:g}=e;const x=(0,l.wW)((()=>te(o,i))),[y,w]=(0,a.useState)(),j=null!==(t=s.fields.find((e=>"value"===e.name)))&&void 0!==t?t:s.fields.find((e=>e.type===m.fS.number)),S=null!==(n=s.fields.find((e=>"self"===e.name)))&&void 0!==n?n:s.fields.find((e=>e.type===m.fS.number)),C=(0,a.useCallback)((()=>{let e,t,n,a={};if(4===s.fields.length){const i=s.fields[1].values,r=s.fields[2].values,o=s.fields[3].values;for(let s=0;s<i.length;s++)n=i.get(s),t=r.get(s),e=o.get(s),a[e]=a[e]||{},a[e].self=a[e].self?a[e].self+t:t,a[e].total=a[e].total?a[e].total+n:n}return a}),[s.fields]),k=(e,t)=>{const n=(0,f.U)({field:e,theme:(0,v.j)()})(t);let s=n.text+n.suffix;switch(e.config.unit){case b.Bytes:case b.Nanoseconds:break;default:n.suffix||(s=n.text)}return s};return(0,a.useEffect)((()=>{const e=C();let t=[];for(let n in e){const s=k(S,e[n].self),a=k(j,e[n].total);t.push({symbol:n,self:{value:e[n].self,unitValue:s},total:{value:e[n].total,unitValue:a}})}w(t)}),[s.fields,S,C,j]),(0,N.jsx)(N.Fragment,{children:y&&(0,N.jsx)("div",{className:x.topTableContainer,children:(0,N.jsx)(_.Z,{style:{width:"100%",height:d*r+"px"},children:e=>{let{width:t,height:n}=e;return(0,N.jsx)(ee,{width:t,height:n,data:y,search:c,setSearch:u,setTopLevelIndex:h,setRangeMin:p,setRangeMax:g})}})})})},se=(e,t)=>({container:s.css`
    height: ${e===o.zj.Explore?t+"px":"100%"};
  `}),ae=e=>{const[t,n]=(0,a.useState)(0),[s,o]=(0,a.useState)(0),[c,u]=(0,a.useState)(1),[h,p]=(0,a.useState)(""),[g,m]=(0,a.useState)(y.Both),[f,{width:v}]=(0,i.Z)(),b=(0,a.useMemo)((()=>{if(!e.data)return[];return function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){const a=Object.assign({},e.get(s)),i=s>0?Object.assign({},e.get(s-1)):void 0;if(t[a.level]=t[a.level]||[],i&&i.level>=a.level){const e=t[a.level][t[a.level].length-1];n=e.start+e.value}const r=Object.assign({},a,{start:n});t[a.level].push(r)}return t}(new r.U(e.data))}),[e.data]),x=(0,l.wW)((()=>se(e.app,d*b.length)));return(0,a.useEffect)((()=>{v>0&&v<800&&g===y.Both&&m(y.FlameGraph)}),[g,m,v]),(0,N.jsxs)("div",{ref:f,className:x.container,children:[(0,N.jsx)(B,{app:e.app,setTopLevelIndex:n,setRangeMin:o,setRangeMax:u,search:h,setSearch:p,selectedView:g,setSelectedView:m,containerWidth:v}),g!==y.FlameGraph&&(0,N.jsx)(ne,{data:e.data,app:e.app,totalLevels:b.length,selectedView:g,search:h,setSearch:p,setTopLevelIndex:n,setRangeMin:o,setRangeMax:u}),g!==y.TopTable&&(0,N.jsx)(L,{data:e.data,app:e.app,flameGraphHeight:e.flameGraphHeight,levels:b,topLevelIndex:t,rangeMin:s,rangeMax:c,search:h,setTopLevelIndex:n,setRangeMin:o,setRangeMax:u,selectedView:g})]})}},37275:(e,t,n)=>{"use strict";n.r(t),n.d(t,{plugin:()=>w});var s=n(18151),a=n(94221),i=n(11887),r=n(69927);var o=n(68404),l=n(39949),d=n(47868),c=n(11549),u=n(25700),h=n(46782),p=n(60942),g=n(45916);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends o.PureComponent{constructor(){super(...arguments),m(this,"renderComponent",((e,t)=>{const{options:n,fieldConfig:s}=this.props,{width:a,height:i,count:r,value:o}=e,{field:l,display:c}=o,{openMenu:u,targetClassName:m}=t;return(0,g.jsx)(d.a,{value:(0,p.l)(r,s.defaults,c),width:a,height:i,field:l,text:n.text,showThresholdLabels:n.showThresholdLabels,showThresholdMarkers:n.showThresholdMarkers,theme:h.vc.theme2,onClick:u,className:m})})),m(this,"renderValue",(e=>{const{value:t}=e,{getLinks:n,hasLinks:s}=t;return s&&n?(0,g.jsx)(c.V,{links:n,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),m(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:s,timeZone:a}=this.props;return(0,l.nG)({fieldConfig:s,reduceOptions:t.reduceOptions,replaceVariables:n,theme:h.vc.theme2,data:e.series,timeZone:a})}))}render(){const{height:e,width:t,data:n,renderCounter:s,options:a}=this.props;return(0,g.jsx)(u.Q,{getValues:this.getValues,renderValue:this.renderValue,width:t,height:e,source:n,autoGrid:!0,renderCounter:s,orientation:a.orientation})}}Object.freeze([0,0]);const v=!1,b=!0;var x=n(87602),y=n(29791);const w=new s.c(f).useFieldConfig({useCustomConfig:e=>{e.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions((e=>{(0,i.j)(e),(0,i.h)(e),e.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:b}),a.Z(e)})).setPanelChangeHandler(((e,t,n)=>{const s=(0,r.ZH)(e,t,n);if("singlestat"===t&&n.angular){const e=n.angular.gauge;e&&(s.showThresholdMarkers=e.thresholdMarkers,s.showThresholdLabels=e.thresholdLabels)}return s})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;if(t.numberFieldCount>=50)return;const n=e.getListAppender({name:y.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:x.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=2)}}});t.hasStringField&&1===t.frameCount&&t.rowCountTotal<10?(n.append({name:y.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),n.append({name:y.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(n.append({name:y.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),n.append({name:y.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}).setMigrationHandler((e=>(0,r.rD)(e)))},32654:(e,t,n)=>{"use strict";n.d(t,{H:()=>h});var s=n(52423),a=(n(68404),n(32934)),i=n(55343),r=n(12925),o=n(27864),l=n(16755),d=n(54761),c=n(8006),u=n(45916);const h=e=>{let{data:t,rowIndex:n,columnIndex:s,sortOrder:d,mode:c,displayExemplarHeader:h=!0}=e;const m=(0,l.wW)(g);if(!t||null==n)return null;const f=t.fields.filter((e=>{var t,n;return!Boolean(null===(t=e.config.custom)||void 0===t||null===(n=t.hideFrom)||void 0===n?void 0:n.tooltip)})),v=f.find((e=>"traceID"===e.name))||t.fields[0],b=[v,...f.filter((e=>v!==e))];if(0===b.length)return null;const x=[],y={};for(const e of b){const s=e.values.get(n),r=e.display?e.display(s):{text:`${s}`,numeric:+s};e.getLinks&&e.getLinks({calculatedValue:r,valueRowIndex:n}).forEach((n=>{const s=(0,a.C)(e,t);y[s]||(y[s]=[]),y[s].push(n)})),x.push([(0,a.C)(e,t),s,(0,i.zc)(r)])}return d&&d!==o.As.None&&x.sort(((e,t)=>r.sortValues(d)(e[1],t[1]))),(0,u.jsxs)("div",{className:m.wrapper,children:[h&&(0,u.jsx)("div",{className:m.header,children:(0,u.jsx)("span",{className:m.title,children:"Exemplar"})}),(0,u.jsx)("table",{className:m.infoWrap,children:(0,u.jsxs)("tbody",{children:[(c===o.f3.Multi||null==c)&&x.map(((e,t)=>(0,u.jsxs)("tr",{className:t===s?m.highlight:"",children:[(0,u.jsxs)("th",{children:[e[0],":"]}),(0,u.jsx)("td",{children:p(e[0],e[2],y)})]},`${t}/${n}`))),c===o.f3.Single&&s&&(0,u.jsxs)("tr",{children:[(0,u.jsxs)("th",{children:[x[s][0],":"]}),(0,u.jsx)("td",{children:p(x[s][0],x[s][2],y)})]},`${s}/${n}`)]})})]})},p=(e,t,n)=>n[e]?(0,u.jsx)(d.Lh,{children:(0,u.jsxs)(u.Fragment,{children:[t,n[e].map(((e,t)=>(0,u.jsx)(c.Qj,{icon:"external-link-alt",target:e.target,href:e.href,onClick:e.onClick,fill:"text",style:{width:"100%"},children:e.title},t)))]})}):(0,u.jsx)(u.Fragment,{children:t}),g=e=>{const t=e.isDark?e.v1.palette.dark2:e.v1.palette.white,n=e.isDark?e.v1.palette.dark9:e.v1.palette.gray5,a=e.isDark?e.v1.palette.dark3:e.v1.palette.gray6;return{wrapper:s.css`
      background: ${t};
      border: 1px solid ${n};
      border-radius: ${e.shape.borderRadius(2)};
    `,header:s.css`
      background: ${n};
      padding: 6px 10px;
      display: flex;
    `,title:s.css`
      font-weight: ${e.typography.fontWeightMedium};
      padding-right: ${e.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:s.css`
      padding: 8px;
      th {
        font-weight: ${e.typography.fontWeightMedium};
        padding: ${e.spacing(.25,2)};
      }
      tr {
        background-color: ${e.colors.background.primary};
        &:nth-child(even) {
          background-color: ${a};
        }
      }
    `,highlight:s.css`
      background: ${e.colors.action.hover};
    `}}},53543:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});var s=n(52423),a=(n(68404),n(76093)),i=n(6432),r=n(16755),o=n(45916);function l(e){let{width:t,showImage:n,data:l,index:c}=e;const u=(0,r.wW)(d),h=t>600,p=l.get(c);return(0,o.jsxs)("article",{className:(0,s.cx)(u.item,h&&u.itemWide),children:[n&&p.ogImage&&(0,o.jsx)("a",{tabIndex:-1,href:a.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",className:(0,s.cx)(u.socialImage,h&&u.socialImageWide),"aria-hidden":!0,children:(0,o.jsx)("img",{src:p.ogImage,alt:p.title})}),(0,o.jsxs)("div",{className:u.body,children:[(0,o.jsxs)("time",{className:u.date,dateTime:(0,i.dq)(p.date,{format:"MMM DD"}),children:[(0,i.dq)(p.date,{format:"MMM DD"})," "]}),(0,o.jsx)("a",{className:u.link,href:a.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",children:(0,o.jsx)("h3",{className:u.title,children:p.title})}),(0,o.jsx)("div",{className:u.content,dangerouslySetInnerHTML:{__html:a.QX.sanitize(p.content)}})]})]})}const d=e=>({container:s.css`
    height: 100%;
  `,item:s.css`
    display: flex;
    padding: ${e.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${e.spacing(1)};
    border-bottom: 2px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:s.css`
    flex-direction: row;
  `,body:s.css`
    display: flex;
    flex-direction: column;
  `,socialImage:s.css`
    display: flex;
    align-items: center;
    margin-bottom: ${e.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:s.css`
    margin-right: ${e.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${e.shape.borderRadius()};
    }
  `,link:s.css`
    color: ${e.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${e.colors.text.link};
      text-decoration: underline;
    }
  `,title:s.css`
    font-size: 16px;
    margin-bottom: ${e.spacing(.5)};
  `,content:s.css`
    p {
      margin-bottom: 4px;
      color: ${e.colors.text};
    }
  `,date:s.css`
    margin-bottom: ${e.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${e.colors.text.secondary};
  `})},81359:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});const s="https://grafana.com/blog/news.xml"},46479:(e,t,n)=>{"use strict";n.d(t,{j:()=>c});var s=n(7197),a=n(32898);function i(e,t){var n;const s=e.querySelector(t);return null!==(n=null==s?void 0:s.textContent)&&void 0!==n?n:""}async function r(e){const t=await async function(e){const t=await fetch(e);return await t.text()}(e);var n;return n=t,null!==(new DOMParser).parseFromString(n,"text/xml").querySelector("feed")?function(e){const t=(new DOMParser).parseFromString(e,"text/xml");return{items:Array.from(t.querySelectorAll("entry")).map((e=>{var t,n,s;return{title:i(e,"title"),link:null!==(t=null===(n=e.querySelector("link"))||void 0===n?void 0:n.getAttribute("href"))&&void 0!==t?t:"",content:i(e,"content"),pubDate:i(e,"published"),ogImage:null===(s=e.querySelector("meta[property='og:image']"))||void 0===s?void 0:s.getAttribute("content")}}))}}(t):function(e){const t=(new DOMParser).parseFromString(e,"text/xml");return{items:Array.from(t.querySelectorAll("item")).map((e=>{var t;return{title:i(e,"title"),link:i(e,"link"),content:i(e,"description"),pubDate:i(e,"pubDate"),ogImage:null===(t=e.querySelector("meta[property='og:image']"))||void 0===t?void 0:t.getAttribute("content")}}))}}(t)}var o=n(94582),l=n(88246),d=n(27843);function c(e){const[t,n]=(0,s.Z)((async()=>{const t=function(e){const t=new o.G([]),n=new o.G([]),s=new o.G([]),a=new o.G([]),i=new o.G([]);for(const r of e.items){const e=(0,l.CQ)(r.pubDate);try{if(t.buffer.push(e.valueOf()),n.buffer.push(r.title),s.buffer.push(r.link),i.buffer.push(r.ogImage),r.content){const e=r.content.replace(/<\/?[^>]+(>|$)/g,"");a.buffer.push(e)}}catch(e){console.warn("Error reading news item:",e,r)}}return{fields:[{name:"date",type:d.fS.time,config:{displayName:"Date"},values:t},{name:"title",type:d.fS.string,config:{},values:n},{name:"link",type:d.fS.string,config:{},values:s},{name:"content",type:d.fS.string,config:{},values:a},{name:"ogImage",type:d.fS.string,config:{},values:i}],length:t.length}}(await r(e));return new a.U(t)}),[e],{loading:!0});return{state:t,getNews:n}}},81434:(e,t,n)=>{"use strict";n.d(t,{E:()=>ge});var s=n(52423),a=n(9085),i=n.n(a),r=n(68404),o=n(92084),l=n(16755),d=n(81691),c=n(99500),u=n(10098),h=n(45916);const p=(0,r.memo)((function(e){const{edge:t,onClick:n,onMouseEnter:s,onMouseLeave:a,hovering:i}=e,{source:r,target:o}=t,l=(0,u.dM)({x1:r.x,y1:r.y,x2:o.x,y2:o.y},90);return(0,h.jsxs)("g",{onClick:e=>n(e,t),style:{cursor:"pointer"},"aria-label":`Edge from: ${t.source.id} to: ${t.target.id}`,children:[(0,h.jsx)("line",{strokeWidth:i?2:1,stroke:"#999",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,markerEnd:"url(#triangle)"}),(0,h.jsx)("line",{stroke:"transparent",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,strokeWidth:20,onMouseEnter:()=>{s(t.id)},onMouseLeave:()=>{a(t.id)}})]})}));var g;function m(){return g||(g=(0,h.jsx)("defs",{children:(0,h.jsx)("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto",children:(0,h.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})})}))}const f=e=>({mainGroup:s.css`
      pointer-events: none;
      font-size: 8px;
    `,background:s.css`
      fill: ${e.components.tooltip.background};
    `,text:s.css`
      fill: ${e.components.tooltip.text};
    `}),v=(0,r.memo)((function(e){const{edge:t}=e,{source:n,target:s}=t,a=(0,u.dM)({x1:n.x,y1:n.y,x2:s.x,y2:s.y},90),i={x:a.x1+(a.x2-a.x1)/2,y:a.y1+(a.y2-a.y1)/2},r=(0,l.wW)(f);return(0,h.jsxs)("g",{className:r.mainGroup,children:[(0,h.jsx)("rect",{className:r.background,x:i.x-40,y:i.y-15,width:"80",height:"30",rx:"5"}),(0,h.jsx)("text",{className:r.text,x:i.x,y:i.y-5,textAnchor:"middle",children:t.mainStat}),(0,h.jsx)("text",{className:r.text,x:i.x,y:i.y+10,textAnchor:"middle",children:t.secondaryStat})]})}));var b=n(82897),x=n(663),y=n(27864),w=n(38914),j=n(13768);function S(){return{item:s.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:s.css`
      label: Legend;
      pointer-events: all;
    `}}const C=function(e){const{nodes:t,onSort:n,sort:s,sortable:a}=e,i=(0,l.l4)(),o=(0,l.wW)(S),d=function(e,t){if(!e.length)return[];const n=[e[0].mainStat,e[0].secondaryStat].filter(b.identity),s=e.find((e=>e.arcSections.length>0));var a,i;s&&(null===(a=s.arcSections[0].config)||void 0===a||null===(i=a.color)||void 0===i?void 0:i.mode)===x.S.Fixed&&n.push(...new Set(e.map((e=>e.arcSections)).flat()));e[0].color&&n.push(e[0].color);return n.map((e=>{var n,s,a;const i={label:e.config.displayName||e.name,yAxis:0,data:{field:e}};var r;if((null===(n=e.config.color)||void 0===n?void 0:n.mode)===x.S.Fixed&&null!==(s=e.config.color)&&void 0!==s&&s.fixedColor)i.color=t.visualization.getColorByName((null===(r=e.config.color)||void 0===r?void 0:r.fixedColor)||"");else if(null!==(a=e.config.color)&&void 0!==a&&a.mode){var o;i.gradient=null===(o=e.config.color)||void 0===o?void 0:o.mode}return i.color||i.gradient||(i.color=t.visualization.getColorByName("")),i}))}(t,i),u=(0,r.useCallback)((e=>{n({field:e.data.field,ascending:e.data.field===(null==s?void 0:s.field)&&!(null!=s&&s.ascending)})}),[s,n]);return(0,h.jsx)(w.l,{className:o.legend,displayMode:y.jK.List,placement:"bottom",items:d,itemRenderer:e=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(j.e,{item:e,className:o.item,onLabelClick:a?u:void 0}),a&&((null==s?void 0:s.field)===e.data.field?(0,h.jsx)(c.J,{name:s.ascending?"arrow-up":"arrow-down"}):"")]})})};const k=e=>({mainGroup:s.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:s.css`
    fill: ${e.components.panel.background};
    stroke: ${e.colors.border.strong};
  `,text:s.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),N=(0,r.memo)((function(e){const{marker:t,onClick:n}=e,{node:s}=t,a=(0,l.wW)(k);return void 0===s.x||void 0===s.y?null:(0,h.jsxs)("g",{"data-node-id":s.id,className:a.mainGroup,onClick:e=>{null==n||n(e,t)},"aria-label":`Hidden nodes marker: ${s.id}`,children:[(0,h.jsx)("circle",{className:a.mainCircle,r:40,cx:s.x,cy:s.y}),(0,h.jsx)("g",{children:(0,h.jsx)("foreignObject",{x:s.x-25,y:s.y-25,width:"50",height:"50",children:(0,h.jsx)("div",{className:a.text,children:(0,h.jsxs)("span",{children:[t.count>100?">100":t.count," nodes"]})})})})]})}));var O,I,T=n(35008),$=n.n(T),R=n(31319);const P=40,D=(0,r.memo)((function(e){const{node:t,onMouseEnter:n,onMouseLeave:a,onClick:r,hovering:o}=e,d=((e,t)=>({mainGroup:s.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${"inactive"===t?.5:1};
  `,mainCircle:s.css`
    fill: ${e.components.panel.background};
  `,hoverCircle:s.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${e.colors.primary.text};
  `,text:s.css`
    fill: ${e.colors.text.primary};
  `,titleText:s.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${$()(e.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:s.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:s.css`
    width: 200px;
    & span {
      background-color: ${$()(e.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}))((0,l.l4)(),o),c="active"===o;return void 0===t.x||void 0===t.y?null:(0,h.jsxs)("g",{"data-node-id":t.id,className:d.mainGroup,onMouseEnter:()=>{n(t.id)},onMouseLeave:()=>{a(t.id)},onClick:e=>{r(e,t)},"aria-label":`Node: ${t.title}`,children:[(0,h.jsx)("circle",{className:d.mainCircle,r:P,cx:t.x,cy:t.y}),c&&(0,h.jsx)("circle",{className:d.hoverCircle,r:37,cx:t.x,cy:t.y,strokeWidth:2}),(0,h.jsx)(A,{node:t}),(0,h.jsxs)("g",{className:d.text,children:[(0,h.jsx)("foreignObject",{x:t.x-(c?100:35),y:t.y-15,width:c?"200":"70",height:"40",children:(0,h.jsxs)("div",{className:i()(d.statsText,c&&d.textHovering),children:[(0,h.jsx)("span",{children:t.mainStat&&(0,u.Ew)(t.mainStat,t.dataFrameRowIndex)}),O||(O=(0,h.jsx)("br",{})),(0,h.jsx)("span",{children:t.secondaryStat&&(0,u.Ew)(t.secondaryStat,t.dataFrameRowIndex)})]})}),(0,h.jsx)("foreignObject",{x:t.x-(c?100:50),y:t.y+P+5,width:c?"200":"100",height:"40",children:(0,h.jsxs)("div",{className:i()(d.titleText,c&&d.textHovering),children:[(0,h.jsx)("span",{children:t.title}),I||(I=(0,h.jsx)("br",{})),(0,h.jsx)("span",{children:t.subTitle})]})})]})]})}));function A(e){const{node:t}=e,n=t.arcSections.find((e=>e.values.get(t.dataFrameRowIndex)>=1)),s=(0,l.l4)();var a;if(n)return(0,h.jsx)("circle",{fill:"none",stroke:s.visualization.getColorByName((null===(a=n.config.color)||void 0===a?void 0:a.fixedColor)||""),strokeWidth:2,r:P,cx:t.x,cy:t.y});const i=t.arcSections.filter((e=>0!==e.values.get(t.dataFrameRowIndex)));if(0===i.length)return(0,h.jsx)("circle",{fill:"none",stroke:t.color?L(t.color,t.dataFrameRowIndex,s):"gray",strokeWidth:2,r:P,cx:t.x,cy:t.y});const{elements:r}=i.reduce(((e,n)=>{var a;const i=(null===(a=n.config.color)||void 0===a?void 0:a.fixedColor)||"",r=n.values.get(t.dataFrameRowIndex),o=(0,h.jsx)(M,{r:P,x:t.x,y:t.y,startPercent:e.percent,percent:r+e.percent>1?1-e.percent:r,color:s.visualization.getColorByName(i),strokeWidth:2},i);return e.elements.push(o),e.percent=e.percent+r,e}),{elements:[],percent:0});return(0,h.jsx)(h.Fragment,{children:r})}function M(e){let{r:t,x:n,y:s,startPercent:a,percent:i,color:r,strokeWidth:o=2}=e;const l=a+i,d=n+Math.sin(2*Math.PI*a)*t,c=s-Math.cos(2*Math.PI*a)*t,u=n+Math.sin(2*Math.PI*l)*t,p=s-Math.cos(2*Math.PI*l)*t,g=i>.5?"1":"0";return(0,h.jsx)("path",{fill:"none",d:`M ${d} ${c} A ${t} ${t} 0 ${g} 1 ${u} ${p}`,stroke:r,strokeWidth:o})}function L(e,t,n){return e.config.color?(0,R.fD)(e).getCalculator(e,n)(0,e.values.get(t)):e.values.get(t)}var F=n(54761),E=n(8006);function V(){return{wrapper:s.css`
      label: wrapper;
      pointer-events: all;
    `}}function z(e){const{config:t,onConfigChange:n,onPlus:s,onMinus:a,disableZoomOut:i,disableZoomIn:o}=e,[d,c]=(0,r.useState)(!1),u=(0,l.wW)(V);return(0,h.jsxs)("div",{className:u.wrapper,children:[(0,h.jsxs)(F.wc,{spacing:"sm",children:[(0,h.jsxs)(F.Lh,{spacing:"xs",children:[(0,h.jsx)(E.zx,{icon:"plus-circle",onClick:s,size:"md",title:"Zoom in",variant:"secondary",disabled:o}),(0,h.jsx)(E.zx,{icon:"minus-circle",onClick:a,size:"md",title:"Zoom out",variant:"secondary",disabled:i})]}),(0,h.jsxs)(F.Lh,{spacing:"xs",children:[(0,h.jsx)(E.zx,{icon:"code-branch",onClick:()=>n(Object.assign({},t,{gridLayout:!1})),size:"md",title:"Default layout",variant:"secondary",disabled:!t.gridLayout}),(0,h.jsx)(E.zx,{icon:"apps",onClick:()=>n(Object.assign({},t,{gridLayout:!0})),size:"md",title:"Grid layout",variant:"secondary",disabled:t.gridLayout})]})]}),false,false]})}var B=n(1482),_=n(18359),W=n(2182);function U(e,t,n,s,a){const[i,o]=(0,r.useMemo)((()=>{if(!e.length||!t.length)return[{},{}];return[t.reduce(((e,t)=>{var n,s;return e[t.source.id]=[...null!==(n=e[t.source.id])&&void 0!==n?n:[],t],e[t.target.id]=[...null!==(s=e[t.target.id])&&void 0!==s?s:[],t],e}),{}),e.reduce(((e,t)=>(e[t.id]=t,e)),{})]}),[t,e]);return(0,r.useMemo)((()=>e.length<=n?{nodes:e,edges:t}:s.gridLayout?function(e,t,n){let s=0,a=t,i=[];if(n){const r=e.findIndex((e=>e.id===n)),o=Math.floor(t/2);let l=o;s=r-o,s<0&&(l+=Math.abs(s),s=0),a=r+l+1,a>e.length&&(s>0&&(s=Math.max(0,s-(a-e.length))),a=e.length),s>1&&i.push({node:e[s-1],count:s}),e.length-a>1&&i.push({node:e[a],count:e.length-a})}else e.length-t>1&&(i=[{node:e[t],count:e.length-t}]);return{nodes:e.slice(s,a),edges:[],markers:i}}(e,n,a):function(e,t,n,s,a,i){let r;i?r=[n[i]]:(r=e.filter((e=>0===e.incoming)),r.length||(r=[e[0]]));const{visibleNodes:o,markers:l}=function(e,t,n,s){const a={};let i=[...t];for(;Object.keys(a).length<e&&i.length>0;){let e=i.shift();if(a[e.id])continue;a[e.id]=e;const t=(s[e.id]||[]).map((t=>{const s=t.source.id===e.id?t.target.id:t.source.id;return n[s]}));i=i.concat(t)}const r=(0,b.uniq)(i.filter((e=>!a[e.id])));return{visibleNodes:a,markers:r}}(a,r,n,s),d=function(e,t,n,s){return e.map((e=>{const a={};let i=0,r=[e];for(;r.length>0&&i<=101;){let e=r.shift();if(t[e.id]||a[e.id])continue;a[e.id]||i++,a[e.id]=e;const o=(s[e.id]||[]).map((t=>{const s=t.source.id===e.id?t.target.id:t.source.id;return n[s]}));r=r.concat(o)}return{node:e,count:i}}))}(l,o,n,s),c=(0,b.fromPairs)(d.map((e=>[e.node.id,e])));for(const e of d)1===e.count&&(delete c[e.node.id],o[e.node.id]=e.node);const u=t.filter((e=>(o[e.source.id]||c[e.source.id])&&(o[e.target.id]||c[e.target.id])));return{nodes:Object.values(o),edges:u,markers:Object.values(c)}}(e,t,o,i,n,a)),[t,i,n,e,o,a,s.gridLayout])}const H={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function q(e,t,s){const a=new W.q(new URL(n.p+n.u(7190),n.b));return a.onmessage=t=>{for(let n=0;n<e.length;n++)t.data.nodes[n]=Object.assign({},e[n],t.data.nodes[n]);s(t.data)},a.postMessage({nodes:e.map((e=>({id:e.id,incoming:e.incoming}))),edges:t,config:H}),()=>{a.terminate()}}function Z(e,t,n){const s=Math.min(Math.floor((t-120)/140),e.length),a=Math.floor(120*(s-1)/2);n&&e.sort(((e,t)=>{const s=n.field.values.get(e.dataFrameRowIndex),a=n.field.values.get(t.dataFrameRowIndex);return n.ascending?s-a:a-s}));for(const[t,n]of e.entries()){const e=Math.floor(t/s),i=t%s;n.x=120*i-a,n.y=140*e-60}}var G,Q=n(90009),K=n(33514),J=n(9655),Y=n(21357);function X(e,t,n){if(!(e.length||null!=n&&n.length))return;const s=function(e){const t="Open in Explore",n=e.reduce(((e,n)=>{let s,a;return-1!==n.title.indexOf("/")?(s=n.title.split("/")[0],a=n.title.split("/")[1],e[s]=e[s]||[],e[s].push({l:n,newTitle:a})):(e[t]=e[t]||[],e[t].push({l:n})),e}),{});return Object.keys(n).map((e=>({label:e,ariaLabel:e,items:n[e].map((e=>({label:e.newTitle||e.l.title,ariaLabel:e.newTitle||e.l.title,url:e.l.href,onClick:e.l.onClick})))})))}(e);return()=>{let e=null==s?void 0:s.map(((e,n)=>(0,h.jsx)(J.k,{label:e.label,children:(e.items||[]).map(ee(t))},`${e.label}${n}`)));return n&&(e=[...n.map(ee(t)),...e]),e}}function ee(e){return function(t){return(0,h.jsx)(Y.s,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?n=>{var s;null!=n&&n.ctrlKey||null!=n&&n.metaKey||null!=n&&n.shiftKey||(null==n||n.preventDefault(),null==n||n.stopPropagation(),null===(s=t.onClick)||void 0===s||s.call(t,e))}:void 0,target:"_self"},t.label)}}function te(e){const t=e.node.dataFrameRowIndex,n=(0,u.F)(e.nodes);return(0,h.jsxs)("div",{children:[n.title&&(0,h.jsx)(se,{field:n.title,index:t}),n.subTitle&&(0,h.jsx)(se,{field:n.subTitle,index:t}),n.details.map((e=>(0,h.jsx)(se,{field:e,index:t},e.name)))]})}function ne(e){var t,n;const s=e.edge.dataFrameRowIndex,a=(0,u.lr)(e.edges),i=ae((0,l.l4)()),r=(null===(t=a.source)||void 0===t?void 0:t.values.get(s))||"",o=(null===(n=a.target)||void 0===n?void 0:n.values.get(s))||"";return(0,h.jsxs)("div",{children:[a.source&&a.target&&(0,h.jsxs)("div",{className:i.label,children:[G||(G=(0,h.jsx)("div",{children:"Source → Target"})),(0,h.jsxs)("span",{className:i.value,children:[r," → ",o]})]}),a.details.map((e=>(0,h.jsx)(se,{field:e,index:s},e.name)))]})}function se(e){const{field:t,index:n}=e,s=t.values.get(n)||"",a=(0,l.wW)(ae);return(0,h.jsxs)("div",{className:a.label,children:[(0,h.jsx)("div",{children:t.config.displayName||t.name}),(0,h.jsx)("span",{className:a.value,children:s})]})}const ae=e=>({label:s.css`
      label: Label;
      line-height: 1.25;
      margin-bottom: ${e.spacing(.5)};
      padding-left: ${e.spacing(.25)};
      color: ${e.colors.text.disabled};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    `,value:s.css`
      label: Value;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
      margin-top: ${e.spacing(.25)};
      display: block;
    `});var ie=n(44260);function re(){let{scale:e=1,bounds:t,focus:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,_.default)(),a=(0,r.useRef)(!1),i=(0,r.useRef)(0),o=(0,r.useRef)(null),l={x:0,y:0},d=(0,r.useMemo)((()=>({right:t?-t.left:1/0,left:t?-t.right:-1/0,bottom:t?-t.top:-1/0,top:t?-t.bottom:1/0})),[t]),c=(0,r.useRef)(l),u=(0,r.useRef)(l),h=(0,r.useRef)(l),[p,g]=(0,r.useState)({isPanning:!1,position:l});(0,r.useEffect)((()=>{const t=()=>{a.current&&s()&&(a.current=!1,g((e=>Object.assign({},e,{isPanning:!1}))),l())},n=e=>{(e=>{!a.current&&s()&&(a.current=!0,c.current=le(e),u.current=Object.assign({},h.current),g((e=>Object.assign({},e,{isPanning:!0}))),r())})(e),p(e)},r=()=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",t),document.addEventListener("touchmove",p),document.addEventListener("touchend",t)},l=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",t)},p=t=>{cancelAnimationFrame(i.current);const n=le(t);i.current=requestAnimationFrame((()=>{if(s()&&o.current){let t=n.x-c.current.x,s=n.y-c.current.y;h.current={x:oe(u.current.x+t/e,d.left,d.right),y:oe(u.current.y+s/e,d.top,d.bottom)},g((e=>Object.assign({},e,{position:Object.assign({},h.current)})))}}))},m=o.current;return m&&(m.addEventListener("mousedown",n),m.addEventListener("touchstart",n)),()=>{m&&(m.removeEventListener("mousedown",n),m.removeEventListener("touchstart",n))}}),[e,d,s]);const m=(0,ie.Z)(n);(0,r.useEffect)((()=>{if(n&&(null==m?void 0:m.x)!==n.x&&(null==m?void 0:m.y)!==n.y){const e={x:oe(n.x,d.left,d.right),y:oe(n.y,d.top,d.bottom)};g({position:e,isPanning:!1}),h.current=e,u.current=e}}),[n,m,d,h,u]);let f=p.position;return n&&(null==m?void 0:m.x)!==n.x&&(null==m?void 0:m.y)!==n.y&&(f=n),{state:Object.assign({},p,{position:{x:oe(f.x,d.left,d.right),y:oe(f.y,d.top,d.bottom)}}),ref:o}}function oe(e,t,n){return Math.min(Math.max(e,null!=t?t:-1/0),null!=n?n:1/0)}function le(e){if(e.changedTouches){const t=e;return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}}{const t=e;return{x:t.clientX,y:t.clientY}}}const de={stepDown:e=>e/1.5,stepUp:e=>1.5*e,min:.13,max:2.25};var ce,ue,he;const pe=e=>({wrapper:s.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:s.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:s.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:s.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.secondary};
  `,mainGroup:s.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:s.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:s.css`
    label: legend;
    background: ${e.colors.background.secondary};
    box-shadow: ${e.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:s.css`
    margin-left: auto;
  `,alert:s.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${e.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,loadingWrapper:s.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `});function ge(e){let{getLinks:t,dataFrames:n,nodeLimit:s}=e;const a=s||200,{edges:p,nodes:g}=(0,Q.Y)(n),[f,{width:v,height:b}]=(0,o.Z)(),[x,y]=(0,r.useState)(H),w=g[0],j=p[0],S=(0,l.l4)(),k=(0,r.useMemo)((()=>(0,u.HB)(w,j,S)),[j,w,S]),{nodeHover:N,setNodeHover:O,clearNodeHover:I,edgeHover:T,setEdgeHover:$,clearEdgeHover:R}=function(){const[e,t]=(0,r.useState)(void 0),n=(0,r.useCallback)((()=>t(void 0)),[t]),[s,a]=(0,r.useState)(void 0),i=(0,r.useCallback)((()=>a(void 0)),[a]);return{nodeHover:e,setNodeHover:t,clearNodeHover:n,edgeHover:s,setEdgeHover:a,clearEdgeHover:i}}(),[P,D]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=[];N?e=(0,u.uX)(k.nodes,k.edges,N):T&&(e=(0,u.MP)(k.nodes,k.edges,T)),D(e)}),[N,T,k]);const[A,M]=(0,r.useState)(),L=(0,r.useCallback)(((e,t)=>M(t.node.id)),[M]),{nodes:F,edges:E,markers:V,bounds:W,hiddenNodesCount:G,loading:J}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const[o,l]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),g=(0,_.default)(),m=(0,r.useRef)();(0,B.Z)((()=>{m.current&&m.current()})),(0,r.useEffect)((()=>{if(0===e.length)return l([]),c([]),void p(!1);p(!0);const n=q(e,t,(e=>{let{nodes:t,edges:n}=e;g()&&(l(t),c(n),p(!1))}));return m.current=n,n}),[e,t,g]);const[f,v]=(0,r.useMemo)((()=>{if(0===e.length)return[[],[]];const s=e.map((e=>Object.assign({},e))),i=t.map((e=>Object.assign({},e)));return Z(s,a,n.sort),[s,i]}),[n.sort,e,t,a]),{nodes:b,edges:x,markers:y}=U(n.gridLayout?f:o,n.gridLayout?v:d,s,n,i),w=(0,r.useMemo)((()=>(0,u.Tz)([...b,...(y||[]).map((e=>e.node))])),[b,y]);return{nodes:b,edges:x,markers:y,bounds:w,hiddenNodesCount:e.length-b.length,loading:h}}(k.nodes,k.edges,x,a,v,A),Y=function(e,t,n){let s;if(!0===(0,ie.Z)(e.gridLayout)&&!e.gridLayout&&n){const e=t.find((e=>e.id===n));e&&(s={x:-e.x,y:-e.y})}return s}(x,F,A),{panRef:ee,zoomRef:se,onStepUp:ae,onStepDown:oe,isPanning:le,position:ge,scale:xe,isMaxZoom:ye,isMinZoom:we}=function(e,t){const{scale:n,onStepDown:s,onStepUp:a,ref:i,isMax:o,isMin:l}=function(){let{stepUp:e,stepDown:t,min:n,max:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;const a=(0,r.useRef)(null),[i,o]=(0,r.useState)(1),l=(0,r.useCallback)((()=>{i<(null!=s?s:1/0)&&o(e(i))}),[i,e,s]),d=(0,r.useCallback)((()=>{i>(null!=n?n:-1/0)&&o(t(i))}),[i,t,n]),c=(0,r.useCallback)((function(e){const t=e;if(t.ctrlKey||t.metaKey)if(e.preventDefault(),o(Math.min(Math.max(null!=n?n:-1/0,i+-.01*Math.min(t.deltaY,2)),null!=s?s:1/0)),t.deltaY<0){const e=i+-.015*Math.max(t.deltaY,-4);o(Math.max(null!=n?n:-1/0,e))}else if(t.deltaY>0){const e=i+-.015*Math.min(t.deltaY,4);o(Math.min(null!=s?s:1/0,e))}}),[n,s,i]);return(0,r.useEffect)((()=>{if(!a.current)return;const e=a.current;return e.addEventListener("wheel",c,{passive:!1}),()=>{e&&e.removeEventListener("wheel",c)}}),[c]),{onStepUp:l,onStepDown:d,scale:Math.max(Math.min(i,null!=s?s:1/0),null!=n?n:-1/0),isMax:i>=(null!=s?s:1/0),isMin:i<=(null!=n?n:-1/0),ref:a}}(),{state:d,ref:c}=re({scale:n,bounds:e,focus:t}),{position:u,isPanning:h}=d;return{zoomRef:i,panRef:c,position:u,isPanning:h,scale:n,onStepDown:s,onStepUp:a,isMaxZoom:o,isMinZoom:l}}(W,Y),{onEdgeOpen:je,onNodeOpen:Se,MenuComponent:Ce}=function(e,t,n,s,a,i){const[o,l]=(0,r.useState)(void 0),d=(0,r.useCallback)(((n,r)=>{var o;let d="Show in Grid layout",c=!0;s.gridLayout&&(d="Show in Graph layout",c=!1);const u=[{label:d,onClick:e=>{i(e.id),a(Object.assign({},s,{gridLayout:c})),l(void 0)}}],p=X(e(t,r.dataFrameRowIndex),r,u);p&&l((0,h.jsx)(K.x,{renderHeader:()=>o||(o=(0,h.jsx)(te,{node:r,nodes:t})),renderMenuItems:p,onClose:()=>l(void 0),x:n.pageX,y:n.pageY}))}),[s,t,e,l,a,i]);return{onEdgeOpen:(0,r.useCallback)(((t,s)=>{var a;const i=X(e(n,s.dataFrameRowIndex),s);i&&l((0,h.jsx)(K.x,{renderHeader:()=>a||(a=(0,h.jsx)(ne,{edge:s,edges:n})),renderMenuItems:i,onClose:()=>l(void 0),x:t.pageX,y:t.pageY}))}),[n,e,l]),onNodeOpen:d,MenuComponent:o}}(t,w,j,x,y,M),ke=(0,l.wW)(pe),Ne=(0,r.useCallback)((e=>{f(e),se.current=e}),[f,se]),Oe=function(e){const[t,n]=(0,r.useState)(),s=(0,_.default)();return(0,r.useEffect)((()=>{e&&(n(e),setTimeout((()=>{s()&&n(void 0)}),500))}),[e,s]),t}(A);return(0,h.jsxs)("div",{ref:Ne,className:ke.wrapper,children:[J?(0,h.jsxs)("div",{className:ke.loadingWrapper,children:["Computing layout ",ce||(ce=(0,h.jsx)(d.$,{}))]}):null,n.length&&k.nodes.length?(0,h.jsx)("svg",{ref:ee,viewBox:`${-v/2} ${-b/2} ${v} ${b}`,className:i()(ke.svg,le&&ke.svgPanning),children:(0,h.jsxs)("g",{className:ke.mainGroup,style:{transform:`scale(${xe}) translate(${Math.floor(ge.x)}px, ${Math.floor(ge.y)}px)`},children:[ue||(ue=(0,h.jsx)(m,{})),!x.gridLayout&&(0,h.jsx)(ve,{edges:E,nodeHoveringId:N,edgeHoveringId:T,onClick:je,onMouseEnter:$,onMouseLeave:R}),(0,h.jsx)(me,{nodes:F,onMouseEnter:O,onMouseLeave:I,onClick:Se,hoveringIds:P||[Oe]}),(0,h.jsx)(fe,{markers:V||[],onClick:L}),!x.gridLayout&&(0,h.jsx)(be,{edges:E,nodeHoveringId:N,edgeHoveringId:T})]})}):(0,h.jsx)("div",{className:ke.noDataMsg,children:"No data"}),(0,h.jsxs)("div",{className:ke.viewControls,children:[F.length?(0,h.jsx)("div",{className:ke.legend,children:(0,h.jsx)(C,{sortable:x.gridLayout,nodes:F,sort:x.sort,onSort:e=>{y(Object.assign({},x,{sort:e}))}})}):null,(0,h.jsx)("div",{className:ke.viewControlsWrapper,children:(0,h.jsx)(z,{config:x,onConfigChange:e=>{e.gridLayout!==x.gridLayout&&M(void 0),y(e)},onMinus:oe,onPlus:ae,scale:xe,disableZoomIn:ye,disableZoomOut:we})})]}),G>0&&(0,h.jsxs)("div",{className:ke.alert,"aria-label":"Nodes hidden warning",children:[he||(he=(0,h.jsx)(c.J,{size:"sm",name:"info-circle"}))," ",G," nodes are hidden for performance reasons."]}),Ce]})}const me=(0,r.memo)((function(e){return(0,h.jsx)(h.Fragment,{children:e.nodes.map((t=>{var n;return(0,h.jsx)(D,{node:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,hovering:e.hoveringIds&&0!==e.hoveringIds.length?null!==(n=e.hoveringIds)&&void 0!==n&&n.includes(t.id)?"active":"inactive":"default"},t.id)}))})})),fe=(0,r.memo)((function(e){return(0,h.jsx)(h.Fragment,{children:e.markers.map((t=>(0,h.jsx)(N,{marker:t,onClick:e.onClick},"marker-"+t.node.id)))})})),ve=(0,r.memo)((function(e){return(0,h.jsx)(h.Fragment,{children:e.edges.map((t=>(0,h.jsx)(p,{edge:t,hovering:t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},t.id)))})})),be=(0,r.memo)((function(e){return(0,h.jsx)(h.Fragment,{children:e.edges.map(((t,n)=>{const s=t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,a=t.mainStat||t.secondaryStat;return s&&a&&(0,h.jsx)(v,{edge:t},t.id)}))})}))},90009:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var s=n(68404);function a(e){return(0,s.useMemo)((()=>e.reduce(((e,t)=>(t.fields.filter((e=>"source"===e.name)).length?e.edges.push(t):e.nodes.push(t),e)),{edges:[],nodes:[]})),[e])}},10098:(e,t,n)=>{"use strict";n.d(t,{Ee:()=>g,Ew:()=>h,F:()=>l,HB:()=>u,MP:()=>f,Tz:()=>p,dM:()=>o,lr:()=>d,uX:()=>v});var s=n(26222),a=n(25803),i=n(27843),r=n(663);function o(e,t){const n=e.x2-e.x1,s=e.y2-e.y1,a=Math.sqrt(n*n+s*s),i=Math.max((a-t)/a,0),r=n*i,o=s*i,l=n-r,d=s-o,c=e.x1+l/2,u=e.y1+d/2;return{x1:c,y1:u,x2:c+r,y2:u+o}}function l(e){const t=Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{name:e.name.toLowerCase()})))}),n=new s.N(t);return{id:n.getFieldByName(a.z.id.toLowerCase()),title:n.getFieldByName(a.z.title.toLowerCase()),subTitle:n.getFieldByName(a.z.subTitle.toLowerCase()),mainStat:n.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:n.getFieldByName(a.z.secondaryStat.toLowerCase()),arc:c(e,a.z.arc),details:c(e,a.z.detail),color:n.getFieldByName(a.z.color)}}function d(e){const t=Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{name:e.name.toLowerCase()})))}),n=new s.N(t);return{id:n.getFieldByName(a.z.id.toLowerCase()),source:n.getFieldByName(a.z.source.toLowerCase()),target:n.getFieldByName(a.z.target.toLowerCase()),mainStat:n.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:n.getFieldByName(a.z.secondaryStat.toLowerCase()),details:c(e,a.z.detail.toLowerCase())}}function c(e,t){return e.fields.filter((e=>e.name.match(new RegExp("^"+t))))}function u(e,t,n){if(!e)return{nodes:[],edges:[]};const s=l(e);if(!s.id)throw new Error("id field is required for nodes data frame.");const a=s.id.values.toArray().reduce(((e,t,n)=>{var a;return e[t]={id:t,title:(null===(a=s.title)||void 0===a?void 0:a.values.get(n))||"",subTitle:s.subTitle?s.subTitle.values.get(n):"",dataFrameRowIndex:n,incoming:0,mainStat:s.mainStat,secondaryStat:s.secondaryStat,arcSections:s.arc,color:s.color},e}),{})||{};let i=[];if(t){const e=d(t);if(!e.id)throw new Error("id field is required for edges data frame.");i=e.id.values.toArray().map(((t,n)=>{var s,i;const r=null===(s=e.target)||void 0===s?void 0:s.values.get(n),o=null===(i=e.source)||void 0===i?void 0:i.values.get(n);return a[r].incoming++,{id:t,dataFrameRowIndex:n,source:o,target:r,mainStat:e.mainStat?h(e.mainStat,n):"",secondaryStat:e.secondaryStat?h(e.secondaryStat,n):""}}))}return{nodes:Object.values(a),edges:i||[],legend:s.arc.map((e=>{var t,n;return{color:null!==(t=null===(n=e.config.color)||void 0===n?void 0:n.fixedColor)&&void 0!==t?t:"",name:e.config.displayName||e.name}}))}}function h(e,t){if(e.type===i.fS.string)return e.values.get(t);{const n=e.config.decimals||2,s=e.values.get(t);return Number.isFinite(s)?e.values.get(t).toFixed(n)+(e.config.unit?" "+e.config.unit:""):""}}function p(e){if(0===e.length)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const t=e.reduce(((e,t)=>(t.x>e.right&&(e.right=t.x),t.x<e.left&&(e.left=t.x),t.y>e.bottom&&(e.bottom=t.y),t.y<e.top&&(e.top=t.y),e)),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),n=t.top+(t.bottom-t.top)/2,s=t.left+(t.right-t.left)/2;return Object.assign({},t,{center:{x:s,y:n}})}function g(e,t){let n=e.filter((e=>{var t;if("nodeGraph"===(null===(t=e.meta)||void 0===t?void 0:t.preferredVisualisationType))return!0;if("nodes"===e.name||"edges"===e.name||"nodes"===e.refId||"edges"===e.refId)return!0;return!!new s.N(e).getFieldByName(a.z.id)}));return t&&(n=m(n,t)),n}const m=(e,t)=>e.map((e=>{if(new s.N(e).getFieldByName(a.z.source.toLowerCase())){var n,i;if(null!=t&&null!==(n=t.edges)&&void 0!==n&&n.mainStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.z.mainStat));n&&(n.config=Object.assign({},n.config,{unit:t.edges.mainStatUnit}))}if(null!=t&&null!==(i=t.edges)&&void 0!==i&&i.secondaryStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.z.secondaryStat));n&&(n.config=Object.assign({},n.config,{unit:t.edges.secondaryStatUnit}))}}else{var o,l,d,c;if(null!=t&&null!==(o=t.nodes)&&void 0!==o&&o.mainStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.z.mainStat));n&&(n.config=Object.assign({},n.config,{unit:t.nodes.mainStatUnit}))}if(null!=t&&null!==(l=t.nodes)&&void 0!==l&&l.secondaryStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.z.secondaryStat));n&&(n.config=Object.assign({},n.config,{unit:t.nodes.secondaryStatUnit}))}if(null!=t&&null!==(d=t.nodes)&&void 0!==d&&null!==(c=d.arcs)&&void 0!==c&&c.length)for(const n of t.nodes.arcs){const t=e.fields.find((e=>e.name.toLowerCase()===n.field));t&&n.color&&(t.config=Object.assign({},t.config,{color:{fixedColor:n.color,mode:r.S.Fixed}}))}}return e})),f=(e,t,n)=>{const s=t.find((e=>e.id===n));return s?[...new Set(e.filter((e=>s.source===e.id||s.target===e.id)).map((e=>e.id)))]:[]},v=(e,t,n)=>{const s=e.find((e=>e.id===n));if(s){const n=t.filter((e=>e.source===s.id||e.target===s.id));return[...new Set(n.flatMap((t=>e.filter((e=>t.source===e.id||t.target===e.id)).map((e=>e.id)))))]}return[]}},11887:(e,t,n)=>{"use strict";n.d(t,{h:()=>d,j:()=>l});var s=n(68959),a=n(34784),i=n(32934),r=n(56949),o=n(27864);function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=["Value options"];e.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:n,defaultValue:!1}),e.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:n,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:e=>!0===e.reduceOptions.values}),e.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:n,editor:s.S.get("stats-picker").editor,defaultValue:[a.gz.lastNotNull],showIf:e=>!1===e.reduceOptions.values}),t&&e.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:n,settings:{allowCustomValue:!0,options:[],getOptions:async e=>{const t=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(e&&e.data)for(const n of e.data)for(const s of n.fields){const a=(0,i.C)(s,n,e.data),o=`/^${(0,r.GE)(a)}$/`;t.push({value:o,label:a})}return Promise.resolve(t)}},defaultValue:""})}function d(e,t){e.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:t,settings:{options:[{value:o.wm.Auto,label:"Auto"},{value:o.wm.Horizontal,label:"Horizontal"},{value:o.wm.Vertical,label:"Vertical"}]},defaultValue:o.wm.Auto})}},21126:(e,t,n)=>{"use strict";n.r(t),n.d(t,{plugin:()=>S});var s=n(18151),a=n(27864),i=n(94221),r=n(69927),o=n(663);var l=n(82897),d=n(68404),c=n(27843),u=n(39949),h=n(71855),p=n(99749),g=n(11549),m=n(25700),f=n(46782),v=n(45916);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends d.PureComponent{constructor(){super(...arguments),b(this,"renderComponent",((e,t)=>{const{timeRange:n,options:s}=this.props,{value:a,alignmentFactors:i,width:r,height:o,count:l,orientation:d}=e,{openMenu:c,targetClassName:u}=t;let h=a.sparkline;return h&&(h.timeRange=n),(0,v.jsx)(p.w6,{value:a.display,count:l,sparkline:h,colorMode:s.colorMode,graphMode:s.graphMode,justifyMode:s.justifyMode,textMode:this.getTextMode(),alignmentFactors:i,parentOrientation:d,text:s.text,width:r,height:o,theme:f.vc.theme2,onClick:c,className:u})})),b(this,"renderValue",(e=>{const{value:t}=e,{getLinks:n,hasLinks:s}=t;return s&&n?(0,v.jsx)(g.V,{links:n,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),b(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:s,timeZone:i}=this.props;let r;for(let t of e.series)for(let n of t.fields){let{config:t}=n;if(n.type===c.fS.number){var o,d,p,g;if(null!==(o=n.state)&&void 0!==o&&o.range)continue;r||(0,l.isNumber)(t.min)&&(0,l.isNumber)(t.max)||(r=(0,h.Xu)(e.series));const s=null!==(d=t.min)&&void 0!==d?d:r.min,a=null!==(p=t.max)&&void 0!==p?p:r.max;n.state=null!==(g=n.state)&&void 0!==g?g:{},n.state.range={min:s,max:a,delta:a-s}}}return(0,u.nG)({fieldConfig:s,reduceOptions:t.reduceOptions,replaceVariables:n,theme:f.vc.theme2,data:e.series,sparkline:t.graphMode!==a.IG.None,timeZone:i})}))}getTextMode(){const{options:e,fieldConfig:t,title:n}=this.props;return e.textMode!==a.jG.Auto||!t.defaults.displayName&&n?e.textMode:a.jG.ValueAndName}render(){const{height:e,options:t,width:n,data:s,renderCounter:a}=this.props;return(0,v.jsx)(m.Q,{getValues:this.getValues,getAlignmentFactors:u.sg,renderValue:this.renderValue,width:n,height:e,source:s,itemSpacing:3,renderCounter:a,autoGrid:!0,orientation:t.orientation})}}var y=n(11887);Object.freeze([0,0]);const w={colorMode:a.pc.Value,graphMode:a.IG.Area,justifyMode:a.ap.Auto,textMode:a.jG.Auto};var j=n(29791);const S=new s.c(x).useFieldConfig().setPanelOptions((e=>{const t=["Stat styles"];(0,y.j)(e),(0,y.h)(e,t),i.Z(e),e.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:t,settings:{options:[{value:a.jG.Auto,label:"Auto"},{value:a.jG.Value,label:"Value"},{value:a.jG.ValueAndName,label:"Value and name"},{value:a.jG.Name,label:"Name"},{value:a.jG.None,label:"None"}]},defaultValue:w.textMode}),e.addRadio({path:"colorMode",name:"Color mode",defaultValue:a.pc.Value,category:t,settings:{options:[{value:a.pc.None,label:"None"},{value:a.pc.Value,label:"Value"},{value:a.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:t,defaultValue:w.graphMode,settings:{options:[{value:a.IG.None,label:"None"},{value:a.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:w.justifyMode,category:t,settings:{options:[{value:a.ap.Auto,label:"Auto"},{value:a.ap.Center,label:"Center"}]}})})).setNoPadding().setPanelChangeHandler(((e,t,n)=>{const s=(0,r.ZH)(e,t,n);if(n.angular&&("singlestat"===t||"grafana-singlestat-panel"===t)){const t=n.angular;if(s.graphMode=a.IG.None,t.sparkline&&t.sparkline.show&&(s.graphMode=a.IG.Area),t.colorBackground)s.colorMode=a.pc.Background;else if(t.colorValue)s.colorMode=a.pc.Value;else{var i;if(s.colorMode=a.pc.None,null!==(i=t.sparkline)&&void 0!==i&&i.lineColor&&s.graphMode===a.IG.Area){var l;const n=null!==(l=e.fieldConfig)&&void 0!==l?l:{};n.defaults.color={mode:o.S.Fixed,fixedColor:t.sparkline.lineColor},e.fieldConfig=n}}"name"===t.valueName&&(s.textMode=a.jG.Name)}return s})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;const n=e.getListAppender({name:j.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=1)}}});t.hasStringField&&t.hasNumberField&&1===t.frameCount&&t.rowCountTotal<10&&(n.append({name:j.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),n.append({name:j.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.Background}})),1===t.stringFieldCount&&1===t.frameCount&&t.rowCountTotal<10&&1===t.fieldCount&&n.append({name:j.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.None}}),t.hasNumberField&&t.hasTimeField&&(n.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),n.append({name:j.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:a.IG.None,colorMode:a.pc.Background}}))}}).setMigrationHandler(r.rD)},33725:(e,t,n)=>{"use strict";n.d(t,{KN:()=>i,Uv:()=>a,mP:()=>s});const s={showValue:n(27864).Jp.Auto,alignValue:"left",mergeValues:!0,rowHeight:.9},a={lineWidth:0,fillOpacity:70};let i;!function(e){e.Changes="changes",e.Samples="samples"}(i||(i={}))},83774:(e,t,n)=>{"use strict";n.d(t,{iK:()=>z,Y:()=>B,$m:()=>V,Ur:()=>F,Nj:()=>D,AR:()=>L,SA:()=>E});var s=n(663),a=n(32934),i=n(55343),r=n(60053),o=n(92721),l=n(27843),d=n(87602),c=n(23564),u=n(84542),h=n(94582),p=n(52902),g=n(27864),m=n(27565),f=n(22),v=n(36577),b=n(96904),x=n(39571),y=n(49959),w=n(66876),j=n(68953),S=n(78321),C=n(33725);const{round:k,min:N,ceil:O}=Math;let I=6;const T=j.Gj;function $(e,t,n,s,a){(0,j.Qm)(n,e,T,t,((e,t,n)=>{a(e,s*t,s*n)}))}function R(e){var t;const{mode:n,numSeries:s,isDiscrete:a,rowHeight:i=0,colWidth:r=0,showValue:o,mergeValues:l=!1,theme:d,label:c,formatValue:u,alignValue:h="left",getTimeRange:p,getValueColor:m,getFieldConfig:v,onHover:b,onLeave:x}=e;let j;const T=Array(s).fill(null).map((()=>{let e=document.createElement("div");return e.classList.add("bar-mark"),e.style.position="absolute",e.style.background="rgba(255,255,255,0.2)",e}));let R;const P=`500 ${Math.round(12*devicePixelRatio)}px ${d.typography.fontFamily}`,D=Array(s).fill(null),A=[r,1/0],M=1-A[0],L=(null!==(t=A[1])&&void 0!==t?t:1/0)*y.Z.pxRatio,F=new Map,E=new Map;function V(e,t,n,s,a,i,r,o,l,d,c,u,h){if(r<1)return;const p=m(d+1,u),g=function(e,t){var n;if("#"===t[0]&&9===t.length)return t;const s=(null!==(n=e.fillOpacity)&&void 0!==n?n:100)/100;return(0,w.alpha)(t,s)}(v(d),p);if(R[d][c]={x:k(a-n),y:k(i-s),w:r,h:o,sidx:d+1,didx:c,fillColor:g},h){let e=g,n=F.get(e);if(null==n&&F.set(e,n=new Path2D),t(n,a,i,r,o),l){let e=p,n=E.get(e);null==n&&E.set(e,n=new Path2D),t(n,a+l/2,i+l/2,r-l,o-l)}}else e.beginPath(),t(e,a,i,r,o),e.fillStyle=g,e.fill(),l&&(e.beginPath(),t(e,a+l/2,i+l/2,r-l,o-l),e.strokeStyle=p,e.lineWidth=l,e.stroke())}const z=null!=u&&o!==g.Jp.Never&&((e,t,s,a)=>(e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),e.ctx.font=P,e.ctx.textAlign=n===C.KN.Changes?h:"center",e.ctx.textBaseline="middle",y.Z.orient(e,t,((s,a,i,r,l,c,p,m,f,v,b)=>{let x=k((s.width||0)*y.Z.pxRatio),w=k(f+H[t-1]);for(let s=0;s<i.length;s++)if(null!=i[s]){const a=R[t-1][s];if(!a||a.x>=v)continue;let r=Math.floor((null==a?void 0:a.w)/I);if(o===g.Jp.Auto&&r<2)continue;let l=u(t,i[s]),c=k(a.x+m+a.w/2);n===C.KN.Changes&&("left"===h?c=k(a.x+m+x+2):"right"===h&&(c=k(a.x+m+a.w-x-2))),e.ctx.fillStyle=d.colors.getContrastText(a.fillColor,3),e.ctx.fillText(l.slice(0,r),c,w)}})),e.ctx.restore(),!1));function B(e,t){let n=T[e],s=y.Z.pxRatio;t?(n.style.display="",n.style.left=k(t.x/s)+"px",n.style.top=k(t.y/s)+"px",n.style.width=k(t.w/s)+"px",n.style.height=k(t.h/s)+"px"):n.style.display="none",D[e]=t}let _;const W=n===C.KN.Changes?function(e,t){let n;for(let a=0;a<s;a++){let s;if(e>=0){let i=H[a];j.get(e,i,1,1,(a=>{(0,S.Pn)(e,i,a.x,a.y,a.x+a.w,a.y+a.h)&&(s=a,Math.abs(t-i)<=a.h/2&&(n=a))}))}s?s!==D[a]&&B(a,s):null!=D[a]&&B(a,null)}n?n!==_&&(_=n,b(n.sidx,n.didx,n)):_&&(_=void 0,x())}:function(e,t){let n;j.get(e,t,1,1,(s=>{(0,S.Pn)(e,t,s.x,s.y,s.x+s.w,s.y+s.h)&&(n=s)})),n?(B(0,n),n!==_&&(_=n,b(n.sidx,n.didx,n))):_&&(B(0,null),_=void 0,x())},U={y:!1,x:n===C.KN.Changes,points:{show:!1}},H=Array(s).fill(0),q=Array(s).fill(0);return{cursor:U,xSplits:n===C.KN.Samples?(e,t,n,s,a,i)=>{let r=[],o=e.data[0][1]-e.data[0][0],l=O(a/o);for(let t=0;t<e.data[0].length;t+=l){let a=e.data[0][t];a>=n&&a<=s&&r.push(a)}return r}:null,xRange:e=>{const t=p();let s=t.from.valueOf(),a=t.to.valueOf();if(n===C.KN.Samples){let t=(e.data[0][1]-e.data[0][0])/2;s<=e.data[0][0]&&(s=e.data[0][0]-t);let n=e.data[0].length-1;a>=e.data[0][n]&&(a=e.data[0][n]+t)}return[s,a]},ySplits:e=>($(i,null,s,e.bbox.height,((t,n,s)=>{H[t]=k(n+s/2),q[t]=e.posToVal(H[t]/y.Z.pxRatio,f.j)})),q),yValues:(e,t)=>t.map(((e,t)=>c(t+1))),yRange:[0,1],drawPaths:(e,t,r,o)=>(y.Z.orient(e,t,((d,c,u,h,p,g,m,f,v,b,x,w,j,S)=>{let O=k((d.width||0)*y.Z.pxRatio),I=a(t);var T;e.ctx.save(),S(e.ctx,e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),$(i,t-1,s,x,((t,s,a)=>{if(n===C.KN.Changes)for(let n=0;n<u.length;n++){let i=u[n];if(null!=i){let r=Math.round(g(c[n],h,b,f)),o=n;for(;++o<u.length&&(void 0===u[o]||l&&u[o]===i););let d=o===u.length?f+b+O:Math.round(g(c[o],h,b,f));V(e.ctx,S,f,v,r,k(v+s),d-r,k(a),O,t,n,i,I),n=o-1}}else if(n===C.KN.Samples){let n=g(c[1],h,b,f)-g(c[0],h,b,f),i=k(N(L,n-n*M)-O),l=i/2;for(let n=r;n<=o;n++)if(null!=u[n]){let r=g(c[n],h,b,f);V(e.ctx,S,f,v,k(r-l),k(v+s),i,k(a),O,t,n,u[n],I)}}})),I&&(e.ctx.lineWidth=O,T=e.ctx,F.forEach(((e,t)=>{T.fillStyle=t,T.fill(e)})),E.forEach(((e,t)=>{T.strokeStyle=t,T.stroke(e)})),F.clear(),E.clear()),e.ctx.restore()})),null),drawPoints:z,init:e=>{let t=e.over,n="";for(let e=32;e<=126;e++)n+=String.fromCharCode(e);I=Math.ceil(e.ctx.measureText(n).width/n.length*y.Z.pxRatio),I+=2.5,t.style.overflow="hidden",T.forEach((e=>{t.appendChild(e)}))},drawClear:e=>{var t;j=j||new S.lW(0,0,e.bbox.width,e.bbox.height),j.clear(),t=e.data[0].length,R=Array(s).fill(null).map((e=>Array(t).fill(null))),e.series.forEach((e=>{e._paths=null}))},setCursor:e=>{let t=k(e.cursor.left*y.Z.pxRatio),n=k(e.cursor.top*y.Z.pxRatio);if(!j.o.length&&null==j.q)for(const e of R)for(const t of e)t&&j.add(t);W(t,n)}}}const P={lineWidth:0,fillOpacity:80};const D=e=>{let{frame:t,theme:n,timeZones:l,getTimeRange:d,mode:c,eventBus:u,sync:h,rowHeight:p,colWidth:v,showValue:b,alignValue:y,mergeValues:w,getValueColor:j}=e;const S=new m.U(l[0]),C="time",k="x",N={mode:c,numSeries:t.fields.length-1,isDiscrete:e=>(e=>{var t,n;const s=null===(t=e.config)||void 0===t||null===(n=t.color)||void 0===n?void 0:n.mode;return!(s&&e.display&&s.startsWith("continuous-"))})(t.fields[e]),mergeValues:w,rowHeight:p,colWidth:v,showValue:b,alignValue:y,theme:n,label:e=>(0,a.C)(t.fields[e],t),getFieldConfig:e=>t.fields[e].config.custom,getValueColor:(e,n)=>{var a,i,r,o;const l=t.fields[e];var d,c,u,h;return void 0!==(null===(a=l.state)||void 0===a||null===(i=a.origin)||void 0===i?void 0:i.fieldIndex)&&void 0!==(null===(r=l.state)||void 0===r||null===(o=r.origin)||void 0===o?void 0:o.frameIndex)&&j?j(null===(d=l.state)||void 0===d||null===(c=d.origin)||void 0===c?void 0:c.frameIndex,null===(u=l.state)||void 0===u||null===(h=u.origin)||void 0===h?void 0:h.fieldIndex,n):s.R},getTimeRange:d,formatValue:(e,n)=>(0,i.zc)(t.fields[e].display(n)),onHover:(e,t)=>{I=e,T=t,O=!0},onLeave:()=>{I=null,T=null,O=!0}};let O=!1,I=null,T=null;const $=R(N),D={point:{[C]:null,[f.j]:null},data:t};S.addHook("init",$.init),S.addHook("drawClear",$.drawClear),S.addHook("setCursor",$.setCursor);S.setTooltipInterpolator(((e,t,n)=>{O&&(null!=I&&(e(I),t(T)),O=!1),n(null==I)})),S.setPrepData((e=>(0,x.Bj)(e[0],(0,x.i7)(e[0])))),S.setCursor($.cursor),S.addScale({scaleKey:k,isTime:!0,orientation:g.wN.Horizontal,direction:g.bQ.Right,range:$.xRange}),S.addScale({scaleKey:f.j,isTime:!1,orientation:g.wN.Vertical,direction:g.bQ.Up,range:$.yRange}),S.addAxis({scaleKey:k,isTime:!0,splits:$.xSplits,placement:g.LB.Bottom,timeZone:l[0],theme:n,grid:{show:!0}}),S.addAxis({scaleKey:f.j,isTime:!1,placement:g.LB.Left,splits:$.ySplits,values:$.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:n});let A=0;for(let e=0;e<t.fields.length;e++){var M,L;if(0===e)continue;const s=t.fields[e],a=s.config,i=Object.assign({},P,a.custom);s.state.seriesIndex=A++,S.addSeries({scaleKey:f.j,pathBuilder:$.drawPaths,pointsBuilder:$.drawPoints,lineWidth:i.lineWidth,fillOpacity:i.fillOpacity,theme:n,show:!(null!==(M=i.hideFrom)&&void 0!==M&&M.viz),thresholds:a.thresholds,dataFrameFieldIndex:null===(L=s.state)||void 0===L?void 0:L.origin})}if(h&&h()!==r.m.Off){let e={};e.sync={key:"__global_",filters:{pub:(e,t,n,s,a,i,l)=>(!h||h()!==r.m.Off)&&(D.rowIndex=l,n<0&&s<0?(D.point.time=null,D.point[f.j]=null,u.publish(new o.xH)):(D.point.time=t.posToVal(n,k),D.point.panelRelY=s>0?s/i:1,D.down=void 0,u.publish(new o.es(D))),!0)},scales:[k,null]},S.setSync(),S.setCursor(e)}return S};function A(e){var t;let n=null===(t=e.config.custom)||void 0===t?void 0:t.spanNulls;return n?!0===n?1/0:n:-1}function M(e,t){const n=e.config.thresholds;if(e.type!==l.fS.number||!n||!n.steps.length)return;const s=F(e.config,t);if(s.length!==n.steps.length)return;const a=new Map,i=new Map;for(let e=0;e<s.length;e++)a.set(n.steps[e],s[e].label),i.set(s[e].label,s[e].color);let r=e.values.toArray();const o=new Array(e.values.length);if(n.mode===d.H.Percentage){const{min:t,max:n}=(0,c.xD)(e),s=n-t;r=r.map((e=>null==e?e:(e-t)/s*100))}for(let e=0;e<o.length;e++){const t=r[e];o[e]=null==t?t:a.get((0,u.m1)(t,n.steps))}return Object.assign({},e,{config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{spanNulls:A(e)})}),type:l.fS.string,values:new h.G(o),display:e=>({text:e,color:i.get(e),numeric:NaN})})}function L(e,t,n,a){var i;if(null==e||!e.length)return{warn:"No data in response"};let r=!1;const o=[];for(let d of e){let e=!1,c=!1,u=(0,p.Y3)(d,d.fields.findIndex((e=>e.type===l.fS.time))),h=(0,v.w)({frame:u,refFieldPseudoMin:n.from.valueOf(),refFieldPseudoMax:n.to.valueOf()});h!==d&&(c=!0);const g=[];for(let n of(0,b.I)(h).fields)switch(n.type){case l.fS.time:e=!0,r=!0,g.push(n);break;case l.fS.number:if(t&&(null===(i=n.config.color)||void 0===i?void 0:i.mode)===s.S.Thresholds){const e=M(n,a);if(e){g.push(e),c=!0;continue}}case l.fS.boolean:case l.fS.string:n=Object.assign({},n,{config:Object.assign({},n.config,{custom:Object.assign({},n.config.custom,{spanNulls:A(n)})})}),g.push(n);break;default:c=!0}e&&g.length>1&&(r=!0,c?o.push(Object.assign({},u,{fields:g})):o.push(u))}return r?o.length?{frames:o}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function F(e,t){var n;const s=[],a=e.thresholds;if(!a||!a.steps.length)return s;const r=a.steps,o=(0,i.Cf)(a.mode===d.H.Percentage?"percent":null!==(n=e.unit)&&void 0!==n?n:"");for(let e=0;e<r.length;e++){let n=r[e],a=n.value,d="",c="";a===-1/0&&e<r.length-1?(a=r[e+1].value,d="< "):c="+",s.push({label:`${d}${l=a,(0,i.zc)(o(l))}${c}`,color:t.visualization.getColorByName(n.color),yAxis:1})}var l;return s}function E(e,t,n){if(e&&!1!==t.showLegend)return V(function(e){const t=[];for(const n of e)for(const e of n.fields)e.type!==l.fS.time&&t.push(e);return t}(e),n)}function V(e,t){var n,a;if(!e.length)return;const i=[],r=e[0].config,o=null!==(n=null===(a=r.color)||void 0===a?void 0:a.mode)&&void 0!==n?n:s.S.Fixed;if(o===s.S.Thresholds)return F(r,t);if(o.startsWith("continuous"))return;let l=new Map;return e.forEach((e=>{e.values.toArray().forEach((t=>{let n=e.display(t);n.color&&l.set(n.text,n.color)}))})),l.forEach(((e,n)=>{n.length>0&&i.push({label:n,color:t.visualization.getColorByName(null!=e?e:s.R),yAxis:1})})),i}function z(e,t){let n,s=t+1;if(s>=e.values.length)return null;const a=e.values.get(t);for(;void 0===n;){if(s>=e.values.length)return null;const t=e.values.get(s);void 0===t||t===a?s++:n=s}return n}function B(e){if(e<0||Number.isNaN(e))return"";let t,n,s,a,i,r,o,l;return o=Math.floor(e/1e3),r=Math.floor(o/60),o%=60,i=Math.floor(r/60),r%=60,a=Math.floor(i/24),i%=24,t=Math.floor(a/365),t>0&&(a%=365),n=Math.floor(a/30),n>0&&(a%=30),s=Math.floor(a/7),s>0&&(a%=7),l=Math.round(e%1e3*1e3)/1e3,(t>0?t+"y "+(n>0?n+"mo ":"")+(s>0?s+"w ":"")+(a>0?a+"d ":""):n>0?n+"mo "+(s>0?s+"w ":"")+(a>0?a+"d ":""):s>0?s+"w "+(a>0?a+"d ":""):a>0?a+"d "+(i>0?i+"h ":""):i>0?i+"h "+(r>0?r+"m ":""):r>0?r+"m "+(o>0?o+"s ":""):o>0?o+"s "+(l>0?l+"ms ":""):l>0?l+"ms ":"0").trim()}},40449:(e,t,n)=>{"use strict";n.d(t,{j:()=>p});var s,a=n(68404),i=n(54761),r=n(37625),o=n(70917),l=n(23734),d=n(45916);const c=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map((e=>({label:e,value:e}))),h=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map((e=>({label:e,value:e}))),p=e=>{let{value:t,onChange:n}=e;const p=(0,a.useMemo)((()=>"dash"===(null==t?void 0:t.fill)?u:h),[t]),m=(0,a.useMemo)((()=>{var e,n;if(null==t||null===(e=t.dash)||void 0===e||!e.length)return p[0];const s=null===(n=t.dash)||void 0===n?void 0:n.join(", "),a=p.find((e=>e.value===s));return a||{label:s,value:s}}),[t,p]);return(0,d.jsxs)(i.Lh,{children:[(0,d.jsx)(r.S,{value:(null==t?void 0:t.fill)||"solid",options:c,onChange:e=>{let s;"dot"===e?s=g(h[0].value):"dash"===e&&(s=g(u[0].value)),n(Object.assign({},t,{fill:e,dash:s}))}}),(null==t?void 0:t.fill)&&"solid"!==(null==t?void 0:t.fill)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Ph,{allowCustomValue:!0,options:p,value:m,width:20,onChange:e=>{var s;n(Object.assign({},t,{dash:g(null!==(s=e.value)&&void 0!==s?s:"")}))},formatCreateLabel:e=>`Segments: ${g(e).join(", ")}`}),s||(s=(0,d.jsxs)("div",{children:[" ",(0,d.jsx)("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,d.jsx)(l.h,{name:"question-circle"})})]}))]})]})};function g(e){const t=[];for(const n of e.split(/(?:,| )+/)){const e=Number.parseInt(n,10);isNaN(e)||t.push(e)}return t}},81943:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});n(68404);var s,a=n(85699),i=n(54761),r=n(37625),o=n(4645),l=n(45916);const d=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],c=e=>{let{value:t,onChange:n}=e;const c="number"==typeof t,u=c?a.secondsToHms(t/1e3):void 0;d[2].value=c?t:36e5;const h=e=>{let t=!1;if(e)try{t=1e3*a.intervalToSeconds(e)}catch(e){console.warn("ERROR",e)}n(t)};return(0,l.jsxs)(i.Lh,{children:[(0,l.jsx)(r.S,{value:t,options:d,onChange:n}),c&&(0,l.jsx)(o.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:u,onKeyDown:e=>{"Enter"===e.key&&h(e.target.value)},onBlur:e=>{h(e.target.value)},prefix:s||(s=(0,l.jsx)("div",{children:"<"})),spellCheck:!1})]})}},21505:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var s=n(68404),a=n(70917),i=n(45916);const r=e=>{let{item:t,value:n,onChange:r,id:o}=e;const l=(0,s.useCallback)((e=>{r({mode:e.value})}),[r]);return(0,i.jsx)(a.Ph,{inputId:o,value:n.mode,options:t.settings.options,onChange:l})}},59821:(e,t,n)=>{"use strict";n.d(t,{F:()=>v,r:()=>m});var s=n(15399),a=n(663),i=n(27843),r=n(97859),o=n(27864),l=n(33073),d=n(61054),c=n(44108),u=n(33441),h=n(40449),p=n(81943),g=n(21505);const m={drawStyle:o.l8.Line,lineInterpolation:o.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:o.FI.None,barAlignment:o.pu.Center,stacking:{mode:o.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},f=["Graph styles"];function v(e){return{standardOptions:{[s.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.S.PaletteClassic}}},useCustomConfig:t=>{t.addRadio({path:"drawStyle",name:"Style",category:f,defaultValue:e.drawStyle,settings:{options:l.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:f,defaultValue:e.lineInterpolation,settings:{options:l.q.lineInterpolation},showIf:e=>e.drawStyle===o.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:f,defaultValue:e.barAlignment,settings:{options:l.q.barAlignment},showIf:e=>e.drawStyle===o.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:f,defaultValue:e.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:e=>e.drawStyle!==o.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:f,defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:e=>e.drawStyle!==o.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:f,defaultValue:l.q.fillGradient[0].value,settings:{options:l.q.fillGradient},showIf:e=>e.drawStyle!==o.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:f,hideFromDefaults:!0,settings:{filter:e=>e.type===i.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:f,showIf:e=>e.drawStyle===o.l8.Line,editor:h.j,override:h.j,process:r.kG,shouldApply:e=>e.type===i.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:f,defaultValue:!1,editor:p.c,override:p.c,showIf:e=>e.drawStyle===o.l8.Line,shouldApply:e=>e.type!==i.fS.time,process:r.kG}).addRadio({path:"showPoints",name:"Show points",category:f,defaultValue:l.q.showPoints[0].value,settings:{options:l.q.showPoints},showIf:e=>e.drawStyle!==o.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:f,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:e=>e.showPoints!==o.Jp.Never||e.drawStyle===o.l8.Points}),d.V(t,e.stacking,f),t.addSelect({category:f,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:o.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:o.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),c.r(t,e),u.B(t),t.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:o.i3.Off},settings:{options:l.q.thresholdsDisplayModes},editor:g.F,override:g.F,process:r.kG,shouldApply:()=>!0})}}}},10800:()=>{let e=window.matchMedia;window.matchMedia=t=>{let n=e(t);return n.addEventListener||(n.addEventListener=(e,t)=>{n.addListener(t)},n.removeEventListener=(e,t)=>{n.removeListener(t)}),n}},34819:(e,t,n)=>{"use strict";n.d(t,{gV:()=>ts,eU:()=>ns});var s=n(68404),a=n(70356),i=n(52423),r=n(16755),o=n(37417),l=n(40901),d=n(61264),c=n(1129),u=n(45916);function h(e){let{description:t,text:n,url:s}=e;const a=(0,r.wW)(p);return(0,u.jsxs)(c.Z,{className:a.card,href:s,children:[(0,u.jsx)(c.Z.Heading,{children:n}),(0,u.jsx)(c.Z.Description,{children:t})]})}const p=e=>({card:(0,i.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"})});function g(e){var t;let{navId:n}=e;const{node:s}=(0,l.q)(n),a=(0,r.wW)(m),i=null===(t=s.children)||void 0===t?void 0:t.filter((e=>!e.hideFromTabs));return(0,u.jsx)(o.T,{navId:s.id,children:(0,u.jsx)(o.T.Contents,{children:(0,u.jsx)("div",{className:a.content,children:i&&i.length>0&&(0,u.jsx)("section",{className:a.grid,children:null==i?void 0:i.map((e=>{var t,n,s;return(0,u.jsx)(h,{description:null!==(t=(0,d.L)(e.id))&&void 0!==t?t:e.subTitle,text:null!==(n=(0,d.Y)(e.id))&&void 0!==n?n:e.text,url:null!==(s=e.url)&&void 0!==s?s:""},e.id)}))})})})})}const m=e=>({content:(0,i.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)}),grid:(0,i.css)({display:"grid",gap:e.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"130px",padding:e.spacing(2,0)})});var f,v,b,x=n(58226),y=n(54761),w=n(8006),j=n(65632),S=n(46782),C=n(15315),k=n(78983),N=n(91841),O=n(3209),I=n(82897),T=n(52410),$=n(99500);const R=e=>({button:i.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:i.css`
      position: absolute;
      left: ${e.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:i.css`
        color: ${e.colors.text};
        display: flex;
        margin-bottom: ${e.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:i.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${e.colors.text};
      `}}),P=()=>{const e=(0,r.wW)(R);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:e.divider.base,children:[(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:e.divider.line})}),(0,u.jsx)("div",{children:(0,u.jsx)("span",{children:!S.ZP.disableLoginForm&&(f||(f=(0,u.jsx)("span",{children:"or"})))})}),(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:e.divider.line})})]}),v||(v=(0,u.jsx)("div",{className:"clearfix"}))]})};function D(e,t,n){return(0,i.cx)(t.button,i.css`
      background-color: ${e.bgColor};
      color: ${n.colors.getContrastText(e.bgColor)};

      &:hover {
        background-color: ${n.colors.emphasize(e.bgColor,.15)};
        box-shadow: ${n.shadows.z1};
      }
    `)}const A=()=>{const e=(0,I.pickBy)((()=>{var e,t,n,s,a,i,r,o,l,d;const c=!!S.ZP.oauth;return{saml:{bgColor:"#464646",enabled:S.ZP.samlEnabled,name:S.ZP.samlName||T.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:c&&Boolean(S.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:c&&Boolean(S.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:c&&Boolean(S.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:c&&Boolean(S.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:c&&Boolean(S.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:c&&Boolean(S.ZP.oauth.okta),name:(null===(e=S.ZP.oauth)||void 0===e||null===(t=e.okta)||void 0===t?void 0:t.name)||"Okta",icon:null!==(n=null===(s=S.ZP.oauth)||void 0===s||null===(a=s.okta)||void 0===a?void 0:a.icon)&&void 0!==n?n:"okta"},oauth:{bgColor:"#262628",enabled:c&&Boolean(S.ZP.oauth.generic_oauth),name:(null===(i=S.ZP.oauth)||void 0===i||null===(r=i.generic_oauth)||void 0===r?void 0:r.name)||"OAuth",icon:null!==(o=null===(l=S.ZP.oauth)||void 0===l||null===(d=l.generic_oauth)||void 0===d?void 0:d.icon)&&void 0!==o?o:"signin",hrefName:"generic_oauth"}}})(),(e=>e.enabled)),t=Object.keys(e).length>0,n=(0,r.l4)(),s=(0,r.wW)(R);return t?(0,u.jsxs)(y.wc,{children:[b||(b=(0,u.jsx)(P,{})),Object.entries(e).map((e=>{let[t,a]=e;return(0,u.jsxs)(w.Qj,{className:D(a,s,n),href:`login/${a.hrefName?a.hrefName:t}`,target:"_self",fullWidth:!0,children:[(0,u.jsx)($.J,{className:s.buttonIcon,name:a.icon}),"Sign in with ",a.name]},t)}))]}):null},M=()=>{const e=(0,S.iE)().verifyEmailEnabled?`${(0,S.iE)().appSubUrl}/verify`:`${(0,S.iE)().appSubUrl}/signup`,t=(0,i.css)({paddingTop:"16px"});return(0,u.jsxs)(y.wc,{children:[(0,u.jsx)("div",{className:t,children:"New to Grafana?"}),(0,u.jsx)(w.Qj,{className:i.css`
          width: 100%;
          justify-content: center;
        `,href:e,variant:"secondary",fill:"outline",children:"Sign up"})]})};var L,F;const E=i.css`
  padding: 0;
  margin-top: 4px;
`,V=()=>(document.title=j.c.AppTitle,(0,u.jsx)(O.dd,{children:(0,u.jsx)(k.Z,{children:e=>{let{loginHint:t,passwordHint:n,disableLoginForm:s,disableUserSignUp:a,login:i,isLoggingIn:r,changePassword:o,skipPasswordChange:l,isChangingPassword:d}=e;return(0,u.jsxs)(u.Fragment,{children:[!d&&(0,u.jsxs)(O.$s,{children:[!s&&(0,u.jsx)(N.U,{onSubmit:i,loginHint:t,passwordHint:n,isLoggingIn:r,children:(0,u.jsx)(y.Lh,{justify:"flex-end",children:(0,u.jsx)(w.Qj,{className:E,fill:"text",href:`${S.ZP.appSubUrl}/user/password/send-reset-email`,children:"Forgot your password?"})})}),L||(L=(0,u.jsx)(A,{})),!a&&(F||(F=(0,u.jsx)(M,{})))]}),d&&(0,u.jsx)(O.$s,{children:(0,u.jsx)(C.G,{onSubmit:o,onSkip:()=>l()})})]})}})}));var z,B,_,W,U,H=n(59196),q=n(36635),Z=n(72677),G=n(68374),Q=n(64850),K=n(6432);class J extends s.PureComponent{constructor(){var e,t,n;super(...arguments),n=()=>{this.props.onUserSync()},(t="onUserSync")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{ldapSyncInfo:e,user:t}=this.props,n=e&&e.nextSync?(0,K.dq)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"}):"",s=`/admin/ldap?user=${t&&t.login}`,a=G.Vt.hasPermission(Q.bW.LDAPUsersRead),i=G.Vt.hasPermission(Q.bW.LDAPUsersSync);return(0,u.jsxs)(u.Fragment,{children:[z||(z=(0,u.jsx)("h3",{className:"page-heading",children:"LDAP Synchronisation"})),(0,u.jsxs)("div",{className:"gf-form-group",children:[(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsxs)("tbody",{children:[B||(B=(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"External sync"}),(0,u.jsx)("td",{children:"User synced via LDAP. Some changes must be done in LDAP or mappings."}),(0,u.jsx)("td",{children:(0,u.jsx)("span",{className:"label label-tag",children:"LDAP"})})]})),(0,u.jsx)("tr",{children:e.enabled?(0,u.jsxs)(u.Fragment,{children:[_||(_=(0,u.jsx)("td",{children:"Next scheduled synchronization"})),(0,u.jsx)("td",{colSpan:2,children:n})]}):(0,u.jsxs)(u.Fragment,{children:[W||(W=(0,u.jsx)("td",{children:"Next scheduled synchronization"})),U||(U=(0,u.jsx)("td",{colSpan:2,children:"Not enabled"}))]})})]})})}),(0,u.jsxs)("div",{className:"gf-form-button-row",children:[i&&(0,u.jsx)(w.zx,{variant:"secondary",onClick:this.onUserSync,children:"Sync user"}),a&&(0,u.jsx)(w.Qj,{variant:"secondary",href:s,children:"Debug LDAP Mapping"})]})]})]})}}var Y=n(50191),X=n(54241),ee=n(78941),te=n(65678),ne=n(21888),se=n(41455),ae=n(97928),ie=n(7197),re=n(70917),oe=n(42200);function le(e){let{onSelected:t,className:n,inputId:a,autoFocus:i,excludeOrgs:r}=e;(0,s.useEffect)((()=>{var e;i&&a&&(null===(e=document.getElementById(a))||void 0===e||e.focus())}),[i,a]);const[o,l]=(0,ie.Z)((async()=>{const e=(await(0,oe.i)().get("/api/orgs")).map((e=>({value:{id:e.id,name:e.name},label:e.name})));if(r){let t=r.map((e=>e.orgId));return e.filter((e=>!t.includes(e.value.id)))}return e}));return(0,u.jsx)(re.qb,{inputId:a,className:n,isLoading:o.loading,defaultOptions:!0,isSearchable:!1,loadOptions:l,onChange:t,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var de,ce,ue,he,pe=n(74408);function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class me extends s.PureComponent{constructor(){super(...arguments),ge(this,"addToOrgButtonRef",s.createRef()),ge(this,"state",{showAddOrgModal:!1}),ge(this,"showOrgAddModal",(()=>{this.setState({showAddOrgModal:!0})})),ge(this,"dismissOrgAddModal",(()=>{this.setState({showAddOrgModal:!1},(()=>{var e;null===(e=this.addToOrgButtonRef.current)||void 0===e||e.focus()}))}))}render(){const{user:e,orgs:t,isExternalUser:n,onOrgRoleChange:s,onOrgRemove:a,onOrgAdd:r}=this.props,{showAddOrgModal:o}=this.state,l=i.css`
      margin-top: 0.8rem;
    `,d=G.Vt.hasPermission(Q.bW.OrgUsersAdd)&&!n;return(0,u.jsxs)(u.Fragment,{children:[de||(de=(0,u.jsx)("h3",{className:"page-heading",children:"Organizations"})),(0,u.jsxs)("div",{className:"gf-form-group",children:[(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsx)("tbody",{children:t.map(((t,i)=>(0,u.jsx)(be,{isExternalUser:n,user:e,org:t,onOrgRoleChange:s,onOrgRemove:a},`${t.orgId}-${i}`)))})})}),(0,u.jsx)("div",{className:l,children:d&&(0,u.jsx)(w.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef,children:"Add user to organization"})}),(0,u.jsx)(ye,{user:e,userOrgs:t,isOpen:o,onOrgAdd:r,onDismiss:this.dismissOrgAddModal})]})]})}}const fe=(0,Y.B)((e=>({removeButton:i.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${e.v1.palette.blue95};
    `,label:i.css`
      font-weight: 500;
    `,disabledTooltip:i.css`
      display: flex;
    `,tooltipItem:i.css`
      margin-left: 5px;
    `,tooltipItemLink:i.css`
      color: ${e.v1.palette.blue95};
    `,rolePickerWrapper:i.css`
      display: flex;
    `,rolePicker:i.css`
      flex: auto;
      margin-right: ${e.spacing(1)};
    `})));class ve extends s.PureComponent{constructor(){super(...arguments),ge(this,"state",{currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]}),ge(this,"onOrgRemove",(async()=>{const{org:e}=this.props;this.props.onOrgRemove(e.orgId)})),ge(this,"onChangeRoleClick",(()=>{const{org:e}=this.props;this.setState({isChangingRole:!0,currentRole:e.role})})),ge(this,"onOrgRoleChange",(e=>{this.setState({currentRole:e})})),ge(this,"onOrgRoleSave",(()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)})),ge(this,"onCancelClick",(()=>{this.setState({isChangingRole:!1})})),ge(this,"onBasicRoleChange",(e=>{this.props.onOrgRoleChange(this.props.org.orgId,e)}))}componentDidMount(){G.Vt.licensedAccessControlEnabled()&&G.Vt.hasPermission(Q.bW.ActionRolesList)&&(0,ae.ul)(this.props.org.orgId).then((e=>this.setState({roleOptions:e}))).catch((e=>console.error(e)))}render(){const{user:e,org:t,isExternalUser:n,theme:s}=this.props,{currentRole:a,isChangingRole:r}=this.state,o=fe(s),l=(0,i.cx)("width-16",o.label),d=G.Vt.hasPermission(Q.bW.OrgUsersWrite),c=G.Vt.hasPermission(Q.bW.OrgUsersRemove),h=n||!d,p=`${t.name}-input`;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:l,children:(0,u.jsx)("label",{htmlFor:p,children:t.name})}),G.Vt.licensedAccessControlEnabled()?(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:o.rolePickerWrapper,children:[(0,u.jsx)("div",{className:o.rolePicker,children:(0,u.jsx)(se.R,{userId:(null==e?void 0:e.id)||0,orgId:t.orgId,basicRole:t.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:h})}),n&&(ce||(ce=(0,u.jsx)(Se,{})))]})}):(0,u.jsxs)(u.Fragment,{children:[r?(0,u.jsx)("td",{children:(0,u.jsx)(pe.A,{inputId:p,value:a,onChange:this.onOrgRoleChange,autoFocus:!0})}):(0,u.jsx)("td",{className:"width-25",children:t.role}),(0,u.jsx)("td",{colSpan:1,children:(0,u.jsx)("div",{className:"pull-right",children:d&&(0,u.jsx)(je,{isExternalUser:n,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})})})]}),(0,u.jsx)("td",{colSpan:1,children:(0,u.jsx)("div",{className:"pull-right",children:c&&(0,u.jsx)(X.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0,children:"Remove from organization"})})})]})}}const be=(0,r.HE)(ve),xe=(0,Y.B)((()=>({modal:i.css`
    width: 500px;
  `,buttonRow:i.css`
    text-align: center;
  `,modalContent:i.css`
    overflow: visible;
  `})));class ye extends s.PureComponent{constructor(){super(...arguments),ge(this,"state",{selectedOrg:null,role:Q.B5.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]}),ge(this,"onOrgSelect",(e=>{const t=this.props.userOrgs.find((t=>{var n;return t.orgId===(null===(n=e.value)||void 0===n?void 0:n.id)}));var n;(this.setState({selectedOrg:e.value,role:(null==t?void 0:t.role)||Q.B5.Viewer}),G.Vt.licensedAccessControlEnabled())&&(G.Vt.hasPermission(Q.bW.ActionRolesList)&&(0,ae.ul)(null===(n=e.value)||void 0===n?void 0:n.id).then((e=>this.setState({roleOptions:e}))).catch((e=>console.error(e))))})),ge(this,"onOrgRoleChange",(e=>{this.setState({role:e})})),ge(this,"onAddUserToOrg",(async()=>{const{selectedOrg:e,role:t}=this.state;this.props.onOrgAdd(e.id,t),G.Vt.licensedAccessControlEnabled()&&G.Vt.hasPermission(Q.bW.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,ae.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)})),ge(this,"onCancel",(()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()})),ge(this,"onRoleUpdate",(async(e,t,n)=>{this.setState({pendingRoles:e,pendingOrgId:n,pendingUserId:t})}))}render(){const{isOpen:e,user:t,userOrgs:n}=this.props,{role:s,roleOptions:a,selectedOrg:i}=this.state,r=xe();return(0,u.jsxs)(ee.u,{className:r.modal,contentClassName:r.modalContent,title:"Add to an organization",isOpen:e,onDismiss:this.onCancel,children:[(0,u.jsx)(te.g,{label:"Organization",children:(0,u.jsx)(le,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:n,autoFocus:!0})}),(0,u.jsx)(te.g,{label:"Role",disabled:null===i,children:G.Vt.accessControlEnabled()?(0,u.jsx)(se.R,{userId:(null==t?void 0:t.id)||0,orgId:null==i?void 0:i.id,basicRole:s,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:a,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):(0,u.jsx)(pe.A,{inputId:"new-org-role-input",value:s,onChange:this.onOrgRoleChange})}),(0,u.jsx)(ee.u.ButtonRow,{children:(0,u.jsxs)(y.Lh,{spacing:"md",justify:"center",children:[(0,u.jsx)(w.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel,children:"Cancel"}),(0,u.jsx)(w.zx,{variant:"primary",disabled:null===i,onClick:this.onAddUserToOrg,children:"Add to organization"})]})})]})}}const we=e=>({disabledTooltip:i.css`
    display: flex;
  `,tooltipItemLink:i.css`
    color: ${e.v1.palette.blue95};
  `});function je(e){let{onChangeRoleClick:t,isExternalUser:n,onOrgRoleSave:s,onCancelClick:a}=e;const i=(0,r.wW)(we);return(0,u.jsxs)("div",{className:i.disabledTooltip,children:[(0,u.jsx)(X.p,{confirmText:"Save",onClick:t,onCancel:a,onConfirm:s,disabled:n,children:"Change role"}),n&&(0,u.jsx)(ne.u,{placement:"right-end",content:(0,u.jsxs)("div",{children:["This user's role is not editable because it is synchronized from your auth provider. Refer to the ",(0,u.jsx)("a",{className:i.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank",children:"Grafana authentication docs"})," for details."]}),children:ue||(ue=(0,u.jsx)($.J,{name:"question-circle"}))})]})}const Se=()=>{const e=(0,r.wW)(Ce);return(0,u.jsx)("div",{className:e.disabledTooltip,children:(0,u.jsx)(ne.u,{placement:"right-end",interactive:!0,content:(0,u.jsxs)("div",{children:["This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the ",(0,u.jsx)("a",{className:e.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank",children:"Grafana authentication docs"})," for details."]}),children:he||(he=(0,u.jsx)($.J,{name:"question-circle"}))})})},Ce=e=>({disabledTooltip:i.css`
    display: flex;
  `,tooltipItemLink:i.css`
    color: ${e.v1.palette.blue95};
  `});var ke,Ne,Oe,Ie=n(37625);const Te=[{label:"Yes",value:!0},{label:"No",value:!1}];function $e(e){let{isGrafanaAdmin:t,onGrafanaAdminChange:n}=e;const[a,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(t),l=G.Vt.hasPermission(Q.bW.UsersPermissionsUpdate);return(0,u.jsxs)(u.Fragment,{children:[ke||(ke=(0,u.jsx)("h3",{className:"page-heading",children:"Permissions"})),(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsx)("tbody",{children:(0,u.jsxs)("tr",{children:[Ne||(Ne=(0,u.jsx)("td",{className:"width-16",children:"Grafana Admin"})),a?(0,u.jsx)("td",{colSpan:2,children:(0,u.jsx)(Ie.S,{options:Te,value:r,onChange:o,autoFocus:!0})}):(0,u.jsx)("td",{colSpan:2,children:t?(0,u.jsxs)(u.Fragment,{children:[Oe||(Oe=(0,u.jsx)($.J,{name:"shield"}))," Yes"]}):(0,u.jsx)(u.Fragment,{children:"No"})}),(0,u.jsx)("td",{children:l&&(0,u.jsx)(X.p,{onClick:()=>i(!0),onConfirm:()=>n(r),onCancel:()=>{i(!1),o(t)},confirmText:"Change",children:"Change"})})]})})})})})]})}var Re,Pe=n(2024),De=n(86354),Ae=n(4645);function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e){var t;let{user:n,onUserUpdate:a,onUserDelete:i,onUserDisable:r,onUserEnable:o,onPasswordChange:l}=e;const[d,c]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),g=(0,s.useRef)(null),m=e=>()=>{c(e),!e&&g.current&&g.current.focus()},f=(0,s.useRef)(null),v=e=>()=>{p(e),!e&&f.current&&f.current.focus()},b=(null===(t=n.authLabels)||void 0===t?void 0:t.length)&&n.authLabels[0],x=b?`Synced via ${b}`:"",y=n.isExternal||!G.Vt.hasPermissionInMetadata(Q.bW.UsersWrite,n),j=n.isExternal||!G.Vt.hasPermissionInMetadata(Q.bW.UsersPasswordUpdate,n),S=G.Vt.hasPermissionInMetadata(Q.bW.UsersDelete,n),C=G.Vt.hasPermissionInMetadata(Q.bW.UsersDisable,n),k=G.Vt.hasPermissionInMetadata(Q.bW.UsersEnable,n);return(0,u.jsxs)(u.Fragment,{children:[Re||(Re=(0,u.jsx)("h3",{className:"page-heading",children:"User information"})),(0,u.jsxs)("div",{className:"gf-form-group",children:[(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsxs)("tbody",{children:[(0,u.jsx)(Ee,{label:"Name",value:n.name,locked:y,lockMessage:x,onChange:e=>{a(Object.assign({},n,{name:e}))}}),(0,u.jsx)(Ee,{label:"Email",value:n.email,locked:y,lockMessage:x,onChange:e=>{a(Object.assign({},n,{email:e}))}}),(0,u.jsx)(Ee,{label:"Username",value:n.login,locked:y,lockMessage:x,onChange:e=>{a(Object.assign({},n,{login:e}))}}),(0,u.jsx)(Ee,{label:"Password",value:"********",inputType:"password",locked:j,lockMessage:x,onChange:l})]})})}),(0,u.jsxs)("div",{className:Fe.buttonRow,children:[S&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.zx,{variant:"destructive",onClick:m(!0),ref:g,children:"Delete user"}),(0,u.jsx)(Pe.s,{isOpen:d,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:()=>i(n.id),onDismiss:m(!1)})]}),n.isDisabled&&k&&(0,u.jsx)(w.zx,{variant:"secondary",onClick:()=>o(n.id),children:"Enable user"}),!n.isDisabled&&C&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.zx,{variant:"secondary",onClick:v(!0),ref:f,children:"Disable user"}),(0,u.jsx)(Pe.s,{isOpen:h,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:()=>r(n.id),onDismiss:v(!1)})]})]})]})]})}const Fe={buttonRow:i.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Ee extends s.PureComponent{constructor(){super(...arguments),Me(this,"inputElem",void 0),Me(this,"state",{editing:!1,value:this.props.value||""}),Me(this,"setInputElem",(e=>{this.inputElem=e})),Me(this,"onEditClick",(()=>{"password"===this.props.inputType?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)})),Me(this,"onCancelClick",(()=>{this.setState({editing:!1,value:this.props.value||""})})),Me(this,"onInputChange",((e,t)=>{t!==De.G.Invalid&&this.setState({value:e.target.value})})),Me(this,"onInputBlur",((e,t)=>{t!==De.G.Invalid&&this.setState({value:e.target.value})})),Me(this,"focusInput",(()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()})),Me(this,"onSave",(()=>{this.props.onChange&&this.props.onChange(this.state.value)}))}render(){const{label:e,locked:t,lockMessage:n,inputType:s}=this.props,{value:a}=this.state,r=(0,i.cx)("width-16",i.css`
        font-weight: 500;
      `);if(t)return(0,u.jsx)(Ve,{label:e,value:a,lockMessage:n});const o=`${e}-input`;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:r,children:(0,u.jsx)("label",{htmlFor:o,children:e})}),(0,u.jsx)("td",{className:"width-25",colSpan:2,children:this.state.editing?(0,u.jsx)(Ae.I,{id:o,type:s,defaultValue:a,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):(0,u.jsx)("span",{children:this.props.value})}),(0,u.jsx)("td",{children:(0,u.jsx)(X.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick,children:"Edit"})})]})}}Me(Ee,"defaultProps",{value:"",locked:!1,lockMessage:"",inputType:"text"});const Ve=e=>{let{label:t,value:n,lockMessage:s}=e;const a=i.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,r=(0,i.cx)("width-16",i.css`
      font-weight: 500;
    `);return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:r,children:t}),(0,u.jsx)("td",{className:"width-25",colSpan:2,children:n}),(0,u.jsx)("td",{children:(0,u.jsx)("span",{className:a,children:s})})]})};var ze,Be,_e=n(35448);function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ue extends s.PureComponent{constructor(){super(...arguments),We(this,"forceAllLogoutButton",s.createRef()),We(this,"state",{showLogoutModal:!1}),We(this,"showLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!0})})),We(this,"dismissLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!1},(()=>{var e;null===(e=this.forceAllLogoutButton.current)||void 0===e||e.focus()}))})),We(this,"onSessionRevoke",(e=>()=>{this.props.onSessionRevoke(e)})),We(this,"onAllSessionsRevoke",(()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}))}render(){const{sessions:e}=this.props,{showLogoutModal:t}=this.state,n=i.css`
      margin-top: 0.8rem;
    `,s=G.Vt.hasPermission(Q.bW.UsersLogout);return(0,u.jsxs)(u.Fragment,{children:[ze||(ze=(0,u.jsx)("h3",{className:"page-heading",children:"Sessions"})),(0,u.jsxs)("div",{className:"gf-form-group",children:[(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[Be||(Be=(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Last seen"}),(0,u.jsx)("th",{children:"Logged on"}),(0,u.jsx)("th",{children:"IP address"}),(0,u.jsx)("th",{colSpan:2,children:"Browser and OS"})]})})),(0,u.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.isActive?"Now":e.seenAt}),(0,u.jsx)("td",{children:(0,_e.$q)(e.createdAt,{dateStyle:"long"})}),(0,u.jsx)("td",{children:e.clientIp}),(0,u.jsx)("td",{children:`${e.browser} on ${e.os} ${e.osVersion}`}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"pull-right",children:s&&(0,u.jsx)(X.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(e.id),autoFocus:!0,children:"Force logout"})})})]},`${e.id}-${t}`)))})]})}),(0,u.jsxs)("div",{className:n,children:[s&&e.length>0&&(0,u.jsx)(w.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton,children:"Force logout from all devices"}),(0,u.jsx)(Pe.s,{isOpen:t,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal})]})]})]})}}const He=Ue;var qe=n(37094);function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ge=["GitHub","GitLab","AzureAD","OAuth"];class Qe extends s.PureComponent{constructor(){super(...arguments),Ze(this,"onUserUpdate",(e=>{this.props.updateUser(e)})),Ze(this,"onPasswordChange",(e=>{const{user:t,setUserPassword:n}=this.props;t&&n(t.id,e)})),Ze(this,"onUserDelete",(e=>{this.props.deleteUser(e)})),Ze(this,"onUserDisable",(e=>{this.props.disableUser(e)})),Ze(this,"onUserEnable",(e=>{this.props.enableUser(e)})),Ze(this,"onGrafanaAdminChange",(e=>{const{user:t,updateUserPermissions:n}=this.props;t&&n(t.id,e)})),Ze(this,"onOrgRemove",(e=>{const{user:t,deleteOrgUser:n}=this.props;t&&n(t.id,e)})),Ze(this,"onOrgRoleChange",((e,t)=>{const{user:n,updateOrgUserRole:s}=this.props;n&&s(n.id,e,t)})),Ze(this,"onOrgAdd",((e,t)=>{const{user:n,addOrgUser:s}=this.props;n&&s(n,e,t)})),Ze(this,"onSessionRevoke",(e=>{const{user:t,revokeSession:n}=this.props;t&&n(e,t.id)})),Ze(this,"onAllSessionsRevoke",(()=>{const{user:e,revokeAllSessions:t}=this.props;e&&t(e.id)})),Ze(this,"onUserSync",(()=>{const{user:e,syncLdapUser:t}=this.props;e&&t(e.id)}))}async componentDidMount(){const{match:e,loadAdminUserPage:t}=this.props;t(parseInt(e.params.id,10))}render(){var e,t,n,s,a,i;const{user:r,orgs:l,sessions:d,ldapSyncInfo:c,isLoading:h}=this.props,p=(null==r?void 0:r.isExternal)&&(null==r||null===(e=r.authLabels)||void 0===e?void 0:e.includes("LDAP")),g=G.Vt.hasPermission(Q.bW.UsersAuthTokenList),m=G.Vt.hasPermission(Q.bW.LDAPStatusRead),f=(null==r?void 0:r.isExternal)&&(null==r||null===(t=r.authLabels)||void 0===t?void 0:t.some((e=>Ge.includes(e)))),v=(null==r?void 0:r.isExternal)&&(null==r||null===(n=r.authLabels)||void 0===n?void 0:n.includes("SAML")),b=(null==r?void 0:r.isExternal)&&(null==r||null===(s=r.authLabels)||void 0===s?void 0:s.includes("Google")),x=(null==r?void 0:r.isExternal)&&(null==r||null===(a=r.authLabels)||void 0===a?void 0:a.includes("Auth Proxy")),y=!S.ZP.auth.DisableSyncLock&&((null==r?void 0:r.isExternal)&&!(x||b||f||v||p)||!S.ZP.auth.OAuthSkipOrgRoleUpdateSync&&f||!S.ZP.auth.SAMLSkipOrgRoleSync&&v||!S.ZP.auth.LDAPSkipOrgRoleSync&&p),w={text:null!==(i=null==r?void 0:r.login)&&void 0!==i?i:"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return(0,u.jsx)(o.T,{navId:"global-users",pageNav:w,children:(0,u.jsxs)(o.T.Contents,{isLoading:h,children:[r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Le,{user:r,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),!S.ZP.auth.LDAPSkipOrgRoleSync&&p&&(0,Z.v)("ldapsync")&&c&&m&&(0,u.jsx)(J,{ldapSyncInfo:c,user:r,onUserSync:this.onUserSync}),(0,u.jsx)($e,{isGrafanaAdmin:r.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})]}),l&&(0,u.jsx)(me,{user:r,orgs:l,isExternalUser:y,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),d&&g&&(0,u.jsx)(He,{sessions:d,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})]})})}}const Ke={loadAdminUserPage:qe.PK,updateUser:qe.Nq,setUserPassword:qe.tQ,disableUser:qe.B9,enableUser:qe.Dx,deleteUser:qe.h8,updateUserPermissions:qe.Xx,addOrgUser:qe.bN,updateOrgUserRole:qe.Jk,deleteOrgUser:qe.uV,revokeSession:qe._1,revokeAllSessions:qe.Fm,syncLdapUser:qe.CP},Je=(0,q.connect)((e=>({user:e.userAdmin.user,sessions:e.userAdmin.sessions,orgs:e.userAdmin.orgs,ldapSyncInfo:e.ldap.syncInfo,isLoading:e.userAdmin.isLoading,error:e.userAdmin.error})),Ke)(Qe);var Ye,Xe,et,tt,nt,st,at,it=n(52777),rt=n(2843),ot=n(85829);const lt=e=>{let{ldapConnectionInfo:t}=e;return(0,u.jsxs)(u.Fragment,{children:[Ye||(Ye=(0,u.jsx)("h3",{className:"page-heading",children:"LDAP Connection"})),(0,u.jsxs)("div",{className:"gf-form-group",children:[(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[Xe||(Xe=(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Host"}),(0,u.jsx)("th",{colSpan:2,children:"Port"})]})})),(0,u.jsx)("tbody",{children:t&&t.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.host}),(0,u.jsx)("td",{children:e.port}),(0,u.jsx)("td",{children:e.available?et||(et=(0,u.jsx)($.J,{name:"check",className:"pull-right"})):tt||(tt=(0,u.jsx)($.J,{name:"exclamation-triangle",className:"pull-right"}))})]},t)))})]})}),(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)(dt,{ldapConnectionInfo:t})})]})]})},dt=e=>{let{ldapConnectionInfo:t}=e;if(!t.some((e=>e.error)))return null;const n=[];t.forEach((e=>{e.error&&n.push(e)}));const s=n.map(((e,t)=>(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{style:{fontWeight:500},children:[e.host,":",e.port,nt||(nt=(0,u.jsx)("br",{}))]}),(0,u.jsx)("span",{children:e.error}),t!==n.length-1&&(0,u.jsxs)(u.Fragment,{children:[st||(st=(0,u.jsx)("br",{})),at||(at=(0,u.jsx)("br",{}))]})]},t)));return(0,u.jsx)(rt.b,{title:"Connection error",severity:Q.F1.Error,children:s})};var ct,ut,ht,pt,gt,mt=n(81691);function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vt extends s.PureComponent{constructor(){super(...arguments),ft(this,"state",{isSyncing:!1}),ft(this,"handleSyncClick",(()=>{this.setState({isSyncing:!this.state.isSyncing})}))}render(){const{ldapSyncInfo:e}=this.props,{isSyncing:t}=this.state,n=(0,K.dq)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h3",{className:"page-heading",children:["LDAP Synchronisation",(0,u.jsxs)(w.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0,children:[ct||(ct=(0,u.jsx)("span",{className:"btn-title",children:"Bulk-sync now"})),t&&(ut||(ut=(0,u.jsx)(mt.$,{inline:!0})))]})]}),(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[ht||(ht=(0,u.jsx)("td",{children:"Active synchronisation"})),(0,u.jsx)("td",{colSpan:2,children:e.enabled?"Enabled":"Disabled"})]}),(0,u.jsxs)("tr",{children:[pt||(pt=(0,u.jsx)("td",{children:"Scheduled"})),(0,u.jsx)("td",{children:e.schedule})]}),(0,u.jsxs)("tr",{children:[gt||(gt=(0,u.jsx)("td",{children:"Next scheduled synchronisation"})),(0,u.jsx)("td",{children:n})]})]})})})})]})}}var bt,xt,yt,wt,jt;const St=e=>{let{groups:t,showAttributeMapping:n}=e;const s=n?t:t.filter((e=>e.orgRole));return(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[n&&(bt||(bt=(0,u.jsx)("th",{children:"LDAP Group"}))),xt||(xt=(0,u.jsxs)("th",{children:["Organization",(0,u.jsx)(ne.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info",children:(0,u.jsx)("span",{className:"gf-form-help-icon",children:(0,u.jsx)($.J,{name:"info-circle"})})})]})),yt||(yt=(0,u.jsx)("th",{children:"Role"}))]})}),(0,u.jsx)("tbody",{children:s.map(((e,t)=>(0,u.jsxs)("tr",{children:[n&&(0,u.jsx)("td",{children:e.groupDN}),e.orgName&&e.orgRole?(0,u.jsx)("td",{children:e.orgName}):wt||(wt=(0,u.jsx)("td",{})),e.orgRole?(0,u.jsx)("td",{children:e.orgRole}):jt||(jt=(0,u.jsx)("td",{children:(0,u.jsxs)("span",{className:"text-warning",children:["No match",(0,u.jsx)(ne.u,{placement:"top",content:"No matching groups found",theme:"info",children:(0,u.jsx)("span",{className:"gf-form-help-icon",children:(0,u.jsx)($.J,{name:"info-circle"})})})]})}))]},`${e.orgId}-${t}`)))})]})})})};var Ct,kt,Nt,Ot,It,Tt;const $t=e=>{let{info:t,showAttributeMapping:n}=e;return(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[Ct||(Ct=(0,u.jsx)("th",{colSpan:2,children:"User information"})),n&&(kt||(kt=(0,u.jsx)("th",{children:"LDAP attribute"})))]})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[Nt||(Nt=(0,u.jsx)("td",{className:"width-16",children:"First name"})),(0,u.jsx)("td",{children:t.name.ldapValue}),n&&(0,u.jsx)("td",{children:t.name.cfgAttrValue})]}),(0,u.jsxs)("tr",{children:[Ot||(Ot=(0,u.jsx)("td",{className:"width-16",children:"Surname"})),(0,u.jsx)("td",{children:t.surname.ldapValue}),n&&(0,u.jsx)("td",{children:t.surname.cfgAttrValue})]}),(0,u.jsxs)("tr",{children:[It||(It=(0,u.jsx)("td",{className:"width-16",children:"Username"})),(0,u.jsx)("td",{children:t.login.ldapValue}),n&&(0,u.jsx)("td",{children:t.login.cfgAttrValue})]}),(0,u.jsxs)("tr",{children:[Tt||(Tt=(0,u.jsx)("td",{className:"width-16",children:"Email"})),(0,u.jsx)("td",{children:t.email.ldapValue}),n&&(0,u.jsx)("td",{children:t.email.cfgAttrValue})]})]})]})})})};var Rt,Pt,Dt,At,Mt,Lt;const Ft=e=>{let{permissions:t}=e;return(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[Rt||(Rt=(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("th",{colSpan:1,children:"Permissions"})})})),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[Pt||(Pt=(0,u.jsx)("td",{className:"width-16",children:" Grafana admin"})),(0,u.jsx)("td",{children:t.isGrafanaAdmin?(0,u.jsxs)(u.Fragment,{children:[Dt||(Dt=(0,u.jsx)($.J,{name:"shield"}))," Yes"]}):"No"})]}),(0,u.jsxs)("tr",{children:[At||(At=(0,u.jsx)("td",{className:"width-16",children:"Status"})),(0,u.jsx)("td",{children:t.isDisabled?(0,u.jsxs)(u.Fragment,{children:[Mt||(Mt=(0,u.jsx)($.J,{name:"times"}))," Inactive"]}):(0,u.jsxs)(u.Fragment,{children:[Lt||(Lt=(0,u.jsx)($.J,{name:"check"}))," Active"]})})]})]})]})})})};var Et,Vt,zt,Bt,_t;const Wt=e=>{let{teams:t,showAttributeMapping:n}=e;const s=n?t:t.filter((e=>e.teamName));return(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("table",{className:"filter-table form-inline",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[n&&(Et||(Et=(0,u.jsx)("th",{children:"LDAP Group"}))),Vt||(Vt=(0,u.jsx)("th",{children:"Organisation"})),zt||(zt=(0,u.jsx)("th",{children:"Team"}))]})}),(0,u.jsx)("tbody",{children:s.map(((e,t)=>(0,u.jsxs)("tr",{children:[n&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("td",{children:e.groupDN}),!e.orgName&&(0,u.jsxs)(u.Fragment,{children:[Bt||(Bt=(0,u.jsx)("td",{})),_t||(_t=(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:"text-warning",children:["No match",(0,u.jsx)(ne.u,{placement:"top",content:"No matching teams found",theme:"info",children:(0,u.jsx)("span",{className:"gf-form-help-icon",children:(0,u.jsx)($.J,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("td",{children:e.orgName}),(0,u.jsx)("td",{children:e.teamName})]})]},`${e.teamName}-${t}`)))})]})})})};var Ut;const Ht=e=>{let{ldapUser:t,showAttributeMapping:n}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)($t,{info:t.info,showAttributeMapping:n}),(0,u.jsx)(Ft,{permissions:t.permissions}),t.roles&&t.roles.length>0&&(0,u.jsx)(St,{groups:t.roles,showAttributeMapping:n}),t.teams&&t.teams.length>0?(0,u.jsx)(Wt,{teams:t.teams,showAttributeMapping:n}):Ut||(Ut=(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsx)("table",{className:"filter-table form-inline",children:(0,u.jsx)("tbody",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{children:"No teams found via LDAP"})})})})})}))]})};var qt,Zt;function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{FormField:Qt}=it.vw6;class Kt extends s.PureComponent{constructor(){super(...arguments),Gt(this,"state",{isLoading:!0}),Gt(this,"search",(e=>{e.preventDefault();const t=e.target.elements.username.value;t&&this.fetchUserMapping(t)})),Gt(this,"onClearUserError",(()=>{this.props.clearUserError()}))}async componentDidMount(){const{clearUserMappingInfo:e,queryParams:t}=this.props;await e(),await this.fetchLDAPStatus(),t.username&&await this.fetchUserMapping(t.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:e,loadLdapSyncStatus:t}=this.props;return Promise.all([e(),t()])}async fetchUserMapping(e){const{loadUserMapping:t}=this.props;return await t(e)}render(){const{ldapUser:e,userError:t,ldapError:n,ldapSyncInfo:s,ldapConnectionInfo:a,navModel:i,queryParams:r}=this.props,{isLoading:l}=this.state,d=G.Vt.hasPermission(Q.bW.LDAPUsersRead);return(0,u.jsx)(o.T,{navModel:i,children:(0,u.jsx)(o.T.Contents,{isLoading:l,children:(0,u.jsxs)(u.Fragment,{children:[n&&n.title&&(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)(rt.b,{title:n.title,severity:Q.F1.Error,children:n.body})}),(0,u.jsx)(lt,{ldapConnectionInfo:a}),(0,Z.v)("ldapsync")&&s&&(0,u.jsx)(vt,{ldapSyncInfo:s}),d&&(0,u.jsxs)(u.Fragment,{children:[qt||(qt=(0,u.jsx)("h3",{className:"page-heading",children:"Test user mapping"})),(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsxs)("form",{onSubmit:this.search,className:"gf-form-inline",children:[(0,u.jsx)(Qt,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:r.username}),Zt||(Zt=(0,u.jsx)(w.zx,{type:"submit",children:"Run"}))]})}),t&&t.title&&(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)(rt.b,{title:t.title,severity:Q.F1.Error,onRemove:this.onClearUserError,children:t.body})}),e&&(0,u.jsx)(Ht,{ldapUser:e,showAttributeMapping:!0})]})]})})})}}const Jt={loadLdapState:qe.Y3,loadLdapSyncStatus:qe.j4,loadUserMapping:qe.b_,clearUserError:qe.V0,clearUserMappingInfo:qe.IS},Yt=(0,q.connect)((e=>({navModel:(0,ot.ht)(e.navIndex,"ldap"),ldapConnectionInfo:e.ldap.connectionInfo,ldapUser:e.ldap.user,ldapSyncInfo:e.ldap.syncInfo,userError:e.ldap.userError,ldapError:e.ldap.ldapError})),Jt)(Kt);var Xt=n(59337);const en=e=>s.lazy(e);var tn,nn,sn=n(96535);const an=[{path:"/alerting",component:()=>S.vc.featureToggles.topnav?tn||(tn=(0,u.jsx)(g,{navId:"alerting"})):nn||(nn=(0,u.jsx)(a.l_,{to:"/alerting/list"}))}],rn=[...an,{path:"/alerting/list",component:en((()=>Promise.all([n.e(8935),n.e(8057),n.e(8613),n.e(2461)]).then(n.bind(n,53852))))},{path:"/alerting/ng/list",component:en((()=>n.e(4286).then(n.bind(n,53852))))},{path:"/alerting/notifications",roles:S.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,58494))))},{path:"/alerting/notification/new",component:en((()=>n.e(476).then(n.bind(n,32613))))},{path:"/alerting/notification/:id/edit",component:en((()=>n.e(7384).then(n.bind(n,24508))))}],on=[...an,{path:"/alerting/list",roles:(0,sn.ql)([Q.bW.AlertingRuleRead,Q.bW.AlertingRuleExternalRead],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>Promise.all([n.e(8935),n.e(8057),n.e(8613),n.e(2461)]).then(n.bind(n,71759))))},{path:"/alerting/routes",roles:(0,sn.ql)([Q.bW.AlertingNotificationsRead,Q.bW.AlertingNotificationsExternalRead],[Xt.B.Editor,Xt.B.Admin]),component:en((()=>n.e(8648).then(n.bind(n,83890))))},{path:"/alerting/routes/mute-timing/new",roles:(0,sn.ql)([Q.bW.AlertingNotificationsWrite,Q.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:en((()=>n.e(9355).then(n.bind(n,44981))))},{path:"/alerting/routes/mute-timing/edit",roles:(0,sn.ql)([Q.bW.AlertingNotificationsWrite,Q.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:en((()=>n.e(9355).then(n.bind(n,44981))))},{path:"/alerting/silences",roles:(0,sn.ql)([Q.bW.AlertingInstanceRead,Q.bW.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:en((()=>n.e(1783).then(n.bind(n,34509))))},{path:"/alerting/silence/new",roles:(0,sn.ql)([Q.bW.AlertingInstanceCreate,Q.bW.AlertingInstancesExternalWrite],["Editor","Admin"]),component:en((()=>n.e(1783).then(n.bind(n,34509))))},{path:"/alerting/silence/:id/edit",roles:(0,sn.ql)([Q.bW.AlertingInstanceUpdate,Q.bW.AlertingInstancesExternalWrite],["Editor","Admin"]),component:en((()=>n.e(1783).then(n.bind(n,34509))))},{path:"/alerting/notifications",roles:(0,sn.ql)([Q.bW.AlertingNotificationsRead,Q.bW.AlertingNotificationsExternalRead],["Editor","Admin"]),component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,32250))))},{path:"/alerting/notifications/:type/new",roles:(0,sn.ql)([Q.bW.AlertingNotificationsWrite,Q.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,32250))))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,sn.ql)([Q.bW.AlertingNotificationsWrite,Q.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,32250))))},{path:"/alerting/notifications/:type",roles:(0,sn.ql)([Q.bW.AlertingNotificationsWrite,Q.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:en((()=>Promise.all([n.e(9076),n.e(6618)]).then(n.bind(n,32250))))},{path:"/alerting/groups/",roles:(0,sn.ql)([Q.bW.AlertingInstanceRead,Q.bW.AlertingInstancesExternalRead],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>n.e(2415).then(n.bind(n,17284))))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,sn.ql)([Q.bW.AlertingRuleCreate,Q.bW.AlertingRuleExternalWrite],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>Promise.all([n.e(9076),n.e(5372)]).then(n.bind(n,69419))))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,sn.ql)([Q.bW.AlertingRuleUpdate,Q.bW.AlertingRuleExternalWrite],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>Promise.all([n.e(9076),n.e(5372)]).then(n.bind(n,69419))))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,sn.ql)([Q.bW.AlertingRuleRead,Q.bW.AlertingRuleExternalRead],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>Promise.all([n.e(8935),n.e(8057),n.e(4679)]).then(n.bind(n,13163))))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,sn.ql)([Q.bW.AlertingRuleRead,Q.bW.AlertingRuleExternalRead],[Xt.B.Viewer,Xt.B.Editor,Xt.B.Admin]),component:en((()=>n.e(7918).then(n.bind(n,34250))))},{path:"/alerting/admin",roles:()=>["Admin"],component:en((()=>n.e(7680).then(n.bind(n,45199))))}];function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.vc;if(e.unifiedAlertingEnabled)return on;if(e.alertingEnabled)return rn;const t=(0,I.uniq)([...rn,...on].map((e=>e.path)));return t.map((e=>({path:e,component:en((()=>n.e(1333).then(n.bind(n,34709))))})))}var dn=n(54069);var cn=n(65022),un=n(16371);const hn=[{path:"/live",component:en((()=>n.e(2120).then(n.bind(n,53622))))},{path:"/live/pipeline",component:en((()=>n.e(2651).then(n.bind(n,98619))))},{path:"/live/cloud",component:en((()=>n.e(5310).then(n.bind(n,6658))))}];function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.vc;return(0,un.bO)()?e.featureToggles["live-pipeline"]?hn:hn.map((e=>Object.assign({},e,{component:en((()=>n.e(7586).then(n.bind(n,6833))))}))):[]}var gn,mn=n(95796);const fn=[{path:"/plugins",navId:"plugins",routeName:mn.cd.Home,component:en((()=>n.e(94).then(n.bind(n,81827))))},{path:"/plugins/browse",navId:"plugins",routeName:mn.cd.Browse,component:en((()=>n.e(94).then(n.bind(n,81827))))},{path:"/plugins/:pluginId/",navId:"plugins",routeName:mn.cd.Details,component:en((()=>n.e(2417).then(n.bind(n,62201))))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>gn||(gn=(0,u.jsx)(a.l_,{to:"/plugins"}))}];var vn=n(23067),bn=n(88706),xn=n(94025),yn=n(15546),wn=n(65737),jn=n(80795),Sn=n(32280);class Cn{constructor(){var e,t,n;n=void 0,(t="navItems")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.navItems=S.ZP.bootData.navTree}getCfgNode(){return this.navItems.find((e=>"cfg"===e.id))}getNav(){var e;let t=this.navItems;const n={breadcrumbs:[]};for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];for(const e of a){if("number"==typeof e){n.main=n.breadcrumbs[e];break}const s=t.find((t=>t.id===e));var r;if(s)n.breadcrumbs.push(s),n.node=s,n.main=s,t=null!==(r=s.children)&&void 0!==r?r:[]}if(null!==(e=n.main)&&void 0!==e&&e.children)for(const e of n.main.children){var o;e.active=e.url===(null===(o=n.node)||void 0===o?void 0:o.url)}return n}getNotFoundNav(){return kn()}}function kn(){return Nn("Page not found","404 Error")}function Nn(e,t){const n={text:e,subTitle:t,icon:"exclamation-triangle"};return{node:n,main:n}}Cn.$inject=[],Sn.ZP.service("navModelSrv",Cn);var On,In,Tn=n(71031),$n=n(4020),Rn=n(75534),Pn=n(86821),Dn=n(54700);const An={loading:!0,pluginNav:null,plugin:null};const Mn=(0,vn.oM)({name:"prom-builder-container",initialState:An,reducers:{setState:(e,t)=>{Object.assign(e,t.payload)},changeNav:(e,t)=>{let n=t.payload;n&&n.node.children&&(n=Object.assign({},n,{node:Object.assign({},n.main,{hideFromBreadcrumbs:!0})})),e.pluginNav=n}}});const Ln=function(e){let{pluginId:t,pluginNavSection:n}=e;const i=(0,a.$B)(),r=(0,a.TH)(),[l,d]=(0,s.useReducer)(Mn.reducer,An),c=(0,s.useMemo)((()=>(0,bn.oD)()),[]),h=wn.v.appSubUrl+r.pathname+r.search,{plugin:p,loading:g,pluginNav:m}=l,f=(0,Pn.d)(n,m,h),v=(0,s.useMemo)((()=>(0,jn.Ox)(r.search)),[r.search]),b=(0,s.useMemo)((()=>(0,Dn.a)(f)),[f]);(0,s.useEffect)((()=>{!async function(e,t){try{const n=await(0,$n.a)(e).then((e=>{const n=function(e){if(!e)return"Unknown Plugin";if(e.type!==yn.zV.app)return"Plugin must be an app";if(!e.enabled)return"Application Not Enabled";return null}(e);return n?(G.h$.emit(xn.SI.alertError,[n]),t(Mn.actions.setState({pluginNav:Nn(n)})),null):(0,Rn.Av)(e)}));t(Mn.actions.setState({plugin:n,loading:!1,pluginNav:null}))}catch(e){t(Mn.actions.setState({plugin:null,loading:!1,pluginNav:kn()}))}}(t,d)}),[t]);const x=(0,s.useCallback)((e=>d(Mn.actions.changeNav(e))),[]);if(!p||t!==p.meta.id)return(0,u.jsx)(o.T,{navModel:f,children:g&&(On||(On=(0,u.jsx)(Tn.Z,{})))});if(!p.root)return(0,u.jsx)(o.T,{navModel:null!=f?f:Nn("Plugin load error"),children:In||(In=(0,u.jsx)("div",{children:"No root app page component found"}))});const y=p.root&&(0,u.jsx)(p.root,{meta:p.meta,basename:i.url,onNavChanged:x,query:v,path:r.pathname});return wn.v.featureToggles.topnav&&!m?(0,u.jsx)(Dn.v.Provider,{value:b,children:y}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(bn.Nq,{node:c,children:y}),f?(0,u.jsx)(o.T,{navModel:f,pageNav:null==m?void 0:m.node,children:(0,u.jsx)(o.T.Contents,{isLoading:g,children:(0,u.jsx)(bn.t0,{node:c})})}):(0,u.jsx)(o.T,{children:(0,u.jsx)(bn.t0,{node:c})})]})};var Fn=n(63454);function En(){const e=(0,Fn.y0)(),{navIndex:t}=e;return[...Object.values(t).filter((e=>"pluginId"in e&&"id"in e)).map((e=>{const t=(0,ot.vw)(e),n=`/a/${e.pluginId}`;return{path:e.id.startsWith("standalone-plugin-page-/")&&e.url||n,exact:!1,component:()=>(0,u.jsx)(Ln,{pluginId:e.pluginId,pluginNavSection:t})}})),{path:"/a/:pluginId",exact:!1,component:e=>{let{match:n}=e;return(0,u.jsx)(Ln,{pluginId:n.params.pluginId,pluginNavSection:t.home})}}]}const Vn=[{path:"/profile",component:en((()=>n.e(7323).then(n.bind(n,94892))))},{path:"/profile/password",component:en((()=>n.e(6541).then(n.bind(n,46541))))},{path:"/profile/select-org",component:en((()=>n.e(1456).then(n.bind(n,17207))))},{path:"/profile/notifications",component:en((()=>n.e(743).then(n.bind(n,45012))))}];function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.vc;if(e.profileEnabled)return Vn;const t=(0,I.uniq)(Vn.map((e=>e.path)));return t.map((e=>({path:e,component:en((()=>n.e(3395).then(n.bind(n,34767))))})))}var Bn,_n,Wn,Un,Hn,qn,Zn,Gn,Qn,Kn,Jn,Yn,Xn,es;const ts=[];function ns(){const e=S.ZP.featureToggles.topnav?[{path:"/apps",component:()=>Bn||(Bn=(0,u.jsx)(g,{navId:"apps"}))},{path:"/alerts-and-incidents",component:()=>_n||(_n=(0,u.jsx)(g,{navId:"alerts-and-incidents"}))},{path:"/monitoring",component:()=>Wn||(Wn=(0,u.jsx)(g,{navId:"monitoring"}))},{path:"/admin/general",component:()=>Un||(Un=(0,u.jsx)(g,{navId:"admin/general"}))},{path:"/admin/plugins",component:()=>Hn||(Hn=(0,u.jsx)(g,{navId:"admin/plugins"}))},{path:"/admin/access",component:()=>qn||(qn=(0,u.jsx)(g,{navId:"admin/access"}))}]:[];return[...En(),{path:"/",pageClass:"page-dashboard",routeName:Q.vq.Home,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296)]).then(n.bind(n,30867))))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:Q.vq.Normal,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296)]).then(n.bind(n,30867))))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:Q.vq.Normal,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296)]).then(n.bind(n,30867))))},{path:"/dashboard/new",roles:()=>H.Vt.evaluatePermission((()=>["Editor","Admin"]),[Q.bW.DashboardsCreate]),pageClass:"page-dashboard",routeName:Q.vq.New,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296)]).then(n.bind(n,30867))))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:Q.vq.Normal,chromeless:!0,component:en((()=>Promise.resolve().then(n.bind(n,80419))))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:Q.vq.Normal,chromeless:!0,component:en((()=>Promise.resolve().then(n.bind(n,80419))))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:Q.vq.Normal,chromeless:!0,component:en((()=>Promise.resolve().then(n.bind(n,80419))))},{path:"/dashboard/import",roles:()=>H.Vt.evaluatePermission((()=>["Editor","Admin"]),[Q.bW.DashboardsCreate]),component:en((()=>n.e(8808).then(n.bind(n,24935))))},{path:cn.n.List,component:en((()=>n.e(4620).then(n.bind(n,89108))))},{path:cn.n.Edit,component:en((()=>Promise.all([n.e(7685),n.e(1477)]).then(n.bind(n,39539))))},{path:cn.n.Dashboards,component:en((()=>n.e(2929).then(n.bind(n,96305))))},{path:cn.n.New,component:en((()=>n.e(4253).then(n.bind(n,28865))))},{path:"/datasources/correlations",component:en((()=>S.ZP.featureToggles.correlations?n.e(413).then(n.bind(n,78653)):n.e(2093).then(n.bind(n,42519))))},{path:"/dashboards",component:en((()=>n.e(4074).then(n.bind(n,2369))))},{path:"/dashboards/folder/new",roles:()=>H.Vt.evaluatePermission((()=>["Editor","Admin"]),[Q.bW.FoldersCreate]),component:en((()=>n.e(8932).then(n.bind(n,20043))))},{path:"/dashboards/f/:uid/:slug/permissions",component:S.ZP.rbacEnabled&&H.Vt.hasPermission(Q.bW.FoldersPermissionsRead)?en((()=>n.e(8431).then(n.bind(n,58181)))):en((()=>n.e(8431).then(n.bind(n,70771))))},{path:"/dashboards/f/:uid/:slug/settings",component:en((()=>n.e(4827).then(n.bind(n,42480))))},{path:"/dashboards/f/:uid/:slug",component:en((()=>n.e(4074).then(n.bind(n,2369))))},{path:"/dashboards/f/:uid",component:en((()=>n.e(4074).then(n.bind(n,2369))))},{path:"/explore",pageClass:"page-explore",roles:()=>H.Vt.evaluatePermission((()=>S.ZP.viewersCanEdit?[]:["Editor","Admin"]),[Q.bW.DataSourcesExplore]),component:en((()=>S.ZP.exploreEnabled?Promise.all([n.e(5434),n.e(8339),n.e(9782)]).then(n.bind(n,58408)):n.e(172).then(n.bind(n,95432))))},...e,{path:"/org",component:en((()=>n.e(529).then(n.bind(n,79375))))},{path:"/org/new",component:en((()=>n.e(950).then(n.bind(n,31702))))},{path:"/org/users",component:en((()=>n.e(8039).then(n.bind(n,7641))))},{path:"/org/users/invite",component:en((()=>n.e(7707).then(n.bind(n,64223))))},{path:"/org/apikeys",roles:()=>H.Vt.evaluatePermission((()=>["Admin"]),[Q.bW.ActionAPIKeysRead]),component:en((()=>n.e(3082).then(n.bind(n,8429))))},{path:"/org/serviceaccounts",roles:()=>H.Vt.evaluatePermission((()=>["Admin"]),[Q.bW.ServiceAccountsRead,Q.bW.ServiceAccountsCreate]),component:en((()=>n.e(1337).then(n.bind(n,87204))))},{path:"/org/serviceaccounts/create",component:en((()=>n.e(9738).then(n.bind(n,20154))))},{path:"/org/serviceaccounts/:id",component:en((()=>n.e(687).then(n.bind(n,30935))))},{path:"/org/teams",roles:()=>H.Vt.evaluatePermission((()=>S.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[Q.bW.ActionTeamsRead,Q.bW.ActionTeamsCreate]),component:en((()=>n.e(9671).then(n.bind(n,57415))))},{path:"/org/teams/new",roles:()=>H.Vt.evaluatePermission((()=>S.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[Q.bW.ActionTeamsCreate]),component:en((()=>n.e(8715).then(n.bind(n,92161))))},{path:"/org/teams/edit/:id/:page?",roles:()=>H.Vt.evaluatePermission((()=>S.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[Q.bW.ActionTeamsRead,Q.bW.ActionTeamsCreate]),component:en((()=>n.e(8612).then(n.bind(n,89954))))},{path:"/admin",component:()=>S.ZP.featureToggles.topnav?Zn||(Zn=(0,u.jsx)(g,{navId:"cfg"})):Gn||(Gn=(0,u.jsx)(a.l_,{to:"/admin/users"}))},{path:"/admin/access",component:()=>S.ZP.featureToggles.topnav?Qn||(Qn=(0,u.jsx)(g,{navId:"admin/access"})):Kn||(Kn=(0,u.jsx)(a.l_,{to:"/admin/users"}))},{path:"/admin/config",component:()=>S.ZP.featureToggles.topnav?Jn||(Jn=(0,u.jsx)(g,{navId:"admin/config"})):Yn||(Yn=(0,u.jsx)(a.l_,{to:"/admin/org"}))},{path:"/admin/settings",component:en((()=>n.e(9603).then(n.bind(n,25639))))},{path:"/admin/upgrading",component:en((()=>Promise.resolve().then(n.bind(n,10244))))},{path:"/admin/users",component:en((()=>Promise.resolve().then(n.bind(n,45339))))},{path:"/admin/users/create",component:en((()=>n.e(2508).then(n.bind(n,50437))))},{path:"/admin/users/edit/:id",component:Je},{path:"/admin/orgs",component:en((()=>n.e(3798).then(n.bind(n,93141))))},{path:"/admin/orgs/edit/:id",component:en((()=>n.e(2721).then(n.bind(n,22009))))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:en((()=>n.e(7675).then(n.bind(n,30716))))},{path:"/admin/stats",component:en((()=>Promise.resolve().then(n.bind(n,70014))))},{path:"/admin/ldap",component:Yt},{path:"/login",component:V,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:en((()=>n.e(7429).then(n.bind(n,19204)))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:S.ZP.verifyEmailEnabled?en((()=>n.e(4549).then(n.bind(n,4549)))):()=>Xn||(Xn=(0,u.jsx)(a.l_,{to:"/signup"})),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:S.ZP.disableUserSignUp?()=>es||(es=(0,u.jsx)(a.l_,{to:"/login"})):en((()=>n.e(646).then(n.bind(n,90646)))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:en((()=>n.e(133).then(n.bind(n,67595))))},{path:"/user/password/reset",component:en((()=>n.e(6848).then(n.bind(n,3689)))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:en((()=>n.e(5295).then(n.bind(n,41787))))},{path:"/playlists",component:en((()=>n.e(9218).then(n.bind(n,6829))))},{path:"/playlists/play/:uid",component:en((()=>n.e(3090).then(n.bind(n,82476))))},{path:"/playlists/new",component:en((()=>n.e(9975).then(n.bind(n,7342))))},{path:"/playlists/edit/:uid",component:en((()=>n.e(2341).then(n.bind(n,8477))))},{path:"/sandbox/benchmarks",component:en((()=>n.e(4908).then(n.bind(n,55899))))},{path:"/sandbox/test",component:en((()=>Promise.all([n.e(7377),n.e(8595)]).then(n.bind(n,34209))))},{path:"/dashboards/f/:uid/:slug/library-panels",component:en((()=>Promise.all([n.e(7782),n.e(3778)]).then(n.bind(n,64875))))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>H.Vt.evaluatePermission((()=>["Viewer","Editor","Admin"]),[Q.bW.AlertingRuleRead]),component:en((()=>n.e(1324).then(n.bind(n,81113))))},{path:"/library-panels",component:en((()=>Promise.all([n.e(7782),n.e(7878)]).then(n.bind(n,96803))))},{path:"/notifications",component:en((()=>n.e(743).then(n.bind(n,45012))))},...ss(),...as(),...fn,...pn(),...ln(),...zn(),...ts,...S.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:Q.vq.Public,component:en((()=>n.e(1344).then(n.bind(n,76677))))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:Q.vq.Public,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296),n.e(2613)]).then(n.bind(n,13814))))}]:[],...S.vc.featureToggles.dataConnectionsConsole?[{path:`/${dn.D3}`,exact:!1,component:en((()=>Promise.all([n.e(7685),n.e(5981)]).then(n.bind(n,20232))))}]:[],{path:"/*",component:x.Z}]}function ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.ZP;return e.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:Q.vq.Path,component:en((()=>Promise.all([n.e(8935),n.e(5434),n.e(7638),n.e(8057),n.e(7782),n.e(7717),n.e(8339),n.e(7377),n.e(8613),n.e(5296)]).then(n.bind(n,30867))))},{path:"/g/:slug*",component:en((()=>n.e(6092).then(n.bind(n,60050))))}]:[]}function as(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.ZP;return e.featureToggles.scenes?[{path:"/scenes",component:en((()=>Promise.all([n.e(7638),n.e(7717),n.e(207)]).then(n.bind(n,98214))))},{path:"/scenes/:name",component:en((()=>Promise.all([n.e(7638),n.e(7717),n.e(207)]).then(n.bind(n,79759))))}]:[]}},75971:(e,t,n)=>{"use strict";n.d(t,{U:()=>D,x:()=>A});var s=n(23067),a=n(41519),i=n(33994),r=n(31259),o=n(11035);const l={navBarTree:n(26056).V4,navIndex:i.G4,appNotifications:o.VW};var d=n(43150),c=n(82983),u=n(62815),h=n(66190),p=n(39556),g=n(46525),m=n(25822),f=n(5404),v=n(91529),b=n(74731),x=n(66347),y=n(29705),w=n(45919),j=n(69638),S=n(98669),C=n(7686),k=n(97208),N=n(31835),O=n(47175),I=n(40264);const T=Object.assign({},l,c.ZP,C.ZP,u.ZP,f.ZP,p.ZP,m.ZP,g.ZP,k.ZP,S.ZP,j.ZP,v.ZP,x.ZP,d.ZP,b.ZP,h.ZP,y.ZP,N.ZP,{plugins:w.I6,[O.C.reducerPath]:O.C.reducer,[a.Rh.reducerPath]:a.Rh.reducer}),$={},R=()=>{const e=(0,r.combineReducers)(Object.assign({},T,$));return(t,n)=>{if(n.type!==I.e.type)return e(t,n);const{cleanupAction:s}=n.payload;return s(t),e(t,n)}};var P=n(63454);function D(e){var t;t=e,Object.assign($,t)}function A(e){const t=(0,s.xC)({reducer:R(),middleware:e=>e({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(O.C.middleware,a.Rh.middleware),devTools:!1,preloadedState:Object.assign({navIndex:(0,i.Cu)()},e)});return(0,P.PQ)(t),t}},63454:(e,t,n)=>{"use strict";n.d(t,{PQ:()=>i,WI:()=>o,h:()=>a,y0:()=>r});var s=n(31835);let a;function i(e){a=e}function r(){return a&&a.getState?a.getState():{templating:Object.assign({},s.qM,{lastKey:"key"})}}function o(e){if(a&&a.getState)return a.dispatch(e)}},23539:(e,t,n)=>{"use strict";let s,a,i,r,o;n.d(t,{B5:()=>s,BL:()=>d,V5:()=>a,bf:()=>i,eL:()=>h,hw:()=>u,nl:()=>l,pC:()=>o,vT:()=>c,zV:()=>r}),function(e){e.Viewer="Viewer",e.Editor="Editor",e.Admin="Admin"}(s||(s={})),function(e){e[e.View=1]="View",e[e.Edit=2]="Edit",e[e.Admin=4]="Admin"}(a||(a={})),function(e){e.View="View",e.Edit="Edit",e.Admin="Admin"}(i||(i={})),function(e){e[e.Query=1]="Query",e[e.Admin=2]="Admin"}(r||(r={})),function(e){e.Team="Team",e.User="User",e.Viewer="Viewer",e.Editor="Editor"}(o||(o={}));const l=[{value:r.Query,label:"Query",description:"Can query data source."}],d=[{value:o.Team,label:"Team"},{value:o.User,label:"User"},{value:o.Viewer,label:"Everyone With Viewer Role"},{value:o.Editor,label:"Everyone With Editor Role"}],c=[{value:a.View,label:i.View,description:"Can view dashboards."},{value:a.Edit,label:i.Edit,description:"Can add, edit and delete dashboards."},{value:a.Admin,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}];let u;!function(e){e[e.Member=0]="Member",e[e.Admin=4]="Admin"}(u||(u={}));const h=[{value:u.Member,label:"Member",description:"Is team member"},{value:u.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},8105:(e,t,n)=>{"use strict";n.d(t,{Ai:()=>r,Dn:()=>C,Eb:()=>w,GL:()=>d,GT:()=>m,Im:()=>b,Jd:()=>N,OW:()=>k,QI:()=>y,Qt:()=>x,RB:()=>I,VJ:()=>S,Wj:()=>h,Xw:()=>u,Yr:()=>$,_B:()=>p,_z:()=>f,hS:()=>g,le:()=>j,nq:()=>o,p8:()=>v,pO:()=>c,xF:()=>T,xt:()=>l,z:()=>O});var s=n(71390),a=n(54209);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,s.X)("ds-request-response"),(0,s.X)("ds-request-error");const r=(0,s.X)("toggle-sidemenu-hidden"),o=(0,s.X)("template-variable-value-updated"),l=(0,s.X)("graph-click"),d=(0,s.X)("threshold-changed");class c extends a.m{}i(c,"type","panel-queries-changed");class u extends a.m{}i(u,"type","panel-transformations-changed");class h extends a.m{}i(h,"type","panels-options-changed");class p extends a.m{}i(p,"type","dashboard-panels-changed");class g extends a.m{}i(g,"type","dashboard-meta-changed");class m extends a.m{}i(m,"type","panel-directive-ready");class f extends a.m{}i(f,"type","render");class v extends a.R{}let b;i(v,"type","zoom-out"),function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(b||(b={}));class x extends a.R{}i(x,"type","shift-time");class y extends a.m{}i(y,"type","absolute-time");class w extends a.R{}i(w,"type","remove-panel");class j extends a.R{}i(j,"type","show-modal");class S extends a.R{}i(S,"type","show-confirm-modal");class C extends a.R{}i(C,"type","show-react-modal");class k extends a.m{}i(k,"type","hide-modal");class N extends a.m{}i(N,"type","dashboard-saved");class O extends a.R{}i(O,"type","annotation-query-started");class I extends a.R{}i(I,"type","annotation-query-finished");class T extends a.R{}i(T,"type","panel-edit-started");class $ extends a.R{}i($,"type","panel-edit-finished")},75334:(e,t,n)=>{"use strict";let s;n.d(t,{K:()=>s,f:()=>a}),function(e){e.left="left",e.right="right"}(s||(s={}));const a=["lines","bars","points","stacked_lines","stacked_bars"]},64850:(e,t,n)=>{"use strict";let s,a,i;n.d(t,{bW:()=>v,pC:()=>r.pC,F1:()=>l,bd:()=>d,RW:()=>b,bG:()=>a,vq:()=>s,zV:()=>r.zV,f0:()=>u.f,Kd:()=>u.K,UX:()=>i,B5:()=>r.B5,bf:()=>r.bf,Wc:()=>o,hw:()=>r.hw,hg:()=>f,nl:()=>r.nl,eL:()=>r.eL,Bi:()=>c,I0:()=>g,v9:()=>m}),function(e){e.Home="home-dashboard",e.New="new-dashboard",e.Normal="normal-dashboard",e.Path="path-dashboard",e.Scripted="scripted-dashboard",e.Public="public-dashboard"}(s||(s={})),function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Services="Services",e.Failed="Failed",e.Completed="Completed"}(a||(a={})),function(e){e.TV="tv",e.Full="full"}(i||(i={}));var r=n(23539);let o,l,d;!function(e){e.All="All",e.WithExpiredTokens="WithExpiredTokens",e.Disabled="Disabled"}(o||(o={})),function(e){e.Success="success",e.Warning="warning",e.Error="error",e.Info="info"}(l||(l={})),function(e){e[e.Success=3e3]="Success",e[e.Warning=5e3]="Warning",e[e.Error=7e3]="Error"}(d||(d={}));const c={[l.Success]:d.Success,[l.Warning]:d.Warning,[l.Error]:d.Error,[l.Info]:d.Success};var u=n(75334),h=n(23067),p=n(36635);const g=p.useDispatch,m=p.useSelector,f=(e,t,n)=>(0,h.hg)(e,t,n);let v;!function(e){e.UsersRead="users:read",e.UsersWrite="users:write",e.UsersAuthTokenList="users.authtoken:read",e.UsersAuthTokenUpdate="users.authtoken:write",e.UsersPasswordUpdate="users.password:write",e.UsersDelete="users:delete",e.UsersCreate="users:create",e.UsersEnable="users:enable",e.UsersDisable="users:disable",e.UsersPermissionsUpdate="users.permissions:write",e.UsersLogout="users:logout",e.UsersQuotasList="users.quotas:read",e.UsersQuotasUpdate="users.quotas:write",e.ServiceAccountsRead="serviceaccounts:read",e.ServiceAccountsCreate="serviceaccounts:create",e.ServiceAccountsWrite="serviceaccounts:write",e.ServiceAccountsDelete="serviceaccounts:delete",e.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",e.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",e.OrgsRead="orgs:read",e.OrgsPreferencesRead="orgs.preferences:read",e.OrgsWrite="orgs:write",e.OrgsPreferencesWrite="orgs.preferences:write",e.OrgsCreate="orgs:create",e.OrgsDelete="orgs:delete",e.OrgUsersRead="org.users:read",e.OrgUsersAdd="org.users:add",e.OrgUsersRemove="org.users:remove",e.OrgUsersWrite="org.users:write",e.LDAPUsersRead="ldap.user:read",e.LDAPUsersSync="ldap.user:sync",e.LDAPStatusRead="ldap.status:read",e.DataSourcesExplore="datasources:explore",e.DataSourcesRead="datasources:read",e.DataSourcesCreate="datasources:create",e.DataSourcesWrite="datasources:write",e.DataSourcesDelete="datasources:delete",e.DataSourcesPermissionsRead="datasources.permissions:read",e.DataSourcesCachingRead="datasources.caching:read",e.DataSourcesInsightsRead="datasources.insights:read",e.ActionServerStatsRead="server.stats:read",e.ActionTeamsCreate="teams:create",e.ActionTeamsDelete="teams:delete",e.ActionTeamsRead="teams:read",e.ActionTeamsWrite="teams:write",e.ActionTeamsPermissionsRead="teams.permissions:read",e.ActionTeamsPermissionsWrite="teams.permissions:write",e.ActionRolesList="roles:read",e.ActionTeamsRolesList="teams.roles:read",e.ActionTeamsRolesAdd="teams.roles:add",e.ActionTeamsRolesRemove="teams.roles:remove",e.ActionUserRolesList="users.roles:read",e.ActionUserRolesAdd="users.roles:add",e.ActionUserRolesRemove="users.roles:remove",e.DashboardsRead="dashboards:read",e.DashboardsWrite="dashboards:write",e.DashboardsDelete="dashboards:delete",e.DashboardsCreate="dashboards:create",e.DashboardsPermissionsRead="dashboards.permissions:read",e.DashboardsPermissionsWrite="dashboards.permissions:write",e.DashboardsPublicWrite="dashboards.public:write",e.FoldersRead="folders:read",e.FoldersWrite="folders:write",e.FoldersDelete="folders:delete",e.FoldersCreate="folders:create",e.FoldersPermissionsRead="folders.permissions:read",e.FoldersPermissionsWrite="folders.permissions:write",e.AlertingRuleCreate="alert.rules:create",e.AlertingRuleRead="alert.rules:read",e.AlertingRuleUpdate="alert.rules:write",e.AlertingRuleDelete="alert.rules:delete",e.AlertingInstanceCreate="alert.instances:create",e.AlertingInstanceUpdate="alert.instances:write",e.AlertingInstanceRead="alert.instances:read",e.AlertingNotificationsRead="alert.notifications:read",e.AlertingNotificationsWrite="alert.notifications:write",e.AlertingRuleExternalWrite="alert.rules.external:write",e.AlertingRuleExternalRead="alert.rules.external:read",e.AlertingInstancesExternalWrite="alert.instances.external:write",e.AlertingInstancesExternalRead="alert.instances.external:read",e.AlertingNotificationsExternalWrite="alert.notifications.external:write",e.AlertingNotificationsExternalRead="alert.notifications.external:read",e.ActionAPIKeysRead="apikeys:read",e.ActionAPIKeysCreate="apikeys:create",e.ActionAPIKeysDelete="apikeys:delete",e.PluginsInstall="plugins:install",e.PluginsWrite="plugins:write"}(v||(v={}));var b=n(8105)},29791:(e,t,n)=>{"use strict";let s;n.d(t,{y:()=>s}),function(e){e.LineChart="Line chart",e.LineChartSmooth="Line chart smooth",e.LineChartGradientColorScheme="Line chart with gradient color scheme",e.AreaChart="Area chart",e.AreaChartStacked="Area chart stacked",e.AreaChartStackedPercent="Area chart 100% stacked",e.BarChart="Bar chart",e.BarChartGradientColorScheme="Bar chart with gradient color scheme",e.BarChartStacked="Bar chart stacked",e.BarChartStackedPercent="Bar chart 100% stacked",e.BarChartHorizontal="Bar chart horizontal",e.BarChartHorizontalStacked="Bar chart horizontal stacked",e.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",e.Candlestick="Candlestick",e.PieChart="Pie chart",e.PieChartDonut="Pie chart donut",e.Stat="Stat",e.StatColoredBackground="Stat colored background",e.Gauge="Gauge",e.GaugeNoThresholds="Gauge no thresholds",e.BarGaugeBasic="Bar gauge basic",e.BarGaugeLCD="Bar gauge LCD",e.Table="Table",e.StateTimeline="State timeline",e.StatusHistory="Status history",e.TextPanel="Text",e.DashboardList="Dashboard list",e.Logs="Logs"}(s||(s={}))},22587:(e,t,n)=>{"use strict";let s,a,i,r,o;function l(e){return Object.values(a).some((t=>t===e))}function d(e){if(function(e){return null!=e&&!Object.values(s).includes(e)}(e)){return e.split(" ")[0]}return e}n.d(t,{ED:()=>d,T8:()=>r,Yb:()=>l,bj:()=>a,g0:()=>o,pz:()=>i,x_:()=>s}),function(e){e.Firing="firing",e.Inactive="inactive",e.Pending="pending"}(s||(s={})),function(e){e.Normal="Normal",e.Alerting="Alerting",e.Pending="Pending",e.NoData="NoData",e.Error="Error"}(a||(a={})),function(e){e.Alerting="alerting",e.Recording="recording"}(i||(i={})),function(e){e.Cortex="Cortex",e.Mimir="Mimir",e.Prometheus="Prometheus",e.Thanos="Thanos"}(r||(r={})),function(e){e.Alerting="Alerting",e.NoData="NoData",e.KeepLastState="KeepLastState",e.OK="OK",e.Error="Error"}(o||(o={}))},26189:()=>{jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function n(n){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function s(n){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var s=e.offset();t.x=Math.max(0,Math.min(n.pageX-s.left,e.width())),t.y=Math.max(0,Math.min(n.pageY-s.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(n){if(n){var s=e.p2c(n);t.x=Math.max(0,Math.min(s.left,e.width())),t.y=Math.max(0,Math.min(s.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(n){n&&e.setCrosshair(n),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(n),t.mousemove(s))})),e.hooks.drawOverlay.push((function(e,n){var s=e.getOptions().crosshair;if(s.mode){var a=e.getPlotOffset();if(n.save(),n.translate(a.left,a.top),-1!=t.x){var i=e.getOptions().crosshair.lineWidth%2?.5:0;if(n.strokeStyle=s.color,n.lineWidth=s.lineWidth,n.lineJoin="round",n.beginPath(),-1!=s.mode.indexOf("x")){var r=Math.floor(t.x)+i;n.moveTo(r,0),n.lineTo(r,e.height())}if(-1!=s.mode.indexOf("y")){var o=Math.floor(t.y)+i;n.moveTo(0,o),n.lineTo(e.width(),o)}n.stroke()}n.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",n),t.unbind("mousemove",s)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},47825:()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,n){t.dashes.show&&e.hooks.draw.push((function(e,s){var a=e.getPlotOffset(),i=t.xaxis,r=t.yaxis;function o(e,a){var o,l,d=n.points,c=n.pointsize,u=null,h=null,p=0,g=!0;t.dashes.dashLength[0]?(o=t.dashes.dashLength[0],l=t.dashes.dashLength[1]?t.dashes.dashLength[1]:o):l=o=t.dashes.dashLength,s.beginPath();for(var m=c;m<d.length;m+=c){var f=d[m-c],v=d[m-c+1],b=d[m],x=d[m+1];if(null!=f&&null!=b){if(v<=x&&v<r.min){if(x<r.min)continue;f=(r.min-v)/(x-v)*(b-f)+f,v=r.min}else if(x<=v&&x<r.min){if(v<r.min)continue;b=(r.min-v)/(x-v)*(b-f)+f,x=r.min}if(v>=x&&v>r.max){if(x>r.max)continue;f=(r.max-v)/(x-v)*(b-f)+f,v=r.max}else if(x>=v&&x>r.max){if(v>r.max)continue;b=(r.max-v)/(x-v)*(b-f)+f,x=r.max}if(f<=b&&f<i.min){if(b<i.min)continue;v=(i.min-f)/(b-f)*(x-v)+v,f=i.min}else if(b<=f&&b<i.min){if(f<i.min)continue;x=(i.min-f)/(b-f)*(x-v)+v,b=i.min}if(f>=b&&f>i.max){if(b>i.max)continue;v=(i.max-f)/(b-f)*(x-v)+v,f=i.max}else if(b>=f&&b>i.max){if(f>i.max)continue;x=(i.max-f)/(b-f)*(x-v)+v,b=i.max}f==u&&v==h||s.moveTo(i.p2c(f)+e,r.p2c(v)+a);var y,w=i.p2c(f)+e,j=r.p2c(v)+a,S=i.p2c(b)+e,C=r.p2c(x)+a;do{0==(y=k(p>0?p:g?o:l)).deltaX&&0==y.deltaY||(g?s.lineTo(w+y.deltaX,j+y.deltaY):s.moveTo(w+y.deltaX,j+y.deltaY)),g=!g,p=y.remainder,w+=y.deltaX,j+=y.deltaY}while(y.distance>0);u=b,h=x}function k(e){var t=Math.sqrt(Math.pow(S-w,2)+Math.pow(C-j,2));if(t<=e)return{deltaX:S-w,deltaY:C-j,distance:t,remainder:e-t};var n=C>j?1:-1;return{deltaX:(S>w?1:-1)*Math.sqrt(Math.pow(e,2)/(1+Math.pow((C-j)/(S-w),2))),deltaY:n*Math.sqrt(Math.pow(e,2)-Math.pow(e,2)/(1+Math.pow((C-j)/(S-w),2))),distance:e,remainder:0}}}s.stroke()}s.save(),s.translate(a.left,a.top),s.lineJoin="round";var l=t.dashes.lineWidth,d=t.shadowSize;if(l>0&&d>0){s.lineWidth=d,s.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;o(Math.sin(c)*(l/2+d/2),Math.cos(c)*(l/2+d/2)),s.lineWidth=d/2,o(Math.sin(c)*(l/2+d/4),Math.cos(c)*(l/2+d/4))}s.lineWidth=l,s.strokeStyle=t.color,l>0&&o(0,0),s.restore()}))}))},options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})},28844:()=>{!function(e){"use strict";e.plot.plugins.push({init:function(t){t.hooks.drawSeries.push((function(t,n,s){var a,i,r,o,l,d,c;function u(e,t){n.beginPath(),n.moveTo(s.xaxis.p2c(e)+d.left,s.yaxis.p2c(t)+d.top)}function h(e,t){console.assert(t>e,"expects the end index to be greater than the start index");var n,s,a=0===e||null===r[e-1]||null===l[e-1],d=!1;for(n=e;n<t;n++)if(null===r[n*i+1]||null===l[n*i+1])d=!1,a=!0;else if(r[n*i+1]===l[n*o+1])d=!0,a=!1;else{if(r[n*i+1]>l[n*o+1])return a?u(r[n*i],r[n*i+1]):d?u(r[(n-1)*i],r[(n-1)*i+1]):u((s=p(n))[0],s[1]),void m(n,t);a=!1,d=!1}}function p(e){var t,n,s,a,d,c,u,h,p,g,m,f,v,b,x,y;for(console.assert(e>0,"expects the second point in the series line segment"),t=1;t<l.length/o;t++)if(s=r[(e-1)*i],a=r[(e-1)*i+1],d=r[e*i],c=r[e*i+1],u=l[(t-1)*o],h=l[(t-1)*o+1],p=l[t*o],g=l[t*o+1],m=void 0,f=void 0,v=void 0,b=void 0,x=void 0,y=void 0,y=((v=p-u)*(a-h)-(b=g-h)*(s-u))/(-v*(f=c-a)+(m=d-s)*b),null!==(n=(x=(-f*(s-u)+m*(a-h))/(-v*f+m*b))>=0&&x<=1&&y>=0&&y<=1?[s+y*m,a+y*f]:null))return n;console.error("intersectionPoint() should only be called when an intersection happens")}function g(e,t){var s;for(console.assert(e>=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),s=e;s>=t;s--)n.lineTo(a.xaxis.p2c(l[s*o])+d.left,a.yaxis.p2c(l[s*o+1])+d.top);n.closePath(),n.fill()}function m(e,t){var a,c;for(console.assert(e<=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),a=e;a<t;a++){if(null===r[a*i+1]&&a>e)return g(a-1,e),void h(a,t);if(r[a*i+1]===l[a*o+1])return g(a,e),void h(a,t);if(r[a*i+1]<l[a*o+1])return c=p(a),n.lineTo(s.xaxis.p2c(c[0])+d.left,s.yaxis.p2c(c[1])+d.top),g(a,e),void h(a,t);n.lineTo(s.xaxis.p2c(r[a*i])+d.left,s.yaxis.p2c(r[a*i+1])+d.top)}g(t,e)}null!==s.fillBelowTo&&(a=function(e,t){var n;for(n=0;n<t.length;++n)if(t[n].id===e.fillBelowTo)return t[n];return null}(s,t.getData()),a&&(i=s.datapoints.pointsize,r=s.datapoints.points,o=a.datapoints.pointsize,l=a.datapoints.points,d=t.getPlotOffset(),function(){if(r.length/i!=l.length/o)return console.error("Refusing to graph inconsistent number of points"),!1;var e;for(e=0;e<r.length/i;e++)if(null!==r[e*i]&&null!==l[e*o]&&r[e*i]!==l[e*o])return console.error("Refusing to graph points without matching value"),!1;return!0}()&&((c=e.color.parse(s.color)).a=.4,c.normalize(),n.fillStyle=c.toString(),h(0,r.length/i))))}))},options:{series:{fillBelowTo:null}},name:"fillbelow",version:"0.1.0"})}(jQuery)},7540:()=>{!function(e){var t=function(){var t,i,r,o,l,d=function(e,s){t=s,i=e.getPlaceholder(),r=e.getOptions(),o=r.series.gauges,l=e.getData(),n(o.debug)};function c(e,t){"auto"===e.gauge.width&&(e.gauge.width=Math.max(5,t/8)),"auto"===e.label.margin&&(e.label.margin=Math.max(1,t/20)),"auto"===e.label.font.size&&(e.label.font.size=Math.max(5,t/8)),"auto"===e.value.margin&&(e.value.margin=Math.max(1,t/30)),"auto"===e.value.font.size&&(e.value.font.size=Math.max(5,t/9)),"auto"===e.threshold.width&&(e.threshold.width=Math.max(3,t/100)),"auto"===e.threshold.label.margin&&(e.threshold.label.margin=Math.max(3,t/40)),"auto"===e.threshold.label.font.size&&(e.threshold.label.font.size=Math.max(5,t/15))}function u(e,t,n){var s=e.gauge.startAngle+(e.gauge.endAngle-e.gauge.startAngle)*((n-e.gauge.min)/(e.gauge.max-e.gauge.min));return s<e.gauge.startAngle?s=e.gauge.startAngle:s>e.gauge.endAngle&&(s=e.gauge.endAngle),s}function h(e,n,s,i,r,o,l,d,c,u){r!==o&&(t.save(),a(t,e,n,s,i,r,o,l,d,c),u&&(a(t,e,n,s,i,r,o),t.clip(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=10,t.shadowColor="gray",a(t,e,n,s+1,i+2,r,o,l,1)),t.restore())}function p(e,t,n,a,i,r){g(n.cx+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.cos(s(r)),n.cy+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.sin(s(r)),"flotGaugeThresholdValue"+a,e.threshold.label.formatter?e.threshold.label.formatter(i):i,e.threshold.label,r)}function g(t,n,s,a,r,o){var l=e(i).find("#"+s),d=l.length;d||((l=e("<span></span>")).attr("id",s),l.attr("class","flot-temp-elem"),i.append(l)),l.css("position","absolute"),l.css("top",n+"px"),l.css("white-space","nowrap"),r.font.size&&l.css("font-size",r.font.size+"px"),r.font.family&&l.css("font-family",r.font.family),r.color&&l.css("color",r.color),r.background.color&&l.css("background-color",r.background.color),r.background.opacity&&l.css("opacity",r.background.opacity),l.text(a),l.css("left",t+"px"),l.css("left",parseInt(l.css("left"))-l.width()/2+"px"),!d&&o&&(l.css("top",parseInt(l.css("top"))-l.height()/2+"px"),l.css("transform","rotate("+(180*o+90)+"deg)"))}return d.prototype.calculateLayout=function(){var e=i.width(),t=i.height(),n=Math.min(l.length,o.layout.columns),a=Math.ceil(l.length/n),r=o.layout.margin,d=o.layout.hMargin,u=o.layout.vMargin,h=(e-2*r-d*(n-1))/n,p=(t-2*r-u*(a-1))/a;if(o.layout.square){var g=Math.min(h,p);h=g,p=g}c(o,h);var m=o.cell.margin,f=0,v=0;o.label.show&&(f=o.label.margin,v=o.label.font.size);var b=0,x=0;o.value.show&&(b=o.value.margin,x=o.value.font.size);var y=0;o.threshold.show&&(y=o.threshold.width);var w=0,j=0;o.threshold.label.show&&(w=o.threshold.label.margin,j=o.threshold.label.font.size);for(var S=h/2-m-y-2*w-j,C=o.gauge.startAngle,k=o.gauge.endAngle,N=(k-C)/100,O=-1,I=C;I<k;I+=N)O=Math.max(O,Math.sin(s(I)));var T=(p-2*m-2*f-v)/(1+(O=Math.max(O,Math.sin(s(k)))));T*O<b+x/2&&(T=p-2*m-2*f-v-b-x/2);var $=T-2*w-j-y,R=Math.min(S,$),P=o.gauge.width;P>=R&&(P=Math.max(3,R/3));var D=2*w+j+y+R;return{canvasWidth:e,canvasHeight:t,margin:r,hMargin:d,vMargin:u,columns:n,rows:a,cellWidth:h,cellHeight:p,cellMargin:m,labelMargin:f,labelFontSize:v,valueMargin:b,valueFontSize:x,width:P,radius:R,thresholdWidth:y,thresholdLabelMargin:w,thresholdLabelFontSize:j,gaugeOuterHeight:Math.max(D*(1+O),D+b+x/2)}},d.prototype.calculateAutoValues=c,d.prototype.calculateCellLayout=function(e,t,n){var s=function(e,t){return t%e}(t.columns,n),a=function(e,t){return Math.floor(t/e)}(t.columns,n),i=t.margin+(t.cellWidth+t.hMargin)*s,r=t.margin+(t.cellHeight+t.vMargin)*a,o=i+t.cellWidth/2,l=r+t.cellMargin+2*t.labelMargin+t.labelFontSize+t.thresholdWidth+t.thresholdLabelFontSize+2*t.thresholdLabelMargin+t.radius,d=t.cellHeight-2*t.cellMargin-2*t.labelMargin-t.labelFontSize-t.gaugeOuterHeight,c=0;return"middle"===e.cell.vAlign?c=d/2:"bottom"===e.cell.vAlign&&(c=d),l+=c,{col:s,row:a,x:i,y:r,offsetY:c,cellWidth:t.cellWidth,cellHeight:t.cellHeight,cellMargin:t.cellMargin,cx:o,cy:l}},d.prototype.drawBackground=function(e){o.frame.show&&(t.save(),t.strokeStyle=r.grid.borderColor,t.lineWidth=r.grid.borderWidth,t.strokeRect(0,0,e.canvasWidth,e.canvasHeight),r.grid.backgroundColor&&(t.fillStyle=r.grid.backgroundColor,t.fillRect(0,0,e.canvasWidth,e.canvasHeight)),t.restore())},d.prototype.drawCellBackground=function(e,n){t.save(),e.cell.border&&e.cell.border.show&&e.cell.border.color&&e.cell.border.width&&(t.strokeStyle=e.cell.border.color,t.lineWidth=e.cell.border.width,t.strokeRect(n.x,n.y,n.cellWidth,n.cellHeight)),e.cell.background&&e.cell.background.color&&(t.fillStyle=e.cell.background.color,t.fillRect(n.x,n.y,n.cellWidth,n.cellHeight)),t.restore()},d.prototype.drawGauge=function(e,n,i,r,o){var l=e.gauge.shadow.show?e.gauge.shadow.blur:0,d=function(e,t){for(var n,s=0;s<e.threshold.values.length;s++){var a=e.threshold.values[s];if(n=a.color,t<a.value)break}return n}(e,o),c=function(e,t,n){let s={};var a=e.gauge.neutralValue;null!=a?n<a?(s.a1=u(e,t,n),s.a2=u(e,t,a)):(s.a1=u(e,t,a),s.a2=u(e,t,n)):(s.a1=e.gauge.startAngle,s.a2=u(e,t,n));return s}(e,n,o);h(i.cx,i.cy,n.radius,n.width,s(e.gauge.startAngle),s(e.gauge.endAngle),e.gauge.border.color,e.gauge.border.width,e.gauge.background.color,l),h(i.cx,i.cy,n.radius-1,n.width-2,s(c.a1),s(c.a2),d,1,d,l),null!=e.gauge.neutralValue&&function(e,n,i,r){var o=(e.gauge.max-e.gauge.min)/600;a(t,i.cx,i.cy,n.radius-2,n.width-4,s(u(e,n,e.gauge.neutralValue-o)),s(u(e,n,e.gauge.neutralValue+o)),r,2,e.gauge.background.color)}(e,n,i,d)},d.prototype.drawThreshold=function(e,n,i){for(var r=e.gauge.startAngle,o=0;o<e.threshold.values.length;o++){var l=e.threshold.values[o];c1=l.color,a2=u(e,0,l.value),a(t,i.cx,i.cy,n.radius+n.thresholdWidth,n.thresholdWidth-2,s(r),s(a2),c1,1,c1),r=a2}},d.prototype.drawLable=function(e,t,n,s,a){g(n.cx,n.y+n.cellMargin+t.labelMargin+n.offsetY,"flotGaugeLabel"+s,e.label.formatter?e.label.formatter(a.label,a.data[0][1]):text,e.label)},d.prototype.drawValue=function(e,t,n,s,a){g(n.cx,n.cy-e.value.font.size/2,"flotGaugeValue"+s,e.value.formatter?e.value.formatter(a.label,a.data[0][1]):text,e.value)},d.prototype.drawThresholdValues=function(e,t,n,s){p(e,t,n,"Min"+s,e.gauge.min,e.gauge.startAngle),p(e,t,n,"Max"+s,e.gauge.max,e.gauge.endAngle);for(var a=0;a<e.threshold.values.length;a++){var i=e.threshold.values[a];if(i.value>e.gauge.min&&i.value<e.gauge.max){var r=u(e,0,i.value);p(e,t,n,s+"_"+a,i.value,r)}}var o=e.gauge.neutralValue;null!=o&&o>e.gauge.min&&o<e.gauge.max&&p(e,t,n,"Neutral"+s,o,u(e,0,o))},d}();function n(e){return"undefined"!=typeof Logger?new Logger(e):null}function s(e){return e*Math.PI}function a(e,t,n,s,a,i,r,o,l,d){if(i!==r){e.save(),e.beginPath(),e.arc(t,n,s,i,r,false),e.lineTo(t+(s-a)*Math.cos(r),n+(s-a)*Math.sin(r)),e.arc(t,n,s-a,r,i,!0),e.closePath(),l&&(e.lineWidth=l),o&&(e.strokeStyle=o,e.stroke()),d&&(e.fillStyle=d,e.fill()),e.restore()}}var i={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return e}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return parseInt(t)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(e){return e}},values:[]}}}};e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(e,t){n(t.series.gauges.debug);t.series.gauges.show&&(t.grid.show=!1,t.legend.show=!1),t.series.gauges.threshold.values.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))})),s.hooks.draw.push((function(s,a){var i=s.getOptions().series.gauges;n(i.debug);if(i.show){var r=s.getData();if(r&&r.length){var o=new t(s,a),l=o.calculateLayout();i.debug.layout,o.drawBackground(l);for(var d=0;d<r.length;d++){var c=r[d],u=e.extend({},i,c.gauges);c.gauges&&o.calculateAutoValues(u,l.cellWidth);var h=o.calculateCellLayout(u,l,d);o.drawCellBackground(u,h),u.debug.layout,u.label.show&&o.drawLable(u,l,h,d,c),o.drawGauge(u,l,h,c.label,c.data[0][1]),u.threshold.show&&o.drawThreshold(u,l,h),u.threshold.label.show&&o.drawThresholdValues(u,l,h,d),u.value.show&&o.drawValue(u,l,h,d,c)}}}}))},options:i,name:"gauge",version:"1.1.0"})}(jQuery)},89377:()=>{!function(e){e.color={},e.color.make=function(t,n,s,a){var i={};return i.r=t||0,i.g=n||0,i.b=s||0,i.a=null!=a?a:1,i.add=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]+=t;return i.normalize()},i.scale=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]*=t;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}return i.r=e(0,parseInt(i.r),255),i.g=e(0,parseInt(i.g),255),i.b=e(0,parseInt(i.b),255),i.a=e(0,i.a,1),i},i.clone=function(){return e.color.make(i.r,i.b,i.g,i.a)},i.normalize()},e.color.extract=function(t,n){var s;do{if(""!=(s=t.css(n).toLowerCase())&&"transparent"!=s)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==s&&(s="transparent"),e.color.parse(s)},e.color.parse=function(n){var s,a=e.color.make;if(s=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return a(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10));if(s=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return a(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),parseFloat(s[4]));if(s=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return a(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]));if(s=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return a(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]),parseFloat(s[4]));if(s=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return a(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16));if(s=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return a(parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16));var i=e.trim(n).toLowerCase();return"transparent"==i?a(255,255,255,0):a((s=t[i]||[0,0,0])[0],s[1],s[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function n(t,n){var s=n.children("."+t)[0];if(null==s&&((s=document.createElement("canvas")).className=t,e(s).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!s.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");s=window.G_vmlCanvasManager.initElement(s)}this.element=s;var a=this.context=s.getContext("2d"),i=window.devicePixelRatio||1,r=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;this.pixelRatio=i/r,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function s(t,s,a,i){var r=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,d=null,c=null,u=null,h=null,p=[],g=[],m={left:0,right:0,top:0,bottom:0},f=0,v=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function y(e,t){t=[x].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function w(t){r=function(t){for(var n=[],s=0;s<t.length;++s){var a=e.extend(!0,{},o.series);null!=t[s].data?(a.data=t[s].data,delete t[s].data,e.extend(!0,a,t[s]),t[s].data=a.data):a.data=t[s],n.push(a)}return n}(t),function(){var t,n=r.length,s=-1;for(t=0;t<r.length;++t){var a=r[t].color;null!=a&&(n--,"number"==typeof a&&a>s&&(s=a))}n<=s&&(n=s+1);var i,l=[],d=o.colors,c=d.length,u=0;for(t=0;t<n;t++)i=e.color.parse(d[t%c]||"#666"),t%c==0&&t&&(u=u>=0?u<.5?-u-.2:0:-u),l[t]=i.scale("rgb",1+u);var h,m=0;for(t=0;t<r.length;++t){if(null==(h=r[t]).color?(h.color=l[m].toString(),++m):"number"==typeof h.color&&(h.color=l[h.color].toString()),null==h.lines.show){var f,v=!0;for(f in h)if(h[f]&&h[f].show){v=!1;break}v&&(h.lines.show=!0)}null==h.lines.zero&&(h.lines.zero=!!h.lines.fill),h.xaxis=k(p,j(h,"x")),h.yaxis=k(g,j(h,"y"))}}(),function(){var t,n,s,a,i,o,l,d,c,u,h,p,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE;function v(e,t,n){t<e.datamin&&t!=-f&&(e.datamin=t),n>e.datamax&&n!=f&&(e.datamax=n)}for(e.each(S(),(function(e,t){t.datamin=g,t.datamax=m,t.used=!1})),t=0;t<r.length;++t)(i=r[t]).datapoints={points:[]},y(b.processRawData,[i,i.data,i.datapoints]);for(t=0;t<r.length;++t){if(h=(i=r[t]).data,!(p=i.datapoints.format)){if((p=[]).push({x:!0,number:!0,required:!0}),p.push({y:!0,number:!0,required:!0}),i.stack||i.bars.show||i.lines.show&&i.lines.fill){var x=!!(i.bars.show&&i.bars.zero||i.lines.show&&i.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),i.bars.horizontal&&(delete p[p.length-1].y,p[p.length-1].x=!0)}i.datapoints.format=p}if(null==i.datapoints.pointsize){i.datapoints.pointsize=p.length,l=i.datapoints.pointsize,o=i.datapoints.points;var w=i.lines.show&&i.lines.steps;for(i.xaxis.used=i.yaxis.used=!0,n=s=0;n<h.length;++n,s+=l){var j=null==(u=h[n]);if(!j)for(a=0;a<l;++a)d=u[a],(c=p[a])&&(c.number&&null!=d&&(d=+d,isNaN(d)?d=null:d==1/0?d=f:d==-1/0&&(d=-f)),null==d&&(c.required&&(j=!0),null!=c.defaultValue&&(d=c.defaultValue))),o[s+a]=d;if(j)for(a=0;a<l;++a)null!=(d=o[s+a])&&!1!==(c=p[a]).autoscale&&(c.x&&v(i.xaxis,d,d),c.y&&v(i.yaxis,d,d)),o[s+a]=null;if(w&&s>0&&(!j||null!=o[s-l])){for(a=0;a<l;++a)o[s+l+a]=o[s+a];o[s+1]=o[s-l+1]||0,j&&(o[s]=u[0]),s+=l}}}}for(t=0;t<r.length;++t){if(o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,"negative-Y"===i.transform)for(n=0;n<o.length;n+=l)null!=o[n]&&(d=o[n+1],o[n+1]=-d);y(b.processDatapoints,[i,i.datapoints])}for(t=0;t<r.length;++t){o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,p=i.datapoints.format;var C=g,k=g,N=m,O=m;for(n=0;n<o.length;n+=l)if(null!=o[n])for(a=0;a<l;++a)d=o[n+a],(c=p[a])&&!1!==c.autoscale&&d!=f&&d!=-f&&(c.x&&(d<C&&(C=d),d>N&&(N=d)),c.y&&(d<k&&(k=d),d>O&&(O=d)));if(i.bars.show){var I;switch(i.bars.align){case"left":I=0;break;case"right":I=-i.bars.barWidth;break;default:I=-i.bars.barWidth/2}i.bars.horizontal?(k+=I,O+=I+i.bars.barWidth):(C+=I,N+=I+i.bars.barWidth)}v(i.xaxis,C,N),v(i.yaxis,k,O)}e.each(S(),(function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==m&&(t.datamax=null)}))}()}function j(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function S(){return e.grep(p.concat(g),(function(e){return e}))}function C(e){var t,n,s={};for(t=0;t<p.length;++t)(n=p[t])&&(s["x"+n.n]=n.c2p(e.left));for(t=0;t<g.length;++t)(n=g[t])&&(s["y"+n.n]=n.c2p(e.top));return void 0!==s.x1&&(s.x=s.x1),void 0!==s.y1&&(s.y=s.y1),s}function k(t,n){return t[n-1]||(t[n-1]={n,direction:t==p?"x":"y",options:e.extend(!0,{},t==p?o.xaxis:o.yaxis)}),t[n-1]}function N(){B&&clearTimeout(B),c.unbind("mousemove",_),c.unbind("mouseleave",W),c.unbind("click",U),e(document).unbind("touchend",H),y(b.shutdown,[c])}function O(e){for(var t=e.options,n=e.ticks||[],s=t.labelWidth||0,a=t.labelHeight||0,i=s||("x"==e.direction?Math.floor(l.width/(n.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",o="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,d=t.font||"flot-tick-label tickLabel",c=0;c<n.length;++c){var u=n[c];if(u.label){var h=l.getTextInfo(o,u.label,d,null,i);s=Math.max(s,h.width+1),a=Math.max(a,h.height)}}e.labelWidth=t.labelWidth||s,e.labelHeight=t.labelHeight||a}function I(t){var n=t.labelWidth,s=t.labelHeight,a=t.options.position,i="x"===t.direction,r=t.options.tickLength,d=o.grid.axisMargin,c=o.grid.labelMargin,u=o.grid.eventSectionHeight,h=!0,f=!0,v=!0,b=!1;e.each(i?p:g,(function(e,n){n&&(n.show||n.reserveSpace)&&(n===t?b=!0:n.options.position===a&&(b?f=!1:h=!1),b||(v=!1))})),f&&(d=0),null==r&&(r=v?"full":5),isNaN(+r)||(c+=+r),i?(s+=c,s+=u,"bottom"==a?(m.bottom+=s+d,t.box={top:l.height-m.bottom,height:s}):(t.box={top:m.top+d,height:s},m.top+=s+d)):(n+=c,"left"==a?(t.box={left:m.left+d,width:n},m.left+=n+d):(m.right+=n+d,t.box={left:l.width-m.right,width:n})),t.position=a,t.tickLength=r,t.box.padding=c,t.box.eventSectionPadding=u,t.innermost=h}function T(){var n=S(),s=o.grid.show;for(var a in m){var i=o.grid.margin||0;m[a]="number"==typeof i?i:i[a]||0}for(var a in y(b.processOffset,[m]),m)"object"==typeof o.grid.borderWidth?m[a]+=s?o.grid.borderWidth[a]:0:m[a]+=s?o.grid.borderWidth:0;if(e.each(n,(function(e,t){var n=t.options;t.show=null==n.show?t.used:n.show,t.reserveSpace=null==n.reserveSpace?t.show:n.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),s=+(null!=t.max?t.max:e.datamax),a=s-n;if(0==a){var i=.25,r=Math.abs(0==s?1:s*i);null==t.min&&(n-=r),null!=t.max&&null==t.min||(s+=r)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(n-=a*o)<0&&null!=e.datamin&&e.datamin>=0&&(n=0),null==t.max&&(s+=a*o)>0&&null!=e.datamax&&e.datamax<=0&&(s=0))}e.min=n,e.max=s}(t)})),y(b.processRange,[]),s){for(var d=e.grep(n,(function(e){return e.show||e.reserveSpace})),c=!1,u=0;u<2&&(e.each(d,(function(e,t){$(t),R(t),c=P(t,t.ticks)||c,O(t)})),c&&b.processRange.length>0);u++)y(b.processRange,[]),c=!1;for(u=d.length-1;u>=0;--u)I(d[u]);!function(){var t,n=o.grid.minBorderMargin;if(null==n)for(n=0,t=0;t<r.length;++t)n=Math.max(n,2*(r[t].points.radius+r[t].points.lineWidth/2));var s={left:n,right:n,top:n,bottom:n};e.each(S(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(s.left=Math.max(s.left,t.labelWidth/2),s.right=Math.max(s.right,t.labelWidth/2)):(s.bottom=Math.max(s.bottom,t.labelHeight/2),s.top=Math.max(s.top,t.labelHeight/2)))})),m.left=Math.ceil(Math.max(s.left,m.left)),m.right=Math.ceil(Math.max(s.right,m.right)),m.top=Math.ceil(Math.max(s.top,m.top)),m.bottom=Math.ceil(Math.max(s.bottom,m.bottom))}(),e.each(d,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=l.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=l.height-m.bottom-m.top+e.labelHeight)}(t)}))}f=l.width-m.left-m.right,v=l.height-m.bottom-m.top,e.each(n,(function(e,t){!function(e){function t(e){return e}var n,s,a=e.options.transform||t,i=e.options.inverseTransform;"x"==e.direction?(n=e.scale=f/Math.abs(a(e.max)-a(e.min)),s=Math.min(a(e.max),a(e.min))):(n=-(n=e.scale=v/Math.abs(a(e.max)-a(e.min))),s=Math.max(a(e.max),a(e.min))),e.p2c=a==t?function(e){return(e-s)*n}:function(e){return(a(e)-s)*n},e.c2p=i?function(e){return i(s+e/n)}:function(e){return s+e/n}}(t)})),s&&e.each(S(),(function(e,t){var n,s,a,i,r,o=t.box,d=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+d,u=t.options.font||"flot-tick-label tickLabel";if(l.removeText(c),t.show&&0!=t.ticks.length)for(var h=0;h<t.ticks.length;++h)!(n=t.ticks[h]).label||n.v<t.min||n.v>t.max||("x"==t.direction?(i="center",s=m.left+t.p2c(n.v),"bottom"==t.position?a=o.top+o.padding+o.eventSectionPadding:(a=o.top+o.height-o.padding,r="bottom")):(r="middle",a=m.top+t.p2c(n.v),"left"==t.position?(s=o.left+o.width-o.padding,i="right"):s=o.left+o.padding),l.addText(c,s,a,n.label,u,null,null,i,r))})),function(){null!=o.legend.container?e.find(o.legend.container).html(""):t.find(".legend").remove();if(!o.legend.show)return;for(var n,s,a=[],i=[],l=!1,d=o.legend.labelFormatter,c=0;c<r.length;++c)(n=r[c]).label&&(s=d?d(n.label,n):n.label)&&i.push({label:s,color:n.color});if(o.legend.sorted)if(e.isFunction(o.legend.sorted))i.sort(o.legend.sorted);else if("reverse"==o.legend.sorted)i.reverse();else{var u="descending"!=o.legend.sorted;i.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=u?1:-1}))}for(c=0;c<i.length;++c){var h=i[c];c%o.legend.noColumns==0&&(l&&a.push("</tr>"),a.push("<tr>"),l=!0),a.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>")}l&&a.push("</tr>");if(0==a.length)return;var p='<table style="font-size:smaller;color:'+o.grid.color+'">'+a.join("")+"</table>";if(null!=o.legend.container)e(o.legend.container).html(p);else{var g="",f=o.legend.position,v=o.legend.margin;null==v[0]&&(v=[v,v]),"n"==f.charAt(0)?g+="top:"+(v[1]+m.top)+"px;":"s"==f.charAt(0)&&(g+="bottom:"+(v[1]+m.bottom)+"px;"),"e"==f.charAt(1)?g+="right:"+(v[0]+m.right)+"px;":"w"==f.charAt(1)&&(g+="left:"+(v[0]+m.left)+"px;");var b=e('<div class="legend">'+p.replace('style="','style="position:absolute;'+g+";")+"</div>").appendTo(t);if(0!=o.legend.backgroundOpacity){var x=o.legend.backgroundColor;null==x&&((x=(x=o.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(b,"background-color")).a=1,x=x.toString());var y=b.children();e('<div style="position:absolute;width:'+y.width()+"px;height:"+y.height()+"px;"+g+"background-color:"+x+';"> </div>').prependTo(b).css("opacity",o.legend.backgroundOpacity)}}}()}function $(t){var n,s=t.options;n="number"==typeof s.ticks&&s.ticks>0?s.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var a=(t.max-t.min)/n,i=-Math.floor(Math.log(a)/Math.LN10),r=s.tickDecimals;null!=r&&i>r&&(i=r);var o,d=Math.pow(10,-i),c=a/d;if(c<1.5?o=1:c<3?(o=2,c>2.25&&(null==r||i+1<=r)&&(o=2.5,++i)):o=c<7.5?5:10,o*=d,null!=s.minTickSize&&o<s.minTickSize&&(o=s.minTickSize),t.delta=a,t.tickDecimals=Math.max(0,null!=r?r:i),t.tickSize=s.tickSize||o,"time"==s.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n,s,a=[],i=(n=e.min,(s=e.tickSize)*Math.floor(n/s)),r=0,o=Number.NaN;do{t=o,o=i+r*e.tickSize,a.push(o),++r}while(o<e.max&&o!=t);return a},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,s=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var a=s.indexOf("."),i=-1==a?0:s.length-a-1;if(i<t.tickDecimals)return(i?s:s+".")+(""+n).substr(1,t.tickDecimals-i)}return s}),e.isFunction(s.tickFormatter)&&(t.tickFormatter=function(e,t){return""+s.tickFormatter(e,t)}),null!=s.alignTicksWithAxis){var u=("x"==t.direction?p:g)[s.alignTicksWithAxis-1];if(u&&u.used&&u!=t){var h=t.tickGenerator(t);if(h.length>0&&(null==s.min&&(t.min=Math.min(t.min,h[0])),null==s.max&&h.length>1&&(t.max=Math.max(t.max,h[h.length-1]))),t.tickGenerator=function(e){var t,n,s=[];for(n=0;n<u.ticks.length;++n)t=(u.ticks[n].v-u.min)/(u.max-u.min),t=e.min+t*(e.max-e.min),s.push(t);return s},!t.mode&&null==s.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),f=t.tickGenerator(t);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(m))||(t.tickDecimals=m)}}}}function R(t){var n,s,a=t.options.ticks,i=[];for(null==a||"number"==typeof a&&a>0?i=t.tickGenerator(t):a&&(i=e.isFunction(a)?a(t):a),t.ticks=[],n=0;n<i.length;++n){var r=null,o=i[n];"object"==typeof o?(s=+o[0],o.length>1&&(r=o[1])):s=+o,null==r&&(r=t.tickFormatter(s,t)),isNaN(s)||t.ticks.push({v:s,label:r})}}function P(e,t){var n=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),n=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),n=!0)),n}function D(){l.clear(),y(b.drawBackground,[u]);var e=o.grid;e.show&&e.backgroundColor&&(u.save(),u.translate(m.left,m.top),u.fillStyle=ee(o.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,f,v),u.restore()),e.show&&!e.aboveData&&M();for(var t=0;t<r.length;++t)y(b.drawSeries,[u,r[t]]),L(r[t]);y(b.draw,[u]),e.show&&e.aboveData&&M(),l.render(),Z()}function A(e,t){for(var n,s,a,i,r=S(),o=0;o<r.length;++o)if((n=r[o]).direction==t&&(e[i=t+n.n+"axis"]||1!=n.n||(i=t+"axis"),e[i])){s=e[i].from,a=e[i].to;break}if(e[i]||(n="x"==t?p[0]:g[0],s=e[t+"1"],a=e[t+"2"]),null!=s&&null!=a&&s>a){var l=s;s=a,a=l}return{from:s,to:a,axis:n}}function M(){var t,n,s,a;u.save(),u.translate(m.left,m.top);var i=o.grid.markings;if(i)for(e.isFunction(i)&&((n=x.getAxes()).xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)),t=0;t<i.length;++t){var r=i[t],l=A(r,"x"),d=A(r,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==d.from&&(d.from=d.axis.min),null==d.to&&(d.to=d.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||d.to<d.axis.min||d.from>d.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max);var c=l.from===l.to,h=d.from===d.to;if(!c||!h)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),d.from=Math.floor(d.axis.p2c(d.from)),d.to=Math.floor(d.axis.p2c(d.to)),c||h){var p=r.lineWidth||o.grid.markingsLineWidth,g=p%2?.5:0;u.beginPath(),u.strokeStyle=r.color||o.grid.markingsColor,u.lineWidth=p,c?(u.moveTo(l.to+g,d.from),u.lineTo(l.to+g,d.to)):(u.moveTo(l.from,d.to+g),u.lineTo(l.to,d.to+g)),u.stroke()}else u.fillStyle=r.color||o.grid.markingsColor,u.fillRect(l.from,d.to,l.to-l.from,d.from-d.to)}}n=S(),s=o.grid.borderWidth;for(var b=0;b<n.length;++b){var y,w,j,C,k=n[b],N=k.box,O=k.tickLength;if(k.show&&0!=k.ticks.length){for(u.lineWidth=1,"x"==k.direction?(y=0,w="full"==O?"top"==k.position?0:v:N.top-m.top+("top"==k.position?N.height:0)):(w=0,y="full"==O?"left"==k.position?0:f:N.left-m.left+("left"==k.position?N.width:0)),k.innermost||(u.strokeStyle=k.options.color,u.beginPath(),j=C=0,"x"==k.direction?j=f+1:C=v+1,1==u.lineWidth&&("x"==k.direction?w=Math.floor(w)+.5:y=Math.floor(y)+.5),u.moveTo(y,w),u.lineTo(y+j,w+C),u.stroke()),u.strokeStyle=k.options.tickColor,u.beginPath(),t=0;t<k.ticks.length;++t){var I=k.ticks[t].v;j=C=0,isNaN(I)||I<k.min||I>k.max||"full"==O&&("object"==typeof s&&s[k.position]>0||s>0)&&(I==k.min||I==k.max)||("x"==k.direction?(y=k.p2c(I),C="full"==O?-v:O,"top"==k.position&&(C=-C)):(w=k.p2c(I),j="full"==O?-f:O,"left"==k.position&&(j=-j)),1==u.lineWidth&&("x"==k.direction?y=Math.floor(y)+.5:w=Math.floor(w)+.5),u.moveTo(y,w),u.lineTo(y+j,w+C))}u.stroke()}}s&&(a=o.grid.borderColor,"object"==typeof s||"object"==typeof a?("object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),"object"!=typeof a&&(a={top:a,right:a,bottom:a,left:a}),s.top>0&&(u.strokeStyle=a.top,u.lineWidth=s.top,u.beginPath(),u.moveTo(0-s.left,0-s.top/2),u.lineTo(f,0-s.top/2),u.stroke()),s.right>0&&(u.strokeStyle=a.right,u.lineWidth=s.right,u.beginPath(),u.moveTo(f+s.right/2,0-s.top),u.lineTo(f+s.right/2,v),u.stroke()),s.bottom>0&&(u.strokeStyle=a.bottom,u.lineWidth=s.bottom,u.beginPath(),u.moveTo(f+s.right,v+s.bottom/2),u.lineTo(0,v+s.bottom/2),u.stroke()),s.left>0&&(u.strokeStyle=a.left,u.lineWidth=s.left,u.beginPath(),u.moveTo(0-s.left/2,v+s.bottom),u.lineTo(0-s.left/2,0),u.stroke())):(u.lineWidth=s,u.strokeStyle=o.grid.borderColor,u.strokeRect(-s/2,-s/2,f+s,v+s))),u.restore()}function L(e){e.lines.show&&(function(e){function t(e,t,n,s,a){var i=e.points,r=e.pointsize,o=null,l=null;u.beginPath();for(var d=r;d<i.length;d+=r){var c=i[d-r],h=i[d-r+1],p=i[d],g=i[d+1];if(null!=c&&null!=p){if(h<=g&&h<a.min){if(g<a.min)continue;c=(a.min-h)/(g-h)*(p-c)+c,h=a.min}else if(g<=h&&g<a.min){if(h<a.min)continue;p=(a.min-h)/(g-h)*(p-c)+c,g=a.min}if(h>=g&&h>a.max){if(g>a.max)continue;c=(a.max-h)/(g-h)*(p-c)+c,h=a.max}else if(g>=h&&g>a.max){if(h>a.max)continue;p=(a.max-h)/(g-h)*(p-c)+c,g=a.max}if(c<=p&&c<s.min){if(p<s.min)continue;h=(s.min-c)/(p-c)*(g-h)+h,c=s.min}else if(p<=c&&p<s.min){if(c<s.min)continue;g=(s.min-c)/(p-c)*(g-h)+h,p=s.min}if(c>=p&&c>s.max){if(p>s.max)continue;h=(s.max-c)/(p-c)*(g-h)+h,c=s.max}else if(p>=c&&p>s.max){if(c>s.max)continue;g=(s.max-c)/(p-c)*(g-h)+h,p=s.max}c==o&&h==l||u.moveTo(s.p2c(c)+t,a.p2c(h)+n),o=p,l=g,u.lineTo(s.p2c(p)+t,a.p2c(g)+n)}}u.stroke()}function n(e,t,n){for(var s=e.points,a=e.pointsize,i=Math.min(Math.max(0,n.min),n.max),r=0,o=!1,l=1,d=0,c=0;!(a>0&&r>s.length+a);){var h=s[(r+=a)-a],p=s[r-a+l],g=s[r],m=s[r+l];if(o){if(a>0&&null!=h&&null==g){c=r,a=-a,l=2;continue}if(a<0&&r==d+a){u.fill(),o=!1,l=1,r=d=c+(a=-a);continue}}if(null!=h&&null!=g){if(h<=g&&h<t.min){if(g<t.min)continue;p=(t.min-h)/(g-h)*(m-p)+p,h=t.min}else if(g<=h&&g<t.min){if(h<t.min)continue;m=(t.min-h)/(g-h)*(m-p)+p,g=t.min}if(h>=g&&h>t.max){if(g>t.max)continue;p=(t.max-h)/(g-h)*(m-p)+p,h=t.max}else if(g>=h&&g>t.max){if(h>t.max)continue;m=(t.max-h)/(g-h)*(m-p)+p,g=t.max}if(o||(u.beginPath(),u.moveTo(t.p2c(h),n.p2c(i)),o=!0),p>=n.max&&m>=n.max)u.lineTo(t.p2c(h),n.p2c(n.max)),u.lineTo(t.p2c(g),n.p2c(n.max));else if(p<=n.min&&m<=n.min)u.lineTo(t.p2c(h),n.p2c(n.min)),u.lineTo(t.p2c(g),n.p2c(n.min));else{var f=h,v=g;p<=m&&p<n.min&&m>=n.min?(h=(n.min-p)/(m-p)*(g-h)+h,p=n.min):m<=p&&m<n.min&&p>=n.min&&(g=(n.min-p)/(m-p)*(g-h)+h,m=n.min),p>=m&&p>n.max&&m<=n.max?(h=(n.max-p)/(m-p)*(g-h)+h,p=n.max):m>=p&&m>n.max&&p<=n.max&&(g=(n.max-p)/(m-p)*(g-h)+h,m=n.max),h!=f&&u.lineTo(t.p2c(f),n.p2c(p)),u.lineTo(t.p2c(h),n.p2c(p)),u.lineTo(t.p2c(g),n.p2c(m)),g!=v&&(u.lineTo(t.p2c(g),n.p2c(m)),u.lineTo(t.p2c(v),n.p2c(m)))}}}}u.save(),u.translate(m.left,m.top),u.lineJoin="round";var s=e.lines.lineWidth,a=e.shadowSize;if(s>0&&a>0){u.lineWidth=a,u.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;t(e.datapoints,Math.sin(i)*(s/2+a/2),Math.cos(i)*(s/2+a/2),e.xaxis,e.yaxis),u.lineWidth=a/2,t(e.datapoints,Math.sin(i)*(s/2+a/4),Math.cos(i)*(s/2+a/4),e.xaxis,e.yaxis)}u.lineWidth=s,u.strokeStyle=e.color;var r=V(e.lines,e.color,0,v);r&&(u.fillStyle=r,n(e.datapoints,e.xaxis,e.yaxis));s>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);u.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],n=null,s=null,a=e.datapoints,i=[],r=0;r<a.pointsize-2;r++)i.push(0);for(var o=0;o<a.points.length;o+=a.pointsize){var l=a.points[o],d=a.points[o+1];s=o===a.points.length-a.pointsize?null:a.points[o+a.pointsize],null!==l&&null!==d&&null===n&&null===s&&(t.push(l),t.push(d),t.push.apply(t,i)),n=l}var c=a.points;a.points=t,e.points.radius=e.lines.lineWidth/2,F(e),a.points=c}(e)),e.bars.show&&function(e){function t(t,n,s,a,i,r){for(var o=t.points,l=t.pointsize,d=0;d<o.length;d+=l)null!=o[d]&&E(o[d],o[d+1],o[d+2],n,s,a,i,r,u,e.bars.horizontal,e.bars.lineWidth)}var n;switch(u.save(),u.translate(m.left,m.top),u.lineWidth=e.bars.lineWidth,u.strokeStyle=e.color,e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}var s=e.bars.fill?function(t,n){return V(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,s,e.xaxis,e.yaxis),u.restore()}(e),e.points.show&&F(e)}function F(e){function t(e,t,n,s,a,i,r,o){for(var l=e.points,d=e.pointsize,c=0;c<l.length;c+=d){var h=l[c],p=l[c+1];null==h||h<i.min||h>i.max||p<r.min||p>r.max||(u.beginPath(),h=i.p2c(h),p=r.p2c(p)+s,"circle"==o?u.arc(h,p,t,0,a?Math.PI:2*Math.PI,!1):o(u,h,p,t,a),u.closePath(),n&&(u.fillStyle=n,u.fill()),u.stroke())}}u.save(),u.translate(m.left,m.top);var n=e.points.lineWidth,s=e.shadowSize,a=e.points.radius,i=e.points.symbol;if(0==n&&(n=1e-4),n>0&&s>0){var r=s/2;u.lineWidth=r,u.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,a,null,r+r/2,!0,e.xaxis,e.yaxis,i),u.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,a,null,r/2,!0,e.xaxis,e.yaxis,i)}u.lineWidth=n,u.strokeStyle=e.color,t(e.datapoints,a,V(e.points,e.color),0,!1,e.xaxis,e.yaxis,i),u.restore()}function E(e,t,n,s,a,i,r,o,l,d,c){var u,h,p,g,m,f,v,b,x;d?(b=f=v=!0,m=!1,g=t+s,p=t+a,(h=e)<(u=n)&&(x=h,h=u,u=x,m=!0,f=!1)):(m=f=v=!0,b=!1,u=e+s,h=e+a,(g=t)<(p=n)&&(x=g,g=p,p=x,b=!0,v=!1)),h<r.min||u>r.max||g<o.min||p>o.max||(u<r.min&&(u=r.min,m=!1),h>r.max&&(h=r.max,f=!1),p<o.min&&(p=o.min,b=!1),g>o.max&&(g=o.max,v=!1),u=r.p2c(u),p=o.p2c(p),h=r.p2c(h),g=o.p2c(g),i&&(l.fillStyle=i(p,g),l.fillRect(u,g,h-u,p-g)),c>0&&(m||f||v||b)&&(l.beginPath(),l.moveTo(u,p),m?l.lineTo(u,g):l.moveTo(u,g),v?l.lineTo(h,g):l.moveTo(h,g),f?l.lineTo(h,p):l.moveTo(h,p),b?l.lineTo(u,p):l.moveTo(u,p),l.stroke()))}function V(t,n,s,a){var i=t.fill;if(!i)return null;if(t.fillColor)return ee(t.fillColor,s,a,n);var r=e.color.parse(n);return r.a="number"==typeof i?i:.4,r.normalize(),r.toString()}x.setData=w,x.setupGrid=T,x.draw=D,x.getPlaceholder=function(){return t},x.getCanvas=function(){return l.element},x.getPlotOffset=function(){return m},x.width=function(){return f},x.height=function(){return v},x.offset=function(){var e=c.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return r},x.getAxes=function(){var t={};return e.each(p.concat(g),(function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)})),t},x.getXAxes=function(){return p},x.getYAxes=function(){return g},x.c2p=C,x.p2c=function(e){var t,n,s,a={};for(t=0;t<p.length;++t)if((n=p[t])&&n.used&&(s="x"+n.n,null==e[s]&&1==n.n&&(s="x"),null!=e[s])){a.left=n.p2c(e[s]);break}for(t=0;t<g.length;++t)if((n=g[t])&&n.used&&(s="y"+n.n,null==e[s]&&1==n.n&&(s="y"),null!=e[s])){a.top=n.p2c(e[s]);break}return a},x.getOptions=function(){return o},x.highlight=Q,x.unhighlight=K,x.triggerRedrawOverlay=Z,x.pointOffset=function(e){return{left:parseInt(p[j(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(g[j(e,"y")-1].p2c(+e.y)+m.top,10)}},x.shutdown=N,x.destroy=function(){N(),t.removeData("plot").empty(),r=[],o=null,l=null,d=null,c=null,u=null,h=null,p=[],g=[],b=null,z=[],x=null},x.resize=function(){var e=t.width(),n=t.height();l.resize(e,n),d.resize(e,n)},x.hooks=b,function(){for(var t={Canvas:n},s=0;s<i.length;++s){var a=i[s];a.init(x,t),a.options&&e.extend(!0,o,a.options)}}(),function(n){e.extend(!0,o,n),n&&n.colors&&(o.colors=n.colors);null==o.xaxis.color&&(o.xaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.yaxis.color&&(o.yaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.xaxis.tickColor&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);null==o.yaxis.tickColor&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);null==o.grid.borderColor&&(o.grid.borderColor=o.grid.color);null==o.grid.tickColor&&(o.grid.tickColor=e.color.parse(o.grid.color).scale("a",.22).toString());var s,a,i,r=t.css("font-size"),l=r?+r.replace("px",""):13,d={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(i=o.xaxes.length||1,s=0;s<i;++s)(a=o.xaxes[s])&&!a.tickColor&&(a.tickColor=a.color),a=e.extend(!0,{},o.xaxis,a),o.xaxes[s]=a,a.font&&(a.font=e.extend({},d,a.font),a.font.color||(a.font.color=a.color),a.font.lineHeight||(a.font.lineHeight=Math.round(1.15*a.font.size)));for(i=o.yaxes.length||1,s=0;s<i;++s)(a=o.yaxes[s])&&!a.tickColor&&(a.tickColor=a.color),a=e.extend(!0,{},o.yaxis,a),o.yaxes[s]=a,a.font&&(a.font=e.extend({},d,a.font),a.font.color||(a.font.color=a.color),a.font.lineHeight||(a.font.lineHeight=Math.round(1.15*a.font.size)));o.xaxis.noTicks&&null==o.xaxis.ticks&&(o.xaxis.ticks=o.xaxis.noTicks);o.yaxis.noTicks&&null==o.yaxis.ticks&&(o.yaxis.ticks=o.yaxis.noTicks);o.x2axis&&(o.xaxes[1]=e.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",null==o.x2axis.min&&(o.xaxes[1].min=null),null==o.x2axis.max&&(o.xaxes[1].max=null));o.y2axis&&(o.yaxes[1]=e.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",null==o.y2axis.min&&(o.yaxes[1].min=null),null==o.y2axis.max&&(o.yaxes[1].max=null));o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas);o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor);o.lines&&e.extend(!0,o.series.lines,o.lines);o.points&&e.extend(!0,o.series.points,o.points);o.bars&&e.extend(!0,o.series.bars,o.bars);null!=o.shadowSize&&(o.series.shadowSize=o.shadowSize);null!=o.highlightColor&&(o.series.highlightColor=o.highlightColor);for(s=0;s<o.xaxes.length;++s)k(p,s+1).options=o.xaxes[s];for(s=0;s<o.yaxes.length;++s)k(g,s+1).options=o.yaxes[s];for(var c in b)o.hooks[c]&&o.hooks[c].length&&(b[c]=b[c].concat(o.hooks[c]));y(b.processOptions,[o])}(a),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");l=new n("flot-base",t),d=new n("flot-overlay",t),u=l.context,h=d.context,c=e(d.element).unbind();var s=t.data("plot");s&&(s.shutdown(),d.clear());t.data("plot",x)}(),w(s),T(),D(),function(){o.grid.hoverable&&(c.mousemove(_),c.bind("mouseleave",W),e(document).bind("touchend",H));o.grid.clickable&&c.click(U);y(b.bindEvents,[c])}();var z=[],B=null;function _(e){o.grid.hoverable&&q("plothover",e,(function(e){return 0!=e.hoverable}))}function W(e){o.grid.hoverable&&q("plothover",e,(function(e){return!1}))}function U(e){x.isSelecting||q("plotclick",e,(function(e){return 0!=e.clickable}))}function H(e){e.cancelable&&(c.is(e.target)||0!==c.has(e.target).length?(_(function(e){if(!e||!e.originalEvent)return e;if(e.pageX&&e.pageY)return e;var t=e.originalEvent;if(0===t.changedTouches.length)return e;var n=t.changedTouches[0];return e.pageX=n.pageX,e.pageY=n.pageY,e}(e)),e.preventDefault()):q("plotleave",e,(function(e){})))}function q(e,n,s){var a=c.offset(),i=n.pageX-a.left-m.left,l=n.pageY-a.top-m.top,d=C({left:i,top:l});d.pageX=n.pageX,d.pageY=n.pageY,d.ctrlKey=n.ctrlKey,d.metaKey=n.metaKey;var u=function(e,t,n){var s,a,i,l=o.grid.mouseActiveRadius,d=l*l+1,c=null;for(s=r.length-1;s>=0;--s)if(n(r[s])){var u=r[s],h=u.xaxis,p=u.yaxis,g=u.datapoints.points,m=h.c2p(e),f=p.c2p(t),v=l/h.scale,b=l/p.scale;if(i=u.datapoints.pointsize,h.options.inverseTransform&&(v=Number.MAX_VALUE),p.options.inverseTransform&&(b=Number.MAX_VALUE),u.lines.show||u.points.show)for(a=0;a<g.length;a+=i){var x=g[a],y=g[a+1];if(null!=x&&!(x-m>v||x-m<-v||y-f>b||y-f<-b)){var w=Math.abs(h.p2c(x)-e),j=Math.abs(p.p2c(y)-t),S=w*w+j*j;S<d&&(d=S,c=[s,a/i])}}if(u.bars.show&&!c){var C,k;switch(u.bars.align){case"left":C=0;break;case"right":C=-u.bars.barWidth;break;default:C=-u.bars.barWidth/2}for(k=C+u.bars.barWidth,a=0;a<g.length;a+=i){x=g[a],y=g[a+1];var N=g[a+2];null!=x&&(r[s].bars.horizontal?m<=Math.max(N,x)&&m>=Math.min(N,x)&&f>=y+C&&f<=y+k:m>=x+C&&m<=x+k&&f>=Math.min(N,y)&&f<=Math.max(N,y))&&(c=[s,a/i])}}}return c?(s=c[0],a=c[1],i=r[s].datapoints.pointsize,{datapoint:r[s].datapoints.points.slice(a*i,(a+1)*i),dataIndex:a,series:r[s],seriesIndex:s}):null}(i,l,s);if(u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+a.left+m.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+a.top+m.top,10)),o.grid.autoHighlight){for(var h=0;h<z.length;++h){var p=z[h];p.auto!=e||u&&p.series==u.series&&p.point[0]==u.datapoint[0]&&p.point[1]==u.datapoint[1]||K(p.series,p.point)}u&&Q(u.series,u.datapoint,e)}t.trigger(e,[d,u])}function Z(){var e=o.interaction.redrawOverlayInterval;-1!=e?B||(B=setTimeout(G,e)):G()}function G(){var e,t;for(B=null,h.save(),d.clear(),h.translate(m.left,m.top),e=0;e<z.length;++e)(t=z[e]).series.bars.show?X(t.series,t.point):Y(t.series,t.point);h.restore(),y(b.drawOverlay,[h])}function Q(e,t,n){if("number"==typeof e&&(e=r[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var a=J(e,t);-1==a?(z.push({series:e,point:t,auto:n}),Z()):n||(z[a].auto=!1)}function K(e,t){if(null==e&&null==t)return z=[],void Z();if("number"==typeof e&&(e=r[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var s=J(e,t);-1!=s&&(z.splice(s,1),Z())}function J(e,t){for(var n=0;n<z.length;++n){var s=z[n];if(s.series==e&&s.point[0]==t[0]&&s.point[1]==t[1])return n}return-1}function Y(t,n){var s=n[0],a=n[1],i=t.xaxis,r=t.yaxis,o="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(s<i.min||s>i.max||a<r.min||a>r.max)){var l=t.points.radius+t.points.lineWidth/2;h.lineWidth=l,h.strokeStyle=o;var d=1.5*l;s=i.p2c(s),a=r.p2c(a),h.beginPath(),"circle"==t.points.symbol?h.arc(s,a,d,0,2*Math.PI,!1):t.points.symbol(h,s,a,d,!1),h.closePath(),h.stroke()}}function X(t,n){var s,a="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=a;switch(t.bars.align){case"left":s=0;break;case"right":s=-t.bars.barWidth;break;default:s=-t.bars.barWidth/2}h.lineWidth=t.bars.lineWidth,h.strokeStyle=a,E(n[0],n[1],n[2]||0,s,s+t.bars.barWidth,(function(){return i}),t.xaxis,t.yaxis,h,t.bars.horizontal,t.bars.lineWidth)}function ee(t,n,s,a){if("string"==typeof t)return t;for(var i=u.createLinearGradient(0,s,0,n),r=0,o=t.colors.length;r<o;++r){var l=t.colors[r];if("string"!=typeof l){var d=e.color.parse(a);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}i.addColorStop(r/(o-1),l)}return i}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),n.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,s=this.context,a=this.pixelRatio;this.width!=e&&(n.width=e*a,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*a,n.style.height=t+"px",this.height=t),s.restore(),s.save(),s.scale(a,a)},n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.render=function(){var e=this._textCache;for(var n in e)if(t.call(e,n)){var s=this.getTextLayer(n),a=e[n];for(var i in s.hide(),a)if(t.call(a,i)){var r=a[i];for(var o in r)if(t.call(r,o)){for(var l,d=r[o].positions,c=0;l=d[c];c++)l.active?l.rendered||(s.append(l.element),l.rendered=!0):(d.splice(c--,1),l.rendered&&l.element.detach());0==d.length&&delete r[o]}}s.show()}},n.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},n.prototype.getTextInfo=function(t,n,s,a,i){var r,o,l,d;if(n=""+n,r="object"==typeof s?s.style+" "+s.variant+" "+s.weight+" "+s.size+"px/"+s.lineHeight+"px "+s.family:s,null==(o=this._textCache[t])&&(o=this._textCache[t]={}),null==(l=o[r])&&(l=o[r]={}),null==(d=l[n])){var c=e("<div></div>").html(n).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof s?c.css({font:r,color:s.color}):"string"==typeof s&&c.addClass(s),d=l[n]={element:c,positions:[]};var u=this._textSizeCache[n];u?(d.width=u.width,d.height=u.height):(d.width=c.outerWidth(!0),d.height=c.outerHeight(!0),this._textSizeCache[n]={width:d.width,height:d.height}),c.detach()}return d},n.prototype.addText=function(e,t,n,s,a,i,r,o,l){var d=this.getTextInfo(e,s,a,i,r),c=d.positions;"center"==o?t-=d.width/2:"right"==o&&(t-=d.width),"middle"==l?n-=d.height/2:"bottom"==l&&(n-=d.height);for(var u,h=0;u=c[h];h++)if(u.x==t&&u.y==n)return void(u.active=!0);u={active:!0,rendered:!1,element:c.length?d.element.clone():d.element,x:t,y:n},c.push(u),u.element.css({top:Math.round(n),left:Math.round(t),"text-align":o})},n.prototype.removeText=function(e,n,s,a,i,r){if(null==a){var o=this._textCache[e];if(null!=o)for(var l in o)if(t.call(o,l)){var d=o[l];for(var c in d)if(t.call(d,c))for(var u=d[c].positions,h=0;p=u[h];h++)p.active=!1}}else{var p;for(u=this.getTextInfo(e,a,i,r).positions,h=0;p=u[h];h++)p.x==n&&p.y==s&&(p.active=!1)}},e.plot=function(t,n,a){return new s(e(t),n,a,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each((function(){e.plot(this,t,n)}))}}(jQuery)},4027:()=>{!function(e){e.plot.plugins.push({init:function(t){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},s={},a=null;function i(e){n.active&&(u(e),t.getPlaceholder().trigger("plotselecting",[o()]))}function r(i){1==i.which&&(document.body.focus(),void 0!==document.onselectstart&&null==s.onselectstart&&(s.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==s.ondrag&&(s.ondrag=document.ondrag,document.ondrag=function(){return!1}),c(n.first,i),n.active=!0,a=function(e){!function(e){a=null,void 0!==document.onselectstart&&(document.onselectstart=s.onselectstart);void 0!==document.ondrag&&(document.ondrag=s.ondrag);n.active=!1,u(e),g()?l(e):(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null]));setTimeout((function(){t.isSelecting=!1}),10)}(e)},e(document).one("mouseup",a))}function o(){if(!g())return null;if(!n.show)return null;var s={},a=n.first,i=n.second,r=t.getAxes();return e.each(r,(function(e,t){t.used&&(anyUsed=!1)})),e.each(r,(function(e,t){t.used;var n=t.c2p(a[t.direction]),r=t.c2p(i[t.direction]);s[e]={from:Math.min(n,r),to:Math.max(n,r)}})),s}function l(e){var n=o();n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,t.getPlaceholder().trigger("plotselected",[n]),n.xaxis&&n.yaxis&&t.getPlaceholder().trigger("selected",[{x1:n.xaxis.from,y1:n.yaxis.from,x2:n.xaxis.to,y2:n.yaxis.to}])}function d(e,t,n){return t<e?e:t>n?n:t}function c(e,s){var a=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=d(0,s.pageX-i.left-r.left,t.width()),e.y=d(0,s.pageY-i.top-r.top,t.height()),"y"==a.selection.mode&&(e.x=e==n.first?0:t.width()),"x"==a.selection.mode&&(e.y=e==n.first?0:t.height())}function u(e){null!=e.pageX&&(c(n.second,e),g()?(t.isSelecting=!0,n.show=!0,t.triggerRedrawOverlay()):h(!0))}function h(e){n.show&&(n.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function p(e,n){var s,a,i,r,o=t.getAxes();for(var l in o)if((s=o[l]).direction==n&&(e[r=n+s.n+"axis"]||1!=s.n||(r=n+"axis"),e[r])){a=e[r].from,i=e[r].to;break}if(e[r]||(s="x"==n?t.getXAxes()[0]:t.getYAxes()[0],a=e[n+"1"],i=e[n+"2"]),null!=a&&null!=i&&a>i){var d=a;a=i,i=d}return{from:a,to:i,axis:s}}function g(){var e=t.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=e&&Math.abs(n.second.y-n.first.y)>=e}t.clearSelection=h,t.setSelection=function(e,s){var a,i=t.getOptions();"y"==i.selection.mode?(n.first.x=0,n.second.x=t.width()):(a=p(e,"x"),n.first.x=a.axis.p2c(a.from),n.second.x=a.axis.p2c(a.to)),"x"==i.selection.mode?(n.first.y=0,n.second.y=t.height()):(a=p(e,"y"),n.first.y=a.axis.p2c(a.from),n.second.y=a.axis.p2c(a.to)),n.show=!0,t.triggerRedrawOverlay(),!s&&g()&&l()},t.getSelection=o,t.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(r))})),t.hooks.drawOverlay.push((function(t,s){if(n.show&&g()){var a=t.getPlotOffset(),i=t.getOptions();s.save(),s.translate(a.left,a.top);var r=e.color.parse(i.selection.color);s.strokeStyle=r.scale("a",.8).toString(),s.lineWidth=1,s.lineJoin=i.selection.shape,s.fillStyle=r.scale("a",.4).toString();var o=Math.min(n.first.x,n.second.x)+.5,l=Math.min(n.first.y,n.second.y)+.5,d=Math.abs(n.second.x-n.first.x)-1,c=Math.abs(n.second.y-n.first.y)-1;s.fillRect(o,l,d,c),s.strokeRect(o,l,d,c),s.restore()}})),t.hooks.shutdown.push((function(t,n){n.unbind("mousemove",i),n.unbind("mousedown",r),a&&(e(document).unbind("mouseup",a),void 0!==document.onselectstart&&(document.onselectstart=s.onselectstart),void 0!==document.ondrag&&(document.ondrag=s.ondrag))}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},65103:()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,n){if(null!=t.stack&&!1!==t.stack){var s=function(e,t){for(var n=null,s=0;s<t.length&&e!=t[s];++s)t[s].stack==e.stack&&(n=t[s]);return n}(t,e.getData());if(s){for(var a,i,r,o,l,d,c=n.pointsize,u=n.points,h=s.datapoints.pointsize,p=s.datapoints.points,g=[],m=t.lines.show,f=t.bars.horizontal,v=c>2&&(f?n.format[2].x:n.format[2].y),b=m&&t.lines.steps,x=f?1:0,y=f?0:1,w=0,j=0;!(w>=u.length&&j>=p.length);){if(l=g.length,w<u.length&&null==u[w]){for(d=0;d<c;++d)g.push(u[w+d]);w+=c}else if(w>=u.length){for(d=0;d<c;++d)g.push(p[j+d]);v&&(g[l+2]=p[j+y]),j+=h}else if(j>=p.length){for(d=0;d<c;++d)g.push(u[w+d]);w+=c}else if(j<p.length&&null==p[j])j+=h;else{if(a=u[w+x],u[w+y],i=p[j+x],r=p[j+y],o=0,a==i){for(d=0;d<c;++d)g.push(u[w+d]);g[l+y]+=r,o=r,w+=c,j+=h}else if(a>i){if(0==w){for(d=0;d<c;++d)g.push(p[j+d]);o=r}if(w>0&&null!=u[w-c]){for(g.push(i),g.push(0+r),d=2;d<c;++d)g.push(u[w+d]);o=r}j+=h}else{for(d=0;d<c;++d)g.push(u[w+d]);j>0&&null!=p[j-h]&&(o=0),g[l+y]+=o,w+=c}fromgap=!1,l!=g.length&&v&&(g[l+2]=o)}if(b&&l!=g.length&&l>0&&null!=g[l]&&g[l]!=g[l-c]&&g[l+1]!=g[l-c+1]){for(d=0;d<c;++d)g[l+c+d]=g[l+d];g[l+1]=g[l-c+1]}}n.points=g}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},85095:()=>{jQuery.plot.plugins.push({init:function(e){var t={},n=!1,s={};function a(e){var t=e.length,n={};if(t>0)for(var s=0;s<t;s++)if(e[s].stackpercent){var a=0,i=1;e[s].bars&&e[s].bars.horizontal&&!0===e[s].bars.horizontal&&(a=1,i=0);for(var r=e[s].data.length,o=0;o<r;o++){var l=0;null!=e[s].data[o][1]&&(l=e[s].data[o][i]),n[e[s].data[o][a]+""]?n[e[s].data[o][a]+""]+=l:n[e[s].data[o][a]+""]=l}}return n}e.hooks.processRawData.push((function(e,t,i,r){if(n||(n=!0,s=a(e.getData())),1==t.stackpercent){var o=i.length;t.percents=[];var l=0,d=1;t.bars&&t.bars.horizontal&&!0===t.bars.horizontal&&(l=1,d=0);for(var c=0;c<o;c++){var u=s[i[c][l]+""];u>0?t.percents.push(100*i[c][d]/u):t.percents.push(0)}}})),e.hooks.processDatapoints.push((function(e,i,r){if(i.stackpercent){n||(s=a(e.getData()));var o=[],l=0,d=1;i.bars&&i.bars.horizontal&&!0===i.bars.horizontal&&(l=1,d=0);for(var c=0;c<r.points.length;c+=3)t[r.points[c+l]]||(t[r.points[c+l]]=0),o[c+l]=r.points[c+l],o[c+d]=r.points[c+d]+t[r.points[c+l]],o[c+2]=t[r.points[c+l]],t[r.points[c+l]]+=r.points[c+d],s[o[c+l]+""]>0?(o[c+d]=100*o[c+d]/s[o[c+l]+""],o[c+2]=100*o[c+2]/s[o[c+l]+""]):(o[c+d]=0,o[c+2]=0);r.points=o}}))},options:{series:{stackpercent:null}},name:"stackpercent",version:"0.1"})},59554:()=>{!function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,s){if("function"==typeof e.strftime)return e.strftime(t);var a,i=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},r=[],o=!1,l=e.getHours(),d=l<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==s&&(s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),a=l>12?l-12:0==l?12:l;for(var c=0;c<t.length;++c){var u=t.charAt(c);if(o){switch(u){case"a":u=""+s[e.getDay()];break;case"b":u=""+n[e.getMonth()];break;case"d":u=i(e.getDate(),"");break;case"e":u=i(e.getDate()," ");break;case"h":case"H":u=i(l);break;case"I":u=i(a);break;case"l":u=i(a," ");break;case"m":u=i(e.getMonth()+1,"");break;case"M":u=i(e.getMinutes());break;case"q":u=""+(Math.floor(e.getMonth()/3)+1);break;case"S":u=i(e.getSeconds());break;case"y":u=i(e.getFullYear()%100);break;case"Y":u=""+e.getFullYear();break;case"p":u=d?"am":"pm";break;case"P":u=d?"AM":"PM";break;case"w":u=""+e.getDay()}r.push(u),o=!1}else"%"==u?o=!0:r.push(u)}return r.join("")}function s(e){function t(e,t,n,s){e[t]=function(){return n[s].apply(n,arguments)}}var n={date:e};null!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var s=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],a=0;a<s.length;a++)t(n,"get"+s[a],e,"getUTC"+s[a]),t(n,"set"+s[a],e,"setUTC"+s[a]);return n}function a(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return s(new Date(e))}return s(new Date(e))}var i={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=r.concat([[3,"month"],[6,"month"],[1,"year"]]),l=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(s,r){e.each(s.getAxes(),(function(e,s){var r=s.options;"time"==r.mode&&(s.tickGenerator=function(e){var n=[],s=a(e.min,r),d=0,c=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?l:o;null!=r.minTickSize&&(d="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*i[r.minTickSize[1]]);for(var u=0;u<c.length-1&&!(e.delta<(c[u][0]*i[c[u][1]]+c[u+1][0]*i[c[u+1][1]])/2&&c[u][0]*i[c[u][1]]>=d);++u);var h=c[u][0],p=c[u][1];if("year"==p){if(null!=r.minTickSize&&"year"==r.minTickSize[1])h=Math.floor(r.minTickSize[0]);else{var g=Math.pow(10,Math.floor(Math.log(e.delta/i.year)/Math.LN10)),m=e.delta/i.year/g;h=m<1.5?1:m<3?2:m<7.5?5:10,h*=g}h<1&&(h=1)}e.tickSize=r.tickSize||[h,p];var f=e.tickSize[0];p=e.tickSize[1];var v=f*i[p];"second"==p?s.setSeconds(t(s.getSeconds(),f)):"minute"==p?s.setMinutes(t(s.getMinutes(),f)):"hour"==p?s.setHours(t(s.getHours(),f)):"month"==p?s.setMonth(t(s.getMonth(),f)):"quarter"==p?s.setMonth(3*t(s.getMonth()/3,f)):"year"==p&&s.setFullYear(t(s.getFullYear(),f)),s.setMilliseconds(0),v>=i.minute&&s.setSeconds(0),v>=i.hour&&s.setMinutes(0),v>=i.day&&s.setHours(0),v>=4*i.day&&s.setDate(1),v>=2*i.month&&s.setMonth(t(s.getMonth(),3)),v>=2*i.quarter&&s.setMonth(t(s.getMonth(),6)),v>=i.year&&s.setMonth(0);var b,x=0,y=Number.NaN;do{if(b=y,y=s.getTime(),n.push(y),"month"==p||"quarter"==p)if(f<1){s.setDate(1);var w=s.getTime();s.setMonth(s.getMonth()+("quarter"==p?3:1));var j=s.getTime();s.setTime(y+x*i.hour+(j-w)*f),x=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+f*("quarter"==p?3:1));else"year"==p?s.setFullYear(s.getFullYear()+f):s.setTime(y+v)}while(y<e.max&&y!=b);return n},s.tickFormatter=function(e,t){var s=a(e,t.options);if(null!=r.timeformat)return n(s,r.timeformat,r.monthNames,r.dayNames);var o=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*i[t.tickSize[1]],d=t.max-t.min,c=r.twelveHourClock?" %p":"",u=r.twelveHourClock?"%I":"%H";return n(s,l<i.minute?u+":%M:%S"+c:l<i.day?d<2*i.day?u+":%M"+c:"%b %d "+u+":%M"+c:l<i.month?"%b %d":o&&l<i.quarter||!o&&l<i.year?d<i.year?"%b":"%b %Y":o&&l<i.year?d<i.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=n}(jQuery)}}]);
//# sourceMappingURL=7180.46ae8db978f2258bc171.js.map